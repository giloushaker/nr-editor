import{H as y,p as x,r as S,t as b,h as v,E as F,u as w}from"./editorStore.7d42b65e.js";import{a as g,o as a,b as c,F as p,m as _,K as k,Y as B,i as n,c as C,l as I,w as m,v as V,s as T,t as f,x as h,S as E,y as D,z as N}from"./entry.b7bb76f8.js";const j={emits:["uploaded"],data(){return{uploading:!1}},computed:{electron(){return!!globalThis.electron}},methods:{async onFilesSelected(t){const e=[];if(t.length){t=[t[0]];for(const d of t){const i=await y(d);if(!(i!=null&&i.length))return;for(const o of i.filter(s=>x(s.name))){const s=await S(o.data,b(o.name));v(s).fullFilePath=o.path.replaceAll("\\","/"),e.push(s)}}e.length&&this.$emit("uploaded",e)}},async popFileInput(){var t;if(!globalThis.electron)throw new Error("SelectFile is for use in electron app only");try{this.uploading=!0;const e=await F({properties:["openFile"]});(t=e==null?void 0:e.filePaths)!=null&&t.length&&await this.onFilesSelected(e.filePaths)}catch(e){console.error(e)}finally{this.uploading=!1}}}};const z=["disabled"],A={key:1};function J(t,e,d,i,o,s){return s.electron?(a(),c("button",{key:0,onClick:e[0]||(e[0]=(...u)=>s.popFileInput&&s.popFileInput(...u)),class:"bouton",disabled:o.uploading},[o.uploading?(a(),c(p,{key:1},[_(" ... ")],64)):(a(),c(p,{key:0},[_(" Load System ")],64))],8,z)):(a(),c("span",A,"<SelectFile> is only available in electron app"))}const R=g(j,[["render",J],["__scopeId","data-v-1fa7b178"]]),O={emits:["created"],data(){return{open:!1,text:"",format:"gst"}},setup(){return{store:w(),settings:k()}},computed:{electron(){return!!globalThis.electron},folder(){return this.settings.systemsFolder?`${B(this.settings.systemsFolder.replaceAll("\\","/"),"/")}`:""}},methods:{click(){this.text="",this.open=!0},async create(){if(this.text){const t=await this.store.create_system(this.text,this.folder,this.format);this.$emit("created",t)}}}};const r=t=>(D("data-v-79601ba6"),t=t(),N(),t),U=r(()=>n("h2",{class:"text-center"},"Create System",-1)),M=r(()=>n("span",null,"Name ",-1)),X=r(()=>n("span",null,"Format ",-1)),q=r(()=>n("option",{value:"gstz"},".gstz (Zipped Xml)",-1)),H=r(()=>n("option",{value:"gst"},".gst (Xml)",-1)),K=r(()=>n("option",{value:"json"},".json (JSON)",-1)),L=[q,H,K],P=r(()=>n("div",null," The system will be created at: ",-1)),Y={class:"gray"};function Z(t,e,d,i,o,s){const u=E;return a(),c(p,null,[n("button",{class:"bouton",onClick:e[0]||(e[0]=(...l)=>s.click&&s.click(...l))}," Create System "),o.open?(a(),C(u,{key:0,modelValue:o.open,"onUpdate:modelValue":e[3]||(e[3]=l=>o.open=l),button:"Create",onButton:s.create},{default:I(()=>[U,M,m(n("input",{class:"w-full",type:"text","onUpdate:modelValue":e[1]||(e[1]=l=>o.text=l),required:""},null,512),[[V,o.text]]),X,m(n("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.format=l)},L,512),[[T,o.format]]),s.electron?(a(),c(p,{key:0},[P,n("div",Y,f(s.folder)+"/"+f(o.text)+"/",1)],64)):h("",!0)]),_:1},8,["modelValue","onButton"])):h("",!0)],64)}const W=g(O,[["render",Z],["__scopeId","data-v-79601ba6"]]);export{R as _,W as a};
//# sourceMappingURL=CreateSystem.b1b162f1.js.map
