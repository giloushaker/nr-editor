var tn=Object.defineProperty;var nn=(e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var me=(e,t,n)=>(nn(e,typeof t!="symbol"?t+"":t,n),n);import{e as X,f as sn,a as v,o as l,b as d,h as g,i,r as N,c as _,u as on,j as ln,k as Ze,w as k,v as S,F as b,l as u,m as P,p as M,q as I,s as h,x as ee,y as he,z as Z,A as an,B as F,C as W,D as T,E as U,t as f,n as pe,g as Ce,G as je,H as O,I as L,J as G,K as Re,L as j,M as te,N as st,O as yt,P as Te,Q as _e,R as Se,T as At,S as rn,U as Ye,V as dn,W as cn,X as H,Y as _t,Z as un,$ as mn,a0 as gn,a1 as Ct,a2 as hn,a3 as vt,a4 as Me,a5 as pn,a6 as bt,a7 as fn,a8 as We,a9 as Ve,aa as kt,ab as yn,ac as An,ad as _n,ae as ot,af as Cn,ag as vn,ah as bn,ai as kn,aj as En,ak as wn,al as In,am as xn,an as Tn,ao as Sn,ap as Rn}from"./entry.df3b54b8.js";import{_ as Vn}from"./Loading.650e4790.js";import{E as ne,_ as se,a as Et}from"./catalogue.39db0755.js";import{_ as V,a as Fe,b as Fn,c as Nn}from"./warning_sign.e21fde37.js";import{N as wt}from"./NodePath.64f83d28.js";import{_ as Bn}from"./right2.91afc9dd.js";const Un=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),Pn=(e,t)=>(n,o)=>(sn(()=>e({...Un(n),...o.attrs},o)),()=>{var r,s;return t?(s=(r=o.slots).default)==null?void 0:s.call(r):null}),On=X({name:"Title",inheritAttrs:!1,setup:Pn((e,{slots:t})=>{var o,r,s;return{title:((s=(r=(o=t.default)==null?void 0:o.call(t))==null?void 0:r[0])==null?void 0:s.children)||null}})}),Ln=X({name:"Head",inheritAttrs:!1,setup:(e,t)=>()=>{var n,o;return(o=(n=t.slots).default)==null?void 0:o.call(n)}}),Qn={props:{item:{type:Object,required:!0}},computed:{comment:{get(){return(Array.isArray(this.item.comment)?this.item.comment[0]:this.item.comment)||""},set(e){this.item.comment=e||void 0}}},methods:{changed(){var e;(e=this.item.getCatalogue())==null||e.refreshErrors(this.item)}}},Gn=i("legend",null,"Comment",-1);function Dn(e,t,n,o,r,s){const c=ne;return l(),d("fieldset",null,[Gn,g(c,{modelValue:s.comment,"onUpdate:modelValue":t[0]||(t[0]=a=>s.comment=a)},null,8,["modelValue"])])}const Q=v(Qn,[["render",Dn]]),qn=X({components:{EditableDiv:ne},emits:["update:modelValue"],props:{modelValue:{type:Array}},data(){return{_value:""}},watch:{modelValue:{immediate:!0,handler(e){this._value=e?e.join(`
`):""}}},methods:{toValue(e){const t=e.split(`
`).filter(n=>n);if(t.length)return t}}});function Kn(e,t,n,o,r,s){const c=N("EditableDiv");return l(),_(c,{modelValue:e._value,"onUpdate:modelValue":t[0]||(t[0]=a=>e._value=a),onChange:t[1]||(t[1]=a=>e.$emit("update:modelValue",("toValue"in e?e.toValue:on(ln))(e._value)))},null,8,["modelValue"])}const Mn=v(qn,[["render",Kn]]),Wn={components:{InputStringArray:Mn},emits:["idchanged"],props:{item:{type:Object,required:!0},aliases:{type:Boolean,default:!1}},methods:{idchanged(){this.changed()},refresh(){this.id=Ze(),this.idchanged()}},computed:{id:{get(){return this.item.id},set(e){const t=this.item,n=t.getCatalogue();n.removeFromIndex(t),t.id=e,n.addToIndex(t)}},typeName(){return this.item.editorTypeName},sortable(){return["forceEntry","forceEntryLink","selectionEntry","selectionEntryGroup","selectionEntryLink","selectionEntryGroupLink"].includes(this.typeName)}}},Zn=""+new URL("back.33e845c9.png",import.meta.url).href;const jn=i("legend",null,"Basics",-1),Yn={class:"mr-8px"},Hn={class:"editorTable"},Xn=i("td",null,"Unique ID:",-1),zn={class:"flex gap-2px"},Jn=i("span",null,[i("img",{class:"h-20px w-20px icon",src:Zn,title:"Generate Id"})],-1),$n=[Jn],ei=i("td",null,"Name:",-1),ti={class:"flex gap-2px items-center"},ni=i("span",null," Position: ",-1),ii={key:0},si=i("td",null,"Child Forces Label:",-1),oi=i("td",{class:"hastooltip",title:`Additional Aliases for in-text reference matching, case insensitive.
one per line`}," Aliases: ",-1),li=i("td",{class:"hastooltip",title:"Disable indexing the name of this node for in-text references."},"No Index",-1);function ai(e,t,n,o,r,s){const c=N("InputStringArray");return l(),d("fieldset",null,[jn,i("div",Yn,[i("table",Hn,[i("tr",null,[Xn,i("td",zn,[k(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.id=a),onChange:t[1]||(t[1]=(...a)=>s.idchanged&&s.idchanged(...a)),class:"flex flex-shrink"},null,544),[[S,s.id]]),i("button",{class:"btn !w-34px flex items-center",onClick:t[2]||(t[2]=(...a)=>s.refresh&&s.refresh(...a))},$n)])]),i("tr",null,[ei,i("td",ti,[k(i("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>n.item.name=a)},null,512),[[S,n.item.name]]),s.sortable?(l(),d(b,{key:0},[ni,k(i("input",{type:"number",class:"w-50px inline-block","onUpdate:modelValue":t[4]||(t[4]=a=>n.item.sortIndex=a)},null,512),[[S,n.item.sortIndex]])],64)):u("",!0)])]),n.item.editorTypeName==="forceEntry"?(l(),d("tr",ii,[si,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=a=>n.item.childForcesLabel=a),placeholder:"Forces"},null,512),[[S,n.item.childForcesLabel]])])])):u("",!0),n.aliases?(l(),d(b,{key:1},[i("tr",null,[oi,i("td",null,[g(c,{modelValue:n.item.alias,"onUpdate:modelValue":t[6]||(t[6]=a=>n.item.alias=a)},null,8,["modelValue"])])]),i("tr",null,[li,i("td",null,[k(i("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>n.item.noindex=a)},null,512),[[P,n.item.noindex]])])])],64)):u("",!0)])])])}const q=v(Wn,[["render",ai]]),ri={props:{item:{type:Object,required:!0}}},di=i("legend",null,"Publication",-1),ci={class:"editorTable"},ui=i("td",null,"Short Name",-1),mi=i("td",null,"Publication:",-1),gi=i("td",null,"Publication Date:",-1),hi=i("td",null,"Publication URL:",-1);function pi(e,t,n,o,r,s){return l(),d("fieldset",null,[di,i("table",ci,[i("tr",null,[ui,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.shortName=c)},null,512),[[S,n.item.shortName]])])]),i("tr",null,[mi,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=c=>n.item.publisher=c)},null,512),[[S,n.item.publisher]])])]),i("tr",null,[gi,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=c=>n.item.publicationDate=c)},null,512),[[S,n.item.publicationDate]])])]),i("tr",null,[hi,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=c=>n.item.publisherUrl=c)},null,512),[[S,n.item.publisherUrl]])])])])])}const fi=v(ri,[["render",pi]]),yi={props:{item:{type:Object,required:!0}}};function Ai(e,t,n,o,r,s){const c=Q,a=q,m=fi;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{class:"section",item:n.item},null,8,["item"])],64)}const _i=v(yi,[["render",Ai]]),Ci={props:{item:{type:Object,required:!0}}},vi=i("label",{for:"hidden"},"Hidden",-1);function bi(e,t,n,o,r,s){return l(),d("fieldset",null,[i("legend",null,[M(e.$slots,"default")]),k(i("input",{id:"hidden",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.hidden=c)},null,512),[[P,n.item.hidden]]),vi])}const ye=v(Ci,[["render",bi]]),ki={props:{item:{type:Object,required:!0}}},Ei={class:"section"},wi=i("legend",null,"Limit",-1),Ii={class:"editorTable"},xi=i("td",null,"Default Cost Limit: ",-1),Ti=i("span",{class:"gray ml-10px"},"-1 = No limit",-1);function Si(e,t,n,o,r,s){const c=Q,a=q,m=ye;return l(),d("div",null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{item:n.item,class:"section"},{default:I(()=>[h(" Cost Types ")]),_:1},8,["item"]),i("div",Ei,[i("fieldset",null,[wi,i("table",Ii,[i("tr",null,[xi,i("td",null,[k(i("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=y=>n.item.defaultCostLimit=y)},null,512),[[S,n.item.defaultCostLimit]]),Ti])])])])])])}const Ri=v(ki,[["render",Si]]);ee([],e=>e);function Vi(e){const t=e[0][0];return e.length>1||["type"].includes(t)}function Fi(e){const t=e.split(`
`).map(o=>o.trim()).filter(o=>o),n=[];for(const o of t){const s=o.split("&").map(c=>c.trim()).filter(c=>c).map(c=>c.split(":").map(a=>a.trim()).map(a=>{const m=/^\/(.*?)\/([gimuy]*)$/.exec(a);return m?RegExp(m[1],m[2]):a}));n.push(s)}return n.reverse()}class lt{constructor(t,n=s=>s.sortIndex,o=(s,c)=>s.sortIndex=c,r=s=>delete s.sortIndex){me(this,"set");me(this,"get");me(this,"del");me(this,"config");me(this,"parsed");this.set=o,this.get=n,this.del=r,this.config=t}fixup(t){let n=1;for(const o of t)this.get(o)!==void 0&&(this.set(o,n),n++)}setConfig(t){this.config=t,delete this.parsed}evalLine(t,n){let o=0;for(const r of n){switch(r[0]){case"type":const c=r[1];switch(c){case"group":o=t.isGroup()?0:1;break;case"entry":o=t.isEntry()?0:1;break;default:o=t.getType()===c?0:1}break;case"name":o=r[1].exec(t.getName())?0:1;break}if(o===1)return o}return o}doAutoSort(t,n){for(const s of n)if(Vi(s))he(t,c=>this.evalLine(c,s));else switch(s[0][0]){case"cost":const a=s[0][1].toLowerCase();he(t,m=>{var y;return((y=m.getCosts().find(p=>p.name.toLowerCase()===a))==null?void 0:y.value)??0});break;case"name":he(t,m=>m.getName());break}let o=1,r=0;for(const s of t)this.get(s)!==o&&(r+=1),this.set(s,o),o+=1;return r}autoSort(t){return this.parsed||(this.parsed=Fi(this.config)),this.doAutoSort(t,this.parsed)}}const Ni=X({props:{items:{type:Array,required:!0},get:{type:Function,required:!0},set:{type:Function,required:!0},del:{type:Function,required:!0},autosort:{type:Boolean,default:!0},parent:{type:Object}},setup(){return{settings:Z()}},data(){return{dragging:null,dropIndex:null,configure:!1,massSort:!1,massSortIn:"catalogue"}},computed:{sorted(){return ee(this.items,e=>this.get(e)??1e4)},realDropIndex(){return this.dropIndex===null?null:Math.min(this.sorted.filter(e=>this.get(e)!==void 0).length,this.dropIndex)}},methods:{same(e){const t=this.sorted[e];return!(!this.get(t)||t!==this.dragging&&this.sorted[e-1]!==this.dragging)},same_below(e){const t=this.sorted[e-1];return!(!this.get(t)||t!==this.dragging&&this.sorted[e]!==this.dragging)},dragStart(e){this.dragging=e},dragEnter(e,t){const o=e.target.closest(".drop-item").getBoundingClientRect(),r=(o.top+o.bottom)/2;e.clientY>r&&(t+=1),this.dragging!==t?this.dropIndex=t:this.dropIndex=null},drop(e){if(e===null)return;const t=e+1;if(this.dropIndex=null,this.dragging!==null){const n=[];for(const o of this.sorted){const r=this.get(o);r!==void 0&&n.push({item:o,idx:r})}if(n.find(o=>o.idx===t))for(const{item:o,idx:r}of n)r>=t&&this.set(o,r+1);this.set(this.dragging,t),this.fixup(),this.dragging=null}},fixup(){let e=1;for(const t of this.sorted)this.get(t)!==void 0&&(this.set(t,e),e++)},autoSort(e){new lt(this.settings.autosort.config,this.get,this.set,this.del).autoSort(e)},async autoSortAllIn(e){if(this.parent){const t=this.parent.catalogue,n=this.parent.catalogue.manager,o=new lt(this.settings.autosort.config,this.get,this.set,this.del),r=new Set(["sharedSelectionEntries","sharedSelectionEntryGroups","selectionEntries","selectionEntryGroups"]),s=[];switch(e){case"catalogue&imports":s.push(...this.parent.catalogue.imports);case"catalogue":s.push(t);break;case"all":e==="all"&&(await n.loadAll(),s.push(...n.getAllLoadedCatalogues()))}let c=0;for(const a of s)a.forEachObjectWhitelist(m=>{const y=[...m.localSelectionsIterator()];y.length>1&&(c+=o.autoSort(y))},r);notify(`Affected ${c} entries.`)}}}});const Ae=e=>(O("data-v-63b3e91b"),e=e(),L(),e),Bi={class:"scrollable max-h-60vh p-10px"},Ui={key:0,class:"mb-10px"},Pi={class:"text-center",id:"auto-sort-all-in"},Oi=Ae(()=>i("option",{value:"catalogue"},"Catalogue",-1)),Li=Ae(()=>i("option",{value:"catalogue&imports"},"Catalogue & Imports",-1)),Qi=Ae(()=>i("option",{value:"all"},"All Catalogues",-1)),Gi=[Oi,Li,Qi],Di=Ae(()=>i("div",null,[h(" Enter rules for sorting below: "),i("br"),h("Possible rules: ")],-1)),qi=Ae(()=>i("div",null,[i("span",{class:"cost"},"type:model"),i("span",{class:"cost"},"type:upgrade"),i("span",{class:"cost"},"type:unit"),i("span",{class:"cost"},"type:mount"),i("span",{class:"cost"},"type:crew"),i("span",{class:"cost"},"type:entry"),i("span",{class:"cost"},"type:group"),i("br"),i("span",{class:"cost"},"cost:{name}"),i("br"),i("span",{class:"cost"},"name"),i("span",{class:"cost"},"name:/{regex}/i"),i("br")],-1)),Ki=Ae(()=>i("div",null,[h(" Multiple rules may be combined on the same line with "),i("span",{class:"cost"},"&"),h(" eg: "),i("span",{class:"cost"},"type:group & name:/options/i"),i("br"),h("Higher rules take priority. ")],-1)),Mi=["onDragstart","onDragenter","onDragover"],Wi={key:1},Zi=["onClick"];function ji(e,t,n,o,r,s){const c=je,a=ne;return l(),d("div",Bi,[e.autosort?(l(),d("div",Ui,[i("button",{class:"bouton",id:"auto-sort",onClick:t[1]||(t[1]=m=>e.autoSort(e.items))},[h(" AutoSort "),i("img",{src:an,class:"cursor-pointer hover-darken right-icon",onClick:t[0]||(t[0]=F(m=>e.configure=!0,["stop","prevent"]))})]),e.massSort?(l(),_(c,{key:0,modelValue:e.massSort,"onUpdate:modelValue":t[3]||(t[3]=m=>e.massSort=m),button:"Sort",text:"Cancel",onButton:t[4]||(t[4]=m=>e.autoSortAllIn(e.massSortIn))},{default:I(()=>[i("div",Pi,[h(" In "),k(i("select",{"onUpdate:modelValue":t[2]||(t[2]=m=>e.massSortIn=m)},Gi,512),[[W,e.massSortIn]])])]),_:1},8,["modelValue"])):u("",!0),e.configure?(l(),_(c,{key:1,modelValue:e.configure,"onUpdate:modelValue":t[6]||(t[6]=m=>e.configure=m),button:"Mass Sort",onButton:t[7]||(t[7]=m=>e.massSort=!0)},{default:I(()=>[Di,qi,Ki,g(a,{modelValue:e.settings.autosort.config,"onUpdate:modelValue":t[5]||(t[5]=m=>e.settings.autosort.config=m),style:{"font-family":"monospace"},spellcheck:"false"},null,8,["modelValue"])]),_:1},8,["modelValue"])):u("",!0)])):u("",!0),(l(!0),d(b,null,T(e.sorted,(m,y)=>(l(),d("div",{class:U(["p-4px border-solid -mt-1px border-1px hover-darken unselectable 0px drop-item",{"drop-target-is-above":e.realDropIndex===y&&!e.same(y),"drop-target-is-below":e.realDropIndex===y+1&&!e.same_below(y+1),dragging:m===e.dragging}]),draggable:"true",onDragstart:p=>e.dragStart(m),onDragover:[t[8]||(t[8]=F(()=>{},["prevent"])),p=>e.dragEnter(p,y)],onDrop:t[9]||(t[9]=p=>e.drop(e.realDropIndex)),onDragenter:p=>e.dragEnter(p,y)},[e.get(m)===void 0?(l(),d("span",{key:0,class:U({gray:e.get(m)===void 0}),title:"Will not be ordered specifically (but will be after anything with an index set)"}," [?] ",2)):(l(),d("span",Wi," ["+f(e.get(m))+"] ",1)),M(e.$slots,"item",pe(Ce({item:m})),void 0,!0),e.get(m)!==void 0?(l(),d("span",{key:2,class:"px-4px py-1px hover-brighten cursor-pointer unselectable float-right",onClick:F(p=>e.del(m),["stop"])},"x",8,Zi)):u("",!0)],42,Mi))),256))])}const It=v(Ni,[["render",ji],["__scopeId","data-v-63b3e91b"]]),Yi={props:{item:{type:Object,required:!0}},data(){return{orderPopup:!1}},setup(){return{store:G()}},methods:{get(e){return e.sortIndex},set(e,t){e.sortIndex=t,this.store.set_catalogue_changed(e.catalogue,!0)},del_sort(e){delete e.sortIndex,this.store.set_catalogue_changed(e.catalogue,!0)},get_profile_types(){const e=this.item.catalogue.manager.getAllLoadedCatalogues(),t=[];for(const n of e)for(const o of n.profileTypes||[])t.push(o);return t}},components:{SortOrder:It}},Hi={class:"section"},Xi=i("legend",null,"Profile Kind",-1),zi={class:"mr-8px"},Ji={class:"editorTable"},$i=i("td",null,"Kind:",-1),es={class:"flex gap-2px"},ts=i("option",{value:void 0},"Not defined",-1),ns=Re('<option value="model">Model stats</option><option value="weapon">Weapon</option><option value="spell">Spell</option><option value="ability">Ability</option><option value="rule">Rule</option><option value="tag">Tag</option>',6),is=[ts,ns],ss={class:"section"},os=i("legend",null," Profiles Order ",-1),ls=i("div",{class:"text-center"},"Drag & Drop to change profileTypes order",-1);function as(e,t,n,o,r,s){const c=N("SortOrder"),a=je;return l(),d(b,null,[i("fieldset",Hi,[Xi,i("div",zi,[i("table",Ji,[i("tr",null,[$i,i("td",es,[k(i("select",{"onUpdate:modelValue":t[0]||(t[0]=m=>n.item.kind=m)},is,512),[[W,n.item.kind]])])])])])]),i("fieldset",ss,[os,i("button",{class:"bouton inline",onClick:t[1]||(t[1]=m=>r.orderPopup=!0)},"Change")]),r.orderPopup?(l(),_(a,{key:0,modelValue:r.orderPopup,"onUpdate:modelValue":t[2]||(t[2]=m=>r.orderPopup=m)},{default:I(()=>[ls,g(c,{items:s.get_profile_types(),get:s.get,set:s.set,del:s.del_sort,autosort:!1},{item:I(({item:m})=>[h(f(m.name),1)]),_:1},8,["items","get","set","del"])]),_:1},8,["modelValue"])):u("",!0)],64)}const rs=v(Yi,[["render",as]]),ds={props:{item:{type:Object,required:!0}},setup(){return{store:G()}}};function cs(e,t,n,o,r,s){const c=Q,a=q,m=rs;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{class:"section",item:n.item},null,8,["item"])],64)}const us=v(ds,[["render",cs]]),ms={props:{item:{type:Object,required:!0}}},gs={class:"section"},hs=i("legend",null,"Characteristic Kind",-1),ps={class:"mr-8px"},fs={class:"editorTable"},ys=i("td",null,"Kind:",-1),As={class:"flex gap-2px"},_s=i("option",{value:void 0},"Not defined",-1),Cs=i("option",{value:"longText"},"Long Text",-1),vs=i("option",{value:"annotation"},"Annotation",-1),bs=[_s,Cs,vs];function ks(e,t,n,o,r,s){return l(),d("fieldset",gs,[hs,i("div",ps,[i("table",fs,[i("tr",null,[ys,i("td",As,[k(i("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>n.item.kind=c)},bs,512),[[W,n.item.kind]])])])])])])}const Es=v(ms,[["render",ks]]),ws={props:{item:{type:Object,required:!0}},setup(){return{settings:Z(),store:G()}}};function Is(e,t,n,o,r,s){const c=q,a=Es;return l(),d(b,null,[g(c,{item:n.item,class:"section"},null,8,["item"]),g(a,{class:"section",item:n.item},null,8,["item"])],64)}const xs=v(ws,[["render",Is]]),Ts={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{publications(){return ee([...this.catalogue.iteratePublications()],e=>(e==null?void 0:e.name)||"")}},methods:{getNameExtra:j,getName:te}},Ss="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgaM9maQ54AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACEElEQVQ4y52RzWsTQRiHn9luvsBCFpomtISSBFRICAgeApUeipcWT176n/Tc/yPneggI3rwJfkCwhnoTP+LuyWw8JBnS2DXszoyHdbcJXtT3NHP4PfO8vxEAz1+8ND+Da/5mSuUKD+7fE8ndBrj+seD44SFaa4wxaK2JogilFEoptNYADIdDvvsj3gzemwRiARhj0mASMMaglCIMQ5bLJUEQsFgsePzomPHoG6/fXZrUQCuFZVn0+33y+TytVovBYEA2myWXyzGZTGi1WkynU87PzwHof3VvVtBaI4Sg0+mkNsk5sQjDkP39fbTWFAoFXvXfrgMAut0u5XKZdrvN2dkZhUKBer2O4zicnJzQ6/UolUo0m800YwMoFRscHR1hjKFara6FXdclk8lweBgXvbu7y4cv8QpWDFAIIfB9HyklQoi18Gg0YmNjg/F4jJQSy7JQSq0Y6Biws7MTUy2L09PTtI/kh6rVKkopbNtG6VVAFAHgeR7FYpG9vT0uLi7I5XIATKdTDg4O8DyPWq0WA35n7NUV6vU6QGqTvF4sFhFC0Gg0MMasrWABRFGEEAIpJb7vr/WxXC7TXjzPS8/RqkEYhgghcBwHx3HWDADy+fwfhmEY3gDm8zmu6yKlZDabpX1UKhWCICAIAgCklCl0Pp/HsCdPn5nPnz6yuLriX+bW5ia379zF3ipts1Xa5n/nF4VfO8AW+/8fAAAAAElFTkSuQmCC",Rs=i("legend",null,[i("img",{src:Ss}),h(" Reference")],-1),Vs={class:"editorTable"},Fs=i("td",null,"Publication:",-1),Ns={class:"flex align-items flex-row"},Bs=["src"],Us={class:"inline"},Ps={class:"grey"},Os=["src"],Ls=i("span",{class:"inline"},"None",-1),Qs=i("td",null,"Page:",-1);function Gs(e,t,n,o,r,s){const c=se;return l(),d("fieldset",null,[Rs,i("table",Vs,[i("tr",null,[Fs,i("td",null,[g(c,{options:s.publications,filterField:a=>a.getName(),valueField:"id",modelValue:n.item.publicationId,"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.publicationId=a),nullable:""},{option:I(({option:a})=>[i("div",Ns,[a?(l(),d(b,{key:0},[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${a.editorTypeName}.png`},null,8,Bs),i("span",Us,[h(f(s.getName(a))+" ",1),i("span",Ps,f(s.getNameExtra(a)),1)])],64)):(l(),d(b,{key:1},[i("img",{class:"mr-1 my-auto",src:"assets/bsicons/bullet.png"},null,8,Os),Ls],64))])]),_:1},8,["options","filterField","modelValue"])])]),i("tr",null,[Qs,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>n.item.page=a)},null,512),[[S,n.item.page]])])])])])}const ie=v(Ts,[["render",Gs]]),Ds={props:{item:{type:Object,required:!0},link:{type:Boolean}}},qs={key:0,class:"gray"};function Ks(e,t,n,o,r,s){const c=ne;return l(),d("fieldset",null,[i("legend",null,[h("Description"),n.link?(l(),d("span",qs," (from target)")):u("",!0)]),g(c,{modelValue:n.item.description,"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.description=a)},null,8,["modelValue"])])}const He=v(Ds,[["render",Ks]]),Ms={setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},methods:{add(e,t){this.store.create_child("constraints",this.item,{type:e,scope:t,value:1,select:!1,includeChildSelections:!!["roster"].includes(t)})}}},xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAAzElEQVQ4T2NkwAIWLFiw6+hzX1col8FacvPuhIQENyiXMAAZENfw9D+IhgpRF6A4O7/r2n9DsVO7V5zSc40wu4RBn39l5jqxTAurV8FOhTKxAgx5ZAGjkO3/oUysAFkerE/Tez08UIi1GUSD9DEou67+D8IgQRiNCyCrA2Gm//8ZGWqjv+4GCcJoXABZHUgfilNV3DbhtRlZHsOLxPoZBpigNBisPsDhClKgH3gCHIjoNEgeqpSGAGSTbfwD0tM2SINj8sv/MIzdAAYGAB1Xk+VGE8P2AAAAAElFTkSuQmCC";const B=e=>(O("data-v-da544ae0"),e=e(),L(),e),Ws=B(()=>i("legend",null,[i("img",{src:xt}),h(" Quick Constraints")],-1)),Zs={class:"columns"},js={class:"column"},Ys=B(()=>i("img",{src:V},null,-1)),Hs=B(()=>i("span",{class:"text"},"MIN 1 IN PARENT",-1)),Xs=[Ys,Hs],zs=B(()=>i("img",{src:V},null,-1)),Js=B(()=>i("span",{class:"text"},"MIN 1 IN CATEGORY",-1)),$s=[zs,Js],eo=B(()=>i("img",{src:V},null,-1)),to=B(()=>i("span",{class:"text"},"MIN 1 IN FORCE",-1)),no=[eo,to],io=B(()=>i("img",{src:V},null,-1)),so=B(()=>i("span",{class:"text"},"MIN 1 IN ROSTER",-1)),oo=[io,so],lo={class:"column"},ao=B(()=>i("img",{src:V},null,-1)),ro=B(()=>i("span",{class:"text"},"MAX 1 IN PARENT",-1)),co=[ao,ro],uo=B(()=>i("img",{src:V},null,-1)),mo=B(()=>i("span",{class:"text"},"MAX 1 IN CATEGORY",-1)),go=[uo,mo],ho=B(()=>i("img",{src:V},null,-1)),po=B(()=>i("span",{class:"text"},"MAX 1 IN FORCE",-1)),fo=[ho,po],yo=B(()=>i("img",{src:V},null,-1)),Ao=B(()=>i("span",{class:"text"},"MAX 1 IN ROSTER",-1)),_o=[yo,Ao],Co={class:"column"},vo=B(()=>i("img",{src:V},null,-1)),bo=B(()=>i("span",{class:"text"},"EXACTLY 1 IN PARENT",-1)),ko=[vo,bo],Eo=B(()=>i("img",{src:V},null,-1)),wo=B(()=>i("span",{class:"text"},"EXACTLY 1 IN CATEGORY",-1)),Io=[Eo,wo],xo=B(()=>i("img",{src:V},null,-1)),To=B(()=>i("span",{class:"text"},"EXACTLY 1 IN FORCE",-1)),So=[xo,To],Ro=B(()=>i("img",{src:V},null,-1)),Vo=B(()=>i("span",{class:"text"},"EXACTLY 1 IN ROSTER",-1)),Fo=[Ro,Vo];function No(e,t,n,o,r,s){return l(),d("fieldset",null,[Ws,i("div",Zs,[i("div",js,[i("button",{class:"bouton",onClick:t[0]||(t[0]=c=>s.add("min","parent"))},Xs),n.withCategory?(l(),d("button",{key:0,class:"bouton",onClick:t[1]||(t[1]=c=>s.add("min","parent"))},$s)):u("",!0),i("button",{class:"bouton",onClick:t[2]||(t[2]=c=>s.add("min","force"))},no),i("button",{class:"bouton",onClick:t[3]||(t[3]=c=>s.add("min","roster"))},oo)]),i("div",lo,[i("button",{class:"bouton",onClick:t[4]||(t[4]=c=>s.add("max","parent"))},co),n.withCategory?(l(),d("button",{key:0,class:"bouton",onClick:t[5]||(t[5]=c=>s.add("max","parent"))},go)):u("",!0),i("button",{class:"bouton",onClick:t[6]||(t[6]=c=>s.add("max","force"))},fo),i("button",{class:"bouton",onClick:t[7]||(t[7]=c=>s.add("max","roster"))},_o)]),i("div",Co,[i("button",{class:"bouton",onClick:t[8]||(t[8]=c=>s.add("exactly","parent"))},ko),n.withCategory?(l(),d("button",{key:0,class:"bouton",onClick:t[9]||(t[9]=c=>s.add("exactly","parent"))},Io)):u("",!0),i("button",{class:"bouton",onClick:t[10]||(t[10]=c=>s.add("exactly","force"))},So),i("button",{class:"bouton",onClick:t[11]||(t[11]=c=>s.add("exactly","roster"))},Fo)])])])}const ke=v(Ms,[["render",No],["__scopeId","data-v-da544ae0"]]),Bo={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function Uo(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=ye,p=He,C=ke;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Entry ")]),_:1},8,["item"]),g(p,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"]),g(C,{item:n.item,withCategory:!1,class:"section"},null,8,["item"])],64)}const Po=v(Bo,[["render",Uo]]),Oo={props:{modelValue:{type:[Number,String]},required:{type:Boolean,required:!1},min:{type:Number,required:!1},max:{type:Number,required:!1}},data(){return{stringValue:null,intValue:0}},watch:{modelValue(){this.refresh()}},created(){this.refresh()},methods:{refresh(){this.intValue=this.modelValue||0,this.stringValue=""+this.modelValue},update(){var e;if(this.stringValue!=null){this.intValue=parseFloat(this.stringValue),this.$emit("update:modelValue",this.intValue);const t=new CustomEvent("change",{bubbles:!0});(e=this.$el)==null||e.dispatchEvent(t)}}}},Lo=["required","min","max"];function Qo(e,t,n,o,r,s){return k((l(),d("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.stringValue=c),type:"number",onChange:t[1]||(t[1]=(...c)=>s.update&&s.update(...c)),required:n.required,min:n.min,max:n.max,step:"any"},null,40,Lo)),[[S,r.stringValue]])}const oe=v(Oo,[["render",Qo]]),Go={data(){return{selectedCosts:{}}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{costTypes(){let e=[];for(let t of this.catalogue.iterateCostTypes())e.push(t);return e}},methods:{changed(){this.item.costs=Object.values(this.selectedCosts).filter(e=>isFinite(e.value))},update(){this.selectedCosts={};const e=this.item.isLink()?void 0:0;for(let t of Object.values(this.costTypes))this.selectedCosts[t.id]={name:t.name,typeId:t.id,value:e};if(this.item.costs)for(let t of this.item.costs)this.selectedCosts[t.typeId]={name:t.name,typeId:t.typeId,value:t.value}}},watch:{item(){this.update()}}},Do="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bi1IqIu0g4pChumhBVMRRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsH+BsVpppd44CqWUY6mRCyuVWh+xVBhNCPUUQkZupzopiC5/i6h4+vd3Ge5X3uz9Gr5E0G+ATiWaYbFvEG8fSmpXPeJ46ykqQQnxOPGXRB4keuyy6/cS467OeZUSOTnieOEgvFDpY7mJUMlXiKOKaoGuX7sy4rnLc4q5Uaa92TvzCc11aWuU5zCEksYgkiBMiooYwKLMRp1Ugxkab9hId/0PGL5JLJVQYjxwKqUCE5fvA/+N2tWZiccJPCCSD4Ytsfw0D3LtCs2/b3sW03T4DAM3Cltf3VBjDzSXq9rcWOgL5t4OK6rcl7wOUOMPCkS4bkSAGa/kIBeD+jb8oBkVsgtOb21trH6QOQoa5SN8DBITBSpOx1j3f3dPb275lWfz9cmHKeGGO3IgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFChEuDQiaUlgAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACRElEQVQoz52Sz0tUURiGn3vvuTqNdU3noiiYZYQgSgYGhiFCRAYWUYFGf0GL/A9atwnaVBtrmWZllouSJAlqEVmLcuGi0JiZmh+W5jRzdeacc2+LscGplX1wFud7z/vwfh/HePpkLNjI/OB/KuREEOs/lzlzbgjty22ZLdPm8cQ9hO8HSJVnavzutgCnBy/i+wHC9zVaKVpaWqipqys9WE6liC4t4TgO+1tbMS2rpK2m02il8H2NqbVCaYXWGqe2tnRezs4ipSQcDjMzPV2maa03PQpTa42SEqUU6WSSZ48mSSeTmIZJc3MzpmmS/ZUt05RSKCnRWiOULCaQUrKrupq+k/3FJdkCz/OIRqNkc9kybTkeR2mFkgqhtUKpIm05kSjN2dvXR3J+lAP1Idr21vJ1fhxUhgojQ/67gVIH0Voh/sRfXFykauE+DU0u2tiBl8tTyMQ4OjhMIZcjGVvADgq47k6mJj6WxhCe52GaBscGBoi/jdPTf6JkyK34zM/Nkc8XSCdiVAqIuA772nswTQPP8xAFM8zIjVsAVHifqNzdhNY+2TWPencPHYc7ikC3EjtYwXUFd26/IPVqjXCkEdF76gKpxDeklHx+fp2u7rbNBBvElqK8e2OVgJZhE0/bhBqPcKjjPPUNjRhbf9fNa1eCiBXFDoURlk3sS5xLw2e37KCYYGR0lctXJw0AsRXQdXyITGaNICje88mHPBibwQ5VISyB2jCQ6ymMmk5gEqA8wd/1+v2HwMvl/uk7jkN3Z7sB8BurPj/243CaIgAAAABJRU5ErkJggg==";const qo=e=>(O("data-v-55c88ebb"),e=e(),L(),e),Ko=qo(()=>i("legend",null,[i("img",{src:Do}),h(" Costs")],-1)),Mo={class:"costs"};function Wo(e,t,n,o,r,s){const c=oe;return l(),d("fieldset",null,[Ko,i("div",Mo,[(l(!0),d(b,null,T(s.costTypes,a=>(l(),d("div",null,[i("label",null,f(a.name)+": ",1),r.selectedCosts[a.id]!=null?(l(),_(c,{key:0,modelValue:r.selectedCosts[a.id].value,"onUpdate:modelValue":m=>r.selectedCosts[a.id].value=m,class:"input",onChange:s.changed,placeholder:"unset"},null,8,["modelValue","onUpdate:modelValue","onChange"])):u("",!0)]))),256))])])}const Xe=v(Go,[["render",Wo],["__scopeId","data-v-55c88ebb"]]),Zo={props:{item:{type:Object,required:!0}},methods:{isDifferentOnTarget(e){if(!this.item.target)return!1;const t=this.item[e.field]??e.default,n=this.item.target[e.field]??e.default;return t===n?!1:n!==e.default},getCheckedValue(e){return this.item[e.field]===void 0?e.default??!1:!!this.item[e.field]},handleChange(e,t){const n=e.target;n.checked===t.default?delete this.item[t.field]:this.item[t.field]=n.checked}},computed:{fields(){return[{name:"Hidden",status:this.hidden,field:"hidden"},{name:"Collective",status:this.collective,field:"collective",title:"indicates that multiple instances of this entry may be combined into one entry with an amount",default:!1},{name:"Import",status:this.import,field:"import",title:"If this is checked, may be imported by other catalogues",default:!0},{name:"Flatten",status:this.flatten,field:"flatten",title:"If this is checked, the group box will not be displayed.",default:!1},{name:"Collapsible",status:this.collapsible,field:"collapsible",title:"If this is checked, the group box will always be collapsible",default:!1},{name:"Exportable",status:this.exportable,field:"exportable",title:"prevents from showing up in various exports if unchecked",default:!0}]},hidden(){return!0},flatten(){return this.item.editorTypeName==="selectionEntryGroup"||this.item.editorTypeName==="selectionEntryGroupLink"?1:-1},collapsible(){return this.item.editorTypeName==="selectionEntry"||this.item.editorTypeName==="selectionEntryLink"||this.item.editorTypeName==="selectionEntryGroup"||this.item.editorTypeName==="selectionEntryGroupLink"?1:-1},collective(){var e;if((e=this.item.parent)!=null&&e.isCatalogue()){const t=this.item.parentKey;if(t==="selectionEntries"||t==="entryLinks")return 0}switch(this.item.editorTypeName){case"selectionEntryLink":return 1;case"selectionEntryGroupLink":return 1;case"selectionEntry":return 1;case"selectionEntryGroup":return 1}return-1},exportable(){return 1},import(){var e;if((e=this.item.parent)!=null&&e.isCatalogue())return 1;switch(this.item.editorTypeName){case"selectionEntryLink":return 0;case"selectionEntryGroupLink":return 0;case"selectionEntry":return 0;case"selectionEntryGroup":return 0;case"categoryLink":return-1;case"infoLink":return-1;case"profileLink":return-1;case"ruleLink":return-1;case"infoGroupLink":return-1}return 0}}},Ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9Tix9UOlhBikOG6mRBVMRRq1CECqFWaNXB5PoJTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdXFSdJES/5cUWsR4cNyPd/ced+8AoVFhqtk1DqiaZaQScTGTXRW7XxHAIHoRQkRmpj4nSUl4jq97+Ph6F+NZ3uf+HP25vMkAn0g8y3TDIt4gnt60dM77xGFWknPE58RjBl2Q+JHristvnIsOCzwzbKRT88RhYrHYwUoHs5KhEk8RR3OqRvlCxuUc5y3OaqXGWvfkLwzmtZVlrtMcRgKLWIIEEQpqKKMCCzFaNVJMpGg/7uGPOH6JXAq5ymDkWEAVKmTHD/4Hv7s1C5MTblIwDgRebPtjBOjeBZp12/4+tu3mCeB/Bq60tr/aAGY+Sa+3tegRENoGLq7bmrIHXO4AQ0+6bMiO5KcpFArA+xl9UxYYuAX61tzeWvs4fQDS1FXyBjg4BEaLlL3u8e6ezt7+PdPq7wcvuHKMRIsU1QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFFQkWEGZMN3sAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABVElEQVQoz93Ry0oCARjF8f/kpC0mZYoupJZWWhSouUopy0fQxxF9kagXKNpEtLZVQajdFl28kVp2mRFGiS4zTLsiqkXLOtvf4nx8B/58BID84bHZaNTRX/V3ELtFnE4XAD9ZOBQQhINcwaxUyng9Y/TJMlarFcMweFAUcvkCAOG50BcrV6p4veMI6xubptvt5PjoiPOLS3TDYGR4CFmWP53aarW4bt4iWixM+X0EgkFqtQZdWltDkiQUVSWVzgAQjUZYXFwgkUiQTCaJx+PEYjEAUukMiqoiSRJaW0NYWV0zPaPj1Os17pU7NE1Df3n+9mGi1YbdbmegfxCXy031qoywtb1j7u/tMTsTwuPx4XDIPD52KJXOODnNA/xo85EIwmW5au5ms1ycn/H0/NHcY7MxMTkJQKlY/GL+qWmWlpcR6jdNs9PuoBv6r/YXLSJSr8Q/yBspXJbfdFchHAAAAABJRU5ErkJggg==";const jo={class:"booleans"},Yo=["title"],Ho=["id","checked","onChange","disabled"],Xo=["for","title"];function zo(e,t,n,o,r,s){return l(),d("fieldset",null,[i("legend",null,[M(e.$slots,"default",{},void 0,!0)]),i("div",jo,[(l(!0),d(b,null,T(s.fields.filter(c=>c.status!=-1),c=>(l(),d("div",null,[s.isDifferentOnTarget(c)?(l(),d("img",{key:0,title:`${String(c.field)} is ${!!n.item.target[c.field]} on target`,style:{"vertical-align":"text-top","margin-left":"4px","margin-top":"1px"},class:"typeIcon",src:Ne},null,8,Yo)):u("",!0),i("input",{class:U({"cursor-pointer":c.status!==0}),id:c.field,type:"checkbox",checked:s.getCheckedValue(c),onChange:a=>s.handleChange(a,c),disabled:c.status==0},null,42,Ho),i("label",{class:U({"cursor-pointer":c.status!==0,gray:c.status==0,hastooltip:!!c.title}),for:c.field,title:c.title},f(c.name),11,Xo)]))),256))])])}const Be=v(Zo,[["render",zo],["__scopeId","data-v-1350b02e"]]),Jo={props:{item:{type:Object,required:!0}}},$o=i("legend",null,"Information",-1),el={class:"editorTable"},tl=i("td",null,"Readme:",-1);function nl(e,t,n,o,r,s){const c=ne;return l(),d("fieldset",null,[$o,i("table",el,[i("tr",null,[tl,i("td",null,[g(c,{type:"text",modelValue:n.item.readme,"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.readme=a)},null,8,["modelValue"])])])])])}const il=v(Jo,[["render",nl]]),sl={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function ol(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=Xe,p=Be,C=il,A=ke;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(p,{item:n.item},{default:I(()=>[h(" Entry ")]),_:1},8,["item"]),g(C,{item:n.item,class:"section"},null,8,["item"]),g(A,{item:n.item,withCategory:!0,class:"section"},null,8,["item"])],64)}const ll=v(sl,[["render",ol]]),al={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0},link:{type:Boolean}},setup(){return{settings:Z(),store:G()}},methods:{getName:te,getNameExtra:j,changedType(e,t){this.item.getCatalogue().refreshErrors(this.item),t&&this.catalogue.removeRef(this.item,t),e&&this.catalogue.addRef(this.item,e),this.item.characteristics=this.characteristics},changed(){const e=this.characteristics;this.store.edit_node(this.item,{characteristics:e})},fixEndlines(e){return console.log("Fixing"),e=e.replace(/([^.:])\n/g,"$1 "),e=e.replace(/([.:]\n)/g,`$1
`),e=e.replace(/([^\n])•(?=[^\n])/g,`$1
• `),e=e.replace(/\n\n\n*/g,`

`),e.replace(/ +/g," ")}},computed:{profileTypes(){return[...this.catalogue.iterateProfileTypes()]},characteristics(){var o;const e={};for(const r of this.item.characteristics||[])e[r.name]=r.$text;if(!this.item.typeId)return[];const t=this.catalogue.findOptionById(this.item.typeId);return this.item.isLink()||(this.item.typeName=t==null?void 0:t.name),(o=t==null?void 0:t.characteristicTypes)==null?void 0:o.map(r=>({name:r.name,typeId:r.id,$text:e[r.name]||""}))}}},rl={key:0,class:"gray"},dl={class:"editorTable"},cl=i("td",null,"Profile Type: ",-1),ul={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},ml=["src"],gl={class:"inline"},hl={class:"grey"},pl={class:"editorTable"};function fl(e,t,n,o,r,s){const c=se,a=ne;return l(),d("fieldset",null,[i("legend",null,[h("Characteristics"),n.link?(l(),d("span",rl," (from target)")):u("",!0)]),i("table",dl,[i("tr",null,[cl,i("td",null,[g(c,{options:s.profileTypes,filterField:m=>m.getName(),valueField:"id",modelValue:n.item.typeId,"onUpdate:modelValue":t[0]||(t[0]=m=>n.item.typeId=m),onChange:s.changedType},{option:I(({option:m})=>[i("div",ul,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${m.editorTypeName}.png`},null,8,ml),i("span",gl,[h(f(s.getName(m))+" ",1),i("span",hl,f(s.getNameExtra(m)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])])])]),i("table",pl,[(l(!0),d(b,null,T(s.characteristics,m=>(l(),d("tr",null,[i("td",null,f(m.name)+": ",1),i("td",null,[g(a,{modelValue:m.$text,"onUpdate:modelValue":y=>m.$text=y,onChange:s.changed,beforePaste:o.settings.autoFormatCharacteristics?s.fixEndlines:void 0},null,8,["modelValue","onUpdate:modelValue","onChange","beforePaste"])])]))),256))])])}const Tt=v(al,[["render",fl]]),yl={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0},link:{type:Boolean}},setup(){return{settings:Z(),store:G()}},methods:{getName:te,getNameExtra:j,changedType(e,t){this.item.getCatalogue().refreshErrors(this.item),t&&this.catalogue.removeRef(this.item,t),e&&this.catalogue.addRef(this.item,e),this.item.attributes=this.attributes},changed(){this.store.edit_node(this.item,{attributes:this.attributes})}},computed:{profileTypes(){return[...this.catalogue.iterateProfileTypes()]},attributes(){var o;const e={};for(const r of this.item.attributes||[])e[r.name]=r.$text;if(!this.item.typeId)return[];const t=this.catalogue.findOptionById(this.item.typeId);return this.item.isLink()||(this.item.typeName=t==null?void 0:t.name),(o=t==null?void 0:t.attributeTypes)==null?void 0:o.map(r=>({name:r.name,typeId:r.id,$text:e[r.name]||""}))}}},Al={key:0},_l={key:0,class:"gray"},Cl={class:"editorTable"};function vl(e,t,n,o,r,s){var a;const c=ne;return(a=s.attributes)!=null&&a.length?(l(),d("fieldset",Al,[i("legend",null,[h("Attributes"),n.link?(l(),d("span",_l," (from target)")):u("",!0)]),i("table",Cl,[(l(!0),d(b,null,T(s.attributes,m=>(l(),d("tr",null,[i("td",null,f(m.name)+": ",1),i("td",null,[g(c,{modelValue:m.$text,"onUpdate:modelValue":y=>m.$text=y,onChange:s.changed},null,8,["modelValue","onUpdate:modelValue","onChange"])])]))),256))])])):u("",!0)}const St=v(yl,[["render",vl]]),bl={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}}};function kl(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=ye,p=Tt,C=St;return l(),d(b,null,[g(c,{item:n.item,class:"section"},null,8,["item"]),g(a,{item:n.item,class:"section",aliases:""},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Constraints ")]),_:1},8,["item"]),g(p,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"]),g(C,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])],64)}const El=v(bl,[["render",kl]]),wl={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}}};function Il(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=ye,p=He;return l(),d(b,null,[g(c,{item:n.item,class:"section"},null,8,["item"]),g(a,{item:n.item,class:"section",aliases:""},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Constraints ")]),_:1},8,["item"]),g(p,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])],64)}const xl=v(wl,[["render",Il]]),Tl={props:{item:{type:Object,required:!0}},computed:{type:{get(){return this.item.subType??this.item.type},set(e){switch(e){case"model":case"upgrade":case"unit":this.item.type=e,delete this.item.subType;break;default:case"unit-group":this.item.type="unit",this.item.subType=e;break;case"mount":case"crew":this.item.type="model",this.item.subType=e;break}}}}},Sl={class:"editorTable"},Rl=i("td",null,"Type:",-1),Vl=Re('<option value="model">Model</option><option value="upgrade">Upgrade</option><option value="unit">Unit</option><option value="unit-group">Unit Group</option><option value="mount">Mount</option><option value="crew">Crew</option>',6),Fl=[Vl];function Nl(e,t,n,o,r,s){return l(),d("fieldset",null,[i("legend",null,[M(e.$slots,"default")]),i("table",Sl,[i("tr",null,[Rl,i("td",null,[k(i("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>s.type=c)},Fl,512),[[W,s.type]])])])])])}const Bl=v(Tl,[["render",Nl]]),Ul={props:{item:{type:Object,required:!0}},computed:{placeholder(){return`${this.item.isLink()&&this.item.getDefaultAmount()||"unset"}`}}};const Rt=e=>(O("data-v-b828a5d8"),e=e(),L(),e),Pl=Rt(()=>i("legend",null,"Creation",-1)),Ol={class:"editorTable"},Ll=Rt(()=>i("td",null,[h("Default Amount (split by "),i("code",{style:{"background-color":"#aaaaaa40","border-radius":"3px"}},","),h(" for multiple stacks): ")],-1)),Ql=["placeholder"];function Gl(e,t,n,o,r,s){return l(),d("fieldset",null,[Pl,i("table",Ol,[i("tr",null,[Ll,i("td",null,[k(i("input",{class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.defaultAmount=c),placeholder:s.placeholder,pattern:"[0-9,]*"},null,8,Ql),[[S,n.item.defaultAmount]])])])])])}const Vt=v(Ul,[["render",Gl],["__scopeId","data-v-b828a5d8"]]),Dl={},ql={"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",class:"octicon octicon-tag"},Kl=i("path",{d:"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"},null,-1),Ml=[Kl];function Wl(e,t){return l(),d("svg",ql,Ml)}const Ft=v(Dl,[["render",Wl]]),Zl={props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},always:{type:Boolean,default:!1}},created(){this.lazy||this.reset()},data(){return{searchPattern:"",selected:0,lastSearch:null,editing:!1,sleeping:this.lazy,bounce:!1}},computed:{boundedSelected(){return st(this.selected,0,this.always?this.foundOptions.length:this.foundOptions.length-1)},computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const e=this.textSearchRegex(this.searchPattern),t=[];this.nullable&&t.push({option:void 0});const n=this.computedOptions,o=this.max||n.length;for(let r=0;r<n.length;r++){const s=n[r];let c=this.getField(s);if(c&&c.match&&c.match(e)&&(t.push({option:s}),t.length>=o-1))break}return t}},methods:{fix(e){return st(e,0,this.always?this.foundOptions.length:this.foundOptions.length-1)},blur(){this.editing=!1,this.$emit("blur")},onUp(){this.selected=this.fix(this.selected-1),this.$nextTick(()=>{const e=this.$refs.suggestions.getElementsByClassName("selected")[0];e==null||e.scrollIntoView({block:"nearest",inline:"nearest"})})},onDown(){this.selected=this.fix(this.selected+1),this.$nextTick(()=>{const e=this.$refs.suggestions.getElementsByClassName("selected")[0];e==null||e.scrollIntoView({block:"nearest",inline:"nearest"})})},onEnter(){this.bounce||(this.bounce=!0,this.always&&this.selected===this.foundOptions.length?this.$emit("always",this.searchPattern):this.targetSelected(this.foundOptions[this.boundedSelected]),this.reset())},onEnterUp(){this.bounce=!1},getField(e){return this.filterField?this.filterField instanceof Function?this.filterField(e):e[this.filterField]:e},escapeRegex(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(e){const n=`^(?=.*\\b${this.escapeRegex(e).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(n,"i")},targetSelected(e){console.log("selected",e),this.$emit("add",e.option)},targetSelectedRightClick(e,t){e.preventDefault(),e.stopPropagation(),console.log("selected (right click)",t),this.$emit("add-special",t.option)},emitNativeChangeEvent(e,t){var o;const n=new CustomEvent("change",{bubbles:!0,detail:{value:e,old:t}});(o=this.$el)==null||o.dispatchEvent(n)},reset(){this.searchPattern=""},onClickOutside(){this.blur()},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},mounted(){this.focus&&setTimeout(()=>{var e;(e=this.$refs.edit)==null||e.focus(),this.startEditing()},0)},watch:{options(){this.lazy||this.reset()},searchPattern(e,t){(e??"")!==(t??"")&&(this.selected=0,this.$emit("update:modelValue",e),this.$emit("change"))},modelValue:{immediate:!0,handler(e){this.searchPattern=e??""}},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const jl=e=>(O("data-v-05cb11bc"),e=e(),L(),e),Yl=["placeholder"],Hl={class:"gray"},Xl=jl(()=>i("span",{class:"float-right bold"},"+",-1)),zl=["onClickCapture","onContextmenuCapture"],Jl=["onClick","onContextmenu"];function $l(e,t,n,o,r,s){const c=yt("click-outside");return l(),d("div",{class:"autocomplete relative",onKeydown:[t[7]||(t[7]=_e(F((...a)=>s.onDown&&s.onDown(...a),["prevent"]),["down"])),t[8]||(t[8]=_e(F((...a)=>s.onUp&&s.onUp(...a),["prevent"]),["up"])),t[9]||(t[9]=_e(F((...a)=>s.onEnter&&s.onEnter(...a),["prevent"]),["enter"])),t[11]||(t[11]=_e(a=>s.blur(),["escape"]))],onKeyup:t[10]||(t[10]=_e(F((...a)=>s.onEnterUp&&s.onEnterUp(...a),["prevent"]),["enter"]))},[r.editing?k((l(),d("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",autofocus:"",onInput:t[0]||(t[0]=(...a)=>s.suggest&&s.suggest(...a)),onClick:t[1]||(t[1]=(...a)=>s.maySuggest&&s.maySuggest(...a)),onFocus:t[2]||(t[2]=(...a)=>s.startEditing&&s.startEditing(...a)),"onUpdate:modelValue":t[3]||(t[3]=a=>r.searchPattern=a),placeholder:n.placeholder},null,40,Yl)),[[S,r.searchPattern],[c,s.onClickOutside]]):(l(),d("div",{key:1,onClick:t[4]||(t[4]=(...a)=>s.startEditing&&s.startEditing(...a)),class:"autocomplete-input"},[i("span",Hl,f(n.placeholder),1),Xl])),k(i("div",{class:U(["suggestions",{hidden:!r.editing}]),ref:"suggestions"},[(l(!0),d(b,null,T(s.foundOptions,(a,m)=>(l(),d(b,null,[m===s.boundedSelected?(l(),d("div",{key:0,class:"suggestion selected",onClickCapture:F(y=>s.targetSelected(a),["stop"]),onContextmenuCapture:y=>s.targetSelectedRightClick(y,a)},[M(e.$slots,"option",pe(Ce({...a,selected:!0})),void 0,!0)],40,zl)):(l(),d("div",{key:1,class:"suggestion",onClick:F(y=>s.targetSelected(a),["stop"]),onContextmenu:F(y=>s.targetSelectedRightClick(y,a),["prevent"])},[M(e.$slots,"option",pe(Ce(a)),void 0,!0)],40,Jl))],64))),256)),n.always?(l(),d("div",{key:0,class:U(["suggestion",{selected:r.selected===s.foundOptions.length}]),onClick:t[5]||(t[5]=a=>e.$emit("always",r.searchPattern)),onContextmenu:t[6]||(t[6]=F(a=>e.$emit("always-special",r.searchPattern),["prevent"]))},[M(e.$slots,"always",pe(Ce({input:r.searchPattern})),void 0,!0)],34)):u("",!0)],2),[[Te,r.editing]])],32)}const ea=v(Zl,[["render",$l],["__scopeId","data-v-05cb11bc"]]),ta={name:"ContextMenu",data(){return{left:100,top:100,bottom:100,right:100,width:200,height:200,visible:!1,isDown:!1,isRight:!1,payload:void 0,hoveredElement:null,nestedContextMenus:{}}},props:{modelValue:{type:Boolean,default:!0},id:{type:String,required:!1}},methods:{hover(e,t){var n,o;if(this.hoveredElement!==t){const r=t==null?void 0:t.closest(".context-menu > *");for(const s of(r==null?void 0:r.querySelectorAll("[context-menu-id]"))||[]){const c=s.getAttribute("context-menu-id");if(c)for(const a in this.nestedContextMenus)a===c?(n=this.nestedContextMenus[a])==null||n.show(e):(o=this.nestedContextMenus[a])==null||o.close(e)}}this.hoveredElement=t},do_update(e){var n,o;if(this.width=((n=this.el)==null?void 0:n.clientWidth)||this.width,this.height=((o=this.el)==null?void 0:o.clientHeight)||this.height,this.top=e.clientY,this.left=e.clientX,this.avoid){const r=this.avoid,s=r.offsetLeft;this.left=s+r.offsetWidth;var t=e.target.getBoundingClientRect();this.top=t.top-1}this.left=Math.min(this.left,window.innerWidth-this.width)+2,this.top=Math.min(this.top,window.innerHeight-7-this.height),this.bottom=window.innerHeight-this.top,this.right=window.innerWidth-this.left},update(e){e.preventDefault(),this.do_update(e),this.$nextTick(()=>{this.do_update(e)})},show(e,t){this.payload=t,this.visible=!0,this.update(e),this.$emit("update:modelValue",!0)},close(){this.visible=!1,this.$emit("update:modelValue",!1)},get_parent_context(){let e=this.$parent;for(;e;){if(e.$options.name===this.$options.name)return e;e=e.$parent}return null}},mounted(){if(addEventListener("click",this.close,{capture:!0}),addEventListener("contextmenu",this.close,{capture:!0}),addEventListener("scroll",this.close,{capture:!0}),this.id){const e=this.get_parent_context();e&&e.nestedContextMenus&&(e.nestedContextMenus[this.id]=this)}},unmounted(){if(addEventListener("click",this.close,{capture:!0}),removeEventListener("contextmenu",this.close,{capture:!0}),removeEventListener("scroll",this.close,{capture:!0}),this.id){const e=this.get_parent_context();e&&e.nestedContextMenus&&delete e.nestedContextMenus[this.id]}},computed:{el(){return this.$refs["context-menu"]},style(){const e={};return e.top=`${this.top}px`,e.left=`${this.left}px`,e},avoid(){var e;return(e=this.$el.parentElement)==null?void 0:e.closest(".context-menu")}}};const na=["context-menu-id"];function ia(e,t,n,o,r,s){return l(),d("span",{"context-menu-id":n.id,style:{display:"none"}},[k((l(),_(At,{to:"#dialogs"},[k(i("li",{ref:"context-menu",class:"context-menu",style:Se(s.style),onMousemove:t[0]||(t[0]=c=>s.hover(c,c.target)),onMouseleave:t[1]||(t[1]=c=>s.hover(c,null))},[M(e.$slots,"default",{payload:r.payload})],36),[[Te,r.visible]])],512)),[[Te,r.visible]])],8,na)}const Ue=v(ta,[["render",ia]]),sa=X({components:{AutocompleteTags:ea,Tag:Ft,ContextMenu:Ue},props:{item:{type:Object,required:!0}},data(){return{input:"",adding:!1,contextmenuopen:!1,selectedCategory:null,selectedCategoryParent:null}},setup(){return{store:G(),settings:Z()}},computed:{catalogue(){return this.item.catalogue},targetCategories(){var e;return(((e=this.item.target)==null?void 0:e.categoryLinks)||[]).filter(t=>!t.primary)},ownCategories(){return(this.item.categoryLinks||[]).filter(e=>!e.primary)},targetPrimaryCategories(){var e;return(((e=this.item.target)==null?void 0:e.categoryLinks)||[]).filter(t=>t.primary)},ownPrimaryCategories(){return(this.item.categoryLinks||[]).filter(e=>e.primary)}},methods:{getNameExtra:j,makePrimary(e,t){for(const n of t.categoryLinks||[])this.store.edit_node(n,{primary:!1});this.store.edit_node(e,{primary:!0})},makeSecondary(e){this.store.edit_node(e,{primary:!1})},context(e,t){this.contextmenuopen=!0,this.selectedCategory=t,this.selectedCategoryParent=this.item,this.$nextTick(()=>{var n;(n=this.$refs.contextmenu)==null||n.show(e)})},linked_context(e,t){if(!this.item.target){console.error("Cant open context menu for a category on the target: Couldn't find target");return}this.contextmenuopen=!0,this.selectedCategory=t,this.selectedCategoryParent=this.item.target,this.$nextTick(()=>{var n;(n=this.$refs.contextmenu)==null||n.show(e)})},refreshCategories(e,t,n){e.categoryLinks||(e.categoryLinks=[]);const o=e.categoryLinks;if(n&&o.forEach(r=>r.primary=!1),t){const r=o.find(s=>s.targetId===(t==null?void 0:t.id));r&&n?r.primary=!0:r?this.removeLink(this.item,r):this.addLink(this.item,t,n)}},removeLink(e,t){this.store.del_node(t)},addLink(e,t,n=!1){if(!t.isCategory())throw Error("Invalid argument, target must be a category");return this.store.add_node("categoryLinks",e,{targetId:t.id,id:this.item.catalogue.generateNonConflictingId(),primary:n,name:t.name})},allCategories(){const e=new Set;for(const n of this.item.categoryLinks||[])e.add(n.getId());const t=[];for(const n of this.item.catalogue.iterateCategoryEntries())e.has(n.getId())||t.push(n);return t},addCategory(e){this.item.categoryLinks||(this.item.categoryLinks=[]);const n=this.item.categoryLinks.find(o=>o.targetId===e.getId());return n||this.addLink(this.item,e,!1)},addCategoryAndMakePrimary(e){const t=this.addCategory(e);this.makePrimary(t,this.item)},removeCategory(e,t){const o=(e.categoryLinks||[]).find(r=>r.targetId===t.getId());if(o)return this.removeLink(this.item,o)},async createCategory(e,t=!1){var c;const n=this.item.catalogue,o="categoryEntries",r={...this.store.get_initial_object(o,n),name:e,id:Ze()};await this.store.add(r,o,n);const s=(c=this.item.catalogue.categoryEntries)==null?void 0:c.find(a=>a.name===e);if(s)return t?this.addCategoryAndMakePrimary(s):this.addCategory(s)},async createPrimaryCategory(e){await this.createCategory(e,!0)},gotoCategory(e){const t=this.catalogue.findOptionById(e.targetId??e.id);t&&this.store.goto(t)}}});const Pe=e=>(O("data-v-bec86a80"),e=e(),L(),e),oa=["onContextmenu"],la=Pe(()=>i("span",{class:"primary bold"}," Primary ",-1)),aa={class:"name"},ra=["onClick"],da=["onContextmenu"],ca={class:"name"},ua=["onClick"],ma={key:1,class:"gray"},ga={class:"py-1px rounded-8px bg-lime-400"},ha={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},pa={key:0,class:"gray"},fa={class:"gray"},ya={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},Aa=Pe(()=>i("span",null,"Create: ",-1)),_a={key:0,class:"align-top mt-4px"},Ca=Pe(()=>i("img",{src:Ne},null,-1)),va=["onContextmenu"],ba=Pe(()=>i("span",{class:"primary bold"}," Primary ",-1)),ka={class:"name"},Ea=["onClick"],wa=["onContextmenu"],Ia={class:"name"},xa=["onClick"],Ta={class:"gray"};function Sa(e,t,n,o,r,s){var y,p;const c=N("Tag"),a=N("AutocompleteTags"),m=N("ContextMenu");return l(),d("div",{class:U({dark:e.settings.isDarkTheme})},[i("div",null,[(y=e.ownCategories)!=null&&y.length||(p=e.ownPrimaryCategories)!=null&&p.length?(l(),d(b,{key:0},[(l(!0),d(b,null,T(e.ownPrimaryCategories,C=>(l(),d("div",{class:"label hover-brighten",onContextmenu:F(A=>e.context(A,C),["stop"])},[la,i("span",aa,f(C.getName()),1),i("span",{class:"cursor-pointer hover-darken px-5px rounded-8px",onClick:A=>e.removeCategory(e.item,C)},"×",8,ra)],40,oa))),256)),(l(!0),d(b,null,T(e.ownCategories,C=>(l(),d("div",{class:"label",onContextmenu:F(A=>e.context(A,C),["stop"])},[i("span",ca,f(C.getName()),1),i("span",{class:"cursor-pointer hover-darken px-5px rounded-8px",onClick:A=>e.removeCategory(e.item,C)},"×",8,ua)],40,da))),256))],64)):(l(),d("span",ma," None ")),i("span",ga,[e.adding?u("",!0):(l(),d("span",{key:0,class:"px-5px py-1px rounded-8px cursor-pointer hover-darken",onClick:t[0]||(t[0]=C=>e.adding=!0),style:Se({color:e.settings.isDarkTheme?"black":"white"})},"+",4))]),e.adding?(l(),_(a,{key:2,modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=C=>e.input=C),onBlur:t[2]||(t[2]=C=>e.adding=!1),focus:"",class:"inline-block",lazy:"",always:!!e.input.trim()&&!e.allCategories().find(C=>C.name===e.input),options:e.allCategories,dark:e.settings.isDarkTheme,placeholder:"Search... (Right click = Primary)",filterField:C=>C.getName(),onAdd:e.addCategory,onAddSpecial:e.addCategoryAndMakePrimary,onAlways:e.createCategory,onAlwaysSpecial:e.createPrimaryCategory},{option:I(({option:C,selected:A})=>[i("div",ha,[C!=null&&C.name?(l(),d(b,{key:0},[g(c,{class:"icon"}),i("span",null,[h("  "+f(C.name)+" ",1),C.comment?(l(),d("span",pa," # "+f(C.comment),1)):u("",!0),i("span",fa," ["+f(C.catalogue.name)+"]",1)])],64)):u("",!0)])]),always:I(({input:C})=>[i("div",ya,[Aa,h("  "),g(c,{class:"icon"}),i("span",null," "+f(C),1)])]),_:1},8,["modelValue","always","options","dark","filterField","onAdd","onAddSpecial","onAlways","onAlwaysSpecial"])):u("",!0)]),e.targetCategories.length||e.targetPrimaryCategories.length?(l(),d("div",_a,[Ca,h(" From Target: "),(l(!0),d(b,null,T(e.targetPrimaryCategories,C=>(l(),d("span",{class:"label",onContextmenu:F(A=>e.linked_context(A,C),["stop"])},[ba,i("span",ka,f(C.getName()),1),h(" "),i("span",{class:"cursor-pointer hover-darken px-3px rounded-2px",onClick:A=>e.removeCategory(e.item.target,C)},"×",8,Ea)],40,va))),256)),(l(!0),d(b,null,T(e.targetCategories,C=>(l(),d("span",{class:"label",onContextmenu:F(A=>e.linked_context(A,C),["stop"])},[i("span",Ia,f(C.getName()),1),h(" "),i("span",{class:"cursor-pointer hover-darken px-3px rounded-2px",onClick:A=>e.removeCategory(e.item.target,C)},"×",8,xa)],40,wa))),256))])):u("",!0),e.contextmenuopen&&e.selectedCategory&&e.selectedCategoryParent?(l(),_(m,{key:1,modelValue:e.contextmenuopen,"onUpdate:modelValue":t[7]||(t[7]=C=>e.contextmenuopen=C),ref:"contextmenu"},{default:I(()=>{var C;return[e.selectedCategory.primary?u("",!0):(l(),d("div",{key:0,onClick:t[3]||(t[3]=A=>e.makePrimary(e.selectedCategory,e.selectedCategoryParent))}," Make Primary: "+f(e.selectedCategory.getName()),1)),e.selectedCategory.primary?(l(),d("div",{key:1,onClick:t[4]||(t[4]=A=>e.makeSecondary(e.selectedCategory))}," Make Secondary: "+f(e.selectedCategory.getName()),1)):u("",!0),i("div",{onClick:t[5]||(t[5]=A=>e.gotoCategory(e.selectedCategory))},[h(" Goto "+f(e.selectedCategory.getName())+" ",1),i("span",Ta,"  ("+f((C=e.selectedCategory.catalogue)==null?void 0:C.getName())+") ",1)]),i("div",{onClick:t[6]||(t[6]=A=>e.store.copy(A,e.selectedCategory))}," Copy "+f(e.selectedCategory.getName()),1)]}),_:1},8,["modelValue"])):u("",!0)],2)}const Ra=v(sa,[["render",Sa],["__scopeId","data-v-bec86a80"]]),Va=X({props:{category:{required:!0,type:Object},item:{type:Object,required:!0}},setup(){return{store:G()}},data(){return{contextmenuopen:!1}},methods:{menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var o;(o=this.$refs[e])==null||o.show(t,n)})},close:(t,n)=>{var o;(o=this.$refs[e])==null||o.close(t,n),this.contextmenuopen=!1}}},hasCategory(e){var n;let t=(n=this.item.categoryLinks)==null?void 0:n.find(o=>{var r;return((r=o.target)==null?void 0:r.id)===e.id});return t?t.primary?2:1:0}},computed:{contextmenu(){return this.menu("contextmenu")}},components:{ContextMenu:Ue}});const Fa=["checked"],Na=["id","checked"],Ba=["for"],Ua={key:0,class:"gray"},Pa={class:"gray"},Oa={class:"gray"};function La(e,t,n,o,r,s){const c=N("ContextMenu");return l(),d("div",{class:"category",onContextmenu:t[4]||(t[4]=F((...a)=>e.contextmenu.show&&e.contextmenu.show(...a),["stop"]))},[i("div",null,[i("input",{name:"primary",type:"radio",checked:e.hasCategory(e.category)==2,onChange:t[0]||(t[0]=a=>e.$emit("primaryChanged",e.category))},null,40,Fa),h(" Primary? ")]),i("div",null,[i("input",{id:`category-${e.category.id}`,type:"checkbox",checked:e.hasCategory(e.category)!=0,onChange:t[1]||(t[1]=a=>e.$emit("secondaryChanged",e.category))},null,40,Na),i("label",{for:`category-${e.category.id}`},[h(f(e.category.name)+" ",1),e.category.comment?(l(),d("span",Ua," # "+f(e.category.comment),1)):u("",!0),i("span",Pa," ["+f(e.category.catalogue.name)+"]",1)],8,Ba)]),e.contextmenuopen?(l(),_(c,{key:0,modelValue:e.contextmenuopen,"onUpdate:modelValue":t[3]||(t[3]=a=>e.contextmenuopen=a),ref:"contextmenu"},{default:I(()=>{var a;return[i("div",{onClick:t[2]||(t[2]=m=>e.store.goto(e.category))},[h(" Goto "+f(e.category.getName())+" ",1),i("span",Oa,"  ("+f((a=e.category.catalogue)==null?void 0:a.getName())+") ",1)])]}),_:1},8,["modelValue"])):u("",!0)],32)}const Qa=v(Va,[["render",La]]),Ga={components:{Category:Qa,Tag:Ft},data(){return{filter:"",primaries:new Set,secondaries:new Set}},setup(){return{settings:Z()}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{hasCategory(e){var n;let t=(n=this.item.categoryLinks)==null?void 0:n.find(o=>{var r;return((r=o.target)==null?void 0:r.id)===e.id});return t?t.primary?2:1:0},primaryChanged(e){this.refreshCategories(this.item,e,!0)},secondaryChanged(e){this.refreshCategories(this.item,e,!1)},refreshCategories(e,t,n){e.categoryLinks||(e.categoryLinks=[]);const o=e.categoryLinks;if(n&&o.forEach(r=>r.primary=!1),t){const r=o.find(s=>s.targetId===(t==null?void 0:t.id));r&&n?r.primary=!0:r?this.removeLink(o,r):this.addLink(o,t,n)}this.changed()},removeLink(e,t){const n=e.findIndex(o=>o===t);if(n!==-1){const[o]=e.splice(n,1);this.catalogue.removeFromIndex(o);const r=o.target.refs;if(r){const s=r==null?void 0:r.findIndex(c=>c===o);s!==-1&&(r==null||r.splice(s,1))}}},addLink(e,t,n=!1){var s;if(!t.isCategory())throw Error("Invalid argument, target must be a category");const o=rn({targetId:t.id,target:t,id:this.catalogue.generateNonConflictingId(),primary:n,catalogue:this.catalogue,name:t.name},"categoryLinks");e.push(o),this.catalogue.addToIndex(o);const r=t;return r.refs||(r.refs=[]),(s=r.refs)==null||s.push(o),o},noPrimary(){let e=!0;if(this.item.categoryLinks){for(let t of this.item.categoryLinks)if(t.primary)return!1}return e}},computed:{badLinks(){const e=[],t=new Set;for(const n of this.catalogue.iterateCategoryEntries())t.add(n.id);for(const n of this.item.categoryLinks||[])t.has(n.targetId)||e.push(n);return e},count(){var e;return((e=this.item.categoryLinks)==null?void 0:e.length)||0},categories(){let e=[];for(let t of this.catalogue.iterateCategoryEntries())this.settings.showOnlyEnabledCategories&&this.hasCategory(t)==0||t.getName().toLowerCase().includes(this.filter.toLowerCase())&&e.push(t);return e}}};const Da=e=>(O("data-v-060e1a43"),e=e(),L(),e),qa={class:"inline"},Ka={class:"section inline"},Ma=Da(()=>i("label",{for:"onlyEnabled"},"Only show selected categories",-1)),Wa={class:"section categoryList"},Za=["checked"],ja=["checked","onChange"],Ya=["id","onChange"],Ha=["for"];function Xa(e,t,n,o,r,s){const c=N("Tag"),a=Ra,m=N("Category"),y=Fe;return l(),d("fieldset",null,[i("legend",null,[i("div",qa,[g(c,{class:"icon"})]),h(" Categories ("+f(s.count)+") ",1)]),o.settings.useNewCategoriesUI?(l(),_(a,{key:0,item:n.item},null,8,["item"])):(l(),d(b,{key:1},[k(i("input",{class:"section",type:"text","onUpdate:modelValue":t[0]||(t[0]=p=>r.filter=p),placeholder:"Filter categories..."},null,512),[[S,r.filter]]),i("div",Ka,[k(i("input",{type:"checkbox",id:"onlyEnabled","onUpdate:modelValue":t[1]||(t[1]=p=>o.settings.showOnlyEnabledCategories=p)},null,512),[[P,o.settings.showOnlyEnabledCategories]]),Ma]),i("div",Wa,[i("div",null,[i("input",{name:"primary",type:"radio",checked:s.noPrimary,onChange:t[2]||(t[2]=p=>s.primaryChanged(null))},null,40,Za),h(" No Primary ")]),(l(!0),d(b,null,T(s.categories,p=>(l(),_(m,{category:p,item:n.item,key:p.id,onPrimaryChanged:s.primaryChanged,onSecondaryChanged:s.secondaryChanged},null,8,["category","item","onPrimaryChanged","onSecondaryChanged"]))),128)),(l(!0),d(b,null,T(s.badLinks,p=>(l(),d("div",{class:"category",key:p.id},[i("div",null,[i("input",{name:"primary",type:"radio",checked:s.hasCategory(p)==2,onChange:C=>s.primaryChanged(p)},null,40,ja),h(" Primary? ")]),i("div",null,[i("input",{id:`bad${p.id}`,type:"checkbox",checked:!0,onChange:C=>s.removeLink(n.item.categoryLinks,p)},null,40,Ya),i("label",{for:`bad${p.id}`},f(p.name),9,Ha),g(y,{class:"ml-5px inline",errors:[{msg:`Couldn't find category with id: ${p.targetId}`,severity:"error"}]},null,8,["errors"])])]))),128))])],64))])}const ze=v(Ga,[["render",Xa],["__scopeId","data-v-060e1a43"]]);function za(e){return Math.round(e*100)/100}function Ja(e){let t="";e=Ye(e,n=>n.name);for(const n of e)if(n.value!=0){let o="";n.name.length!=0&&(o=" "+n.name),t=`${t}<span class='cost'>${za(n.value)}${o}</span>`}return t.length==0?t:`<span class="costList">${t}</span>`}const $a=X({props:{item:{type:Object,required:!0},noSortIndex:Boolean,imported:Boolean,highlight:Boolean,grouped:Boolean},setup(){return{settings:Z()}},methods:{getNameExtra:j,getName:te},computed:{costs(){var o;const e=[],t=this.item.getCatalogue(),n=this.item.getCosts();for(const r of n){const s=((o=t==null?void 0:t.findOptionById(r.typeId))==null?void 0:o.name)||r.name||r.typeId;s&&e.push({name:s,value:r.value,typeId:r.typeId})}return Ja(e)}}});const er={class:"typeIcon-wrapper"},tr=["src"],nr={key:0,class:"primary"},ir={key:1,class:"gray"},sr={key:2,class:"gray"},or=["innerHTML"];function lr(e,t,n,o,r,s){var a,m,y;const c=Fe;return l(),d("span",{class:U({highlight:e.highlight})},[i("span",er,[i("img",{class:"typeIcon",src:`assets/bsicons/${e.item.editorTypeName}.png`},null,8,tr)]),g(c,{errors:e.item.errors},null,8,["errors"]),e.settings.display.primaryCategory&&((a=e.item.parent)!=null&&a.isCatalogue())&&["selectionEntries","entryLinks"].includes(e.item.parentKey)?(l(),d("span",nr,"["+f(((y=(m=e.item.getPrimaryCategoryLink())==null?void 0:m.target)==null?void 0:y.name)??"Uncategorized")+"] ",1)):u("",!0),e.item.sortIndex&&!e.noSortIndex&&e.settings.display.sortIndex?(l(),d("span",ir," ["+f(e.item.sortIndex)+"] ",1)):u("",!0),i("span",{class:U({imported:e.imported,filtered:e.item.highlight})},f(e.getName(e.item)),3),e.getNameExtra(e.item,e.settings.display.references,!(e.grouped&&e.item.parentKey==="sharedProfiles"))?(l(),d("span",sr,"  "+f(e.getNameExtra(e.item,e.settings.display.references,!(e.grouped&&e.item.parentKey==="sharedProfiles"))),1)):u("",!0),e.costs&&e.settings.display.costs?(l(),d("span",{key:3,class:"ml-10px",innerHTML:e.costs},null,8,or)):u("",!0)],2)}const Nt=v($a,[["render",lr],["__scopeId","data-v-a9b1f555"]]),ar=X({props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},setup(){return{store:G()}},computed:{get_sort_items(){return ee([...this.item.iterateSelectionEntries()],e=>e.getName())}},methods:{get(e){return e.sortIndex},set(e,t){e.sortIndex=t,this.store.set_catalogue_changed(e.catalogue,!0)},del(e){delete e.sortIndex,this.store.set_catalogue_changed(e.catalogue,!0)}},components:{SortOrder:It,Entry:Nt}}),rr={key:0,class:"mt-10px"},dr=i("legend",null,"Childs Order",-1);function cr(e,t,n,o,r,s){const c=N("Entry"),a=N("SortOrder");return e.get_sort_items.length>1?(l(),d("fieldset",rr,[dr,g(a,{items:e.get_sort_items,get:e.get,set:e.set,del:e.del,parent:e.item},{item:I(({item:m})=>{var y;return[g(c,{item:m,noSortIndex:""},null,8,["item"]),((y=m.refs)==null?void 0:y.length)>1?(l(),d(b,{key:0},[h(">1 refs")],64)):u("",!0)]}),_:1},8,["items","get","set","del","parent"])])):u("",!0)}const Je=v(ar,[["render",cr]]),ur={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function mr(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=Bl,p=Vt,C=Xe,A=Be,R=ze,K=ke,E=Je;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Selection Entry ")]),_:1},8,["item"]),g(p,{item:n.item,class:"section"},null,8,["item"]),g(C,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(A,{item:n.item,class:"section"},{default:I(()=>[h(" Entry ")]),_:1},8,["item"]),g(R,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(K,{item:n.item,withCategory:!1,class:"section"},null,8,["item"]),g(E,{item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])],64)}const gr=v(ur,[["render",mr],["__scopeId","data-v-78927fb3"]]),hr={setup(){return{store:G()}},data(){return{filter:"",val:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},computed:{allowEntries(){return!0},allowGroups(){var e;return!((e=this.item.parent)!=null&&e.isCatalogue()&&this.item.parentKey==="entryLinks")}},methods:{getNameExtra:j,availableTargets(){if(this.type==="catalogue"){const t=this.catalogue.gameSystemId||this.catalogue.id;return Object.values(this.store.get_system(t).catalogueFiles).map(r=>({id:r.catalogue.id,name:r.catalogue.name,editorTypeName:"catalogueLink"})).filter(r=>r.id!==this.catalogue.id)}if(this.type==="force"){const t=[];for(const n of[...this.catalogue.imports,this.catalogue])for(const o of n.forcesIteratorRecursive())t.push(o);return t}const e=[];for(const t of this.catalogue.iterateAllImported())this.targetIsValid(t)&&(t.isLink()||e.push(t));return ee(e,t=>t.name)},typeChanged(){},targetIdChanged(){this.updateLink()},async updateLink(){if(this.type==="catalogue"&&this.item.targetId){const e=this.item.target;e&&this.catalogue.removeRef(this.catalogue,e);const t=this.catalogue.gameSystemId||this.catalogue.id;await this.catalogue.reload(this.store.get_system(t));const n=this.item.target;n?(this.catalogue.addRef(this.catalogue,n),this.item.name=n.name,this.item.type=n.editorTypeName):this.item.name="Unknown"}else{this.catalogue.updateLink(this.item);const e=this.item.target;if(e){this.item.name=e.name||"Unknown";const t=e.editorTypeName||this.item.type;t!=="categoryEntry"&&(this.item.type=t)}}},getType(e){return e.target?e.target.editorTypeName:"bullet"},itemName(e){return e.name},itemValue(e){return e.name},targetIsValid(e){return this.item.type==null||this.item.type==="category"||this.item.type==="categoryEntry"?e.editorTypeName=="categoryEntry":e.editorTypeName==this.item.type},showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))}}},Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFKSURBVDhPpZLBSgJRFIbvuTtHXyBaWEG0TRxFCAJd9B6B4CLoXaKVLVr4FK3GTRGEMwvXYYPQI1TQ4D2d/3gVnEFh7IPBc37mHD2/P5kcH63WuVssBmxMT9pjaESUOmPGhnl4miQJtBXrBfNOp/KbZXdS9kUsLAaylGXJY4Xo9jCOv6Hpi374SZpL9CuOosgYa03a7cqojHsc80tAdIUlFgK+OT8MbK2mTx5LdPHDfK81bpbPPppSEF2/NxqhhWHbbt6FzhANrHd7L2RJDx7oX7UndTXxP4ihlPq6NHL+3Drnxr4vMGu3zSwMNzKQI7Li5FATVh5eED1YzbbE04sbnEwm+mxhdBbHb2oiss3Mzyp7bLXqq2Uic7wGWXaDYh2gz2Yz0HhKwnYEC6eOMHwwnX5BKLyIeCJhCIm0dWjqthiWyc342dCWGPMHCdh2fZxOhd0AAAAASUVORK5CYII=";const Y=e=>(O("data-v-4a86c500"),e=e(),L(),e),pr=Y(()=>i("legend",null,[i("img",{src:Ne}),h(" Link")],-1)),fr={class:"editorTable"},yr={key:0},Ar=Y(()=>i("td",null,"Link Type:",-1)),_r={key:0,value:"selectionEntry"},Cr={key:1,value:"selectionEntryGroup"},vr={key:1},br=Y(()=>i("td",null,"Link Type:",-1)),kr=Y(()=>i("option",{value:"profile"},"Profile",-1)),Er=Y(()=>i("option",{value:"rule"}," Rule ",-1)),wr=Y(()=>i("option",{value:"infoGroup"}," Info Group ",-1)),Ir=[kr,Er,wr],xr=Y(()=>i("td",null,"Link To:",-1)),Tr=["src"],Sr=Y(()=>i("img",{class:"errIcon",src:Bt},null,-1)),Rr=Y(()=>i("td",null,"Target ID:",-1)),Vr=Y(()=>i("td",null,"Target:",-1)),Fr={style:{"white-space":"nowrap"}},Nr=["src"],Br={class:"gray"},Ur={key:0,class:"shared"},Pr={key:1,class:"catalogueName"},Or={key:2},Lr=Y(()=>i("td",null,null,-1)),Qr=Y(()=>i("label",{for:"importRoot"},"Import Root Entries",-1));function Gr(e,t,n,o,r,s){const c=se;return l(),d("fieldset",null,[pr,i("table",fr,[n.type=="entry"?(l(),d("tr",yr,[Ar,i("td",null,[k(i("select",{onChange:t[0]||(t[0]=(...a)=>s.typeChanged&&s.typeChanged(...a)),"onUpdate:modelValue":t[1]||(t[1]=a=>n.item.type=a)},[s.allowEntries?(l(),d("option",_r,"Selection Entry")):u("",!0),s.allowGroups?(l(),d("option",Cr," Selection Entry Group ")):u("",!0)],544),[[W,n.item.type]])])])):u("",!0),n.type=="info"?(l(),d("tr",vr,[br,i("td",null,[k(i("select",{onChange:t[2]||(t[2]=(...a)=>s.typeChanged&&s.typeChanged(...a)),"onUpdate:modelValue":t[3]||(t[3]=a=>n.item.type=a)},Ir,544),[[W,n.item.type]])])])):u("",!0),i("tr",null,[xr,i("td",null,[n.item.target?(l(),d(b,{key:0},[n.item.type?(l(),d("img",{key:0,class:"linkIcon",src:`assets/bsicons/${s.getType(n.item)}.png`},null,8,Tr)):u("",!0),h(" "+f(n.item.target.name),1)],64)):(l(),d(b,{key:1},[Sr,h(" No target selected ")],64))])]),i("tr",null,[Rr,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=a=>n.item.targetId=a),onChange:t[5]||(t[5]=(...a)=>s.targetIdChanged&&s.targetIdChanged(...a))},null,544),[[S,n.item.targetId]])])]),i("tr",null,[Vr,i("td",null,[g(c,{modelValue:n.item.targetId,"onUpdate:modelValue":t[6]||(t[6]=a=>n.item.targetId=a),placeholder:"Search Target...",options:s.availableTargets,valueField:"id",filterField:"name",onChange:s.targetIdChanged},{option:I(a=>[i("div",Fr,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName}.png`},null,8,Nr),h(" "+f(a.option.name)+" ",1),i("span",Br,f(s.getNameExtra(a.option,!1)),1),a.option.shared?(l(),d("span",Ur," (shared)")):u("",!0),s.showCatalogue(a.option)?(l(),d("span",Pr," ["+f(a.option.catalogue.name)+"]",1)):u("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange"])])]),n.type==="catalogue"?(l(),d("tr",Or,[Lr,i("td",null,[k(i("input",{id:"importRoot",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>n.item.importRootEntries=a)},null,512),[[P,n.item.importRootEntries]]),Qr])])):u("",!0)])])}const Dr=v(hr,[["render",Gr],["__scopeId","data-v-4a86c500"]]),qr={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},setup(){return{settings:Z()}},methods:{linkChanged(){this.settings.autoRenameInfoLinkParent&&this.item.parent&&(this.item.parent.name=this.item.name)}},computed:{isEntryOrGroup(){return this.item.editorTypeName=="selectionEntryLink"||this.item.editorTypeName=="selectionEntryGroupLink"},isGroup(){return this.item.editorTypeName=="selectionEntryGroupLink"},isEntry(){return this.item.editorTypeName=="selectionEntryLink"}}};function Kr(e,t,n,o,r,s){var re,w,ue;const c=Q,a=q,m=ie,y=Dr,p=Xe,C=Vt,A=Be,R=ze,K=Tt,E=St,D=He,de=ke,ce=Je;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),n.type!="catalogue"?(l(),_(m,{key:0,item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"])):u("",!0),g(y,{item:n.item,catalogue:n.catalogue,class:"section",type:n.type,onChange:s.linkChanged},null,8,["item","catalogue","type","onChange"]),s.isEntry?(l(),_(p,{key:1,item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"])):u("",!0),s.isEntry?(l(),_(C,{key:2,item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"])):u("",!0),n.type!="catalogue"?(l(),_(A,{key:3,item:n.item,class:"section"},{default:I(()=>[h(" Entry ")]),_:1},8,["item"])):u("",!0),s.isEntryOrGroup?(l(),_(R,{key:4,item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"])):u("",!0),(re=n.item.target)!=null&&re.isProfile()?(l(),_(K,{key:5,class:"mt-10px",item:n.item.target,catalogue:n.item.target.catalogue,link:""},null,8,["item","catalogue"])):u("",!0),(w=n.item.target)!=null&&w.isProfile()?(l(),_(E,{key:6,class:"mt-10px",item:n.item.target,catalogue:n.item.target.catalogue,link:""},null,8,["item","catalogue"])):u("",!0),(ue=n.item.target)!=null&&ue.isRule()?(l(),_(D,{key:7,class:"section",item:n.item.target,catalogue:n.catalogue,link:""},null,8,["item","catalogue"])):u("",!0),n.type=="entry"||n.type=="categoryEntry"?(l(),_(de,{key:8,item:n.item,withCategory:!1,class:"section"},null,8,["item"])):u("",!0),s.isEntryOrGroup?(l(),_(ce,{key:9,item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])):u("",!0)],64)}const Mr=v(qr,[["render",Kr]]),Wr={props:{modelValue:{type:Object},placeholder:{type:String,default:"Search..."},fetch:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},created(){this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,availableOptions:[]}},watch:{modelValue(){this.reset()}},methods:{async foundOptions(){return(await this.fetch()).map(t=>({option:t}))},targetSelected(e){let t=e.option;this.selectedOption={option:e.option,selected:!0},this.$emit("update:modelValue",t),this.emitNativeChangeEvent(e.option),this.editing=!1},emitNativeChangeEvent(e){var n;const t=new CustomEvent("change",{bubbles:!0,detail:{value:e}});(n=this.$el)==null||n.dispatchEvent(t)},reset(){this.searchPattern="",this.selectedOption=null,this.modelValue&&(this.selectedOption={option:this.modelValue,selected:!0})},onClickOutside(){this.editing=!1},async startEditing(){this.disabled||(this.editing=!0,this.availableOptions=await this.foundOptions())},clicked(){this.editing=!1}}};const Zr={key:0,class:"gray"},jr=["onClick"];function Yr(e,t,n,o,r,s){const c=yt("click-outside");return l(),d("div",{class:U(["select-container",{disabled:n.disabled}])},[k((l(),d("div",{onClick:t[0]||(t[0]=(...a)=>s.startEditing&&s.startEditing(...a)),class:"iconselect-input"},[r.selectedOption?M(e.$slots,"option",pe(dn({key:1},r.selectedOption)),void 0,!0):(l(),d("span",Zr,f(n.placeholder),1))])),[[c,s.onClickOutside]]),i("div",{class:U(["suggestions",{hidden:!r.editing}])},[(l(!0),d(b,null,T(r.availableOptions,a=>(l(),d("div",{onClick:m=>s.targetSelected(a)},[M(e.$slots,"option",pe(Ce(a)),void 0,!0)],8,jr))),256))],2)],2)}const Ut=v(Wr,[["render",Yr],["__scopeId","data-v-bd2f86cd"]]),Hr={selectionEntry:["costs","name","annotation","page","hidden","category","constraints","defaultAmount","error","warning","info"],selectionEntryLink:["costs","name","annotation","page","hidden","category","constraints","defaultAmount","error","warning","info"],selectionEntryGroup:["name","annotation","page","hidden","category","constraints","defaultSelectionEntryId","error","warning","info"],selectionEntryGroupLink:["name","annotation","page","hidden","category","constraints","defaultSelectionEntryId","error","warning","info"],anyProfile:["name","annotation","page","hidden"],anyEntry:["name","costs","category","annotation","page","hidden","error","warning","info"],profile:["characteristics","name","annotation","page","hidden"],profileLink:["characteristics","name","annotation","description","page","hidden"],rule:["name","annotation","description","page","hidden"],ruleLink:["name","annotation","description","page","hidden"],infoLink:["name","annotation","page","hidden"],infoGroup:["name","annotation","page","hidden"],infoGroupLink:["name","annotation","page","hidden"],forceEntry:["name","annotation","page","hidden","constraints","costs","error","warning","info","readme"],forceEntryLink:["name","annotation","page","hidden","constraints","costs","error","warning","info","readme"],categoryEntry:["name","page","hidden","constraints"],categoryEntryLink:["name","page","hidden","constraints"],costType:["hidden"]},Xr={costs:"number",name:"string",annotation:"string-or-number",page:"string",hidden:"boolean",description:"string",category:"category",defaultSelectionEntryId:"defaultSelectionEntryId",defaultAmount:"defaultAmount",constraints:"number",error:"string",warning:"string",info:"string"},zr=new Set(["cost","categories","constraints","characteristics","error","warning","info"]),ge={id:"set",name:"Set",word:"to"},at={id:"multiply",name:"Multiply",word:"by"},rt={id:"divide",name:"Divide",word:"by"},dt={id:"modulo",name:"Modulo",word:"by"},ct={id:"increment",name:"Increment",word:"by"},ut={id:"decrement",name:"Decrement",word:"by"},mt={id:"ceil",name:"Ceil",word:"to"},gt={id:"floor",name:"Floor",word:"to"},ht={id:"append",name:"Append",word:"with"},pt={id:"prepend",name:"Prepend",word:"with"},ft={id:"replace",name:"Replace",word:"with"},Jr={id:"add",name:"Add",word:""},$r={id:"add",name:"Add",word:"message:"},ed={id:"add",name:"Add",word:"message:"},td={id:"add",name:"Add",word:"message:"},nd={id:"remove",name:"Remove",word:""},id={id:"set-primary",name:"Set Primary",word:"to"},sd={id:"unset-primary",name:"Unset Primary",word:"to"},od={number:[ge,ct,ut,at,rt,dt,mt,gt],string:[ge,ht,pt,ft],"string-or-number":[ge,ht,pt,ft,ct,ut,at,rt,dt,mt,gt],boolean:[ge],defaultSelectionEntryId:[ge],category:[Jr,nd,id,sd],defaultAmount:[ge],error:[$r],warning:[ed],info:[td]},ld={components:{ErrorIcon:Fe},data(){return{value:"",selectedField:null,selectedOperation:null,selectedValue:null}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{getName:te,getNameExtra:j,changed(){this.selectedField&&(this.item.field=this.selectedField.id),this.selectedOperation&&(this.item.type=this.selectedOperation.id)},getDefaultFieldValue(e,t,n){var o;switch(e){case"number":return typeof n=="number"?n:0;case"category":return this.allCategories[0].id;case"string":let r;if(t==="name"){const s=this.item;r=s.getName&&s.getName()||""}else r="";return typeof n=="string"?n:r;case"string-or-number":return["string","number"].includes(typeof n)?n:"";case"boolean":return typeof n=="boolean"?n:!1;case"defaultSelectionEntryId":return(o=cn(this.allGroupEntries))==null?void 0:o.id;case"defaultAmount":return typeof n=="number"?String(n):"0";case"error":case"warning":case"info":return n&&typeof n=="string"?n:"{this} is not allowed";default:throw Error(`fieldType "${e}" has no default value set"`)}},fieldChanged(){this.selectedOperation=this.operations.find(e=>{var t;return e.id===((t=this.selectedOperation)==null?void 0:t.id)})||this.operations[0],this.selectedField&&(this.item.value=this.getDefaultFieldValue(this.selectedField.type,this.selectedField.name,this.item.value)),this.changed()},update(){this.selectedField=this.fieldData.find(e=>e.id===this.item.field)||null,this.selectedOperation=this.operations.find(e=>e.id===this.item.type)||null,this.selectedField||(this.selectedField=this.fieldData[0]),this.selectedOperation||(this.selectedOperation=this.operations[0]||null)}},watch:{item(){this.update()}},computed:{join:{get(){return this.item.join??" "},set(e){e===" "&&delete this.item.join,this.item.join=e}},position:{get(){return this.item.position},set(e){this.item.position=e===""?void 0:Number(e)}},inputType(){var e,t;return this.selectedField?this.selectedField.type==="category"?"category":this.selectedField.type==="defaultSelectionEntryId"?"defaultSelectionEntryId":this.selectedField.type==="number"?"number":this.selectedField.type==="boolean"?"boolean":((e=this.selectedOperation)==null?void 0:e.id)==="increment"||((t=this.selectedOperation)==null?void 0:t.id)==="decrement"?"number":"string":""},parent(){return H(this.item)},allCategories(){let e=[];for(let t of this.catalogue.iterateCategoryEntries())e.push(t);return e},allGroupEntries(){var e;return[...((e=this.parent)==null?void 0:e.selectionsIterator())||[]]},operations(){return this.selectedField?od[this.selectedField.type]||[]:[]},errors(){return[]},costs(){const e=[];for(const t of this.catalogue.iterateCostTypes())e.push({id:t.id,name:t.name,type:"number",modifierType:"cost"});return e},constraints(){const e=[];if(!this.parent)return[];for(const t of this.parent.constraintsIterator())e.push({id:t.id,name:te(t),type:"number",modifierType:"constraint"});return e},type(){var e;if(this.item.affects&&this.item.affects!=="self"){const n=(_t(this.item.affects).affectsWhat||"entries").split("."),o=n.indexOf("profiles");if(o!==-1){const r=n[o+1];if(r===void 0||r==="all")return{type:"anyProfile"};if(this.parent){for(const s of this.parent.getCatalogue().iterateProfileTypes())if(s.getName().toLowerCase()===r.toLowerCase())return{type:"profile",value:s}}return{type:"invalid"}}return{type:"anyEntry"}}else if(this.item.scope){const t=(e=this.parent)==null?void 0:e.getCatalogue().findOptionById(this.item.scope);if(t&&t.editorTypeName)return{type:t.editorTypeName}}},fieldData(){var n,o;if(!this.parent)return[];let e=Hr[((n=this.type)==null?void 0:n.type)||this.parent.editorTypeName];const t=[];if(!e)return[];if(e.includes("costs")&&t.push(...this.costs),e.includes("constraints")&&t.push(...this.constraints),e.includes("characteristics")){let r=(o=this.type)==null?void 0:o.value;!r&&this.parent.isProfile()&&(r=this.parent.isLink()?this.parent.target:this.parent),r&&(r!=null&&r.characteristics&&t.push(...r.characteristics.map(s=>({id:s.typeId,name:s.name,type:"string-or-number",modifierType:"characteristic",value:s.$text}))),r!=null&&r.characteristicTypes&&t.push(...r.characteristicTypes.map(s=>({id:s.id,name:s.name,type:"string-or-number",modifierType:"characteristic"}))))}return e.includes("category")&&t.push({id:"category",name:"Category",type:"category",modifierType:"category"}),e.includes("error")&&t.push({id:"error",name:"Error",type:"error",modifierType:"error"}),e.includes("warning")&&t.push({id:"warning",name:"Warning",type:"warning",modifierType:"warning"}),e.includes("info")&&t.push({id:"info",name:"Info",type:"info",modifierType:"info"}),e=e.filter(r=>!zr.has(r)),e.map(r=>({id:r,name:r,type:Xr[r],modifierType:"bullet"})).concat(t)}}};const Ee=e=>(O("data-v-b07b6e41"),e=e(),L(),e),ad=Ee(()=>i("legend",null,"Modifier",-1)),rd={class:"modifier"},dd=["value"],cd={class:"flex align-items flex-row"},ud=["src"],md={class:"inline"},gd={key:1},hd={key:0,class:"mx-5px whitespace-nowrap"},pd={class:"mx-5px"},fd={key:0,class:"cost !m-0 whitespace-pre"},yd={key:1},Ad={key:0},_d=Ee(()=>i("option",{value:!0},"True",-1)),Cd=Ee(()=>i("option",{value:!1},"False",-1)),vd=[_d,Cd],bd={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},kd=["src"],Ed={class:"inline"},wd={class:"grey"},Id={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},xd=["src"],Td={class:"inline"},Sd={class:"grey"},Rd={key:4},Vd=Ee(()=>i("span",{class:"hastooltip",title:"1-Based index of the match to affect. supports negative indexes. 0 = All"}," position: ",-1)),Fd={class:"mt-8px flex items-center"},Nd=Ee(()=>i("img",{src:Bt},null,-1)),Bd={class:"ml-10px"};function Ud(e,t,n,o,r,s){var p,C,A,R,K;const c=Ut,a=ne,m=oe,y=se;return l(),d("fieldset",null,[ad,i("div",rd,[r.selectedOperation?k((l(),d("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=E=>r.selectedOperation=E),onChange:t[1]||(t[1]=(...E)=>s.changed&&s.changed(...E))},[(l(!0),d(b,null,T(s.operations,E=>(l(),d("option",{value:E},f(E.name),9,dd))),256))],544)),[[W,r.selectedOperation]]):u("",!0),g(c,{class:"select",modelValue:r.selectedField,"onUpdate:modelValue":t[2]||(t[2]=E=>r.selectedField=E),fetch:()=>s.fieldData,onChange:s.fieldChanged},{option:I(E=>[i("div",cd,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${E.option.modifierType}.png`},null,8,ud),i("span",md,f(E.option.name),1)])]),_:1},8,["modelValue","fetch","onChange"]),((p=r.selectedOperation)==null?void 0:p.id)=="replace"?(l(),d("div",gd,[k(i("input",{onChange:t[3]||(t[3]=(...E)=>s.changed&&s.changed(...E)),type:"text","onUpdate:modelValue":t[4]||(t[4]=E=>n.item.arg=E),placeholder:"text to replace"},null,544),[[S,n.item.arg]]),r.selectedOperation?(l(),d("span",hd,[h(f(r.selectedOperation.word)+" ",1),k(i("input",{onChange:t[5]||(t[5]=(...E)=>s.changed&&s.changed(...E)),type:"text","onUpdate:modelValue":t[6]||(t[6]=E=>n.item.value=E)},null,544),[[S,n.item.value]])])):u("",!0)])):((C=r.selectedOperation)==null?void 0:C.id)==="append"||((A=r.selectedOperation)==null?void 0:A.id)==="prepend"?(l(),d(b,{key:2},[i("div",pd,[h(f(r.selectedOperation.word)+" ",1),g(a,{class:"inline-block",onChange:s.changed,type:"text",modelValue:n.item.value,"onUpdate:modelValue":t[7]||(t[7]=E=>n.item.value=E)},null,8,["onChange","modelValue"])]),i("div",null,[h(" separate by: "),g(a,{class:"inline-block",onChange:s.changed,type:"text",modelValue:s.join,"onUpdate:modelValue":t[8]||(t[8]=E=>s.join=E)},null,8,["onChange","modelValue"]),h(" ("),s.join.length?(l(),d("span",fd,f(s.join.replace(`
`,"\\n")),1)):(l(),d("span",yd,"nothing")),h(") ")])],64)):(l(),d(b,{key:3},[r.selectedOperation?(l(),d("span",Ad,f(r.selectedOperation.word),1)):u("",!0),s.inputType==="number"?(l(),_(m,{key:1,onChange:s.changed,modelValue:n.item.value,"onUpdate:modelValue":t[9]||(t[9]=E=>n.item.value=E),style:{width:"60px","margin-left":"3px"}},null,8,["onChange","modelValue"])):u("",!0),s.inputType=="boolean"?k((l(),d("select",{key:2,onChange:t[10]||(t[10]=(...E)=>s.changed&&s.changed(...E)),"onUpdate:modelValue":t[11]||(t[11]=E=>n.item.value=E)},vd,544)),[[W,n.item.value]]):u("",!0),s.inputType.includes("string")?(l(),_(a,{key:3,onChange:s.changed,type:"text",modelValue:n.item.value,"onUpdate:modelValue":t[12]||(t[12]=E=>n.item.value=E),style:{"min-width":"200px"}},null,8,["onChange","modelValue"])):u("",!0),s.inputType=="category"?(l(),_(y,{key:4,class:"!max-w-350px",options:s.allCategories,filterField:E=>E.getName(),valueField:"id",modelValue:n.item.value,"onUpdate:modelValue":t[13]||(t[13]=E=>n.item.value=E),onChange:s.changed},{option:I(({option:E})=>[i("div",bd,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${E.editorTypeName}.png`},null,8,kd),i("span",Ed,[h(f(s.getName(E))+" ",1),i("span",wd,f(s.getNameExtra(E)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])):u("",!0),s.inputType=="defaultSelectionEntryId"?(l(),_(y,{key:5,class:"!max-w-350px",options:s.allGroupEntries,filterField:E=>E.getName(),valueField:"id",modelValue:n.item.value,"onUpdate:modelValue":t[14]||(t[14]=E=>n.item.value=E),onChange:s.changed},{option:I(({option:E})=>[i("div",Id,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${E.editorTypeName}.png`},null,8,xd),i("span",Td,[h(f(s.getName(E))+" ",1),i("span",Sd,f(s.getNameExtra(E)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])):u("",!0)],64)),(R=r.selectedOperation)!=null&&R.id&&((K=r.selectedField)!=null&&K.type)&&["replace","increment","decrement","multiply","divide","modulo","floor","ceil"].includes(r.selectedOperation.id)&&["string","string-or-number"].includes(r.selectedField.type)?(l(),d("div",Rd,[i("span",null,[Vd,k(i("input",{onChange:t[15]||(t[15]=(...E)=>s.changed&&s.changed(...E)),type:"number","onUpdate:modelValue":t[16]||(t[16]=E=>n.item.position=E),style:{width:"60px","margin-left":"3px"}},null,544),[[S,n.item.position]])])])):u("",!0)]),(l(!0),d(b,null,T(s.errors,E=>(l(),d("div",Fd,[Nd,i("span",Bd,f(E.msg),1)]))),256))])}const Pd=v(ld,[["render",Ud],["__scopeId","data-v-b07b6e41"]]);function we(e){var t;return((t=e.catalogue)==null?void 0:t.getName())??null}function Oe(e){if(e!=null&&e.parent){for(;e!=null&&e.parent&&!e.parent.isCatalogue();)e=e.parent;return e}}function Od(e){let t=0;if(!(e!=null&&e.parent))return t;for(;e!=null&&e.parent&&!e.parent.isCatalogue();)e=e.parent,t++;return t}function fe(e,t,n,o=0){var r,s;for(const c of e[t]())n.push({name:c.name,editorTypeName:c.editorTypeName,id:c.id,indent:o,catalogue:we(c),rootId:(r=Oe(c))==null?void 0:r.id,shared:((s=c.parentKey)==null?void 0:s.includes("shared"))||!1}),fe(c,t,n,o+1)}function Ld(e,t,n,o,r=0){var s,c;for(const a of e[t]())o.push({name:a.name,editorTypeName:a.editorTypeName,id:a.id,indent:r,rootId:(s=Oe(a))==null?void 0:s.id,catalogue:we(a),shared:((c=a.parentKey)==null?void 0:c.includes("shared"))||!1}),fe(a,t,o,r+1)}function ve(e,t){let n=[];for(const o of e.imports||[])fe(o,t,n);return fe(e,t,n),n}function Pt(e){var o;const t=[],n=mn(H(e),r=>!r.isInfoGroup()&&!r.isProfile()&&!r.isRule());if(!n)return t;for(const r of gn(n)){const s=Oe(r);t.push({name:r.name,editorTypeName:r.editorTypeName,id:r.id,indent:Od(r),catalogue:we(r),rootId:s==null?void 0:s.id,shared:((o=r.parentKey)==null?void 0:o.includes("shared"))||!1})}return t}function qe(e,t){const n=[],o=t?"iterateSelectionEntriesWithRoot":"iterateSelectionEntries";for(const r of e.imports||[])fe(r,o,n);return fe(e,o,n),n}function Qd(e,t){const n=[],o=e.getPrimaryCategory();return Ld(t,"iterateAllRootEntries",r=>be(r).getPrimaryCategory()===o,n),n}function $e(e){var n,o;const t=[];for(let r of e.iterateCategoryEntries()){const s=r;s.isCatalogue()||t.push({name:s.name,editorTypeName:s.editorTypeName,id:s.id,indent:0,catalogue:we(s),shared:((o=(n=be(s))==null?void 0:n.parentKey)==null?void 0:o.includes("shared"))||!1})}return t}function Gd(e){const t=[];for(const n of Object.values(e.manager.getAllCatalogueFiles())){if(!n.catalogue)continue;const o=un(n);t.push({name:o.name,editorTypeName:"catalogue",id:o.id,indent:0,catalogue:null,shared:!1})}return t}function Dd(e){let t=0,n=H(e);for(;n;)t++,n=n.parent;return t}function Ot(e){var s,c,a;let t=[],n=e,o=0;const r=Dd(e)-1;for(n=H(e);n!=null&&!n.isCatalogue();)n.editorTypeName==="selectionEntry"&&(t.push({name:n.name,id:n.id,editorTypeName:n.editorTypeName,indent:o,rootId:(s=Oe(n))==null?void 0:s.id,catalogue:we(n),shared:((a=(c=be(n))==null?void 0:c.parentKey)==null?void 0:a.includes("shared"))||!1}),o++),n=n.parent;return t=t.reverse(),t.forEach((m,y)=>{m.indent=y+r}),t}function Ke(e){const t=ve(e,"iterateRootEntries");return t.splice(0,1),t}function qd(e){return["self","parent","ancestor","primary-category","primary-catalogue","force","roster"].includes(e.scope)==!1}function be(e){let t=e;for(;t.parent!=null&&t.parent.editorTypeName!="gameSystem"&&t.parent.editorTypeName!="catalogue";)t=t.parent;return t}function Kd(e,t){if(["primary-catalogue","roster","force","ancestor"].includes(e.scope))return qe(t,!0);const o=qe(t,!1);if(e.scope=="self"){const s=H(e);return s?o.concat(Ke(s)):o}if(e.scope=="parent"){if(be(e))return qe(t,!0);const s=H(e);return s!=null&&s.parent?o.concat(Ke(s.parent)):o}if(e.scope=="primary-category")return Qd(be(e),t);const r=t.findOptionById(e.scope);return r?o.concat(Ke(r)):o}const $={self:{id:void 0,name:"Self"},parent:{id:"parent",name:"Parent"},roster:{id:"roster",name:"Roster"},force:{id:"force",name:"Force"},category:{id:"category",name:"Category"},ancestor:{id:"ancestor",name:"Ancestor"},parents:{id:"ancestor",name:"All Parents"},primaryCategory:{id:"primary-category",name:"Primary Category"},primaryCatalogue:{id:"primary-catalogue",name:"Primary Catalogue"},rootEntry:{id:"root-entry",name:"Root Entry"},unit:{id:"unit",name:"Type: Unit"},model:{id:"model",name:"Type: Model"},upgrade:{id:"upgrade",name:"Type: Upgrade"},modelOrUnit:{id:"model-or-unit",name:"Type: Model or Unit"}},Md=X({components:{PopupDialog:je},props:{item:{type:Object,required:!0}},data:()=>({fields:{self:!0,entries:!1,forces:!1,recursive:!1,filterBy:"any",affectsWhat:"entries"}}),methods:{getNameExtra:j,showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))}},mounted(){this.fields=_t(this.item.affects)},computed:{scope:{get(){return this.item.scope??"self"},set(e){e==="self"?delete this.item.scope:this.item.scope=e}},catalogue(){return this.item.getCatalogue()},type(){return this.item.editorTypeName},costTypes(){let e=[];for(let t of this.catalogue.iterateCostTypes())e.push(t);return e},rootId(){let e=this.item;if(e!=null&&e.parent){for(;e!=null&&e.parent&&!e.parent.isCatalogue();)e=e.parent;return e.id}},allSelections(){return Ot(this.item)},allCategories(){return $e(this.catalogue)},allForces(){return ve(this.catalogue,"forceEntriesIterator")},allEntries(){return ve(this.catalogue,"entriesIterator")},allParents(){return Pt(this.item)},allAffects(){return[{name:" Entries ",value:"entries"},...[...this.catalogue.iterateProfileTypes()].map(e=>({name:`Profiles (${e.name})`,value:`profiles.${e.name}`,editorTypeName:"profileType"})),{name:"Rules",value:"rules",editorTypeName:"rule"}]},allScopes(){const e=[$.self,$.parent,$.force,$.roster,$.primaryCatalogue];return this.type!=="forceEntry"&&e.push($.rootEntry,$.unit,$.model,$.upgrade,$.modelOrUnit),e.push(...this.allParents),this.type!=="forceEntry"&&e.push(...this.allCategories),e.push(...this.allForces),e},allFilterBy(){return[...Ct,...this.allCategories,...this.allEntries]},filterBySelected(){if(!this.fields.filterBy||this.fields.filterBy==="any")return this.allFilterBy[0];const e=this.allFilterBy.find(t=>t.id===this.fields.filterBy);return e||this.catalogue.findOptionById(this.fields.filterBy)}},watch:{fields:{deep:!0,handler(e){const t=hn(e);!t||t==="self"?delete this.item.affects:this.item.affects=t,console.log(t)}}}});const le=e=>(O("data-v-fc1c3f02"),e=e(),L(),e),Wd=le(()=>i("legend",null,"Query",-1)),Zd={class:"editorTable"},jd=le(()=>i("td",null,"Scope:",-1)),Yd={style:{"white-space":"nowrap"}},Hd=["src"],Xd={class:"gray"},zd={key:1,class:"shared"},Jd={key:2,class:"catalogueName"},$d=le(()=>i("td",null,"Affects: ",-1)),ec=["src"],tc={style:{"white-space":"nowrap"}},nc=le(()=>i("td",null,"Filter By: ",-1)),ic={key:0,style:{"white-space":"nowrap"}},sc=["src"],oc={class:"gray"},lc={key:1,class:"shared"},ac={key:2,class:"gray"},rc={key:3,class:"catalogueName"},dc={class:"checks"},cc=le(()=>i("label",{for:"includeSelf"},"Include self(scope)",-1)),uc=le(()=>i("label",{for:"includeChildSelections"},"Include child Selections",-1)),mc=le(()=>i("label",{for:"includeChildForces"},"Include child Forces",-1)),gc=le(()=>i("label",{for:"recursive"},"Recursive",-1));function hc(e,t,n,o,r,s){const c=se;return l(),d("fieldset",null,[Wd,i("table",Zd,[i("tr",null,[jd,i("td",null,[g(c,{modelValue:e.item.scope,"onUpdate:modelValue":t[0]||(t[0]=a=>e.item.scope=a),placeholder:"Search Scope...",options:e.allScopes,valueField:"id",filterField:"name",default:e.allScopes[0]},{option:I(a=>[i("div",Yd,[a.option.indent>=2&&!a.selected?(l(!0),d(b,{key:0},T(a.option.indent-1,m=>(l(),d("span",null,"   "))),256)):u("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName||"bullet"}.png`},null,8,Hd),h(" "+f(a.option.name)+" ",1),i("span",Xd,f(e.getNameExtra(a.option,!1)),1),a.option.shared?(l(),d("span",zd," (shared)")):u("",!0),e.showCatalogue(a.option)?(l(),d("span",Jd," ["+f(a.option.catalogue)+"]",1)):u("",!0)])]),_:1},8,["modelValue","options","default"])])]),i("tr",null,[$d,i("td",null,[g(c,{modelValue:e.fields.affectsWhat,"onUpdate:modelValue":t[1]||(t[1]=a=>e.fields.affectsWhat=a),placeholder:"Entries",options:e.allAffects,valueField:"value",filterField:"name"},{option:I(a=>[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName||"bullet"}.png`},null,8,ec),i("span",tc,f(a.option.name),1)]),_:1},8,["modelValue","options"])])]),i("tr",null,[nc,i("td",null,[g(c,{modelValue:e.fields.filterBy,"onUpdate:modelValue":t[2]||(t[2]=a=>e.fields.filterBy=a),placeholder:"Search Child...",options:e.allFilterBy,valueField:"id",filterField:"name",default:e.filterBySelected,lazy:""},{option:I(a=>[a.option?(l(),d("div",ic,[a.option.indent>=1&&!a.selected?(l(!0),d(b,{key:0},T(a.option.indent,m=>(l(),d("span",null,"   "))),256)):u("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName}.png`},null,8,sc),h(" "+f(a.option.name)+" ",1),i("span",oc,f(e.getNameExtra(a.option,!1)),1),a.option.shared?(l(),d("span",lc," (shared) ")):u("",!0),a.option.rootId===e.rootId?(l(),d("span",ac," (same ancestor)")):u("",!0),e.showCatalogue(a.option)?(l(),d("span",rc," ["+f(a.option.catalogue)+"]",1)):u("",!0)])):u("",!0)]),_:1},8,["modelValue","placeholder","options","default"])])])]),i("div",null,[i("div",dc,[i("div",null,[k(i("input",{onChange:t[3]||(t[3]=(...a)=>e.changed&&e.changed(...a)),id:"includeSelf",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=a=>e.fields.self=a)},null,544),[[P,e.fields.self]]),cc]),i("div",null,[k(i("input",{onChange:t[5]||(t[5]=(...a)=>e.changed&&e.changed(...a)),id:"includeChildSelections",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>e.fields.entries=a)},null,544),[[P,e.fields.entries]]),uc]),i("div",null,[k(i("input",{onChange:t[7]||(t[7]=(...a)=>e.changed&&e.changed(...a)),id:"includeChildForces",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=a=>e.fields.forces=a)},null,544),[[P,e.fields.forces]]),mc]),i("div",null,[k(i("input",{onChange:t[9]||(t[9]=(...a)=>e.changed&&e.changed(...a)),id:"recursive",type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=a=>e.fields.recursive=a)},null,544),[[P,e.fields.recursive]]),gc])])])])}const pc=v(Md,[["render",hc],["__scopeId","data-v-fc1c3f02"]]),fc={setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{add(e,t,n,o){t==="id"&&(t=this.item.id);let r=this.item;this.store.create_child("conditions",r,{scope:e,field:t,type:n,value:o,childId:"any",includeChildSelections:!!["roster"].includes(e)})}}},Lt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAABgmlDQ1BJQ0MgUHJvZmlsZQAAKM+VkU0oRFEcxX9miDSizEKyeAusTIRkyVCToqZBGSy898YMNe+Z3hvZWCrbKQsfG18LG2u2FrZKKR8lWxsrYiM9//tGzaRGuXW7v86953TvuRA4yJqWW90Dlp13ErGoNpOc1WqfqSFEE90EddPNDcfj41QcH7dUqfUmorL432hILbomVGnCQ2bOyQsvCA+s5XOKd4TD5pKeEj4V7nLkgsL3SjeK/KI443NAZYadqcSIcFhYy5SxUcbmkmMJ9wu3pyxb8gMzRU4pXldsZVfNn3uqF4YW7elJpctsI8YYE8TRMFhlmSx5IrLaorgkZD9awd/q++PiMsS1jCmOUVaw0H0/6g9+d+um+3qLSaEo1Dx53lsH1G7BV8HzPg897+sIgo9wYZf8Kwcw+C56oaS170PjBpxdljRjG843oeUhpzu6LwVlBtJpeD2Rb0pC8zXUzxV7+9nn+A6mpKvxK9jdg86MZM9XeHddeW9/nvH7I/oNQUlyk6fcG6sAAAAJcEhZcwAALiIAAC4iAari3ZIAAAH9SURBVDhPnZJPaBNBFMa//ZPNpgHT0HartRD/IKJSRIoFLd5VPEmPBgQtXgqCnooIohRE8CBe9CZCTx48evGioKlKpCGiFUWxNmnS3eomNNnN7mafM2NZXNKTD37L8L3ve7MzjIQt6vrDdbIaJNaDGQm3Lg30+GLC5bsrdPRgGsfG0hgZUoVWNQMUyi28+9jCvaujvRtN31yirz/bFAQB+b4fg2u8xz2b9r81deUNff7eJNd1yXEcmsy/iLGwWBc97uFenpH5Z+JQGqOGAjYdbDryZ3YIThzZhmaziYXSmuhxDz8KL+Xk9DO6OLUPmbQEIhLsz2nIGSF+VBoolH4hNxxie38btt3AQDaFmnzqhrxccbFrpA9hGMLzPJimhWq1huevV/HgSRUTYwYunN0NWVbZUGA4q4BnZFXtA5jgOB1Ylo1OJ4CiJHDnsQ1JSmFuZg9c14OqagJip+MZeW9uEF+W22i1PBbQkEjogsL8cYHndSONs2oBPCM/vT8uvSz60PUUNC0ZcXqmIvhXSybZwDLAM+JWi0syzAYPpqLJup4RxHZbT6L8TRO3GlV+9je9/+BQve5QrebQxkYg4GuuvS216RzzbNrjT443xg9omDycwE6D/QyzrZhdvFr0UfzkY/52NvL3vj1W56+ZtGYrYm30d/FobmhL338U8AdLygpqJt/tXAAAAABJRU5ErkJggg==";const z=e=>(O("data-v-63120d4c"),e=e(),L(),e),yc=z(()=>i("legend",null,[i("img",{src:Lt}),h(" Quick Conditions")],-1)),Ac={class:"columns"},_c={class:"buttonList"},Cc=z(()=>i("img",{src:V},null,-1)),vc=z(()=>i("img",{src:V},null,-1)),bc=z(()=>i("img",{src:V},null,-1)),kc=z(()=>i("img",{src:V},null,-1)),Ec=z(()=>i("img",{src:V},null,-1)),wc={class:"buttonList"},Ic=z(()=>i("img",{src:V},null,-1)),xc=z(()=>i("img",{src:V},null,-1)),Tc=z(()=>i("img",{src:V},null,-1)),Sc=z(()=>i("img",{src:V},null,-1)),Rc=z(()=>i("img",{src:V},null,-1));function Vc(e,t,n,o,r,s){return l(),d("fieldset",null,[yc,i("div",Ac,[i("div",_c,[n.item.editorTypeName==="localConditionGroup"?(l(),d("button",{key:0,class:"bouton",onClick:t[0]||(t[0]=c=>s.add("self","selections","instanceOf",1))},[Cc,h("SELF INSTANCE OF ")])):u("",!0),i("button",{class:"bouton",onClick:t[1]||(t[1]=c=>s.add("parent","selections","atLeast",1))},[vc,h("PARENT ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[2]||(t[2]=c=>s.add("force","selections","atLeast",1))},[bc,h("FORCE ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[3]||(t[3]=c=>s.add("roster","selections","atLeast",1))},[kc,h("ROSTER ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[4]||(t[4]=c=>s.add("ancestor","selections","instanceOf",1))},[Ec,h("ANCESTOR INSTANCE OF ")])]),i("div",wc,[n.item.editorTypeName==="localConditionGroup"?(l(),d("button",{key:0,class:"bouton",onClick:t[5]||(t[5]=c=>s.add("self","selections","notInstanceOf",1))},[Ic,h("SELF NOT INSTANCE OF ")])):u("",!0),i("button",{class:"bouton",onClick:t[6]||(t[6]=c=>s.add("parent","selections","lessThan",1))},[xc,h("PARENT LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[7]||(t[7]=c=>s.add("force","selections","lessThan",1))},[Tc,h("FORCE LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[8]||(t[8]=c=>s.add("roster","selections","lessThan",1))},[Sc,h("ROSTER LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[9]||(t[9]=c=>s.add("ancestor","selections","notInstanceOf",1))},[Rc,h("ANCESTOR NOT INSTANCE OF ")])])])])}const et=v(fc,[["render",Vc],["__scopeId","data-v-63120d4c"]]),Fc={props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{parent(){return H(this.item)},allowQuery(){return this.parent?!!["forceEntry","selectionEntry","selectionEntryGroup","selectionEntryLink","selectionEntryGroupLink"].includes(this.parent.editorTypeName):!1}}};function Nc(e,t,n,o,r,s){const c=Q,a=Pd,m=pc,y=et;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"]),s.allowQuery?(l(),_(m,{key:0,item:n.item,class:"section"},null,8,["item"])):u("",!0),g(y,{item:n.item,withCategory:!1,class:"section"},null,8,["item"])],64)}const Bc=v(Fc,[["render",Nc]]),Uc={props:{item:{type:Object,required:!0}}};const ae=e=>(O("data-v-17ad0742"),e=e(),L(),e),Pc=ae(()=>i("legend",null,"Constraint",-1)),Oc={class:"editorTable"},Lc=ae(()=>i("td",null,"Unique ID:",-1)),Qc={class:"constraint"},Gc=ae(()=>i("option",{value:"min"},"Minimum",-1)),Dc=ae(()=>i("option",{value:"max"},"Maximum",-1)),qc=ae(()=>i("option",{value:"exactly"},"Exactly",-1)),Kc=[Gc,Dc,qc],Mc=ae(()=>i("label",{for:"percent"},"Percentage",-1)),Wc=ae(()=>i("label",{for:"negative"},"Negative",-1)),Zc=ae(()=>i("label",{for:"automatic"},"Automatic",-1));function jc(e,t,n,o,r,s){const c=oe;return l(),d("fieldset",null,[Pc,i("table",Oc,[i("tr",null,[Lc,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>n.item.id=a)},null,512),[[S,n.item.id]])])])]),i("div",Qc,[k(i("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>n.item.type=a)},Kc,512),[[W,n.item.type]]),g(c,{modelValue:n.item.value,"onUpdate:modelValue":t[2]||(t[2]=a=>n.item.value=a)},null,8,["modelValue"]),i("div",null,[k(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=a=>n.item.percentValue=a)},null,512),[[P,n.item.percentValue]]),Mc,k(i("input",{id:"negative",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=a=>n.item.negative=a)},null,512),[[P,n.item.negative]]),Wc,k(i("input",{id:"automatic",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>n.item.automatic=a)},null,512),[[P,n.item.automatic]]),Zc])])])}const Yc=v(Uc,[["render",jc],["__scopeId","data-v-17ad0742"]]),Hc={data(){return{itemField:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},childForces:{type:Boolean,default:!1},childSelections:{type:Boolean,default:!1},shared:{type:Boolean,default:!1}},methods:{getNameExtra:j,scopeChanged(){this.item.scope==="roster"&&(this.item.includeChildSelections=!0,this.item.includeChildForces=!0),this.item.scope==="force"&&(this.item.includeChildSelections=!0),this.item.catalogue.updateCondition(this.item),this.changed()},fieldChanged(){this.item.field=this.itemField.value,this.item.field.startsWith("limit::")&&this.item.editorTypeName!=="constraint"&&(this.item.childId="any"),this.changed()},showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))}},computed:{association(){return this.item.editorTypeName=="association"},sharedTooltip(){return this.item.editorTypeName!=="constraint"?`Its recommended to keep shared checked on ${this.item.editorTypeName}s`:`Indicates that constraints on links should be evaluated as if they are on their target, usually only relevant if the scope is above "parent"

eg: a unit has a Leader and a Model which have a link to the same entry, with a max 1 constraint on the links scoped to the unit.
assuming both have selected 1 of that entry:
- a shared constraint would error as its evaluating the target of the links
- a non-shared constraint would not error as it would be evaluating the amount of the links themselves

note: shared=false on BS will also limit the constraint to it's parent rootSelectionEntry ID
`},instanceOf(){var e;return["instanceOf","notInstanceOf"].includes((e=this.item)==null?void 0:e.type)},parent(){return H(this.item)},isCostType(){var e;return((e=this.parent)==null?void 0:e.editorTypeName)==="costType"},isForceEntry(){var e;return["forceEntryLink","forceEntry"].includes((e=this.parent)==null?void 0:e.editorTypeName)},fieldTypes(){const e=[];this.instanceOf&&e.push({name:"",value:void 0,type:null}),e.push({name:"Selections",value:"selections",type:"bullet"}),e.push({name:"Forces",value:"forces",type:"bullet"});for(const t of this.costTypes)e.push({name:t.name,value:t.id,type:"cost"}),this.item.scope==="roster"&&e.push({name:`${t.name} Limit`,value:`limit::${t.id}`,type:"cost"});return e},includeCategories(){return this.item.field!=="forces"},includeForces(){return!0},includeSelections(){return this.item.field!="forces"},costTypes(){let e=[];for(let t of this.catalogue.iterateCostTypes())e.push(t);return e},allSelections(){return this.includeSelections?Ot(this.item):[]},allCategories(){return this.includeCategories?$e(this.catalogue):[]},allForces(){return this.includeForces?ve(this.catalogue,"forceEntriesIterator"):[]},allParents(){return Pt(this.item)},allScopes(){const e={id:"self",name:"Self",editorTypeName:"bullet"},t={id:"parent",name:"Parent",editorTypeName:"bullet"},n={id:"force",name:"Force",editorTypeName:"bullet"},o={id:"roster",name:"Roster",editorTypeName:"bullet"},r={id:"ancestor",name:"Ancestor",editorTypeName:"bullet",title:"checks the condition in all parents"},s={id:"primary-catalogue",name:"Primary Catalogue",editorTypeName:"bullet"},c={id:"primary-category",name:"Primary Category",editorTypeName:"bullet"};if(this.isForceEntry)return[e,t,n,o,s,r];if(this.isCostType)return[e,t];const a=[n,o,s],m=[{id:"root-entry",name:"Root Entry",editorTypeName:"bullet"},{id:"unit",name:"Type: Unit",editorTypeName:"bullet"},{id:"model",name:"Type: Model",editorTypeName:"bullet"},{id:"upgrade",name:"Type: Upgrade",editorTypeName:"bullet"},{id:"model-or-unit",name:"Type: Model or Unit",editorTypeName:"bullet"}];this.item.field!="forces"&&a.push(...m);let y=[];return this.item.field!="forces"&&(["condition","localConditionGroup","association"].includes(this.item.editorTypeName)&&(y=[e,t,r,c]),["repeat","constraint"].includes(this.item.editorTypeName)&&(y=[e,t])),[...y,...a].concat(this.allParents).concat(this.allSelections).concat(this.allCategories).concat(this.allForces)}},watch:{"item.field":{handler(){this.itemField=this.fieldTypes.find(e=>e.value==this.item.field)},immediate:!0}}};const Le=e=>(O("data-v-965fb362"),e=e(),L(),e),Xc=Le(()=>i("legend",null,"Query",-1)),zc={class:"query"},Jc=["src"],$c=Le(()=>i("span",null," in ",-1)),eu={style:{"white-space":"nowrap"}},tu=["src"],nu={class:"gray"},iu={key:1,class:"shared"},su={key:2,class:"catalogueName"},ou={key:0,class:"checks"},lu={key:0},au=["title"],ru={key:1},du=Le(()=>i("label",{for:"childSelections"},"And all child Selections",-1)),cu={key:2},uu=Le(()=>i("label",{for:"childForces"},"And all child Forces",-1));function mu(e,t,n,o,r,s){var m,y;const c=Ut,a=se;return l(),d("fieldset",null,[Xc,i("div",zc,[g(c,{modelValue:r.itemField,"onUpdate:modelValue":t[0]||(t[0]=p=>r.itemField=p),fetch:()=>s.fieldTypes,onChange:s.fieldChanged,class:"modType",disabled:s.instanceOf||s.association},{option:I(p=>[i("div",null,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${p.option.type}.png`},null,8,Jc),h(" "+f(p.option.name),1)])]),_:1},8,["modelValue","fetch","onChange","disabled"]),$c,g(a,{modelValue:n.item.scope,"onUpdate:modelValue":t[1]||(t[1]=p=>n.item.scope=p),placeholder:"Search Scope...",options:s.allScopes,valueField:"id",filterField:"name",onChange:s.scopeChanged,disabled:(y=(m=r.itemField)==null?void 0:m.value)==null?void 0:y.startsWith("limit::")},{option:I(p=>[i("div",eu,[p.option.indent>=2&&!p.selected?(l(!0),d(b,{key:0},T(p.option.indent-1,C=>(l(),d("span",null,"   "))),256)):u("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${p.option.editorTypeName}.png`},null,8,tu),h(" "+f(p.option.name)+" ",1),i("span",nu,f(s.getNameExtra(p.option,!1)),1),p.option.shared?(l(),d("span",iu," (shared)")):u("",!0),s.showCatalogue(p.option)?(l(),d("span",su," ["+f(p.option.catalogue)+"]",1)):u("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange","disabled"]),s.isCostType?u("",!0):(l(),d("div",ou,[n.shared?(l(),d("div",lu,[k(i("input",{id:"shared",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=p=>n.item.shared=p)},null,512),[[P,n.item.shared]]),i("label",{for:"shared",class:"hastooltip",title:s.sharedTooltip},"Shared",8,au)])):u("",!0),n.childSelections?(l(),d("div",ru,[k(i("input",{id:"childSelections",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=p=>n.item.includeChildSelections=p)},null,512),[[P,n.item.includeChildSelections]]),du])):u("",!0),n.childForces?(l(),d("div",cu,[k(i("input",{id:"childForces",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=p=>n.item.includeChildForces=p)},null,512),[[P,n.item.includeChildForces]]),uu])):u("",!0)]))])])}const Ie=v(Hc,[["render",mu],["__scopeId","data-v-965fb362"]]),gu={setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{add(e,t,n){e==="id"&&(e=this.item.id);let o=this.item;this.type==="constraint"&&(o=this.parent),this.store.create_child("modifiers",o,{field:e,type:t,value:n})}}},tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB+UlEQVQ4T5WTz2sTQRTHv7M/6iH4m7aXTTZnqY1E1JBSsChW1KJSYijiwZN4Lo1/giZetHhWiaHaH9aoNbEHtb8sCagtChWTNNAt9eaWellpDs+ZaSwGbZJ+4PFm38z77O7sDkOdTM68p59ra3LcdfZMRZ9SzlUZe5WmHboG/yEfrCWrXN0GbycmaWp6inK5bxSNxahcrqDmk9g/bOzetROp9DhuRCKbr/F4cIhGk8+ltKbE+eVgfb2EtmAAN29FZVP8UYLa24JwHEeuqSkplUoyVldtnDzRgTt3+ylw7AgWFr5ifm5Orqn6dVKvx+n7ygpMjwGXy4WGBp1XGZasZWQyWdyORWX/lpKxVJosy0JrywFMz8zCtu3yzAZ/BIL/SpIvXtKyEBxswfznL/B6vTjfdW7LG/6zJyOjz6hYLMLX6sOHj59gGEZVgaBCMjj8lIqLiwgcDWI2k4Hh9qD74oWqAsGmZODJEBUKeXQcP413E29gmibCoe6aAoGUxBMDlM/l+ZkI8Z8qCQ8X9IRDdQkEysN4ggr5AsKXrmJ4JAGTb+KVyz11CwSst6+Prl+L4P6De2hubsSpzk4oigLGQ+S/Q1V5nW2MGWMyN+7bw5g4A9lsFm63G37/YSiqCk3joWo8a1B56PwEy2tdlzUxrygql6po2r+X/QZc4Kt8vjU1QAAAAABJRU5ErkJggg==";const xe=e=>(O("data-v-11e92e1c"),e=e(),L(),e),hu=xe(()=>i("legend",null,[i("img",{src:tt}),h(" Quick Modifiers")],-1)),pu={class:"columns"},fu={class:"buttonList"},yu=xe(()=>i("img",{src:V},null,-1)),Au=xe(()=>i("img",{src:V},null,-1)),_u={class:"buttonList"},Cu=xe(()=>i("img",{src:V},null,-1)),vu=xe(()=>i("img",{src:V},null,-1));function bu(e,t,n,o,r,s){return l(),d("fieldset",null,[hu,i("div",pu,[s.type==="constraint"?(l(),d(b,{key:0},[i("div",fu,[i("button",{class:"bouton",onClick:t[0]||(t[0]=c=>s.add("id","increment",1))},[yu,h("INCREMENT 1 ")]),i("button",{class:"bouton",onClick:t[1]||(t[1]=c=>s.add("id","set",1))},[Au,h("SET 1 ")])]),i("div",_u,[i("button",{class:"bouton",onClick:t[2]||(t[2]=c=>s.add("id","decrement",1))},[Cu,h("DECREMENT 1 ")]),i("button",{class:"bouton",onClick:t[3]||(t[3]=c=>s.add("id","set",0))},[vu,h("SET 0 ")])])],64)):u("",!0)])])}const Qt=v(gu,[["render",bu],["__scopeId","data-v-11e92e1c"]]),ku={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},hideshared:{type:Boolean,default:!1},noshared:{type:Boolean,default:!1}},methods:{getNameExtra:j,showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))},availableTargets(){return[...Ct,...this.allCategories,...this.allEntries,...this.allForces,...this.allCatalogues]}},watch:{"item.scope"(){var e;this.child||(this.item.childId=((e=this.availableTargets()[0])==null?void 0:e.id)||void 0)}},computed:{childId:{get(){return this.item.childId},set(e){const t=this.item.childId;this.item.childId=e,this.catalogue.updateCondition(this.item,t)}},child(){if(!this.item.childId)return null;const e=this.availableTargets().find(t=>t.id===this.item.childId);return e||this.catalogue.findOptionById(this.item.childId)},instanceOf(){var e;return["instanceOf","notInstanceOf"].includes((e=this.item)==null?void 0:e.type)},allEntries(){return this.includeSelections?Kd(this.item,this.catalogue):[]},rootId(){let e=this.item;if(e!=null&&e.parent){for(;e!=null&&e.parent&&!e.parent.isCatalogue();)e=e.parent;return e.id}},allCategories(){return this.includeCategories?$e(this.catalogue):[]},allForces(){return this.includeForces?ve(this.catalogue,"forceEntriesIterator"):[]},allCatalogues(){return this.includeCatalogues?Gd(this.catalogue):[]},includeSelections(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category")},includeCategories(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.item.field==="forces")},includeForces(){return this.item.scope=="self"||this.item.scope=="parent"?!1:this.item.scope=="ancestor"?!0:!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category"||qd(this.item))},includeCatalogues(){return this.instanceOf&&this.item.scope==="primary-catalogue"}}};const Qe=e=>(O("data-v-6593915f"),e=e(),L(),e),Eu=Qe(()=>i("legend",null,"Filter By",-1)),wu={class:"editorTable"},Iu=Qe(()=>i("td",null,"Of:",-1)),xu={key:0},Tu=["src"],Su=Qe(()=>i("td",null,"Child ID:",-1)),Ru=Qe(()=>i("td",null,"Child:",-1)),Vu={key:0,style:{"white-space":"nowrap"}},Fu=["src"],Nu={class:"gray"},Bu={key:1,class:"shared"},Uu={key:2,class:"gray"},Pu={key:3,class:"catalogueName"},Ou={key:0},Lu=["disabled"],Qu=["title"];function Gu(e,t,n,o,r,s){const c=se;return l(),d("fieldset",null,[Eu,i("table",wu,[i("tr",null,[Iu,i("td",null,[s.child?(l(),d("span",xu,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${s.child.editorTypeName}.png`},null,8,Tu),h(" "+f(s.child.name),1)])):u("",!0)])]),i("tr",null,[Su,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.childId=a)},null,512),[[S,s.childId]])])]),i("tr",null,[Ru,i("td",null,[g(c,{modelValue:s.childId,"onUpdate:modelValue":t[1]||(t[1]=a=>s.childId=a),placeholder:"Search Child...",options:s.availableTargets,valueField:"id",filterField:"name",default:s.child,lazy:""},{option:I(a=>[a.option?(l(),d("div",Vu,[a.option.indent>=1&&!a.selected?(l(!0),d(b,{key:0},T(a.option.indent,m=>(l(),d("span",null,"   "))),256)):u("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName}.png`},null,8,Fu),h(" "+f(a.option.name)+" ",1),i("span",Nu,f(s.getNameExtra(a.option,!1)),1),a.option.shared?(l(),d("span",Bu," (shared) ")):u("",!0),a.option.rootId===s.rootId?(l(),d("span",Uu," (same ancestor)")):u("",!0),s.showCatalogue(a.option)?(l(),d("span",Pu," ["+f(a.option.catalogue)+"]",1)):u("",!0)])):u("",!0)]),_:1},8,["modelValue","placeholder","options","default"])])])]),n.hideshared?u("",!0):(l(),d("span",Ou,[k(i("input",{disabled:n.noshared&&n.item.shared,type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>n.item.shared=a),id:"shared"},null,8,Lu),[[P,n.item.shared]]),i("label",{class:U([{gray:n.noshared&&n.item.shared},"hastooltip"]),title:`Its recommended to keep shared checked on ${n.item.editorTypeName}s`,for:"shared"},"Shared?",10,Qu)]))])}const Ge=v(ku,[["render",Gu],["__scopeId","data-v-6593915f"]]),Du={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{showFilterBy(){var t;return((t=H(this.item))==null?void 0:t.parentKey)==="associations"}},methods:{changed(){this.catalogue.updateCondition(this.item)}},components:{FilterBy:Ge,QuickModifiers:Qt}};function qu(e,t,n,o,r,s){const c=Q,a=Yc,m=Ie,y=N("FilterBy"),p=Qt;return l(),d("span",{onChange:t[0]||(t[0]=(...C)=>s.changed&&s.changed(...C))},[g(c,{item:n.item},null,8,["item"]),g(a,{catalogue:n.catalogue,item:n.item,class:"section"},null,8,["catalogue","item"]),g(m,{catalogue:n.catalogue,item:n.item,class:"section",childForces:"",childSelections:"",shared:""},null,8,["catalogue","item"]),s.showFilterBy?(l(),_(y,{key:0,class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])):u("",!0),g(p,{item:n.item,withCategory:!1,class:"section"},null,8,["item"])],32)}const Ku=v(Du,[["render",qu]]),Mu={props:{item:{type:Object,required:!0}},methods:{onChange(){this.item.type!=="count"&&(delete this.item.min,delete this.item.max)}}},Wu=i("legend",null,"Condition Group",-1),Zu={class:"editorTable"},ju=i("td",null,"Type",-1),Yu=Re('<option value="or">Or</option><option value="and">And</option><option value="not">Not</option><option value="count">Count</option><option disabled>== Numeric ==</option><option value="add">Add</option><option value="subtract">Subtract</option><option value="multiply">Multiply</option><option value="divide">Divide</option><option value="modulo">Modulo</option><option value="power">Power</option><option value="min">Min</option><option value="max">Max</option><option disabled>== Comparison ==</option><option value="greater">Greater</option><option value="greaterOrEqual">Greater or Equal</option><option value="less">Less</option><option value="lessOrEqual">Less or Equal</option><option value="equal">Equal</option><option value="notEqual">Not Equal</option>',20),Hu=[Yu],Xu=i("td",null,"Min",-1),zu=i("td",null,"Max",-1);function Ju(e,t,n,o,r,s){const c=Q;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),i("fieldset",null,[Wu,i("table",Zu,[i("tr",null,[ju,i("td",null,[k(i("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.type=a),onChange:t[1]||(t[1]=(...a)=>s.onChange&&s.onChange(...a))},Hu,544),[[W,n.item.type]])])]),n.item.type==="count"?(l(),d(b,{key:0},[i("tr",null,[Xu,i("td",null,[k(i("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=a=>n.item.min=a)},null,512),[[S,n.item.min]])])]),i("tr",null,[zu,i("td",null,[k(i("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=a=>n.item.max=a)},null,512),[[S,n.item.max]])])])],64)):u("",!0)])])],64)}const $u=v(Mu,[["render",Ju]]),em={props:{item:{type:Object,required:!0}},components:{ConditionGroup:$u}};function tm(e,t,n,o,r,s){const c=N("ConditionGroup");return l(),d("div",null,[g(c,{item:n.item},null,8,["item"])])}const nm=v(em,[["render",tm]]),im={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{allowNonInstanceOf(){var e;return!(((e=this.parent)==null?void 0:e.editorTypeName)==="costType"||this.item.scope==="ancestor")},allowInstanceOf(){return this.item.editorTypeName!=="localConditionGroup"},allowPositional(){return!!vt(this.item,e=>e.editorTypeName==="localConditionGroup")},instanceOf(){var e;return(e=this.item.type)==null?void 0:e.includes("instance")},parent(){return H(this.item)}},components:{NumberInput:oe},watch:{"item.scope"(){const e=["instanceOf","notInstanceOf"];!this.allowNonInstanceOf&&!e.includes(this.item.type)&&(this.item.type=e[0])}}};const nt=e=>(O("data-v-441eabfc"),e=e(),L(),e),sm=nt(()=>i("legend",null,"Condition",-1)),om={class:"condition"},lm=Re('<option value="lessThan" data-v-441eabfc>Less Than</option><option value="greaterThan" data-v-441eabfc>Greater Than</option><option value="equalTo" data-v-441eabfc>Equal To</option><option value="notEqualTo" data-v-441eabfc>Not Equal To</option><option value="atLeast" data-v-441eabfc>At Least</option><option value="atMost" data-v-441eabfc>At Most</option><option value="always" data-v-441eabfc>Always</option><option value="never" data-v-441eabfc>Never</option>',8),am=nt(()=>i("option",{value:"instanceOf"},"Instance Of",-1)),rm=nt(()=>i("option",{value:"notInstanceOf"},"Not Instance Of",-1)),dm={key:2,value:"before"},cm=["disabled"];function um(e,t,n,o,r,s){const c=oe;return l(),d("fieldset",null,[sm,i("div",om,[k(i("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.type=a)},[s.allowNonInstanceOf?(l(),d(b,{key:0},[lm],64)):u("",!0),s.allowInstanceOf?(l(),d(b,{key:1},[am,rm],64)):u("",!0),s.allowPositional?(l(),d("option",dm,"Is Before")):u("",!0)],512),[[W,n.item.type]]),g(c,{disabled:s.instanceOf,modelValue:n.item.value,"onUpdate:modelValue":t[1]||(t[1]=a=>n.item.value=a)},null,8,["disabled","modelValue"]),i("div",null,[k(i("input",{disabled:s.instanceOf,id:"percent",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>n.item.percentValue=a)},null,8,cm),[[P,n.item.percentValue]]),i("label",{class:U({disabled:s.instanceOf}),for:"percent"},"Percentage?",2)])])])}const Gt=v(im,[["render",um],["__scopeId","data-v-441eabfc"]]),mm={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},components:{Condition:Gt,FilterBy:Ge}};function gm(e,t,n,o,r,s){var p;const c=Q,a=N("Condition"),m=Ie,y=N("FilterBy");return l(),d("div",null,[g(c,{item:n.item},null,8,["item"]),g(a,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"]),g(m,{class:"section",item:n.item,catalogue:n.catalogue,childForces:"",childSelections:""},null,8,["item","catalogue"]),((p=n.item.field)==null?void 0:p.startsWith("limit::"))==!1&&n.item.editorTypeName!=="localConditionGroup"?(l(),_(y,{key:0,noshared:"",class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])):u("",!0)])}const hm=v(mm,[["render",gm]]),pm={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},components:{NumberInput:oe}};const De=e=>(O("data-v-5f9da53b"),e=e(),L(),e),fm=De(()=>i("legend",null,"Repeat",-1)),ym={class:"condition"},Am=De(()=>i("label",null,"times for every ",-1)),_m={class:"bools"},Cm=De(()=>i("label",{for:"percent"},"Percentage?",-1)),vm=De(()=>i("label",{for:"percent"},"Round up?",-1));function bm(e,t,n,o,r,s){const c=oe;return l(),d("fieldset",null,[fm,i("div",ym,[g(c,{modelValue:n.item.repeats,"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.repeats=a)},null,8,["modelValue"]),Am,g(c,{modelValue:n.item.value,"onUpdate:modelValue":t[1]||(t[1]=a=>n.item.value=a)},null,8,["modelValue"])]),i("div",_m,[i("div",null,[k(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>n.item.percentValue=a)},null,512),[[P,n.item.percentValue]]),Cm]),i("div",null,[k(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=a=>n.item.roundUp=a)},null,512),[[P,n.item.roundUp]]),vm])])])}const Dt=v(pm,[["render",bm],["__scopeId","data-v-5f9da53b"]]),km={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{allowNonInstanceOf(){var e;return!(((e=this.parent)==null?void 0:e.editorTypeName)==="costType"||this.item.scope==="ancestor")},allowInstanceOf(){return!1},instanceOf(){var e;return(e=this.item.type)==null?void 0:e.includes("instance")},parent(){return H(this.item)}},components:{NumberInput:oe},watch:{"item.scope"(){const e=["instanceOf","notInstanceOf"];!this.allowNonInstanceOf&&!e.includes(this.item.type)&&(this.item.type=e[0])}}};function Em(e,t,n,o,r,s){const c=Q,a=Dt,m=Gt,y=Ie,p=et;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{catalogue:n.catalogue,item:n.item},null,8,["catalogue","item"]),g(m,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"]),g(y,{class:"section",item:n.item,catalogue:n.catalogue,childForces:"",childSelections:""},null,8,["item","catalogue"]),g(p,{item:n.item,withCategory:!1,class:"section"},null,8,["item"])],64)}const wm=v(km,[["render",Em],["__scopeId","data-v-2d7cbbba"]]),Im={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function xm(e,t,n,o,r,s){const c=Q,a=et;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,withCategory:!1,class:"section"},null,8,["item"])],64)}const Tm=v(Im,[["render",xm]]),Sm={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function Rm(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=ye;return l(),d("div",null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{catalogue:n.catalogue,item:n.item,class:"section"},null,8,["catalogue","item"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Constraints ")]),_:1},8,["item"])])}const Vm=v(Sm,[["render",Rm]]),Fm={props:{item:{type:Object,required:!0}},methods:{getNameExtra:j},computed:{children(){const e=[{name:"Unset",id:void 0,editorTypeName:"bullet"},{name:"None",id:"none",editorTypeName:"bullet"}];for(const t of this.item.entriesIterator())t.isGroup()||e.push(t);return e}}};const qt=e=>(O("data-v-b58ae3cd"),e=e(),L(),e),Nm=qt(()=>i("legend",null,"Selection Entry Group",-1)),Bm={class:"editorTable"},Um=qt(()=>i("td",null,"Default Selection:",-1)),Pm={style:{"white-space":"nowrap"}},Om=["src"],Lm={class:"gray"},Qm={key:1,class:"merror"};function Gm(e,t,n,o,r,s){const c=se;return l(),d("fieldset",null,[Nm,i("table",Bm,[i("tr",null,[Um,i("td",null,[s.children.length?(l(),_(c,{key:0,modelValue:n.item.defaultSelectionEntryId,"onUpdate:modelValue":t[0]||(t[0]=a=>n.item.defaultSelectionEntryId=a),placeholder:"Search Children...",options:s.children,valueField:"id",filterField:"name"},{option:I(a=>[i("div",Pm,[a.option.indent>=2&&!a.selected?(l(!0),d(b,{key:0},T(a.option.indent-1,m=>(l(),d("span",null,"   "))),256)):u("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.option.editorTypeName}.png`},null,8,Om),h(" "+f(a.option.name)+" ",1),i("span",Lm,f(s.getNameExtra(a.option,!1)),1)])]),_:1},8,["modelValue","placeholder","options"])):(l(),d("span",Qm,"This group does not have any child Selection Entries"))])])])])}const Dm=v(Fm,[["render",Gm],["__scopeId","data-v-b58ae3cd"]]),qm={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function Km(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=Dm,p=Be,C=ze,A=ke,R=Je;return l(),d(b,null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(y,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(p,{item:n.item,fields:[{field:"hidden",enabled:!0,name:"Hidden"},{field:"collective",enabled:!1,name:"Collective"},{field:"import",enabled:!0,name:"Import"}],class:"section"},{default:I(()=>[h(" Entry ")]),_:1},8,["item"]),g(C,{item:n.item,catalogue:n.catalogue,class:"section"},null,8,["item","catalogue"]),g(A,{item:n.item,withCategory:!1,class:"section"},null,8,["item"]),g(R,{item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])],64)}const Mm=v(qm,[["render",Km]]),Wm={props:{item:{type:Object,required:!0}}},Zm=i("legend",null,"Revision",-1),jm={class:"editorTable"},Ym=i("td",null,"Revision Number:",-1);function Hm(e,t,n,o,r,s){return l(),d("fieldset",null,[Zm,i("table",jm,[i("tr",null,[Ym,i("td",null,[k(i("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.revision=c)},null,512),[[S,n.item.revision]])])])])])}const Xm=v(Wm,[["render",Hm]]),zm={props:{item:{type:Object,required:!0}}},Jm=i("legend",null,"Catalogue",-1),$m=i("label",{class:"hastooltip",for:"library",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."},"Library",-1);function eg(e,t,n,o,r,s){return l(),d("fieldset",null,[Jm,k(i("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.library=c),id:"library"},null,512),[[P,n.item.library]]),$m])}const tg=v(zm,[["render",eg]]),ng={props:{item:{type:Object,required:!0}}},ig=i("legend",null,"Information",-1),sg={class:"editorTable"},og=i("td",null,"Author Name:",-1),lg=i("td",null,"Author Contact:",-1),ag=i("td",null,"Author Website:",-1),rg=i("td",null,"Readme:",-1);function dg(e,t,n,o,r,s){const c=ne;return l(),d("fieldset",null,[ig,i("table",sg,[i("tr",null,[og,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>n.item.authorName=a)},null,512),[[S,n.item.authorName]])])]),i("tr",null,[lg,i("td",null,[g(c,{modelValue:n.item.authorContact,"onUpdate:modelValue":t[1]||(t[1]=a=>n.item.authorContact=a)},null,8,["modelValue"])])]),i("tr",null,[ag,i("td",null,[k(i("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>n.item.authorUrl=a)},null,512),[[S,n.item.authorUrl]])])]),i("tr",null,[rg,i("td",null,[g(c,{type:"text",modelValue:n.item.readme,"onUpdate:modelValue":t[3]||(t[3]=a=>n.item.readme=a)},null,8,["modelValue"])])])])])}const cg=v(ng,[["render",dg]]),ug={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function mg(e,t,n,o,r,s){const c=Q,a=q,m=ie,y=ye,p=Xm,C=tg,A=cg;return l(),d("div",null,[g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{catalogue:n.catalogue,item:n.item,class:"section"},null,8,["catalogue","item"]),g(y,{item:n.item,class:"section"},{default:I(()=>[h(" Constraints ")]),_:1},8,["item"]),g(p,{item:n.item,class:"section"},null,8,["item"]),g(C,{item:n.item,class:"section"},null,8,["item"]),g(A,{item:n.item,class:"section"},null,8,["item"])])}const gg=v(ug,[["render",mg]]),hg={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}}};function pg(e,t,n,o,r,s){const c=Q,a=Dt,m=Ie,y=Ge;return l(),d("div",null,[g(c,{item:n.item},null,8,["item"]),g(a,{catalogue:n.catalogue,item:n.item},null,8,["catalogue","item"]),g(m,{class:"section",item:n.item,catalogue:n.catalogue,childForces:"",childSelections:""},null,8,["item","catalogue"]),g(y,{class:"section",item:n.item,catalogue:n.catalogue},null,8,["item","catalogue"])])}const fg=v(hg,[["render",pg]]),yg={props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{ids:{get(){var e;return((e=this.item.ids)==null?void 0:e.join(", "))||""},set(e){this.item.ids=e.split(",").map(t=>t.trim())}}},components:{FilterBy:Ge}},Ag=i("p",{class:"info"},[h(" Associations are a New Recruit specific feature allowing you to associate an entry to another, such as a unit to a bataillon. "),i("br"),h(" Feel free to offer feedback or ask questions on our "),i("a",{href:"https://discord.gg/cCtqGbugwb"},"Discord server"),h(". ")],-1),_g={class:"section"},Cg=i("legend",null,"Constraints",-1),vg={class:"editorTable"},bg=i("td",null,"Min",-1),kg=i("td",null,"Max",-1);function Eg(e,t,n,o,r,s){const c=Q,a=q,m=Ie,y=N("FilterBy");return l(),d("div",null,[Ag,g(c,{item:n.item},null,8,["item"]),g(a,{item:n.item,class:"section"},null,8,["item"]),g(m,{catalogue:n.catalogue,childSelctions:"",item:n.item,class:"section",childSelections:"",childForces:""},null,8,["catalogue","item"]),g(y,{class:"section",item:n.item,catalogue:n.catalogue,hideshared:""},null,8,["item","catalogue"]),i("fieldset",_g,[Cg,i("table",vg,[i("tr",null,[bg,i("td",null,[k(i("input",{onInput:t[0]||(t[0]=(...p)=>e.changed&&e.changed(...p)),"onUpdate:modelValue":t[1]||(t[1]=p=>n.item.min=p),type:"number"},null,544),[[S,n.item.min]])])]),i("tr",null,[kg,i("td",null,[k(i("input",{onInput:t[2]||(t[2]=(...p)=>e.changed&&e.changed(...p)),"onUpdate:modelValue":t[3]||(t[3]=p=>n.item.max=p),type:"number"},null,544),[[S,n.item.max]])])])])])])}const wg=v(yg,[["render",Eg]]),Ig={props:{item:{type:Object,required:!0}},setup(){return{store:G()}},methods:{gotoTarget(e){return e.isCategory()?e.parent:e},parentEntry(e){return vt(e,t=>t.getName())},path(e){const t=Me(e);return this.item.editorTypeName!=="profileType"&&t.pop(),t},other_path(e){return Me(e)}},computed:{show_link_name(){return this.item instanceof pn},links(){var e;return ee(((e=this.item)==null?void 0:e.refs)||[],t=>{var n;return(n=t.catalogue)==null?void 0:n.name})},other_links(){var e;return ee(((e=this.item)==null?void 0:e.other_refs)||[],t=>{var n;return(n=t.catalogue)==null?void 0:n.name})},label(){return te(this.item)}},components:{NodePath:wt}};const xg={class:"mb-50px"},Tg={class:"text-center"},Sg=i("span",{class:"gray"},"References to",-1),Rg={class:"gray"},Vg={key:0,class:"mr-60px"},Fg={key:1,class:"mr-60px"},Ng=i("h3",null," From conditions/constraints/modifiers/repeats: ",-1);function Bg(e,t,n,o,r,s){const c=N("NodePath");return l(),d("div",xg,[i("h2",Tg,[Sg,h(" "+f(s.label)+" ",1),i("span",Rg,"("+f(n.item.editorTypeName)+")",1)]),s.links.length?(l(),d("div",Vg,[i("div",null,[(l(!0),d(b,null,T(s.links,a=>(l(),d("div",null,[g(c,{path:s.path(a),onClick:m=>o.store.goto(a),class:"hover-darken cursor-pointer p-1px"},null,8,["path","onClick"])]))),256))])])):u("",!0),s.other_links.length?(l(),d("div",Fg,[Ng,i("div",null,[(l(!0),d(b,null,T(s.other_links,a=>(l(),d("div",null,[g(c,{path:s.other_path(a),onClick:m=>o.store.goto(a),class:"hover-darken cursor-pointer p-1px mb-3px"},null,8,["path","onClick"])]))),256))])])):u("",!0)])}const Ug=v(Ig,[["render",Bg]]),Pg={components:{NodePath:wt},setup(){return{store:G()}},props:{catalogue:{type:Object,required:!0}},data(){return{links:["link","entryLink","selectionEntryLink","selectionEntryGroupLink","forceEntryLink"],infoLinks:["infoLink","profileLink","ruleLink","infoGroupLink"],key:0}},methods:{clicked(e){if(!e.path.length)return;const t=e.path[0].id;if(!t)return;const n=this.catalogue.findOptionById(t);if(!n){notify({text:`Couldn't find catalogue with id ${t}`,type:"error"});return}const o=bt(n,e.path.slice(1));this.store.goto(o)},path(e){return Me(e)},changed(){this.store.changed(this.item||this.catalogue)}},computed:{item(){return this.store.get_selected()},typeName(){var e;return(e=this.item)==null?void 0:e.editorTypeName}},watch:{item(){this.key++}}};const Og=i("div",{class:"min-h-100px"},null,-1);function Lg(e,t,n,o,r,s){const c=N("NodePath"),a=_i,m=Ri,y=us,p=xs,C=Po,A=ll,R=El,K=xl,E=gr,D=Mr,de=Bc,ce=Ku,re=nm,w=hm,ue=wm,jt=Tm,Yt=Vm,Ht=Mm,Xt=gg,zt=fg,Jt=wg,$t=Ug;return s.item?(l(),d("div",{class:"rightPanel",key:r.key,onChange:t[0]||(t[0]=en=>o.store.changed(s.item)),onChanged:t[1]||(t[1]=en=>o.store.changed(s.item))},[g(c,{path:s.path(s.item),class:"inline p-1px pl-2px",onNodeclick:s.clicked},null,8,["path","onNodeclick"]),o.store.mode==="edit"?(l(),d(b,{key:0},[s.typeName=="publication"?(l(),_(a,{key:0,item:s.item},null,8,["item"])):s.typeName=="costType"?(l(),_(m,{key:1,item:s.item},null,8,["item"])):s.typeName=="profileType"?(l(),_(y,{key:2,item:s.item},null,8,["item"])):s.typeName=="characteristicType"||s.typeName==="attributeType"?(l(),_(p,{key:3,item:s.item},null,8,["item"])):s.typeName=="categoryEntry"?(l(),_(C,{key:4,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="forceEntry"?(l(),_(A,{key:5,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="profile"?(l(),_(R,{key:6,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="rule"?(l(),_(K,{key:7,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="selectionEntry"?(l(),_(E,{key:8,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="forceEntryLink"?(l(),_(D,{key:9,item:s.item,catalogue:n.catalogue,type:"force"},null,8,["item","catalogue"])):r.links.includes(s.typeName)?(l(),_(D,{key:10,item:s.item,catalogue:n.catalogue,type:"entry"},null,8,["item","catalogue"])):r.infoLinks.includes(s.typeName)?(l(),_(D,{key:11,item:s.item,catalogue:n.catalogue,type:"info"},null,8,["item","catalogue"])):s.typeName=="modifier"?(l(),_(de,{key:12,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="constraint"?(l(),_(ce,{key:13,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="conditionGroup"?(l(),_(re,{key:14,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="condition"?(l(),_(w,{key:15,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName==="localConditionGroup"?(l(),_(ue,{key:16,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="categoryLink"?(l(),_(D,{key:17,item:s.item,catalogue:n.catalogue,type:"category"},null,8,["item","catalogue"])):s.typeName=="modifierGroup"?(l(),_(jt,{key:18,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="infoGroup"?(l(),_(Yt,{key:19,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="selectionEntryGroup"?(l(),_(Ht,{key:20,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):s.typeName=="catalogueLink"?(l(),_(D,{key:21,item:s.item,catalogue:n.catalogue,type:"catalogue"},null,8,["item","catalogue"])):s.typeName=="catalogue"||s.typeName=="gameSystem"?(l(),_(Xt,{key:22,item:s.item,catalogue:n.catalogue,type:"catalogue"},null,8,["item","catalogue"])):s.typeName=="repeat"?(l(),_(zt,{key:23,item:s.item,catalogue:n.catalogue,type:"catalogue"},null,8,["item","catalogue"])):s.typeName=="association"?(l(),_(Jt,{key:24,item:s.item,catalogue:n.catalogue,type:"catalogue"},null,8,["item","catalogue"])):u("",!0),Og],64)):o.store.mode==="references"?(l(),_($t,{key:1,item:s.item,catalogue:n.catalogue},null,8,["item","catalogue"])):u("",!0)],32)):u("",!0)}const Qg=v(Pg,[["render",Lg]]);const Gg={},Dg={style:{width:"100%",height:"0px","text-align":"left",margin:"0",padding:"0"}};function qg(e,t){return l(),d("hr",Dg)}const Kt=v(Gg,[["render",qg],["__scopeId","data-v-43dd2251"]]),Kg={name:"EditorCollapsibleBox",props:{payload:{},collapsible:{type:Boolean,default:!0},nobox:{type:Boolean,default:!1},defcollapsed:{type:Boolean,default:!0},notitle:{type:Boolean,default:!1},title:{type:String,required:!1,default:"titreCategory"},titleCollapse:{type:Boolean,default:!0},modelValue:{default:!0},altclickable:{default:!1},vshow:{default:!1,type:Boolean},depth:{default:0,type:Number}},data(){return{collapsed:!0,initiated:this.vshow,selected:!1,alt:!1,sticky:!1}},created(){this.defcollapsed==!1&&this.collapseSwitch()},setup(){return{store:G(),settings:Z()}},mounted(){addEventListener("keydown",this.handleKeyDown),addEventListener("keyup",this.handleKeyUp),this.$el.vnode=this,this.init(this.payload)},updated(){this.$el.vnode=this},unmounted(){removeEventListener("keydown",this.handleKeyDown),removeEventListener("keyup",this.handleKeyUp)},watch:{payload(e){this.init(e)},collapsed(e){e!==this.modelValue&&this.$emit("update:modelValue",e)},modelValue(e){e!=this.collapsed&&(this.collapsed=e)}},computed:{dropdownSrc(){let e=2,t=[`assets/icons/right${e}.png`,`assets/icons/down${e}.png`],n=this.collapsed?0:1;return t[n]},hide(){return!this.collapsible},nocollapse(){return!this.collapsible},box(){return!this.nobox},opened(){return this.collapsible&&!this.collapsed},indent(){return`${this.depth*20}px`}},methods:{cut(){console.log("cut")},copy(){console.log("copy")},paste(){console.log("paste")},init(e){var t;if((e==null?void 0:e.select)!==void 0){if(e.select){const n=(t=this.$parent)==null?void 0:t.$parent;n.open&&n.open(),this.store.do_select(null,this),this.store.scrollto(fn(this))}e==null||delete e.select}},select(){this.selected=!0,this.store.select(this,()=>this.unselect(),this.payload)},unselect(){this.selected=!1},open(){this.initiated=!0,this.collapsed&&(this.collapsed=!1,this.$emit("open"))},async open_recursive(){var t;this.open(),await this.$nextTick();const e=this.$el;if(e)for(const n of e.getElementsByClassName("collapsible-box"))await((t=We(n))==null?void 0:t.open_recursive())},close(){this.initiated=!0,this.collapsed||(this.collapsed=!0,this.$emit("close"))},async close_recursive(){var t;const e=this.$el;if(e)for(const n of e.getElementsByClassName("collapsible-box"))(t=We(n))==null||t.close_recursive();await this.$nextTick(),this.close()},do_select(e){this.store.do_select(e,this),this.$el.focus()},do_rightcllick_select(e){this.store.do_rightclick_select(e,this)},async collapseSwitch(e){this.collapsed=!this.collapsed,this.initiated=!0,this.collapsed==!1?e?await this.open_recursive():this.open():e?await this.close_recursive():this.close()},handleKeyDown(e){e.key==="Alt"&&(this.alt=!0,e.preventDefault())},handleKeyUp(e){e.key==="Alt"&&(this.alt=!1,e.preventDefault())}}};const Mg=["src"],Wg={key:1,class:"content"};function Zg(e,t,n,o,r,s){return l(),d("div",{class:U([{box:s.box,nobox:n.nobox,nocollapse:s.nocollapse,collapsed:r.collapsed,opened:s.opened},"collapsible-box"]),onContextmenu:t[8]||(t[8]=(...c)=>s.do_rightcllick_select&&s.do_rightcllick_select(...c))},[n.notitle?u("",!0):(l(),d("h3",{key:0,ref:"title",class:U(["title",{selected:r.selected,arrowTitle:n.collapsible,normalTitle:!n.collapsible,collapsed:n.collapsible&&r.collapsed,alt:r.alt&&n.altclickable}]),onClick:[t[1]||(t[1]=F((...c)=>s.do_select&&s.do_select(...c),["stop"])),t[2]||(t[2]=F(c=>e.$emit("ctrlclick"),["ctrl","stop"])),t[3]||(t[3]=F(c=>e.$emit("altclick"),["alt","stop"]))],onDblclick:t[4]||(t[4]=c=>s.collapseSwitch(c.shiftKey)),onPaste:t[5]||(t[5]=(...c)=>s.paste&&s.paste(...c)),onCopy:t[6]||(t[6]=(...c)=>s.paste&&s.paste(...c)),onCut:t[7]||(t[7]=(...c)=>s.paste&&s.paste(...c)),style:Se({"padding-left":s.indent,"z-index":`${100-n.depth}`,...o.settings.stickyScroll?{top:`${n.depth*20}px`,left:"0px",position:"sticky"}:{}})},[n.depth>0?(l(),d("span",{key:0,class:"title-before",style:Se({width:s.indent})},null,4)):u("",!0),i("div",{class:"arrow-wrap",onClick:t[0]||(t[0]=F(c=>s.collapseSwitch(c.shiftKey),["stop"]))},[i("img",{class:U([{hide:s.hide},"arrow icon"]),src:s.dropdownSrc},null,10,Mg)]),M(e.$slots,"title",{},void 0,!0)],38)),r.initiated?k((l(),d("div",Wg,[M(e.$slots,"content",{},void 0,!0)],512)),[[Te,!r.collapsed||!n.collapsible]]):u("",!0)],34)}const Mt=v(Kg,[["render",Zg],["__scopeId","data-v-dca22165"]]),jg={name:"CatalogueEntry",components:{ContextMenu:Ue,EditorCollapsibleBox:Mt},setup(){return{store:G(),state:Ve(),settings:Z()}},props:{depth:{type:Number,default:0},label:{type:String,required:!0},catalogue:{type:Object,required:!0},path:{type:Array},typeItem:{type:Object}},data(){return{groups:{},contextmenuopen:!1,open:!1,open_categories:void 0,name:""}},mounted(){this.catalogue&&this.catalogue.processForEditor()},methods:{menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var o;(o=this.$refs[e])==null||o.show(t,n)})},close:(t,n)=>{var o;(o=this.$refs[e])==null||o.close(t,n),this.contextmenuopen=!1}}},should_be_open(){const e=[...this.path||[],{key:`label-${this.label}`,index:0}];this.open=this.state.get(this.catalogue.id,e)},debug(){var e,t;console.log((e=this.typeItem)==null?void 0:e.name,(t=this.typeItem)==null?void 0:t.editorTypeName,kt(this.typeItem)),globalThis.$debugOption=this.typeItem,globalThis.$debugElement=this}},computed:{contextmenu(){return this.menu("contextmenu")},nestedcontextmenu(){return this.menu("nestedcontextmenu")}}},Yg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhT8TRRFFJClELLZQGw2IilhqFESIEKKCV+HuxsRAdg27ERtLwVaw8Gi8ChtrbS1sBUHwALG1sVK0kbD+sxEShAgODPPxZt5j5g0EDrOm5Vb3gGXnncRYVJuZndNqX6ihnma6COmmmxuOx2NUHJ93VKn1NqKy+N9oTC65JlRpwkNmzskLLwoPrOVzineFw+aynhQ+E+525ILCD0o3ivyqOO1zQGWGnanEiHBYWEuXsVHG5rJjCfcLtyctW/IDM0VOKl5XbGVXzZ97qhc2LNnTk0qX2cYY40wQR8NglQxZ8kRktUVxSch+tIK/1ffHxWWIK4MpjlFWsNB9P+oPfnfrpvp6i0kNUah59rz3DqjdhsKW530deV7hGIJPcGmX/CuHMPgh+lZJaz+Apg04vyppxg5cbELLY053dF8KygykUvB2Kt80C6EbqJ8v9vazz8k9TElXsWvY24fOtGQvVHh3XXlvf57x+yP6DVyYcp4hKAl2AAAA5FBMVEVVWVszNTY1NzdKSktaWlpJTE5HSEhTU1NVVVVUVFRSUlIpKitRUVFNTU1PT08kJSY9PT1HR0fu7u7ExMRGRkZNUFI8PD1JSUlzc3N0dHSurq7q6uptbW02OTpMTEygoKDS0tJcXFw0NDV5eXnf399wcHAzMzQcHh5WVlbc3Ny3t7caGxxHS0wdHh/n5+fFxcUjJCUsLS1KSkrDw8OxsbE7OztBQUFQUFBDQ0M8PDzH0NMKCgpeXl5dXV1ZWVlCQkKnrrJSVlcBAQEICAkSExMcHR0bHBwREhLL1Nizu7+vt7oAAABxoPDUAAAATHRSTlP///////////////////////////////////////////////////////////////////////////////////////////////////8Ano3kzAAAAAlwSFlzAAAuIgAALiIBquLdkgAAALlJREFUKFNNyGkXgUAAheGhiJqpRLLvlCXGUJItspT+//9xmuS4H+55zwMiOpDJpEU/y7Ask6VJIZfnCkU+n/uBAJEoIiikIMklRVHKFVn6glrVavVGs1VVvxC1OxB2e/123BSiARyOxhOaCejGdFbQaSYwNzrImNOMYWFyaLlCvLlIAK8JQZst0sgax4AtyyY7xxE1e2/hCLgH2yEcezydeeJcDi7wrjf//pAEAT9f/u3qgSB8/y0MPiLnM6aRQB6+AAAAAElFTkSuQmCC",it="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8ziBhJZiFZ3AVKUUKyZCgpahqjxmPh3jtmqLl3pntHNpbKVll4bLwWNtZsLWyVUh4lWxsrYiNd/3NHzaRGOXU6v75zvq9zvgPBg4xpuZU9YNl5JzYW0RIzs1r1M1XU0Ugtnbrp5oaj0QnKjo9bAmq96VZZ/G/UJxddEwKa8JCZc/LCC8IDq/mc4h3hsLmkJ4VPhbscuaDwvdKNAr8oTvscVJlhJx4bEQ4La+kSNkrYXHIs4X7htqRlS34wUeCk4jXFVmbF/LmnemFo0Z6eUrrMVsYYZ5IoGgYrLJMhT7estiguMdmPlPG3+P6ouAxxLWOKY5QsFrrvR/3B727dVF9vISkUgaonz3trh+ot+Nr0vM9Dz/s6gopHuLCL/uwBDL6LvlnU2vahYR3OLouasQ3nG9D8kNMd3ZcqZAZTKXg9kW+agaZrqJ0r9Pazz/EdxKWriSvY3YOOtGTPl3l3TWlvf57x+yPyDUN6cpTX8RfMAAAAmVBMVEVAQUE9PT1YWFg9Pj5VVVVUVFQrKytZWVkpKSpERERRUVFQUFBDQ0NYWVo+Pz9TU1NSUlI4OTlXV1cgISFdXV04ODk4ODhRUlMhIiInJycuLi5KSkpJSUkoKCk7OztBQUE8PDzj5ugLCwtaWlpeXl5CQkK/wcNdX18BAQEJCQkUFRUfICAuLy8fHx8TFBTn6uzNz9HIyswAAABWGAQaAAAAM3RSTlP//////////////////////////////////////////////////////////////////wBxnr2OAAAACXBIWXMAAC4hAAAuIQEHW/z/AAAAmUlEQVQoU03MyRKCMBBF0RDSBBUICMgQAUFlUBTM/3+clbRF+TZ96yyaKBzZAo9FqYWFYDMGYJtEcDgD6pg04O72DA6eu4GP4G+gAsEgDEwiqOgIEdYP4gRiLITU4nBKTWrIcqGfhnmGUJRSajjLstBQ1XWD0FzqSpG2azwprreEh9K7dy3ph3F6PN15rl7vaRx6sqyfv63LF52MIsEsSTP4AAAAAElFTkSuQmCC";const Wt=e=>(O("data-v-eaf31bdf"),e=e(),L(),e),Hg=Wt(()=>i("img",{src:Yg},null,-1)),Xg={class:"gray"},zg=Wt(()=>i("img",{class:"pr-4px",src:it},null,-1)),Jg={class:"gray"},$g={key:1};function eh(e,t,n,o,r,s){const c=N("EditorCollapsibleBox"),a=Kt,m=N("ContextMenu");return l(),d("div",{class:"item unselectable",onMouseup:t[3]||(t[3]=F((...y)=>s.debug&&s.debug(...y),["middle","stop"])),onContextmenu:t[4]||(t[4]=F((...y)=>s.contextmenu.show&&s.contextmenu.show(...y),["stop"]))},[g(c,{nobox:"",group:[],depth:n.depth,collapsible:!0,class:U([`depth-${n.depth}`,`label-${n.label}`]),vshow:""},{title:I(()=>[Hg,i("span",Xg,f(n.label),1)]),content:I(()=>[M(e.$slots,"default",{},void 0,!0)]),_:3},8,["depth","class"]),r.contextmenuopen?(l(),_(m,{key:0,modelValue:r.contextmenuopen,"onUpdate:modelValue":t[2]||(t[2]=y=>r.contextmenuopen=y),ref:"contextmenu"},{default:I(({payload:y})=>{var p;return[n.typeItem?(l(),d(b,{key:0},[n.typeItem?(l(),d("div",{key:0,onClick:t[0]||(t[0]=C=>o.store.goto(n.typeItem))}," Goto ("+f(n.typeItem.getName()),1)):u("",!0),g(a),i("div",{onClick:t[1]||(t[1]=C=>{var A,R;return o.store.create_child("sharedProfiles",n.catalogue,{typeName:(A=n.typeItem)==null?void 0:A.getName(),typeId:(R=n.typeItem)==null?void 0:R.getId()})})},[zg,h(" Profile "),i("span",Jg," ("+f((p=n.typeItem)==null?void 0:p.getName())+")",1)])],64)):(l(),d("div",$g," Nothing "))]}),_:1},8,["modelValue"])):u("",!0)],32)}const th=v(jg,[["render",eh],["__scopeId","data-v-eaf31bdf"]]);function nh(e){return Math.round(e*100)/100}function ih(e){let t="";e=Ye(e,n=>n.name);for(const n of e)if(n.value!=0){let o="";n.name.length!=0&&(o=" "+n.name),t=`${t}<span class='cost'>${nh(n.value)}${o}</span>`}return t.length==0?t:`<span class="costList">${t}</span>`}const sh={link:1,selectionEntry:1,entryLink:1,characteristicType:1,attributeType:2,selectionEntryGroup:2,entryGroupLink:2,constraint:3,forceEntry:4,forceEntryLink:4,profile:5,rule:6,infoGroup:7,infoLink:8,modifier:9,modifierGroup:10,categoryLink:11,association:12},oh=new Set(["modifierGroups","conditionGroups","localConditionGroups"]),lh=new Set(["characteristics","attributes","costs"]),ah=new Set(["forceEntry","profileType","condition","conditionGroup","repeat","localConditionGroup"]),rh={name:"CatalogueEntry",components:{ContextMenu:Ue,EditorCollapsibleBox:Mt,CatalogueLabel:th},setup(){return{store:G(),state:Ve(),settings:Z()}},props:{item:{type:Object,required:!0},forceShowRecursive:{type:Boolean,default:!1},showImported:{type:Boolean},imported:{type:Boolean},depth:{type:Number,default:0},noType:{type:Boolean,default:!1},grouped:{type:Boolean,default:!1}},data(){return{contextmenuopen:!1,open:!1,open_categories:void 0,name:""}},created(){if(this.catalogue&&(this.catalogue.processForEditor(),!this.imported&&(this.open=this.should_be_open(),this.item.isCatalogue()))){const e=new Set;for(const t of this.categories)this.state.get_root(this.catalogue.id,t.type)&&e.add(t.type);this.open_categories=e}},watch:{"scope.name"(e){this.name=te(this.item)},_name:{immediate:!0,handler(e){this.name=e}}},methods:{escapeXml:yn,getTypeName:An,getTypeLabel:_n,getName:te,getNameExtra:j,key(e){return e.id?e.id:(e.$id||(e.$id=`temp-${Ze()}`),e.$id)},should_be_grouped(e){return e==="sharedProfiles"},display_groups(e,t){const n=[];for(const[o,r]of Object.entries(ot(t,s=>s.item.typeId??"Untyped"))){const s=r[0].item.catalogue.findOptionById(o),c=(s==null?void 0:s.name)??o;n.push({type:s,label:c,items:r})}return n},should_be_open(e){return e?this.open_categories!==void 0&&this.open_categories.has(e):oh.has(this.item.parentKey)||this.state.get(this.catalogue.id,Cn(this.item))},sortable(e){return this.settings.sort==="none"?!1:e?!ah.has(e.editorTypeName):!0},ref_count(e){var t;return(t=e.refs)==null?void 0:t.length},async onctrlclick(){this.store.can_follow(this.item)?await this.store.follow(this.item):this.imported?await this.store.goto(this.item):(this.item.refs||this.item.other_refs)&&(this.store.mode="references")},debug(){console.log(this.item.name,this.item.editorTypeName,kt(this.item)),globalThis.$debugOption=this.item,globalThis.$debugElement=this,globalThis.$debugGroup=this.$parent},hasRootLink(e,t){var n;return(n=e.entryLinks)==null?void 0:n.find(o=>o.targetId===t.id)},getTypedArray(e,t,n){if(!t)return;const o=t,r=e[o];if(r&&Array.isArray(r))for(const s of r)this.filter_child(s)&&n.push({item:s,type:t});if(this.showImported){const c=["selectionEntries","selectionEntryLinks","rules"].includes(t)?e.importsWithEntries:e.imports;for(const a of c){const m=a[o],y=a.isGameSystem();if(m&&Array.isArray(m))for(const p of m)this.filter_child(p)&&(!y&&p.import===!1||n.push({item:p,type:t,imported:!0}))}}},allowed(e){if(Array.isArray(e)){for(const t of e)if(this.allowedChildren.has(t))return!0;return!1}return this.allowedChildren.has(e)},filter_child(e){return!(!this.forceShow&&this.store.filter&&e.showInEditor!==!0)},sorted(e){if(!this.sortable(this.item))return e;switch(this.settings.sort){default:case"asc":return ee(e,r=>r.item.getName()||"");case"desc":return Ye(e,r=>r.item.getName()||"");case"type":const o=ee(e,r=>r.item.getName()||"");return he(o,r=>(r.item.isProfile()?r.item.getTypeName():r.item.getType())||""),this.settings.display.primaryCategory&&he(o,r=>{var c,a,m;const s=r.item;return(c=s.parent)!=null&&c.isCatalogue()&&["selectionEntries","entryLinks"].includes(s.parentKey)&&((m=(a=r.item.getPrimaryCategoryLink())==null?void 0:a.target)==null?void 0:m.name)||""}),o}},grouped_items(e){const t=ee(this.sorted(e),n=>{var o,r;return sh[((r=(o=n.item)==null?void 0:o.target)==null?void 0:r.editorTypeName)??n.item.editorTypeName]??1e3});return this.settings.display.sortIndex&&he(t,n=>n.item.sortIndex??1e4),t},groupBy:ot,menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var o;(o=this.$refs[e])==null||o.show(t,n)})},close:(t,n)=>{var o;(o=this.$refs[e])==null||o.close(t,n),this.contextmenuopen=!1}}},get_field(e){return this.item[e]},get_target_field(e){if(this.item.target)return this.item.target[e]},hideType(e){if(e==="categoryLinks"&&!this.item.isForce()||lh.has(e))return!0}},computed:{scope(){const e=this.item;if(e.scope){const t=vn(e,e.scope);if(t)return bn(t)}},costs(){var o;const e=[],t=this.item.getCatalogue(),n=this.item.getCosts();for(const r of n){const s=((o=t.findOptionById(r.typeId))==null?void 0:o.name)||r.name||r.typeId;s&&e.push({name:s,value:r.value,typeId:r.typeId})}return ih(e)},profileTypes(){return[...this.catalogue.iterateProfileTypes()]},childId(){return this.item.childId},child(){if(this.childId)return this.item.getCatalogue().findOptionById(this.childId)},link(){return this.item},iscollapsible(){return this.mixedChildren.length>0},contextmenu(){return this.menu("contextmenu")},catalogue(){return this.item.getCatalogue()},catalogues(){return this.catalogue.imports},allowedChildren(){return kn(this.item,this.item.parentKey)},forceShow(){return this.item.showChildsInEditor||this.forceShowRecursive},mixedChildren(){const e=[];for(const t of this.allowedChildren){if(this.hideType(t))continue;const n=this.get_field(t);if(n!=null&&n.length)for(const o of n)this.filter_child(o)&&e.push({type:t,item:o})}if(this.item.isLink()&&this.item.target){const t=[];for(const n of this.allowedChildren){if(this.hideType(n))continue;const o=this.get_target_field(n);if(o!=null&&o.length)for(const r of o)this.filter_child(r)&&t.push({type:n,item:r,imported:!0})}return[...this.grouped_items(t),...this.grouped_items(e)]}return this.grouped_items(e)},categories(){return this.item.isCatalogue()?this.item.isGameSystem()?En:wn:[]},groupedCategories(){return this.categories.map(e=>{const t=[];return e.type&&this.getTypedArray(this.item,e.type,t),e.links&&this.getTypedArray(this.item,e.links,t),{...e,items:this.grouped_items(t)}})}}},dh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bi1IqIu0g4pChumhBVMRRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsH+BsVpppd44CqWUY6mRCyuVWh+xVBhNCPUUQkZupzopiC5/i6h4+vd3Ge5X3uz9Gr5E0G+ATiWaYbFvEG8fSmpXPeJ46ykqQQnxOPGXRB4keuyy6/cS467OeZUSOTnieOEgvFDpY7mJUMlXiKOKaoGuX7sy4rnLc4q5Uaa92TvzCc11aWuU5zCEksYgkiBMiooYwKLMRp1Ugxkab9hId/0PGL5JLJVQYjxwKqUCE5fvA/+N2tWZiccJPCCSD4Ytsfw0D3LtCs2/b3sW03T4DAM3Cltf3VBjDzSXq9rcWOgL5t4OK6rcl7wOUOMPCkS4bkSAGa/kIBeD+jb8oBkVsgtOb21trH6QOQoa5SN8DBITBSpOx1j3f3dPb275lWfz9cmHKeGGO3IgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFChE0NOeyIIsAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAB2klEQVQoz43SP2gUURDH8e+83WVFOa5USKF1QMiZaGfAExH/9dYKIlZ2gkGtDATstBEEqzT2kkJDRNBCJVxOzUEakzvRkCLNbS532Z0Zi1tP04gDw6vefH4MIy8W33jW3+VfdezwEepTNQGIu70drl44z54quSq5GeqOuwPQaDT49vMHix+X/ezJExLcHTND8xzNc/b6fXZ3dsiyjG63S5ZlXLt8cfQpNjMECCIkUfQnR1FQmLG9vc2T+XkAltbXic2cIMK5l8d5dekzH1ZWqFarHB0bg6KgXq/j7lQqFRZeLxGrGyLC0pWvmDunJycxd3LVfRKAuhF7Galx9w4Ts3N8arVI05Rer0eappgZaZpSqVRwM2JTJYgwNfcIM+PU+DjmPupclX6eE4lgqoRCh8Lt5wkhBN43m7TabVobG3zf3CSJIg4kCUkUUWgpiAiPryvuwnSthpntU5IoIgphKJgpAtyfmUFEeNdsstrpsLy2NpKCyDCSKbGWwsPZWRyYnpjAf0//SxJAVQmqQ+HWs4AAbxsNvrTbrHY6dLa2CCKjVlXiwWAAwNMb4C6cqdVwwMp7MncoVz8YDIizLBtdg5ST3B0p3wBYCEgIZFlGnDjcvPeA/6nqwUP8AtTWMEb6wHGvAAAAAElFTkSuQmCC",ch="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bS0UqIlYQ6ZChOlkQFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4B/kaFqWbXOKBqlpFOJoRsblUIvSKIMPoRxaDETH1OFFPwHF/38PH1Ls6zvM/9OXqVvMkAn0A8y3TDIt4gnt60dM77xBFWkhTic+Ixgy5I/Mh12eU3zkWH/TwzYmTS88QRYqHYwXIHs5KhEk8RxxRVo3x/1mWF8xZntVJjrXvyF4bz2soy12lGkcQiliBCgIwayqjAQpxWjRQTadpPePiHHb9ILplcZTByLKAKFZLjB/+D392ahckJNymcAIIvtv0xAoR2gWbdtr+Pbbt5AgSegSut7a82gJlP0uttLXYE9G0DF9dtTd4DLneAoSddMiRHCtD0FwrA+xl9Uw4YuAV61tzeWvs4fQAy1FXqBjg4BEaLlL3u8e7uzt7+PdPq7wdBJ3KT7BaVSwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFDBEdBk5IsTwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACx0lEQVQ4y42O309TBxiGn3N6qKZGNLqwhUSIFhDMUFwXb2pxJoyIAv7elmXJdsHlZvA/8G7ZrpbMu91oYtAbo0QzhSYGGtivokB7Ss85LS1VxFFKtRBSjrbn88rGxbjwJe/N9+R58yps8OLpjJhPnvznt22LZ2PyTGpObo2ExBGpRETk1khIXBuR448z9B5pZ2xigsFgkJelEnW1tcQzGdT/k2OzaYnNpek90k65XGapUOCbk6dZKhQAcBzn/QV6MiV6OsXJo59h2zaOCC1eLw8tg30NDZWC98oDw0FZF5H5+XkJDQ7Ks4UFKb56JXapJCURGRgOip5MyTsLoolZmUomOP15BwuZDLGxMYrFIpFQiHK5jOpycWNomNbde/i4YY+ivS1HrKRMWiZnj3fxOJlEHx2tMF9HB+5Nm7j++z3aGptobfQqAJWCaSshE0acL3q6SZsmU8FgRT7U1cVH9fVcu3MXX3Mz+5salDdMBZg0LQnHYpzr6WY2HufR0BCO4+A4Dr7OTnZ5vVy7Pcgne/dyoKlReXu1MmmYEtZ1vjx7hjnDID4yUoH1Ph+pTIbR8T/w1tUR8PuJRiLYtk11dTWHAwFcbYH2S1+dP0c2myUVCuF2u3G73TQHAkzrOtUeD2e6T2AZJuPj43g2b6a35wTlUonpqWl4OBOXywM35IWIRE1THty8KbFEQlZE5Ou+PjGMhFzovyiRqCX5fFEiUUsu9F8Uw0jIjz/9LErueUHST+cZDYfp++5bstksH9bU8NuVqzydmeF45ym2bt3C/ft3yb/IsWP7Bxw71s3q6hp//vUAZTGXl7W1NXTD4JFp0P/D9/zy62Uaa2sprqwS/udvFEXB4/HQdvAg0UiE4vo6iqLg9/tRnmVzsri4SH55mX9zS0xaFp+2tLBz23bslzaqqlKlVaFpGlXuKjSXhqZpuDQNVVV5DQyKeoiSxZAyAAAAAElFTkSuQmCC",uh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgjN9BzCj0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABnElEQVQoz42SsWoiURSGv5m5OIVplsQBky67ICisi6QQ3GreQRBsrHwEn8GHEMTCQiufIFVIsQRcd8Bml7XJFuvsIJoE1Lkzs8XEYSaaxB9ucbn3+8899/wKwM3d92Dh2Pi+j+/7vCVVVVFVlQ+nGb5efVEEgGP/5ar4GSNzxjGa2/+4m/wIDQGklEfDAEbmDCllzMB1o0NN0xBC7C3P8wDodDrEGQFEfSuKEl2Ma7vdkkql6Pf7zOdz4kzCIAgCgISJlBJd1xkMBiwWC8rlcsJADYFw0263GY1GaJrGZrNhvV6j6zrD4ZDlckk+n8c0TeKMiFcsFAqMx2Nc16VarQLQ7XZxHIdSqUSlUoletmNCAz/cmKaJ4zhMp1N6vR6r1QrbthOVI4NnJmzheSTpdJpGo0E2m8WyLGazGblcjlqttvexXnyML9PXbDYxDINisUi9Xj+YhcQUdr8fV6vVejNMO0YFCICJZR2dxIllsSupXN9+C37/+smf+3s8T0YRfU1CCDRNkL045/LjJ5TbsRU8PT5woIt3lT454T+zOsZSlUjWPwAAAABJRU5ErkJggg==",mh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgiC+YHR/sAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABwUlEQVQoz42TT4vaQBjGfzHBSw6rt+2lhLL04lFY+h1aevPup/CqIH4D2YJ4Fbsbqv1Da6nXYi+ibL3YdruoZHXXSzaVVMgkmR7SFcU27A/eyzDPM8+8844CcDmZyevrBUEQEAYhcSTUBKqqcnj4gEfGQ0UDmM+veHx0RDqd4j7Y9i3fLy4iQwAhxL3FAOl0CiHErsEdqqqiadpeBUEAQL1eZ1ujAYRhdG9FUTYbt/E8j2QySaPRYLlcsq3ZMZBSAmxMbNvGsizCMKTf77NarTAMg8FgwGI+53IyiwTv3n+QQghZLpelaZpSCCEdx5G9Xk/G8bn3RWrbJ2YyGYbDIUIIcrkcQRDQ7XY5OXlBu92iWq2iaRphGJLNZlmv1ygAr9qv5fNnT3FdF9M0mU6nGIaBZVkUi8X/vsbHT92oB77vA6DrOvl8nlqtxmg0wvO82ASbhjdPz6QQYqcqlYoslUqxPWi/eRv14F8UCgU6nU5sgs38NE/P5Pn5170UrVYrNkGj+VIq3378lOPxmOl0gu/7+H9dXdflZnmDc+vsTGoiEX2mg9QBx8dPUGZXC7la/doM0R3r32tc191b30bXdf4AswSDFyrGAhMAAAAASUVORK5CYII=",gh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bi1IqIu0g4pChumhBVMRRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsH+BsVpppd44CqWUY6mRCyuVWh+xVBhNCPUUQkZupzopiC5/i6h4+vd3Ge5X3uz9Gr5E0G+ATiWaYbFvEG8fSmpXPeJ46ykqQQnxOPGXRB4keuyy6/cS467OeZUSOTnieOEgvFDpY7mJUMlXiKOKaoGuX7sy4rnLc4q5Uaa92TvzCc11aWuU5zCEksYgkiBMiooYwKLMRp1Ugxkab9hId/0PGL5JLJVQYjxwKqUCE5fvA/+N2tWZiccJPCCSD4Ytsfw0D3LtCs2/b3sW03T4DAM3Cltf3VBjDzSXq9rcWOgL5t4OK6rcl7wOUOMPCkS4bkSAGa/kIBeD+jb8oBkVsgtOb21trH6QOQoa5SN8DBITBSpOx1j3f3dPb275lWfz9cmHKeGGO3IgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFChE2D2SPqy0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACEUlEQVQoz42STUsbURSGn5mEGXBEaGtCBSFbSbAGcSFEhM4sAm6DOxeu/AmC2678CTEIIiKSQCG/oIvSWhBpYgNSWykiaatJZkLSxozz2cU0YdKW4gt3cbj3fc59z70CwJvTqt/Wm3ieh+d5/E+iKCKKIo+exFhaSAtRAL15y8LcM+KxSR6iRrPF6dmHAAjgOM6DzQDx2CSO44QAtj3cjEQiRKPRv5brugDs7u4S9kSBYW5BEIYHw7IsC0mSODw8pNFoEPaMAHzfBxiBOI6DLMsUi0Xa7TaLi4sjADEwBMX29jblcplIJML9/T2maSLLMqVSiU6nQzKZRFVVwp5ouGMqlaJSqWDbNqurqwDs7e2h6zrz8/NkMpnhzQaeAOAFhaqq6LrO+fk5+/v7dLtdms3mSOchwAsDfj+Joiisr69TKBSo1WpYlsX4+Dj9fp+joyPS6TTVahXTNPn46ZLXJ+99MTyQgTY2NojH40iSRDabRdNUDMPg4OAAwzDQNJXlpQwn794GQxxMP6zNzU0SiQTT0wny+R00bYWtrRdo2gr5/A4zM0n0ViuI4ANntRpzs7MjENu2qddb5HJrlMsv6XYNJiYek8utcXFxjWXbCK+OT/wvl5/5Wq/jus7wi/Z6PW6+f+P66goASZJ5OjXF7e0NruuiKArLz1WE40rN7/38wZ8pTLPPXe/un/EGGlPG+AWDbgr8JHBAFgAAAABJRU5ErkJggg==",hh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TiyItIu2g4pChOlkQFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/q8ptIjx4Lgf7+497t4BQr3MNKtrHNB020wl4mImuyp2vyKAMPoxiJDMLGNOkpLwHF/38PH1LsazvM/9OUJqzmKATySeZYZpE28QT2/aBud94ggryirxOfGYSRckfuS64vIb50KTBZ4ZMdOpeeIIsVjoYKWDWdHUiKeIo6qmU76QcVnlvMVZK1dZ6578hcGcvrLMdZrDSGARS5AgQkEVJZRhI0arToqFFO3HPfxDTb9ELoVcJTByLKACDXLTD/4Hv7u18pMTblIwDgReHOdjBOjeBRo1x/k+dpzGCeB/Bq70tr9SB2Y+Sa+1tegR0LcNXFy3NWUPuNwBBp4M2ZSbkp+mkM8D72f0TVkgfAv0rrm9tfZx+gCkqavkDXBwCIwWKHvd4909nb39e6bV3w83V3KPY5temQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFExIAI/Ac8PcAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACHklEQVQoz32STU8TURSGn8tMZEEKYlhgcNHEYirdQaL+A7UalQ7sWPMr2AFb2RAs/AAjGbBU4xfdsFBxBwkNYkixpQwQaUqADk3nzsx1UVptCH2Tszkfb56ccwTATnZXHR4e4HkevufTTC1aC5qm0d19k/aODgTA1++r6k4oRGfn9Ybm4+NjLMvCcZyGvG2f8+foiHv3H6ADSCkvDQPk83n6+/uvpPm2+uOfQU2apiGEAKBSqZBKpZiZeUUi8Zbp6Wl0Xcf3fQYGBiiXy9Whz8spJaVUrusqKWU9VlZWVDN9+rKsdADfry5OKQWA53kAOI7TlKDWx/sPH5WUUo2PjyvTNJWUUp2cnKhkMtmUIJF8VyWoOUUiEdbW1pBSMjw8jBCiKYGUsnrGxcSSevb0CbZtY5omuVyOYDBIOp1mamrqyiu8fjNfNZg3F1TsxfN6YW5ujvX1dYrFIkIIAoEAuq7T1dVFoVDAdV1KJZtBw6BhiTWNjo4yMTGBEIJYLEZvb4iFhUWy2SyhUIihIYONjTQ7v7O0XIU3NjZGOBwmGLxNPD5LNDrI5ORLotFB4vFZwuEIFcepEgBsbv6kr+9ug4mUkr29AoYxwtLSIqenRdrbb2AYI2xv55GOg/i1nVFbW1vkcllc18W9+MpSqYRlWWQyGQBaW6/R03OLg/19XM8lEAjw8NFjxK51oM7OTutPVFP5vIxt25fy/6utrY2/4uNpmWRVVTgAAAAASUVORK5CYII=",ph="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8zyKORhVGSxV0MK0pIlgwlRU1j1AwW7r1jhpp7TfeObCyVrbLw2HgtbKzZWtgqpTxKtjZWxEa6/ueOmkmNcup0fn3nfF/nfAeCBznTcqt7wLILTnwsqiVTM1rtMzW0UE8Tbbrp5odjsQkqjo9bAmq96VZZ/G80phdcEwKa8JCZdwrC88IDq4W84h3hsLmop4VPhbscuaDwvdKNIr8ozvocVJlhJxEfEQ4La9kyNsrYXHQs4X7hSNqyJT+YLHJa8ZpiK7di/txTvTC0YE9PKV1mO2OMM0kMDYMVlshRoFtWWxSXuOxHK/jbfH9MXIa4ljDFMcoyFrrvR/3B727dTF9vMSkUhZonz3vrgNot+Nr0vM9Dz/s6gqpHuLBL/uUDGHwXfbOkRfahaR3OLkuasQ3nG9D6kNcd3ZeqZAYzGXg9kW9KQfM1NMwWe/vZ5/gOEtLVxBXs7kFnVrLnKry7rry3P8/4/RH9Bi+4coweluJpAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB6klEQVQ4T32Tz08aURDHv7vgBoKYHmhkGyu9ICykQT1YSLoIR73ZHmtJjLHpH9TUmLQcSG9ce7YFDxIvJfZG20upllLsgSy/wsJz5/mC0l39JC9vZt7M7LyZfbiLTDbLaAnVEVnsNnRdZ8H5edAiWZhtSGKfQk+neTDB2FXsn2YTR+Wyzd+xgn8XF3C73UIDl8nmhC2BpsWYqqro9/vCAi4Hg0F+JkwTbAkSy8tCsuN05tiD9Po6ux8IQJZl3oPxeIyWdYVyqWTzd0xAJFMpFlpcxGg0wq+zM1SOjx19bx1jo9GAoigT+TYcEySTKfZwYQGmaXKdRko2rvzHVFlbz56zavULVldW+L1dLhd6vR4Mw+ByrVZDeGkJa2tPoMVieKrr1xVEIhH24/s3aNEoDyIoMJfLIZ9/j3A4DI/Hg0ehEF7t7eLenB+fDw+vEkSjGgtYXff7/ZNgot1uI5FYxcbGJra3d3Fy8hU7O6+RyWStmDj+tlqQ6+cNVq//5A2jL3i93smSJAmnpzUUCkUcHLy1Sn+M/f03KBY/olKpotvpQPpUOmL5/Dt8KBR4At/sLHw+H5QZBebIRLfbxdgaJTWURjoYDDAcDhGPx/HiZQ7S72aLnVtzJuNN6Pc1Oga9JmGZxmW9D1V9gEtwTsDMeKDk2wAAAABJRU5ErkJggg==",fh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9Ti0UqDhYRcchQpYMFURFHrUIRKpRaoVUHk0u/oElDkuLiKLgWHPxYrDq4OOvq4CoIgh8gri5Oii5S4v+SQosYD4778e7e4+4dIDQqTDW7xgFVs4x0Ii5mc6ti9ysCGEAQUUQlZupzqVQSnuPrHj6+3sV4lve5P0evkjcZ4BOJZ5luWMQbxNObls55nzjMSpJCfE48ZtAFiR+5Lrv8xrnosMAzw0YmPU8cJhaLHSx3MCsZKvEUcURRNcoXsi4rnLc4q5Uaa92TvzCU11aWuU5zGAksYgkpiJBRQxkVWIjRqpFiIk37cQ//kONPkUsmVxmMHAuoQoXk+MH/4He3ZmFywk0KxYHAi21/jADdu0Czbtvfx7bdPAH8z8CV1vZXG8DMJ+n1thY5Avq2gYvrtibvAZc7wOCTLhmSI/lpCoUC8H5G35QD+m+BnjW3t9Y+Th+ADHWVvAEODoHRImWve7w72Nnbv2da/f0AkPdys6WKBBkAAAAGYktHRADoAAAAAOHnN2EAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfnBRYIKibJch7EAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAbFJREFUKM+l0E9IkwEYx/HvyzpsQQdPQrAkbxUIzku0Nt1hTkFlSAoW+l76R5eic5R1LzxF3WQeQm36NmurZc2DXcoW6xCUYdggEAdquvfdwT2PB8VcRok98BwfPs/vZxSWVpR9zAGAUsnhyuVL3H/wELfbA0DvubOICKqKiiAqHDt+gv7bdwAwCksrOvkyzfuZGXwNDYSbI3sTSyWHVCrJ3XsDXL92lUAwiNvtoae7C9FNUUS210o83RQfDY/oUCy2/VafaRJpaf23mEomOX/hIsHGRqYyGR6PjhBpaeVMZ3SHtJVThGfPX/zKuJ9WjXC4WVUVUanIslORrVbL5TKTr6f+U2wKhfR3RVEMwHEcVJWibeNyuSivr3Pj5i1OBwJ/Fq2xODVHvNTWHsWyEszn89R4vUSjHczNfWP+ex6jt8/Ur7OzFVmKa0UsK4Hff5J4fIK6unpyuSym2UM6/YrxJ+MYnz5/URGpEGODg4Sa2qiqOkRiYoyFhR9UVx+mo72T5eU13r7L7H61sLhI7mOON9PTABz0eKj3+fiQzWI7DgCn/P7dh7Zts7r6E9W/l70BbWER+Y26lCMAAAAASUVORK5CYII=",yh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8zTCSyMEmyuAtkYUpIlgwlRU1j1Hgs3HvHDDX3mu4d2VgqW2XhsfFa2FiztbBVSnmUbG2siI2m63/uqJnUKKdO59d3zvd1zncgeJg1Lbe6Byw778THolpyZlareSFEM7V00aWbbm44Fpug4vi8I6DW24jK4n+jIbXomhDQhIfMnJMXXhAeWMvnFO8Kh80lPSV8JtztyAWFH5RuFPlVccbnoMoMO4n4iHBYWMuUsVHG5pJjCfcLt6csW/KDySKnFK8rtrKr5s891QvrF+3pKaXLbGOMcSaJoWGwyjJZ8kRktUVxict+tIK/1ffHxGWIaxlTHKOsYKH7ftQf/O7WTff1FpPqoxB69rz3DqjZhsKW530deV7hGKqe4NIu+VcOYfBD9K2S1n4AjRtwflXSjB242ISWx5zu6L5UJTOYTsPbqXzTDDTdQN1csbeffU7uISFdTVzD3j50ZiR7vsK7a8t7+/OM3x/Rb5D3crO0K6pCAAAACXBIWXMAAC4iAAAuIgGq4t2SAAACNElEQVQ4T32Ty2sTURTGvzwm5Ek2CbVJzaIu0hgNxEhNFkmTZd2pCxPFBApCqitL3buQ/gUhoWAKCSJKiEFxIboQETFkEUM3gosKTlKlBlvbPJvH9d7pVC0z9geHe+bM3HvPd84ZHEc4EiHMxEdZlOIqIRgMkhMTE2DGfDEsQSGuRwiGQsJmjuOg0+mgVCqxt9fC4q3b4hcHnHQ45A9wu93E4/EIm7PZrBiV8v5DGSrR/4PLdZrYbDaoVCpotVro9XosL99FNHoVqVQK1WoVlUoF4/EY7U5XmkE0do00f2zBZDIJlsvlxDdSXr56LS8hNDdHrBaLkEEikUA6nUGp9FTIQK1WC7f7fD40f26LO2TwBwIkFouR4yg9e04kNThEzXH3pux2mM3m/9Zge2dHXoLfHyAcp4bVakWxWBSjUh49fnL0gEuXr5Ba7SPOeb3odrvo9/vo9Xpot9tQKBRoNBqw26fgoP230ezovPxto9PpJLu7v3BqehrD4VBo42AwQDKZxNLSHWxsfAHP8zS7C1hZuQ+j0Yh6vX4wyjMzLmKhVWdtYzczWLWZ7/Wex/z8RcTjN6n+T1hYWEQ4HKHzcgb9/X0o+c3vhOe/QqPRCG1j03doLO319c/I5wtYXU1jdvYsMpkUCoUXKJdr6DBpb96+I2trD/AwnxcOMNDUDAYDNJwGw9EQnU4H49FIkDWiK6sLk0bHHddvxKH4ttUkm7Q4LPgvrHitdgsg8j+iikqcnLThN47L+i6vOquvAAAAAElFTkSuQmCC",Ah="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhT8TRRFFJClELLZQGw2IilhqFESIEKKCV+HuxsRAdg27ERtLwVaw8Gi8ChtrbS1sBUHwALG1sVK0kbD+sxEShAgODPPxZt5j5g0EDrOm5Vb3gGXnncRYVJuZndNqX6ihnma6COmmmxuOx2NUHJ93VKn1NqKy+N9oTC65JlRpwkNmzskLLwoPrOVzineFw+aynhQ+E+525ILCD0o3ivyqOO1zQGWGnanEiHBYWEuXsVHG5rJjCfcLtyctW/IDM0VOKl5XbGVXzZ97qhc2LNnTk0qX2cYY40wQR8NglQxZ8kRktUVxSch+tIK/1ffHxWWIK4MpjlFWsNB9P+oPfnfrpvp6i0kNUah59rz3DqjdhsKW530deV7hGIJPcGmX/CuHMPgh+lZJaz+Apg04vyppxg5cbELLY053dF8KygykUvB2Kt80C6EbqJ8v9vazz8k9TElXsWvY24fOtGQvVHh3XXlvf57x+yP6DVyYcp4hKAl2AAAACXBIWXMAAC4iAAAuIgGq4t2SAAACJElEQVQ4T4WST2gTQRjF325212BCBS8mpZItJVCCgcRWL2ogGyRYNAgF6cGTggdPnpRa8FAw0OJNDy0oHkIvghAsvRRCvdhChZhGJIkINiExFWJI86fZJGa3801jL4J+MHwzs7+3b/bNCm8S782m3sa/Sj3jgDbpF2guvFpdM2euhdHt99GjYRjomyZMNqhSqRQq+w2oDidCF84LIj0wCOr1+OjqOtqtFprNJhqNBu93rk/he/kHEh+TpkgweYmCANligVWWoUgSJFGEwPaq1SperKygXa9hY2sTTGBy+Oqal/ftnR3kS6VjkaZpCAaDiEQiGBk5C7FvMgcGbtz4wgVXJiZwbmzsLycqYkVzcKTU40dckMxmkdndRTqX406lchm1Wo2LiJUMlgyBkwvP+Mdf9HhgUBCDQcnpLAwLYzj7u3/k8OC1DJHZb6bTyBQKyOTzKO7tHQdBnViRVGT3/O6RU8Dvh1dV4R0dhTo8zPcIltnLiJUMgwmYw5O5OdTrddjtdrjdblitVvh8Pn5xOrub7NdvuHlrhqU0cHgajUJRFITDYYRCGs8/FovxTuvA5UvY3vowEDCH+y9FuFwulrULS0vLDJrC7Ow877QeH/fgV6UCqdPpMBxYvgcsLvZQLFYwPX0b8fhbdsQqhoZO83UuV0CXpSXRv/KnkunPiL9b5XNFOQGH04mfyU9YT6zDZrMhENQgPIwumPsHLQ79r06dtOEQLRMJwmlQtNQAAAAASUVORK5CYII=",_h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgeFvbyUt0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABKElEQVQoz6XPMUtCcRSG8eeCqR8ktKEaJYMw/QYtFUQQFFREUIM4GEEYRAkN0dQSQQWFIBQ4lSlKBA1SLQ2B9BlsuH/v9ZwGtYQIC9/5HH48VuX1TQGMbbORiLO9m8bn9wOwvrKEiqIoIoKK0B8IshZPYLUfy8UCL89PDA4NMzYepds8ba2YvyW5lSK1mSQ0Esbn97O6uICKoKqIKiqCiHB0ctoUS4U7spnL1hFMTE4Rica6i4X8DdMzs4TCozzcl8ldXxGJxlien/tSRAWVZuvx+cV343/nAZot7YaOlk5FWq2NRoOzTLZH8beWtiIiOI5D3RiMMeTyxR7Ej1qN/b0d3qvVH4rruhjbxhhDvV7HdR0CwQHSB4dYpceKGmMj8jfYsqDP6+UTS3LlTs6Kx84AAAAASUVORK5CYII=",Ch="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAABuElEQVQ4T32Tu04CQRSGf9gLEKQgYmQN2qACNhpNCBSAPoKXRHoqtcWeh6A0EtGChMZoY7QwitGEgpcwoBJvhSD3cWcYUbKjXzKZ//xz2TNnZ/AfyysrhDYeCjHz3kAkEiHu8XHQRjW3DZh4P0QkGmWLKYT01z5VqyhcXxvmCzN4fXmBLMs8AtPUE2HYIBCYI5qmodFocAdMu91uNsatAYYN5hcWuDIiGhPWIBqLkTGXCxaLBTabjXm1Wh1b2ztMfzM5NcWVgFA4TBKJhF7Dv7m5vSMSn29AVpTUzPQ0rFYrksldxOObSKfTKJVKKBaL6PV6qNU/xUcIhcJEUWR4vV5kMhnuGjk7v8BQBqtr66TZbKZ8s7Ps7JIkweFw/JNB/ScDn89HaNE8Hg+LqVZVFblcjsUijk9O+xn4/QHico2yRXptoCgKuzxUO53OPzN4e3+H6b7ySPwzXgSDQZjN5sGvo32r1UI+n2dfE3GQPYTp8qpA9vf3cJTNsorbR0Zgt9uhKiq7Jb1uF+1OB512m21IW0ePF5eWsLa+AdND9ZlUymW09Qm/odf3o/ZBXxN3hpH0I2raBL4ARzrLEHEzjREAAAAASUVORK5CYII=",vh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TtSIVQTuIOESoThZERRy1CkWoEGqFVh1MLv0QmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQq3ENKttDNB020wl4mImuyKGXtGBEHoxhJjMLGNWkpLwHV/3CPD1Lsaz/M/9ObrVnMWAgEg8wwzTJl4nntq0Dc77xBFWlFXic+JRky5I/Mh1xeM3zgWXBZ4ZMdOpOeIIsVhoYaWFWdHUiCeJo6qmU76Q8VjlvMVZK1VY4578heGcvrzEdZqDSGABi5AgQkEFGyjBRoxWnRQLKdqP+/gHXL9ELoVcG2DkmEcZGmTXD/4Hv7u18hPjXlI4DrS/OM7HMBDaBepVx/k+dpz6CRB8Bq70pr9cA6Y/Sa82tegR0LMNXFw3NWUPuNwB+p8M2ZRdKUhTyOeB9zP6pizQdwt0rXq9NfZx+gCkqavkDXBwCIwUKHvN592drb39e6bR3w+B0XKtPX19MwAAAAZiS0dEAOgAAAAA4ec3YQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+cGBxInIsUFyBwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACEElEQVQoz42STWhTURCFz9ybvOaH1NtYF2JVpPBqUAwiGNSt4sZSdFkUBX/AVa0pdm1RKVGLjydoFVHciW6kS10UBLEbUREKFsSVAdukLWnz8967d1xIYiwh5uxm5mPOYRja7OwVGvomgIv4o5cArq6MzFfQJOWm40zVSdJiGAATy6dCeuMhDb4D4Z1HkJgEhEZodRSQAHC5eQFpnYMMThFHJ5hYsqxc10ZWoVw7r5zUSB3cdH/grHLtWt/Wk+KfBI69qpw9Z+p1z719WeWkfgkYCA77lb9OXAS0oF7TWLDtBQQEYuQn/AZnIovEiJNy7OcQyJC2LrGvqhQuPGOpd5O2npCXGDddtQhx5QZL7xyMXKAgeRrwo2yVHrAJfRUmWc7C4AfLyiwi+Q9MukjausDkHTddhQWItW8svSMwkWFALrG1OMfWyiyMXOIYjVE9UnLq4C4OuruXr739DADJu5m4Ca29h/B/yiA2WBj9FABAT+5ommSpVMzOfcf/lJzaP6Pc/ul2jGg3ZKEtGBlvx1BL59yhPhMtvAJ0BgBgrI/E4RPLV77kO0pgooXbgI5SbcsB4fWmIbRk8qfRqZTbX1KuPdT0NIPKsYPUsSHq8AayDIidjURWeTuA9fk3r3kjGWp5GG09ZvJuKceOADIM7Y0B8lFLq1bNHZx5tz5QEGCMQPBh0uGHJuZP1GaK/kb2N5UT1K1lBpuKAAAAAElFTkSuQmCC",bh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABhWlDQ1BJQ0MgUHJvZmlsZQAAKM+VkT1Iw1AUhU9btVIqInYQcchQnSyIiuimUShChVArtOpg8tI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Iq4uToouUeF9SaBEq+ODyPs5753DffYC/VmKa1TEGaLptJuOikM6sCsFXdCGEPqoZmVnGnCQl0HZ93cPH97sYz8L/Vo+atRjgE4hnmWHaxBvEU5u2wXmfOMIKskp8TjxqUoPEj1xXPH7jnHfZzzMjZio5TxwhFvItrLQwK5ga8SRxVNV0yvenPVY5b3HWShXW6JO/MJzVV5a5TjWEOBaxBAkCFFRQRAk2YrTrpFhI0rnYxj/o+iVyKeQqgpFjAWVokF0/+B/8nq2Vmxj3ksIi0PniOB/DQHAXqFcd5/vYceonQOAZuNKb/nINmP4kvdrUokdA7zZwcd3UlD3gcgcYeDJkU3alAJU/lwPez+ibMkD/LRBa8+bWOMfpA5CiWSVugINDYCRP2ett3t3dOrc/77jzg/gDa0xypGYVSgQAAAAJcEhZcwAALiIAAC4iAari3ZIAAAFGSURBVDhPjZLNTsJAFIXPtFieQAqLuhWVtboSFiwVIk8qJmrUTVEeAf9ZaaMSWcGGtjMd506mjQ2z8Etu5s7pOb3TSRkUvX5f0vpfzodDxo5PevLwYB+ccyMDUkpkWaZLCFGsVNVqFQ+PT6jQJk1TRFGEz69vEwX2dne08fnl1SjqhZlAo9HQupNPev+IcHV5wahIWywWWC6X+iS5LjIJz/O05mw3m7gfj3F7c62/lxCCI45jJEmi+xzyvE2noExh/stRuy3rvq+P9DOf4240WvM5Zi2RpjQxURO57m1Yg1xdFj1izDX9OvaJPFWhChxnQ/c2rMFEHdN1PV3U27AGV/GqCFJvoxQ8HQxkEASythmonavLr22BNHqmTYbSNft+XXa7A/3LCUG+3MsQhmeYzb4LfynY7nTkZDIxuzKtVgujMDR+4Bfjb7fb2lfCogAAAABJRU5ErkJggg==",kh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABhWlDQ1BJQ0MgUHJvZmlsZQAAKM+VkT1Iw1AUhU9btVIqInYQcchQnSyIiuimUShChVArtOpg8tI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Iq4uToouUeF9SaBEq+ODyPs5753DffYC/VmKa1TEGaLptJuOikM6sCsFXdCGEPqoZmVnGnCQl0HZ93cPH97sYz8L/Vo+atRjgE4hnmWHaxBvEU5u2wXmfOMIKskp8TjxqUoPEj1xXPH7jnHfZzzMjZio5TxwhFvItrLQwK5ga8SRxVNV0yvenPVY5b3HWShXW6JO/MJzVV5a5TjWEOBaxBAkCFFRQRAk2YrTrpFhI0rnYxj/o+iVyKeQqgpFjAWVokF0/+B/8nq2Vmxj3ksIi0PniOB/DQHAXqFcd5/vYceonQOAZuNKb/nINmP4kvdrUokdA7zZwcd3UlD3gcgcYeDJkU3alAJU/lwPez+ibMkD/LRBa8+bWOMfpA5CiWSVugINDYCRP2ett3t3dOrc/77jzg/gDa0xypGYVSgQAAAAJcEhZcwAALiEAAC4hAQdb/P8AAAFcSURBVDhPjZLPSwJBFMe/s+vqUaGDmW2nAoWEKPNYnosU/EsrKqiTRd06BEZKeVNhE6OywPbXvGbGVdqaQx/28d68+X6ZmccyCMq1Osn8X26PjxjbPKjRWqUC7gdRGyAiEOegkIPzEJxEDkQOQ1ipFHqdNtjG3j6tbpXxMujj1XEiK2AXiko4eHqMOgKxzuRyeBsOYYTB9KRRv4+7s1MmQ/Ym4zEmnx+Q9bwvbpJIJlXPyBcK6Nxco3Vxrt4rIbHhuy4C11P1DKlxul1Iz1z8k+LOLmWyWXXV8WiE9tXlH50R5RjyKr7nIRADmz3lN3qj5wPMEJ85rTVojUHog5kJMMtStQ69UQzFENOTIWsdWqPvfsGwhFGErHXEjNuNBi0s25ResgHTVJHJr0D25F4kU8TGnM4uUqnekP8cQi51My3Dw8kh3p+duT5mLFar1LtvRas49noJ7WYz0gPfaLuykwTqJnIAAAAASUVORK5CYII=",Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABgmlDQ1BJQ0MgUHJvZmlsZQAAKM+VkU0oRFEcxX9miDSizEKyeAusTIRkyVCToqZBGSy898YMNe+Z3hvZWCrbKQsfG18LG2u2FrZKKR8lWxsrYiM9//tGzaRGuXW7v86953TvuRA4yJqWW90Dlp13ErGoNpOc1WqfqSFEE90EddPNDcfj41QcH7dUqfUmorL432hILbomVGnCQ2bOyQsvCA+s5XOKd4TD5pKeEj4V7nLkgsL3SjeK/KI443NAZYadqcSIcFhYy5SxUcbmkmMJ9wu3pyxb8gMzRU4pXldsZVfNn3uqF4YW7elJpctsI8YYE8TRMFhlmSx5IrLaorgkZD9awd/q++PiMsS1jCmOUVaw0H0/6g9+d+um+3qLSaEo1Dx53lsH1G7BV8HzPg897+sIgo9wYZf8Kwcw+C56oaS170PjBpxdljRjG843oeUhpzu6LwVlBtJpeD2Rb0pC8zXUzxV7+9nn+A6mpKvxK9jdg86MZM9XeHddeW9/nvH7I/oNQUlyk6fcG6sAAAAJcEhZcwAALiIAAC4iAari3ZIAAAIwSURBVDhPdVNLaBNRFD3jTJs0iQnWtqC2uLEWUlxIUBBxWQjqRigoaNxoEQSRKiIuKqILQRA/hIiCCwviDxoURLGCiJLGT6AhUGvTJjYfpTGdNGknE83n+uZlNASTA3eYuee8e+57746ABhi5vUjpLPH3DpuAS8fWNtTVJU9eTdA2uxk7tpixvlPiue8/S5gIKfg0peDG6e6GRTB0cZpm43kqlUpULBbrQstpnKbR5TUMnvpAX6M5KhQKpKoq7XS9rQv/5ALnNI2m1ZdhlfbY3m9Gd5cI5gLmAtfedTx2bbUil8vBH0xxTtNo27p8Z5IXEJ1DL+joYC9sZgFExKNvYyva27KIz89BTi/AZpCh5uKIRqMwSSvwB+bgfXTzAuy7vbSYWSFZlimVSlE4PEvBYIiue56wOs3x3jdBkiSZANaEqv5CNruMSqUCUWzB83dLsG8ah8dzC17vGNxuN5iY8w6Hg+lVCPtOBOjskR60m1Te8l9EIjNwOgf0r//x8tV49Z6v3E3SgYEWlMtlTmg4fv4Nhl0dTZ3TcqYq3H/mBwVCy5RMLlEikeGx5/Dj6uaawPv0Gf2bGNe5DA0fNGJDJzsC1r3P9xoWi6GpcyyR1FfqOMQKXBtV6GPwN90bHdM9GuP+g4c159DUF4p8S+PztBEzcQti82EUlRiMrQrWtMno6SrBZjVitdUKSRTRu7mv9mNEYwk2mnnelppXoShK3ekLggCD0QCTycyuUhtM4A+OzZgJPZUHrgAAAABJRU5ErkJggg==",Eh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS1WqInYQcchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdXFSdJES/9cUWsR4cNyPd/ced+8AoVZimtUxDmi6bSbjMTGdWRWDrwigF13oR0hmljEnSQl4jq97+Ph6F+VZ3uf+HD1q1mKATySeZYZpE28QT2/aBud94jAryCrxOfGYSRckfuS64vIb53yDBZ4ZNlPJeeIwsZhvY6WNWcHUiKeII6qmU76QdlnlvMVZK1VY8578haGsvrLMdZrDiGMRS5AgQkEFRZRgI0qrToqFJO3HPPxDDb9ELoVcRTByLKAMDXLDD/4Hv7u1cpMTblIoBgReHOdjBAjuAvWq43wfO079BPA/A1d6y1+uATOfpFdbWuQI6NsGLq5bmrIHXO4Ag0+GbMoNyU9TyOWA9zP6pgwwcAt0r7m9Nfdx+gCkqKvEDXBwCIzmKXvd492d7b39e6bZ3w8AS3J5R6xfBwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFDgkROnWuuPQAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABPUlEQVQY023OzUsCQQBA8TcqfpSwa7uQYKXmpbAuJVT7j0fBnvtgK0LFArVod2mDNF0EYWZgupR06Hd6xyf4MXp9M9PJJ8vlEoBSqcSG49Jq7AgAAdDtD8x89kVrt4njOABMJhNG4xcsu8Jhe1+I4fjVxFFI5/iIfD7PX1JKgrt7alvb5JLknUa9TjabZTgcEgQBAJ1Oh2azSaNeJ4xjMuk8xbYtpJT4vk8YhoRhiO/7SCmxbYt0npLTWqO1BmA6nTKbzQDQWqOUWnWmUCySJB8opfA8b/XneR5KKZLkg0KxiOgPnk2/1+Xs9AQhBMYYgFVfXd/QPjgks1mt4rgu5xeXRFGMMWAMRFHM+cUljuuyWa2ScyuWuHt4NI7jchsELBYLAMrlMrXaFmvr67gVS4jfp97gyfCPg/09AfANwseSxMxvrXsAAAAASUVORK5CYII=",wh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8zyKORhVGSxV0MK0pIlgwlRU1j1AwW7r1jhpp7TfeObCyVrbLw2HgtbKzZWtgqpTxKtjZWxEa6/ueOmkmNcup0fn3nfF/nfAeCBznTcqt7wLILTnwsqiVTM1rtMzW0UE8Tbbrp5odjsQkqjo9bAmq96VZZ/G80phdcEwKa8JCZdwrC88IDq4W84h3hsLmop4VPhbscuaDwvdKNIr8ozvocVJlhJxEfEQ4La9kyNsrYXHQs4X7hSNqyJT+YLHJa8ZpiK7di/txTvTC0YE9PKV1mO2OMM0kMDYMVlshRoFtWWxSXuOxHK/jbfH9MXIa4ljDFMcoyFrrvR/3B727dTF9vMSkUhZonz3vrgNot+Nr0vM9Dz/s6gqpHuLBL/uUDGHwXfbOkRfahaR3OLkuasQ3nG9D6kNcd3ZeqZAYzGXg9kW9KQfM1NMwWe/vZ5/gOEtLVxBXs7kFnVrLnKry7rry3P8/4/RH9Bi+4coweluJpAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB7klEQVQ4T5WSS0xTQRSG/zu33fFYGdJF17BS08tGE3YGFuICmgrojkCIC8FECjtIWAnIrilNMGgAeRRtCyVo7A6Npg12oeHVEjHlsS4p5XVJjzPDhZRAbuo3i3PmzPyTf+aMggJxd3WTkWJwoP9Sx4xoihA7nfV40dFuVP4DIV76ukSJxAblu7jAYkRTSkuKMfJm9Ir1i8MKusLpqY7HLuelSMSO9udyrSAHuq7j4CAjD+FQa0szVlfX5JppFwKhOcpm9mX+6/eKjPk0PXlqZDewsPiJXg8NkRnfvv+gGx2E5sO0nUqhpLgINpsNXu8wgsEAPB4PLBYLcrkcNE1DJnt4/QofAkFKcXGlQ0N4IYyB/lfGynU+f4lANXLJzOxH+rv1B/fvVWFuPmRUCZ2dbjQ2NkgH8XgcsVhMusge5jmYnPbTFhdXP6iFf3YcDq0S8Z/Lpg74Vc//wdjEJCUTSTx66JLi23fuoqnBJQ+PRCKoq6sXqXTg8/n4m3gRjUZle/FubIJ6evtofX1PflUxl7s5Ym7G+6lpUl663fSsrQujbz0oK7uF6poaMMaQTqexuZnE7s4Ojk9OoCiKrIsohqC8ogLK1IyfhB273Q4Hf3mmqrxVKs70MxwdH0FlKqxWK68zGcVc5a1U+T7GGP4BgBQJdqV6GiMAAAAASUVORK5CYII=",Ih="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TSkWqDhYp4hCwOlkQFXHUKhShQqgVWnUwufRDaNKQtLg4Cq4FBz8Wqw4uzro6uAqC4AeIo5OToouU+L+k0CLGg+N+vLv3uHsHCPUS06zAGKDpFTOViIuZ7IoYfEUAEfSgH0Mys4xZSUrCc3zdw8fXuxjP8j735+hWcxYDfCLxDDPMCvE68dRmxeC8TxxmRVklPiceNemCxI9cV1x+41xwWOCZYTOdmiMOE4uFNlbamBVNjXiSOKpqOuULGZdVzluctVKVNe/JXxjK6ctLXKc5iAQWsAgJIhRUsYESKojRqpNiIUX7cQ//gOOXyKWQawOMHPMoQ4Ps+MH/4He3Vn5i3E0KxYGOF9v+GAaCu0CjZtvfx7bdOAH8z8CV3vKX68D0J+m1lhY9Anq3gYvrlqbsAZc7QOTJkE3Zkfw0hXweeD+jb8oCfbdA16rbW3Mfpw9AmrpK3gAHh8BIgbLXPN7d2d7bv2ea/f0AZphyovX12KAAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfmBBgOKgbgcs+YAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAzFJREFUOMuVlWtMFGcUht8Ztt1lZmFwZlmWXXZZkF0tEW1TI02s2kvU/miJicaUeMFoURtquDRYTdqGhhAjRkNL0ia9gReIrRVawRQjmqz+MsbourUlbUkI7sLOfLNovKS2Ro+/WGbKboBJ5s98532+c857cgZEhBv7D9rivuA+vXKNSESYyxtp2WFVg4FGdV25nYiA29uarJri7mQQY0xReu9vXGWfLexiS5NVz8n9RocYZRbpl/tvrsiG6vSsZxBuMwhRBiGqyfKZeytfE2aC/bl/3/MJr+u7SR2DEE14Cutw7dtfOSbP22s80CSpj214PSsd7LeP662ay9Vh1MRF5xeRtnYLiAgNoS2cruR+qBsCmJTdx8pXTCv/yieNNt1b0KkZYlV3YfuNjs4MIkIyEKFD0HIdDcZb9eyc/sSqsmSmQ427bczpOmqMUeX8tqHWpowkx3h79NjbmHDk1Zqgotz/6K2XskZ2VlrVIv8JU5kF8z+/2laXYWRM68/aB+dxx6Hs0Q1GMUk6q3r93UbYmE0+3Nt9iv+/PmXTK4+v5nRBqTH2VIc4lVm+70i4d4BPpU07FruadnFqib/OZBSEaNzhODxyqJ9Pp+OR5ql5LGdydx++QgBn/P6c/m+pZeADKZ0uJfCPvR+JzpOnjkJ/+CoAIgAcOA4AnuJJWWaIdccWlsmptBwRmWH1taLSdfL7DPZgOQEgAOSe18U/fTSM+D+fTsZZeD7yX6m4yRmJT5gAxvqHq6oEtaj4tMnN0iWtPw528USEiSLvexqEWNIoi3ROe7lYTmnK37U1dtVd8JMRNu4qaPk6HE4agOvt0Is91cwAZYI0OFoWVEzAa9XvZ2l5bhNsbOGiAz9Ebk5z82LPu5zqd29nEKcyzcwZHF0WyCUi4NZnrXZVVnpMo1Hob/750vW0o9HXcZNTS/K3GzPVefuFkaWL8hAv9lUktwyE6FjJC80N2h1+xn0IAgt4qiZ7qkGIxRYE6rF56BYSLs8ODUJ0fPGLzV9duszPemP/fpxjQe9WDWJszOc7WD16jAcR4Z3QAW68fEn5l3+p/Fx/AYGWIEbeWLa8gsIcEeEZsTM0Y8K17+YAAAAASUVORK5CYII=";const x=e=>(O("data-v-b9f3b66e"),e=e(),L(),e),xh={class:"head"},Th=x(()=>i("img",{src:Et},null,-1)),Sh={key:0,class:"gray"},Rh={class:"typeIcon-wrapper"},Vh=["src"],Fh={key:0,class:"gray"},Nh=x(()=>i("span",{class:"gray right"},"Alt+Click",-1)),Bh={class:"gray"},Uh=x(()=>i("span",{class:"gray right"},"Alt+Click",-1)),Ph={class:"gray"},Oh=x(()=>i("span",{class:"gray right"},"Alt+Click",-1)),Lh={key:0,class:"gray"},Qh=x(()=>i("span",{class:"gray right"},"Alt+Click",-1)),Gh=x(()=>i("span",{class:"gray right"},"Space",-1)),Dh=["onClick"],qh=["src"],Kh=["src"],Mh=["src"],Wh=x(()=>i("img",{class:"pr-4px",src:dh},null,-1)),Zh=x(()=>i("img",{class:"pr-4px",src:ch},null,-1)),jh=x(()=>i("img",{class:"pr-4px",src:uh},null,-1)),Yh=x(()=>i("img",{class:"pr-4px",src:mh},null,-1)),Hh=x(()=>i("img",{class:"pr-4px",src:Ne},null,-1)),Xh=x(()=>i("span",{class:"right"},"❯",-1)),zh=x(()=>i("img",{class:"pr-4px",src:gh},null,-1)),Jh=x(()=>i("img",{class:"pr-4px",src:hh},null,-1)),$h=x(()=>i("img",{class:"pr-4px",src:ph},null,-1)),ep=x(()=>i("img",{class:"pr-4px",src:fh},null,-1)),tp=x(()=>i("img",{class:"pr-4px",src:yh},null,-1)),np=x(()=>i("img",{class:"pr-4px",src:Ah},null,-1)),ip=x(()=>i("img",{class:"pr-4px",src:it},null,-1)),sp=x(()=>i("span",{class:"right"},"❯",-1)),op=["onClick"],lp=x(()=>i("img",{class:"pr-4px",src:it},null,-1)),ap={key:0,class:"gray"},rp=x(()=>i("img",{class:"pr-4px",src:_h},null,-1)),dp=x(()=>i("img",{class:"pr-4px",src:Ch},null,-1)),cp=x(()=>i("img",{class:"pr-4px",src:vh},null,-1)),up=x(()=>i("img",{class:"pr-4px",src:bh},null,-1)),mp=x(()=>i("img",{class:"pr-4px",src:kh},null,-1)),gp=x(()=>i("img",{class:"pr-4px",src:Lt},null,-1)),hp=x(()=>i("img",{class:"pr-4px",src:Zt},null,-1)),pp=x(()=>i("img",{class:"pr-4px",src:Zt},null,-1)),fp=x(()=>i("img",{class:"pr-4px",src:Eh},null,-1)),yp=x(()=>i("img",{class:"pr-4px",src:xt},null,-1)),Ap=x(()=>i("img",{class:"pr-4px",src:tt},null,-1)),_p=x(()=>i("img",{class:"pr-4px",src:tt},null,-1)),Cp=x(()=>i("img",{class:"pr-4px",src:wh},null,-1)),vp=x(()=>i("span",{class:"gray right"},"Ctrl+X",-1)),bp=x(()=>i("span",{class:"gray right"},"Ctrl+C",-1)),kp=x(()=>i("span",{class:"gray right"},"Ctrl+V",-1)),Ep=x(()=>i("span",{class:"gray right"},"Ctrl+D",-1)),wp=x(()=>i("span",null," Move Up ",-1)),Ip=x(()=>i("span",{class:"gray right"},"Alt+⭡",-1)),xp=[wp,Ip],Tp=x(()=>i("span",null," Move Down ",-1)),Sp=x(()=>i("span",{class:"gray right"},"Alt+⭣",-1)),Rp=[Tp,Sp],Vp={key:8},Fp=x(()=>i("span",null," Move To ",-1)),Np=x(()=>i("span",{class:"right"},"❯",-1)),Bp=["onClick"],Up=x(()=>i("img",{class:"pr-4px",src:Et},null,-1)),Pp={key:9},Op=x(()=>i("span",null," Scripts ",-1)),Lp=x(()=>i("span",{class:"right"},"❯",-1)),Qp=x(()=>i("img",{class:"pr-4px",src:Bn},null,-1)),Gp={key:0,class:"gray"},Dp=x(()=>i("img",{class:"w-12px pr-4px",src:Ih},null,-1)),qp=x(()=>i("span",{class:"gray right"},"Del",-1));function Kp(e,t,n,o,r,s){const c=N("EditorCollapsibleBox"),a=N("CatalogueEntry",!0),m=N("CatalogueLabel"),y=Nt,p=Kt,C=N("ContextMenu");return l(),d("div",{class:"item unselectable",onMouseup:t[42]||(t[42]=F((...A)=>s.debug&&s.debug(...A),["middle","stop"])),onContextmenu:t[43]||(t[43]=F((...A)=>s.contextmenu.show&&s.contextmenu.show(...A),["stop"]))},[n.item.editorTypeName==="catalogue"||n.item.editorTypeName==="gameSystem"?(l(),d(b,{key:0},[i("div",xh,[g(c,{depth:0,payload:s.catalogue,nobox:"",collapsible:!1},{title:I(()=>[Th,h(" "+f(s.catalogue.name)+" ",1),s.getNameExtra(s.catalogue)?(l(),d("span",Sh," "+f(s.getNameExtra(s.catalogue)),1)):u("",!0)]),content:I(()=>[]),_:1},8,["payload"])]),(l(!0),d(b,null,T(s.groupedCategories,A=>(l(),_(c,{key:A.type,depth:n.depth,altclickable:o.store.can_follow(n.item)||n.imported,onAltclick:s.onctrlclick,collapsible:A.items.length>0,payload:A.type,onContextmenu:F(R=>s.contextmenu.show(R,A.type),["stop"]),class:U([A.type,A.links,`depth-${n.depth}`]),nobox:"",defcollapsed:!s.should_be_open(A.type),path:[{key:A.type,index:0}]},{title:I(()=>[i("span",null,[i("span",Rh,[i("img",{class:"typeIcon",src:`assets/bsicons/${A.icon}`},null,8,Vh)]),h(" "+f(A.name),1)])]),content:I(()=>[s.should_be_grouped(A.type)?(l(!0),d(b,{key:0},T(s.display_groups(A.type,A.items),({label:R,type:K,items:E})=>(l(),_(m,{label:R,depth:n.depth+1,catalogue:s.catalogue,typeItem:K},{default:I(()=>[(l(!0),d(b,null,T(E,D=>(l(),_(a,{key:s.key(D.item),item:D.item,forceShowRecursive:s.forceShow,imported:D.imported,depth:n.depth+2,noType:"",grouped:""},null,8,["item","forceShowRecursive","imported","depth"]))),128))]),_:2},1032,["label","depth","catalogue","typeItem"]))),256)):(l(!0),d(b,{key:1},T(A.items,R=>(l(),_(a,{key:s.key(R.item),item:R.item,forceShowRecursive:s.forceShow,imported:R.imported,depth:n.depth+1},null,8,["item","forceShowRecursive","imported","depth"]))),128))]),_:2},1032,["depth","altclickable","onAltclick","collapsible","payload","onContextmenu","class","defcollapsed","path"]))),128))],64)):(l(),_(c,{key:1,depth:n.depth,altclickable:o.store.can_follow(n.item)||n.imported,onAltclick:s.onctrlclick,collapsible:s.mixedChildren&&s.mixedChildren.length>0,empty:!s.mixedChildren||s.mixedChildren.length==0,payload:n.item,class:U([n.item.parentKey,`depth-${n.depth}`]),defcollapsed:!r.open,nobox:""},{title:I(()=>[g(y,{item:n.item,imported:n.imported,highlight:n.item.highlight,grouped:n.grouped},null,8,["item","imported","highlight","grouped"])]),content:I(()=>[(l(!0),d(b,null,T(s.mixedChildren,A=>(l(),_(a,{key:s.key(A.item),item:A.item,forceShowRecursive:s.forceShow,imported:n.imported||A.imported,depth:n.depth+1},null,8,["item","forceShowRecursive","imported","depth"]))),128))]),_:1},8,["depth","altclickable","onAltclick","collapsible","empty","payload","class","defcollapsed"])),r.contextmenuopen?(l(),_(C,{key:2,modelValue:r.contextmenuopen,"onUpdate:modelValue":t[41]||(t[41]=A=>r.contextmenuopen=A),ref:"contextmenu"},{default:I(({payload:A})=>{var R,K,E,D,de,ce,re;return[!A&&n.item?(l(),d(b,{key:0},[o.store.can_follow(n.item)?(l(),d("div",{key:0,onClick:t[0]||(t[0]=w=>o.store.follow(s.link))},[h(" Follow "),s.link.target.getCatalogue()!==n.item.getCatalogue()?(l(),d("span",Fh,"  ["+f(((R=s.link.target.getCatalogue())==null?void 0:R.getName())||s.link.target.getName())+"] ",1)):u("",!0),Nh])):u("",!0),n.imported?(l(),d("div",{key:1,onClick:t[1]||(t[1]=w=>o.store.goto(n.item))},[h(" Goto "),i("span",Bh,"  ("+f((K=n.item.getCatalogue())==null?void 0:K.getName())+") ",1),Uh])):u("",!0),n.item.isProfile()&&n.item.typeId&&n.item.getCatalogue().findOptionById(n.item.typeId)?(l(),d("div",{key:2,onClick:t[2]||(t[2]=w=>o.store.goto(n.item.getCatalogue().findOptionById(n.item.typeId)))},[h(" Goto "+f(n.item.typeName)+" ",1),i("span",Ph,"  ["+f(n.item.getCatalogue().findOptionById(n.item.typeId).getCatalogue().getName())+"] ",1),Oh])):u("",!0),s.child&&o.store.can_goto(s.child)?(l(),d("div",{key:3,onClick:t[3]||(t[3]=w=>o.store.goto(s.child))},[h(" Goto "+f(s.child.getName())+" ",1),n.item.getCatalogue()!==s.child.getCatalogue()?(l(),d("span",Lh,"  ["+f(s.child.getCatalogue().getName())+"] ",1)):u("",!0),Qh])):u("",!0),(((E=n.item.refs)==null?void 0:E.length)??0)+(((D=n.item.other_refs)==null?void 0:D.length)??0)?(l(),d("div",{key:4,onClick:t[4]||(t[4]=w=>o.store.mode="references")}," References ("+f((((de=n.item.refs)==null?void 0:de.length)??0)+(((ce=n.item.other_refs)==null?void 0:ce.length)??0))+") ",1)):u("",!0),o.store.filter&&!n.item.showChildsInEditor?(l(),d("div",{key:5,onClick:t[5]||(t[5]=(...w)=>o.store.toggle_selections&&o.store.toggle_selections(...w))},[h(" Show All Childs"),Gh])):u("",!0),n.item.isLink()||n.item.refs||n.imported?(l(),_(p,{key:6})):u("",!0)],64)):u("",!0),A?(l(),d(b,{key:1},[i("div",{onClick:w=>o.store.create(A)},[i("img",{class:"pr-4px",src:`assets/bsicons/${s.getTypeName(A)}.png`},null,8,qh),h(" "+f(s.getTypeLabel(s.getTypeName(A))),1)],8,Dh),A==="selectionEntries"?(l(),d("div",{key:0,onClick:t[6]||(t[6]=w=>o.store.create("entryLinks",{type:"selectionEntry"}))},[i("img",{class:"pr-4px",src:"assets/bsicons/link.png"},null,8,Kh),h(" Link ")])):u("",!0),A==="rules"?(l(),d("div",{key:1,onClick:t[7]||(t[7]=w=>o.store.create("infoLinks",{type:"rule"}))},[i("img",{class:"pr-4px",src:"assets/bsicons/link.png"},null,8,Mh),h(" Link ")])):u("",!0),g(p)],64)):(l(),d(b,{key:2},[s.allowed("forceEntries")?(l(),d("div",{key:0,onClick:t[8]||(t[8]=w=>o.store.create("forceEntries"))},[Wh,h(" Force ")])):u("",!0),s.allowed("categoryLinks")&&n.item.isForce()?(l(),d("div",{key:1,onClick:t[9]||(t[9]=w=>o.store.create("categoryLinks"))},[Zh,h(" Category ")])):u("",!0),s.allowed(["forces","categoryLinks"])?(l(),_(p,{key:2})):u("",!0),s.allowed("selectionEntries")?(l(),d("div",{key:3,onClick:t[10]||(t[10]=w=>o.store.create("selectionEntries"))},[jh,h(" Entry ")])):u("",!0),s.allowed("selectionEntryGroups")?(l(),d("div",{key:4,onClick:t[11]||(t[11]=w=>o.store.create("selectionEntryGroups"))},[Yh,h(" Group ")])):u("",!0),s.allowed(["entryLinks","infoLinks","forceEntryLinks"])?(l(),d("div",{key:5,onClick:t[18]||(t[18]=w=>o.store.create("entryLinks",{type:"selectionEntry"}))},[Hh,h(" Link "),Xh,g(C,{id:"link_contextmenu"},{default:I(()=>[s.allowed("entryLinks")?(l(),d(b,{key:0},[i("div",{onClick:t[12]||(t[12]=w=>o.store.create("entryLinks",{type:"selectionEntry"}))},[zh,h(" Entry ")]),i("div",{onClick:t[13]||(t[13]=w=>o.store.create("entryLinks",{type:"selectionEntryGroup"}))},[Jh,h(" Group ")])],64)):u("",!0),s.allowed("infoLinks")?(l(),d(b,{key:1},[i("div",{onClick:t[14]||(t[14]=w=>o.store.create("infoLinks",{type:"profile"}))},[$h,h(" Profile ")]),i("div",{onClick:t[15]||(t[15]=w=>o.store.create("infoLinks",{type:"rule"}))},[ep,h(" Rule ")]),i("div",{onClick:t[16]||(t[16]=w=>o.store.create("infoLinks",{type:"infoGroup"}))},[tp,h(" InfoGroup ")])],64)):u("",!0),s.allowed("forceEntryLinks")?(l(),d("div",{key:2,onClick:t[17]||(t[17]=w=>o.store.create("forceEntryLinks"))},[np,h(" Force ")])):u("",!0)]),_:1})])):u("",!0),s.allowed(["selectionEntries","selectionEntryGroups","entryLinks"])?(l(),_(p,{key:6})):u("",!0),s.allowed("profiles")?(l(),d("div",{key:7,onClick:t[19]||(t[19]=w=>o.store.create_child("profiles",n.item))},[ip,h(" Profile "),s.profileTypes.length?(l(),d(b,{key:0},[sp,g(C,{id:"profile_contextmenu"},{default:I(()=>[(l(!0),d(b,null,T(s.profileTypes,w=>(l(),d("div",{onClick:ue=>o.store.create_child("profiles",n.item,{typeId:w.id,typeName:w.name})},[lp,i("span",null,f(w.getName()),1),s.getNameExtra(w)?(l(),d("span",ap,"  "+f(s.getNameExtra(w,!1)),1)):u("",!0)],8,op))),256))]),_:1})],64)):u("",!0)])):u("",!0),s.allowed("rules")?(l(),d("div",{key:8,onClick:t[20]||(t[20]=w=>o.store.create("rules"))},[rp,h(" Rule ")])):u("",!0),s.allowed("infoGroups")?(l(),d("div",{key:9,onClick:t[21]||(t[21]=w=>o.store.create("infoGroups"))},[dp,h(" Info Group ")])):u("",!0),s.allowed("associations")?(l(),d("div",{key:10,onClick:t[22]||(t[22]=w=>o.store.create("associations"))},[cp,h(" Association ")])):u("",!0),s.allowed(["profiles","rules","infoGroups","infoLinks"])?(l(),_(p,{key:11})):u("",!0),s.allowed("characteristicTypes")?(l(),d("div",{key:12,onClick:t[23]||(t[23]=w=>o.store.create("characteristicTypes"))},[up,h(" Characteristic Type ")])):u("",!0),s.allowed("attributeTypes")?(l(),d("div",{key:13,onClick:t[24]||(t[24]=w=>o.store.create("attributeTypes"))},[mp,h(" Attribute Type ")])):u("",!0),s.allowed(["attributeTypes","characteristicTypes"])?(l(),_(p,{key:14})):u("",!0),s.allowed("conditions")?(l(),d("div",{key:15,onClick:t[25]||(t[25]=w=>o.store.create("conditions"))},[gp,h(" Condition ")])):u("",!0),s.allowed("conditionGroups")?(l(),d("div",{key:16,onClick:t[26]||(t[26]=w=>o.store.create("conditionGroups"))},[hp,h(" Condition Group ")])):u("",!0),s.allowed("localConditionGroups")?(l(),d("div",{key:17,onClick:t[27]||(t[27]=w=>o.store.create("localConditionGroups"))},[pp,h(" Local Condition Group ")])):u("",!0),s.allowed("repeats")?(l(),d("div",{key:18,onClick:t[28]||(t[28]=w=>o.store.create("repeats"))},[fp,h(" Repeat ")])):u("",!0),s.allowed(["conditions","conditionGroups","repeats"])?(l(),_(p,{key:19})):u("",!0),s.allowed("constraints")?(l(),d("div",{key:20,onClick:t[29]||(t[29]=w=>o.store.create_child("constraints",n.item))},[yp,h(" Constraint ")])):u("",!0),s.allowed("modifiers")?(l(),d("div",{key:21,onClick:t[30]||(t[30]=w=>o.store.create("modifiers"))},[Ap,h(" Modifier ")])):u("",!0),n.item.editorTypeName==="constraint"&&n.item.parent?(l(),d("div",{key:22,onClick:t[31]||(t[31]=w=>o.store.create_child("modifiers",n.item.parent,{field:n.item.id,value:0}))},[_p,h(" Modifier ")])):u("",!0),s.allowed("modifierGroups")?(l(),d("div",{key:23,onClick:t[32]||(t[32]=w=>o.store.create("modifierGroups"))},[Cp,h(" Modifier Group ")])):u("",!0),s.allowed(["constraints","modifiers","modifierGroups"])||n.item.editorTypeName==="constraint"?(l(),_(p,{key:24})):u("",!0)],64)),A?u("",!0):(l(),d("div",{key:3,onClick:t[33]||(t[33]=(...w)=>o.store.cut&&o.store.cut(...w))},[h("Cut"),vp])),A?u("",!0):(l(),d("div",{key:4,onClick:t[34]||(t[34]=(...w)=>o.store.copy&&o.store.copy(...w))},[h("Copy"),bp])),i("div",{onClick:t[35]||(t[35]=(...w)=>o.store.paste&&o.store.paste(...w))},[h("Paste"),kp]),A?u("",!0):(l(),d("div",{key:5,onClick:t[36]||(t[36]=(...w)=>o.store.duplicate&&o.store.duplicate(...w))},[h("Duplicate"),Ep])),s.sortable(n.item.parent)?u("",!0):(l(),d("div",{key:6,onClick:t[37]||(t[37]=w=>o.store.move_up(n.item))},xp)),s.sortable(n.item.parent)?u("",!0):(l(),d("div",{key:7,onClick:t[38]||(t[38]=w=>o.store.move_down(n.item))},Rp)),!A&&((re=o.store.get_move_targets(n.item))!=null&&re.length)?(l(),d("div",Vp,[Fp,Np,g(C,{id:"moveto_contextmenu"},{default:I(()=>[(l(!0),d(b,null,T(o.store.get_move_targets(n.item),w=>(l(),d("div",{onClick:ue=>o.store.move(n.item,s.catalogue,w.target,w.type)},[Up,h(" "+f(w.target.name)+" - "+f(w.type),1)],8,Bp))),256))]),_:1})])):u("",!0),!A&&o.store.get_context_actions().length?(l(),d("div",Pp,[Op,Lp,g(C,{id:"moveto_contextmenu"},{default:I(()=>[(l(!0),d(b,null,T(o.store.get_context_actions(),w=>(l(),d("div",null,[Qp,h(" "+f(w),1)]))),256))]),_:1})])):u("",!0),n.item.parentKey==="sharedSelectionEntries"?(l(),d("div",{key:10,onClick:t[39]||(t[39]=w=>o.store.create_child("entryLinks",s.catalogue,{targetId:n.item.id,type:"selectionEntry",name:n.item.getName()}))},[h(" Add Root Link"),s.hasRootLink(s.catalogue,n.item)?(l(),d("span",Gp," (already has one)")):u("",!0)])):u("",!0),A?u("",!0):(l(),_(p,{key:11})),A?u("",!0):(l(),d("div",{key:12,onClick:t[40]||(t[40]=w=>o.store.remove())},[Dp,h("Remove"),qp]))]}),_:1},8,["modelValue"])):u("",!0)],32)}const Mp=v(rh,[["render",Kp],["__scopeId","data-v-b9f3b66e"]]),Wp=X({emits:["scrolltop"],setup(){return{store:G(),uistate:Ve(),settings:Z()}},data(){return{...In,...this.defaults,shouldScrollTo:void 0,shouldScrollToElement:void 0}},async mounted(){this.load(),addEventListener("keydown",this.keydown),addEventListener("copy",this.copy),addEventListener("paste",this.paste),addEventListener("cut",this.cut)},unmounted(){removeEventListener("keydown",this.keydown),removeEventListener("copy",this.copy),removeEventListener("paste",this.paste),removeEventListener("cut",this.cut)},props:{catalogue:{type:Object,required:!0},defaults:{type:Object,default:{}}},methods:{onscroll(e){this.scroll=e.target.scrollTop},load(){this.$nextTick(async()=>{if(this.shouldScrollTo=this.scroll,this.selection)try{let e=bt(this.catalogue,this.selection);const t=this.selection[this.selection.length-1];if(!e&&t.id&&(e=this.catalogue.findOptionById(t.id)),e){const n=await this.store.open(e);n&&(await We(n).do_select(),this.store.mode=this.defaults.mode,this.shouldScrollToElement=n)}}catch(e){console.error(e)}})},async set_scroll(e){const t=this.$refs.scrollable;t&&(t.scrollTop=e,t.scrollLeft=0),this.$nextTick(async()=>{const n=this.$refs.scrollable;n&&(n.scrollTop=e,n.scrollLeft=0)})},async scroll_to(e){this.store.scroll_to_el(e),this.$nextTick(async()=>{this.store.scroll_to_el(e)})},should_capture_copy(e){var t,n;return!((t=document==null?void 0:document.activeElement)!=null&&t.isContentEditable||document.getElementsByClassName("veil").length||(n=getSelection())!=null&&n.toString())},should_capture_paste(e){var o,r,s,c;if(document.getElementsByClassName("veil").length)return!1;const t=(((o=e.target)==null?void 0:o.tagName)||"").toLowerCase();if(["input"].includes(t))return!1;const n=(((r=document==null?void 0:document.activeElement)==null?void 0:r.tagName)||"").toLowerCase();return!(["input"].includes(n)||(s=e.target)!=null&&s.isContentEditable||(c=document==null?void 0:document.activeElement)!=null&&c.isContentEditable||this.$route.name!=="catalogue")},async cut(e){this.should_capture_copy(e)&&(e.preventDefault(),await this.store.cut(e))},async copy(e){this.should_capture_copy(e)&&(e.preventDefault(),await this.store.copy(e))},async paste(e){this.should_capture_paste(e)&&(e.preventDefault(),await this.store.paste(e))},async keydown(e){var o,r;if(this.$route.name!=="catalogue"||!e.target)return;const t=(r=(o=e.target)==null?void 0:o.tagName)==null?void 0:r.toLowerCase(),n=e.key.toLowerCase();e.ctrlKey&&n==="f"&&(e.preventDefault(),this.$refs["editor-searchbox"].focus()),n==="escape"&&(this.$refs["editor-searchbox"].blur(),this.store.filter="",this.store.update_catalogue_search(this.catalogue,this.filterData)),t==="body"&&(n===" "&&(e.preventDefault(),this.store.toggle_selections()),e.ctrlKey&&n==="z"&&(e.preventDefault(),await this.store.undo()),e.ctrlKey&&n==="y"&&(e.preventDefault(),await this.store.redo()),e.ctrlKey&&n==="d"&&(e.preventDefault(),await this.store.duplicate()),e.ctrlKey&&n==="l"&&(e.preventDefault(),await this.store.pasteLink()),e.altKey&&n==="arrowdown"&&(e.preventDefault(),this.store.get_sorted_selections().reverse().filter(s=>!this.store.sortable(s)).forEach(s=>this.store.move_down(s))),e.altKey&&n==="arrowup"&&(e.preventDefault(),this.store.get_sorted_selections().filter(s=>!this.store.sortable(s)).forEach(s=>this.store.move_up(s))),n==="delete"&&(e.preventDefault(),await this.store.remove()))},async update(e){return this.store.update_catalogue_search(this.catalogue,e)}},computed:{filterData(){return{filter:this.filter.trim(),ignoreProfilesRules:this.ignoreProfilesRules}}},watch:{filterData:{handler(e){this.update(e)},immediate:!0},showImported:{immediate:!0,handler(e){e&&this.catalogue.imports.map(t=>t.processForEditor())}},shouldScrollTo(e){e!==void 0&&this.$nextTick(()=>{delete this.shouldScrollTo,this.set_scroll(e)})},shouldScrollToElement(e){e!==void 0&&this.$nextTick(()=>{delete this.shouldScrollTo,this.scroll_to(e)})}}}),Zp=""+globalThis.__publicAssetsURL("assets/icons/undo.svg"),jp=""+globalThis.__publicAssetsURL("assets/icons/redo.svg"),Yp=""+globalThis.__publicAssetsURL("assets/icons/vertical-alignment-24.png"),Hp=""+new URL("collapse-all.40557dca.svg",import.meta.url).href;const J=e=>(O("data-v-51bcab25"),e=e(),L(),e),Xp={class:"leftPanel"},zp={class:"static sticky flex items-center h-28px z-1000"},Jp=J(()=>i("img",{title:"Undo",class:"max-w-24px max-h-28px align-bottom",src:Zp},null,-1)),$p=[Jp],ef=J(()=>i("img",{title:"Redo",class:"max-w-24px max-h-28px align-bottom",src:jp},null,-1)),tf=[ef],nf={class:"absolute right-60px"},sf=J(()=>i("option",{value:"none"},"No Sorting ",-1)),of=J(()=>i("option",{value:"asc"},"Ascending ",-1)),lf=J(()=>i("option",{value:"desc"},"Descending ",-1)),af=J(()=>i("option",{value:"type"},"Type",-1)),rf=[sf,of,lf,af],df=J(()=>i("img",{title:"Goto Selected",src:Yp},null,-1)),cf=[df],uf=J(()=>i("img",{title:"Collapse All",src:Hp},null,-1)),mf=[uf],gf={class:"bottom static"},hf={key:0},pf=J(()=>i("label",{class:"unselectable cursor-pointer",for:"showimport"},"Show Imported",-1)),ff=J(()=>i("span",null,"  ",-1)),yf={class:"absolute right-5px"},Af=J(()=>i("label",{class:"unselectable cursor-pointer",for:"ignoreProfilesRules"},"Ignore Profiles/Rules",-1));function _f(e,t,n,o,r,s){const c=Fe,a=Mp;return l(),d("div",Xp,[i("div",zp,[i("span",{class:U([{grey:!e.store.can_back(),"cursor-pointer":e.store.can_back(),"hover-darken":e.store.can_back()},"bold p-4px unselectable icon"]),onClick:t[0]||(t[0]=(...m)=>e.store.back&&e.store.back(...m)),title:"Back"}," 🡰 ",2),i("span",{class:U([{grey:!e.store.can_forward(),"cursor-pointer":e.store.can_forward(),"hover-darken":e.store.can_forward()},"bold p-4px unselectable ml-4px icon"]),onClick:t[1]||(t[1]=(...m)=>e.store.forward&&e.store.forward(...m)),title:"Forward"}," 🡲 ",2),i("span",{class:U([{grey:!e.store.can_undo(),"cursor-pointer":e.store.can_undo(),"hover-darken":e.store.can_undo()},"bold unselectable ml-5px imgBt"]),onClick:t[2]||(t[2]=(...m)=>e.store.undo&&e.store.undo(...m))},$p,2),i("span",{class:U([{grey:!e.store.can_redo(),"cursor-pointer":e.store.can_redo(),"hover-darken":e.store.can_redo()},"bold unselectable ml-4px imgBt"]),onClick:t[3]||(t[3]=(...m)=>e.store.redo&&e.store.redo(...m))},tf,2),i("div",nf,[h(" Sort "),k(i("select",{class:"h-24px p-2px !text-sm","onUpdate:modelValue":t[4]||(t[4]=m=>e.settings.sort=m)},rf,512),[[W,e.settings.sort]])]),i("span",{onClick:t[5]||(t[5]=m=>e.store.goto(e.store.get_selected())),class:"align-middle absolute h-20px p-2px hover-darken cursor-pointer imgBt right-30px"},cf),i("span",{onClick:t[6]||(t[6]=(...m)=>e.uistate.collapse_all&&e.uistate.collapse_all(...m)),class:"align-middle absolute right-0 p-2px hover-darken cursor-pointer imgBt"},mf),g(c,{errors:e.catalogue.errors,showNumber:"",clickable:"",class:"z-1"},null,8,["errors"])]),i("div",{class:"top rightborder scrollable",ref:"scrollable",onScroll:t[7]||(t[7]=(...m)=>e.onscroll&&e.onscroll(...m)),onKeydownCapture:t[8]||(t[8]=(...m)=>e.keydown&&e.keydown(...m))},[g(a,{class:"mb-40px w-full",item:e.catalogue,grouped:"",id:"editor-entries",showImported:e.showImported},null,8,["item","showImported"])],544),i("div",gf,[e.catalogue.isGameSystem()?u("",!0):(l(),d("span",hf,[k(i("input",{class:"cursor-pointer","onUpdate:modelValue":t[9]||(t[9]=m=>e.showImported=m),type:"checkbox",id:"showimport"},null,512),[[P,e.showImported]]),pf])),ff,i("span",yf,[k(i("input",{class:"cursor-pointer","onUpdate:modelValue":t[10]||(t[10]=m=>e.ignoreProfilesRules=m),type:"checkbox",id:"ignoreProfilesRules"},null,512),[[P,e.ignoreProfilesRules]]),Af]),k(i("input",{"onUpdate:modelValue":t[11]||(t[11]=m=>e.filter=m),ref:"editor-searchbox",type:"search",placeholder:"search... ctrl+f",class:"w-full"},null,512),[[S,e.filter]])])])}const Cf=v(Wp,[["render",_f],["__scopeId","data-v-51bcab25"]]),vf=X({components:{LeftPanel:Cf},data(){return{error:null,item:null,systemFiles:null,loading:!1,loading_all:!1,loading_progress:0,loading_progress_max:0,loading_progress_msg:"",initial:!0,saving:!1,failed:!1,id:"",cat:null,defaults:{},key:1,route:null}},setup(){return{cataloguesStore:xn(),store:G(),uistate:Ve()}},mounted(){this.store.init(this),globalThis.$catalogue=this.cat,window.addEventListener("beforeunload",this.beforeUnload),document.addEventListener("keydown",this.onKeydown,!0)},updated(){this.store.init(this),globalThis.$catalogue=this.cat},unmounted(){window.removeEventListener("beforeunload",this.beforeUnload),document.removeEventListener("keydown",this.onKeydown,!0)},activated(){window.addEventListener("beforeunload",this.beforeUnload)},deactivated(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteUpdate(){this.id&&this.store.save_state()},beforeRouteLeave(){this.id&&this.store.save_state()},beforeRouteEnter(){},computed:{has_unsaved_changes(){var t;const e=this.store.unsavedChanges;for(const n in e){const o=e[n];if(!(this.cat&&!n.includes((t=this.cat)==null?void 0:t.getSystemId()))&&o.unsaved)return!0}return!1},self_or_imports_changed(){var e,t;return this.file_changed(this.cat)||((t=(e=this.cat)==null?void 0:e.imports)==null?void 0:t.find(n=>this.file_changed(n)))},changed(){var e;return this.cat&&((e=this.store.get_catalogue_state(this.cat))==null?void 0:e.changed)||!1},unsaved(){var e;return this.cat&&((e=this.store.get_catalogue_state(this.cat))==null?void 0:e.unsaved)||!1},query(){return{gameSystemId:this.$route.query.systemId,catalogueId:this.$route.query.id||this.$route.query.systemId}},route_is_catalogue(){return this.$route.name==="catalogue"}},watch:{query:{async handler(e){var o;if(!this.route_is_catalogue)return;JSON.stringify(e)===JSON.stringify(this.route)&&this.$nextTick(()=>{this.store.$nextTickResolve&&this.store.$nextTickResolve()}),this.route=e;const{gameSystemId:t,catalogueId:n}=e;this.id=n||t,this.store.unselect();try{await this.load(t,this.id),(o=this.systemFiles)==null||o.loadAll(),this.error=null,this.$nextTick(()=>{this.store.$nextTickResolve&&this.store.$nextTickResolve()})}catch(r){console.error(r),this.error=r}},immediate:!0}},methods:{file_changed(e){return this.store.get_catalogue_state(e).isChangedOnDisk},async load_all(){if(this.systemFiles)try{this.loading_all=!0,await new Promise(e=>setTimeout(e,0)),await this.systemFiles.loadAll(async(e,t,n)=>{this.loading_progress=e,this.loading_progress_max=t,this.loading_progress_msg=n??"",await new Promise(o=>setTimeout(o,0))}),this.loading_progress=0,this.loading_progress_max=0,this.loading_progress_msg=""}catch(e){console.error(e)}finally{this.loading_all=!0}},async save_all(){var e;try{this.failed=await this.store.save_all((e=this.cat)==null?void 0:e.getSystemId())}finally{this.saving=!1}},async save(){try{const e=await this.store.prompt_revision(this.cat);await this.store.save_catalogue(this.systemFiles,this.cat,e)&&notify("Incremented 1 catalogue's revision"),this.failed=!1}catch{this.failed=!0}},async test(){var e;if(!((e=this.systemFiles)!=null&&e.github)){console.error("no github set");return}console.log("revision",await Tn(this.systemFiles.github,this.cat))},async beforeUnload(e){if(!globalThis._closeWindow&&(this.loading||this.store.save_state(),this.unsaved||this.store.unsavedCount)){const t="You have unsaved changes that will be lost";return e.returnValue=t,electron&&setTimeout(async()=>{await Sn({message:"You have unsaved changes that will be lost?",buttons:["Cancel","Leave"],defaultId:0,cancelId:0,type:"question"})===1&&(globalThis._closeWindow=!0,Rn())}),!1}},onKeydown(e){e.ctrlKey&&e.key.toLowerCase()=="s"&&(e.preventDefault(),e.stopPropagation(),this.save())},load_state(e){this.defaults=e},async load(e,t){if(!t&&!e)throw new Error("couldn't load catalogue: no id");try{this.loading=!0,this.initial&&(await new Promise(r=>setTimeout(r,10)),this.initial=!1);const{system:n,catalogue:o}=await this.store.open_catalogue(e,t);if(this.systemFiles=n,this.cat=o,o){o.opened=!0;const r=this.uistate.get_data(o.id);this.load_state(r)}}finally{this.loading=!1}}}});const bf={class:"h-full"},kf={key:0},Ef={class:"ml-10px"},wf={key:0,class:"inline",style:{"vertical-align":"-2px"},title:`This file or one of it's dependencies was changed by another program. 
You may want to reload the system through the Systems tab`,src:Fn},If={class:"text-slate-300"},xf={key:1,class:"status mx-2 text-red"},Tf={key:2,class:"status mx-2"},Sf={key:0};function Rf(e,t,n,o,r,s){const c=On,a=Ln,m=Vn,y=N("LeftPanel"),p=Qg,C=Nn;return l(),d("div",bf,[g(a,null,{default:I(()=>[g(c,null,{default:I(()=>{var A;return[h(f(e.loading?"Loading...":[(A=e.cat)==null?void 0:A.getName(),"NR-Editor"].filter(R=>R).join(" - ")),1)]}),_:1})]),_:1}),e.error?(l(),d("span",kf,f(e.error),1)):e.loading?(l(),_(m,{key:1,progress:e.loading_progress,progress_max:e.loading_progress_max,progress_msg:e.loading_progress_msg},null,8,["progress","progress_max","progress_msg"])):e.cat?(l(),_(C,{key:2,class:"h-full",draggable:"",showMiddle:"",id:"catalogueView"},{left:I(()=>[(l(),_(y,{ref:"leftpanel",class:"h-full",catalogue:e.cat,defaults:e.defaults,key:e.key,keepalive:""},null,8,["catalogue","defaults"]))]),middle:I(()=>[e.store.selectedItem!=null?(l(),_(p,{key:0,catalogue:e.cat},null,8,["catalogue"])):u("",!0)]),_:1})):u("",!0),e.cat&&e.route_is_catalogue?(l(),_(At,{key:3,to:"#titlebar-content"},[i("span",Ef,[h(" Editing "),e.self_or_imports_changed?(l(),d("img",wf)):u("",!0),h(" "+f(e.cat.name)+" ",1),i("span",If,"v"+f(e.cat.revision),1)]),e.has_unsaved_changes?(l(),d("button",{key:0,class:"bouton save ml-10px",onClick:t[0]||(t[0]=(...A)=>e.save_all&&e.save_all(...A))}," Save All ")):e.failed?(l(),d("span",xf,"failed to save")):(l(),d("span",Tf,"saved")),e.systemFiles&&!e.systemFiles.allLoaded?(l(),d("button",{key:3,class:"bouton load ml-10px",onClick:t[1]||(t[1]=(...A)=>e.load_all&&e.load_all(...A))},[h("Load all "),e.loading_all?(l(),d("span",Sf,"("+f(e.loading_progress)+" / "+f(e.loading_progress_max)+")",1)):u("",!0)])):u("",!0)])):u("",!0)])}const Lf=v(vf,[["render",Rf],["__scopeId","data-v-c4811983"]]);export{Lf as default};
//# sourceMappingURL=catalogue.97233d65.js.map
