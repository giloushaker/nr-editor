{"version":3,"file":"editorStore.682693c3.js","sources":["../../../../assets/shared/battlescribe/exactly_constraints.ts","../../../../assets/shared/battlescribe/bs_main.ts","../../../../assets/shared/battlescribe/bs_condition.ts","../../../../assets/shared/battlescribe/bs_modifiers.ts","../../../../assets/shared/battlescribe/bs_main_catalogue.ts","../../../../node_modules/unzipit/dist/unzipit.module.js","../../../../node_modules/fast-xml-parser/src/util.js","../../../../node_modules/fast-xml-parser/src/validator.js","../../../../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","../../../../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","../../../../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","../../../../node_modules/strnum/strnum.js","../../../../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","../../../../node_modules/fast-xml-parser/src/xmlparser/node2json.js","../../../../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","../../../../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","../../../../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","../../../../node_modules/fast-xml-parser/src/fxp.js","../../../../assets/shared/battlescribe/entries.ts","../../../../assets/shared/battlescribe/bs_convert.ts","../../../../assets/shared/battlescribe/bs_editor.ts","../../../../assets/shared/battlescribe/bs_main_types.ts","../../../../stores/cataloguesState.ts","../../../../electron/node_helpers.ts","../../../../components/catalogue/left_panel/LeftPanelDefaults.ts","../../../../stores/editorUIState.ts","../../../../node_modules/dexie/dist/modern/dexie.min.mjs","../../../../assets/shared/battlescribe/cataloguesdexie.ts","../../../../assets/shared/battlescribe/github.ts","../../../../assets/shared/battlescribe/bs_versioning.ts","../../../../assets/shared/battlescribe/bs_load_data.ts","../../../../assets/shared/battlescribe/bs_system.ts","../../../../assets/shared/battlescribe/local_game_system.ts","../../../../stores/editorStore.ts"],"sourcesContent":["import { copy } from \"./bs_helpers\";\nimport { BSIConstraint, BSIModifier, BSIModifierGroup } from \"./bs_types\";\n\nexport function splitExactlyConstraints(obj: { constraints?: BSIConstraint[] }) {\n  if (!obj.constraints) return obj;\n  const constraints = [];\n  for (const constraint of obj.constraints) {\n    if (constraint.type === \"exactly\") {\n      const min = { ...constraint, id: constraint.id + \"-min\", type: \"min\" } as BSIConstraint;\n      const max = { ...constraint, id: constraint.id + \"-max\", type: \"max\" } as BSIConstraint;\n      constraints.push(min, max);\n    } else {\n      constraints.push(constraint);\n    }\n  }\n  const result = copy(obj);\n  result.constraints = constraints;\n  return result;\n}\n// recursively Split all modifiers wich affected an `exactly` constraint to affect its generated min & max constraints.\nexport function splitExactlyConstraintsModifiers<T>(\n  obj: T & {\n    modifiers?: BSIModifier[];\n    modifierGroups?: BSIModifierGroup[];\n    constraintsIterator(): Iterable<BSIConstraint>;\n  }\n): T {\n  if (!obj.modifiers && !obj.modifierGroups) return obj;\n  if (!obj.constraintsIterator) return obj;\n  // Find all exactly constraints wich we need to find modifiers for\n  const constraints = {} as Record<string, BSIConstraint>;\n  for (const constraint of obj.constraintsIterator()) {\n    if (constraint.type === \"exactly\") {\n      constraints[constraint.id] = constraint;\n    }\n  }\n\n  // Return a new modifiers array with the modifiers split\n  function splitModifiers(modifiers: BSIModifier[]) {\n    // if modifier points to exactly constraint, split it\n    // and set the cloned modifiers to be returned as copy\n\n    const out_modifiers = [] as BSIModifier[];\n    for (const modifier of modifiers) {\n      if (modifier.field in constraints) {\n        const min = { ...modifier, field: modifier.field + \"-min\" } as BSIModifier;\n        const max = { ...modifier, field: modifier.field + \"-max\" } as BSIModifier;\n        out_modifiers.push(min, max);\n      } else {\n        out_modifiers.push(modifier);\n      }\n    }\n    return out_modifiers;\n  }\n\n  function splitModifierGroups(modifierGroups: BSIModifierGroup[]) {\n    const out_group = [] as BSIModifierGroup[];\n    for (const group of modifierGroups) {\n      const split = { ...group } as BSIModifierGroup;\n      if (split.modifiers) {\n        split.modifiers = splitModifiers(split.modifiers);\n      }\n      if (split.modifierGroups) {\n        split.modifierGroups = splitModifierGroups(split.modifierGroups);\n      }\n      out_group.push(split);\n    }\n    return out_group;\n  }\n\n  const result = copy(obj);\n\n  if (result.modifiers) {\n    result.modifiers = splitModifiers(result.modifiers);\n  }\n  if (result.modifierGroups) {\n    result.modifierGroups = splitModifierGroups(result.modifierGroups);\n  }\n  return result;\n}\n","import type {\n  BSIModifier,\n  BSIModifierGroup,\n  BSIConstraint,\n  BSIProfile,\n  BSIRule,\n  BSICost,\n  BSIPublication,\n  BSINamed,\n  BSIProfileType,\n  BSICatalogue,\n  BSICharacteristic,\n  BSICondition,\n  BSIConditionGroup,\n  BSIRepeat,\n  BSICharacteristicType,\n  BSIData,\n  BSIGameSystem,\n  NRAssociation,\n  AssociationConstraint,\n  BSIModifierType,\n} from \"./bs_types\";\nimport type { EditorBase, Catalogue } from \"./bs_main_catalogue\";\nimport { clone, isObject } from \"./bs_helpers\";\nimport { splitExactlyConstraints } from \"./exactly_constraints\";\nimport { splitExactlyConstraintsModifiers } from \"./exactly_constraints\";\n\nconst isNonEmptyIfHasOneOf = [\n  \"modifiers\",\n  \"modifierGroups\",\n  \"constraints\",\n\n  \"entryLinks\",\n  \"categoryLinks\",\n  \"selectionEntries\",\n  \"selectionEntryGroups\",\n\n  \"infoLinks\",\n  \"infoGroups\",\n  \"rules\",\n  \"profiles\",\n];\nexport interface BSModifierBase {\n  modifiers?: BSIModifier[];\n  modifierGroups?: BSIModifierGroup[];\n}\n\nconst arrayKeys = [\n  \"profile\",\n  \"rule\",\n  \"infoLink\",\n  \"infoGroup\",\n  \"selectionEntry\",\n  \"selectionEntryGroup\",\n  \"entryLink\",\n\n  \"profiles\",\n  \"rules\",\n  \"infoLinks\",\n  \"infoGroups\",\n  \"entryLinks\",\n  \"selectionEntries\",\n  \"selectionEntryLinks\",\n  \"selectionEntryGroups\",\n\n  \"categoryLinks\",\n  \"costTypes\",\n  \"profileTypes\",\n  \"characteristicTypes\",\n  \"categoryEntries\",\n  \"categories\",\n  \"forceEntries\",\n  \"forces\",\n  \"sharedSelectionEntries\",\n  \"sharedSelectionEntryGroups\",\n  \"sharedProfiles\",\n  \"sharedRules\",\n  \"sharedInfoGroups\",\n  \"rules\",\n  \"rootRules\",\n\n  \"publications\",\n  \"catalogueLinks\",\n  \"constraints\",\n\n  \"characteristics\",\n  \"costs\",\n];\n\nconst arrayKeysWithoutId = [\"conditions\", \"conditionGroups\", \"modifiers\", \"modifierGroups\", \"repeats\"];\nexport const goodKeys = new Set([...arrayKeys, ...arrayKeysWithoutId]);\nexport const goodKeysWiki = new Set(arrayKeys);\nexport function getDataObject(data: BSIData | Catalogue): BSIGameSystem | BSICatalogue {\n  if ((data as Catalogue).isCatalogue && (data as Catalogue).isCatalogue()) {\n    return data as BSICatalogue;\n  }\n  if ((data as BSIData).gameSystem) return (data as BSIData).gameSystem!;\n  if ((data as BSIData).catalogue) return (data as BSIData).catalogue!;\n  throw Error(\"getDataObject data argument is not a valid system or catalogue\");\n}\n\nexport function getDataDbId(data: BSIData | Catalogue): string {\n  if ((data as Catalogue).isCatalogue && (data as Catalogue).isCatalogue()) {\n    if (data.id && data.gameSystemId) {\n      return `${data.gameSystemId}-${data.id}`;\n    }\n    if (data.id) {\n      return `${data.id}`;\n    }\n  }\n  if (data.catalogue) {\n    return `${data.catalogue.gameSystemId}-${data.catalogue.id}`;\n  }\n  if (data.gameSystem) {\n    return data.gameSystem.id;\n  }\n  throw Error(\"getDataId data argument is not a valid system or catalogue\");\n}\n/**\n * This is a base class with generic functions for all nodes in the BSData xml/json\n * Usage: Add it as a prototype on the json to use the functions with Object.setPrototypeOf\n */\nexport class Base implements BSModifierBase {\n  // Data\n  id!: string;\n  type?: string;\n  subType?: \"mount\" | \"crew\";\n  shared?: boolean;\n  import?: boolean;\n  collective?: boolean;\n  comment?: string;\n  publicationId!: string;\n  typeName?: string;\n  typeId?: string;\n  categoryEntryId?: string; // Legacy categories\n\n  // Data - Modifiable\n  name!: string;\n  hidden!: boolean;\n  value?: number | string | boolean;\n  page?: string;\n  defaultAmount?: number;\n\n  profiles?: Profile[];\n  rules?: Rule[];\n  infoLinks?: InfoLink[];\n  infoGroups?: InfoGroup[];\n  publications?: BSIPublication[];\n  costs?: BSICost[];\n\n  // Childs\n  selectionEntries?: Entry[];\n  selectionEntryGroups?: Group[];\n  entryLinks?: Link[];\n  profileTypes?: BSIProfileType[];\n  categoryEntries?: Category[];\n  categoryLinks?: CategoryLink[];\n  forceEntries?: Force[];\n  sharedSelectionEntryGroups?: Group[];\n  sharedSelectionEntries?: Entry[];\n  sharedProfiles?: Profile[];\n  sharedRules?: Rule[];\n  sharedInfoGroups?: InfoGroup[];\n  target?: Base;\n\n  // Modifiers\n  modifiers?: BSIModifier[];\n  modifierGroups?: BSIModifierGroup[];\n  constraints?: BSIConstraint[];\n  repeats?: BSIRepeat[];\n  conditions?: BSICondition[];\n  conditionGroups?: BSIConditionGroup[];\n\n  // Processed (Catalogue)\n  catalogue!: Catalogue; // Parent Catalogue\n  extra_constraints?: BSIExtraConstraint[];\n  childs!: Base[];\n\n  // Processed (self)\n  loaded?: boolean;\n  collective_recursive?: boolean;\n  limited_to_one?: boolean;\n\n  // NR Only\n  associations?: NRAssociation[];\n  associationConstraints?: AssociationConstraint[];\n  flatten?: boolean;\n  collapsible?: boolean;\n  sortIndex?: number;\n\n  constructor(json: any) {\n    return Object.setPrototypeOf(json, Object.getPrototypeOf(this));\n  }\n  get url(): string {\n    return \"%{main_catalogue|catalogue}/%{id}/%{getName}\";\n  }\n\n  process() {\n    if (this.loaded) return;\n    this.collective_recursive = this.isCollectiveRecursive();\n    this.limited_to_one = !this.canAmountBeAbove1();\n    this.loaded = true;\n  }\n  toJson() {\n    return entryToJson(this);\n  }\n  getCatalogue() {\n    return this.catalogue;\n  }\n  getGameSystem() {\n    return this.getCatalogue().getGameSystem();\n  }\n  // Prevent Vue Observers\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return (globalThis as any).isEditor ? \"Object\" : \"ObjectNoObserve\";\n  }\n  isGroup(): this is Group | Link<Group> {\n    return false;\n  }\n  isForce(): this is Force {\n    return false;\n  }\n  isCatalogue(): this is Catalogue {\n    return false;\n  }\n  isLink(): this is Link {\n    return false;\n  }\n  isCategory(): this is Category {\n    return false;\n  }\n  isRoster(): boolean {\n    return false;\n  }\n  isQuantifiable(): boolean {\n    return false;\n  }\n  isEntry(): this is Entry {\n    return false;\n  }\n  isIdUnique() {\n    return false;\n  }\n  isRule(): this is Rule | InfoLink<Rule> {\n    return false;\n  }\n  isProfile(): this is Profile | InfoLink<Profile> {\n    return false;\n  }\n  isInfoGroup(): this is InfoGroup | InfoLink<InfoGroup> {\n    return false;\n  }\n  isUnit(): boolean {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return true;\n    }\n    return false;\n  }\n  getId(): string {\n    return this.id;\n  }\n  getType(): string | undefined {\n    return this.subType ?? this.type;\n  }\n  getTypeName(): string | undefined {\n    return this.typeName;\n  }\n  getCategoryEntryId(): string | undefined {\n    return this.categoryEntryId;\n  }\n  getHidden(): boolean | undefined {\n    return this.hidden;\n  }\n  getPage(): string | undefined {\n    return this.page;\n  }\n  getName(): string {\n    return this.name;\n  }\n  getDefaultAmount(): number | undefined {\n    return this.defaultAmount;\n  }\n  isCollective(): boolean | undefined {\n    return this.collective;\n  }\n  isCollectiveRecursive() {\n    const stack = [...this.selectionsIterator()];\n    while (stack.length) {\n      const current = stack.pop()!;\n      if (!current.isCollective() && !current.isGroup()) return false;\n      stack.push(...current.selectionsIterator());\n    }\n    return true;\n  }\n  isEmptyNode(): boolean {\n    for (const key of isNonEmptyIfHasOneOf) {\n      if ((this as any)[key] !== undefined) return false;\n    }\n    return true;\n  }\n  *forcesIterator(): Iterable<Force> {\n    return;\n  }\n  *associationsIterator(): Iterable<NRAssociation> {\n    if (this.associations) {\n      yield* this.associations;\n    }\n  }\n  *profilesIterator(): Iterable<Profile> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.profiles) {\n        yield* group.profiles;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"profile\").map((o) => o.target as Profile);\n      }\n    }\n  }\n  *rulesIterator(): Iterable<Rule> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.rules) {\n        yield* group.rules;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"rule\").map((o) => o.target as Rule);\n      }\n    }\n  }\n  *constraintsIterator(): Iterable<BSIConstraint> {\n    if (this.constraints) yield* this.constraints;\n  }\n  *extraConstraintsIterator(): Iterable<BSIExtraConstraint> {\n    if (this.extra_constraints) yield* this.extra_constraints;\n  }\n  *modifierGroupsIterator(): Iterable<BSIModifierGroup> {\n    if (this.modifierGroups) yield* this.modifierGroups;\n  }\n  *modifiersIterator(): Iterable<BSIModifier> {\n    if (this.modifiers) yield* this.modifiers;\n  }\n  *modifierGroupsIteratorRecursive(): Iterable<BSIModifierGroup> {\n    yield this;\n    if (this.isLink()) yield this.target;\n    for (const group of this.modifierGroupsIterator()) {\n      yield group;\n      yield* iterateModifierGroupsRecursive(group.modifierGroups);\n    }\n  }\n  *selectionsIterator(): Iterable<Base | Link> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *localSelectionsIterator(): Iterable<Base | Link> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *nodesIterator(): Iterable<Base | Link> {\n    if (this.isLink()) yield* this.target.nodesIterator();\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *entriesIterator(): Iterable<Base | Link> {\n    if (this.isLink()) yield* this.target.entriesIterator();\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.childs) yield* this.childs;\n  }\n\n  *iterateSelectionEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n  }\n\n  *iterateSelectionEntriesWithRoot(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n  }\n\n  *iterateRootEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n\n  *iterateAllRootEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n\n  *categoryLinksIterator(): Iterable<CategoryLink> {\n    if (this.categoryLinks) yield* this.categoryLinks;\n  }\n  *infoLinksIterator(): Iterable<InfoLink> {\n    if (this.infoLinks) yield* this.infoLinks;\n  }\n  *infoGroupsIterator(): Iterable<InfoGroup> {\n    if (this.infoGroups) yield* this.infoGroups;\n  }\n  *infoRulesIterator(): Iterable<Rule> {\n    if (this.isForce()) {\n      const gst = this.getGameSystem();\n      if (gst.rules) {\n        yield* gst.rules;\n      }\n      const cat = this.main_catalogue;\n      if (cat.rules) {\n        yield* cat.rules;\n      }\n    }\n    if (this.rules) yield* this.rules;\n  }\n  *infoProfilesIterator(): Iterable<Profile> {\n    if (this.profiles) yield* this.profiles;\n  }\n\n  /**\n   *If callback returns something other than `undefined`, callback will not be called for the childs of this node\n   */\n  forEachCond(callbackfn: (value: Base | Link, depth: number) => any, _depth = 0): void {\n    if (callbackfn(this, 0) === undefined)\n      for (const instance of this.selectionsIterator()) instance.forEachCond(callbackfn, _depth + 1);\n  }\n  forEach(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    for (const instance of this.selectionsIterator()) instance.forEach(callbackfn);\n  }\n  forEachNode(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    for (const instance of this.nodesIterator()) instance.forEachNode(callbackfn);\n  }\n  forEachNodeCb(callbackfn: (value: Base | Link) => unknown): void {\n    const stack = [this as Base | Link];\n    const blacklist = new Set<string>();\n    while (stack.length) {\n      const cur = stack.pop()!;\n      if (blacklist.has(cur.id)) {\n        continue;\n      } else {\n        blacklist.add(cur.id);\n      }\n      callbackfn(cur);\n      if (cur.childs) {\n        stack.push(...cur.childs);\n        continue;\n      }\n\n      if (cur.target) {\n        const target = cur.target;\n\n        if (target.selectionEntries) stack.push(...target.selectionEntries);\n\n        if (target.selectionEntryGroups) stack.push(...target.selectionEntryGroups);\n\n        if (target.entryLinks) stack.push(...target.entryLinks);\n      }\n      if (cur.selectionEntries) stack.push(...cur.selectionEntries);\n\n      if (cur.selectionEntryGroups) stack.push(...cur.selectionEntryGroups);\n\n      if (cur.entryLinks) stack.push(...cur.entryLinks);\n    }\n  }\n\n  // console.log(\"foreachobjectwhitelist\", keys);\n\n  forEachObjectWhitelist<T extends Base>(callbackfn: (value: T, parent: T) => unknown, whiteList = goodKeys) {\n    const stack = [this as any];\n    // const keys = {} as any;\n\n    while (stack.length) {\n      const current = stack.pop()!;\n      for (const key in current) {\n        const value = current[key];\n        if (!whiteList.has(key)) {\n          // addOne(keys, key);\n          continue;\n        }\n        //  If Array: add each object inside array if (Array.isArray(value)) {\n\n        if (isObject(value)) {\n          if (Array.isArray(value)) {\n            if (value.length && isObject(value[0])) {\n              for (let i = 0; i < value.length; i++) {\n                const cur = value[i];\n                callbackfn(cur, current);\n                stack.push(cur);\n              }\n            }\n          } else {\n            callbackfn(value, current);\n            stack.push(value);\n          }\n        }\n      }\n    }\n\n    // console.log(\"foreachobjectwhitelist\", keys);\n  }\n  forEachObject(callbackfn: (value: Base | Link, parent: Base) => unknown, badKeys = new Set()) {\n    const stack = [this as any];\n    // const keys = {} as any;\n    while (stack.length) {\n      const current = stack.pop()!;\n      for (const key of Object.keys(current)) {\n        const value = current[key];\n        if (badKeys.has(key)) continue;\n        //  If Array: add each object inside array if (Array.isArray(value)) {\n\n        if (isObject(value)) {\n          if (Array.isArray(value)) {\n            if (value.length && isObject(value[0])) {\n              for (let i = value.length; i--; ) {\n                const cur = value[i];\n                callbackfn(cur, current);\n                stack.push(cur);\n              }\n            }\n          } else {\n            callbackfn(value, current);\n            stack.push(value);\n          }\n        }\n      }\n    }\n  }\n  findOption(cb: (opt: Base | Link) => boolean): Base | Link | undefined {\n    for (const s of this.selectionsIterator()) {\n      if (cb(s)) return s;\n    }\n  }\n  findOptionRecursive(cb: (opt: Base | Link) => boolean): Base | Link | undefined {\n    const stack = [...this.selectionsIterator()];\n    while (stack.length) {\n      const current = stack.pop()!;\n      if (cb(current)) return current;\n    }\n  }\n  getCosts(): BSICost[] {\n    return this.costs || [];\n  }\n\n  getPrimaryCategory(): string {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    return this.getCategoryEntryId() ?? UNCATEGORIZED_ID;\n  }\n  getPrimaryCategoryLink(): CategoryLink | undefined {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n  }\n\n  // Modifiers a constraints query to have the same effect when checked from a roster/force.\n  // packs modifiers & modifiers groups inside it\n  getBoundConstraint(constraint: BSIConstraint): BSIExtraConstraint {\n    const result = Object.assign({}, constraint) as BSIExtraConstraint;\n    result.name = this.getName();\n    result.parent = this;\n    const useTarget = constraint.shared || this instanceof CategoryLink;\n    result.childId = this.isLink() && useTarget ? this.targetId : this.id;\n    result.scope = \"self\";\n\n    result.modifiers = [];\n    for (const modifier of this.modifiersIterator()) {\n      if (modifier.field === constraint.id || modifier.field === \"hidden\") result.modifiers.push(modifier);\n    }\n    result.modifierGroups = [];\n    for (const group of this.modifierGroupsIterator()) {\n      current: for (const sub_grp of iterateModifierGroupsRecursive([group])) {\n        for (const modifier of sub_grp.modifiers || []) {\n          if (modifier.field === constraint.id || modifier.field === \"hidden\") {\n            result.modifierGroups.push(group);\n            break current;\n          }\n        }\n      }\n    }\n    return result;\n  }\n  // checks if extra constraints are null before adding them to prevent duplicates\n  // because of this, this must be called before setting roster/force constraints\n  getChildBoundConstraints(skipGroup?: boolean): BSIExtraConstraint[] {\n    const result = [];\n    for (const child of this.selectionsIterator()) {\n      if (skipGroup && child.isGroup()) continue;\n      for (const constraint of child.constraintsIterator()) {\n        if (constraint.type === \"min\" || constraint.type === \"exactly\") {\n          if (constraint.scope === \"parent\") result.push(child.getBoundConstraint(constraint));\n        }\n      }\n\n      if (child.isGroup()) result.push(...child.getChildBoundConstraints());\n    }\n    return result;\n  }\n  canAmountBeAbove1(): boolean {\n    const maxes = getTheoreticalMaxes(this.constraintsIterator(), [\n      ...this.modifierGroupsIterator(),\n      { modifiers: [...this.modifiersIterator()] },\n    ]);\n    if (!maxes.length || maxes.includes(-1)) return true;\n    return Math.min(...maxes) > 1;\n  }\n  hasOption(name: string) {\n    let found: undefined | true = undefined;\n    this.forEachCond((o) => {\n      if (o.getName() === name) found = true;\n      return found;\n    });\n    return found ? true : false;\n  }\n}\n\nexport class Entry extends Base {\n  isEntry() {\n    return true;\n  }\n  isQuantifiable(): boolean {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Group extends Base {\n  declare defaultSelectionEntryId?: string;\n  getDefaultSelectionEntryId() {\n    return this.defaultSelectionEntryId;\n  }\n  isGroup() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Link<T extends Base = Group | Entry> extends Base {\n  targetId!: string;\n  declare target: T;\n  isLink() {\n    return true;\n  }\n  isGroup() {\n    return this.target?.isGroup();\n  }\n  isCategory() {\n    return this.target?.isCategory();\n  }\n  isQuantifiable(): boolean {\n    return this.target?.isQuantifiable();\n  }\n  isEntry() {\n    return this.target?.isEntry();\n  }\n  isIdUnique() {\n    return false;\n  }\n  isProfile(): this is Profile | InfoLink<Profile> {\n    return this.target?.isProfile() || false;\n  }\n  isRule(): this is Rule | InfoLink<Rule> {\n    return this.target?.isRule() || false;\n  }\n  isInfoGroup(): this is InfoGroup | InfoLink<InfoGroup> {\n    return this.target?.isInfoGroup() || false;\n  }\n  isUnit(): boolean {\n    if (this.target.isUnit()) return true;\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return true;\n    }\n    return false;\n  }\n  getId(): string {\n    return this.targetId;\n  }\n  getType(): string | undefined {\n    return this.target?.getType();\n  }\n  getPage(): string | undefined {\n    return this.page || this.target?.page;\n  }\n  getHidden(): boolean | undefined {\n    return this.target.hidden || this.hidden;\n  }\n  getDefaultSelectionEntryId() {\n    return (\n      (this as any as Group).defaultSelectionEntryId || (this.target as any as Group)?.getDefaultSelectionEntryId()\n    );\n  }\n  getCategoryEntryId(): string | undefined {\n    return this.categoryEntryId ?? this.target?.categoryEntryId;\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore: TS2611\n  get associationConstraints(): AssociationConstraint[] | undefined {\n    return this.target.associationConstraints;\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore: TS2611\n  getAssociations(): NRAssociation[] | undefined {\n    return this.associations || this.target.associations;\n  }\n\n  isCollective(): boolean | undefined {\n    return super.isCollective() || this.target?.isCollective();\n  }\n  *extraConstraintsIterator(): Iterable<BSIExtraConstraint> {\n    yield* this.target.extraConstraintsIterator();\n    yield* super.extraConstraintsIterator();\n  }\n  *associationsIterator(): Iterable<NRAssociation> {\n    yield* this.target.associationsIterator();\n    yield* super.associationsIterator();\n  }\n  *rulesIterator(): Iterable<Rule> {\n    yield* this.target.rulesIterator();\n    yield* super.rulesIterator();\n  }\n  *profilesIterator(): Iterable<Profile> {\n    yield* this.target.profilesIterator();\n    yield* super.profilesIterator();\n  }\n  *constraintsIterator(): Iterable<BSIConstraint> {\n    if (this.target) yield* this.target.constraintsIterator();\n    yield* super.constraintsIterator();\n  }\n  *modifierGroupsIterator(): Iterable<BSIModifierGroup> {\n    yield* this.target.modifierGroupsIterator();\n    yield* super.modifierGroupsIterator();\n  }\n  *modifiersIterator(): Iterable<BSIModifier> {\n    yield* this.target.modifiersIterator();\n    yield* super.modifiersIterator();\n  }\n  *selectionsIterator(): Iterable<Base | Link> {\n    yield* this.target.selectionsIterator();\n    yield* super.selectionsIterator();\n  }\n  *categoryLinksIterator(): Iterable<CategoryLink> {\n    yield* this.target.categoryLinksIterator();\n    yield* super.categoryLinksIterator();\n  }\n  *infoLinksIterator(): Iterable<InfoLink> {\n    yield* this.target.infoLinksIterator();\n    yield* super.infoLinksIterator();\n  }\n  *infoGroupsIterator(): Iterable<InfoGroup> {\n    yield* this.target.infoGroupsIterator();\n    yield* super.infoGroupsIterator();\n  }\n  *infoRulesIterator(): Iterable<Rule> {\n    yield* this.target.infoRulesIterator();\n    yield* super.infoRulesIterator();\n  }\n  *infoProfilesIterator(): Iterable<Profile> {\n    yield* this.target.infoProfilesIterator();\n    yield* super.infoProfilesIterator();\n  }\n  getDefaultAmount(): number | undefined {\n    return this.defaultAmount === undefined ? this.target.defaultAmount : this.defaultAmount;\n  }\n  getName(): string {\n    return this.target?.name || this.name;\n  }\n  getParent(): Base | undefined {\n    return (this as any as EditorBase).parent;\n  }\n  getPrimaryCategory(): string {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    for (const categoryLink of this.target.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    return this.getCategoryEntryId() ?? UNCATEGORIZED_ID;\n  }\n  getPrimaryCategoryLink(): CategoryLink | undefined {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n    for (const categoryLink of this.target.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n  }\n  getCosts(): BSICost[] {\n    const d = {} as Record<string, BSICost>;\n    if (this.target?.costs) {\n      for (const cost of this.target.costs) d[cost.typeId] = cost;\n    }\n    if (this.costs) {\n      for (const cost of this.costs) d[cost.typeId] = cost;\n    }\n    return Object.values(d);\n  }\n}\n(Link.prototype as any).keyInfoCache = {};\n\nexport class InfoLink<T extends Rule | InfoGroup | Profile = Rule | InfoGroup | Profile> extends Link {\n  declare target: T;\n  declare type: \"infoGroup\" | \"profile\" | \"rule\";\n  getTypeName() {\n    return (this.target as Profile)?.typeName;\n  }\n}\nexport class CategoryLink extends Link {\n  declare targetId: string;\n  declare target: Category;\n  primary?: boolean;\n  main_catalogue!: Catalogue;\n\n  get units() {\n    return this.target.units;\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.target.units;\n  }\n  isEmpty(): boolean {\n    return this.target.isEmpty();\n  }\n}\n\nexport const UNCATEGORIZED_ID = \"(No Category)\";\nexport const ILLEGAL_ID = \"(Illegal Units)\";\nexport class Category extends Base {\n  declare id: string;\n  units!: Array<Base | Link>;\n  main_catalogue!: Catalogue;\n  isCategory(): this is Category {\n    return true;\n  }\n\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.units;\n  }\n  isEmpty(): boolean {\n    return !Boolean(this.units.length);\n  }\n  isIdUnique() {\n    return !this.isEmptyNode();\n  }\n}\nexport class Force extends Base {\n  declare name: string;\n  declare id: string;\n  categories!: Array<Category | CategoryLink>;\n  forces?: Force[];\n  main_catalogue!: Catalogue;\n  isForce(): this is Force {\n    return true;\n  }\n  isEntry() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.categories;\n    if (this.forces) yield* this.forces;\n  }\n  *rulesIterator(): Iterable<Rule> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.rules) {\n        yield* group.rules;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"rule\").map((o) => o.target as Rule);\n      }\n    }\n    if (this.main_catalogue) yield* this.main_catalogue.rulesIterator();\n  }\n  generateForces(categories: Record<string, Category>): Force[] {\n    const result = [];\n    for (const force of this.forceEntries || []) {\n      const copied = clone(force);\n      copied.main_catalogue = this.main_catalogue;\n      const forceCategories = [];\n      for (const link of force.categoryLinks || []) {\n        if (link.targetId in categories) {\n          forceCategories.push(categories[link.targetId]);\n        }\n      }\n      copied.categories = forceCategories;\n      this.main_catalogue.index[copied.id] = copied;\n      result.push(copied);\n    }\n    this.forces = result;\n    return result;\n  }\n  isEmpty(): boolean {\n    for (const category of this.categories) {\n      if (!category.isEmpty()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  *forcesIterator(): Iterable<Force> {\n    if (this.forceEntries) {\n      yield* this.forceEntries;\n    }\n  }\n\n  *forcesIteratorRecursive(): Iterable<Force> {\n    if (this.forces) {\n      for (const force of this.forces) {\n        yield force;\n        yield* force.forcesIteratorRecursive();\n      }\n    }\n  }\n}\n\nconst maxValue = Infinity;\nexport function getTheoreticalMaxes(\n  constraints: Iterable<BSIConstraint>,\n  modifierGroups: Iterable<BSIModifierGroup>\n): number[] {\n  const maxConstraints = [] as number[];\n  function push(n: number) {\n    maxConstraints.push(n);\n  }\n  for (const constraint of constraints) {\n    const beginLength = maxConstraints.length;\n    if (constraint.field !== \"selections\" || constraint.type !== \"max\") continue;\n    if (constraint.value > 1) {\n      push(constraint.value);\n      continue;\n    }\n    let constraintValue = constraint.value;\n    for (const modifier_group of iterateModifierGroupsRecursive(modifierGroups)) {\n      for (const modifier of modifier_group.modifiers || []) {\n        if (modifier.field !== constraint.id) continue;\n        if (modifier.type === \"increment\") {\n          if (modifier_group.repeats?.length || modifier.repeats?.length) {\n            push(maxValue);\n            continue;\n          }\n          constraintValue += modifier.value as number;\n          if (constraintValue > 1) {\n            push(constraintValue);\n            continue;\n          }\n        }\n        if (modifier.type === \"decrement\" && (modifier.value as any) < 0) {\n          if (modifier_group.repeats?.length || modifier.repeats?.length) {\n            push(maxValue);\n            continue;\n          }\n          constraintValue -= modifier.value as number;\n          if (constraintValue > 1) {\n            push(constraintValue);\n            continue;\n          }\n        }\n        if (modifier.type === \"set\" && (modifier.value as any) > 1) {\n          if (modifier.value === -1) {\n            push(maxValue);\n            continue;\n          }\n          push(modifier.value as number);\n        }\n      }\n    }\n\n    if (beginLength === maxConstraints.length) push(constraintValue);\n  }\n\n  return maxConstraints;\n}\n\nexport interface BSIExtraConstraint extends BSIConstraint, BSINamed {\n  parent: Base;\n  modifiers: BSIModifier[];\n  modifierGroups: BSIModifierGroup[];\n}\n\nexport class ProfileType extends Base implements BSIProfileType {\n  declare characteristicTypes: BSICharacteristicType[];\n  declare sortIndex?: number;\n}\n// const debugKeys = new Set();\nexport class Profile extends Base implements BSIProfile {\n  declare characteristics: BSICharacteristic[];\n  declare typeId: string;\n  declare typeName: string;\n  declare publication?: BSIPublication | undefined;\n  isProfile() {\n    return true;\n  }\n  getTypeName() {\n    return this.typeName;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Characteristic extends Base implements BSICharacteristic {\n  declare typeId: string;\n  declare $text: string | number;\n  originalValue?: string | number | boolean | undefined;\n  getLabel() {\n    if (this.catalogue) {\n      return this.catalogue.findOptionById(this.typeId)?.getName() ?? this.typeId;\n    }\n    return this.typeId;\n  }\n  getTypeName() {\n    return this.getLabel();\n  }\n  getName() {\n    return `${this.getLabel()} = ${this.$text}`;\n  }\n}\n\nexport class InfoGroup extends Base {\n  declare characteristics: BSICharacteristic[];\n  declare typeId: string;\n  declare typeName: string;\n  declare publication?: BSIPublication | undefined;\n  isInfoGroup() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\n\nexport const basicQueryFields = new Set([\"any\", \"model\", \"unit\", \"upgrade\", \"mount\", \"crew\"]);\nexport class Condition extends Base {\n  declare childId: string;\n  declare scope: string;\n  declare type: string;\n  declare includeChildSelections: boolean;\n  declare includeChildForces: boolean;\n  declare percentValue?: boolean;\n}\nexport class Constraint extends Condition {\n  declare type: \"min\" | \"max\" | \"exactly\";\n}\nexport class Modifier extends Base implements BSIModifier {\n  declare type: BSIModifierType;\n  declare field: \"category\" | \"name\" | \"hidden\" | string; //costId\n  declare value: number | string | boolean;\n}\nexport class ModifierGroup extends Base implements BSIModifierGroup {}\n\nexport class Rule extends Base implements BSIRule {\n  declare id: string;\n  declare name: string;\n  declare description: string;\n  declare hidden: boolean;\n  declare page?: string;\n  declare modifiers?: BSIModifier[] | undefined;\n  declare modifierGroups?: BSIModifierGroup[] | undefined;\n  getDescription(): string {\n    return Array.isArray(this.description) ? this.description.join(\"\\n\") : this.description;\n  }\n  isRule() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\n\nexport function getStaticFilters(source: Base): string[] {\n  const ids = [\"any\", source.id];\n  if (source.isLink()) ids.push(source.targetId);\n  const type = source.getType();\n  if (type) ids.push(type);\n  return ids;\n}\n\nexport function getIds(source: Base): string[] {\n  return source.isLink() ? [source.id, source.targetId] : [source.id];\n}\nexport function* getAllInfoGroups(group: Base): Iterable<InfoGroup> {\n  yield group as InfoGroup;\n  for (const grp of group.infoGroups || []) {\n    yield* getAllInfoGroups(grp);\n  }\n  for (const link of group.infoLinks || []) {\n    if (link.type === \"infoGroup\") yield* getAllInfoGroups(link.target as InfoGroup);\n  }\n}\nexport function* iterateModifierGroupsRecursive(\n  groups?: Iterable<BSIModifierGroup>\n): Generator<BSIModifierGroup, void, undefined> {\n  if (groups) {\n    for (const group of groups) {\n      yield group;\n      yield* iterateModifierGroupsRecursive(group.modifierGroups);\n    }\n  }\n}\n\nexport const BaseChilds = [\n  \"costTypes\",\n  \"costs\",\n\n  \"categoryEntries\",\n\n  \"forceEntries\",\n\n  \"sharedSelectionEntries\",\n  \"selectionEntries\",\n\n  \"sharedSelectionEntryGroups\",\n  \"selectionEntryGroups\",\n\n  \"entryLinks\",\n  \"infoLinks\",\n  \"categoryLinks\",\n  \"catalogueLinks\",\n\n  \"sharedProfiles\",\n  \"profiles\",\n  \"profileTypes\",\n  \"characteristics\",\n  \"characteristicTypes\",\n\n  \"sharedInfoGroups\",\n  \"infoGroups\",\n\n  \"sharedRules\",\n  \"rules\",\n\n  \"publications\",\n  \"associations\",\n\n  \"modifierGroups\",\n  \"modifiers\",\n  \"constraints\",\n  \"conditionGroups\",\n  \"conditions\",\n  \"repeats\",\n] as const;\nexport type BaseChildsT = (typeof BaseChilds)[number];\nexport const goodJsonArrayKeys = new Set(BaseChilds);\nexport const goodJsonKeys = new Set([\n  ...goodJsonArrayKeys,\n\n  \"defaultAmount\",\n  \"id\",\n  \"import\",\n  \"importRootEntries\",\n  \"name\",\n  \"hidden\",\n  \"field\",\n  \"scope\",\n  \"value\",\n  \"percentValue\",\n  \"shared\",\n  \"includeChildSelections\",\n  \"includeChildForces\",\n  \"childId\",\n  \"type\",\n  \"targetId\",\n  \"primary\",\n  \"typeId\",\n  \"collective\",\n  \"$text\",\n  \"page\",\n  \"typeName\",\n  \"defaultSelectionEntryId\",\n  \"revision\",\n  \"battleScribeVersion\",\n  \"authorName\",\n  \"authorContact\",\n  \"authorUrl\",\n  \"library\",\n  \"gameSystemId\",\n  \"gameSystemRevision\",\n  \"xmlns\",\n  \"readme\",\n  \"description\",\n  \"comment\",\n  \"publicationDate\",\n  \"publisher\",\n  \"publisherId\",\n  \"publisherUrl\",\n  \"shortName\",\n  \"repeats\",\n  \"roundUp\",\n  \"defaultCostLimit\",\n  \"publicationId\",\n\n  // NR SPECIFIC\n  \"label\",\n  \"labelMembers\",\n  \"maxAssociationsPerMember\",\n  \"ids\",\n  \"min\",\n  \"max\",\n  \"of\",\n  \"flatten\",\n  \"collapsible\",\n  \"sortIndex\",\n  \"subType\",\n  \"arg\",\n  // \"includeChildSelections\",\n  // \"scope\",\n  // \"type\",\n  // \"conditions\",\n  // \"conditionGroups\",\n\n  //Legacy\n  \"costTypeId\",\n  \"profileTypeId\",\n  \"characteristicTypeId\",\n  \"value\",\n]);\nexport function rootToJson(data: Catalogue | BSICatalogue | Record<string, any>, fixRoot = false): string {\n  const root: any = {\n    catalogue: undefined,\n    gameSystem: undefined,\n  };\n  const copy = { ...data }; // ensure there is no recursivity by making sure only this copy is put in the json\n  if (!data.gameSystemId) {\n    root.gameSystem = copy;\n    root.gameSystem.type = \"gameSystem\";\n    delete root.catalogue;\n  } else {\n    root.catalogue = copy;\n    root.catalogue.type = \"catalogue\";\n    delete root.gameSystem;\n  }\n\n  const obj = fixRoot ? getDataObject(root) : root;\n  const stringed = JSON.stringify(obj, (k, v) => {\n    if (Array.isArray(v) && v.length === 0) return undefined;\n    if (v === copy || goodJsonKeys.has(k) || isFinite(Number(k))) {\n      if (isObject(v)) {\n        return splitExactlyConstraints(splitExactlyConstraintsModifiers(v));\n      }\n      return v;\n    }\n    return undefined;\n  });\n  return stringed;\n}\nexport function entryToJson(data: Base | Record<string, any>, extraFields?: Set<string>): string {\n  const stringed = JSON.stringify(data, function (k, v) {\n    if (Array.isArray(v) && v.length === 0) return undefined;\n    if (goodJsonKeys.has(k) || isFinite(Number(k)) || extraFields?.has(k)) return v;\n    return undefined;\n  });\n  return stringed;\n}\n\ninterface EntriesToJsonOptions {\n  formatted?: boolean;\n  forceArray?: boolean; // default is true\n}\nexport function entriesToJson(\n  data: Array<Base | Record<string, any>> | Base | Record<string, any>,\n  extraFields?: Set<string>,\n  options?: EntriesToJsonOptions\n): string {\n  const takeOutOfArray = options?.forceArray === false;\n  data = Array.isArray(data) && data?.length === 1 && takeOutOfArray ? data[0] : data;\n  const stringed = JSON.stringify(\n    data,\n    function (k, v) {\n      if (goodJsonKeys.has(k) || isFinite(Number(k)) || extraFields?.has(k)) return v;\n      return undefined;\n    },\n    options?.formatted === true ? 2 : undefined\n  );\n  return stringed;\n}\n\nexport function forEachObjectWhitelist2<T extends Base>(\n  current: Base,\n  callbackfn: (value: T, parent: T) => unknown,\n  whiteList = goodKeys\n) {\n  for (const key in current) {\n    if (whiteList.has(key)) {\n      const value = current[key as keyof typeof current];\n      if (Array.isArray(value)) {\n        if (value.length && isObject(value[0])) {\n          for (let i = 0; i < value.length; i++) {\n            const cur = value[i] as T;\n            callbackfn(cur, current as T);\n            forEachObjectWhitelist2(cur, callbackfn, whiteList);\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function convertRuleToProfile(rule: BSIRule): BSIProfile {\n  return {\n    characteristics: [\n      {\n        name: \"Descrption\",\n        typeId: \"description\",\n        $text: Array.isArray(rule.description) ? rule.description[0] : rule.description,\n      },\n    ],\n    id: rule.id,\n    name: rule.name,\n    hidden: rule.hidden,\n    typeId: \"rules\",\n    typeName: \"Rules\",\n  };\n}\n","import type { EditorBase } from \"./bs_main_catalogue\";\n\nexport const validScopes = new Set([\n  \"force\",\n  \"roster\",\n  \"self\",\n  \"parent\",\n  \"ancestor\",\n  \"primary-category\",\n  \"force\",\n  \"roster\",\n  \"primary-catalogue\",\n]);\nexport const validChildIds = new Set([\"any\", \"unit\", \"model\", \"upgrade\", \"mount\", \"crew\"]);\nexport function isScopeValid(parent: EditorBase, scope: string) {\n  if (validScopes.has(scope)) return true;\n  const catalogue = parent.catalogue;\n  const found = catalogue.findOptionById(scope);\n  if (found) {\n    if (found.isForce()) return true;\n    if (found.isCategory()) return true;\n    if (found.isCatalogue()) return true;\n  }\n  const stack = [parent];\n  while (stack.length) {\n    const current = stack.pop()!;\n    if (current.id === scope) return true;\n\n    // check links\n    // if (current.links) {\n    //   for (const link of current.links) {\n    //     stack.push(link);\n    //   }\n    // }\n\n    if (current.parent) [stack.push(current.parent)];\n  }\n  return false;\n}\n","import type {\n  BSIConstraint,\n  BSIModifier,\n  BSIModifierGroup,\n  BSIQuery,\n  SupportedQueries,\n  BSIConditionGroup,\n  BSICondition,\n  BSIRepeat,\n} from \"./bs_types\";\nimport { Condition, Modifier, ModifierGroup, type Base, type InfoGroup, type Link } from \"./bs_main\";\nimport type { Catalogue, EditorBase } from \"./bs_main_catalogue\";\nimport { findSelfOrParentWhere, has, removePrefix } from \"./bs_helpers\";\n\nexport function getModifierOrConditionParent(obj: EditorBase) {\n  const parent = findSelfOrParentWhere(obj, (o) => {\n    if (o instanceof Modifier) return false;\n    if (o instanceof Condition) return false;\n    if (o instanceof ModifierGroup) return false;\n    return true;\n  });\n  return parent;\n}\n\nexport function* getAllQueries(queries: SupportedQueries): Iterable<BSIQuery> {\n  for (const condition of queries.conditions || []) yield condition;\n  for (const repeat of queries.repeats || []) yield repeat;\n\n  for (const conditionGroup of queries.conditionGroups || []) {\n    for (const condition of getAllQueries(conditionGroup)) yield condition;\n  }\n  for (const modifier of queries.modifiers || []) {\n    for (const condition of getAllQueries(modifier)) yield condition;\n  }\n}\n\nexport function getModifiedField(base: Base | Link | undefined, field: string) {\n  if (!base) return;\n  if (!field) return;\n  const catalogue = base.getCatalogue();\n  if ((base as EditorBase).parent) {\n    const parent = getModifierOrConditionParent(base as EditorBase);\n    if (parent) {\n      for (const constraint of parent.constraintsIterator()) {\n        if (constraint.id === field) return constraint as any as Base;\n      }\n    }\n  }\n  const target = catalogue?.findOptionById(field);\n  return target;\n}\nexport function fieldToText(base: Base | Link | undefined, field: string): string {\n  if (field === undefined) {\n    return \"\";\n  }\n  if (base) {\n    if (`${field}`.startsWith(\"limit::\")) {\n      return `limit::${fieldToText(base, removePrefix(`${field}`, \"limit::\"))}`;\n    }\n    const catalogue = base.catalogue || (base as Catalogue);\n    const target = getModifiedField(base, field);\n    if (target) {\n      const type = (target as any).type;\n      if (type && [\"min\", \"max\", \"exactly\"].includes(type)) {\n        return constraintToText(base, target as any);\n      }\n      if (target.name) {\n        if (target.isCategory && target.isCategory()) {\n          return `${target.name}`;\n        }\n        if (target.url) {\n          return `${target.name}`;\n        }\n        return target.name;\n      }\n    }\n    const manager = catalogue.manager;\n    if (manager) {\n      const found = catalogue.manager.findOptionById(field) || manager.getCatalogueInfo({ targetId: field });\n      return found?.name || field;\n    }\n  }\n  return field;\n}\n\nexport function rawConditionToString(base: Base | Link, condition: BSIQuery & { value?: number }): string {\n  const type = condition.type || \"none\";\n  const value = condition.value === undefined ? 1 : condition.value;\n  const ofWhat = fieldToText(base, condition.childId || \"any\");\n  const rawField = fieldToText(base, condition.field);\n  const field = [\"selections\", \"forces\"].includes(rawField) ? \"\" : ` ${rawField} of`;\n  const rawScope = fieldToText(base, condition.scope);\n  const scope = rawScope === base.getName() ? \"\" : `${rawScope}`;\n  const recursive = condition.includeChildSelections ? \" (recursive)\" : \"\";\n  const inScope = scope ? ` in ${scope}${recursive}` : \"\";\n  return `${type} ${value}${field} ${ofWhat}${inScope}`;\n}\nexport function conditionToString(\n  base: Base | Link | undefined,\n  condition: BSIQuery & { value?: number },\n  includeId = false,\n  fieldToString = fieldToText\n): string {\n  const type = condition.type || \"none\";\n  const value = condition.value === undefined ? 1 : condition.percentValue ? `${condition.value}%` : condition.value;\n\n  const rawField = fieldToString(base, condition.field);\n  const field = [\"selections\", \"forces\"].includes(rawField) ? ` ${rawField}` : ` ${fieldToString(base, rawField)}`;\n\n  const what = fieldToString(base, condition.childId || \"\") + (includeId ? `(${condition.childId || \"any\"})` : \"\");\n  const of = what && field ? `of ` : \"\";\n\n  const rawScope = fieldToString(base, condition.scope);\n  const scope = rawScope === base?.getName() ? \"\" : `${rawScope}`;\n  const recursive = condition.includeChildSelections ? \" (recursive)\" : \"\";\n  const inScope = scope ? ` in ${scope}${recursive}` : \"\";\n\n  switch (type) {\n    case \"instanceOf\":\n      return `${scope} is ${what}`;\n    case \"notInstanceOf\":\n      return `${scope} is not ${what}`;\n\n    case \"atLeast\":\n      return `${value}+${field} ${of}${what}${inScope}`;\n    case \"greaterThan\":\n      return `${Number(value) + 1}+${field} ${of}${what}${inScope}`;\n\n    case \"atMost\":\n      return `${value}${value === 0 ? \"\" : \"-\"}${field} ${of}${what}${inScope}`;\n    case \"lessThan\":\n      return `${Number(value) - 1}${Number(value) - 1 === 0 ? \"\" : \"-\"}${field} ${of}${what}${inScope}`;\n\n    case \"equalTo\":\n      return `${value}${field} ${of}${what}${inScope}`;\n    case \"notEqualTo\":\n      return `not ${value}${field} ${of}${what}${inScope}`;\n\n    case \"none\":\n      return `${field} ${of}${what}${inScope}`;\n\n    default:\n      return `${type} ${value}${field} ${of}${what}${inScope}`;\n  }\n}\n\nexport function constraintToText(base: Base | Link, constraint: BSIConstraint, fieldToString = fieldToText) {\n  // check if the constraint is in the parent, its better to show id than a constraint that wouldn't work\n  if (!has(base.constraintsIterator(), constraint)) {\n    return constraint.id;\n  }\n\n  const field = constraint.field === \"selections\" ? \"\" : ` ${fieldToString(base, constraint.field)}`;\n  const scope = constraint.scope === \"parent\" ? \"\" : `(${fieldToString(base, constraint.scope)})`;\n  const ofWhat = constraint.childId ? ` ${fieldToString(base, constraint.childId)}` : \"\";\n  return `${constraint.type}${field}${ofWhat}${scope}`;\n}\nexport function constraintToString(base: Base | Link, constraint: BSIConstraint, fieldToString = fieldToText) {\n  const field = constraint.field === \"selections\" ? \"\" : ` ${fieldToString(base, constraint.field)}`;\n  const scope =\n    constraint.scope === \"parent\" ? \"\" : `<span class=grey>(${fieldToString(base, constraint.scope)})</span>`;\n  return `${constraint.type}${field}${scope}`;\n}\nexport function modifierToString(\n  base: Base | Link | undefined,\n  modifier: BSIModifier,\n  fieldToString = fieldToText\n): string {\n  return `${modifier.type} ${fieldToString(base, modifier.field)} ${fieldToString(base, modifier.value?.toString())}`;\n}\n\nexport function conditionGroupToString(\n  base: Base | Link,\n  group: BSIConditionGroup,\n  fieldToString = fieldToText\n): string {\n  const result = [] as string[];\n  for (const condition of group.conditions || []) {\n    result.push(conditionToString(base, condition, false, fieldToString));\n  }\n  for (const condition of group.conditionGroups || []) {\n    result.push(`(${conditionGroupToString(base, condition, fieldToString)})`);\n  }\n  const type = group.type || \"and\";\n  return result.join(` ${type} `);\n}\n\n/**\n * Converts modifiers to a better format for displaying\n * {effect, groups: Recursive<ConditionGroups>}\n */\nexport function prepareModifiers(\n  base: Base | Link,\n  modifiers: BSIModifier[],\n  modifierGroups: BSIModifierGroup[],\n  fieldToString = fieldToText\n): PrintableModifier[] {\n  const result = [] as PrintableModifier[];\n  const root = { modifiers: modifiers, modifierGroups: modifierGroups };\n  const stack = [root] as BSIModifierGroup[];\n  const depthCounts = [] as number[];\n  const parents = [] as BSIModifierGroup[];\n\n  while (stack.length) {\n    const current = stack.pop()!;\n\n    if (current.modifiers) {\n      const conditions = [] as BSICondition[];\n      const conditionGroups = [] as BSIConditionGroup[];\n\n      for (const parent of parents) {\n        if (parent.conditions) conditions.push(...parent.conditions);\n        if (parent.conditionGroups) conditionGroups.push(...parent.conditionGroups);\n      }\n\n      if (current.conditions) conditions.push(...current.conditions);\n      if (current.conditionGroups) conditionGroups.push(...current.conditionGroups);\n\n      for (const modifier of current.modifiers) {\n        const resultConditionGroups = [...conditionGroups, ...(modifier.conditionGroups || [])];\n        if (conditions.length || modifier.conditions?.length) {\n          resultConditionGroups.push({\n            type: \"and\",\n            conditions: [...conditions, ...(modifier.conditions || [])],\n          });\n        }\n\n        const prepared: PrintableModifier = {\n          type: modifier.type,\n          value: modifier.value,\n          field: modifier.field,\n          html: modifierToString(base, modifier, fieldToString),\n        };\n\n        if (resultConditionGroups.length) {\n          prepared.conditionGroups = resultConditionGroups.map((o) => setConditionsText(base, o, fieldToString));\n        }\n        if (modifier.repeats) {\n          prepared.repeats = modifier.repeats.map((o) => setRepeatText(base, o, fieldToString));\n        }\n        result.push(prepared);\n      }\n    }\n\n    const childs = current.modifierGroups;\n    if (childs?.length) {\n      parents.push(current);\n      depthCounts.push(childs.length);\n      stack.push(...childs);\n    } else {\n      while (depthCounts.length) {\n        const count = depthCounts[depthCounts.length - 1];\n        if (count === 1) {\n          depthCounts.pop();\n          parents.pop();\n        } else {\n          depthCounts[depthCounts.length - 1] = count - 1;\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * Converts modifiers to a better format for parsing\n * {effect, groups: Recursive<ConditionGroups>}\n */\nexport function prepareModifiers2(\n  base: Base | Link,\n  modifiers: BSIModifier[],\n  modifierGroups: BSIModifierGroup[]\n): ParsableModifier[] {\n  const result = [] as ParsableModifier[];\n  const root = { modifiers: modifiers, modifierGroups: modifierGroups };\n  const stack = [root] as BSIModifierGroup[];\n  const depthCounts = [] as number[];\n  const parents = [] as BSIModifierGroup[];\n\n  while (stack.length) {\n    const current = stack.pop()!;\n\n    if (current.modifiers) {\n      const conditions = [] as BSICondition[];\n      const conditionGroups = [] as BSIConditionGroup[];\n\n      for (const parent of parents) {\n        if (parent.conditions) conditions.push(...parent.conditions);\n        if (parent.conditionGroups) conditionGroups.push(...parent.conditionGroups);\n      }\n\n      if (current.conditions) conditions.push(...current.conditions);\n      if (current.conditionGroups) conditionGroups.push(...current.conditionGroups);\n\n      for (const modifier of current.modifiers) {\n        const resultConditionGroups = [...conditionGroups, ...(modifier.conditionGroups || [])];\n        if (conditions.length || modifier.conditions?.length) {\n          resultConditionGroups.push({\n            type: \"and\",\n            conditions: [...conditions, ...(modifier.conditions || [])],\n          });\n        }\n\n        const prepared: ParsableModifier = {\n          modifier: modifier,\n        };\n\n        if (resultConditionGroups.length) {\n          prepared.conditionGroups = resultConditionGroups.map((o) => setConditionsText(base, o));\n        }\n        if (modifier.repeats) {\n          prepared.repeats = modifier.repeats.map((o) => setRepeatText(base, o));\n        }\n        result.push(prepared);\n      }\n    }\n\n    const childs = current.modifierGroups;\n    if (childs?.length) {\n      parents.push(current);\n      depthCounts.push(childs.length);\n      stack.push(...childs);\n    } else {\n      while (depthCounts.length) {\n        const count = depthCounts[depthCounts.length - 1];\n        if (count === 1) {\n          depthCounts.pop();\n          parents.pop();\n        } else {\n          depthCounts[depthCounts.length - 1] = count - 1;\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nexport interface ParsableModifier {\n  modifier: BSIModifier;\n  conditionGroups?: BSIConditionGroup[];\n  repeats?: BSIRepeat[];\n}\n\nexport interface PrintableModifier {\n  type: string;\n  field: string;\n  value: number | boolean | string;\n  html: string;\n  conditionGroups?: PrintableConditionGroup[];\n  repeats?: PrintableRepeat[];\n}\nexport interface PrintableCondition extends BSICondition {\n  html: string;\n}\nexport interface PrintableRepeat extends BSIRepeat {\n  html: string;\n}\nexport interface PrintableConditionGroup {\n  type?: \"and\" | \"or\";\n  conditions?: PrintableCondition[];\n  conditionGroups?: PrintableConditionGroup[];\n}\nexport function setConditionsText(\n  base: Base | Link,\n  group: BSIConditionGroup,\n  fieldToString = fieldToText\n): PrintableConditionGroup {\n  if (group.conditions) {\n    for (const condition of group.conditions) {\n      const printable = condition as PrintableCondition;\n      if (printable.html) continue;\n      printable.html = conditionToString(base, condition, false, fieldToString);\n    }\n  }\n  if (group.conditionGroups) {\n    for (const nested of group.conditionGroups) {\n      setConditionsText(base, nested, fieldToString);\n    }\n  }\n  return group as PrintableConditionGroup;\n}\n\nexport function setRepeatText(base: Base | Link, repeat: BSIRepeat, fieldToString = fieldToText): PrintableRepeat {\n  const result = repeat as PrintableRepeat;\n  result.html = conditionToString(base, repeat, false, fieldToString);\n  return result;\n}\n","import { isScopeValid, validScopes } from \"./bs_condition\";\nimport type { ItemTypeNames } from \"./bs_editor\";\nimport {\n  addObj,\n  addObjIfMissing,\n  addObjUnique,\n  clone,\n  generateBattlescribeId,\n  groupBy,\n  popObj,\n  sortBy,\n  textSearchRegex,\n} from \"./bs_helpers\";\nimport {\n  BSIExtraConstraint,\n  Base,\n  Category,\n  Condition,\n  Constraint,\n  Force,\n  ILLEGAL_ID,\n  Link,\n  Profile,\n  Rule,\n  UNCATEGORIZED_ID,\n  basicQueryFields,\n  forEachObjectWhitelist2,\n  goodJsonArrayKeys,\n  goodKeys,\n  goodKeysWiki,\n} from \"./bs_main\";\nimport { getModifierOrConditionParent } from \"./bs_modifiers\";\nimport type { BSCatalogueManager } from \"./bs_system\";\nimport type {\n  BSICatalogue,\n  BSICondition,\n  BSIConstraint,\n  BSICostType,\n  BSIGameSystem,\n  BSIInfoLink,\n  BSIProfile,\n  BSIProfileType,\n  BSIPublication,\n  BSIReference,\n  BSIRule,\n} from \"./bs_types\";\n\nif (typeof $toRaw === \"undefined\") {\n  globalThis.$toRaw = function (o) {\n    return o;\n  };\n}\nexport interface IErrorMessage {\n  msg: string;\n  severity?: \"error\" | \"warning\" | \"info\" | \"debug\";\n  source?: any;\n  id?: string;\n  other?: any;\n  extra?: string;\n}\n\nexport interface WikiLink extends Link {\n  parent: WikiBase;\n  links?: WikiLink[];\n}\nexport interface WikiBase extends Base {\n  parent?: WikiBase;\n  links?: WikiLink[];\n}\nexport interface EditorBase extends Base {\n  parent?: EditorBase;\n  links?: EditorBase[];\n  other_links?: EditorBase[];\n  catalogue: Catalogue;\n\n  parentKey: string & keyof EditorBase;\n  editorTypeName: ItemTypeNames;\n\n  showInEditor?: boolean;\n  showChildsInEditor?: boolean;\n  highlight?: boolean;\n\n  errors?: IErrorMessage[];\n}\nexport class CatalogueLink extends Base {\n  targetId!: string;\n  declare target: Catalogue;\n  importRootEntries?: boolean;\n  /** Most code that checks for links expects entryLinks or categoryLinks, catalogueLinks are specially handled */\n  isLink() {\n    return false;\n  }\n}\nexport class Publication extends Base implements BSIPublication {\n  shortName?: string;\n  publisher?: string;\n  publicationDate?: string | number;\n  publisherUrl?: string;\n}\n\nexport class Catalogue extends Base {\n  declare name: string;\n  declare id: string;\n  library?: boolean;\n  revision?: number;\n\n  gameSystemId?: string;\n  gameSystemRevision?: number;\n\n  authorContact?: string;\n  authorName?: string;\n  authorUrl?: string;\n\n  battleScribeVersion?: string;\n\n  costTypes?: BSICostType[];\n  catalogueLinks?: CatalogueLink[];\n\n  // Processed\n  gameSystem!: Catalogue;\n  initialized?: boolean;\n  declare loaded?: boolean;\n  loaded_wiki?: boolean;\n  loaded_editor?: boolean;\n\n  imports!: Catalogue[];\n  importsWithEntries!: Catalogue[];\n  index!: Record<string, Base>;\n  unresolvedLinks: Record<string, Array<(Condition | Link) & EditorBase>> = {};\n\n  forces!: Force[];\n  categories!: Category[];\n  units!: Array<Base | Link>;\n  roster_constraints!: BSIExtraConstraint[];\n\n  manager!: BSCatalogueManager;\n  book!: any;\n  short!: string;\n  version!: string;\n  nrversion!: string;\n  lastUpdated: string | undefined;\n  costIndex!: Record<string, BSICostType>;\n\n  fullFilePath?: string;\n\n  errors?: IErrorMessage[];\n  reset() {\n    delete this.initialized;\n    delete this.loaded;\n    delete this.loaded_editor;\n    delete this.loaded_wiki;\n    for (const imported of this.imports || []) {\n      delete imported.initialized;\n      delete imported.loaded;\n      delete imported.loaded_editor;\n      delete imported.loaded_wiki;\n    }\n  }\n  init(deleteBadLinks = true) {\n    if (this.initialized) return;\n    this.initialized = true;\n    this.generateImports(deleteBadLinks);\n    this.resolveAllLinks(deleteBadLinks);\n    this.generateCostIndex();\n  }\n\n  process() {\n    if (this.loaded) return;\n    this.loaded = true;\n    this.init();\n    const units = this.generateUnits();\n    const categories = this.generateCategories(units);\n    this.categories = Object.values(categories);\n    this.generateForces(categories);\n    this.generateExtraConstraints();\n    // console.log(\"processed\", this.name)\n  }\n  processForWiki(system: Record<string, any>) {\n    if (this.loaded_wiki) return;\n    this.loaded_wiki = true;\n    this.process();\n    const rulesObj: Record<string, any> = system.rules || {};\n    (system as any).rules = rulesObj;\n\n    this.imports.forEach((imported) => {\n      addObjUnique(imported as any, \"links\", this);\n    });\n    function proc(cur: WikiBase, parent: WikiBase) {\n      (cur as WikiBase).parent = parent as WikiBase;\n      if (cur.target) addObjUnique(cur.target as any, \"links\", parent as WikiBase);\n      if (cur instanceof Rule) {\n        rulesObj[cur.id] = cur;\n      }\n    }\n    forEachObjectWhitelist2(this, proc, goodKeysWiki);\n\n    for (const force of this.forces || []) {\n      (force as any).parent = this;\n      for (const category of force.categories) {\n        (category as any).parent = force;\n      }\n    }\n  }\n  processForEditor() {\n    if (this.loaded_editor) return;\n    this.loaded_editor = true;\n    this.init(false);\n\n    if (this.gameSystem) {\n      addObjUnique(this.gameSystem as any, \"links\", this);\n    }\n\n    forEachObjectWhitelist2<EditorBase>(\n      this,\n      (cur, parent) => {\n        cur.parent = parent;\n        cur.catalogue = this;\n        if (!cur.links) {\n          cur.links = [];\n        }\n        if (!cur.other_links) {\n          cur.other_links = [];\n        }\n        if (cur.target) {\n          addObjUnique(cur.target as EditorBase, \"links\", cur);\n        }\n        if (cur.isProfile() && !cur.isLink()) {\n          const target = this.findOptionById(cur.typeId) as EditorBase;\n          if (target) {\n            addObjUnique(target, \"links\", cur);\n          }\n        }\n        const value = (cur as any).value;\n        if (value) {\n          const target = this.findOptionById(value) as EditorBase;\n          if (target) {\n            addObjUnique(target, \"other_links\", cur);\n          }\n        }\n        this.refreshErrors(cur);\n      },\n      goodJsonArrayKeys\n    );\n  }\n  get url(): string {\n    return \"%{book}\";\n  }\n  isCatalogue(): this is Catalogue {\n    return true;\n  }\n  isGameSystem(): boolean {\n    return this.gameSystemId === this.id || !this.gameSystemId;\n  }\n  isIdUnique() {\n    return true;\n  }\n  getCatalogue() {\n    return this;\n  }\n  getGameSystem() {\n    if (this.isGameSystem()) return this;\n    return this.gameSystem;\n  }\n  getSystemId(): string {\n    return this.isGameSystem() ? this.id : this.gameSystemId!;\n  }\n  addError(obj: EditorBase, newError: IErrorMessage & { id: string }) {\n    this.removeError(obj, newError.id);\n    if (!obj.errors) {\n      obj.errors = [];\n    }\n    if (!this.errors) {\n      this.errors = [];\n    }\n    obj.errors.push(newError);\n    this.errors.push(newError);\n  }\n  onRemoveError(error: IErrorMessage, recurse = true) {\n    if (this.errors) {\n      const idx = this.errors.indexOf(error);\n      if (idx >= 0) {\n        this.errors.splice(idx, 1);\n      }\n    }\n\n    if (error.other && recurse) {\n      const other = error.other as EditorBase;\n      other.getCatalogue()?.removeError(other, \"duplicate-id-1\", false);\n      other.getCatalogue()?.removeError(other, \"duplicate-id-2\", false);\n    }\n  }\n  removeErrors(obj: EditorBase) {\n    obj.errors?.forEach((o) => this.onRemoveError(o));\n    if (obj instanceof Constraint) {\n      obj.catalogue.updateConstraint(obj as Constraint & EditorBase, true);\n    }\n    delete obj.errors;\n  }\n  removeError(obj: EditorBase, id: string, event = true) {\n    if (obj.errors?.length) {\n      obj.errors = obj.errors.filter((error) => {\n        if (error.id === id) {\n          this.onRemoveError(error, event);\n        }\n        return error.id !== id;\n      });\n    }\n  }\n  *iterateCategoryEntries(): Iterable<Category> {\n    for (const catalogue of this.imports) {\n      for (const category of catalogue.categoryEntries || []) {\n        yield category;\n      }\n    }\n    if (this.categoryEntries) yield* this.categoryEntries;\n  }\n  *iterateCostTypes(): Iterable<BSICostType> {\n    for (const catalogue of this.imports) {\n      for (const costType of catalogue.costTypes || []) {\n        yield costType;\n      }\n    }\n    if (this.costTypes) yield* this.costTypes;\n  }\n\n  *forcesIterator(): Iterable<Force> {\n    for (const catalogue of this.imports) {\n      for (const force of catalogue.forceEntries || []) {\n        yield force;\n      }\n    }\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n  *forcesIteratorRecursive(): Iterable<Force> {\n    if (this.forces) {\n      for (const force of this.forces) {\n        yield force;\n        yield* force.forcesIteratorRecursive();\n      }\n    }\n  }\n\n  *iterateProfileTypes(): Iterable<BSIProfileType> {\n    for (const catalogue of this.imports) {\n      if (catalogue.profileTypes) {\n        yield* catalogue.profileTypes;\n      }\n    }\n\n    if (this.profileTypes) {\n      yield* this.profileTypes;\n    }\n  }\n  *iteratePublications(): Iterable<BSIPublication> {\n    for (const catalogue of this.imports) {\n      for (const publication of catalogue.publications || []) {\n        yield publication;\n      }\n    }\n    for (const publication of this.publications || []) {\n      yield publication;\n    }\n  }\n  *iterateSelectionEntries(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.sharedSelectionEntries || []) {\n        yield entry;\n      }\n      for (const entry of catalogue.sharedSelectionEntryGroups || []) {\n        yield entry;\n      }\n    }\n\n    //if (this.selectionEntries) yield* this.selectionEntries;\n    //if (this.entryLinks) yield* this.entryLinks;\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n  }\n  *iterateAllImported(): Iterable<Base> {\n    const shared = [\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"categoryEntries\",\n    ];\n    const root = [\"rules\", \"entryLinks\", \"profiles\", \"infoGroups\", \"selectionEntries\", \"selectionEntryGroups\"];\n    for (const catalogue of this.importsWithEntries) {\n      for (const key of root) {\n        for (const entry of catalogue[key as keyof Catalogue] || []) {\n          if (entry.import !== false) yield entry;\n        }\n      }\n    }\n    for (const catalogue of this.imports) {\n      for (const key of shared) {\n        for (const entry of catalogue[key as keyof Catalogue] || []) {\n          yield entry;\n        }\n      }\n    }\n    for (const key of root) {\n      for (const entry of this[key as keyof Catalogue] || []) {\n        yield entry;\n      }\n    }\n    for (const key of shared) {\n      for (const entry of this[key as keyof Catalogue] || []) {\n        yield entry;\n      }\n    }\n  }\n\n  *iterateSelectionEntriesWithRoot(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.selectionEntries || []) {\n        if (entry.import !== false) yield entry;\n      }\n      for (const entry of catalogue.entryLinks || []) {\n        if (entry.import !== false) yield entry;\n      }\n\n      for (const entry of catalogue.sharedSelectionEntries || []) {\n        yield entry;\n      }\n      for (const entry of catalogue.sharedSelectionEntryGroups || []) {\n        yield entry;\n      }\n    }\n\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n  }\n\n  *iterateAllRootEntries(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.selectionEntries || []) {\n        if (entry.import !== false) yield entry;\n      }\n      for (const entry of catalogue.entryLinks || []) {\n        if (entry.import !== false) yield entry;\n      }\n    }\n\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n\n  *entriesIterator(): Iterable<Base | Link> {\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n\n  forEachNode(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    if (this.childs) for (const e of this.childs) e.forEachNode(callbackfn);\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.forces;\n  }\n  findOptionById(id: string): Base | undefined {\n    const found = this.index[id];\n    if (found) return found;\n    const found_import = this.imports.find((o) => id in o.index)?.index[id];\n    if (found_import) return found_import;\n    if (this.manager && id) {\n      return this.manager.getLoadedCatalogue(id) ?? (this.manager.getCatalogueInfo({ targetId: id }) as any);\n    }\n    return;\n  }\n  findOptionByIdGlobal(id: string): Base | undefined | BSICatalogue | BSIGameSystem {\n    const found = this.index[id];\n    if (found) return found;\n    const found_import = this.imports.find((o) => id in o.index)?.index[id];\n    if (found_import) return found_import;\n    if (this.manager) {\n      const globalOption = this.manager.findOptionById(id);\n      if (globalOption) return globalOption;\n      return this.manager.getCatalogueInfo({ targetId: id });\n    }\n\n    return;\n  }\n  findOptionsById(id: string): Base[] {\n    const result = [];\n    for (const imported of [this, ...this.imports]) {\n      for (const val of Object.values(imported.index)) {\n        if (val.id && val.id === id) result.push(val);\n      }\n    }\n    return result;\n  }\n  findOptionsByText(text?: string): Base[] {\n    if (!text || !text.trim()) {\n      const result = [];\n      for (const imported of [this, ...this.imports]) {\n        for (const val of Object.values(imported.index) as EditorBase[]) {\n          if ((val as any).getName) {\n            if (val.isLink()) {\n              if (val.target && val.isCategory() && !val.parent?.isForce()) {\n                continue;\n              }\n            }\n            result.push(val);\n          } else {\n            console.log(val);\n          }\n        }\n      }\n      return result;\n    }\n    const result = [];\n    const regx = textSearchRegex(text);\n    for (const imported of [this, ...this.imports]) {\n      for (const val of Object.values(imported.index) as EditorBase[]) {\n        const name = val.getName?.call(val);\n        const id = val.id;\n        if ((name && String(name).match(regx)) || id === text) {\n          if (val.isLink()) {\n            if (val.target && val.isCategory() && !val.parent?.isForce()) {\n              continue;\n            }\n          }\n          result.push(val);\n        }\n      }\n    }\n    return result;\n  }\n  generateNonConflictingId(preferredId?: string): string {\n    if (preferredId && this.findOptionByIdGlobal(preferredId) === undefined) return preferredId;\n    while (true) {\n      const id = generateBattlescribeId();\n      if (this.findOptionById(id) === undefined) return id;\n    }\n  }\n  generateCostIndex(): Record<string, BSICostType> {\n    const result = {} as Record<string, BSICostType>;\n    for (const imported of this.imports) {\n      for (const costType of imported.costTypes || []) {\n        result[costType.id] = costType;\n        this.index[costType.id] = costType as any;\n      }\n    }\n    for (const costType of this.costTypes || []) {\n      result[costType.id] = costType;\n      this.index[costType.id] = costType as any;\n    }\n\n    this.costIndex = result;\n    return result;\n  }\n  generateImports(deleteBadLinks = true) {\n    const importsWithEntries: Record<string, Catalogue> = {};\n    const imports: Record<string, Catalogue> = {};\n    if (this.gameSystem) {\n      this.gameSystem.init(deleteBadLinks);\n      importsWithEntries[this.gameSystem.id] = this.gameSystem;\n      imports[this.gameSystem.id] = this.gameSystem;\n      if (!this.gameSystem.import) this.gameSystem.imports = [];\n    }\n\n    for (const link of this.catalogueLinks || []) {\n      const catalogue = link.target;\n      if (!catalogue) continue;\n      catalogue.init(deleteBadLinks);\n\n      for (const imported of catalogue.imports) {\n        imports[imported.id] = imported;\n      }\n      for (const imported of catalogue.importsWithEntries) {\n        importsWithEntries[imported.id] = imported;\n      }\n\n      if (link.importRootEntries) importsWithEntries[catalogue.id] = catalogue;\n      imports[catalogue.id] = catalogue;\n    }\n\n    this.imports = Object.values(imports);\n    this.importsWithEntries = Object.values(importsWithEntries);\n    return this.imports;\n  }\n  generateForces(categories: Record<string, Category>): Force[] {\n    const result = [];\n    for (const force of this.forcesIterator()) {\n      const copiedForce = clone(force);\n      copiedForce.main_catalogue = this;\n      const forceCategories = [];\n      if (categories[UNCATEGORIZED_ID]?.units?.length) {\n        forceCategories.push(categories[UNCATEGORIZED_ID]);\n      }\n\n      const hasUnits = new Set<string>();\n      for (const link of force.categoryLinks || []) {\n        if (link.targetId in categories) {\n          const copied = clone(link);\n          copied.main_catalogue = this;\n\n          const category = categories[copied.targetId];\n          copied.target = category;\n          copied.childs = category.childs;\n          for (const child of copied.childs) {\n            hasUnits.add(child.id);\n          }\n          forceCategories.push(copied);\n        }\n      }\n      for (const categoryEntry of force.categoryEntries || []) {\n        if (categoryEntry.id in categories) {\n          const category = categories[categoryEntry.id];\n          const copied = clone(category);\n          copied.main_catalogue = this;\n          for (const child of copied.childs) {\n            hasUnits.add(child.id);\n          }\n          forceCategories.push(copied);\n        }\n      }\n\n      const missingUnits = this.units.filter((o) => !hasUnits.has(o.id));\n      if (missingUnits.length) {\n        const illegal_clone = clone(categories[ILLEGAL_ID]);\n        illegal_clone.childs = missingUnits;\n        illegal_clone.units = missingUnits;\n        forceCategories.push(illegal_clone);\n      }\n\n      copiedForce.childs = forceCategories;\n      copiedForce.categories = forceCategories;\n      this.index[copiedForce.id] = copiedForce;\n      if (copiedForce.forceEntries) {\n        copiedForce.generateForces(categories);\n      }\n\n      result.push(copiedForce);\n    }\n    this.forces = result;\n    this.childs = result;\n    return result;\n  }\n  generateCategories(units: Record<string, Base[]>): Record<string, Category> {\n    const result = {} as Record<string, Category>;\n    const set = new Set<string>();\n    for (const category of this.iterateCategoryEntries()) {\n      const copied = clone(category);\n      copied.main_catalogue = this;\n      const foundUnits = units[copied.id] || [];\n      copied.units = foundUnits;\n      copied.childs = foundUnits;\n      this.index[category.id] = category;\n      result[copied.id] = copied;\n      set.add(copied.id);\n    }\n    for (const key in units) {\n      if (!set.has(key)) {\n        const category = this.findOptionById(key) as Category;\n        if (category) {\n          const copied = clone(category);\n          copied.main_catalogue = this;\n          const foundUnits = units[copied.id] || [];\n          copied.units = foundUnits;\n          copied.childs = foundUnits;\n          this.index[category.id] = category;\n          result[copied.id] = copied;\n        }\n      }\n    }\n    const uncategorizedUnits = units[UNCATEGORIZED_ID] || [];\n    const uncategorized = {\n      name: \"Uncategorized\",\n      id: UNCATEGORIZED_ID,\n      hidden: false,\n      units: uncategorizedUnits,\n      childs: uncategorizedUnits,\n      catalogue: this,\n    };\n    result[UNCATEGORIZED_ID] = Object.setPrototypeOf(uncategorized, Category.prototype);\n    const illegal = {\n      name: \"Illegal Units\",\n      id: ILLEGAL_ID,\n      hidden: true,\n      units: [],\n      childs: [],\n      catalogue: this,\n    };\n    result[ILLEGAL_ID] = Object.setPrototypeOf(illegal, Category.prototype);\n    return result;\n  }\n  generateUnits(): Record<string, Base[]> {\n    const units = [];\n    for (const imported of this.importsWithEntries) {\n      const system = imported.isGameSystem();\n      for (const unit of imported.selectionEntries || []) {\n        if (system || unit.import !== false) units.push(unit);\n      }\n      for (const unit of imported.entryLinks || []) {\n        if (system || unit.import !== false) units.push(unit);\n      }\n    }\n    for (const unit of this.selectionEntries || []) {\n      units.push(unit);\n    }\n    for (const unit of this.entryLinks || []) {\n      units.push(unit);\n    }\n    const sortedUnits = sortBy(units, (o) => o.getName()!);\n    this.units = sortedUnits;\n    const result = groupBy(sortedUnits, (o) => o.getPrimaryCategory());\n    return result;\n  }\n  generateExtraConstraints() {\n    const roster_constraints = {} as Record<string, BSIExtraConstraint>;\n    const force_constraints = [] as Array<BSIExtraConstraint>;\n    const by_id_constraints = {} as Record<string, Array<BSIExtraConstraint>>;\n    const force_or_category_ids = new Set<string>();\n    const by_category_force_constraints = {} as Record<string, Array<BSIExtraConstraint>>;\n\n    function localAddBoundCategoryConstraints(\n      catalogue: Catalogue,\n      category: Category,\n      constraints: Iterable<BSIConstraint>\n    ) {\n      const target = category.target || category;\n      for (const constraint of constraints) {\n        const hash = `${constraint.id}::${category.id}`;\n\n        switch (constraint.scope) {\n          case \"parent\":\n            break;\n          case \"roster\":\n            roster_constraints[hash] = category.getBoundConstraint(constraint);\n            break;\n          case \"force\":\n            force_constraints.push(category.getBoundConstraint(constraint));\n            break;\n          case \"primary-category\":\n          case \"primary-catalogue\":\n            /*             console.warn(\n              `unsupported scope:${constraint.scope} from category ${category.getName()} ${category.getId()}`\n            ); */\n            break;\n          default:\n            if (force_or_category_ids.has(constraint.scope)) {\n              addObj(by_id_constraints, constraint.scope, target.getBoundConstraint(constraint));\n              break;\n            }\n            const fromIndex = catalogue.index[constraint.scope];\n            if (fromIndex) {\n              const from_id_extra_constraints = fromIndex.extra_constraints || [];\n              from_id_extra_constraints.push(category.getBoundConstraint(constraint));\n              fromIndex.extra_constraints = from_id_extra_constraints;\n              break;\n            }\n            /*             console.warn(\n              `unsupported scope:${constraint.scope} from category ${category.getName()} ${category.getId()}`\n            ); */\n\n            break;\n        }\n      }\n    }\n    for (const force of this.forcesIteratorRecursive()) {\n      force_or_category_ids.add(force.id);\n      // Add constraints wich are on categoryLinks\n      // for (const category of force.categories) {\n      //   if (category.constraints) {\n      //     localAddBoundCategoryConstraints(\n      //       this,\n      //       category,\n      //       category.constraints.filter((o) => o.scope === \"roster\")\n      //     );\n      //   }\n      // }\n    }\n    for (const category of this.categories) {\n      force_or_category_ids.add(category.id);\n    }\n    for (const category of this.categories) {\n      localAddBoundCategoryConstraints(this, category, category.constraintsIterator());\n      const force_extra_constraints = {} as Record<string, BSIExtraConstraint>;\n      category.forEachNodeCb((node) => {\n        if (!node) return;\n        if (node.isForce()) return;\n        // Categories & Units are always initialized within forces so there is no need to make them extra\n\n        // Add scope:'parent' constrainst to parent entries\n        if (!node.isGroup() && !node.extra_constraints) {\n          node.extra_constraints = node.getChildBoundConstraints(true);\n        }\n        if (node.isCategory() && node.isLink()) return;\n        if (!node.constraints && !node.target?.constraints) return;\n\n        for (const constraint of node.constraintsIterator()) {\n          if (constraint.type === \"min\" || constraint.type === \"exactly\") {\n            const hash = `${constraint.id}::${node.id}`;\n            switch (constraint.scope) {\n              case \"parent\":\n                break;\n              case \"roster\":\n                roster_constraints[hash] = node.getBoundConstraint(constraint);\n                break;\n              case \"force\":\n                force_extra_constraints[hash] = node.getBoundConstraint(constraint);\n                break;\n              case \"primary-category\":\n              case \"primary-catalogue\":\n                // console.warn(`unsupported scope:${constraint.scope} from ${node.getName()} ${node.id}`);\n                break;\n              default:\n                if (force_or_category_ids.has(constraint.scope)) {\n                  addObj(by_id_constraints, constraint.scope, node.getBoundConstraint(constraint));\n                  break;\n                }\n                const fromIndex = this.index[constraint.scope];\n                if (fromIndex) {\n                  const from_id_extra_constraints = fromIndex.extra_constraints || [];\n                  from_id_extra_constraints.push(node.getBoundConstraint(constraint));\n                  fromIndex.extra_constraints = from_id_extra_constraints;\n                  break;\n                }\n                // console.warn(`unsupported scope:${constraint.scope} from ${node.getName()}${node.id}`);\n                break;\n            }\n          }\n        }\n      });\n      by_category_force_constraints[category.getId()] = Object.values(force_extra_constraints);\n    }\n\n    for (const force of this.forcesIteratorRecursive()) {\n      const force_extra_constraints = force.extra_constraints || [];\n      force_extra_constraints.push(...force_constraints);\n      if (force.id in by_id_constraints) {\n        force_extra_constraints.push(...by_id_constraints[force.id]);\n      }\n      if (force_extra_constraints.length) {\n        force.extra_constraints = force_extra_constraints;\n      }\n      for (const category of force.categories) {\n        if (category.getId() in by_category_force_constraints) {\n          force_extra_constraints.push(...by_category_force_constraints[category.getId()]);\n        }\n      }\n      if (force_extra_constraints.length) {\n        force.extra_constraints = force_extra_constraints;\n      }\n    }\n\n    for (const category of this.categories) {\n      const category_extra_constraints = category.extra_constraints || [];\n      if (category.id in by_id_constraints) {\n        category_extra_constraints.push(...by_id_constraints[category.id]);\n      }\n      if (category_extra_constraints.length) {\n        category.extra_constraints = category_extra_constraints;\n      }\n    }\n\n    this.roster_constraints = Object.values(roster_constraints);\n  }\n  async reload(manager: BSCatalogueManager = this.manager) {\n    delete this.initialized;\n    delete this.loaded;\n    delete this.loaded_editor;\n    delete (this as Partial<typeof this>).index;\n    const key = this.isGameSystem() ? \"gameSystem\" : \"catalogue\";\n    const loaded = await manager.loadData({ [key]: this } as any);\n    this.processForEditor();\n    return loaded;\n  }\n  refreshErrors(cur: EditorBase, deleted = false) {\n    if (cur.isLink()) {\n      if (!cur.target) {\n        this.addError(cur, {\n          source: cur,\n          severity: \"error\",\n          msg: `(${cur.editorTypeName}) ${cur.name} has no target`,\n          id: \"no-target\",\n        });\n        if (!this.unresolvedLinks[cur.targetId]?.includes($toRaw(cur)) && !deleted) {\n          addObj(this.unresolvedLinks, cur.targetId, $toRaw(cur));\n        }\n        if (!this.manager.unresolvedLinks![cur.targetId]?.includes($toRaw(cur))) {\n          addObj(this.manager.unresolvedLinks!, cur.targetId, $toRaw(cur));\n        }\n      } else {\n        this.removeError(cur, \"no-target\");\n        popObj(this.unresolvedLinks!, cur.targetId, $toRaw(cur));\n        popObj(this.manager.unresolvedLinks!, cur.targetId, $toRaw(cur));\n      }\n    } else if (cur.isProfile()) {\n      if (!(cur as Profile).typeId) {\n        this.addError(cur, { source: cur, severity: \"error\", msg: \"Profile has no type\", id: \"no-profile-type\" });\n      } else {\n        this.removeError(cur, \"no-profile-type\");\n      }\n    } else if (cur instanceof Condition) {\n      this.updateCondition(cur);\n    }\n  }\n  addToIndex(cur: Base) {\n    if (cur.id) {\n      cur.catalogue = this;\n\n      if (this.manager?.settings?.globalDuplicateIdError) {\n        // /**   Cross catalogue duplicate id check\n        const index = (this.manager as any).index!;\n        if (index[cur.id] && index[cur.id] !== cur) {\n          if (cur.isIdUnique() || index[cur.id].isIdUnique()) {\n            const existing = index[cur.id];\n            const existingCatalogue = existing.getCatalogue();\n            const isCatalogueDifferent = this !== existingCatalogue;\n            if (existingCatalogue && isCatalogueDifferent) {\n              existingCatalogue.addError(existing as EditorBase, {\n                source: existing,\n                severity: \"error\",\n                msg: `Duplicate id ${cur.id} ${cur.getName()}`,\n                id: \"duplicate-id-1\",\n                other: cur,\n                extra: existingCatalogue.name,\n              });\n              existingCatalogue.addError(cur as EditorBase, {\n                source: cur,\n                severity: \"error\",\n                msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n                id: \"duplicate-id-2\",\n                other: existing,\n                extra: this.name,\n              });\n            }\n            this.addError(existing as EditorBase, {\n              source: existing,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id}  ${cur.getName()}`,\n              id: \"duplicate-id-1\",\n              other: cur,\n              extra: isCatalogueDifferent ? existingCatalogue.name : undefined,\n            });\n            this.addError(cur as EditorBase, {\n              source: cur,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n              id: \"duplicate-id-2\",\n              other: existing,\n              extra: isCatalogueDifferent ? this.name : undefined,\n            });\n          }\n        }\n        index[cur.id] = cur;\n      } else {\n        if (this.index[cur.id] && this.index[cur.id] !== cur) {\n          const existing = this.index[cur.id];\n          if (cur.isIdUnique() || existing.isIdUnique() || cur.getName() !== existing.getName()) {\n            this.addError(existing as EditorBase, {\n              source: existing,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${cur.getName()}`,\n              id: \"duplicate-id-1\",\n              other: cur,\n            });\n            this.addError(cur as EditorBase, {\n              source: cur,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n              id: \"duplicate-id-2\",\n              other: existing,\n            });\n          }\n        }\n      }\n\n      this.index[cur.id] = cur;\n      if (this.unresolvedLinks && this.unresolvedLinks[cur.id]) {\n        for (const lnk of [...this.unresolvedLinks[cur.id]]) {\n          if (lnk.isLink() && lnk.catalogue) {\n            this.updateLink(lnk as Link & EditorBase);\n          } else {\n            this.refreshErrors(lnk);\n          }\n        }\n      }\n      if (this.manager?.unresolvedLinks && this.manager.unresolvedLinks[cur.id]?.length) {\n        for (const lnk of [...this.manager.unresolvedLinks[cur.id]]) {\n          if (lnk.isLink()) {\n            lnk.catalogue?.updateLink(lnk as Link & EditorBase);\n          } else {\n            lnk.catalogue?.refreshErrors(lnk as EditorBase);\n          }\n        }\n      }\n    }\n  }\n  removeFromIndex(cur: EditorBase) {\n    if (cur.id && $toRaw(this.index[cur.id]) === $toRaw(cur)) {\n      delete this.index[cur.id];\n    }\n    this.removeErrors(cur);\n    for (const ref of cur.links || []) {\n      delete ref.target;\n      ref.catalogue.refreshErrors(ref);\n    }\n    for (const ref of cur.other_links || []) {\n      ref.catalogue.refreshErrors(ref, true);\n    }\n  }\n  getIndexes(): Record<string, Base>[] {\n    const indexes = [];\n    indexes.push(this.index);\n    for (const importedCatalogue of this.imports) {\n      indexes.push(importedCatalogue.index);\n    }\n    return indexes;\n  }\n  resolveAllLinks(deleteBadLinks = true) {\n    const unresolvedLinks: Array<Link> = [];\n    const unresolvedPublications: Array<BSIInfoLink | BSIRule | BSIProfile> = [];\n    const unresolvedChildIds: Array<BSICondition> = [];\n    const parents: Array<Base> = [];\n    this.index = noObserve() as Record<string, Base>;\n    forEachObjectWhitelist2(\n      this,\n      (cur, parent) => {\n        this.addToIndex(cur);\n        if ((cur as BSIReference).publicationId) {\n          delete (cur as Partial<BSIReference>).publication;\n          unresolvedPublications.push(cur as any);\n        }\n        if (cur.isLink()) {\n          delete (cur as Partial<Link>).target;\n          unresolvedLinks.push(cur);\n          parents.push(parent);\n        }\n        if (hasSharedChildId(cur)) {\n          unresolvedChildIds.push(cur);\n        }\n      },\n      goodKeys\n    );\n\n    const indexes = this.getIndexes();\n    const unresolved = resolveLinks(unresolvedLinks, indexes, parents, deleteBadLinks);\n    resolvePublications(unresolvedPublications, indexes);\n    if (!deleteBadLinks) {\n      this.unresolvedLinks = {};\n      for (const lnk of unresolved) {\n        addObj(this.unresolvedLinks, lnk.targetId, $toRaw(lnk) as Link & EditorBase);\n        delete (lnk as Partial<typeof lnk>).target;\n      }\n    }\n  }\n  removeRef(from: EditorBase, to: EditorBase) {\n    if (!to.links) to.links = [];\n    const idx = to.links.indexOf(from);\n    if (idx >= 0) to.links.splice(idx, 1);\n  }\n  addRef(from: EditorBase, to: EditorBase) {\n    if (!to.links) to.links = [];\n    if (to.links.indexOf(from) === -1) {\n      to.links.push(from);\n    }\n  }\n  hasOtherRef(from: EditorBase, to: EditorBase) {\n    return to.other_links && to.other_links.includes(from);\n  }\n\n  removeOtherRef(from: EditorBase, to: EditorBase) {\n    if (!to.other_links) to.other_links = [];\n    const idx = to.other_links.indexOf(from);\n    if (idx >= 0) to.other_links.splice(idx, 1);\n  }\n  addOtherRef(from: EditorBase, to: EditorBase) {\n    if (!to.other_links) to.other_links = [];\n    if (to.other_links.indexOf(from) === -1) {\n      to.other_links.push(from);\n    }\n  }\n  updateLink(link: Link & EditorBase) {\n    if (link.target) {\n      this.removeRef(link, link.target as EditorBase);\n    }\n    const target = resolveLink(link.targetId, this.getIndexes()) as EditorBase;\n    if (target?.isLink()) {\n      console.warn(`Failed to resolve link (target is a link): ${link.getName()}(${link.id})`);\n      link.catalogue.addError(link, {\n        id: \"bad-link-target\",\n        msg: \"Link target Cannot be a Link\",\n        source: link,\n      });\n      return;\n    } else {\n      link.catalogue.removeError(link, \"bad-link-target\");\n      link.target = target;\n      if (link.target) {\n        this.addRef(link, link.target as EditorBase);\n        const targetType = (link.target as EditorBase).editorTypeName;\n        if (targetType == \"category\") {\n          delete link.type;\n        } else {\n          link.type = targetType;\n        }\n      }\n      this.refreshErrors(link);\n      return link.target !== undefined;\n    }\n  }\n  updateConstraint(constraint: Constraint & EditorBase, deleted = false) {\n    const ids = new Set();\n    const duplicate = new Set();\n    for (const found of constraint.parent?.constraintsIterator() || ([] as Array<Constraint & EditorBase>)) {\n      if (deleted && constraint === found) continue;\n      if (ids.has(found.id)) duplicate.add(found.id);\n      else ids.add(found.id);\n    }\n    for (const found of (constraint.parent?.constraintsIterator() || []) as Array<Constraint & EditorBase>) {\n      if (deleted && constraint === found) continue;\n      if (duplicate.has(found.id)) {\n        found.catalogue?.addError(found, {\n          id: \"duplicate-constraint-id\",\n          msg: \"Duplicate constraints id\",\n          source: constraint,\n        });\n      } else {\n        found.catalogue?.removeError(found, \"duplicate-constraint-id\");\n      }\n    }\n  }\n  updateCondition(condition: (Constraint | Condition) & EditorBase, previousField?: string) {\n    if (condition.scope) {\n      const parent = getModifierOrConditionParent(condition);\n      if (parent && !isScopeValid(parent, condition.scope)) {\n        this.addError(condition, { source: condition, id: \"invalid-scope\", msg: `Invalid scope ${condition.scope}` });\n      } else {\n        this.removeError(condition, \"invalid-scope\");\n      }\n      if (condition.scope && !validScopes.has(condition.scope)) {\n        const scope = this.findOptionById(condition.scope);\n        if (scope) {\n          scope.getCatalogue().addOtherRef(condition, scope as EditorBase);\n        }\n      }\n    }\n    if (condition instanceof Constraint) {\n      return this.updateConstraint(condition as Constraint & EditorBase);\n    }\n    const isInstanceOf = [\"instanceOf\", \"notInstanceOf\"].includes(condition.type);\n    if (previousField && !basicQueryFields.has(previousField)) {\n      const found = isInstanceOf ? this.findOptionByIdGlobal(previousField) : this.findOptionById(previousField);\n      if (found) this.removeOtherRef(condition, found as EditorBase);\n    }\n    if (condition.childId) {\n      if (basicQueryFields.has(condition.childId)) {\n        this.removeError(condition, \"id-not-exist\");\n        return;\n      }\n      const target = isInstanceOf\n        ? this.findOptionByIdGlobal(condition.childId)\n        : this.findOptionById(condition.childId);\n      if (target) {\n        if (!this.hasOtherRef(condition, target as EditorBase)) {\n          this.addOtherRef(condition, target as EditorBase);\n        }\n        this.removeError(condition, \"id-not-exist\");\n        // popObj(this.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n        popObj(this.manager.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n        return;\n      }\n    }\n    this.addError(condition, {\n      source: condition,\n      severity: \"warning\",\n      msg: \"child id does not exist\",\n      id: \"id-not-exist\",\n    });\n    // if (!this.unresolvedLinks![condition.childId]?.includes(condition)) {\n    //   addObj(this.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n    // }\n    addObjIfMissing(this.manager.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n    return;\n  }\n\n  unlinkLink(link: Link & EditorBase) {\n    if (link.target) {\n      this.removeRef(link, link.target as EditorBase);\n    }\n  }\n}\n\nexport function resolveLink(id: string, indexes: Record<string, Base>[]) {\n  for (const index of indexes) {\n    if (id in index) {\n      return index[id];\n    }\n  }\n}\n/**\n * Fills in the `.target` field with the value of the first matching key inside indexes\n * Example: indexes: [{A: 1}, {A: 2}] targetId `A` target would result in `1`\n * @param unresolved The links to resolve\n * @param indexes Array of indexes which match an id to a node\n */\nexport function resolveLinks(\n  unresolved: Link[] = [],\n  indexes: Record<string, Base>[],\n  parents: Base[],\n  deleteBadLinks = true\n) {\n  const length = unresolved.length;\n  const resolved = [];\n\n  // Loops while unresolvedLinks.length\n  // If the length is the same as the start of last iteration, stops.\n  let previousLength = 0;\n  while (unresolved.length !== previousLength) {\n    const currentUnresolved = unresolved;\n    const currentParents = parents;\n    previousLength = currentUnresolved.length;\n    unresolved = [];\n    parents = [];\n\n    for (let i = 0; i < currentUnresolved.length; i++) {\n      const current = currentUnresolved[i];\n      const currentParent = currentParents[i];\n\n      // Find the target, stopping at first found\n      const id = current.targetId;\n      const target = resolveLink(id, indexes);\n      if (target) {\n        if (target.isLink()) {\n          console.warn(`Failed to resolve link (target is a link): ${current.getName()}(${current.id})`);\n        } else {\n          current.target = target;\n          resolved.push(current);\n        }\n        continue;\n      }\n\n      // Resolve again later if unresolved\n      unresolved.push(current);\n      parents.push(currentParent);\n    }\n  }\n\n  // Delete unresolved links\n  if (unresolved.length && deleteBadLinks) {\n    // console.warn(`${length - unresolved.length}/${length} links resolved in ${unresolved[0].catalogue.name}`);\n    // console.log(`unresolved links: ${unresolved.map((o) => `${o.id} -> ${o.targetId}`)}`);\n    for (let i = 0; i < unresolved.length; i++) {\n      const link = unresolved[i];\n      const parent = parents[i];\n      for (const [k, v] of Object.entries(parent)) {\n        if (v === link) delete parent[k as keyof typeof parent];\n\n        if (Array.isArray(v)) {\n          for (const i in v) {\n            const val = v[i];\n            if (val === link) {\n              v.splice(i as any, 1);\n            }\n          }\n        }\n      }\n    }\n  }\n  return unresolved;\n}\n/**\n * Fills in the `.publication` field with the value of the first matching key inside indexes\n * Example: indexes: [{A: 1}, {A: 2}] targetId `A` target would result in `1`\n * @param unresolvedPublications The publications to resolve\n * @param indexes Array of indexes which match an id to a node\n */\nexport function resolvePublications(\n  unresolved: Array<BSIInfoLink | BSIRule | BSIProfile> = [],\n  indexes: Record<string, Base>[]\n) {\n  const nextUnresolved = [];\n  for (const current of unresolved) {\n    for (const index of indexes) {\n      if (current.publicationId! in index) {\n        current.publication = index[current.publicationId!];\n        break;\n      }\n    }\n    nextUnresolved.push(current);\n  }\n}\n\nfunction hasSharedChildId(obj: any): obj is BSICondition {\n  return obj.shared !== false && obj.childId !== undefined;\n}\n\nexport class NoObserve {\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return \"ObjectNoObserve\";\n  }\n}\nexport function noObserve(): object {\n  return new NoObserve();\n}\n","/* unzipit@1.4.3, license MIT */\n/* global SharedArrayBuffer, process */\n\nfunction readBlobAsArrayBuffer(blob) {\n  if (blob.arrayBuffer) {\n    return blob.arrayBuffer();\n  }\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('loadend', () => {\n      resolve(reader.result);\n    });\n    reader.addEventListener('error', reject);\n    reader.readAsArrayBuffer(blob);\n  });\n}\n\nasync function readBlobAsUint8Array(blob) {\n  const arrayBuffer = await readBlobAsArrayBuffer(blob);\n  return new Uint8Array(arrayBuffer);\n}\n\nfunction isBlob(v) {\n  return typeof Blob !== 'undefined' && v instanceof Blob;\n}\n\nfunction isSharedArrayBuffer(b) {\n  return typeof SharedArrayBuffer !== 'undefined' && b instanceof SharedArrayBuffer;\n}\n\nconst isNode =\n    (typeof process !== 'undefined') &&\n    process.versions &&\n    (typeof process.versions.node !== 'undefined') &&\n    (typeof process.versions.electron === 'undefined');\n\nfunction isTypedArraySameAsArrayBuffer(typedArray) {\n  return typedArray.byteOffset === 0 && typedArray.byteLength === typedArray.buffer.byteLength;\n}\n\nclass ArrayBufferReader {\n  constructor(arrayBufferOrView) {\n    this.typedArray = (arrayBufferOrView instanceof ArrayBuffer || isSharedArrayBuffer(arrayBufferOrView))\n       ? new Uint8Array(arrayBufferOrView)\n       : new Uint8Array(arrayBufferOrView.buffer, arrayBufferOrView.byteOffset, arrayBufferOrView.byteLength);\n  }\n  async getLength() {\n    return this.typedArray.byteLength;\n  }\n  async read(offset, length) {\n    return new Uint8Array(this.typedArray.buffer, this.typedArray.byteOffset + offset, length);\n  }\n}\n\nclass BlobReader {\n  constructor(blob) {\n    this.blob = blob;\n  }\n  async getLength() {\n    return this.blob.size;\n  }\n  async read(offset, length) {\n    const blob = this.blob.slice(offset, offset + length);\n    const arrayBuffer = await readBlobAsArrayBuffer(blob);\n    return new Uint8Array(arrayBuffer);\n  }\n  async sliceAsBlob(offset, length, type = '') {\n    return this.blob.slice(offset, offset + length, type);\n  }\n}\n\nclass HTTPRangeReader {\n  constructor(url) {\n    this.url = url;\n  }\n  async getLength() {\n    if (this.length === undefined) {\n      const req = await fetch(this.url, { method: 'HEAD' });\n      if (!req.ok) {\n        throw new Error(`failed http request ${this.url}, status: ${req.status}: ${req.statusText}`);\n      }\n      this.length = parseInt(req.headers.get('content-length'));\n      if (Number.isNaN(this.length)) {\n        throw Error('could not get length');\n      }\n    }\n    return this.length;\n  }\n  async read(offset, size) {\n    if (size === 0) {\n      return new Uint8Array(0);\n    }\n    const req = await fetch(this.url, {\n      headers: {\n        Range: `bytes=${offset}-${offset + size - 1}`,\n      },\n    });\n    if (!req.ok) {\n      throw new Error(`failed http request ${this.url}, status: ${req.status} offset: ${offset} size: ${size}: ${req.statusText}`);\n    }\n    const buffer = await req.arrayBuffer();\n    return new Uint8Array(buffer);\n  }\n}\n\nfunction inflate(data, buf) {\n\tvar u8=Uint8Array;\n\tif(data[0]==3 && data[1]==0) return (buf ? buf : new u8(0));\n\tvar bitsF = _bitsF, bitsE = _bitsE, decodeTiny = _decodeTiny, get17 = _get17;\n\t\n\tvar noBuf = (buf==null);\n\tif(noBuf) buf = new u8((data.length>>>2)<<3);\n\t\n\tvar BFINAL=0, BTYPE=0, HLIT=0, HDIST=0, HCLEN=0, ML=0, MD=0; \t\n\tvar off = 0, pos = 0;\n\tvar lmap, dmap;\n\t\n\twhile(BFINAL==0) {\t\t\n\t\tBFINAL = bitsF(data, pos  , 1);\n\t\tBTYPE  = bitsF(data, pos+1, 2);  pos+=3;\n\t\t//console.log(BFINAL, BTYPE);\n\t\t\n\t\tif(BTYPE==0) {\n\t\t\tif((pos&7)!=0) pos+=8-(pos&7);\n\t\t\tvar p8 = (pos>>>3)+4, len = data[p8-4]|(data[p8-3]<<8);  //console.log(len);//bitsF(data, pos, 16), \n\t\t\tif(noBuf) buf=_check(buf, off+len);\n\t\t\tbuf.set(new u8(data.buffer, data.byteOffset+p8, len), off);\n\t\t\t//for(var i=0; i<len; i++) buf[off+i] = data[p8+i];\n\t\t\t//for(var i=0; i<len; i++) if(buf[off+i] != data[p8+i]) throw \"e\";\n\t\t\tpos = ((p8+len)<<3);  off+=len;  continue;\n\t\t}\n\t\tif(noBuf) buf=_check(buf, off+(1<<17));  // really not enough in many cases (but PNG and ZIP provide buffer in advance)\n\t\tif(BTYPE==1) {  lmap = U.flmap;  dmap = U.fdmap;  ML = (1<<9)-1;  MD = (1<<5)-1;   }\n\t\tif(BTYPE==2) {\n\t\t\tHLIT  = bitsE(data, pos   , 5)+257;  \n\t\t\tHDIST = bitsE(data, pos+ 5, 5)+  1;  \n\t\t\tHCLEN = bitsE(data, pos+10, 4)+  4;  pos+=14;\n\t\t\tfor(var i=0; i<38; i+=2) {  U.itree[i]=0;  U.itree[i+1]=0;  }\n\t\t\tvar tl = 1;\n\t\t\tfor(var i=0; i<HCLEN; i++) {  var l=bitsE(data, pos+i*3, 3);  U.itree[(U.ordr[i]<<1)+1] = l;  if(l>tl)tl=l;  }     pos+=3*HCLEN;  //console.log(itree);\n\t\t\tmakeCodes(U.itree, tl);\n\t\t\tcodes2map(U.itree, tl, U.imap);\n\t\t\t\n\t\t\tlmap = U.lmap;  dmap = U.dmap;\n\t\t\t\n\t\t\tpos = decodeTiny(U.imap, (1<<tl)-1, HLIT+HDIST, data, pos, U.ttree);\n\t\t\tvar mx0 = _copyOut(U.ttree,    0, HLIT , U.ltree);  ML = (1<<mx0)-1;\n\t\t\tvar mx1 = _copyOut(U.ttree, HLIT, HDIST, U.dtree);  MD = (1<<mx1)-1;\n\t\t\t\n\t\t\t//var ml = decodeTiny(U.imap, (1<<tl)-1, HLIT , data, pos, U.ltree); ML = (1<<(ml>>>24))-1;  pos+=(ml&0xffffff);\n\t\t\tmakeCodes(U.ltree, mx0);\n\t\t\tcodes2map(U.ltree, mx0, lmap);\n\t\t\t\n\t\t\t//var md = decodeTiny(U.imap, (1<<tl)-1, HDIST, data, pos, U.dtree); MD = (1<<(md>>>24))-1;  pos+=(md&0xffffff);\n\t\t\tmakeCodes(U.dtree, mx1);\n\t\t\tcodes2map(U.dtree, mx1, dmap);\n\t\t}\n\t\t//var ooff=off, opos=pos;\n\t\twhile(true) {\n\t\t\tvar code = lmap[get17(data, pos) & ML];  pos += code&15;\n\t\t\tvar lit = code>>>4;  //U.lhst[lit]++;  \n\t\t\tif((lit>>>8)==0) {  buf[off++] = lit;  }\n\t\t\telse if(lit==256) {  break;  }\n\t\t\telse {\n\t\t\t\tvar end = off+lit-254;\n\t\t\t\tif(lit>264) { var ebs = U.ldef[lit-257];  end = off + (ebs>>>3) + bitsE(data, pos, ebs&7);  pos += ebs&7;  }\n\t\t\t\t//dst[end-off]++;\n\t\t\t\t\n\t\t\t\tvar dcode = dmap[get17(data, pos) & MD];  pos += dcode&15;\n\t\t\t\tvar dlit = dcode>>>4;\n\t\t\t\tvar dbs = U.ddef[dlit], dst = (dbs>>>4) + bitsF(data, pos, dbs&15);  pos += dbs&15;\n\t\t\t\t\n\t\t\t\t//var o0 = off-dst, stp = Math.min(end-off, dst);\n\t\t\t\t//if(stp>20) while(off<end) {  buf.copyWithin(off, o0, o0+stp);  off+=stp;  }  else\n\t\t\t\t//if(end-dst<=off) buf.copyWithin(off, off-dst, end-dst);  else\n\t\t\t\t//if(dst==1) buf.fill(buf[off-1], off, end);  else\n\t\t\t\tif(noBuf) buf=_check(buf, off+(1<<17));\n\t\t\t\twhile(off<end) {  buf[off]=buf[off++-dst];    buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  }   \n\t\t\t\toff=end;\n\t\t\t\t//while(off!=end) {  buf[off]=buf[off++-dst];  }\n\t\t\t}\n\t\t}\n\t\t//console.log(off-ooff, (pos-opos)>>>3);\n\t}\n\t//console.log(dst);\n\t//console.log(tlen, dlen, off-tlen+tcnt);\n\treturn buf.length==off ? buf : buf.slice(0,off);\n}\nfunction _check(buf, len) {\n\tvar bl=buf.length;  if(len<=bl) return buf;\n\tvar nbuf = new Uint8Array(Math.max(bl<<1,len));  nbuf.set(buf,0);\n\t//for(var i=0; i<bl; i+=4) {  nbuf[i]=buf[i];  nbuf[i+1]=buf[i+1];  nbuf[i+2]=buf[i+2];  nbuf[i+3]=buf[i+3];  }\n\treturn nbuf;\n}\n\nfunction _decodeTiny(lmap, LL, len, data, pos, tree) {\n\tvar bitsE = _bitsE, get17 = _get17;\n\tvar i = 0;\n\twhile(i<len) {\n\t\tvar code = lmap[get17(data, pos)&LL];  pos+=code&15;\n\t\tvar lit = code>>>4; \n\t\tif(lit<=15) {  tree[i]=lit;  i++;  }\n\t\telse {\n\t\t\tvar ll = 0, n = 0;\n\t\t\tif(lit==16) {\n\t\t\t\tn = (3  + bitsE(data, pos, 2));  pos += 2;  ll = tree[i-1];\n\t\t\t}\n\t\t\telse if(lit==17) {\n\t\t\t\tn = (3  + bitsE(data, pos, 3));  pos += 3;\n\t\t\t}\n\t\t\telse if(lit==18) {\n\t\t\t\tn = (11 + bitsE(data, pos, 7));  pos += 7;\n\t\t\t}\n\t\t\tvar ni = i+n;\n\t\t\twhile(i<ni) {  tree[i]=ll;  i++; }\n\t\t}\n\t}\n\treturn pos;\n}\nfunction _copyOut(src, off, len, tree) {\n\tvar mx=0, i=0, tl=tree.length>>>1;\n\twhile(i<len) {  var v=src[i+off];  tree[(i<<1)]=0;  tree[(i<<1)+1]=v;  if(v>mx)mx=v;  i++;  }\n\twhile(i<tl ) {  tree[(i<<1)]=0;  tree[(i<<1)+1]=0;  i++;  }\n\treturn mx;\n}\n\nfunction makeCodes(tree, MAX_BITS) {  // code, length\n\tvar max_code = tree.length;\n\tvar code, bits, n, i, len;\n\t\n\tvar bl_count = U.bl_count;  for(var i=0; i<=MAX_BITS; i++) bl_count[i]=0;\n\tfor(i=1; i<max_code; i+=2) bl_count[tree[i]]++;\n\t\n\tvar next_code = U.next_code;\t// smallest code for each length\n\t\n\tcode = 0;\n\tbl_count[0] = 0;\n\tfor (bits = 1; bits <= MAX_BITS; bits++) {\n\t\tcode = (code + bl_count[bits-1]) << 1;\n\t\tnext_code[bits] = code;\n\t}\n\t\n\tfor (n = 0; n < max_code; n+=2) {\n\t\tlen = tree[n+1];\n\t\tif (len != 0) {\n\t\t\ttree[n] = next_code[len];\n\t\t\tnext_code[len]++;\n\t\t}\n\t}\n}\nfunction codes2map(tree, MAX_BITS, map) {\n\tvar max_code = tree.length;\n\tvar r15 = U.rev15;\n\tfor(var i=0; i<max_code; i+=2) if(tree[i+1]!=0)  {\n\t\tvar lit = i>>1;\n\t\tvar cl = tree[i+1], val = (lit<<4)|cl; // :  (0x8000 | (U.of0[lit-257]<<7) | (U.exb[lit-257]<<4) | cl);\n\t\tvar rest = (MAX_BITS-cl), i0 = tree[i]<<rest, i1 = i0 + (1<<rest);\n\t\t//tree[i]=r15[i0]>>>(15-MAX_BITS);\n\t\twhile(i0!=i1) {\n\t\t\tvar p0 = r15[i0]>>>(15-MAX_BITS);\n\t\t\tmap[p0]=val;  i0++;\n\t\t}\n\t}\n}\nfunction revCodes(tree, MAX_BITS) {\n\tvar r15 = U.rev15, imb = 15-MAX_BITS;\n\tfor(var i=0; i<tree.length; i+=2) {  var i0 = (tree[i]<<(MAX_BITS-tree[i+1]));  tree[i] = r15[i0]>>>imb;  }\n}\n\nfunction _bitsE(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8)                        )>>>(pos&7))&((1<<length)-1);  }\nfunction _bitsF(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16))>>>(pos&7))&((1<<length)-1);  }\n/*\nfunction _get9(dt, pos) {\n\treturn ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8))>>>(pos&7))&511;\n} */\nfunction _get17(dt, pos) {\t// return at least 17 meaningful bytes\n\treturn (dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16) )>>>(pos&7);\n}\nconst U = function(){\n\tvar u16=Uint16Array, u32=Uint32Array;\n\treturn {\n\t\tnext_code : new u16(16),\n\t\tbl_count  : new u16(16),\n\t\tordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n\t\tof0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n\t\texb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n\t\tldef : new u16(32),\n\t\tdf0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n\t\tdxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n\t\tddef : new u32(32),\n\t\tflmap: new u16(  512),  fltree: [],\n\t\tfdmap: new u16(   32),  fdtree: [],\n\t\tlmap : new u16(32768),  ltree : [],  ttree:[],\n\t\tdmap : new u16(32768),  dtree : [],\n\t\timap : new u16(  512),  itree : [],\n\t\t//rev9 : new u16(  512)\n\t\trev15: new u16(1<<15),\n\t\tlhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n\t\tlits : new u32(15000),\n\t\tstrt : new u16(1<<16),\n\t\tprev : new u16(1<<15)\n\t};  \n} ();\n\n(function(){\t\n\tvar len = 1<<15;\n\tfor(var i=0; i<len; i++) {\n\t\tvar x = i;\n\t\tx = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n\t\tx = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n\t\tx = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n\t\tx = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n\t\tU.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n\t}\n\t\n\tfunction pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n\t\n\tfor(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n\t\n\tpushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n\t/*\n\tvar i = 0;\n\tfor(; i<=143; i++) U.fltree.push(0,8);\n\tfor(; i<=255; i++) U.fltree.push(0,9);\n\tfor(; i<=279; i++) U.fltree.push(0,7);\n\tfor(; i<=287; i++) U.fltree.push(0,8);\n\t*/\n\tmakeCodes(U.fltree, 9);\n\tcodes2map(U.fltree, 9, U.flmap);\n\trevCodes (U.fltree, 9);\n\t\n\tpushV(U.fdtree,32,5);\n\t//for(i=0;i<32; i++) U.fdtree.push(0,5);\n\tmakeCodes(U.fdtree, 5);\n\tcodes2map(U.fdtree, 5, U.fdmap);\n\trevCodes (U.fdtree, 5);\n\t\n\tpushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n\t/*\n\tfor(var i=0; i< 19; i++) U.itree.push(0,0);\n\tfor(var i=0; i<286; i++) U.ltree.push(0,0);\n\tfor(var i=0; i< 30; i++) U.dtree.push(0,0);\n\tfor(var i=0; i<320; i++) U.ttree.push(0,0);\n\t*/\n})();\n\nconst crc = {\r\n\ttable : ( function() {\r\n\t   var tab = new Uint32Array(256);\r\n\t   for (var n=0; n<256; n++) {\r\n\t\t\tvar c = n;\r\n\t\t\tfor (var k=0; k<8; k++) {\r\n\t\t\t\tif (c & 1)  c = 0xedb88320 ^ (c >>> 1);\r\n\t\t\t\telse        c = c >>> 1;\r\n\t\t\t}\r\n\t\t\ttab[n] = c;  }    \r\n\t\treturn tab;  })(),\r\n\tupdate : function(c, buf, off, len) {\r\n\t\tfor (var i=0; i<len; i++)  c = crc.table[(c ^ buf[off+i]) & 0xff] ^ (c >>> 8);\r\n\t\treturn c;\r\n\t},\r\n\tcrc : function(b,o,l)  {  return crc.update(0xffffffff,b,o,l) ^ 0xffffffff;  }\r\n};\r\n\r\nfunction inflateRaw(file, buf) {  return inflate(file, buf);  }\n\n/* global module */\n\nconst config = {\n  numWorkers: 1,\n  workerURL: '',\n  useWorkers: false,\n};\n\nlet nextId = 0;\n\n// Requests are put on a queue.\n// We don't send the request to the worker until the worker\n// is finished. This probably adds a small amount of latency\n// but the issue is imagine you have 2 workers. You give worker\n// A x seconds of work to do and worker B y seconds of work to\n// do. You don't know which will finish first. If you give\n// the worker with more work to do the request then you'll\n// waste time.\n\n// note: we can't check `workers.length` for deciding if\n// we've reached `config.numWorkers` because creation the worker\n// is async which means other requests to make workers might\n// come in before a worker gets added to `workers`\nlet numWorkers = 0;\nlet canUseWorkers = true;   // gets set to false if we can't start a worker\nconst workers = [];\nconst availableWorkers = [];\nconst waitingForWorkerQueue = [];\nconst currentlyProcessingIdToRequestMap = new Map();\n\nfunction handleResult(e) {\n  makeWorkerAvailable(e.target);\n  const {id, error, data} = e.data;\n  const request = currentlyProcessingIdToRequestMap.get(id);\n  currentlyProcessingIdToRequestMap.delete(id);\n  if (error) {\n    request.reject(error);\n  } else {\n    request.resolve(data);\n  }\n}\n\n// Because Firefox uses non-standard onerror to signal an error.\nfunction startWorker(url) {\n  return new Promise((resolve, reject) => {\n    const worker = new Worker(url);\n    worker.onmessage = (e) => {\n      if (e.data === 'start') {\n        worker.onerror = undefined;\n        worker.onmessage = undefined;\n        resolve(worker);\n      } else {\n        reject(new Error(`unexpected message: ${e.data}`));\n      }\n    };\n    worker.onerror = reject;\n  });\n}\n\nfunction dynamicRequire(mod, request) {\n  return mod.require ? mod.require(request) : {};\n}\n\nconst workerHelper = (function() {\n  if (isNode) {\n    // We need to use `dynamicRequire` because `require` on it's own will be optimized by webpack.\n    const {Worker} = dynamicRequire(module, 'worker_threads');\n    return {\n      async createWorker(url) {\n        return new Worker(url);\n      },\n      addEventListener(worker, fn) {\n        worker.on('message', (data) => {\n          fn({target: worker, data});\n        });\n      },\n      async terminate(worker) {\n        await worker.terminate();\n      },\n    };\n  } else {\n    return {\n      async createWorker(url) {\n        // I don't understand this security issue\n        // Apparently there is some iframe setting or http header\n        // that prevents cross domain workers. But, I can manually\n        // download the text and do it. I reported this to Chrome\n        // and they said it was fine so \\_()_/\n        try {\n          const worker = await startWorker(url);\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker:', url);\n        }\n\n        let text;\n        try {\n          const req = await fetch(url, {mode: 'cors'});\n          if (!req.ok) {\n            throw new Error(`could not load: ${url}`);\n          }\n          text = await req.text();\n          url = URL.createObjectURL(new Blob([text], {type: 'application/javascript'}));\n          const worker = await startWorker(url);\n          config.workerURL = url;  // this is a hack. What's a better way to structure this code?\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker via fetch:', url);\n        }\n\n        if (text !== undefined) {\n          try {\n            url = `data:application/javascript;base64,${btoa(text)}`;\n            const worker = await startWorker(url);\n            config.workerURL = url;\n            return worker;\n          } catch (e) {\n            console.warn('could not load worker via dataURI');\n          }\n        }\n\n        console.warn('workers will not be used');\n        throw new Error('can not start workers');\n      },\n      addEventListener(worker, fn) {\n        worker.addEventListener('message', fn);\n      },\n      async terminate(worker) {\n        worker.terminate();\n      },\n    };\n  }\n}());\n\nfunction makeWorkerAvailable(worker) {\n  availableWorkers.push(worker);\n  processWaitingForWorkerQueue();\n}\n\nasync function getAvailableWorker() {\n  if (availableWorkers.length === 0 && numWorkers < config.numWorkers) {\n    ++numWorkers;  // see comment at numWorkers declaration\n    try {\n      const worker = await workerHelper.createWorker(config.workerURL);\n      workers.push(worker);\n      availableWorkers.push(worker);\n      workerHelper.addEventListener(worker, handleResult);\n    } catch (e) {\n      // set this global out-of-band (needs refactor)\n      canUseWorkers = false;\n    }\n  }\n  return availableWorkers.pop();\n}\n\n// @param {Uint8Array} src\n// @param {number} uncompressedSize\n// @param {string} [type] mime-type\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawLocal(src, uncompressedSize, type, resolve) {\n  const dst = new Uint8Array(uncompressedSize);\n  inflateRaw(src, dst);\n  resolve(type\n     ? new Blob([dst], {type})\n     : dst.buffer);\n}\n\nasync function processWaitingForWorkerQueue() {\n  if (waitingForWorkerQueue.length === 0) {\n    return;\n  }\n\n  if (config.useWorkers && canUseWorkers) {\n    const worker = await getAvailableWorker();\n    // canUseWorkers might have been set out-of-band (need refactor)\n    if (canUseWorkers) {\n      if (worker) {\n        if (waitingForWorkerQueue.length === 0) {\n          // the queue might be empty while we awaited for a worker.\n          makeWorkerAvailable(worker);\n          return;\n        }\n        const {id, src, uncompressedSize, type, resolve, reject} = waitingForWorkerQueue.shift();\n        currentlyProcessingIdToRequestMap.set(id, {id, resolve, reject});\n        const transferables = [];\n        // NOTE: Originally I thought you could transfer an ArrayBuffer.\n        // The code on this side is often using views into the entire file\n        // which means if we transferred we'd lose the entire file. That sucks\n        // because it means there's an expensive copy to send the uncompressed\n        // data to the worker.\n        //\n        // Also originally I thought we could send a Blob but we'd need to refactor\n        // the code in unzipit/readEntryData as currently it reads the uncompressed\n        // bytes.\n        //\n        //if (!isBlob(src) && !isSharedArrayBuffer(src)) {\n        //  transferables.push(src);\n        //}\n        worker.postMessage({\n          type: 'inflate',\n          data: {\n            id,\n            type,\n            src,\n            uncompressedSize,\n          },\n        }, transferables);\n      }\n      return;\n    }\n  }\n\n  // inflate locally\n  // We loop here because what happens if many requests happen at once\n  // the first N requests will try to async make a worker. Other requests\n  // will then be on the queue. But if we fail to make workers then there\n  // are pending requests.\n  while (waitingForWorkerQueue.length) {\n    const {src, uncompressedSize, type, resolve} = waitingForWorkerQueue.shift();\n    let data = src;\n    if (isBlob(src)) {\n      data = await readBlobAsUint8Array(src);\n    }\n    inflateRawLocal(data, uncompressedSize, type, resolve);\n  }\n}\n\nfunction setOptions(options) {\n  config.workerURL = options.workerURL || config.workerURL;\n  // there's no reason to set the workerURL if you're not going to use workers\n  if (options.workerURL) {\n    config.useWorkers = true;\n  }\n  config.useWorkers = options.useWorkers !== undefined ? options.useWorkers : config.useWorkers;\n  config.numWorkers = options.numWorkers || config.numWorkers;\n}\n\n// It has to take non-zero time to put a large typed array in a Blob since the very\n// next instruction you could change the contents of the array. So, if you're reading\n// the zip file for images/video/audio then all you want is a Blob on which to get a URL.\n// so that operation of putting the data in a Blob should happen in the worker.\n//\n// Conversely if you want the data itself then you want an ArrayBuffer immediately\n// since the worker can transfer its ArrayBuffer zero copy.\n//\n// @param {Uint8Array|Blob} src\n// @param {number} uncompressedSize\n// @param {string} [type] falsy or mimeType string (eg: 'image/png')\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawAsync(src, uncompressedSize, type) {\n  return new Promise((resolve, reject) => {\n    // note: there is potential an expensive copy here. In order for the data\n    // to make it into the worker we need to copy the data to the worker unless\n    // it's a Blob or a SharedArrayBuffer.\n    //\n    // Solutions:\n    //\n    // 1. A minor enhancement, if `uncompressedSize` is small don't call the worker.\n    //\n    //    might be a win period as their is overhead calling the worker\n    //\n    // 2. Move the entire library to the worker\n    //\n    //    Good, Maybe faster if you pass a URL, Blob, or SharedArrayBuffer? Not sure about that\n    //    as those are also easy to transfer. Still slow if you pass an ArrayBuffer\n    //    as the ArrayBuffer has to be copied to the worker.\n    //\n    // I guess benchmarking is really the only thing to try.\n    waitingForWorkerQueue.push({src, uncompressedSize, type, resolve, reject, id: nextId++});\n    processWaitingForWorkerQueue();\n  });\n}\n\nfunction clearArray(arr) {\n  arr.splice(0, arr.length);\n}\n\nasync function cleanup() {\n  for (const worker of workers) {\n    await workerHelper.terminate(worker);\n  }\n  clearArray(workers);\n  clearArray(availableWorkers);\n  clearArray(waitingForWorkerQueue);\n  currentlyProcessingIdToRequestMap.clear();\n  numWorkers = 0;\n  canUseWorkers = true;\n}\n\n/*\nclass Zip {\n  constructor(reader) {\n    comment,  // the comment for this entry\n    commentBytes, // the raw comment for this entry\n  }\n}\n*/\n\nfunction dosDateTimeToDate(date, time) {\n  const day = date & 0x1f; // 1-31\n  const month = (date >> 5 & 0xf) - 1; // 1-12, 0-11\n  const year = (date >> 9 & 0x7f) + 1980; // 0-128, 1980-2108\n\n  const millisecond = 0;\n  const second = (time & 0x1f) * 2; // 0-29, 0-58 (even numbers)\n  const minute = time >> 5 & 0x3f; // 0-59\n  const hour = time >> 11 & 0x1f; // 0-23\n\n  return new Date(year, month, day, hour, minute, second, millisecond);\n}\n\nclass ZipEntry {\n  constructor(reader, rawEntry) {\n    this._reader = reader;\n    this._rawEntry = rawEntry;\n    this.name = rawEntry.name;\n    this.nameBytes = rawEntry.nameBytes;\n    this.size = rawEntry.uncompressedSize;\n    this.compressedSize = rawEntry.compressedSize;\n    this.comment = rawEntry.comment;\n    this.commentBytes = rawEntry.commentBytes;\n    this.compressionMethod = rawEntry.compressionMethod;\n    this.lastModDate = dosDateTimeToDate(rawEntry.lastModFileDate, rawEntry.lastModFileTime);\n    this.isDirectory = rawEntry.uncompressedSize === 0 && rawEntry.name.endsWith('/');\n    this.encrypted = !!(rawEntry.generalPurposeBitFlag & 0x1);\n    this.externalFileAttributes = rawEntry.externalFileAttributes;\n    this.versionMadeBy = rawEntry.versionMadeBy;\n  }\n  // returns a promise that returns a Blob for this entry\n  async blob(type = 'application/octet-stream') {\n    return await readEntryDataAsBlob(this._reader, this._rawEntry, type);\n  }\n  // returns a promise that returns an ArrayBuffer for this entry\n  async arrayBuffer() {\n    return await readEntryDataAsArrayBuffer(this._reader, this._rawEntry);\n  }\n  // returns text, assumes the text is valid utf8. If you want more options decode arrayBuffer yourself\n  async text() {\n    const buffer = await this.arrayBuffer();\n    return decodeBuffer(new Uint8Array(buffer));\n  }\n  // returns text with JSON.parse called on it. If you want more options decode arrayBuffer yourself\n  async json() {\n    const text = await this.text();\n    return JSON.parse(text);\n  }\n}\n\nconst EOCDR_WITHOUT_COMMENT_SIZE = 22;\nconst MAX_COMMENT_SIZE = 0xffff; // 2-byte size\nconst EOCDR_SIGNATURE = 0x06054b50;\nconst ZIP64_EOCDR_SIGNATURE = 0x06064b50;\n\nasync function readAs(reader, offset, length) {\n  return await reader.read(offset, length);\n}\n\n// The point of this function is we want to be able to pass the data\n// to a worker as fast as possible so when decompressing if the data\n// is already a blob and we can get a blob then get a blob.\n//\n// I'm not sure what a better way to refactor this is. We've got examples\n// of multiple readers. Ideally, for every type of reader we could ask\n// it, \"give me a type that is zero copy both locally and when sent to a worker\".\n//\n// The problem is the worker would also have to know the how to handle this\n// opaque type. I suppose the correct solution is to register different\n// reader handlers in the worker so BlobReader would register some\n// `handleZeroCopyType<BlobReader>`. At the moment I don't feel like\n// refactoring. As it is you just pass in an instance of the reader\n// but instead you'd have to register the reader and some how get the\n// source for the `handleZeroCopyType` handler function into the worker.\n// That sounds like a huge PITA, requiring you to put the implementation\n// in a separate file so the worker can load it or some other workaround\n// hack.\n//\n// For now this hack works even if it's not generic.\nasync function readAsBlobOrTypedArray(reader, offset, length, type) {\n  if (reader.sliceAsBlob) {\n    return await reader.sliceAsBlob(offset, length, type);\n  }\n  return await reader.read(offset, length);\n}\n\nconst crc$1 = {\n  unsigned() {\n    return 0;\n  },\n};\n\nfunction getUint16LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100;\n}\n\nfunction getUint32LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100 +\n         uint8View[offset + 2] * 0x10000 +\n         uint8View[offset + 3] * 0x1000000;\n}\n\nfunction getUint64LE(uint8View, offset) {\n  return getUint32LE(uint8View, offset) +\n         getUint32LE(uint8View, offset + 4) * 0x100000000;\n}\n\n/* eslint-disable no-irregular-whitespace */\n// const decodeCP437 = (function() {\n//   const cp437 = '\\u0000 !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n//\n//   return function(uint8view) {\n//     return Array.from(uint8view).map(v => cp437[v]).join('');\n//   };\n// }());\n/* eslint-enable no-irregular-whitespace */\n\nconst utf8Decoder = new TextDecoder();\nfunction decodeBuffer(uint8View, isUTF8) {  /* eslint-disable-line no-unused-vars */ /* lgtm [js/superfluous-trailing-arguments] */\n  if (isSharedArrayBuffer(uint8View.buffer)) {\n    uint8View = new Uint8Array(uint8View);\n  }\n  return utf8Decoder.decode(uint8View);\n  /*\n  AFAICT the UTF8 flat is not set so it's 100% up to the user\n  to self decode if their file is not utf8 filenames\n  return isUTF8\n      ? utf8Decoder.decode(uint8View)\n      : decodeCP437(uint8View);\n  */\n}\n\nasync function findEndOfCentralDirector(reader, totalLength) {\n  const size = Math.min(EOCDR_WITHOUT_COMMENT_SIZE + MAX_COMMENT_SIZE, totalLength);\n  const readStart = totalLength - size;\n  const data = await readAs(reader, readStart, size);\n  for (let i = size - EOCDR_WITHOUT_COMMENT_SIZE; i >= 0; --i) {\n    if (getUint32LE(data, i) !== EOCDR_SIGNATURE) {\n      continue;\n    }\n\n    // 0 - End of central directory signature\n    const eocdr = new Uint8Array(data.buffer, data.byteOffset + i, data.byteLength - i);\n    // 4 - Number of this disk\n    const diskNumber = getUint16LE(eocdr, 4);\n    if (diskNumber !== 0) {\n      throw new Error(`multi-volume zip files are not supported. This is volume: ${diskNumber}`);\n    }\n\n    // 6 - Disk where central directory starts\n    // 8 - Number of central directory records on this disk\n    // 10 - Total number of central directory records\n    const entryCount = getUint16LE(eocdr, 10);\n    // 12 - Size of central directory (bytes)\n    const centralDirectorySize = getUint32LE(eocdr, 12);\n    // 16 - Offset of start of central directory, relative to start of archive\n    const centralDirectoryOffset = getUint32LE(eocdr, 16);\n    // 20 - Comment length\n    const commentLength = getUint16LE(eocdr, 20);\n    const expectedCommentLength = eocdr.length - EOCDR_WITHOUT_COMMENT_SIZE;\n    if (commentLength !== expectedCommentLength) {\n      throw new Error(`invalid comment length. expected: ${expectedCommentLength}, actual: ${commentLength}`);\n    }\n\n    // 22 - Comment\n    // the encoding is always cp437.\n    const commentBytes = new Uint8Array(eocdr.buffer, eocdr.byteOffset + 22, commentLength);\n    const comment = decodeBuffer(commentBytes);\n\n    if (entryCount === 0xffff || centralDirectoryOffset === 0xffffffff) {\n      return await readZip64CentralDirectory(reader, readStart + i, comment, commentBytes);\n    } else {\n      return await readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n    }\n  }\n\n  throw new Error('could not find end of central directory. maybe not zip file');\n}\n\nconst END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE = 0x07064b50;\n\nasync function readZip64CentralDirectory(reader, offset, comment, commentBytes) {\n  // ZIP64 Zip64 end of central directory locator\n  const zip64EocdlOffset = offset - 20;\n  const eocdl = await readAs(reader, zip64EocdlOffset, 20);\n\n  // 0 - zip64 end of central dir locator signature\n  if (getUint32LE(eocdl, 0) !== END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory locator signature');\n  }\n\n  // 4 - number of the disk with the start of the zip64 end of central directory\n  // 8 - relative offset of the zip64 end of central directory record\n  const zip64EocdrOffset = getUint64LE(eocdl, 8);\n  // 16 - total number of disks\n\n  // ZIP64 end of central directory record\n  const zip64Eocdr = await readAs(reader, zip64EocdrOffset, 56);\n\n  // 0 - zip64 end of central dir signature                           4 bytes  (0x06064b50)\n  if (getUint32LE(zip64Eocdr, 0) !== ZIP64_EOCDR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory record signature');\n  }\n  // 4 - size of zip64 end of central directory record                8 bytes\n  // 12 - version made by                                             2 bytes\n  // 14 - version needed to extract                                   2 bytes\n  // 16 - number of this disk                                         4 bytes\n  // 20 - number of the disk with the start of the central directory  4 bytes\n  // 24 - total number of entries in the central directory on this disk         8 bytes\n  // 32 - total number of entries in the central directory            8 bytes\n  const entryCount = getUint64LE(zip64Eocdr, 32);\n  // 40 - size of the central directory                               8 bytes\n  const centralDirectorySize = getUint64LE(zip64Eocdr, 40);\n  // 48 - offset of start of central directory with respect to the starting disk number     8 bytes\n  const centralDirectoryOffset = getUint64LE(zip64Eocdr, 48);\n  // 56 - zip64 extensible data sector                                (variable size)\n  return readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n}\n\nconst CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE = 0x02014b50;\n\nasync function readEntries(reader, centralDirectoryOffset, centralDirectorySize, rawEntryCount, comment, commentBytes) {\n  let readEntryCursor = 0;\n  const allEntriesBuffer = await readAs(reader, centralDirectoryOffset, centralDirectorySize);\n  const rawEntries = [];\n\n  for (let e = 0; e < rawEntryCount; ++e) {\n    const buffer = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + 46);\n    // 0 - Central directory file header signature\n    const signature = getUint32LE(buffer, 0);\n    if (signature !== CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE) {\n      throw new Error(`invalid central directory file header signature: 0x${signature.toString(16)}`);\n    }\n    const rawEntry = {\n      // 4 - Version made by\n      versionMadeBy: getUint16LE(buffer, 4),\n      // 6 - Version needed to extract (minimum)\n      versionNeededToExtract: getUint16LE(buffer, 6),\n      // 8 - General purpose bit flag\n      generalPurposeBitFlag: getUint16LE(buffer, 8),\n      // 10 - Compression method\n      compressionMethod: getUint16LE(buffer, 10),\n      // 12 - File last modification time\n      lastModFileTime: getUint16LE(buffer, 12),\n      // 14 - File last modification date\n      lastModFileDate: getUint16LE(buffer, 14),\n      // 16 - CRC-32\n      crc32: getUint32LE(buffer, 16),\n      // 20 - Compressed size\n      compressedSize: getUint32LE(buffer, 20),\n      // 24 - Uncompressed size\n      uncompressedSize: getUint32LE(buffer, 24),\n      // 28 - File name length (n)\n      fileNameLength: getUint16LE(buffer, 28),\n      // 30 - Extra field length (m)\n      extraFieldLength: getUint16LE(buffer, 30),\n      // 32 - File comment length (k)\n      fileCommentLength: getUint16LE(buffer, 32),\n      // 34 - Disk number where file starts\n      // 36 - Internal file attributes\n      internalFileAttributes: getUint16LE(buffer, 36),\n      // 38 - External file attributes\n      externalFileAttributes: getUint32LE(buffer, 38),\n      // 42 - Relative offset of local file header\n      relativeOffsetOfLocalHeader: getUint32LE(buffer, 42),\n    };\n\n    if (rawEntry.generalPurposeBitFlag & 0x40) {\n      throw new Error('strong encryption is not supported');\n    }\n\n    readEntryCursor += 46;\n\n    const data = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + rawEntry.fileNameLength + rawEntry.extraFieldLength + rawEntry.fileCommentLength);\n    rawEntry.nameBytes = data.slice(0, rawEntry.fileNameLength);\n    rawEntry.name = decodeBuffer(rawEntry.nameBytes);\n\n    // 46+n - Extra field\n    const fileCommentStart = rawEntry.fileNameLength + rawEntry.extraFieldLength;\n    const extraFieldBuffer = data.slice(rawEntry.fileNameLength, fileCommentStart);\n    rawEntry.extraFields = [];\n    let i = 0;\n    while (i < extraFieldBuffer.length - 3) {\n      const headerId = getUint16LE(extraFieldBuffer, i + 0);\n      const dataSize = getUint16LE(extraFieldBuffer, i + 2);\n      const dataStart = i + 4;\n      const dataEnd = dataStart + dataSize;\n      if (dataEnd > extraFieldBuffer.length) {\n        throw new Error('extra field length exceeds extra field buffer size');\n      }\n      rawEntry.extraFields.push({\n        id: headerId,\n        data: extraFieldBuffer.slice(dataStart, dataEnd),\n      });\n      i = dataEnd;\n    }\n\n    // 46+n+m - File comment\n    rawEntry.commentBytes = data.slice(fileCommentStart, fileCommentStart + rawEntry.fileCommentLength);\n    rawEntry.comment = decodeBuffer(rawEntry.commentBytes);\n\n    readEntryCursor += data.length;\n\n    if (rawEntry.uncompressedSize            === 0xffffffff ||\n        rawEntry.compressedSize              === 0xffffffff ||\n        rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n      // ZIP64 format\n      // find the Zip64 Extended Information Extra Field\n      const zip64ExtraField = rawEntry.extraFields.find(e => e.id === 0x0001);\n      if (!zip64ExtraField) {\n        throw new Error('expected zip64 extended information extra field');\n      }\n      const zip64EiefBuffer = zip64ExtraField.data;\n      let index = 0;\n      // 0 - Original Size          8 bytes\n      if (rawEntry.uncompressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include uncompressed size');\n        }\n        rawEntry.uncompressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 8 - Compressed Size        8 bytes\n      if (rawEntry.compressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include compressed size');\n        }\n        rawEntry.compressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 16 - Relative Header Offset 8 bytes\n      if (rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include relative header offset');\n        }\n        rawEntry.relativeOffsetOfLocalHeader = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 24 - Disk Start Number      4 bytes\n    }\n\n    // check for Info-ZIP Unicode Path Extra Field (0x7075)\n    // see https://github.com/thejoshwolfe/yauzl/issues/33\n    const nameField = rawEntry.extraFields.find(e =>\n        e.id === 0x7075 &&\n        e.data.length >= 6 && // too short to be meaningful\n        e.data[0] === 1 &&    // Version       1 byte      version of this extra field, currently 1\n        getUint32LE(e.data, 1), crc$1.unsigned(rawEntry.nameBytes)); // NameCRC32     4 bytes     File Name Field CRC32 Checksum\n                                                                   // > If the CRC check fails, this UTF-8 Path Extra Field should be\n                                                                   // > ignored and the File Name field in the header should be used instead.\n    if (nameField) {\n        // UnicodeName Variable UTF-8 version of the entry File Name\n        rawEntry.fileName = decodeBuffer(nameField.data.slice(5));\n    }\n\n    // validate file size\n    if (rawEntry.compressionMethod === 0) {\n      let expectedCompressedSize = rawEntry.uncompressedSize;\n      if ((rawEntry.generalPurposeBitFlag & 0x1) !== 0) {\n        // traditional encryption prefixes the file data with a header\n        expectedCompressedSize += 12;\n      }\n      if (rawEntry.compressedSize !== expectedCompressedSize) {\n        throw new Error(`compressed size mismatch for stored file: ${rawEntry.compressedSize} != ${expectedCompressedSize}`);\n      }\n    }\n    rawEntries.push(rawEntry);\n  }\n  const zip = {\n    comment,\n    commentBytes,\n  };\n  return {\n    zip,\n    entries: rawEntries.map(e => new ZipEntry(reader, e)),\n  };\n}\n\nasync function readEntryDataHeader(reader, rawEntry) {\n  if (rawEntry.generalPurposeBitFlag & 0x1) {\n    throw new Error('encrypted entries not supported');\n  }\n  const buffer = await readAs(reader, rawEntry.relativeOffsetOfLocalHeader, 30);\n  // note: maybe this should be passed in or cached on entry\n  // as it's async so there will be at least one tick (not sure about that)\n  const totalLength = await reader.getLength();\n\n  // 0 - Local file header signature = 0x04034b50\n  const signature = getUint32LE(buffer, 0);\n  if (signature !== 0x04034b50) {\n    throw new Error(`invalid local file header signature: 0x${signature.toString(16)}`);\n  }\n\n  // all this should be redundant\n  // 4 - Version needed to extract (minimum)\n  // 6 - General purpose bit flag\n  // 8 - Compression method\n  // 10 - File last modification time\n  // 12 - File last modification date\n  // 14 - CRC-32\n  // 18 - Compressed size\n  // 22 - Uncompressed size\n  // 26 - File name length (n)\n  const fileNameLength = getUint16LE(buffer, 26);\n  // 28 - Extra field length (m)\n  const extraFieldLength = getUint16LE(buffer, 28);\n  // 30 - File name\n  // 30+n - Extra field\n  const localFileHeaderEnd = rawEntry.relativeOffsetOfLocalHeader + buffer.length + fileNameLength + extraFieldLength;\n  let decompress;\n  if (rawEntry.compressionMethod === 0) {\n    // 0 - The file is stored (no compression)\n    decompress = false;\n  } else if (rawEntry.compressionMethod === 8) {\n    // 8 - The file is Deflated\n    decompress = true;\n  } else {\n    throw new Error(`unsupported compression method: ${rawEntry.compressionMethod}`);\n  }\n  const fileDataStart = localFileHeaderEnd;\n  const fileDataEnd = fileDataStart + rawEntry.compressedSize;\n  if (rawEntry.compressedSize !== 0) {\n    // bounds check now, because the read streams will probably not complain loud enough.\n    // since we're dealing with an unsigned offset plus an unsigned size,\n    // we only have 1 thing to check for.\n    if (fileDataEnd > totalLength) {\n      throw new Error(`file data overflows file bounds: ${fileDataStart} +  ${rawEntry.compressedSize}  > ${totalLength}`);\n    }\n  }\n  return {\n    decompress,\n    fileDataStart,\n  };\n}\n\nasync function readEntryDataAsArrayBuffer(reader, rawEntry) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const dataView = await readAs(reader, fileDataStart, rawEntry.compressedSize);\n    // make copy?\n    //\n    // 1. The source is a Blob/file. In this case we'll get back TypedArray we can just hand to the user\n    // 2. The source is a TypedArray. In this case we'll get back TypedArray that is a view into a larger buffer\n    //    but because ultimately this is used to return an ArrayBuffer to `someEntry.arrayBuffer()`\n    //    we need to return copy since we need the `ArrayBuffer`, not the TypedArray to exactly match the data.\n    //    Note: We could add another API function `bytes()` or something that returned a `Uint8Array`\n    //    instead of an `ArrayBuffer`. This would let us skip a copy here. But this case only happens for uncompressed\n    //    data. That seems like a rare enough case that adding a new API is not worth it? Or is it? A zip of jpegs or mp3s\n    //    might not be compressed. For now that's a TBD.\n    return isTypedArraySameAsArrayBuffer(dataView) ? dataView.buffer : dataView.slice().buffer;\n  }\n  // see comment in readEntryDateAsBlob\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize);\n  return result;\n}\n\nasync function readEntryDataAsBlob(reader, rawEntry, type) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize, type);\n    if (isBlob(typedArrayOrBlob)) {\n      return typedArrayOrBlob;\n    }\n    return new Blob([isSharedArrayBuffer(typedArrayOrBlob.buffer) ? new Uint8Array(typedArrayOrBlob) : typedArrayOrBlob], {type});\n  }\n  // Here's the issue with this mess (should refactor?)\n  // if the source is a blob then we really want to pass a blob to inflateRawAsync to avoid a large\n  // copy if we're going to a worker.\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize, type);\n  return result;\n}\n\nfunction setOptions$1(options) {\n  setOptions(options);\n}\n\nasync function unzipRaw(source) {\n  let reader;\n  if (typeof Blob !== 'undefined' && source instanceof Blob) {\n    reader = new BlobReader(source);\n  } else if (source instanceof ArrayBuffer || (source && source.buffer && source.buffer instanceof ArrayBuffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (isSharedArrayBuffer(source) || isSharedArrayBuffer(source.buffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (typeof source === 'string') {\n    const req = await fetch(source);\n    if (!req.ok) {\n      throw new Error(`failed http request ${source}, status: ${req.status}: ${req.statusText}`);\n    }\n    const blob = await req.blob();\n    reader = new BlobReader(blob);\n  } else if (typeof source.getLength === 'function' && typeof source.read === 'function') {\n    reader = source;\n  } else {\n    throw new Error('unsupported source type');\n  }\n\n  const totalLength = await reader.getLength();\n\n  if (totalLength > Number.MAX_SAFE_INTEGER) {\n    throw new Error(`file too large. size: ${totalLength}. Only file sizes up 4503599627370496 bytes are supported`);\n  }\n\n  return await findEndOfCentralDirector(reader, totalLength);\n}\n\n// If the names are not utf8 you should use unzipitRaw\nasync function unzip(source) {\n  const {zip, entries} = await unzipRaw(source);\n  return {\n    zip,\n    entries: Object.fromEntries(entries.map(v => [v.name, v])),\n  };\n}\n\nfunction cleanup$1() {\n  cleanup();\n}\n\nexport { HTTPRangeReader, cleanup$1 as cleanup, setOptions$1 as setOptions, unzip, unzipRaw };\n","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ entityName ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nmodule.exports = readDocType;","const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;\n// const octRegex = /0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n    Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n    Number.parseFloat = window.parseFloat;\n}\n\n  \nconst consider = {\n    hex :  true,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    // const options = Object.assign({}, consider);\n    // if(opt.leadingZeros === false){\n    //     options.leadingZeros = false;\n    // }else if(opt.hex === false){\n    //     options.hex = false;\n    // }\n\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    // if(trimmedStr === \"0.0\") return 0;\n    // else if(trimmedStr === \"+0.0\") return 0;\n    // else if(trimmedStr === \"-0.0\") return -0;\n\n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return Number.parseInt(trimmedStr, 16);\n    // } else if (options.parseOct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            const eNotation = match[4] || match[6];\n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(eNotation){ //given number has enotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    // const decimalPart = match[5].substr(1);\n                    // const intPart = trimmedStr.substr(0,trimmedStr.indexOf(\".\"));\n\n                    \n                    // const p = numStr.indexOf(\".\");\n                    // const givenIntPart = numStr.substr(0,p);\n                    // const givenDecPart = numStr.substr(p+1);\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    // if(numTrimmedByZeros === numStr){\n                    //     if(options.leadingZeros) return num;\n                    //     else return str;\n                    // }else return str;\n                    if(numTrimmedByZeros === numStr) return num;\n                    else if(sign+numTrimmedByZeros === numStr) return num;\n                    else return str;\n                }\n\n                if(trimmedStr === numStr) return num;\n                else if(trimmedStr === sign+numStr) return num;\n                // else{\n                //     //number with +/- sign\n                //     trimmedStr.test(/[-+][0-9]);\n\n                // }\n                return str;\n            }\n            // else if(!eNotation && trimmedStr && trimmedStr !== Number(trimmedStr) ) return str;\n            \n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\nmodule.exports = toNumber\n","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\n\nconst regx =\n  '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n  .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"\" },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (!this.options.ignoreAttributes && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          // let val = this.parseTextData(tagExp, this.options.cdataPropName, jPath + \".\" + this.options.cdataPropName, true, false, true);\n          // if(!val) val = \"\";\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true);\n          if(val == undefined) val = \"\";\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) { //TODO: namespace\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, tagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${tagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substr(0, separatorIndex).replace(/\\s\\s*$/, '');\n    tagExp = tagExp.substr(separatorIndex + 1);\n  }\n\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup ){\n            listTagVal += this.j2x(item, level + 1).val;\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level)\n          }\n        } else {\n          listTagVal += this.buildTextValNode(item, key, '', level);\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, '', level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    if (attrStr && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","export const entries = {\n  catalogueLinks: {\n    allowedChildrens: [],\n  },\n  publications: {\n    allowedChildrens: [],\n  },\n  costTypes: {\n    allowedChildrens: [],\n  },\n  profileTypes: {\n    allowedChildrens: [\"characteristicTypes\"],\n  },\n  categoryEntries: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"constraints\", \"modifiers\", \"modifierGroups\"],\n  },\n  categoryLinks: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"constraints\", \"modifiers\", \"modifierGroups\"],\n  },\n  forceEntries: {\n    allowedChildrens: [\n      \"forceEntries\",\n      \"categoryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"costs\",\n    ],\n  },\n  entryLinks: {\n    allowedChildrens: \"type\",\n  },\n  selectionEntryGroups: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  sharedSelectionEntryGroups: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  selectionEntries: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"associations\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  sharedSelectionEntries: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"associations\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  associations: {\n    allowedChildrens: [],\n  },\n  sharedRules: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  rule: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  rules: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  profile: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  profiles: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  sharedProfiles: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  infoGroup: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  infoGroups: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  sharedInfoGroups: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  infoLinks: {\n    allowedChildrens: \"type\", //get from type\n  },\n  modifiers: {\n    allowedChildrens: [\"conditions\", \"conditionGroups\", \"repeats\"],\n  },\n  modifierGroups: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"conditions\", \"conditionGroups\", \"repeats\"],\n  },\n  conditions: {\n    allowedChildrens: [],\n  },\n  conditionGroups: {\n    allowedChildrens: [\"conditions\", \"conditionGroups\"],\n  },\n  catalogue: {\n    allowedChildrens: [\n      \"catalogueLinks\",\n      \"publications\",\n      \"costTypes\",\n      \"profileTypes\",\n      \"categoryEntries\",\n      \"forceEntries\",\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"selectionEntries\",\n      \"entryLinks\",\n      \"infoLinks\",\n      \"infoGroups\",\n      \"rules\",\n    ],\n  },\n\n  gameSystem: {\n    allowedChildrens: [\n      \"publications\",\n      \"costTypes\",\n      \"profileTypes\",\n      \"categoryEntries\",\n      \"forceEntries\",\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"selectionEntries\",\n      \"entryLinks\",\n      \"infoLinks\",\n      \"infoGroups\",\n      \"rules\",\n    ],\n  },\n};\n","import { unzip } from \"unzipit\";\nimport { X2jOptionsOptional, XMLParser, XMLBuilder, XmlBuilderOptionsOptional } from \"fast-xml-parser\";\nimport { forEachValueRecursive, hashFnv32a, isObject, removePrefix, to_snake_case } from \"./bs_helpers\";\nimport { rootToJson, getDataObject, goodJsonArrayKeys } from \"./bs_main\";\nimport type { BSICatalogue, BSIGameSystem } from \"./bs_types\";\nimport type { Catalogue } from \"./bs_main_catalogue\";\nexport const containerTags = {\n  categories: \"category\",\n  catalogueLinks: \"catalogueLink\",\n  categoryEntries: \"categoryEntry\",\n  categoryLinks: \"categoryLink\",\n  characteristics: \"characteristic\",\n  characteristicTypes: \"characteristicType\",\n  conditions: \"condition\",\n  conditionGroups: \"conditionGroup\",\n  constraints: \"constraint\",\n  costs: \"cost\",\n  costLimits: \"costLimit\",\n  costTypes: \"costType\",\n  entryLinks: \"entryLink\",\n  forceEntries: \"forceEntry\",\n  infoGroups: \"infoGroup\",\n  infoLinks: \"infoLink\",\n  forces: \"force\",\n  modifiers: \"modifier\",\n  modifierGroups: \"modifierGroup\",\n  profiles: \"profile\",\n  profileTypes: \"profileType\",\n  publications: \"publication\",\n  repeats: \"repeat\",\n  rules: \"rule\",\n  selections: \"selection\",\n  selectionEntries: \"selectionEntry\",\n  selectionEntryGroups: \"selectionEntryGroup\",\n  sharedInfoGroups: \"infoGroup\",\n  sharedProfiles: \"profile\",\n  sharedRules: \"rule\",\n  sharedSelectionEntries: \"selectionEntry\",\n  sharedSelectionEntryGroups: \"selectionEntryGroup\",\n\n  associations: \"association\",\n} as Record<string, string | undefined>;\nexport const textNodeTags = new Set([\"description\", \"readme\", \"comment\"]);\nimport { entries } from \"./entries\";\n\nconst escapedHtml = /&(?:amp|lt|gt|quot|#39|apos);/g;\nconst htmlUnescapes = {\n  \"&amp;\": \"&\",\n  \"&apos;\": \"'\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&quot;\": '\"',\n  \"&#39;\": \"'\",\n} as Record<string, string | undefined>;\n\nconst unescape = (string: string) =>\n  escapedHtml.test(string) ? string.replace(escapedHtml, (match) => htmlUnescapes[match]!) : string;\n\nconst containers = {} as Record<string, string>;\nfor (const key in containerTags) {\n  containers[containerTags[key]!] = key;\n}\nconst allowed = {} as Record<string, Set<string> | string>;\nfor (const [key, value] of Object.entries(entries)) {\n  if (typeof value.allowedChildrens === \"string\") {\n    allowed[key] = value.allowedChildrens;\n  } else {\n    allowed[key] = new Set(value.allowedChildrens);\n  }\n}\n\nexport function xmlToJson(data: string) {\n  const options: X2jOptionsOptional = {\n    allowBooleanAttributes: true,\n    ignoreAttributes: false,\n    attributeNamePrefix: \"\",\n    textNodeName: \"$text\",\n    parseAttributeValue: true,\n    processEntities: false,\n    parseTagValue: false,\n    ignoreDeclaration: true,\n    alwaysCreateTextNode: true,\n\n    isArray: (tagName: string, jPath: string, isLeafNode: boolean, isAttribute: boolean) => {\n      \n      return !isAttribute && tagName in containers;\n    },\n    attributeValueProcessor: (name, val) => unescape(val),\n    tagValueProcessor: (name, val) => unescape(val),\n  };\n  return new XMLParser(options).parse(data);\n}\n\nexport async function unzipFolder(file: string | ArrayBuffer | Blob, path: string) {\n  const unzipped = await unzip(file);\n  const result = {} as Record<string, ArrayBuffer | string>;\n  console.log(\"unzipping folder\", unzipped, \"path\", path);\n  for (const entry in unzipped.entries) {\n    const value = unzipped.entries[entry];\n    if (value.isDirectory) {\n      // folder\n      continue;\n    }\n    const file = removePrefix(removePrefix(entry, path), \"/\");\n    if (file.startsWith(\".\")) {\n      // git file\n      continue;\n    }\n    const data = isZipExtension(file) ? await value.arrayBuffer() : await value.text();\n    result[file] = data;\n  }\n  return result;\n}\n\nexport async function unzipFile(file: string | ArrayBuffer | Blob): Promise<string> {\n  if (typeof file === \"string\") {\n    var enc = new TextEncoder();\n    file = enc.encode(file);\n  }\n  const unzipped = await unzip(file);\n  for (const entry of Object.values(unzipped.entries)) {\n    const data = await entry.text();\n    return data;\n  }\n  throw \"unzipFile failed: No Entries\";\n}\n\nconst zipExtensions = [\"gstz\", \"zip\", \"catz\"];\nconst allowedExtensions = [\"gst\", \"gstz\", \"xml\", \"zip\", \"cat\", \"catz\", \"json\"];\nexport function removeExtension(extension_or_file: string) {\n  const idx = extension_or_file.lastIndexOf(\".\");\n  if (idx === -1) return extension_or_file;\n  return extension_or_file.substring(0, idx);\n}\nexport function getExtension(extension_or_file: string) {\n  const extension = extension_or_file.split(\".\").pop()!.toLowerCase();\n  return extension;\n}\nexport function isZipExtension(extension_or_file: string) {\n  const extension = getExtension(extension_or_file);\n  return zipExtensions.includes(extension);\n}\nexport function isAllowedExtension(file: string) {\n  const fileExtension = getExtension(file);\n  if (!allowedExtensions.includes(fileExtension)) {\n    return false;\n  }\n  return true;\n}\nconst oldBuggedTypes = {\n  sharedRules: \"shareRule\",\n  sharedProfiles: \"sharedProfile\",\n  sharedInfoGroups: \"sharedInfoGroup\",\n  sharedSelectionEntries: \"sharedSelectionEntry\",\n  sharedSelectionEntryGroups: \"sharedSelectionEntryGroup\",\n} as Record<string, string>;\n/**\n * Converts a {profiles: [{profile: {}}]} to {profiles: [{}]}\n * From https://github.com/BlueWinds/bsd-schema/blob/main/index.js\n */\n\nexport function normalize(x: any) {\n  for (let attr in x) {\n    if (x[attr] === \"\") {\n      delete x[attr];\n    } else if (containerTags[attr] && x[attr]) {\n\n      if (attr in oldBuggedTypes) {\n        const normal = x[attr][containerTags[attr] as string];\n        const old = x[attr][oldBuggedTypes[attr]];\n        x[attr] = [...(Array.isArray(normal) ? normal : []), ...(Array.isArray(old) ? old : [])];\n        x[attr]?.forEach(normalize);\n      } else {\n        const val = x[attr][containerTags[attr] as string];\n\n      // Remove empty arrays that become an incorrect element\n        if (Array.isArray(val)){\n          x[attr] = val;\n          x[attr]?.forEach(normalize);\n        }\n        else if (isObject(x[attr])) {\n          delete x[attr]\n        } \n      }\n    } else if (textNodeTags.has(attr)) {\n      x[attr] = x[attr][\"$text\"] ?? \"\";\n    }\n  }\n  return x;\n}\nexport function is_allowed(x: any, parentKey: string, k: string) {\n  const lookedUp = allowed[k];\n  if (typeof lookedUp === \"string\") {\n    return x.target[lookedUp] === parentKey;\n  }\n  return lookedUp?.has(parentKey);\n}\nexport function clean(x: any, k: string) {\n  const lookedUp = allowed[k];\n  const allowedChilds = (typeof lookedUp === \"string\" ? allowed[x[lookedUp]] : lookedUp) as Set<string>;\n  for (let attr in x) {\n    if (attr in containerTags && Array.isArray(x[attr])) {\n      if (allowedChilds && !allowedChilds.has(attr)) {\n        delete x[attr];\n      } else {\n        x[attr].forEach((o: any) => clean(o, attr));\n      }\n    }\n  }\n}\nconst empty = new Set<string>();\nexport function allowed_children(obj: any, key: string): Set<string> {\n  let result = allowed[key];\n  if (typeof result === \"string\") {\n    const val = obj[result];\n    if (val) {\n      const new_key = toPlural(val);\n      if (typeof new_key !== \"string\" || new_key === result) {\n        return empty;\n      }\n      result = allowed[new_key];\n    }\n  }\n  if (!result) {\n    return empty;\n  }\n  return result as Set<string>;\n}\nexport function BSXmlToJson(data: string) {\n  const result = xmlToJson(data);\n  normalize(getDataObject(result));\n  const type = result.catalogue ? \"catalogue\" : \"gameSystem\";\n  if (!result.catalogue) {\n    result.playable = 0;\n    result.id = 1000;\n  } else {\n    result.playable = 1;\n    result.id = hashFnv32a(result.catalogue.id);\n    result.include = [1000];\n  }\n\n  const content = result[type];\n  result.name = content.name;\n  result.short = to_snake_case(content.name);\n  result.playable = !Boolean(content.library);\n  result.version = content.battleScribeVersion;\n  result.nrversion = content.revision;\n  return result;\n}\n\nexport async function convertToJson(data: any, extension: string) {\n  extension = getExtension(extension);\n  switch (extension) {\n    case \"xml\":\n    case \"cat\":\n    case \"gst\":\n      return BSXmlToJson(data);\n    case \"zip\":\n    case \"catz\":\n    case \"gstz\":\n      return BSXmlToJson(await unzipFile(data));\n    case \"json\":\n      return JSON.parse(data);\n    default:\n      throw new Error(\"Extension not supported \" + extension);\n  }\n}\n\nexport function toSingle(key: string) {\n  return containerTags[key];\n}\n\nexport function toPlural(key: string) {\n  return containers[key];\n}\nconst skipKeys = new Set([\"?xml\", \"$text\", \"_\"]);\nfunction renestChilds(obj: any) {\n  for (const [key, value] of Object.entries(obj)) {\n    if (textNodeTags.has(key)) {\n      obj[key] = Array.isArray(value) ? value : [value];\n    } else if (Array.isArray(value) && !skipKeys.has(key)) {\n      obj[key] = [{ [toSingle(key)!]: value }];\n    }\n  }\n}\nfunction putAttributesIn$(first: any) {\n  forEachValueRecursive(first, (current) => {\n    if (typeof current === \"object\") {\n      renestChilds(current);\n    }\n  });\n  forEachValueRecursive(first, (current) => {\n    if (typeof current === \"object\") {\n      for (const [key, value] of Object.entries(current)) {\n        if (Array.isArray(value)) continue;\n        if (skipKeys.has(key) || textNodeTags.has(key)) continue;\n        if (isObject(value)) continue;\n        current[`_${key}`] = value;\n        delete current[key];\n      }\n    }\n  });\n  return first;\n}\n\nexport function convertToXml(data: BSICatalogue | Catalogue | BSIGameSystem) {\n  const json = JSON.parse(rootToJson(data));\n  putAttributesIn$(json);\n  const options: XmlBuilderOptionsOptional = {\n    textNodeName: \"$text\",\n    format: true,\n    attributeNamePrefix: \"_\",\n    ignoreAttributes: false,\n    suppressBooleanAttributes: false,\n    suppressEmptyNode: true,\n  };\n  if (json.gameSystem) {\n    json.gameSystem._xmlns = \"http://www.battlescribe.net/schema/gameSystemSchema\";\n  }\n  if (json.catalogue) {\n    json.catalogue._xmlns = \"http://www.battlescribe.net/schema/catalogueSchema\";\n  }\n  const builder = new XMLBuilder(options);\n  const xml = builder.build(json);\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n` + xml;\n}\n","import { Base, Condition, Constraint, Link, Modifier, ModifierGroup, Profile, goodJsonKeys } from \"./bs_main\";\nimport { Catalogue, CatalogueLink, EditorBase } from \"./bs_main_catalogue\";\nimport { conditionToString, fieldToText, getModifierOrConditionParent, modifierToString } from \"./bs_modifiers\";\nimport {\n  BSICondition,\n  BSIConditionGroup,\n  BSIConstraint,\n  BSIModifier,\n  BSIModifierGroup,\n  BSIProfile,\n  BSIRepeat,\n} from \"./bs_types\";\nimport { BSCatalogueManager } from \"./bs_system\";\nimport { isObject, type MaybeArray } from \"./bs_helpers\";\nimport { textNodeTags } from \"./bs_convert\";\nimport { validChildIds, validScopes } from \"./bs_condition\";\n\nexport interface CategoryEntry {\n  name: string;\n  type: ItemKeys;\n  links?: ItemKeys;\n  icon: string;\n}\n\nexport type ItemTypes = (\n  | Base\n  | Link\n  | Catalogue\n  | BSIModifier\n  | BSIModifierGroup\n  | BSICondition\n  | BSIConditionGroup\n  | BSIConstraint\n) & {\n  parentKey: ItemKeys;\n  editorTypeName: ItemTypeNames;\n};\nexport const possibleChildren: ItemKeys[] = [\n  // Catalogue stuff\n  \"publications\",\n  \"costTypes\",\n  \"profileTypes\",\n  \"sharedProfiles\",\n  \"sharedRules\",\n\n  // Modifiable\n  \"infoLinks\",\n  \"profiles\",\n  \"rules\",\n  \"infoGroups\",\n  \"sharedInfoGroups\",\n\n  // Children\n  \"categoryEntries\",\n  // \"categoryLinks\", BS does not show category links\n  \"forceEntries\",\n  \"selectionEntries\",\n  \"selectionEntryGroups\",\n  \"entryLinks\",\n\n  // Constraints and modifiers\n  \"constraints\",\n  \"conditions\",\n  \"modifiers\",\n  \"modifierGroups\",\n  \"repeats\",\n  \"conditionGroups\",\n];\nexport const systemCategories: CategoryEntry[] = [\n  {\n    type: \"publications\",\n    name: \"Publications\",\n    icon: \"publication.png\",\n  },\n  {\n    type: \"costTypes\",\n    name: \"Cost Types\",\n    icon: \"cost.png\",\n  },\n  {\n    type: \"profileTypes\",\n    name: \"Profile Types\",\n    icon: \"profileType.png\",\n  },\n  {\n    type: \"categoryEntries\",\n    name: \"Category Entries\",\n    icon: \"category.png\",\n  },\n  {\n    type: \"forceEntries\",\n    name: \"Force Entries\",\n    icon: \"force.png\",\n  },\n  {\n    type: \"sharedSelectionEntries\",\n    name: \"Shared Selection Entries\",\n    icon: \"selectionEntryLink.png\",\n  },\n  {\n    type: \"sharedSelectionEntryGroups\",\n    name: \"Shared Selection Entry Groups\",\n    icon: \"shared_groups.png\",\n  },\n  {\n    type: \"sharedProfiles\",\n    name: \"Shared Profiles\",\n    icon: \"shared_profiles.png\",\n  },\n  {\n    type: \"sharedRules\",\n    name: \"Shared Rules\",\n    icon: \"shared_rules.png\",\n  },\n  {\n    type: \"sharedInfoGroups\",\n    name: \"Shared Info Groups\",\n    icon: \"infoGroup.png\",\n  },\n  {\n    type: \"rules\",\n    links: \"infoLinks\",\n    name: \"Root Rules\",\n    icon: \"rule.png\",\n  },\n  {\n    type: \"selectionEntries\",\n    links: \"entryLinks\",\n    name: \"Root Selection Entries\",\n    icon: \"selectionEntry.png\",\n  },\n];\nexport const catalogueCategories: CategoryEntry[] = [\n  {\n    type: \"catalogueLinks\",\n    name: \"Catalogue Links\",\n    icon: \"catalogueLink.png\",\n  },\n  ...systemCategories,\n];\nexport type ItemTypeNames =\n  | \"catalogue\"\n  | \"gameSystem\"\n  | \"selectionEntry\"\n  | \"selectionEntryGroup\"\n  | \"category\"\n  | \"force\"\n  | \"selectionEntryLink\"\n  | \"selectionEntryGroupLink\"\n  | \"categoryLink\"\n  | \"catalogueLink\"\n  | \"profile\"\n  | \"rule\"\n  | \"profileType\"\n  | \"characteristic\"\n  | \"characteristicType\"\n  | \"publication\"\n  | \"infoGroup\"\n  | \"infoLink\"\n  | \"association\"\n  | \"constraint\"\n  | \"condition\"\n  | \"modifier\"\n  | \"modifierGroup\"\n  | \"repeat\"\n  | \"conditionGroup\"\n  | \"cost\"\n  | \"costType\"\n  | \"link\"\n  | \"profileLink\"\n  | \"ruleLink\"\n  | \"infoGroupLink\";\n\nexport type ItemKeys =\n  // Entries\n  | \"selectionEntries\"\n  | \"sharedSelectionEntries\"\n  | \"selectionEntryGroups\"\n  | \"sharedSelectionEntryGroups\"\n  | \"entryLinks\"\n  | \"forceEntries\"\n  | \"categoryEntries\"\n  | \"categoryLinks\"\n\n  //\n  | \"catalogueLinks\"\n  | \"publications\"\n  | \"costTypes\"\n  | \"profileTypes\"\n  | \"sharedProfiles\"\n  | \"sharedRules\"\n  | \"sharedInfoGroups\"\n\n  // Modifiable\n  | \"infoLinks\"\n  | \"profiles\"\n  | \"rules\"\n  | \"infoGroups\"\n\n  // Constraints and modifiers\n  | \"constraints\"\n  | \"conditions\"\n  | \"modifiers\"\n  | \"modifierGroups\"\n  | \"repeats\"\n  | \"conditionGroups\";\n\nexport function getTypeLabel(key: string, obj?: any): string {\n  switch (key) {\n    case \"selectionEntry\":\n      return \"Entry\";\n    case \"selectionEntryGroup\":\n      return \"Group\";\n    case \"selectionEntryLink\":\n      return \"Entry (link)\";\n    case \"selectionEntryGroupLink\":\n      return \"Group (link)\";\n\n    case \"force\":\n      return \"Force\";\n    case \"category\":\n      return \"Category\";\n    case \"categoryLink\":\n      return \"Category (link)\";\n\n    case \"catalogueLink\":\n      return \"Catalogue (link)\";\n    case \"publication\":\n      return \"Publication\";\n    case \"costType\":\n      return \"Cost Type\";\n    case \"costs\":\n      return \"Cost\";\n\n    case \"link\":\n      return \"Link\";\n    case \"profileType\":\n      return \"Profile Type\";\n    case \"profile\":\n      return \"Profile\";\n    case \"rule\":\n      return \"Rule\";\n    case \"infoLink\":\n      return \"Info (link)\";\n    case \"infoGroup\":\n      return \"Info Group\";\n    case \"profileLink\":\n      return \"Profile\";\n    case \"ruleLink\":\n      return \"Rule (link)\";\n    case \"infoGroupLink\":\n      return \"Info Group (link)\";\n    case \"characteristic\":\n      return \"Characteristic\";\n    case \"characteristicType\":\n      return \"Characteristic Type\";\n\n    case \"constraint\":\n      return \"Constraint\";\n    case \"condition\":\n      return \"Condition\";\n    case \"modifier\":\n      return \"Modifier\";\n    case \"modifierGroup\":\n      return \"Modifier Group\";\n    case \"repeat\":\n      return \"Repeat\";\n    case \"conditionGroup\":\n      return \"Condition Group\";\n    case \"catalogue\":\n      return \"Catalogue\";\n    case \"gameSystem\":\n      return \"Game System\";\n    default:\n      console.warn(\"unknown getTypeLabel key\", key);\n      return key as any;\n  }\n}\nexport function getTypeName(key: string, obj?: any): ItemTypeNames {\n  switch (key) {\n    case \"selectionEntries\":\n      return \"selectionEntry\";\n    case \"selectionEntryGroups\":\n      return \"selectionEntryGroup\";\n\n    case \"sharedSelectionEntries\":\n      return obj?.targetId ? \"selectionEntryLink\" : \"selectionEntry\";\n    case \"sharedSelectionEntryGroups\":\n      return obj?.targetId ? \"selectionEntryLink\" : \"selectionEntryGroup\";\n\n    case \"entryLinks\":\n      return obj?.target ? ((obj.target.editorTypeName + \"Link\") as any) : \"link\";\n    case \"forceEntries\":\n      return \"force\";\n    case \"categoryEntries\":\n      return \"category\";\n    case \"categoryLinks\":\n      return \"categoryLink\";\n\n    case \"catalogueLinks\":\n      return \"catalogueLink\";\n    case \"publications\":\n      return \"publication\";\n    case \"costTypes\":\n      return \"costType\";\n    case \"costs\":\n      return \"cost\";\n\n    case \"profileTypes\":\n      return \"profileType\";\n    case \"profiles\":\n      return \"profile\";\n    case \"rules\":\n      return \"rule\";\n    case \"characteristics\":\n      return \"characteristic\";\n    case \"characteristicTypes\":\n      return \"characteristicType\";\n    case \"sharedProfiles\":\n      return \"profile\";\n    case \"sharedRules\":\n      return \"rule\";\n    case \"sharedInfoGroups\":\n      return \"infoGroup\";\n\n    case \"infoLinks\":\n      return obj ? (`${obj.type || \"info\"}Link` as ItemTypeNames) : \"infoLink\";\n    case \"infoGroups\":\n      return \"infoGroup\";\n\n    case \"associations\":\n      return \"association\";\n    case \"constraints\":\n      return \"constraint\";\n    case \"conditions\":\n      return \"condition\";\n    case \"modifiers\":\n      return \"modifier\";\n    case \"modifierGroups\":\n      return \"modifierGroup\";\n    case \"repeats\":\n      return \"repeat\";\n    case \"conditionGroups\":\n      return \"conditionGroup\";\n    case \"catalogue\":\n    case \"gameSystem\":\n      return key;\n    default:\n      console.warn(\"unknown getTypeName key\", key);\n      return key as any;\n  }\n}\n\nexport function getNameExtra(obj: EditorBase, _refs = true, _type = true): string {\n  const type = obj.parentKey;\n  const pieces = [];\n  switch (type) {\n    case \"infoLinks\":\n      if ([\"profiles\", \"sharedProfiles\"].includes((obj.target as EditorBase)?.parentKey) && _type) {\n        pieces.push((obj.target as unknown as BSIProfile).typeName);\n      }\n      break;\n    case \"sharedProfiles\":\n    case \"profiles\":\n      if (_type) {\n        pieces.push((obj as unknown as BSIProfile).typeName);\n      }\n      break;\n    case \"selectionEntries\":\n    case \"sharedSelectionEntries\":\n      if (obj.isEntry() && obj.getType() !== \"upgrade\" && _type) {\n        pieces.push(obj.getType());\n      }\n      break;\n    case \"entryLinks\":\n      if (obj.target && obj.isEntry() && obj.getType() !== \"upgrade\" && _type) {\n        pieces.push(obj.getType());\n      }\n      break;\n    case \"modifierGroups\":\n      pieces.push(`(${(obj.modifiers?.length || 0) + (obj.modifierGroups?.length || 0)})`);\n      break;\n    default:\n      break;\n  }\n  const refcount = (obj.links?.length ?? 0) + (obj.other_links?.length ?? 0);\n  if (refcount && _refs) {\n    const s = refcount === 1 ? \"\" : \"s\";\n    pieces.push(`(${refcount || 0} ref${s})`);\n  }\n  if (obj.comment && obj.comment[0]) {\n    pieces.push(\"# \" + obj.comment);\n  }\n  if (obj.isCollective && obj.isCollective()) {\n    pieces.push(\"(collective)\");\n  }\n  return pieces.join(\" \");\n}\n\nexport function getName(obj: any): string {\n  const type = obj.parentKey;\n  switch (type) {\n    case \"selectionEntries\":\n    case \"sharedSelectionEntries\":\n    case \"selectionEntryGroups\":\n    case \"sharedSelectionEntryGroups\":\n    case \"entryLinks\":\n    case \"forceEntries\":\n    case \"categoryLinks\":\n    case \"categoryEntries\":\n    case \"sharedInfoGroups\":\n    case \"infoGroups\":\n    case \"catalogueLinks\":\n    case \"publications\":\n    case \"profileTypes\":\n    case \"catalogue\":\n    case \"gameSystem\":\n    case \"rules\":\n    case \"sharedRules\":\n    case \"costs\":\n    case \"costTypes\":\n    case \"sharedProfiles\":\n    case \"profiles\":\n    case \"characteristics\":\n    case \"characteristicTypes\":\n      return obj.getName();\n    case \"modifiers\":\n      return modifierToString(getModifierOrConditionParent(obj), obj);\n    case \"repeats\": {\n      const repeat = obj as BSIRepeat;\n      const parent = getModifierOrConditionParent(obj);\n      if (!parent) {\n        console.error(\"no parent for repeat\", obj);\n      }\n      return `Repeat ${repeat.repeats} times for every ${repeat.value} ${fieldToText(\n        parent,\n        repeat.field\n      )} in ${fieldToText(parent, repeat.scope)} of ${repeat.childId ? fieldToText(parent, repeat.childId) : \" any\"}`;\n    }\n    case \"conditions\":\n      return conditionToString(getModifierOrConditionParent(obj), obj);\n    case \"constraints\":\n      return conditionToString(getModifierOrConditionParent(obj), obj);\n\n    case \"modifierGroups\":\n      return `Modify...`;\n    case \"conditionGroups\":\n      return `${obj.type.toUpperCase()}`;\n\n    case \"infoLinks\":\n      return obj.target ? getName(obj.target) : obj.getName();\n    case \"associations\":\n      return obj.name;\n    default:\n      console.log(type, obj);\n      return type;\n  }\n}\n\nexport function forEachEntryRecursive(\n  entry: EditorBase,\n  callback: (entry: EditorBase, key?: string, parent?: EditorBase) => unknown\n) {\n  callback(entry);\n  const stack = [entry];\n  while (stack.length) {\n    const cur = stack.pop()!;\n    for (const key of Object.keys(cur)) {\n      if (!goodJsonKeys.has(key) || textNodeTags.has(key)) continue;\n      const val = (cur as any)[key] as EditorBase[] | undefined;\n      if (val && Array.isArray(val)) {\n        for (const e of val) {\n          stack.push(e);\n          callback(e, key, cur);\n        }\n      }\n    }\n  }\n}\n\nexport function removeEntry(entry: EditorBase) {\n  const parent = entry.parent;\n  if (parent) {\n    const arr = parent[entry.parentKey] as EditorBase[];\n    const index = arr.indexOf(entry);\n    if (index !== -1) {\n      arr.splice(index, 1);\n    }\n  }\n}\n\n/**\n * Removes an entry and fixes up the index\n * Returns all the removed data for undoing\n */\nexport function onRemoveEntry(removed: EditorBase, manager?: BSCatalogueManager) {\n  const catalogue = removed.catalogue;\n  forEachEntryRecursive(removed, (entry, key, parent) => {\n    catalogue.removeFromIndex(entry);\n    if (entry.isLink && entry.isLink()) {\n      catalogue.unlinkLink(entry);\n      delete (entry as any).target;\n    }\n    if (entry instanceof Profile && entry.typeId) {\n      const found = entry.catalogue.findOptionById(entry.typeId);\n      if (found) {\n        entry.catalogue.removeRef(entry, found as EditorBase);\n      }\n    }\n    if (entry instanceof Condition) {\n      const scope = entry.scope;\n      const childId = entry.childId;\n      if (!validScopes.has(scope)) {\n        const found = entry.catalogue.findOptionById(entry.scope);\n        if (found) {\n          entry.catalogue.removeOtherRef(entry, found as EditorBase);\n        }\n      }\n      if (!validChildIds.has(childId)) {\n        const found = entry.catalogue.findOptionById(entry.childId);\n        if (found) {\n          entry.catalogue.removeOtherRef(entry, found as EditorBase);\n        }\n      }\n    }\n    delete (entry as any).parent;\n    delete (entry as any).catalogue;\n  });\n  if (manager && removed instanceof CatalogueLink) {\n    catalogue.reload(manager);\n  }\n}\n\nexport function onAddEntry(\n  entries: EditorBase[] | EditorBase,\n  catalogue: Catalogue,\n  parent: EditorBase | Catalogue,\n  manager: BSCatalogueManager\n) {\n  let reload = false;\n  for (const entry of Array.isArray(entries) ? entries : [entries]) {\n    forEachEntryRecursive(entry, (entry, key, _parent) => {\n      if (isObject(entry)) {\n        entry.parent = _parent || (parent as any);\n\n        entry.catalogue = catalogue;\n        catalogue.addToIndex(entry);\n        if (entry instanceof Link) {\n          catalogue.updateLink(entry);\n        }\n        if (entry instanceof Profile && entry.typeId) {\n          const found = entry.catalogue.findOptionById(entry.typeId);\n          if (found) {\n            entry.catalogue.addRef(entry, found as EditorBase);\n          }\n        }\n        if (entry instanceof CatalogueLink && entry.targetId) {\n          reload = true;\n        }\n        catalogue.refreshErrors(entry);\n      }\n    });\n  }\n  if (reload && parent) {\n    const catalogue = parent.catalogue || parent;\n    catalogue.reload(manager);\n  }\n}\nexport interface EntryPathEntry {\n  key: string;\n  index: number;\n  id?: string;\n}\nexport interface EntryPathEntryExtended extends EntryPathEntry {\n  type: string;\n  display: string;\n  label?: string;\n  name?: string;\n}\n\nexport function getEntryPath(entry: EditorBase): EntryPathEntry[] {\n  if (!entry.parent && !entry.isCatalogue()) {\n    return [{ id: entry.id, key: entry.parentKey, index: 0 }];\n  }\n  const result = [] as EntryPathEntry[];\n  while (entry.parent) {\n    const parent = (entry.parent || entry.catalogue) as any;\n    result.push({\n      key: entry.parentKey,\n      index: parent[(entry as any).parentKey].indexOf(entry),\n      id: entry.id,\n    });\n    entry = entry.parent;\n  }\n  result.reverse();\n  return result;\n}\nexport function getEntryPathInfo(entry: EditorBase): EntryPathEntry[] {\n  if (!entry.parent && !entry.isCatalogue()) {\n    return [{ id: entry.id, key: entry.parentKey, index: 0 }];\n  }\n  const result = [] as EntryPathEntryExtended[];\n  do {\n    const parent = (entry.parent || entry.catalogue) as any;\n    if (parent) {\n      result.push({\n        name: entry.getName(),\n        type: entry.editorTypeName,\n        label: entry.getTypeName(),\n        display: getName(entry),\n        key: entry.parentKey,\n        index: parent[(entry as any).parentKey].indexOf(entry),\n        id: entry.id,\n      });\n    } else {\n      result.push({\n        name: entry.getName(),\n        display: getName(entry),\n        type: \"catalogue\",\n        key: \"catalogue\",\n        id: entry.id,\n        index: 0,\n      });\n    }\n    entry = entry.parent as typeof entry;\n  } while (entry);\n  result.reverse();\n  return result as any;\n}\n/**\n *  Adds an entry at the specified path\n *  returns the parent\n */\nexport function addAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[], entry: EditorBase) {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  for (let i = 0; i < path.length - 1; i++) {\n    const node = path[i];\n    current = current[node.key][node.index];\n  }\n  const lastNode = path[path.length - 1];\n  if (!current[lastNode.key]) {\n    current[lastNode.key] = [];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  arr.splice(lastNode.index, 0, entry);\n  return current;\n}\nexport function getAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[]): EditorBase | undefined {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  for (const node of path) {\n    current = current[node.key];\n    if (!current) return undefined;\n    current = current[node.index];\n  }\n  return current;\n}\nexport function popAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[]): EditorBase {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  const lastNode = path[path.length - 1];\n  for (const node of path) {\n    if (node === lastNode) continue;\n    current = current[node.key][node.index];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  const result = arr.splice(lastNode.index, 1)[0];\n  if (!result) throw new Error(\"popAtEntryPath failed\");\n\n  return result;\n}\nexport function replaceAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[], value: EditorBase): EditorBase {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  const lastNode = path[path.length - 1];\n  for (const node of path) {\n    if (node === lastNode) continue;\n    current = current[node.key][node.index];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  const result = arr.splice(lastNode.index, 1, value)[0];\n  if (!result) throw new Error(\"replaceAtEntryPath failed\");\n  return result;\n}\nexport function scrambleIds(catalogue: Catalogue, entry_or_entries: MaybeArray<EditorBase>) {\n  const scrambled = {} as Record<string, string>;\n  const arr = Array.isArray(entry_or_entries) ? entry_or_entries : [entry_or_entries];\n  for (const entry of arr)\n    forEachEntryRecursive(entry, (node, key, parentNode) => {\n      if (node.id) {\n        // if (node instanceof Constraint && !(entry instanceof Constraint)) return;\n        const currentId = node.id;\n        const newId = catalogue.generateNonConflictingId(currentId);\n        node.id = newId;\n        scrambled[currentId] = newId;\n      }\n    });\n  for (const entry of arr) {\n    forEachEntryRecursive(entry, (node, key, parentNode) => {\n      if (node instanceof Condition) {\n        if (node.scope in scrambled) {\n          node.scope = scrambled[node.scope];\n        }\n        if (node.childId in scrambled) {\n          node.childId = scrambled[node.childId];\n        }\n      }\n      if (node instanceof Modifier) {\n        if (node.field in scrambled) {\n          node.field = scrambled[node.field];\n        }\n      }\n    });\n  }\n}\n\nexport function fixKey(parent: EditorBase | Catalogue, key: keyof Base, catalogueKey?: string) {\n  if (!parent.isCatalogue()) {\n    switch (key) {\n      case \"sharedRules\":\n        return \"rules\";\n      case \"sharedProfiles\":\n        return \"profiles\";\n      case \"sharedInfoGroups\":\n        return \"infoGroups\";\n      case \"sharedSelectionEntries\":\n        return \"selectionEntries\";\n      case \"sharedSelectionEntryGroups\":\n        return \"selectionEntryGroups\";\n      default:\n        return key;\n    }\n  } else if (catalogueKey) {\n    switch (key) {\n      case \"sharedRules\":\n      case \"rules\":\n        if ([\"sharedRules\", \"rules\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedProfiles\":\n      case \"profiles\":\n        if ([\"sharedProfiles\", \"profiles\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedInfoGroups\":\n      case \"infoGroups\":\n        if ([\"sharedInfoGroups\", \"infoGroups\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedSelectionEntries\":\n      case \"selectionEntries\":\n        if ([\"sharedSelectionEntries\", \"selectionEntries\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedSelectionEntryGroups\":\n      case \"selectionEntryGroups\":\n        if ([\"sharedSelectionEntryGroups\", \"selectionEntryGroups\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      default:\n        return key;\n    }\n  }\n  return key;\n}\n","import {\n  Category,\n  Force,\n  Link,\n  Base,\n  Group,\n  CategoryLink,\n  Rule,\n  Entry,\n  Profile,\n  InfoLink,\n  InfoGroup,\n  Condition,\n  Modifier,\n  ModifierGroup,\n  ProfileType,\n  Constraint,\n  Characteristic,\n} from \"./bs_main\";\nimport { Catalogue, CatalogueLink, Publication } from \"./bs_main_catalogue\";\nimport { isObject, isDefaultObject } from \"./bs_helpers\";\nimport { getTypeName } from \"./bs_editor\";\n\nexport class NoObserve {\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return \"ObjectNoObserve\";\n  }\n}\nexport function noObserve(): object {\n  return new NoObserve();\n}\n\nconst keyInfoCache = {} as Record<string, any>;\nfunction getKeyInfoClass(cache: Record<string, any>, parentKey: string, obj: any): any {\n  if (parentKey in cache) {\n    return cache[parentKey];\n  }\n  const _key = class extends Base {\n    get parentKey(): string {\n      return parentKey;\n    }\n    get editorTypeName(): string {\n      return getTypeName(parentKey, this);\n    }\n    toString(): string {\n      return `${this.editorTypeName} - ${this.getName()}`;\n    }\n  };\n  _key.prototype.parentKey;\n  Object.setPrototypeOf(_key.prototype, Object.getPrototypeOf(obj));\n  cache[parentKey] = _key.prototype;\n  return _key.prototype;\n}\nfunction setKeyInfo(cache: Record<string, any>, key: string, obj: any): void {\n  Object.setPrototypeOf(obj, getKeyInfoClass(cache, key, obj));\n}\nexport const protoMap = {\n  \"*\": Base.prototype,\n  // \"*\": Base.prototype,\n  catalogue: Catalogue.prototype,\n  catalogueLinks: CatalogueLink.prototype,\n  gameSystem: Catalogue.prototype,\n\n  forceEntries: Force.prototype,\n  forces: Force.prototype,\n  force: Force.prototype,\n\n  categoryEntries: Category.prototype,\n  category: Category.prototype,\n  categories: Category.prototype,\n\n  link: Link.prototype,\n  infoLinks: InfoLink.prototype,\n  categoryLinks: CategoryLink.prototype,\n\n  entry: Entry.prototype,\n  selectionEntries: Entry.prototype,\n  entryLinks: Link.prototype,\n  sharedSelectionEntries: Entry.prototype,\n\n  group: Group.prototype,\n  selectionEntryGroups: Group.prototype,\n  sharedSelectionEntryGroups: Group.prototype,\n\n  sharedRules: Rule.prototype,\n  rules: Rule.prototype,\n  rule: Rule.prototype,\n\n  profileTypes: ProfileType.prototype,\n  sharedProfiles: Profile.prototype,\n  profiles: Profile.prototype,\n  profile: Profile.prototype,\n  characteristics: Characteristic.prototype,\n  characteristic: Characteristic.prototype,\n  characteristicTypes: Base.prototype,\n  characteristicType: Base.prototype,\n\n  sharedInfoGroups: InfoGroup.prototype,\n  infoGroups: InfoGroup.prototype,\n  infoGroup: InfoGroup.prototype,\n\n  publications: Publication.prototype,\n  publication: Publication.prototype,\n\n  repeats: Condition.prototype,\n  conditions: Condition.prototype,\n  constraints: Constraint.prototype,\n  modifiers: Modifier.prototype,\n  modifierGroups: ModifierGroup.prototype,\n};\nexport const protoMapValues = Object.values(protoMap);\nexport type ProtoMap = typeof protoMap;\nexport function getPrototypeFromKey(key: string) {\n  if (key in protoMap) {\n    return protoMap[key as keyof typeof protoMap]!;\n  } else {\n    return protoMap[\"*\"];\n  }\n}\n\nexport function setPrototype<Key extends string>(\n  obj: any,\n  key: Key\n): Key extends keyof ProtoMap ? ProtoMap[Key] : ProtoMap[keyof ProtoMap] {\n  const newProto = getPrototypeFromKey(key);\n  if (newProto) {\n    Object.setPrototypeOf(obj, newProto);\n    if ((obj as any).post_init) obj.post_init();\n    if ((globalThis as any).isEditor) {\n      setKeyInfo(obj.keyInfoCache || keyInfoCache, key, obj);\n    }\n  }\n  return obj;\n}\n\nexport function setPrototypeRecursive(obj: any): void {\n  const stack = [obj];\n  while (stack.length) {\n    const current = stack.pop();\n    for (const key of Object.keys(current)) {\n      const value = current[key];\n\n      if (isObject(value)) {\n        //  If Array: Set Prototypes on each object inside array (assumes all objects if first is)\n        if (Array.isArray(value)) {\n          if (value.length && isObject(value[0])) {\n            for (let i = value.length; i--; ) {\n              const cur = value[i];\n              if (isDefaultObject(cur)) {\n                setPrototype(cur, key);\n                stack.push(cur);\n              }\n            }\n          }\n        }\n        //  If Object: Set Prototype on object\n        else {\n          if (isDefaultObject(value)) {\n            setPrototype(value, key);\n            stack.push(value);\n          }\n        }\n      }\n    }\n  }\n\n  // return result;\n}\n","import { defineStore } from \"pinia\";\nimport { Catalogue } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { BSICatalogue, BSIDataCatalogue, BSIGameSystem } from \"~/assets/shared/battlescribe/bs_types\";\nexport interface ICatalogueState {\n  edited?: boolean;\n  errors?: string[];\n  dependencies?: Dependency[];\n  dependents?: Dependency[];\n}\n\nexport interface Dependency {\n  targetId: string;\n  sourceId: string;\n  sourceName?: string;\n  importRootEntries?: boolean;\n}\n/**\n * Stores info about catalogues, wich will be persisted to disk.\n */\nexport const useCataloguesStore = defineStore(\"catalogues\", {\n  state: () => ({\n    dict: {} as Record<string, ICatalogueState>,\n    version: 1,\n  }),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    get(id: string) {\n      if (!(id in this.dict)) {\n        this.dict[id] = {};\n      }\n      return this.dict[id];\n    },\n    setEdited(id: string, bool: boolean) {\n      this.get(id).edited = bool;\n    },\n    getEdited(id: string) {\n      return this.get(id).edited;\n    },\n    setErrors(id: string, msg: string[]) {\n      this.get(id).errors = msg;\n    },\n    getErrors(id: string) {\n      return this.get(id).errors;\n    },\n    getDependents(id: string) {\n      return this.get(id).dependents;\n    },\n    updateCatalogue(catalogue: Catalogue | BSICatalogue | BSIGameSystem) {\n      const id = catalogue.id;\n      const gstId = catalogue.gameSystemId || catalogue.id;\n      const dependencies = catalogue.catalogueLinks?.map((o) => ({\n        targetId: o.targetId === gstId ? gstId : `${gstId}-${o.targetId}`,\n        sourceId: id === gstId ? gstId : `${gstId}-${id}`,\n        importRootEntries: o.importRootEntries,\n        sourceName: catalogue.name,\n      }));\n      if (catalogue.gameSystemId) {\n        dependencies?.push({\n          targetId: catalogue.gameSystemId,\n          sourceId: id,\n          importRootEntries: true,\n          sourceName: catalogue.name,\n        });\n      }\n      this.setDependencies(id, dependencies);\n    },\n    setDependencies(id: string, dependencies?: Dependency[]) {\n      const previousDependencies = this.get(id)?.dependencies;\n      if (previousDependencies) {\n        for (const dependency of previousDependencies) {\n          this.removeDependent(dependency.targetId, dependency);\n        }\n      }\n      if (dependencies) {\n        for (const dependency of dependencies) {\n          this.addDependent(dependency.targetId, dependency);\n        }\n      }\n      this.get(id).dependencies = dependencies || [];\n    },\n    setDependents(id: string, dependents: Dependency[]) {\n      this.get(id).dependents = dependents;\n    },\n    addDependent(id: string, dependency: Dependency) {\n      const state = this.get(id);\n      if (!state.dependents) state.dependents = [];\n      state.dependents.push(dependency);\n    },\n    removeDependent(id: string, dependency: Dependency) {\n      const dependents = this.get(id)?.dependents;\n      if (dependents) {\n        const idx = dependents.findIndex((o) => o.sourceId === dependency.sourceId);\n        if (idx >= 0) dependents.splice(idx, 1);\n      }\n    },\n  },\n});\n","import type { Stats } from \"fs\";\nimport type { OpenDialogOptions, OpenDialogReturnValue, MessageBoxSyncOptions } from \"electron\";\nexport function dirname(path: string) {\n  return path.replaceAll(\"\\\\\", \"/\").split(\"/\").slice(0, -1).join(\"/\");\n}\nexport function filename(path: string) {\n  const split = path.replaceAll(\"\\\\\", \"/\").split(\"/\");\n  return split[split.length - 1];\n}\nexport async function getFolderFiles(folderPath: string) {\n  if (!electron) return [];\n  return (await electron.invoke(\"getFolderFiles\", folderPath)) as Array<{\n    name: string;\n    path: string;\n    data: string;\n  }>;\n}\n// export async function getFolderFiles(folderPath: string) {\n//   if (!electron) return;\n//   try {\n//     const fileObjects = [];\n//     const isPathFile = (await electron.invoke(\"isFile\", folderPath)) as boolean;\n//     if (isPathFile) {\n//       folderPath = dirname(folderPath);\n//     }\n\n//     const entries = (await electron.invoke(\"readdirSync\", folderPath)) as string[];\n\n//     for (const entry of entries) {\n//       const filePath = `${folderPath}/${entry}`;\n\n//       try {\n//         const isFile = (await electron.invoke(\"isFile\", filePath)) as boolean;\n//         if (isFile) {\n//           const data = await electron.invoke(\"readFileSync\", filePath, isZipExtension(entry) ? undefined : \"utf-8\");\n//           const fileObject = {\n//             name: entry,\n//             data: data,\n//             path: filePath,\n//           };\n//           fileObjects.push(fileObject);\n//         }\n//       } catch (error) {\n//         console.error(\"Error reading file:\", filePath, error);\n//         continue;\n//       }\n//     }\n\n//     return fileObjects;\n//   } catch (error) {\n//     console.error(\"Error:\", error);\n//     throw error;\n//   }\n// }\nexport async function getFolderFolders(folderPath: string) {\n  if (!electron) return;\n  try {\n    const fileObjects = [];\n    const pathIsDir = (await electron.invoke(\"isDirectory\", folderPath)) as boolean;\n    if (!pathIsDir) return [];\n\n    const entries = (await electron.invoke(\"readdirSync\", folderPath)) as string[];\n\n    for (const entry of entries) {\n      const filePath = `${folderPath}/${entry}`;\n\n      try {\n        const isDir = (await electron.invoke(\"isDirectory\", filePath)) as boolean;\n        if (isDir) {\n          const fileObject = {\n            name: entry,\n            path: filePath,\n          };\n          fileObjects.push(fileObject);\n        }\n      } catch (error) {\n        console.error(\"Error reading dir:\", filePath, error);\n        continue;\n      }\n    }\n\n    return fileObjects;\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n}\n\nexport async function writeFile(filePath: string, data: string | Blob | Buffer | Uint8Array) {\n  if (!electron) return;\n  const dirPath = dirname(filePath);\n  await electron.invoke(\"mkdirSync\", dirPath, { recursive: true });\n  await electron.invoke(\"writeFileSync\", filePath, data);\n}\nexport async function deleteFile(filePath: string) {\n  if (!electron) return;\n  return await electron.invoke(\"unlinkSync\", filePath);\n}\nexport async function readFile(filePath: string) {\n  if (!electron) return;\n  return (await electron.invoke(\"getFile\", filePath)) as {\n    name: string;\n    path: string;\n    data: string;\n  };\n}\nexport async function showOpenDialog(options: OpenDialogOptions) {\n  if (!electron) return;\n  return electron.invoke(\"showOpenDialog\", options) as OpenDialogReturnValue;\n}\nexport async function showMessageBox(options: MessageBoxSyncOptions) {\n  if (!electron) return;\n  return electron.invoke(\"showMessageBoxSync\", options) as number;\n}\nexport async function closeWindow() {\n  if (!electron) return;\n  return electron.invoke(\"closeWindow\");\n}\nexport async function getPath(\n  name:\n    | \"home\"\n    | \"appData\"\n    | \"userData\"\n    | \"sessionData\"\n    | \"temp\"\n    | \"exe\"\n    | \"module\"\n    | \"desktop\"\n    | \"documents\"\n    | \"downloads\"\n    | \"music\"\n    | \"pictures\"\n    | \"videos\"\n    | \"recent\"\n    | \"logs\"\n    | \"crashDumps\"\n) {\n  if (!electron) return;\n  return (await electron.invoke(\"getPath\", name)) as string;\n}\nexport async function createFolder(dirPath: string) {\n  if (!electron) return;\n  await electron.invoke(\"mkdirSync\", dirPath, { recursive: true });\n}\nlet initialized = false;\nconst watchers = {} as Record<string, (path: string, stats: Stats) => unknown>;\nexport async function watchFile(path: string, callback: (path: string, stats: Stats) => unknown) {\n  if (!electron) return;\n  if (!initialized) {\n    initialized = true;\n    electron.on(\"fileChanged\", (_: any, _path: string, _stats: Stats) => {\n      const cb = watchers[_path];\n      cb && cb(_path, _stats);\n    });\n  }\n  await electron.invoke(\"chokidarWatchFile\", path);\n  watchers[path] = callback;\n}\nexport async function unwatchFile(path: string) {\n  if (!electron) return;\n  delete watchers[path];\n  await electron.invoke(\"chokidarUnwatchFile\", path);\n}\n\nexport async function getFolderRemote(path: string): Promise<string | null> {\n  if (!electron) return null;\n  return (await electron.invoke(\"getFolderRemote\", path)) as string | null;\n}\n","import type { EntryPathEntry } from \"~/assets/shared/battlescribe/bs_editor\";\n\nexport const LeftPanelDefaults = {\n    showImported: false,\n    ignoreProfilesRules: false,\n    filter: \"\",\n    scroll: 0,\n    selection: undefined as EntryPathEntry[] | undefined,\n    mode: \"edit\",\n  };","import { defineStore } from \"pinia\";\nimport { getEntryPath, type EntryPathEntry, getAtEntryPath } from \"~/assets/shared/battlescribe/bs_editor\";\nimport { goodJsonKeys } from \"~/assets/shared/battlescribe/bs_main\";\nimport type { EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { get_base_from_vue_el, get_ctx } from \"./editorStore\";\n\n/**\n * This class represents a snapsnot of the editor's current state, in order to reload it for navigating around\n */\nexport interface EditorUIState {\n  selection?: EntryPathEntry[];\n  scroll?: number;\n  open: Record<string, any>;\n  catalogueId?: string;\n  systemId?: string;\n  mode?: \"edit\" | \"references\";\n}\n\nexport const useEditorUIState = defineStore(\"editor-ui\", {\n  state: () => ({\n    catalogues: {} as Record<string, EditorUIState>,\n  }),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    collapse_level(depth: number) {\n      if (depth >= 0) {\n        const deepestCls = `depth-${depth} collapsible-box opened`;\n        const results = document.documentElement.getElementsByClassName(deepestCls);\n        if (results?.length) {\n          for (const cur of results) {\n            get_ctx(cur)?.close();\n          }\n        }\n      }\n    },\n    collapse_all() {\n      this.collapse_level(1);\n      this.collapse_level(0);\n    },\n    collapse_deepest() {\n      const cls = `collapsible-box opened`;\n      const results = document.documentElement.getElementsByClassName(cls);\n      let maxDepth = -1;\n      if (results?.length) {\n        for (const cur of results) {\n          cur.classList.forEach((val) => {\n            if (val.startsWith(\"depth-\")) {\n              maxDepth = Math.max(maxDepth, parseInt(val.split(\"-\")[1]));\n            }\n          });\n        }\n      }\n      this.collapse_level(maxDepth);\n    },\n    set_state(id: string, data: Partial<EditorUIState>) {\n      // Get all open collapsible boxes and save their state\n      function find_open_recursive(elt: Element, obj: Record<string, any>, depth = 0) {\n        const cls = `depth-${depth} collapsible-box opened`;\n        const results = elt.getElementsByClassName(cls);\n        if (results?.length) {\n          for (const cur of results) {\n            const item = get_base_from_vue_el(get_ctx(cur));\n            const key = item.parentKey;\n            const parent = item.parent;\n\n            let next = obj;\n            if (parent) {\n              const arr = parent[key] as EditorBase[];\n              if (!arr || !Array.isArray(arr)) continue;\n              const index = arr.indexOf(item);\n              if (!(key in obj)) obj[key] = {};\n              const obj_arr = obj[key];\n              if (!(index in obj_arr)) obj_arr[index] = {};\n              next = obj_arr[index];\n            } else {\n              const keys = [...cur.classList].filter((o) => goodJsonKeys.has(o));\n              for (const key of keys) {\n                obj[key] = {};\n                obj[key][0] = {};\n                next = obj[key][0];\n              }\n            }\n\n            find_open_recursive(cur, next, depth + 1);\n          }\n        }\n      }\n      const open = {};\n      find_open_recursive(document.documentElement, open);\n      const result = { ...data, open: open };\n      this.$state.catalogues[id] = result;\n      return open;\n    },\n\n    get_data(id: string): Record<string, any> {\n      const current = this.$state.catalogues[id];\n      if (!current) return {};\n      return current;\n    },\n    get_root(id: string, key: string): boolean {\n      let current = this.$state.catalogues[id];\n      if (!current) return false;\n      current = current.open[key];\n      if (!current) return false;\n      return true;\n    },\n    get(id: string, path: EntryPathEntry[]): boolean {\n      if (!path.length) return false;\n      let current = this.$state.catalogues[id];\n      if (!current) return false;\n      let current_node = current.open[path[0].key];\n      if (!current_node) return false;\n      current_node = current_node[0];\n      if (!current_node) return false;\n      for (const node of path) {\n        const arr = current_node[node.key];\n        if (!arr) return false;\n        const entry = arr[node.index];\n        if (!entry) return false;\n        current_node = entry;\n      }\n      return true;\n    },\n  },\n});\n","const e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,n){return\"object\"!=typeof n||t(n).forEach((function(t){e[t]=n[t]})),e}\"undefined\"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,n){\"function\"==typeof n&&(n=n(s(e))),(\"undefined\"==typeof Reflect?t:Reflect.ownKeys)(n).forEach((t=>{l(e,t,n[t])}))}const u=Object.defineProperty;function l(e,t,n,s){u(e,t,r(n&&o(n,\"get\")&&\"function\"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,\"constructor\",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let n;return h(e,t)||(n=s(e))&&d(n,t)}const f=[].slice;function p(e,t,n){return f.call(e,t,n)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error(\"Assertion Failed\")}function v(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function b(e,t){if(o(e,t))return e[t];if(!t)return e;if(\"string\"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=b(e,t[r]);n.push(i)}return n}var a=t.indexOf(\".\");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:b(u,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&(!(\"isFrozen\"in Object)||!Object.isFrozen(e)))if(\"string\"!=typeof t&&\"length\"in t){m(\"string\"!=typeof r&&\"length\"in r);for(var s=0,i=t.length;s<i;++s)_(e,t[s],r[s])}else{var a=t.indexOf(\".\");if(-1!==a){var u=t.substr(0,a),l=t.substr(a+1);if(\"\"===l)void 0===r?n(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=r;else{var c=e[u];c&&o(e,u)||(c=e[u]={}),_(c,l,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var n in e)o(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function k(e){return x.apply([],e)}const E=\"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(k([8,16,32,64].map((e=>[\"Int\",\"Uint\",\"Float\"].map((t=>t+e+\"Array\")))))).filter((t=>e[t])),P=E.map((t=>e[t]));g(E,(e=>[e,!0]));let K=null;function O(e){K=\"undefined\"!=typeof WeakMap&&new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||\"object\"!=typeof e)return e;let t=K&&K.get(e);if(t)return t;if(n(e)){t=[],K&&K.set(e,t);for(var r=0,i=e.length;r<i;++r)t.push(S(e[r]))}else if(P.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),K&&K.set(e,t),e)o(e,a)&&(t[a]=S(e[a]))}return t}const{toString:A}={};function C(e){return A.call(e).slice(8,-1)}const j=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\",D=\"symbol\"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function B(e){var t,r,s,i;if(1===arguments.length){if(n(e))return e.slice();if(this===I&&\"string\"==typeof e)return[e];if(i=D(e)){for(r=[];!(s=i.next()).done;)r.push(s.value);return r}if(null==e)return[e];if(\"number\"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const T=\"undefined\"!=typeof Symbol?e=>\"AsyncFunction\"===e[Symbol.toStringTag]:()=>!1;var R=\"undefined\"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function F(e,t){R=e,M=t}var M=()=>!0;const N=!new Error(\"\").stack;function q(){if(N)try{throw q.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split(\"\\n\").length),n.split(\"\\n\").slice(t).filter(M).map((e=>\"\\n\"+e)).join(\"\")):\"\"}var U=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"],L=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"].concat(U),V={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"};function W(e,t){this._e=q(),this.name=e,this.message=t}function Y(e,t){return e+\". Errors: \"+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join(\"\\n\")}function z(e,t,n,r){this._e=q(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=q(),this.name=\"BulkError\",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+$(this._e,2))}},toString:function(){return this.name+\": \"+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce(((e,t)=>(e[t]=t+\"Error\",e)),{});const Q=W;var X=L.reduce(((e,t)=>{var n=t+\"Error\";function r(e,r){this._e=q(),this.name=n,e?\"string\"==typeof e?(this.message=`${e}${r?\"\\n \"+r:\"\"}`,this.inner=r||null):\"object\"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=V[t]||n,this.inner=null)}return c(r).from(Q),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce(((e,t)=>(e[t+\"Error\"]=X[t],e)),{});var Z=L.reduce(((e,t)=>(-1===[\"Syntax\",\"Type\",\"Range\"].indexOf(t)&&(e[t+\"Error\"]=X[t]),e)),{});function ee(){}function te(e){return e}function ne(e,t){return null==e||e===te?t:function(n){return t(e(n))}}function re(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?re(r,this.onsuccess):r),s&&(this.onerror=this.onerror?re(s,this.onerror):s),void 0!==i?i:n}}function ie(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?re(n,this.onsuccess):n),r&&(this.onerror=this.onerror?re(r,this.onerror):r)}}function oe(e,t){return e===ee?t:function(n){var s=e.apply(this,arguments);r(n,s);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?re(i,this.onsuccess):i),o&&(this.onerror=this.onerror?re(o,this.onerror):o),void 0===s?void 0===a?void 0:a:r(s,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ue(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&\"function\"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=\"undefined\"==typeof Promise?[]:(()=>{let e=Promise.resolve();if(\"undefined\"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[t,s(t),e]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var e=document.createElement(\"div\");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute(\"i\",\"1\")}:()=>{setTimeout(qe,0)},ge=function(e,t){Oe.push([e,t]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ct(e[0],e[1])}catch(e){}}))}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),\"function\"!=typeof e){if(e!==le)throw new TypeError(\"Not a function\");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Ie(this,e)}const je={get:function(){var e=Ke,t=Qe;function n(n,r){var s=!e.global&&(e!==Ke||t!==Qe);const i=s&&!et();var o=new Ce(((t,o)=>{Re(this,new De(ut(n,e,s,i),ut(r,e,s,i),t,o,e))}));return R&&Ne(o,this),o}return n.prototype=le,n},set:function(e){l(this,\"then\",e&&e.prototype===le?je:{get:function(){return e},set:je.set})}};function De(e,t,n,r,s){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Ie(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");var n=e._lib&&$e();t&&\"function\"==typeof t.then?Ie(e,((e,n)=>{t instanceof Ce?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Te(e)),n&&Ue()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(xe.push(t),null===e._state){var n=e._lib&&$e();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&\"object\"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=d(t,\"stack\");t._promise=e,l(t,\"stack\",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){we.some((t=>t._value===e._value))||we.push(e)}(e),Te(e),n&&Ue()}}function Te(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Re(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Se&&(++Se,ge((()=>{0==--Se&&Le()}),[]))}function Re(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,ge(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{ke=t;var r,s=t._value;t._state?r=e(s):(xe.length&&(xe=[]),r=e(s),-1===xe.indexOf(s)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{ke=null,0==--Se&&Le(),--n.psd.ref||n.psd.finalize()}}function Me(e,t,n){if(t.length===n)return t;var r=\"\";if(!1===e._state){var s,i,o=e._value;null!=o?(s=o.name||\"Error\",i=o.message||o,r=$(o,0)):(s=o,i=\"\"),t.push(s+(i?\": \"+i:\"\")+r)}return R&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Me(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){$e()&&Ue()}function $e(){var e=be;return be=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);be=!0,_e=!0}function Le(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Ce(le,!1,e)}function We(e,t){var n=Ke;return function(){var r=$e(),s=Ke;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(s,!1),r&&Ue()}}}a(Ce.prototype,{then:je,_then:function(e,t){Re(this,new De(null,null,e,t,Ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return\"function\"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ve(e))):this.then(null,(e=>e&&e.name===t?n(e):Ve(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ve(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Me(this,[],20).join(\"\\nFrom previous: \");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new Ce(((n,r)=>{var s=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,\"Dexie.Promise\"),Pe.env=it(),a(Ce,{all:function(){var e=B.apply(null,arguments).map(tt);return new Ce((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>Ce.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Ce)return e;if(e&&\"function\"==typeof e.then)return new Ce(((t,n)=>{e.then(t,n)}));var t=new Ce(le,!0,e);return Ne(t,ke),t},reject:Ve,race:function(){var e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{e.map((e=>Ce.resolve(e).then(t,n)))}))},PSD:{get:()=>Ke,set:e=>Ke=e},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new Ce(((n,r)=>Je(((t,n)=>{var r=Ke;r.unhandleds=[],r.onunhandled=n,r.finalize=re((function(){!function(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++Se,ge((()=>{0==--Se&&Le()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&l(Ce,\"allSettled\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>Ce.resolve(e).then((e=>r[s]={status:\"fulfilled\",value:e}),(e=>r[s]={status:\"rejected\",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&\"undefined\"!=typeof AggregateError&&l(Ce,\"any\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>Ce.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(e,t,n,s){var i=Ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var a=Pe.env;o.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(a.nthen,o),gthen:lt(a.gthen,o)}:{},t&&r(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ot(o,e,n,s);return 0===o.ref&&o.finalize(),u}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(e){return Ye.echoes&&e&&e.constructor===pe?(Ze(),e.then((e=>(et(),e)),(e=>(et(),ht(e))))):e}function nt(e){++Qe,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(e,!0)}function rt(){var e=Ge[Ge.length-1];Ge.pop(),st(e,!1)}function st(t,n){var r=Ke;if((n?!Ye.echoes||He++&&t===Ke:!He||--He&&t===Ke)||at(n?nt.bind(null,t):rt),t!==Ke&&(Ke=t,r===Pe&&(Pe.env=it()),ye)){var s=Pe.env.Promise,i=t.env;he.then=i.nthen,s.prototype.then=i.gthen,(r.global||t.global)&&(Object.defineProperty(e,\"Promise\",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function it(){var t=e.Promise;return ye?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,\"Promise\"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:he.then,gthen:t.prototype.then}:{}}function ot(e,t,n,r,s){var i=Ke;try{return st(e,!0),t(n,r,s)}finally{st(i,!1)}}function at(e){fe.call(ce,e)}function ut(e,t,n,r){return\"function\"!=typeof e?e:function(){var s=Ke;n&&Ze(),st(t,!0);try{return e.apply(this,arguments)}finally{st(s,!1),r&&at(et)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t),ut(r,t))}}-1===(\"\"+fe).indexOf(\"[native code]\")&&(Ze=et=ee);function ct(t,n){var s;try{s=n.onuncatched(t)}catch(e){}if(!1!==s)try{var i,o={promise:n,reason:t};if(e.document&&document.createEvent?((i=document.createEvent(\"Event\")).initEvent(\"unhandledrejection\",!0,!0),r(i,o)):e.CustomEvent&&r(i=new CustomEvent(\"unhandledrejection\",{detail:o}),o),i&&e.dispatchEvent&&(dispatchEvent(i),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(i)}catch(e){}R&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(e){}}var ht=Ce.reject;function dt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Ke.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>dt(e,t,n,r)))):ht(s)}return s._promise(t,((e,t)=>Je((()=>(Ke.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return ht(new X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new X.DatabaseClosed);e.open().catch(ee)}return e._state.dbReadyPromise.then((()=>dt(e,t,n,r)))}const ft=String.fromCharCode(65535),pt=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",yt=[],mt=\"undefined\"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=e=>!/(dexie\\.js|dexie\\.min\\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return\"string\"!=typeof e||/\\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=O(t))[e],t)}class kt{_trans(e,t,n){const r=this._tx||Ke.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new X.NotFound(\"Table \"+s+\" not part of transaction\");return t(r.idbtrans,r)}const o=$e();try{return r&&r.db===this.db?r===Ke.trans?r._promise(e,i,n):Je((()=>r._promise(e,i,n)),{trans:r,transless:Ke.transless||Ke}):dt(this.db,e,[this.name],i)}finally{o&&Ue()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans(\"readonly\",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if(\"string\"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join(\"+\")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&r.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>r.indexOf(e)>=0))))[0];if(s&&this.db._maxKey!==ft)return this.where(s.name).equals(s.keyPath.map((t=>e[t])));!s&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join(\"+\")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=r.reduce((([t,r],s)=>{const o=i[s],u=e[s];return[t||o,t||!o?_t(r,o&&o.multi?e=>{const t=b(e,s);return n(t)&&t.some((e=>a(u,e)))}:e=>a(u,b(e,s))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):s?this.filter(l):this.where(r).equals(\"\")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join(\"+\")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(o(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook(\"reading\",t),e}defineClass(){return this.mapToClass((function(e){r(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"add\",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,r){if(\"object\"!=typeof e||n(e))return this.where(\":id\").equals(e).modify(r);{const n=b(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new X.InvalidArgument(\"Given object does not contain its primary key\"));try{\"function\"!=typeof r?t(r).forEach((t=>{_(e,t,r[t])})):r(e,{value:e,primKey:n})}catch(e){}return this.where(\":id\").equals(n).modify(r)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"put\",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:[e]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}clear(){return this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"deleteRange\",range:wt}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans(\"readonly\",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"add\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"put\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Et(e){var r={},s=function(t,n){if(n){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return r[t].subscribe.apply(null,i),e}if(\"string\"==typeof t)return r[t]};s.addEventType=a;for(var i=1,o=arguments.length;i<o;++i)a(arguments[i]);return s;function a(e,t,n){if(\"object\"==typeof e)return u(e);t||(t=ae),n||(n=ee);var i={subscribers:[],fire:n,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=t(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(t,n)}};return r[e]=s[e]=i,i}function u(e){t(e).forEach((function(t){var r=e[t];if(n(r))a(t,e[t][0],e[t][1]);else{if(\"asap\"!==r)throw new X.InvalidArgument(\"Invalid event config\");var s=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){v((function(){e.apply(null,t)}))}))}))}}))}}function Pt(e,t){return c(t).from({prototype:e}),t}function Kt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ot(e,t){e.filter=_t(e.filter,t)}function St(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function At(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema(\"KeyPath \"+e.index+\" on object store \"+t.name+\" is not indexed\");return n}function Ct(e,t,n){const r=At(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:\"prev\"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){const s=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,u=\"\"+a;\"[object ArrayBuffer]\"===u&&(u=\"\"+new Uint8Array(a)),o(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Dt(Ct(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Dt(Ct(e,r,n),_t(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Dt(e,t,n,r){var s=We(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ee}),(t=>{e.fail(t),n=ee}))||s(e.value,e,(e=>n=e)),n()}))}))}function It(e,t){try{const n=Bt(e),r=Bt(t);if(n!==r)return\"Array\"===n?1:\"Array\"===r?-1:\"binary\"===n?1:\"binary\"===r?-1:\"string\"===n?1:\"string\"===r?-1:\"Date\"===n?1:\"Date\"!==r?NaN:-1;switch(n){case\"number\":case\"Date\":case\"string\":return e>t?1:e<t?-1:0;case\"binary\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Tt(e),Tt(t));case\"Array\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=It(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Bt(e){const t=typeof e;if(\"object\"!==t)return t;if(ArrayBuffer.isView(e))return\"binary\";const n=C(e);return\"ArrayBuffer\"===n?\"binary\":n}function Tt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Rt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans(\"readonly\",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans(\"readwrite\",e,\"locked\")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return jt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>jt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Kt(t,!0))return n.count({trans:e,query:{index:At(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return jt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(\".\").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o=\"next\"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,s),r=i(t,s);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=At(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return jt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Kt(t)?St(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):St(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),St(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ot(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ot(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=\"prev\"===this._ctx.dir?\"next\":\"prev\",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique=\"unique\",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0)return this._read((e=>{var n=At(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique=\"unique\",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ot(this._ctx,(function(e){var t=e.primaryKey.toString(),r=o(n,t);return n[t]=!0,!r})),this}modify(e){var n=this._ctx;return this._write((r=>{var s;if(\"function\"==typeof e)s=e;else{var i=t(e),o=i.length;s=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];b(t,s)!==a&&(_(t,s,a),n=!0)}return n}}const a=n.table.core,{outbound:u,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,n)=>{const{failures:r,numFailures:s}=n;d+=e-s;for(let e of t(r))h.push(r[e])};return this.clone().primaryKeys().then((t=>{const i=o=>{const h=Math.min(c,t.length-o);return a.getMany({trans:r,keys:t.slice(o,o+h),cache:\"immutable\"}).then((d=>{const f=[],y=[],m=u?[]:null,v=[];for(let e=0;e<h;++e){const n=d[e],r={value:O(n),primKey:t[o+e]};!1!==s.call(r,r.value,r)&&(null==r.value?v.push(t[o+e]):u||0===It(l(n),l(r.value))?(y.push(r.value),u&&m.push(t[o+e])):(v.push(t[o+e]),f.push(r.value)))}const g=Kt(n)&&n.limit===1/0&&(\"function\"!=typeof e||e===Ft)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&a.mutate({trans:r,type:\"add\",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(y.length>0||g&&\"object\"==typeof e)&&a.mutate({trans:r,type:\"put\",keys:m,values:y,criteria:g,changeSpec:\"function\"!=typeof e&&e}).then((e=>p(y.length,e))))).then((()=>(v.length>0||g&&e===Ft)&&a.mutate({trans:r,type:\"delete\",keys:v,criteria:g}).then((e=>p(v.length,e))))).then((()=>t.length>o+h&&i(o+c)))}))};return i(0).then((()=>{if(h.length>0)throw new z(\"Error modifying one or more objects\",h,d,f);return t.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Kt(e)&&(e.isPrimKey&&!gt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:\"deleteRange\",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new z(\"Could not delete some values\",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Ft)}}const Ft=(e,t)=>t.value=null;function Mt(e,t){return e<t?-1:e===t?0:1}function Nt(e,t){return e>t?-1:e===t?0:1}function qt(e,t,n){var r=e instanceof Yt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $t(e){return new e.Collection(e,(()=>Wt(\"\"))).limit(0)}function Ut(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;s(e[u],l)<0&&(a=u)}return o<r.length&&\"next\"===i?e+n.substr(e.length):o<e.length&&\"prev\"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Lt(e,t,n,r){var s,i,o,a,u,l,c,h=n.length;if(!n.every((e=>\"string\"==typeof e)))return qt(e,\"String expected.\");function d(e){s=function(e){return\"next\"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return\"next\"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o=\"next\"===e?Mt:Nt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c=\"next\"===e?\"\":r}d(\"next\");var f=new e.Collection(e,(()=>Vt(a[0],u[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if(\"string\"!=typeof s)return!1;var d=i(s);if(t(d,u,p))return!0;for(var f=null,y=p;y<h;++y){var m=Ut(s,d,a[y],u[y],o,l);null===m&&null===f?p=y+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Vt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Wt(e){return{type:1,lower:e,upper:e}}class Yt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?$t(this):new this.Collection(this,(()=>Vt(e,t,!n,!r)))}catch(e){return qt(this,pt)}}equals(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Wt(e)))}above(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!0)))}aboveOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!1)))}below(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e)))}startsWith(e){return\"string\"!=typeof e?qt(this,\"String expected.\"):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return\"\"===e?this.startsWith(e):Lt(this,((e,t)=>0===e.indexOf(t[0])),[e],ft)}equalsIgnoreCase(e){return Lt(this,((e,t)=>e===t[0]),[e],\"\")}anyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>-1!==t.indexOf(e)),e,\"\")}startsWithAnyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ft)}anyOf(){const e=B.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return qt(this,pt)}if(0===e.length)return $t(this);const n=new this.Collection(this,(()=>Vt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t=\"next\"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const o=n.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(o,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return qt(this,pt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return $t(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return qt(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",X.InvalidArgument);const a=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),l.sort(h)}catch(e){return qt(this,pt)}let d=0;const f=u?e=>r(e,l[d][1])>0:e=>r(e,l[d][1])>=0,p=a?e=>s(e,l[d][0])>0:e=>s(e,l[d][0])>=0;let y=f;const m=new this.Collection(this,(()=>Vt(l[0][0],l[l.length-1][1],!a,!u)));return m._ondirectionchange=e=>{\"next\"===e?(y=f,c=r):(y=p,c=s),l.sort(h)},m._addAlgorithm(((e,t,n)=>{for(var s=e.key;y(s);)if(++d,d===l.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,l[d][1])||0===this._cmp(s,l[d][0])||t((()=>{c===r?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m}startsWithAnyOf(){const e=B.apply(I,arguments);return e.every((e=>\"string\"==typeof e))?0===e.length?$t(this):this.inAnyRange(e.map((e=>[e,e+ft]))):qt(this,\"startsWithAnyOf() only works with strings\")}}function zt(e){return We((function(t){return Gt(t),e(t.target.error),!1}))}function Gt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ht=Et(null,\"storagemutated\");class Qt{_lock(){return m(!Ke.global),++this._reculock,1!==this._reculock||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),0==--this._reculock)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(n&&n.name){case\"DatabaseClosedError\":throw new X.DatabaseClosed(n);case\"MissingAPIError\":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(!this.active)throw new X.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We((t=>{Gt(t),this._reject(e.error)})),e.onabort=We((t=>{Gt(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on(\"abort\").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),\"mutatedParts\"in e&&Ht.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if(\"readwrite\"===e&&\"readwrite\"!==this.mode)return ht(new X.ReadOnly(\"Transaction is readonly\"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Ke])}));if(n)return Je((()=>{var e=new Ce(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Ce(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Ce.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new Ce(((e,r)=>{n.then((n=>t._waitingQueue.push(We(e.bind(null,n)))),(e=>t._waitingQueue.push(We(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const n=this.schema[e];if(!n)throw new X.NotFound(\"Table \"+e+\" not part of transaction\");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function Xt(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?\"&\":\"\")+(r?\"*\":\"\")+(s?\"++\":\"\")+Jt(t)}}function Jt(e){return\"string\"==typeof e?e:e?\"[\"+[].join.call(e,\"+\")+\"]\":\"\"}function Zt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:g(n,(e=>[e.name,e]))}}let en=e=>{try{return e.only([[]]),en=()=>[[]],[[]]}catch(e){return en=()=>ft,ft}};function tn(e){return null==e?()=>{}:\"string\"==typeof e?function(e){return 1===e.split(\".\").length?t=>t[e]:t=>b(t,e)}(e):t=>b(t,e)}function nn(e){return[].slice.call(e)}let rn=0;function sn(e){return null==e?\":id\":\"string\"==typeof e?e:`[${e.join(\"+\")}]`}function on(e,t,r){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error(\"Cannot convert never type to IDBKeyRange\");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:i,hasGetAll:o}=function(e,t){const r=nn(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,s=n(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:s,keyPath:t,autoIncrement:r,unique:!0,extractKey:tn(t)},indexes:nn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:s,keyPath:i}=e,a={name:t,compound:n(i),keyPath:i,unique:r,multiEntry:s,extractKey:tn(i)};return o[sn(i)]=a,a})),getIndexByKeyPath:e=>o[sn(e)]};return o[\":id\"]=a.primaryKey,null!=t&&(o[sn(t)]=a.primaryKey),a}))},hasGetAll:r.length>0&&\"getAll\"in t.objectStore(r[0])&&!(\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:r,values:i,range:o}){return new Promise(((a,u)=>{a=We(a);const l=e.objectStore(t),c=null==l.keyPath,h=\"put\"===n||\"add\"===n;if(!h&&\"delete\"!==n&&\"deleteRange\"!==n)throw new Error(\"Invalid operation type: \"+n);const{length:d}=r||i||{length:1};if(r&&i&&r.length!==i.length)throw new Error(\"Given keys array must have same length as given values array.\");if(0===d)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],y=[];let m=0;const v=e=>{++m,Gt(e)};if(\"deleteRange\"===n){if(4===o.type)return a({numFailures:m,failures:y,results:[],lastResult:void 0});3===o.type?p.push(f=l.clear()):p.push(f=l.delete(s(o)))}else{const[e,t]=h?c?[i,r]:[i,null]:[r,null];if(h)for(let r=0;r<d;++r)p.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=v;else for(let t=0;t<d;++t)p.push(f=l[n](e[t])),f.onerror=v}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),a({numFailures:m,failures:y,results:\"delete\"===n?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),g(e)},f.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t),o=n.length,a=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++c===l&&r(a)},d=zt(s);for(let e=0;e<o;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=h,u.onerror=d,++l);0===l&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=zt(s)})),query:function(e){return n=>new Promise(((r,i)=>{r=We(r);const{trans:o,values:a,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:h,range:d}=l,f=o.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),y=s(d);if(0===u)return r({result:[]});if(e){const e=a?p.getAll(y,c):p.getAllKeys(y,c);e.onsuccess=e=>r({result:e.target.result}),e.onerror=zt(i)}else{let e=0;const t=a||!(\"openKeyCursor\"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=s=>{const i=t.result;return i?(n.push(a?i.value:i.primaryKey),++e===u?r({result:n}):void i.continue()):r({result:n})},t.onerror=zt(i)}}))}(o),openCursor:function({trans:e,values:n,query:r,reverse:i,unique:o}){return new Promise(((a,u)=>{a=We(a);const{index:l,range:c}=r,h=e.objectStore(t),d=l.isPrimaryKey?h:h.index(l.name),f=i?o?\"prevunique\":\"prev\":o?\"nextunique\":\"next\",p=n||!(\"openKeyCursor\"in d)?d.openCursor(s(c),f):d.openKeyCursor(s(c),f);p.onerror=zt(u),p.onsuccess=We((t=>{const n=p.result;if(!n)return void a(null);n.___id=++rn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),o=()=>{throw new Error(\"Cursor not stopped\")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error(\"Cursor not started\")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=We(e),p.onerror=zt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error(\"Cursor behind last entry\")},n.stop()};return p.onsuccess=We((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,a(),t},a(n)}),u)}))},count({query:e,trans:n}){const{index:r,range:i}=e;return new Promise(((e,o)=>{const a=n.objectStore(t),u=r.isPrimaryKey?a:a.index(r.name),l=s(i),c=l?u.count(l):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=zt(o)}))}}}(e))),u={};return a.forEach((e=>u[e.name]=e)),{stack:\"dbcore\",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:en(t),schema:i}}function an({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(on(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function un({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=d(t,n);(!r||\"value\"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,n,{get(){return this.table(n)},set(e){u(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function ln({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function cn(e,t){return e._cfg.version-t._cfg.version}function hn(e,n,r,s){const i=e._dbSchema,o=e._createTransaction(\"readwrite\",e._storeNames,i);o.create(r),o._completion.catch(s);const a=o._reject.bind(o),u=Ke.transless||Ke;Je((()=>{Ke.trans=o,Ke.transless=u,0===n?(t(i).forEach((e=>{fn(r,e,i[e].primKey,i[e].indexes)})),an(e,r),Ce.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},n,r,s){const i=[],o=e._versions;let a=e._dbSchema=yn(e,e.idbdb,s),u=!1;function l(){return i.length?Ce.resolve(i.shift()(r.idbtrans)).then(l):Ce.resolve()}return o.filter((e=>e._cfg.version>=n)).forEach((o=>{i.push((()=>{const i=a,l=o._cfg.dbschema;mn(e,i,s),mn(e,l,s),a=e._dbSchema=l;const c=dn(i,l);c.add.forEach((e=>{fn(s,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade(\"Not yet support for changing primary key\");{const t=s.objectStore(e.name);e.add.forEach((e=>pn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),pn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>n){an(e,s),r._memoizedTables={},u=!0;let n=w(l);c.del.forEach((e=>{n[e]=i[e]})),ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],t(n),n),r.schema=n;const o=T(h);let a;o&&Ze();const d=Ce.follow((()=>{if(a=h(r),a&&o){var e=et.bind(null,null);a.then(e,e)}}));return a&&\"function\"==typeof a.then?Ce.resolve(a):d.then((()=>a))}})),i.push((t=>{if(!u||!vt){!function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t)}ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),l().then((()=>{var e,n;n=s,t(e=a).forEach((t=>{n.db.objectStoreNames.contains(t)||fn(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,r).catch(a)}))}function dn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(\"\"+(s.primKey.keyPath||\"\")!=\"\"+(i.primKey.keyPath||\"\")||s.primKey.auto!==i.primKey.auto&&!mt)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let o;for(o in t)r[o]||e.del.push(o);for(o in r){const n=t[o],s=r[o];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function fn(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>pn(s,e))),s}function pn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function yn(e,t,n){const r={};return p(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=Xt(Jt(s),s||\"\",!1,!1,!!t.autoIncrement,s&&\"string\"!=typeof s,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var a=Xt(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&\"string\"!=typeof s,!1);o.push(a)}r[e]=Zt(e,i,o)})),r}function mn({_novip:t},n,r){const s=r.db.objectStoreNames;for(let e=0;e<s.length;++e){const i=s[e],o=r.objectStore(i);t._hasGetAll=\"getAll\"in o;for(let e=0;e<o.indexNames.length;++e){const t=o.indexNames[e],r=o.index(t).keyPath,s=\"string\"==typeof r?r:\"[\"+p(r).join(\"+\")+\"]\";if(n[i]){const e=n[i].idxByName[s];e&&(e.name=t,delete n[i].idxByName[s],n[i].idxByName[t]=e)}}}\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(t._hasGetAll=!1)}class vn{_parseStoresSpec(e,r){t(e).forEach((t=>{if(null!==e[t]){var s=e[t].split(\",\").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\\+\\+)/g,\"\"),s=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(\"+\"):r;return Xt(r,s||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),n(s),0===t)})),i=s.shift();if(i.multi)throw new X.Schema(\"Primary key cannot be multi-valued\");s.forEach((e=>{if(e.auto)throw new X.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!e.keyPath)throw new X.Schema(\"Index must have a name and cannot be an empty string\")})),r[t]=Zt(t,i,s)}}))}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const s=n._versions,i={};let o={};return s.forEach((e=>{r(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)})),n._dbSchema=o,ln(n,[n._allTables,n,n.Transaction.prototype]),un(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(o),o),n._storeNames=t(o),this}upgrade(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,e),this}}function gn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new $n(\"__dbnames\",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:\"name\"})),n.table(\"dbnames\")}function bn(e){return e&&\"function\"==typeof e.databases}function _n(e){return Je((function(){return Ke.letThrough=!0,e()}))}function wn(){var e;return!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function xn(e){const n=e._state,{indexedDB:r}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((()=>n.dbOpenError?ht(n.dbOpenError):e));R&&(n.openCanceller._stackHolder=q()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const s=n.openCanceller;function i(){if(n.openCanceller!==s)throw new X.DatabaseClosed(\"db.open() was cancelled\")}let o=n.dbReadyResolve,a=null,u=!1;return Ce.race([s,(\"undefined\"==typeof navigator?Ce.resolve():wn()).then((()=>new Ce(((s,o)=>{if(i(),!r)throw new X.MissingAPI;const l=e.name,c=n.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=zt(o),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((t=>{if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=Gt,a.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=We((()=>{o(new X.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{a.onerror=zt(o);var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=s<1,e._novip.idbdb=c.result,hn(e,s/10,a,o)}}),o),c.onsuccess=We((()=>{a=null;const r=e._novip.idbdb=c.result,i=p(r.objectStoreNames);if(i.length>0)try{const s=r.transaction(1===(o=i).length?o[0]:o,\"readonly\");n.autoSchema?function({_novip:e},n,r){e.verno=n.version/10;const s=e._dbSchema=yn(0,n,r);e._storeNames=p(n.objectStoreNames,0),un(e,[e._allTables],t(s),s)}(e,r,s):(mn(e,e._dbSchema,s),function(e,t){const n=dn(yn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,s)||console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\")),an(e,s)}catch(e){}var o;yt.push(e),r.onversionchange=We((t=>{n.vcFired=!0,e.on(\"versionchange\").fire(t)})),r.onclose=We((t=>{e.on(\"close\").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).put({name:n}).catch(ee)}(e._deps,l),s()}),o)}))))]).then((()=>(i(),n.onReadyBeingFired=[],Ce.resolve(_n((()=>e.on.ready.fire(e.vip)))).then((function t(){if(n.onReadyBeingFired.length>0){let r=n.onReadyBeingFired.reduce(ue,ee);return n.onReadyBeingFired=[],Ce.resolve(_n((()=>r(e.vip)))).then(t)}}))))).finally((()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((()=>e)).catch((t=>{n.dbOpenError=t;try{a&&a.abort()}catch(e){}return s===n.openCanceller&&e._close(),ht(t)})).finally((()=>{n.openComplete=!0,o()}))}function kn(e){var t=t=>e.next(t),r=i(t),s=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&\"function\"==typeof o.then?o.then(r,s):n(o)?Promise.all(o).then(r,s):r(o)}}return i(t)()}function En(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument(\"Too few arguments\");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=k(s);return[e,i,n]}function Pn(e,t,n,r,s){return Ce.resolve().then((()=>{const i=Ke.transless||Ke,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>Pn(e,t,n,null,s)))):ht(r)}const u=T(s);let l;u&&Ze();const c=Ce.follow((()=>{if(l=s.call(o,o),l)if(u){var e=et.bind(null,null);l.then(e,e)}else\"function\"==typeof l.next&&\"function\"==typeof l.throw&&(l=kn(l))}),a);return(l&&\"function\"==typeof l.then?Ce.resolve(l).then((e=>o.active?e:ht(new X.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))):c.then((()=>l))).then((e=>(r&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),ht(e))))}))}function Kn(e,t,r){const s=n(e)?e.slice():[e];for(let e=0;e<r;++e)s.push(t);return s}const On={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(e,t,n){const r=sn(e),a=s[r]=s[r]||[],u=null==e?0:\"string\"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:tn(e),unique:!l&&n.unique};if(a.push(c),c.isPrimaryKey||i.push(c),u>1){o(2===u?e[0]:e.slice(0,u-1),t+1,n)}return a.sort(((e,t)=>e.keyTail-t.keyTail)),c}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[\":id\"]=[a];for(const e of r.indexes)o(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:Kn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:Kn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const l={...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(e){const t=s[sn(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;if(!s)return n.openCursor(t);return n.openCursor(u(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(Kn(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(Kn(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)))}};return l}}}};function Sn(e,n,r,s){return r=r||{},s=s||\"\",t(e).forEach((t=>{if(o(n,t)){var i=e[t],a=n[t];if(\"object\"==typeof i&&\"object\"==typeof a&&i&&a){const e=C(i);e!==C(a)?r[s+t]=n[t]:\"Object\"===e?Sn(i,a,r,s+t+\".\"):i!==a&&(r[s+t]=n[t])}else i!==a&&(r[s+t]=n[t])}else r[s+t]=void 0})),t(n).forEach((t=>{o(e,t)||(r[s+t]=n[t])})),r}const An={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Ke.trans,{deleting:i,creating:a,updating:u}=s.table(t).hook;switch(e.type){case\"add\":if(a.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"put\":if(a.fire===ee&&u.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"delete\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"deleteRange\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Ke.trans,s=e.keys||function(e,t){return\"delete\"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error(\"Keys missing\");return\"delete\"!==(e=\"add\"===e.type||\"put\"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return\"add\"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:\"immutable\"})}(n,e,s).then((l=>{const c=s.map(((n,s)=>{const c=l[s],h={onerror:null,onsuccess:null};if(\"delete\"===e.type)i.fire.call(h,n,c,t);else if(\"add\"===e.type||void 0===c){const i=a.fire.call(h,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||_(e.values[s],r.keyPath,n))}else{const r=Sn(c,e.values[s]),i=u.fire.call(h,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{o(t,e)?t[e]=i[e]:_(t,e,i[e])}))}}return h}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],o=c[r];null==i?o.onerror&&o.onerror(t[r]):o.onsuccess&&o.onsuccess(\"put\"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:\"delete\",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function Cn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===It(t.keys[s],e[i])&&(r.push(n?O(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const jn={stack:\"dbcore\",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Cn(e.keys,e.trans._cache,\"clone\"===e.cache);return t?Ce.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:\"clone\"===e.cache?O(t):t},t)))},mutate:e=>(\"add\"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Dn(e){return!(\"from\"in e)}const In=function(e,t){if(!this){const t=new In;return e&&\"d\"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Bn(e,t,n){const s=It(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(Dn(e))return r(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(It(n,e.from)<0)return i?Bn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Mn(e);if(It(t,e.to)>0)return o?Bn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Mn(e);It(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),It(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Tn(e,i),o&&a&&Tn(e,o)}function Tn(e,t){Dn(t)||function e(t,{from:n,to:r,l:s,r:i}){Bn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Rn(e,t){const n=Fn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Fn(e);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(It(a.from,s.to)<=0&&It(a.to,s.from)>=0)return!0;It(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Fn(e){let t=Dn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&It(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||It(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Mn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?\"r\":r<-1?\"l\":\"\";if(s){const t=\"r\"===s?\"l\":\"r\",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=Nn(n)}e.d=Nn(e)}function Nn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}a(In.prototype,{add(e){return Tn(this,e),this},addKey(e){return Bn(this,e,e),this},addKeys(e){return e.forEach((e=>Bn(this,e,e))),this},[j](){return Fn(this)}});const qn={stack:\"dbcore\",level:0,create:e=>{const r=e.schema.name,s=new In(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:a}=o,{primaryKey:u}=a,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const t=e.trans,u=t.mutatedParts||(t.mutatedParts={}),l=e=>{const t=`idb://${r}/${i}/${e}`;return u[t]||(u[t]=new In)},c=l(\"\"),h=l(\":dels\"),{type:d}=e;let[f,p]=\"deleteRange\"===e.type?[e.range]:\"delete\"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const y=e.trans._cache;return o.mutate(e).then((e=>{if(n(f)){\"delete\"!==d&&(f=e.results),c.addKeys(f);const t=Cn(f,y);t||\"add\"===d||h.addKeys(f),(t||p)&&function(e,t,r,s){function i(t){const i=e(t.name||\"\");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&n(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||s).forEach(((e,t)=>{const n=r&&o(r[t]),i=s&&o(s[t]);0!==It(n,i)&&(null!=n&&a(n),null!=i&&a(i))}))}t.indexes.forEach(i)}(l,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),c.add(e)}else c.add(s),h.add(s),a.indexes.forEach((e=>l(e.name).add(s)));return e}))}},d=({query:{index:t,range:n}})=>{var r,s;return[t,new In(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[u,new In(e.key)],getMany:e=>[u,(new In).addKeys(e.keys)],count:d,query:d,openCursor:d};return t(f).forEach((e=>{h[e]=function(t){const{subscr:n}=Ke;if(n){const a=e=>{const t=`idb://${r}/${i}/${e}`;return n[t]||(n[t]=new In)},u=a(\"\"),h=a(\":dels\"),[d,p]=f[e](t);if(a(d.name||\"\").add(p),!d.isPrimaryKey){if(\"count\"!==e){const n=\"query\"===e&&c&&t.values&&o.query({...t,values:!1});return o[e].apply(this,arguments).then((r=>{if(\"query\"===e){if(c&&t.values)return n.then((({result:e})=>(u.addKeys(e),r)));const e=t.values?r.result.map(l):r.result;t.values?u.addKeys(e):h.addKeys(e)}else if(\"openCursor\"===e){const e=r,n=t.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(n&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(s)}}return o[e].apply(this,arguments)}})),h}}}};class $n{constructor(e,t){this._middlewares={},this.verno=0;const n=$n.dependencies;this._options=t={addons:$n.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new Ce((e=>{s.dbReadyResolve=e})),s.openCanceller=new Ce(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=Et(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{$n.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Ce.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Pt(Rt.prototype,(function(e,t){this.db=i;let n=wt,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==te?a:null}}))),this.Table=function(e){return Pt(kt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Et(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})}))}(this),this.Transaction=function(e){return Pt(Qt.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Et(this,\"complete\",\"error\",\"abort\"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return Pt(vn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Pt(Yt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:\":id\"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new X.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on(\"versionchange\",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on(\"blocked\",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=en(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on(\"blocked\").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on(\"versionchange\").fire(e)))},this.use(On),this.use(An),this.use(qn),this.use(jn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type(\"Given version is not a positive number\");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(cn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new Ce(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return xn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ce((t=>{e.dbReadyResolve=t})),e.openCanceller=new Ce(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ce(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).delete(n).catch(ee)}(this._deps,this.name),n()})),e.onerror=zt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument(\"Arguments not allowed in db.delete()\");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&\"DatabaseClosed\"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=En.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ke.trans;r&&r.db===this&&-1===e.indexOf(\"!\")||(r=null);const s=-1!==e.indexOf(\"?\");let i,o;e=e.replace(\"!\",\"\").replace(\"?\",\"\");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if(\"string\"!=typeof t)throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return t})),\"r\"==e||\"readonly\"===e)i=\"readonly\";else{if(\"rw\"!=e&&\"readwrite\"!=e)throw new X.InvalidArgument(\"Invalid transaction mode: \"+e);i=\"readwrite\"}if(r){if(\"readonly\"===r.mode&&\"readwrite\"===i){if(!s)throw new X.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");r=null}r&&o.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction(\"Table \"+e+\" not included in parent transaction.\");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const a=Pn.bind(null,this,i,o,r,n);return r?r._promise(i,a,\"lock\"):Ke.trans?ot(Ke.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!o(this._allTables,e))throw new X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Un=\"undefined\"!=typeof Symbol&&\"observable\"in Symbol?Symbol.observable:\"@@observable\";class Ln{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&\"function\"!=typeof e?e:{next:e,error:t,complete:n})}[Un](){return this}}function Vn(e,n){return t(n).forEach((t=>{Tn(e[t]||(e[t]=new In),n[t])})),e}function Wn(e){return new Ln((n=>{const r=T(e);let s=!1,i={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Ht.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,l=!1;function c(){return t(o).some((e=>i[e]&&Rn(i[e],o[e])))}const h=e=>{Vn(i,e),c()&&d()},d=()=>{if(u||s)return;i={};const t={},f=function(t){r&&Ze();const n=()=>Je(e,{subscr:t,trans:null}),s=Ke.trans?ot(Ke.transless,n):n();return r&&s.then(et,et),s}(t);l||(Ht(\"storagemutated\",h),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,s||(c()?d():(i={},o=t,n.next&&n.next(e)))}),(e=>{u=!1,n.error&&n.error(e),a.unsubscribe()}))};return d(),a}))}let Yn;try{Yn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){Yn={indexedDB:null,IDBKeyRange:null}}const zn=$n;function Gn(e){let t=Hn;try{Hn=!0,Ht.storagemutated.fire(e)}finally{Hn=t}}a(zn,{...Z,delete:e=>new zn(e,{addons:[]}).delete(),exists:e=>new zn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch(\"NoSuchDatabaseError\",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return bn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>\"__dbnames\"!==e)))):gn(e,t).toCollection().primaryKeys()}(zn.dependencies).then(e)}catch(e){return ht(new X.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>Ke.trans?ot(Ke.transless,e):e(),vip:_n,async:function(e){return function(){try{var t=kn(e.apply(this,arguments));return t&&\"function\"==typeof t.then?t:Ce.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=kn(e.apply(n,t||[]));return r&&\"function\"==typeof r.then?r:Ce.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(e,t){const n=Ce.resolve(\"function\"==typeof e?zn.ignoreTransaction(e):e).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(n):n},Promise:Ce,debug:{get:()=>R,set:e=>{F(e,\"dexie\"===e?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Et,on:Ht,liveQuery:Wn,extendObservabilitySet:Vn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(e,t){\"string\"==typeof t?_(e,t,void 0):\"length\"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:w,deepClone:O,getObjectDiff:Sn,cmp:It,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:Yn,semVer:\"3.2.3\",version:\"3.2.3\".split(\".\").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),zn.maxKey=en(zn.dependencies.IDBKeyRange),\"undefined\"!=typeof dispatchEvent&&\"undefined\"!=typeof addEventListener&&(Ht(\"storagemutated\",(e=>{if(!Hn){let t;mt?(t=document.createEvent(\"CustomEvent\"),t.initCustomEvent(\"x-storagemutated-1\",!0,!0,e)):t=new CustomEvent(\"x-storagemutated-1\",{detail:e}),Hn=!0,dispatchEvent(t),Hn=!1}})),addEventListener(\"x-storagemutated-1\",(({detail:e})=>{Hn||Gn(e)})));let Hn=!1;if(\"undefined\"!=typeof BroadcastChannel){const e=new BroadcastChannel(\"x-storagemutated-1\");\"function\"==typeof e.unref&&e.unref(),Ht(\"storagemutated\",(t=>{Hn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Gn(e.data)}}else if(\"undefined\"!=typeof self&&\"undefined\"!=typeof navigator){Ht(\"storagemutated\",(e=>{try{Hn||(\"undefined\"!=typeof localStorage&&localStorage.setItem(\"x-storagemutated-1\",JSON.stringify({trig:Math.random(),changedParts:e})),\"object\"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:\"x-storagemutated-1\",changedParts:e}))))}catch(e){}})),\"undefined\"!=typeof addEventListener&&addEventListener(\"storage\",(e=>{if(\"x-storagemutated-1\"===e.key){const t=JSON.parse(e.newValue);t&&Gn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener(\"message\",(function({data:e}){e&&\"x-storagemutated-1\"===e.type&&Gn(e.changedParts)}))}Ce.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var n=new J[e.name](t||e.message,e);return\"stack\"in e&&l(n,\"stack\",{get:function(){return this.inner.stack}}),n},F(R,bt);export{$n as Dexie,In as RangeSet,$n as default,Wn as liveQuery,Tn as mergeRanges,Rn as rangesOverlap};","// db.ts\nimport Dexie, { Table } from \"dexie\";\nimport { BSIDataCatalogue, BSIDataSystem } from \"./bs_types\";\n\nexport class MySubClassedDexie extends Dexie {\n  catalogues!: Table<{ id: string; content: BSIDataCatalogue; path?: string }>;\n  systems!: Table<{ id: string; content: BSIDataSystem; path?: string }>;\n\n  constructor() {\n    super(\"nr-editor\");\n    this.version(5).stores({\n      catalogues: \"id, content.catalogue.id, content.catalogue.gameSystemId\",\n      systems: \"id\",\n    });\n  }\n}\n\nexport const db = new MySubClassedDexie();\n","import type { Catalogue } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { filename } from \"~/electron/node_helpers\";\nimport type { BattleScribeRepoData } from \"~/assets/shared/battlescribe/bs_import_data\";\nimport { removeSuffix } from \"~/assets/shared/battlescribe/bs_helpers\";\nexport interface GithubIntegration {\n  githubUrl: string;\n  githubRepo?: string;\n  githubOwner?: string;\n  githubName?: string;\n  repoData?: BattleScribeRepoData;\n  discovered?: boolean;\n}\n\nexport function normalizeGithubRepoUrl(input: string): string | null {\n  const githubUrlRegex = /^(?:(http(s?)?:\\/\\/)?github.com\\/)?([^\\/]+)\\/([^\\/]+)$/;\n  const match = input.match(githubUrlRegex);\n\n  if (!match) {\n    return null;\n  }\n\n  const [, protocol = \"https://\", _, user, repo] = match;\n\n  if (!user || !repo) {\n    return null;\n  }\n  return `https://github.com/${user}/${repo}`;\n}\nexport function parseGitHubUrl(githubUrl: string) {\n  // Regular expression to match GitHub URLs\n  const githubUrlRegex = /^(?:https?:\\/\\/)?(?:www\\.)?github\\.com\\/([^/]+)\\/([^/]+)(?:\\/)?$/;\n\n  // Check if the input URL matches the GitHub URL format\n  const match = githubUrl.match(githubUrlRegex);\n\n  if (!match) {\n    throw new Error(\"Invalid GitHub URL format: \" + githubUrl);\n  }\n\n  const [, repoOwner, repoName] = match;\n\n  return {\n    githubUrl: githubUrl,\n    githubRepo: `${repoOwner}/${repoName}`,\n    githubOwner: repoOwner,\n    githubName: repoName,\n  };\n}\n\nasync function getFileContentFromRepo(githubUrl: string, filePath: string) {\n  try {\n    const urlParts = githubUrl.split(\"/\");\n    const owner = urlParts[urlParts.length - 2];\n    const repo = urlParts[urlParts.length - 1].replace(\".git\", \"\");\n    const url = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(filePath)}`;\n\n    console.log(`Querying github api at ${url}`);\n    const response = await $fetch<{ download_url?: string }>(url, {\n      headers: {\n        \"User-Agent\": \"New Recruit Data Editor (Electron)\",\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n\n    if (!response || !response?.download_url) {\n      throw new Error(\"No download_url found\");\n    }\n    console.log(`Downloading file at ${response?.download_url}`);\n\n    const content = await $fetch<string>(response.download_url, {\n      headers: {\n        \"User-Agent\": \"New Recruit Data Editor (Electron)\",\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n    console.log(`Downloaded file, length: ${content.length}`);\n    return content;\n  } catch (error) {\n    throw error;\n  }\n}\nasync function getFileContentFromRepoWithFallback(githubUrl: string, filePath: string, fallBackPath?: string) {\n  try {\n    return await getFileContentFromRepo(githubUrl, filePath);\n  } catch (error) {\n    if (!fallBackPath) {\n      throw error;\n    }\n    return await getFileContentFromRepo(githubUrl, fallBackPath);\n  }\n}\n\nexport async function getNextRevision(github: GithubIntegration, catalogue: Catalogue) {\n  if (catalogue.fullFilePath) {\n    try {\n      const fileName = filename(catalogue.fullFilePath);\n      const fallBack = fileName.endsWith(\"z\") ? removeSuffix(fileName, \"z\") : undefined;\n      const content = await getFileContentFromRepoWithFallback(github.githubUrl, fileName, fallBack);\n      const regex = /revision=\"(\\d+)\"/;\n      const match = content.match(regex);\n      if (match) {\n        const resultRevision = (Number(match[1]) || 0) + 1;\n        console.log(`Revision of ${catalogue.name}: ${catalogue.revision} -> ${resultRevision}`);\n        return resultRevision;\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return catalogue.revision || 1;\n}\n","export type BooksDate = {\n  [id in keyof any]: string | null;\n};\nexport function getBookDate(booksDate: BooksDate | undefined, id: number | string): string | null | undefined {\n  if (!booksDate) return undefined;\n  return booksDate[id] || booksDate[\"*\"];\n}\n","import type { Catalogue } from \"./bs_main_catalogue\";\nimport { setPrototypeRecursive, setPrototype } from \"./bs_main_types\";\nimport type { BSCatalogueManager } from \"./bs_system\";\nimport type { BSIData } from \"./bs_types\";\nimport type { BooksDate } from \"./bs_versioning\";\n\nexport interface loadDataOptions {\n  deleteBadLinks: boolean;\n}\nexport async function loadData(\n  system: BSCatalogueManager,\n  data: BSIData,\n  booksDate?: BooksDate,\n  options?: loadDataOptions\n): Promise<Catalogue> {\n  if (!data.catalogue && !data.gameSystem) {\n    throw Error(`invalid loadBsData argument: no .catalogue or .gameSystem in data`);\n  }\n\n  const key = data.catalogue ? \"catalogue\" : \"gameSystem\";\n  const isSystem = key === \"gameSystem\";\n  const isCatalogue = key === \"catalogue\";\n  const obj = data[key]!;\n  const asCatalogue = obj as unknown as Catalogue;\n  if (asCatalogue.loaded || asCatalogue.loaded_editor) {\n    return asCatalogue;\n  }\n  // Prevent infinite loops by checking if prototype is already set\n  setPrototypeRecursive(obj);\n  const content = setPrototype(obj, key);\n  content.manager = system;\n\n  // Resolve gameSystem\n  if (isCatalogue) {\n    const link = { targetId: content.gameSystemId! };\n    const alreadyLoadedGameSystem = system.getLoadedCatalogue(link, booksDate);\n    if (alreadyLoadedGameSystem) {\n      content.gameSystem = alreadyLoadedGameSystem;\n    } //\n    else {\n      const data = await system.getData(link, booksDate);\n      const loadedGameSystem = system.getLoadedCatalogue(link, booksDate);\n      if (loadedGameSystem) {\n        content.gameSystem = loadedGameSystem;\n      } //\n      else {\n        content.gameSystem = await loadData(system, data, booksDate, options);\n      }\n    }\n  }\n\n  // Resolve catalogue Links\n  const promises = [];\n  for (const link of content?.catalogueLinks || []) {\n    if (!link.targetId) {\n      console.warn(`invalid link: no targetId in link: ${link}, found in ${obj.name}`);\n      continue;\n    }\n\n    if (link.targetId === content.id) {\n      link.target = content;\n      continue;\n    }\n    const alreadyLoadedCatalogue = system.getLoadedCatalogue(link, booksDate);\n    if (alreadyLoadedCatalogue) {\n      link.target = alreadyLoadedCatalogue;\n      continue;\n    } //\n\n    const promise = system.getData(link, booksDate).then((data) => {\n      const loadedCatalogue = system.getLoadedCatalogue(link, booksDate);\n      if (loadedCatalogue) {\n        link.target = loadedCatalogue;\n        return;\n      }\n      return loadData(system, data, booksDate, options).then((data) => (link.target = data));\n    });\n    promises.push(promise);\n  }\n  await Promise.all(promises);\n\n  // Add loaded catalogue to Manager\n  if (isSystem) {\n    system.addLoadedSystem(content);\n  }\n  if (isCatalogue) {\n    system.addLoadedCatalogue(content);\n  }\n\n  return content;\n}\n","import type { BSICatalogue, BSICatalogueLink, BSIData, BSIGameSystem } from \"./bs_types\";\nimport type { Catalogue } from \"./bs_main_catalogue\";\nimport { getBookDate, BooksDate } from \"./bs_versioning\";\nimport { loadData } from \"./bs_load_data\";\nimport type { Base } from \"./bs_main\";\n\nexport class BSCatalogueManager {\n  catalogues = {} as Record<string, Record<string, Catalogue>>;\n  unresolvedLinks?: Record<string, Array<Base>>;\n  settings?: Record<string, string | number | boolean | undefined>;\n  // Must implement\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async getData(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Promise<BSIData> {\n    throw new Error(\"Method not implemented.\");\n  }\n  getCatalogueInfo(catalogueLink: BSICatalogueLink): BSICatalogue | BSIGameSystem | undefined {\n    return undefined;\n  }\n  findOptionById(id: string): Base | undefined {\n    return undefined;\n  }\n  getLoadedCatalogue(catalogueLink: BSICatalogueLink | string, booksDate?: BooksDate): Catalogue | undefined {\n    const key = typeof catalogueLink === \"string\" ? catalogueLink : catalogueLink.targetId || catalogueLink.name!;\n    const date = getBookDate(booksDate, key) || \"default\";\n\n    const dateIndex = this.catalogues[key];\n    return dateIndex ? dateIndex[date] : undefined;\n  }\n  addLoadedCatalogue(catalogue: Catalogue, booksDate?: BooksDate): void {\n    const date = getBookDate(booksDate, catalogue.id) || \"default\";\n    if (!this.catalogues[catalogue.name]) this.catalogues[catalogue.name] = {};\n    if (!this.catalogues[catalogue.id]) this.catalogues[catalogue.id] = {};\n    this.catalogues[catalogue.name][date] = catalogue;\n    this.catalogues[catalogue.id][date] = catalogue;\n  }\n  addLoadedSystem(system: Catalogue, booksDate?: BooksDate) {\n    return this.addLoadedCatalogue(system, booksDate);\n  }\n  unloadAll() {\n    this.catalogues = {};\n  }\n\n  async loadData(data: BSIData, booksDate?: BooksDate): Promise<Catalogue> {\n    const loaded = await loadData(this, data, booksDate);\n    loaded.process();\n    return loaded;\n  }\n  async loadCatalogue(catalogueLink: BSICatalogueLink, booksDate?: BooksDate, forceLoad?: boolean): Promise<Catalogue> {\n    const loaded = this.getLoadedCatalogue(catalogueLink, booksDate);\n    if (loaded && !forceLoad) return loaded;\n    const data = await this.getData(catalogueLink, booksDate);\n    if (data) {\n      const result = await this.loadData(data, booksDate);\n      return result;\n    }\n    throw Error(`Couldn't load catalogue: couldn't getData ${catalogueLink}`);\n  }\n}\n","import { BSCatalogueManager } from \"./bs_system\";\nimport { BSIDataSystem, BSIDataCatalogue, BSICatalogueLink, BSIData, BSICatalogue, BSIGameSystem } from \"./bs_types\";\nimport { BooksDate } from \"./bs_versioning\";\nimport { Catalogue } from \"./bs_main_catalogue\";\nimport { loadData } from \"./bs_load_data\";\nimport type { GithubIntegration } from \"./github\";\nimport { db } from \"./cataloguesdexie\";\nimport { Base, getDataObject } from \"./bs_main\";\nimport { noObserve } from \"./bs_main_types\";\n\nexport class GameSystemFiles extends BSCatalogueManager {\n  gameSystem: BSIDataSystem | null = null;\n  catalogueFiles: Record<string, BSIDataCatalogue> = noObserve() as {};\n  allLoaded?: boolean;\n  loadedCatalogues: Record<string, Catalogue> = {};\n  github?: GithubIntegration;\n  unresolvedLinks: Record<string, Array<Base>> = {};\n  index: Record<string, Base> = {};\n  async loadData(data: BSIData, booksDate?: BooksDate): Promise<Catalogue> {\n    const loaded = await loadData(this, data, booksDate, { deleteBadLinks: false });\n    return loaded;\n  }\n  findOptionById(id: string): Base | undefined {\n    for (const catalogue of Object.values(this.loadedCatalogues)) {\n      if (catalogue.index && catalogue.index[id]) return catalogue.index[id];\n    }\n  }\n  unloadAll() {\n    super.unloadAll();\n    for (const obj of Object.values(this.loadedCatalogues)) {\n      obj.reset();\n    }\n    this.loadedCatalogues = {};\n    delete this.allLoaded;\n  }\n  async loadAll(progress_cb?: (current: number, max: number, msg?: string) => void | Promise<void>) {\n    let max = Object.values(this.catalogueFiles).length + 1;\n    let current = 0;\n    if (!this.allLoaded) {\n      console.log(\"Loading all catalogues in\", this.gameSystem?.gameSystem?.name);\n    }\n    if (this.gameSystem) {\n      progress_cb && (await progress_cb(current, max, `Loading ${this.gameSystem.gameSystem.name}`));\n      const loadedSys = await this.loadCatalogue({ targetId: this.gameSystem.gameSystem.id });\n\n      loadedSys.processForEditor();\n      current++;\n\n      for (const catalogue of Object.values(this.catalogueFiles)) {\n        progress_cb && (await progress_cb(current, max, `Loading ${catalogue.catalogue.name}`));\n        const loaded = await this.loadCatalogue({ targetId: catalogue.catalogue.id });\n        loaded.processForEditor();\n        current++;\n        progress_cb && (await progress_cb(current, max, `Loading ${catalogue.catalogue.name}`));\n      }\n    }\n    this.allLoaded = true;\n  }\n  getLoadedCatalogue(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Catalogue | undefined {\n    const key = catalogueLink.targetId || catalogueLink.name!;\n    return this.loadedCatalogues[key] as Catalogue | undefined;\n  }\n  addLoadedCatalogue(catalogue: Catalogue, booksDate?: BooksDate): void {\n    this.loadedCatalogues[catalogue.id] = catalogue;\n  }\n  getAllLoadedCatalogues() {\n    const id = this.gameSystem?.gameSystem.id;\n    if (id) {\n      return Object.values(this.loadedCatalogues);\n    }\n    return [];\n  }\n  getId() {\n    return this.gameSystem?.gameSystem.id;\n  }\n  getCatalogueInfo(catalogueLink: BSICatalogueLink) {\n    if (this.gameSystem?.gameSystem.id === catalogueLink.targetId) {\n      return this.gameSystem?.gameSystem;\n    }\n    for (const catalogue of Object.values(this.catalogueFiles)) {\n      if (catalogue.catalogue.id === catalogueLink.targetId) {\n        return catalogue.catalogue;\n      }\n    }\n  }\n\n  getAllCatalogueFiles() {\n    return [...(this.gameSystem ? [this.gameSystem] : []), ...Object.values(this.catalogueFiles)];\n  }\n  setSystem(system: BSIDataSystem) {\n    this.gameSystem = system;\n  }\n  setCatalogue(catalogue: BSIDataCatalogue) {\n    const catalogueId = catalogue.catalogue.id;\n    this.catalogueFiles[catalogueId] = catalogue;\n  }\n  removeCatalogue(catalogue: BSIDataCatalogue) {\n    for (const [key, value] of Object.entries(this.catalogueFiles)) {\n      if (value.catalogue.id === catalogue.catalogue.id) {\n        delete this.catalogueFiles[key];\n      }\n    }\n  }\n\n  async getData(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Promise<BSIData> {\n    if (catalogueLink.targetId == this.gameSystem?.gameSystem.id) {\n      return this.gameSystem;\n    }\n    if (catalogueLink.targetId in this.catalogueFiles) {\n      return this.catalogueFiles[catalogueLink.targetId];\n    }\n\n    const catalogue = await db.catalogues.get({\n      \"content.catalogue.id\": catalogueLink.targetId,\n    });\n    if (catalogue) {\n      return catalogue.content;\n    }\n\n    const system = await db.systems.get(catalogueLink.targetId);\n    if (system) {\n      return system.content;\n    }\n\n    const errorPart = catalogueLink.name ? `name ${catalogueLink.name}` : `id ${catalogueLink.targetId}`;\n    throw Error(`Couldn't import catalogue with ${errorPart}, perhaps it wasnt uploaded?`);\n  }\n}\n","import { defineStore } from \"pinia\";\nimport {\n  ItemKeys,\n  ItemTypes,\n  EntryPathEntry,\n  getEntryPath,\n  onAddEntry,\n  onRemoveEntry,\n  popAtEntryPath,\n  addAtEntryPath,\n  scrambleIds,\n  getTypeName,\n  getTypeLabel,\n  fixKey,\n  removeEntry,\n} from \"~/assets/shared/battlescribe/bs_editor\";\nimport {\n  enumerate_zip,\n  generateBattlescribeId,\n  removeSuffix,\n  textSearchRegex,\n  zipCompress,\n  forEachParent,\n  addObj,\n  type MaybeArray,\n} from \"~/assets/shared/battlescribe/bs_helpers\";\nimport { Catalogue, EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport {\n  Base,\n  Link,\n  entriesToJson,\n  entryToJson,\n  goodJsonKeys,\n  rootToJson,\n  Characteristic,\n  Rule,\n  getDataObject,\n  getDataDbId,\n  BaseChildsT,\n} from \"~/assets/shared/battlescribe/bs_main\";\nimport { setPrototypeRecursive } from \"~/assets/shared/battlescribe/bs_main_types\";\nimport { useCataloguesStore } from \"./cataloguesState\";\nimport type {\n  BSICatalogue,\n  BSIConstraint,\n  BSIData,\n  BSIDataCatalogue,\n  BSIDataSystem,\n  BSIGameSystem,\n  BSIProfile,\n} from \"~/assets/shared/battlescribe/bs_types\";\nimport {\n  createFolder,\n  dirname,\n  filename,\n  getFolderFiles,\n  getFolderRemote,\n  unwatchFile,\n  watchFile,\n  writeFile,\n} from \"~/electron/node_helpers\";\nimport {\n  allowed_children,\n  clean,\n  convertToJson,\n  convertToXml,\n  getExtension,\n  isAllowedExtension,\n  isZipExtension,\n} from \"~/assets/shared/battlescribe/bs_convert\";\nimport CatalogueVue from \"~/pages/catalogue.vue\";\nimport { LeftPanelDefaults } from \"~/components/catalogue/left_panel/LeftPanelDefaults\";\nimport { EditorUIState, useEditorUIState } from \"./editorUIState\";\nimport { db } from \"~/assets/shared/battlescribe/cataloguesdexie\";\nimport { getNextRevision, parseGitHubUrl } from \"~/assets/shared/battlescribe/github\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport { toRaw } from \"vue\";\nimport { Router } from \"vue-router\";\nimport { useSettingsStore } from \"./settingsState\";\nimport { RouteLocationNormalizedLoaded } from \"~/.nuxt/vue-router\";\nimport * as $node from \"~/electron/node_helpers\";\ntype CatalogueComponentT = InstanceType<typeof CatalogueVue>;\nconst enableGithubIntegrationWithGitFolder = false;\nexport interface IEditorStore {\n  selectionsParent?: Object | null;\n  selections: Array<{ obj: any; onunselected: () => unknown; payload?: any }>;\n  selectedEntries: Array<{ obj: EditorBase; onunselected: () => unknown; payload?: any }>;\n  selectedElementGroup: VueComponent[] | null;\n  selectedElement: VueComponent | null;\n  selectedItem: VueComponent | null;\n\n  filter: string;\n  filterRegex: RegExp;\n  filtered: EditorBase[];\n\n  historyStack: Array<EditorUIState | null>;\n  historyStackPos: number;\n\n  undoStack: { type: string; undo: () => unknown; redo: () => unknown }[];\n  undoStackPos: number;\n  clipboard: Array<EditorBase | Record<string, any> | string>;\n\n  mode: \"edit\" | \"references\";\n  clipboardmode: \"json\" | \"none\";\n  gameSystemsLoaded: boolean;\n  gameSystems: Record<string, GameSystemFiles>;\n\n  unsavedCount: number;\n  unsavedChanges: Record<string, CatalogueState>;\n\n  catalogueComponent?: CatalogueComponentT;\n  $nextTick?: Promise<any>;\n  $nextTickResolve?: (...args: any[]) => unknown;\n}\nexport interface CatalogueEntryItem {\n  item: ItemTypes & EditorBase;\n  type: ItemKeys;\n  imported?: boolean;\n}\nexport interface CatalogueState {\n  changed: boolean;\n  unsaved: boolean;\n  incremented?: boolean;\n  savingPromise?: Promise<any>;\n  isChangedOnDisk?: boolean;\n  isSaving?: boolean;\n}\n\nexport function get_ctx(el: any): any {\n  return el.vnode;\n}\n/**\n * Get the {@link EditorBase} (from bs_main.ts) out of a Vue component instance (assumed to be an EditorCollapsibleBox.vue).\n *\n * @param {Vue} vue_el - The Vue component instance.\n * @returns {EditorBase}\n */\nexport function get_base_from_vue_el(vue_el: VueComponent | EditorBase): EditorBase {\n  if (vue_el instanceof Base) {\n    return vue_el as EditorBase;\n  }\n  const p1 = vue_el.$parent;\n  if (p1.item) return p1.item;\n  const p2 = p1.$parent;\n  if (p2.item) return p2.item;\n  const p3 = p2.$parent;\n  return p3.item;\n}\n\nfunction markSaving(file: CatalogueState) {\n  file.isSaving = true;\n}\nfunction markChangedOnDisk(file: CatalogueState) {\n  if (file.isSaving) {\n    file.isSaving = false;\n    return;\n  }\n  file.isChangedOnDisk = true;\n}\nfunction unmarkChangedOnDisk(file: CatalogueState) {\n  if (file.isChangedOnDisk) {\n    file.isChangedOnDisk = false;\n  }\n  if (file.isSaving === undefined) {\n    file.isSaving = false;\n  }\n}\ntype VueComponent = any;\nconst editorFields = new Set<string>([\"select\", \"showInEditor\", \"showChildsInEditor\"]);\nexport const useEditorStore = defineStore(\"editor\", {\n  state: (): IEditorStore => ({\n    selections: [],\n    selectedEntries: [],\n    selectedElementGroup: null,\n    selectedElement: null,\n    selectedItem: null,\n\n    filter: \"\",\n    filterRegex: RegExp(\"\"),\n    filtered: [],\n\n    undoStack: [],\n    undoStackPos: -1,\n\n    historyStack: [],\n    historyStackPos: 0,\n\n    clipboard: [],\n\n    mode: \"edit\",\n    clipboardmode: \"json\",\n\n    gameSystems: {},\n    gameSystemsLoaded: false,\n    unsavedChanges: {} as Record<string, CatalogueState>,\n\n    unsavedCount: 0,\n  }),\n\n  actions: {\n    async create_system(name: string, path?: string, extension?: string) {\n      console.log(\"Creating system with name:\", name);\n      const id = `sys-${generateBattlescribeId()}`;\n      const files = this.get_system(id);\n      const folder = path ? `${removeSuffix(path.replaceAll(\"\\\\\", \"/\"), \"/\")}/${name}` : \"\";\n\n      if (electron) {\n        if (!folder) {\n          throw new Error(\"No folder specified\");\n        }\n        createFolder(folder);\n      }\n      const data: BSIDataSystem = {\n        gameSystem: {\n          id: id,\n          name: name,\n          battleScribeVersion: \"2.03\",\n          revision: 1,\n          categoryEntries: [\n            {\n              name: \"Default Category\",\n              id: \"default-category\",\n            },\n          ],\n          forceEntries: [\n            {\n              name: \"Default Force\",\n              hidden: false,\n              id: \"default-force\",\n              categoryLinks: [\n                {\n                  name: \"Default Category\",\n                  hidden: false,\n                  id: \"default-force-category-link\",\n                  targetId: \"default-category\",\n                },\n              ],\n            },\n          ],\n          selectionEntries: [\n            {\n              type: \"upgrade\",\n              import: true,\n              name: \"Default Root Entry\",\n              hidden: false,\n              id: \"default-entry\",\n              categoryLinks: [\n                {\n                  targetId: \"default-category\",\n                  id: \"default-category-link\",\n                  primary: true,\n                  name: \"Default Category\",\n                  hidden: false,\n                },\n              ],\n            },\n          ],\n        },\n      };\n\n      if (folder) {\n        data.gameSystem.fullFilePath = `${folder}/${name}.${extension || \"gst\"}`;\n      }\n      files.setSystem(data);\n      this.get_catalogue_state(data).incremented = true;\n      this.saveCatalogue(data);\n      return files;\n    },\n    saveCatalogueInDb(data: Catalogue | BSICatalogue | BSIGameSystem) {\n      const stringed = rootToJson(data);\n      const isCatalogue = Boolean(data.gameSystemId);\n      const isSystem = !isCatalogue;\n      if (isSystem) {\n        db.systems.put({\n          content: JSON.parse(stringed),\n          path: data.fullFilePath,\n          id: data.id,\n        });\n      } else {\n        db.catalogues.put({\n          content: JSON.parse(stringed),\n          path: data.fullFilePath,\n          id: `${data.gameSystemId}-${data.id}`,\n        });\n      }\n    },\n\n    async saveCatalogueInFiles(data: Catalogue | BSICatalogue | BSIGameSystem) {\n      const path = data.fullFilePath;\n      if (!path) {\n        console.error(`No path included in the catalogue ${data.name} to save at`);\n        return;\n      }\n\n      const extension = getExtension(path);\n      if (path.endsWith(\".json\")) {\n        const content = rootToJson(data);\n        await writeFile(path, content);\n      } else {\n        const xml = convertToXml(data);\n        const shouldZip = isZipExtension(extension);\n        const name = filename(path);\n        const nameInZip = name.replace(\".gstz\", \".gst\").replace(\".catz\", \".cat\");\n        const content = shouldZip ? await zipCompress(nameInZip, xml, \"uint8array\") : xml;\n        await writeFile(path, content);\n      }\n    },\n\n    saveCatalogue(data: Catalogue | BSIData) {\n      const state = this.get_catalogue_state(data);\n      const obj = getDataObject(data);\n      markSaving(state);\n      if (electron) {\n        this.saveCatalogueInFiles(obj);\n      } else {\n        this.saveCatalogueInDb(obj);\n      }\n      unmarkChangedOnDisk(state);\n    },\n    async load_systems_from_folder(\n      folder: string,\n      progress?: (current: number, max: number, msg?: string) => Promise<unknown>\n    ) {\n      if (!globalThis.electron) {\n        throw new Error(\"Not running in electron\");\n      }\n      const files = await getFolderFiles(folder);\n      if (!files?.length) return;\n\n      console.log(\"Loading\", files.length, \"files\", files);\n      const result_system_ids = [] as string[];\n      const result_files = [];\n      const systems = [] as GameSystemFiles[];\n\n      const allowed = files.filter((o) => isAllowedExtension(o.name));\n      for (const file of allowed) {\n        try {\n          progress && (await progress(result_files.length, allowed.length, file.path));\n          const json = await convertToJson(file.data, file.name.endsWith(\"json\") ? \"json\" : \"xml\");\n          if (!json.catalogue && !json.gameSystem) {\n            continue;\n          };\n          const obj = getDataObject(json);\n          obj.fullFilePath = file.path.replaceAll(\"\\\\\", \"/\");\n          const systemId = json?.gameSystem?.id;\n          const catalogueId = json?.catalogue?.id;\n          if (systemId) {\n            const systemFiles = this.get_system(systemId);\n            systemFiles.setSystem(markRaw(json));\n            systems.push(systemFiles);\n            result_system_ids.push(systemId);\n          }\n          if (catalogueId) {\n            const systemFiles = this.get_system(json.catalogue.gameSystemId);\n            systemFiles.catalogueFiles[catalogueId] = markRaw(json);\n          }\n          result_files.push(json);\n        } catch (e) {\n          console.error(`Error loading ${file.name}`, e)\n        }\n      }\n      progress && (await progress(result_files.length, allowed.length));\n\n      for (const system of systems) {\n        progress && (await progress(0, 0, \"Checking for github integration\"));\n        await this.load_system(system);\n      }\n\n      return result_system_ids;\n    },\n    async load_systems_from_db(force = false) {\n      if (!this.gameSystemsLoaded && !force) {\n        this.gameSystemsLoaded = true;\n        let systems = (await db.systems.offset(0).keys()) as string[];\n        for (let system of systems) {\n          if (system in this.gameSystems) continue;\n          this.load_system_from_db(system);\n        }\n      }\n    },\n    async load_system_from_db(id: string) {\n      const dbsystem = await db.systems.get(id);\n      const system = dbsystem?.content;\n      if (!system) {\n        throw new Error(\"System not found \" + id);\n      }\n      if (!system.gameSystem.fullFilePath) {\n        system.gameSystem.fullFilePath = dbsystem.path;\n      }\n\n      const dbcatalogues = await db.catalogues.where({ \"content.catalogue.gameSystemId\": id });\n      const systemFiles = this.get_system(system.gameSystem.id);\n      systemFiles.setSystem(system);\n      for (let { content, path } of await dbcatalogues.toArray()) {\n        const catalogueId = content.catalogue.id;\n        if (!content.catalogue.fullFilePath) {\n          content.catalogue.fullFilePath = path;\n        }\n        systemFiles.catalogueFiles[catalogueId] = shallowReactive(content);\n      }\n      this.load_system(systemFiles, true);\n    },\n    async load_system(system: GameSystemFiles, keepState = false) {\n      if (system.gameSystem) {\n        const cataloguesStore = useCataloguesStore();\n        await system.unloadAll();\n        if (!keepState) {\n          for (const catalogue of system.getAllCatalogueFiles()) {\n            const state = this.get_catalogue_state(catalogue);\n            if (state) {\n              state.changed = false;\n              state.unsaved = false;\n              state.isChangedOnDisk = false;\n            }\n            cataloguesStore.updateCatalogue(getDataObject(catalogue));\n            cataloguesStore.setEdited(getDataObject(catalogue).id, false);\n          }\n        }\n        const publications = system.gameSystem.gameSystem.publications;\n        const github = publications?.find((o) => o.name?.trim().toLowerCase() === \"github\");\n        const path = system.gameSystem.gameSystem.fullFilePath;\n\n        if (path && enableGithubIntegrationWithGitFolder) {\n          try {\n            const remote = await getFolderRemote(dirname(path));\n            if (remote && remote !== \"origin\") {\n              console.log(\"remote:\", remote);\n              system.github = { ...parseGitHubUrl(remote), discovered: true };\n            }\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        if (github && github.publisherUrl) {\n          system.github = {\n            githubUrl: github.publisherUrl,\n          };\n          if (github.shortName && github.shortName.includes(\"/\")) {\n            system.github.githubRepo = github.shortName;\n            system.github.githubOwner = github.shortName?.split(\"/\")[0];\n            system.github.githubName = github.shortName?.split(\"/\")[1];\n          }\n        }\n      }\n      for (const catalogue of system.getAllCatalogueFiles()) {\n        const obj = getDataObject(catalogue);\n        if (!obj.fullFilePath) {\n          continue;\n        }\n        watchFile(obj.fullFilePath, () => {\n          this.on_file_changed(catalogue);\n        });\n      }\n    },\n    on_file_changed(file: BSIDataCatalogue | BSIDataSystem) {\n      console.log(getDataObject(file).name, \"changed\");\n      markChangedOnDisk(this.get_catalogue_state(file));\n    },\n    async get_or_load_system(id: string) {\n      if (!(id in this.gameSystems)) {\n        this.gameSystems[id] = new GameSystemFiles();\n        await this.load_system_from_db(id);\n      }\n      return this.gameSystems[id];\n    },\n    get_system(id: string) {\n      if (!(id in this.gameSystems)) {\n        const system = new GameSystemFiles();\n        system.settings = useSettingsStore() as Record<string, any>;\n        this.gameSystems[id] = system;\n      }\n      return this.gameSystems[id];\n    },\n    delete_system(id: string) {\n      delete this.gameSystems[id];\n    },\n    get_catalogue_state(catalogue: BSIData | Catalogue) {\n      const id = getDataDbId(catalogue);\n      if (!this.unsavedChanges[id]) {\n        this.unsavedChanges[id] = {\n          changed: false,\n          unsaved: false,\n        };\n      }\n      return this.unsavedChanges[id];\n    },\n    set_catalogue_changed(catalogue: Catalogue | BSIDataCatalogue | BSIDataSystem, changedState: boolean = true) {\n      const state = this.get_catalogue_state(catalogue);\n      if (changedState) {\n        state.changed = true;\n        if (!state.unsaved) {\n          this.unsavedCount += 1;\n          state.unsaved = changedState;\n        }\n      } else {\n        state.unsaved = changedState;\n      }\n    },\n    /**\n     * Returns true if the revision was incremented\n     */\n\n    async save_catalogue(\n      system: GameSystemFiles,\n      catalogue: Catalogue,\n      incrementRevision?: \"github\" | \"yes\" | \"no\"\n    ): Promise<boolean> {\n      const state = this.get_catalogue_state(catalogue);\n      const revision = catalogue.revision;\n      if (incrementRevision === \"github\" && system.github) {\n        catalogue.revision = await getNextRevision(system.github, catalogue);\n      }\n      if (incrementRevision === \"yes\" && !state?.incremented) {\n        catalogue.revision = catalogue.revision ? catalogue.revision + 1 : 1;\n        state.incremented = true;\n      }\n      if (incrementRevision === \"no\") {\n        state.incremented = true;\n      }\n      this.saveCatalogue(catalogue);\n      const cataloguesStore = useCataloguesStore();\n      const id = getDataDbId(catalogue);\n      cataloguesStore.updateCatalogue(catalogue);\n      cataloguesStore.setEdited(id, true);\n      if (state?.unsaved) {\n        this.unsavedCount--;\n        state.unsaved = false;\n      }\n      return catalogue.revision !== revision;\n    },\n    async prompt_revision(catalogue: Catalogue | GameSystemFiles) {\n      const settings = useSettingsStore();\n\n      const sys = (catalogue instanceof Catalogue ? catalogue.manager : catalogue) as GameSystemFiles;\n      for (const cat of catalogue instanceof Catalogue ? [catalogue] : sys.getAllLoadedCatalogues()) {\n        const state = this.get_catalogue_state(cat);\n        if (state?.unsaved && !state.incremented) {\n          if (sys.github) {\n            if (settings.githubAutoIncrement && !navigator.onLine) {\n              const promptResult = await (globalThis.customPrompt &&\n                globalThis.customPrompt({\n                  html: `<span>Would you like to increase the revision of this catalogue?<span><br/>\n  <span class=\"gray\">Note: This is shown because Github cannot be accessed as your are offline</span>`,\n                  cancel: \"No\",\n                  accept: \"Yes\",\n                  id: \"revision\",\n                }))\n              return promptResult ? \"yes\" : \"no\";\n            } else if (settings.githubAutoIncrement) {\n              return \"github\";\n            } else {\n              const promptResult = await (globalThis.customPrompt &&\n                globalThis.customPrompt({\n                  html: `<span>Would you like to increase the revision of this catalogue?<span><br/>`,\n                  cancel: \"No\",\n                  accept: \"Yes\",\n                  id: \"revision\",\n                }))\n              return promptResult ? \"yes\" : \"no\";\n            }\n          } else {\n            const promptResult = await (globalThis.customPrompt &&\n              globalThis.customPrompt({\n                html: `<span>Would you like to increase the revision of this catalogue?<span><br/>\n  <span class=\"gray\">Note: You can enable automatic revision increments by integrating with GitHub.<br/>This can be achieved by adding a publication in the GameSystem named \"GitHub\" with the repository's GitHub URL as the Publication URL.`,\n                cancel: \"No\",\n                accept: \"Yes\",\n                id: \"revision\",\n              }))\n            return promptResult ? \"yes\" : \"no\";\n          }\n        }\n      }\n    },\n    async save_all(system?: string) {\n      let failed = false;\n      let incremented = 0;\n\n      const settings = useSettingsStore();\n      try {\n        for (const sys of Object.values(this.gameSystems)) {\n          if (system && sys.gameSystem?.gameSystem?.id !== system) {\n            continue;\n          }\n          const increment = await this.prompt_revision(sys);\n          for (const cat of sys.getAllLoadedCatalogues()) {\n            if (this.get_catalogue_state(cat)?.unsaved) {\n              if (await this.save_catalogue(sys, cat, increment)) {\n                incremented += 1;\n              }\n            }\n          }\n        }\n      } catch (e) {\n        notify({ text: `Failed to save: ${(e as Error).name}: ${(e as Error).message}`, type: \"error\" });\n        failed = true;\n      }\n      if (incremented) {\n        notify(`Incremented ${incremented} catalogue's revision`);\n      }\n      return failed;\n    },\n    set_filter(filter: string) {\n      this.$state.filter = filter;\n      this.filterRegex = textSearchRegex(filter);\n    },\n    /**\n     * Sets the active `catalogueComponent` so it can be used by functions in the store\n     * Its typed as `any` to prevent recursive type\n     */\n    init(component: any) {\n      this.catalogueComponent = component as CatalogueComponentT;\n      (globalThis as any).$store = this;\n      (globalThis as any).$node = $node;\n      (globalThis as any).$search = (q: string) =>\n        this.system_search(this.catalogueComponent?.systemFiles!, { filter: q });\n    },\n    /**\n     * Force the left panel to re-render, used for setting its state by having it reload the saved state\n     */\n    rerender_catalogue() {\n      if (this.catalogueComponent) {\n        this.catalogueComponent.key += 1;\n      }\n    },\n    unselect(obj?: VueComponent | Base) {\n      const next_selected = [];\n      const next_unselected = [];\n      for (const selection of this.selections) {\n        if (obj === undefined || toRaw(selection.obj) === toRaw(obj)) {\n          next_unselected.push(selection);\n        } else {\n          next_selected.push(selection);\n        }\n      }\n      for (const selection of this.selectedEntries) {\n        if (obj === undefined || toRaw(selection.obj) === toRaw(obj)) {\n          next_unselected.push(selection);\n        } else {\n          next_selected.push(selection);\n        }\n      }\n      this.selections = next_selected;\n      for (const unselected of next_unselected) {\n        if (unselected.onunselected) {\n          unselected.onunselected();\n        }\n        if (unselected.obj === this.selectedItem) {\n          this.selectedItem = null;\n        }\n      }\n    },\n    is_selected(obj: VueComponent) {\n      if (obj instanceof Base) {\n        return this.selectedEntries.find((o) => o.obj === obj) !== undefined;\n      } else {\n        return this.selections.find((o) => o.obj === obj) !== undefined;\n      }\n    },\n    select(obj: VueComponent | EditorBase, onunselected: () => unknown, payload?: any) {\n      if (!this.is_selected(obj)) {\n        if (obj instanceof Base) {\n          this.selectedEntries.push({ obj: obj as EditorBase, onunselected, payload });\n        } else {\n          this.selections.push({ obj, onunselected, payload });\n        }\n      }\n    },\n    do_select(e: MouseEvent | null, el: VueComponent, group: VueComponent | VueComponent[]) {\n      const entries = Array.isArray(group) ? group : [group];\n      const last = this.selectedElementGroup;\n      const last_element = this.selectedElement;\n      this.selectedElement = el;\n      this.selectedElementGroup = group;\n\n      if (e?.shiftKey && toRaw(group) === toRaw(last)) {\n        const a = entries.findIndex((o) => o === toRaw(last_element));\n        const b = entries.findIndex((o) => o === toRaw(this.selectedElement));\n        const low = Math.min(a, b);\n        const high = Math.max(a, b);\n        for (let i = low; i <= high; i++) {\n          const entry: any = entries[i];\n          entry.select();\n        }\n        return;\n      }\n      if (!e?.ctrlKey && !e?.metaKey) {\n        this.unselect();\n      }\n      if (e?.ctrlKey && this.is_selected(el)) {\n        this.unselect(el);\n      } else {\n        el.select();\n        this.selectedItem = el;\n        this.mode = \"edit\";\n      }\n    },\n    do_rightclick_select(e: MouseEvent, el: VueComponent, group: VueComponent | VueComponent[]) {\n      if (this.is_selected(el)) return;\n      this.do_select(e, el, group);\n    },\n    clear_selections() {\n      this.unselect();\n    },\n    get_selections(): EditorBase[] {\n      const result = this.selections.map((o) => get_base_from_vue_el(o.obj));\n      this.selectedEntries.forEach((o) => result.push(o.obj));\n      return result;\n    },\n    get_selections_with_payload(): Array<{ obj: EditorBase; payload: any }> {\n      const result = this.selections.map((o) => ({ obj: get_base_from_vue_el(o.obj), payload: o.payload }));\n      this.selectedEntries.forEach((o) => result.push({ obj: o.obj, payload: o.payload }));\n      return result;\n    },\n    get_selected(): EditorBase | undefined {\n      return this.selectedItem && get_base_from_vue_el(this.selectedItem);\n    },\n    set_selections(entry_or_entries: MaybeArray<EditorBase>) {\n      this.clear_selections();\n      const arr = Array.isArray(entry_or_entries) ? entry_or_entries : [entry_or_entries];\n      this.selectedEntries = arr.map((o) => ({ obj: o, onunselected: () => null }));\n    },\n    async do_action(type: string, undo: () => void | Promise<void>, redo: () => any | Promise<any>) {\n      let result;\n      try {\n        result = await redo();\n      } catch (e) {\n        console.error(e);\n        return;\n      }\n\n      if (this.undoStackPos < this.undoStack.length) {\n        const n_to_remove = this.undoStack.length - this.undoStackPos - 1;\n        this.undoStack.splice(this.undoStackPos + 1, n_to_remove, { type, undo, redo });\n      } else {\n        this.undoStack.push({ type, undo, redo });\n      }\n      this.undoStackPos += 1;\n      return result;\n    },\n    /**\n     * Set the content of the clipboard, accepts an event to better conform with browser security/permissions stuff\n     * @param data the entries to set in the clipboard, do not use for copying text\n     * @param event the event to use, if not provided a valid ClipboardEvent, will use the navigator.clipboard.writeText()\n     */\n    async set_clipboard(data: EditorBase[], event?: ClipboardEvent) {\n      if (this.clipboardmode === \"json\") {\n        //@ts-ignore\n        const shallowCopies = data.map((o) => ({ parentKey: o.parentKey, ...o })) as EditorBase[];\n        const json = entriesToJson(shallowCopies, new Set([\"parentKey\"]), { forceArray: false, formatted: true });\n        if (event?.clipboardData) {\n          event.clipboardData.setData(\"text/plain\", json);\n        } else {\n          await navigator.clipboard.writeText(json);\n        }\n      } else {\n        this.clipboard = data;\n      }\n    },\n    /**\n     * Get the content of the clipboard, accepts an event to better conform with browser security/permissions stuff\n     * @param event the event to use, if not provided a valid ClipboardEvent, will use the navigator.clipboard.readText()\n     */\n    async get_clipboard(event?: ClipboardEvent) {\n      if (this.clipboardmode === \"json\") {\n        if (event?.clipboardData) {\n          const text = event.clipboardData.getData(\"text/plain\");\n          if (!text) return [];\n          return JSON.parse(text);\n        } else {\n          const text = await navigator.clipboard.readText();\n          return JSON.parse(text);\n        }\n      }\n      return this.clipboard;\n    },\n    can_undo() {\n      return Boolean(this.undoStack[this.undoStackPos]);\n    },\n    async undo() {\n      if (!this.can_undo()) return;\n      const action = this.undoStack[this.undoStackPos];\n      if (action) {\n        await action.undo();\n        this.undoStackPos--;\n      }\n    },\n    can_redo() {\n      return Boolean(this.undoStack[this.undoStackPos + 1]);\n    },\n    async redo() {\n      if (!this.can_redo()) return;\n      const action = this.undoStack[this.undoStackPos + 1];\n      if (action) {\n        await action.redo();\n        this.undoStackPos++;\n      }\n    },\n    async cut(event: ClipboardEvent) {\n      await this.set_clipboard(this.get_selections(), event);\n      this.remove();\n    },\n    async copy(event: ClipboardEvent) {\n      await this.set_clipboard(this.get_selections(), event);\n    },\n    async paste(event: ClipboardEvent) {\n      this.add(await this.get_clipboard(event));\n    },\n    async pasteLink() {\n      const obj = await this.get_clipboard();\n      if (!obj || !obj.parentKey || Array.isArray(obj)) {\n        return;\n      }\n      const selections = this.get_selections();\n      const first = selections[0];\n      if (!first) {\n        return;\n      }\n      const actual = first.getCatalogue().findOptionById(obj.id) as EditorBase | undefined;\n      if (actual) {\n        const link = {\n          parentKey: actual.isGroup() || actual.isEntry() ? \"entryLinks\" : \"infoLinks\",\n          targetId: actual.id,\n          id: generateBattlescribeId(),\n          type: actual.editorTypeName,\n          name: actual.getName(),\n          hidden: actual.hidden,\n          select: true,\n        };\n        this.add(link);\n      }\n    },\n    /**\n     * Duplicate the current selections\n     */\n    async duplicate() {\n      const selections = this.get_selections();\n      if (!selections.length) return;\n      const catalogue = selections[0].getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      let addeds = [] as EditorBase[];\n\n      const redo = () => {\n        addeds = [];\n        for (const item of selections) {\n          const copy = JSON.parse(entryToJson(item, editorFields));\n          if (!item.parent) continue;\n          const arr = item.parent[item.parentKey as keyof EditorBase];\n          if (!Array.isArray(arr)) {\n            throw new Error(`Couldn't duplicate: parent[${item.parentKey}] is not an array`);\n          }\n          setPrototypeRecursive({ [item.parentKey]: copy });\n          scrambleIds(catalogue, copy);\n          arr.push(copy);\n          onAddEntry(copy, catalogue, item.parent, this.get_system(sysId));\n          addeds.push(copy);\n        }\n      };\n      const undo = () => {\n        for (const entry of addeds) {\n          popAtEntryPath(catalogue, getEntryPath(entry));\n          onRemoveEntry(entry);\n        }\n      };\n      await this.do_action(\"dupe\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n    },\n    /**\n     * Remove the current selections.\n     */\n    remove(entry_or_entries?: MaybeArray<Base>) {\n      let entries = [] as EditorBase[];\n      if (entry_or_entries) {\n        for (const entry of Array.isArray(entry_or_entries) ? entry_or_entries : [entry_or_entries]) {\n          entries.push(entry as EditorBase);\n        }\n      } else {\n        const selections = this.get_selections();\n        if (!selections.length) return;\n        for (const selected of selections) {\n          entries.push(selected);\n        }\n      }\n\n      const catalogue = entries[0].getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      let paths = [] as EntryPathEntry[][];\n      let removeds = [] as EditorBase[];\n      const redo = async () => {\n        const temp = entries;\n        const manager = this.get_system(sysId);\n        removeds = [];\n        paths = [];\n        for (const entry of temp) {\n          const path = getEntryPath(entry);\n          const removed = popAtEntryPath(catalogue, path);\n          removeds.push(removed);\n          paths.push(path);\n          onRemoveEntry(removed, manager);\n        }\n        removeds.reverse();\n        paths.reverse();\n      };\n      const undo = async () => {\n        for (const [path, entry] of enumerate_zip(paths, removeds)) {\n          const parent = addAtEntryPath(catalogue, path, entry);\n          onAddEntry(entry, catalogue, parent, this.get_system(sysId));\n        }\n      };\n      this.do_action(\"remove\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n      this.unselect();\n    },\n    /**\n     *  Adds entries to the current selections, or provided parents.\n     * @param data the entries to add. Can be an array of entries, or a single entry.\n     * @param childKey the key to use when adding the childs. If not provided, the entries will be added to the parentKey of the first entry.\n     * @param parents the parents to use instead of the current selections. If not provided, the current selections will be used.\n     */\n    async add(\n      data: MaybeArray<EditorBase | Record<string, any>>,\n      childKey?: string & BaseChildsT,\n      parents?: EditorBase | EditorBase[]\n    ) {\n      let parentsWithPayload = [] as Array<{ obj: EditorBase; payload?: string }>;\n      if (!parents) {\n        parentsWithPayload = this.get_selections_with_payload();\n      } else {\n        parents = Array.isArray(parents) ? parents : [parents];\n        parentsWithPayload = parents.map((o) => ({ obj: o }));\n      }\n      if (!parentsWithPayload.length) {\n        console.error(\"Couldn't add: no selection or parent(s) provided\");\n        return;\n      }\n      const entries = (Array.isArray(data) ? data : [data]) as Array<EditorBase | Record<string, any> | string>;\n      if (!entries.length) {\n        console.error(\"Couldn't add: no data provided\");\n        return;\n      }\n\n      const catalogue = parentsWithPayload[0].obj.getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      let addeds = [] as EditorBase[];\n      const redo = async () => {\n        addeds = [];\n        for (const selection of parentsWithPayload) {\n          const item = selection.obj;\n          const selectedCatalogueKey = selection.payload;\n          await this.open(item, true);\n          const toAdd = [];\n          for (const entry of entries as Record<string, any>[]) {\n            // Ensure there is array to put the childs in\n            const key = fixKey(item, childKey || entry.parentKey, selectedCatalogueKey);\n            if (!key) {\n              console.warn(\"Couldn't create\", childKey || entry.parentKey, \"in\", selectedCatalogueKey);\n              continue;\n            }\n            if (!item[key as keyof Base]) {\n              (item as any)[key] = [];\n            }\n            const arr = item[key as keyof Base];\n            if (!Array.isArray(arr)) continue;\n\n            if (!allowed_children(item, item.parentKey)?.has(key as string)) {\n              console.warn(\"Couldn't add\", key, \"to a\", item.parentKey, \"because it is not allowed\");\n              continue;\n            }\n            // Copy to not affect existing\n            const json = entry instanceof Base ? entryToJson(entry, editorFields) : JSON.stringify(entry);\n            const copy = JSON.parse(json);\n            clean(copy, key as string);\n            delete copy.parentKey;\n\n            // Initialize classes from the json\n            setPrototypeRecursive({ [key]: copy });\n            toAdd.push({ key, entry: copy });\n          }\n\n          scrambleIds(\n            catalogue,\n            toAdd.map((o) => o.entry)\n          );\n\n          for (const { key, entry } of toAdd) {\n            if (!item[key as keyof Base]) (item as any)[key] = [];\n            const arr = item[key as keyof Base];\n            if (!Array.isArray(arr)) continue;\n\n            // Show added entry even if there is a search\n            this.filtered.push(entry);\n            entry.showChildsInEditor = true;\n            let cur = entry;\n            while (cur) {\n              cur.showInEditor = true;\n              cur = cur.parent;\n            }\n\n            // Add it to its parent\n            arr.push(entry);\n            onAddEntry(entry, catalogue, item, this.get_system(sysId));\n            addeds.push(entry);\n          }\n        }\n        return addeds[0];\n      };\n      const undo = () => {\n        for (const entry of addeds) {\n          popAtEntryPath(catalogue, getEntryPath(entry));\n          onRemoveEntry(entry);\n        }\n      };\n      const initial = await this.do_action(\"add\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n      return initial;\n    },\n    open_selected() {\n      for (const el of this.selections as any[]) {\n        el.obj.open();\n      }\n    },\n    /**\n     * Returns the default object when creating a given type\n     * @param key the key of the given type (eg: `selectionEntries`)\n     * @param parent (optional) the parent, used to modify the initial object conditionally\n     */\n    get_initial_object(key: string, parent?: EditorBase): any {\n      switch (key) {\n        case \"costTypes\":\n          return {\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            id: generateBattlescribeId(),\n            defaultCostLimit: -1,\n          };\n        case \"repeats\":\n          return {\n            value: 1,\n            repeats: 1,\n            field: \"selections\",\n            scope: \"parent\",\n            childId: \"any\",\n            shared: true,\n            roundUp: false,\n            id: generateBattlescribeId(),\n          };\n        case \"constraints\": {\n          const isAssociation = parent?.parentKey === \"associations\";\n          const result = {\n            type: \"min\",\n            value: 1,\n            field: parent?.isForce() ? \"forces\" : \"selections\",\n            scope: \"parent\",\n            shared: true,\n            id: generateBattlescribeId(),\n          } as BSIConstraint;\n          if (isAssociation) {\n            result.childId = \"any\";\n          }\n          return result;\n        }\n        case \"conditions\":\n          return {\n            type: \"atLeast\",\n            value: 1,\n            field: \"selections\",\n            scope: \"parent\",\n            childId: \"any\",\n            shared: true,\n          };\n        case \"modifiers\":\n          return {\n            type: \"set\",\n            value: true,\n            field: \"hidden\",\n          };\n        case \"modifierGroups\":\n        case \"conditionGroups\":\n          return { type: \"and\" };\n        case \"sharedSelectionEntries\":\n        case \"selectionEntries\":\n          return {\n            type: \"upgrade\",\n            import: true,\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n            id: generateBattlescribeId(),\n          };\n        case \"entryLinks\":\n          return {\n            import: true,\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n            id: generateBattlescribeId(),\n          };\n        case \"associations\":\n          return {\n            min: 1,\n            max: 1,\n            scope: \"parent\",\n            childId: \"any\",\n            ids: [],\n            name: \"New Association\",\n            id: generateBattlescribeId(),\n          };\n        case \"sharedProfiles\":\n        case \"profiles\":\n          const profileType = parent?.getCatalogue().iterateProfileTypes().next().value;\n          const name = !parent || parent?.isCatalogue() ? undefined : parent?.getName();\n          return {\n            name: name || \"New Profile\",\n            typeId: profileType?.id,\n            typeName: profileType?.name,\n            hidden: false,\n            id: generateBattlescribeId(),\n          } as BSIProfile;\n        case \"catalogueLinks\":\n          return {\n            type: \"catalogue\",\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            id: generateBattlescribeId(),\n          };\n\n        case \"categoryLinks\":\n          return {\n            type: \"category\",\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n            id: generateBattlescribeId(),\n          };\n\n        default:\n          return {\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n            id: generateBattlescribeId(),\n          };\n      }\n    },\n    /**\n     * Creates child entries in the current selection\n     * @param key the key of the child (eg: `selectionEntries`)\n     * @param data data to use when creating the child entry\n     */\n    async create(key: string & BaseChildsT, data?: any) {\n      const obj = {\n        ...this.get_initial_object(key),\n        select: true,\n        ...data,\n      };\n      const added = await this.add(obj, key);\n      this.open_selected();\n      return added;\n    },\n    /**\n     * Creates child entries in the provided parent after a user action\n     * Will select the added child if possible.\n     * Supports undo & redo\n     * @param key the key of the child (eg: `selectionEntries`)\n     * @param parent the parent to add the child in\n     * @param data data to use when creating the child entry\n     */\n    async create_child(key: string & BaseChildsT, parent: EditorBase, data?: any) {\n      const obj = {\n        ...this.get_initial_object(key, parent),\n        select: true,\n        ...data,\n      };\n      await this.add(obj, key, parent);\n      this.open_selected();\n    },\n    /**\n     * Synchronous version of create_child for use by scripts\n     * Adds a child (specified by `_key` to a specified parent)\n     * Will not select the added child\n     * Does not Support undo & redo\n     *\n     * @param key The parent's key to add the child in, will affect the fields generated by default.\n     * @param parent The entry to add the child in\n     * @param data The fields to add on to the generated object, overwrites default fields\n     * @returns The added object\n     */\n    add_child(_key: string & keyof Base, parent: EditorBase, data?: Object) {\n      const key = fixKey(parent, _key);\n      if (!key) {\n        throw new Error(`Invalid key: ${_key} in ${parent.editorTypeName}`);\n      }\n      const catalogue = parent.getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      const obj = {\n        ...this.get_initial_object(key as string, parent),\n        id: generateBattlescribeId(),\n        ...data,\n      };\n\n      // Ensure there is array to put the childs in\n      if (!parent[key as keyof Base]) (parent as any)[key] = [];\n      const arr = parent[key as keyof Base];\n      if (!Array.isArray(arr)) return;\n      if (!allowed_children(parent, parent.parentKey)?.has(key as string)) {\n        console.warn(\"Couldn't add\", key, \"to a\", parent.parentKey, \"because it is not allowed\");\n        return;\n      }\n\n      clean(obj, key as string);\n      delete obj.parentKey;\n\n      // Initialize classes from the json\n      setPrototypeRecursive({ [key]: obj });\n\n      // Add it to its parent\n      arr.push(obj);\n      onAddEntry(obj, catalogue, parent, this.get_system(sysId));\n      this.set_catalogue_changed(catalogue);\n      return obj;\n    },\n    del_child(entry: Base) {\n      try {\n        const catalogue = entry.catalogue;\n        const manager = catalogue.manager;\n        const path = getEntryPath(entry as EditorBase);\n        const removed = popAtEntryPath(catalogue, path);\n        onRemoveEntry(removed, manager);\n      } catch (e) {\n        console.error(\"Failed to delete\", entry);\n      }\n      if (entry.catalogue) {\n        this.set_catalogue_changed(entry.catalogue);\n      }\n    },\n    can_move(obj: EditorBase) {\n      if (obj.isLink()) return false;\n      return true;\n    },\n    edit_child(entry: EditorBase, data?: Object) {\n      const obj = JSON.parse(entry.toJson())\n      Object.assign(obj, data);\n      setPrototypeRecursive({ [entry.parentKey]: obj })\n      Object.assign(entry, obj);\n      this.set_catalogue_changed(entry.catalogue);\n    },\n    get_move_targets(obj: EditorBase): Array<{ target: Catalogue; type: \"root\" | \"shared\" }> | undefined {\n      const catalogue = obj.catalogue;\n      if (!catalogue) return;\n      if (obj.isLink()) return;\n      const result = [] as Array<{ target: Catalogue; type: \"root\" | \"shared\" }>;\n      if (!obj.parentKey.startsWith(\"shared\") && this.move_to_key(obj, \"shared\")) {\n        result.push({ target: catalogue, type: \"shared\" });\n      } else if (obj.parentKey.startsWith(\"shared\") && this.move_to_key(obj, \"root\")) {\n        result.push({ target: catalogue, type: \"root\" });\n      }\n      if (this.move_to_key(obj, \"shared\")) {\n        for (const imported of catalogue.imports) {\n          result.push({ target: imported, type: \"shared\" });\n        }\n      }\n      if (this.move_to_key(obj, \"root\")) {\n        for (const imported of catalogue.imports) {\n          result.push({ target: imported, type: \"root\" });\n        }\n      }\n      return result;\n    },\n    move_to_key(obj: EditorBase, type: string) {\n      if (type === \"shared\") {\n        switch (obj.editorTypeName) {\n          case \"infoGroup\":\n            return \"sharedInfoGroups\";\n          case \"rule\":\n            return \"sharedRules\";\n          case \"profile\":\n            return \"sharedProfiles\";\n          case \"selectionEntry\":\n            return \"sharedSelectionEntries\";\n          case \"selectionEntryGroup\":\n            return \"sharedSelectionEntryGroups\";\n          default:\n            return \"\";\n        }\n      }\n      switch (obj.editorTypeName) {\n        case \"infoGroup\":\n          return \"infoGroups\";\n        case \"rule\":\n          return \"rules\";\n        case \"profile\":\n          return \"profiles\";\n        case \"selectionEntry\":\n          return \"selectionEntries\";\n        case \"selectionEntryGroup\":\n          return \"\";\n        default:\n          return obj.parentKey;\n      }\n    },\n    move(obj: EditorBase, from: Catalogue, to: Catalogue, type: \"root\" | \"shared\") {\n      const redo = () => {\n        // Get key the object will end up in\n        const catalogueKey = this.move_to_key(obj, type) as ItemKeys;\n        if (!catalogueKey) {\n          console.error(\"Could not find key for move\", obj.editorTypeName, type);\n          return;\n        }\n\n        // move obj to target\n        const parent = obj.parent!;\n        const path = getEntryPath(obj);\n\n        removeEntry(obj);\n        onRemoveEntry(obj);\n        const copy = JSON.parse(entryToJson(obj, editorFields));\n\n        setPrototypeRecursive({ [catalogueKey]: copy });\n        if (!to[catalogueKey]) to[catalogueKey] = [];\n\n        to[catalogueKey]!.push(copy);\n        onAddEntry(copy, to, to, this.get_system(to.getSystemId()));\n\n        const linkableTypes = [\"rule\", \"infoGroup\", \"profile\", \"selectionEntry\", \"selectionEntryGroup\"];\n        const canBeLinked = linkableTypes.includes(obj.editorTypeName);\n        const shouldMakeLink = !obj.parentKey.startsWith(\"shared\");\n\n        // replace previous obj with link to moved obj\n        if (canBeLinked && shouldMakeLink) {\n          const link = {\n            targetId: copy.id,\n            id: from.generateNonConflictingId(),\n            type: obj.editorTypeName,\n            name: obj.getName(),\n            hidden: obj.hidden,\n            select: true,\n          } as any;\n          if (obj.isEntry()) {\n            link.collective = obj.collective;\n          }\n          const linkKey = obj.isGroup() || obj.isEntry() ? \"entryLinks\" : \"infoLinks\";\n          setPrototypeRecursive({ [linkKey]: link });\n          path[path.length - 1].key = linkKey;\n          addAtEntryPath(from, path, link);\n          onAddEntry(link, from, parent, this.get_system(from.getSystemId()));\n        }\n      };\n      function undo() {\n        // undo\n        // replace obj path with obj\n        // delete obj from target\n        // update obj\n      }\n\n      // Undo is not done at this feature stills needs some iteration\n      // await this.do_action(\"move\", undo, redo);\n      redo();\n\n      this.set_catalogue_changed(from, true);\n      this.set_catalogue_changed(to, true);\n    },\n    async open(obj: EditorBase, last?: boolean, noLog?: boolean) {\n      let current = document.getElementById(\"editor-entries\") as Element;\n      if (!current) {\n        return;\n      }\n\n      async function open_el(el: any) {\n        const context = get_ctx(el);\n        context.open();\n        await context.$nextTick();\n      }\n      async function close_el(el: any) {\n        const context = get_ctx(el);\n        context.close();\n        await context.$nextTick();\n      }\n\n      const path = getEntryPath(obj);\n      if (!path?.length) {\n        return;\n      }\n      current = current.getElementsByClassName(`depth-0 ${path[0].key}`)[0];\n      if (!current) {\n        if (noLog !== true) {\n          console.error(\"Couldn't find root element for\", path[0].key, \"in\", obj.catalogue.getName());\n        }\n        return;\n      }\n      await open_el(current);\n      const nodes = [] as EditorBase[];\n      forEachParent(obj, (parent) => {\n        nodes.push(parent);\n      });\n      nodes.pop(); // pop catalogue\n      nodes.reverse();\n      nodes.push(obj);\n\n      // hack so that the correct label for sharedProfiles is opened\n      if (nodes[0].parentKey === \"sharedProfiles\") {\n        nodes.unshift({\n          parentKey: `label-${nodes[0].typeName ?? \"Untyped\"}`,\n        } as any);\n      }\n      const lastNode = nodes[nodes.length - 1];\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        const childs = current.getElementsByClassName(`depth-${i + 1} ${node.parentKey}`);\n\n        const child = node.parentKey.startsWith(\"label-\")\n          ? childs[0]\n          : [...childs].find((o) => get_base_from_vue_el(get_ctx(o)) === node);\n        if (!child) {\n          if (noLog !== true) {\n            console.error(\"Couldn't find path to\", obj.getName(), obj, \"parent:\", obj.parent?.getName());\n          }\n          // throw new Error(\"Invalid path\");\n        }\n        if (child) {\n          current = child;\n        }\n\n        if (node !== lastNode) {\n          await open_el(current);\n        }\n        if (node === lastNode) {\n          if (last === false) {\n            await close_el(current);\n          } else if (last === true) {\n            await open_el(current);\n          }\n        }\n      }\n\n      return current;\n    },\n    /**\n     *  Changes the current route to be the catalogue provided\n     *  Returns true if the route changed\n     */\n    async goto_catalogue(id: string, systemId?: string) {\n      const $router = (this as any as { $router: Router }).$router;\n      if (!$router) {\n        throw new Error(\"Cannot follow link to another catalogue without $router set\");\n      }\n      const rawQuery = ($router.currentRoute as any as RouteLocationNormalizedLoaded)?.query;\n      const query = rawQuery ?? $router.currentRoute?.value?.query;\n      const curId = query?.id || query?.systemId;\n      if (id !== curId) {\n        $router.push({\n          name: \"catalogue\",\n          query: { systemId: systemId || id, id: id },\n        });\n\n        this.$nextTick = new Promise((resolve, reject) => {\n          this.$nextTickResolve = resolve;\n        });\n        await this.$nextTick;\n        return true;\n      }\n      return false;\n    },\n\n    async show(obj: EditorBase, highlight = true) {\n      if (!this.filtered.includes(obj)) {\n        this.filtered.push(obj);\n      }\n      obj.showInEditor = true;\n      obj.showChildsInEditor = true;\n      if (highlight) {\n        obj.highlight = true;\n      }\n      forEachParent(obj as EditorBase, (parent) => {\n        parent.showInEditor = true;\n      });\n    },\n    async goto(obj: EditorBase) {\n      const targetCatalogue = obj.getCatalogue();\n      this.put_current_state_in_history();\n      const uistate = useEditorUIState();\n      uistate.get_data(targetCatalogue.id).selection = getEntryPath(obj);\n\n      await this.goto_catalogue(targetCatalogue.id, targetCatalogue.gameSystemId);\n      this.show(obj, false);\n      await this.scrollto(obj);\n    },\n    async scrollto(obj: EditorBase) {\n      const el = await this.open(obj as EditorBase);\n      if (el) {\n        const context = get_ctx(el);\n        this.do_select(null, context, context);\n        el.scrollIntoView({\n          behavior: \"instant\",\n          block: \"center\",\n          inline: \"center\",\n        });\n      } else {\n        setTimeout(async () => {\n          const el = await this.open(obj as EditorBase);\n          if (el) {\n            const context = get_ctx(el);\n            this.do_select(null, context, context);\n            el.scrollIntoView({\n              behavior: \"instant\",\n              block: \"center\",\n              inline: \"center\",\n            });\n          }\n        }, 50);\n      }\n    },\n    can_goto(obj?: EditorBase | string): boolean {\n      if (!obj) return false;\n      return typeof obj === \"object\" && obj instanceof Base;\n    },\n    can_follow(obj?: EditorBase): boolean {\n      return Boolean(obj?.target);\n    },\n    async follow(obj?: EditorBase & Link) {\n      if (obj?.target) {\n        await this.goto(obj.target as EditorBase);\n      }\n    },\n    async move_up(obj: EditorBase) {\n      if (obj.parent) {\n        const arr = obj.parent[obj.parentKey] as EditorBase[];\n        const index = arr.indexOf(obj);\n        if (index > 0) {\n          const temp = arr.splice(index, 1)[0];\n          arr.splice(index - 1, 0, temp);\n        }\n      }\n    },\n    async move_down(obj: EditorBase) {\n      if (obj.parent) {\n        const arr = obj.parent[obj.parentKey] as EditorBase[];\n        const index = arr.indexOf(obj);\n        if (index >= 0 && index < arr.length - 1) {\n          const temp = arr.splice(index, 1)[0];\n          arr.splice(index + 1, 0, temp);\n        }\n      }\n    },\n    get_leftpanel_open_collapsible_boxes() {\n      function find_open_recursive(elt: Element, obj: Record<string, any>, depth = 0) {\n        const cls = `depth-${depth} collapsible-box opened`;\n        const results = elt.getElementsByClassName(cls);\n        if (!results?.length) return;\n        for (const cur of results) {\n          const item = get_base_from_vue_el(get_ctx(cur));\n          const key = item.parentKey;\n          const parent = item.parent;\n\n          if (parent) {\n            const val = parent[key];\n            if (!val || !Array.isArray(val)) continue;\n            const index = val.indexOf(item as any);\n            if (!(key in obj)) obj[key] = {};\n            if (!(index in obj[key])) obj[key][index] = {};\n            find_open_recursive(cur, obj[key][index], depth + 1);\n          } else {\n            const keys = [...cur.classList].filter((o) => goodJsonKeys.has(o) || o.startsWith(\"label-\"));\n            for (const key of keys) {\n              obj[key] = {};\n              obj[key][0] = {};\n            }\n            find_open_recursive(cur, obj[keys[0]][0], depth + 1);\n          }\n        }\n      }\n      const result = {};\n      find_open_recursive(document.documentElement, result);\n      return result;\n    },\n    get_leftpanel_state() {\n      if (!this.catalogueComponent) return {};\n      const leftpanelstate = {} as Record<string, any>;\n      const leftpanel = this.catalogueComponent.$refs.leftpanel as typeof LeftPanelDefaults;\n      for (const key of Object.keys(LeftPanelDefaults) as (keyof typeof LeftPanelDefaults)[]) {\n        leftpanelstate[key] = leftpanel[key];\n      }\n      return leftpanelstate as typeof LeftPanelDefaults;\n    },\n    get_current_state(): EditorUIState {\n      const selected = this.get_selected();\n      const catalogue = this.catalogueComponent?.cat;\n      return {\n        ...this.get_leftpanel_state(),\n        mode: this.mode,\n        open: this.get_leftpanel_open_collapsible_boxes(),\n        selection: selected ? getEntryPath(selected) : undefined,\n        catalogueId: catalogue?.id,\n        systemId: catalogue?.gameSystemId,\n      };\n    },\n    save_state() {\n      if (this.catalogueComponent && this.catalogueComponent.cat) {\n        const id = this.catalogueComponent.cat.id;\n        const uistate = useEditorUIState();\n        const state = this.get_current_state();\n        uistate.set_state(id, state);\n      }\n    },\n    async load_state(state: EditorUIState) {\n      if (this.catalogueComponent) {\n        useEditorUIState().set_state(state.catalogueId!, state);\n        this.mode = state.mode || \"edit\";\n        const changedCatalogue = await this.goto_catalogue(state.catalogueId!, state.systemId);\n        if (!changedCatalogue) {\n          this.catalogueComponent.load_state(state);\n          this.rerender_catalogue();\n        }\n      }\n    },\n    put_state_in_history(state: EditorUIState) {\n      if (this.historyStackPos < this.historyStack.length) {\n        const n_to_remove = this.historyStack.length - this.historyStackPos;\n        this.historyStack.splice(this.historyStackPos, n_to_remove, state);\n      } else {\n        this.historyStack.push(state);\n      }\n      this.historyStackPos = this.historyStack.length;\n    },\n    put_current_state_in_history() {\n      if (this.catalogueComponent && this.catalogueComponent.cat) {\n        this.put_state_in_history(this.get_current_state());\n      }\n    },\n    can_back() {\n      return this.historyStackPos > 0;\n    },\n    async back() {\n      if (this.can_back()) {\n        this.historyStack[this.historyStackPos] = this.get_current_state();\n        this.historyStackPos -= 1;\n        this.load_state(this.historyStack[this.historyStackPos]!);\n      }\n    },\n    can_forward() {\n      if (this.historyStack[this.historyStack.length - 1]) {\n        return this.historyStackPos < this.historyStack.length - 1;\n      }\n    },\n    async forward() {\n      if (this.can_forward()) {\n        this.historyStackPos += 1;\n        this.load_state(this.historyStack[this.historyStackPos]!);\n      }\n    },\n    async update_catalogue_search(catalogue: Catalogue, data: { filter: string; ignoreProfilesRules: boolean }) {\n      const { filter, ignoreProfilesRules } = data;\n      const prev = this.filtered as EditorBase[];\n      for (const p of prev) {\n        delete p.showInEditor;\n        delete p.showChildsInEditor;\n        delete p.highlight;\n        forEachParent(p as EditorBase, (parent) => {\n          delete parent.showInEditor;\n          delete p.showChildsInEditor;\n        });\n      }\n      if (this.filter.length <= 1) {\n        this.set_filter(\"\");\n        this.filtered = [];\n        return;\n      }\n\n      this.set_filter(filter);\n      this.filtered = catalogue.findOptionsByText(filter) as EditorBase[];\n      if (ignoreProfilesRules) {\n        this.filtered = this.filtered.filter((o) => !o.isProfile() && !o.isRule() && !o.isInfoGroup());\n      }\n      for (const p of this.filtered) {\n        this.show(p);\n      }\n      await nextTick();\n\n      if (this.filtered.length < 300) {\n        for (const p of this.filtered) {\n          if (!p.parent) continue;\n          try {\n            await this.open(p as EditorBase, false, true);\n          } catch (e) {\n            continue;\n          }\n        }\n      }\n    },\n    async system_search(system: GameSystemFiles, query: { filter: string }, max = 1000) {\n      const result = [] as Base[];\n\n      const { filter } = query;\n      if (!filter) return null;\n      const regx = textSearchRegex(filter);\n      let more = false;\n\n      await system.loadAll();\n      for (const file of system.getAllLoadedCatalogues()) {\n        file.forEachObjectWhitelist((val: Base, parent) => {\n          try {\n            if (result.length >= max) return;\n            if ((val as Link).targetId) {\n              if (val.target && val.target.isCategory() && !parent?.isForce()) {\n                return;\n              }\n            }\n\n            const name = val.getName?.call(val);\n            const text = (val as any as Characteristic).$text;\n            const desc = (val as any as Rule).description;\n            const id = val.id;\n            if (id === filter) {\n              result.push(val);\n            } else if ((name && String(name).match(regx)) || id === filter) {\n              result.push(val);\n            } else if (text && String(text).match(regx)) {\n              result.push(val);\n            } else if (desc && String(desc).match(regx)) {\n              result.push(val);\n            }\n          } catch (e) {\n            console.error(\"Error while searching:\", e);\n          }\n        });\n        if (result.length >= max) {\n          more = true;\n          break;\n        }\n      }\n      console.log(\"Search for\", `\"${filter}\"`, \"found\", result.length, \"results\");\n      const grouped = {} as Record<string, Base[]>;\n      for (const found of result) {\n        addObj(grouped, found.catalogue.name, found);\n      }\n      return { grouped, all: result, more };\n    },\n  },\n});\n"],"names":["splitExactlyConstraints","obj","constraints","constraint","min","max","result","copy","splitExactlyConstraintsModifiers","splitModifiers","modifiers","out_modifiers","modifier","splitModifierGroups","modifierGroups","out_group","group","split","isNonEmptyIfHasOneOf","arrayKeys","arrayKeysWithoutId","goodKeys","goodKeysWiki","getDataObject","data","getDataDbId","Base","json","__publicField","entryToJson","categoryLink","stack","current","key","getAllInfoGroups","_a","o","iterateModifierGroupsRecursive","gst","cat","callbackfn","_depth","instance","blacklist","cur","target","whiteList","value","isObject","i","badKeys","cb","s","UNCATEGORIZED_ID","useTarget","CategoryLink","sub_grp","skipGroup","child","maxes","getTheoreticalMaxes","name","found","Entry","Group","Link","d","cost","InfoLink","ILLEGAL_ID","Category","Force","categories","force","copied","clone","forceCategories","link","category","maxValue","maxConstraints","push","n","beginLength","constraintValue","modifier_group","_b","_c","_d","ProfileType","Profile","Characteristic","InfoGroup","basicQueryFields","Condition","Constraint","Modifier","ModifierGroup","Rule","grp","groups","BaseChilds","goodJsonArrayKeys","goodJsonKeys","rootToJson","fixRoot","root","k","v","extraFields","entriesToJson","options","takeOutOfArray","forEachObjectWhitelist2","validScopes","validChildIds","isScopeValid","parent","scope","getModifierOrConditionParent","findSelfOrParentWhere","getModifiedField","base","field","catalogue","fieldToText","removePrefix","type","constraintToText","manager","conditionToString","condition","includeId","fieldToString","rawField","what","of","rawScope","recursive","inScope","has","ofWhat","modifierToString","CatalogueLink","Publication","Catalogue","imported","deleteBadLinks","units","system","rulesObj","addObjUnique","proc","newError","error","recurse","idx","other","id","event","costType","publication","entry","shared","e","found_import","globalOption","val","text","regx","textSearchRegex","preferredId","generateBattlescribeId","importsWithEntries","imports","copiedForce","hasUnits","categoryEntry","missingUnits","illegal_clone","set","foundUnits","uncategorizedUnits","uncategorized","illegal","unit","sortedUnits","sortBy","groupBy","roster_constraints","force_constraints","by_id_constraints","force_or_category_ids","by_category_force_constraints","localAddBoundCategoryConstraints","hash","addObj","fromIndex","from_id_extra_constraints","force_extra_constraints","node","category_extra_constraints","loaded","deleted","popObj","index","existing","existingCatalogue","isCatalogueDifferent","lnk","_e","_f","ref","indexes","importedCatalogue","unresolvedLinks","unresolvedPublications","parents","noObserve","hasSharedChildId","unresolved","resolveLinks","resolvePublications","from","to","resolveLink","targetType","ids","duplicate","previousField","isInstanceOf","addObjIfMissing","previousLength","currentUnresolved","currentParents","currentParent","NoObserve$1","NoObserve","readBlobAsArrayBuffer","blob","resolve","reject","reader","readBlobAsUint8Array","arrayBuffer","isBlob","isSharedArrayBuffer","b","isNode","isTypedArraySameAsArrayBuffer","typedArray","ArrayBufferReader","arrayBufferOrView","offset","length","BlobReader","inflate","buf","u8","bitsF","_bitsF","bitsE","_bitsE","decodeTiny","_decodeTiny","get17","_get17","noBuf","BFINAL","BTYPE","HLIT","HDIST","HCLEN","ML","MD","off","pos","lmap","dmap","p8","len","_check","U","tl","l","makeCodes","codes2map","mx0","_copyOut","mx1","code","lit","end","ebs","dcode","dlit","dbs","dst","bl","nbuf","LL","tree","ll","ni","src","mx","MAX_BITS","max_code","bits","bl_count","next_code","map","r15","cl","rest","i0","i1","p0","revCodes","imb","dt","u16","u32","x","pushV","tgt","sv","crc","tab","c","inflateRaw","file","config","nextId","waitingForWorkerQueue","startWorker","url","worker","dynamicRequire","mod","request","Worker","fn","req","inflateRawLocal","uncompressedSize","processWaitingForWorkerQueue","inflateRawAsync","dosDateTimeToDate","date","time","day","month","year","millisecond","second","minute","hour","ZipEntry","rawEntry","readEntryDataAsBlob","readEntryDataAsArrayBuffer","buffer","decodeBuffer","EOCDR_WITHOUT_COMMENT_SIZE","MAX_COMMENT_SIZE","EOCDR_SIGNATURE","ZIP64_EOCDR_SIGNATURE","readAs","readAsBlobOrTypedArray","crc$1","getUint16LE","uint8View","getUint32LE","getUint64LE","utf8Decoder","isUTF8","findEndOfCentralDirector","totalLength","size","readStart","eocdr","diskNumber","entryCount","centralDirectorySize","centralDirectoryOffset","commentLength","expectedCommentLength","commentBytes","comment","readZip64CentralDirectory","readEntries","END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE","zip64EocdlOffset","eocdl","zip64EocdrOffset","zip64Eocdr","CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE","rawEntryCount","readEntryCursor","allEntriesBuffer","rawEntries","signature","fileCommentStart","extraFieldBuffer","headerId","dataSize","dataStart","dataEnd","zip64ExtraField","zip64EiefBuffer","nameField","expectedCompressedSize","readEntryDataHeader","fileNameLength","extraFieldLength","localFileHeaderEnd","decompress","fileDataStart","fileDataEnd","dataView","typedArrayOrBlob","unzipRaw","source","unzip","zip","entries","nameStartChar","nameChar","nameRegexp","regexName","getAllMatches","string","regex","matches","match","allmatches","isName","exports","arrayMode","keys","util","require$$0","defaultOptions","validator","xmlData","tags","tagFound","reachedRoot","readPI","tagStartPos","readCommentAndCDATA","closingTag","tagName","validateTagName","msg","getErrorObject","getLineNumberForPosition","readAttributeStr","attrStr","attrStrStart","isValid","validateAttributeString","otg","openPos","afterAmp","validateAmpersand","isWhiteSpace","t","char","start","tagname","angleBracketsCount","doubleQuote","singleQuote","startChar","tagClosed","validAttrStrRegxp","attrNames","getPositionFromMatch","attrName","validateAttrName","validateNumberAmpersand","re","count","message","lineNumber","lines","jPath","attrs","buildOptions","OptionsBuilder","XmlNode","xmlNode","readDocType","entities","hasBody","exp","isEntity","readEntityExp","isElement","isAttlist","isNotation","isComment","entityName","DocTypeReader","hexRegex","numRegex","consider","toNumber","str","trimmedStr","sign","leadingZeros","numTrimmedByZeros","trimZeros","eNotation","num","numStr","strnum","require$$1","require$$2","require$$3","OrderedObjParser$1","addExternalEntities","parseXml","parseTextData","resolveNameSpace","buildAttributesMap","isItStopNode","replaceEntitiesValue","readStopNodeData","saveTextToParentTag","addChild","externalEntities","entKeys","ent","dontTrim","hasAttributes","isLeafNode","escapeEntities","newval","parseValue","prefix","attrsRegx","oldVal","aName","newVal","attrCollection","xmlObj","currentNode","textData","closeIndex","findClosingIndex","colonIndex","lastTagName","propIndex","tagData","readTagExp","childNode","endIndex","tagExp","attrExpPresent","lastTag","tagContent","entity","stopNodes","currentTagName","allNodesExp","stopNodePath","stopNodeExp","tagExpWithClosingIndex","closingChar","attrBoundary","ch","errMsg","closingIndex","removeNSPrefix","separatorIndex","startIndex","openTagCount","shouldParse","OrderedObjParser_1","OrderedObjParser","prettify","compress","arr","compressedObj","tagObj","property","propName","newJpath","isLeaf","isLeafTag","assignAttributes","attrMap","jpath","atrrName","textNodeName","propCount","node2json","XMLParser$1","validationOption","orderedObjParser","orderedResult","XMLParser_1","XMLParser","EOL","toXml","jArray","indentation","arrToStr","xmlStr","isPreviousElementTag","newJPath","tagText","isStopNode","attStr","attr_to_str","tempInd","piTextNodeName","newIdentation","tagStart","tagValue","attr","attrVal","textValue","orderedJs2Xml","buildFromOrderedJs","a","Builder","isAttribute","processTextOrObjNode","indentate","jObj","level","arrLen","listTagVal","j","item","Ks","L","object","tagEndExp","piClosingChar","closeTag","json2xml","XMLBuilder","fxp","containerTags","textNodeTags","escapedHtml","htmlUnescapes","unescape","containers","allowed","xmlToJson","unzipFolder","path","unzipped","isZipExtension","unzipFile","enc","zipExtensions","allowedExtensions","removeExtension","extension_or_file","getExtension","extension","isAllowedExtension","fileExtension","oldBuggedTypes","normalize","normal","old","clean","lookedUp","allowedChilds","empty","allowed_children","new_key","toPlural","BSXmlToJson","hashFnv32a","content","to_snake_case","convertToJson","toSingle","skipKeys","renestChilds","putAttributesIn$","first","forEachValueRecursive","convertToXml","systemCategories","catalogueCategories","getTypeLabel","getTypeName","getNameExtra","_refs","_type","pieces","refcount","getName","repeat","forEachEntryRecursive","callback","removeEntry","onRemoveEntry","removed","childId","onAddEntry","reload","_parent","getEntryPath","getEntryPathInfo","addAtEntryPath","lastNode","getAtEntryPath","popAtEntryPath","scrambleIds","entry_or_entries","scrambled","parentNode","currentId","newId","fixKey","catalogueKey","keyInfoCache","getKeyInfoClass","cache","parentKey","_key","setKeyInfo","protoMap","getPrototypeFromKey","setPrototype","newProto","setPrototypeRecursive","isDefaultObject","useCataloguesStore","defineStore","bool","gstId","dependencies","previousDependencies","dependency","dependents","state","dirname","filename","getFolderFiles","folderPath","getFolderFolders","fileObjects","filePath","fileObject","writeFile","dirPath","deleteFile","readFile","showOpenDialog","showMessageBox","closeWindow","getPath","createFolder","initialized","watchers","watchFile","_","_path","_stats","unwatchFile","getFolderRemote","LeftPanelDefaults","useEditorUIState","depth","deepestCls","results","get_ctx","cls","maxDepth","find_open_recursive","elt","get_base_from_vue_el","next","obj_arr","open","current_node","r","u","h","f","p","y","m","g","w","E","P","K","O","S","A","C","D","I","B","T","R","F","M","N","q","$","V","W","Y","z","G","H","Q","X","J","Z","ee","te","ne","se","ie","oe","ae","ue","le","ce","he","de","fe","pe","ye","me","ve","qe","ge","Oe","be","we","xe","ke","Ee","Pe","ct","Ke","Se","Ae","Ce","Be","Ie","je","Qe","et","Re","De","ut","Ne","$e","Te","Ue","Le","Fe","Me","Ve","We","st","it","tt","Je","Ye","ze","Ge","He","Xe","lt","Ze","ht","nt","rt","at","ft","pt","yt","mt","vt","gt","bt","_t","wt","xt","kt","Pt","Kt","Ot","St","At","Ct","jt","Dt","It","Bt","Tt","Rt","Ft","Mt","Nt","qt","Yt","$t","Wt","Ut","Lt","Vt","zt","Gt","Ht","Qt","Xt","Jt","Zt","en","tn","nn","rn","sn","on","an","un","ln","cn","hn","yn","mn","dn","pn","vn","gn","$n","bn","_n","wn","xn","kn","En","Pn","Kn","On","Sn","An","Cn","jn","Dn","In","Bn","Mn","Tn","Rn","Fn","Nn","qn","Un","Ln","Vn","Wn","Yn","zn","Gn","Hn","MySubClassedDexie","Dexie","db","normalizeGithubRepoUrl","input","githubUrlRegex","protocol","user","repo","parseGitHubUrl","githubUrl","repoOwner","repoName","getFileContentFromRepo","urlParts","owner","response","getFileContentFromRepoWithFallback","fallBackPath","getNextRevision","github","fileName","fallBack","removeSuffix","resultRevision","getBookDate","booksDate","loadData","isSystem","isCatalogue","asCatalogue","alreadyLoadedGameSystem","loadedGameSystem","promises","alreadyLoadedCatalogue","promise","loadedCatalogue","BSCatalogueManager","catalogueLink","dateIndex","forceLoad","GameSystemFiles","progress_cb","catalogueId","errorPart","enableGithubIntegrationWithGitFolder","el","vue_el","p1","p2","markSaving","markChangedOnDisk","unmarkChangedOnDisk","editorFields","useEditorStore","files","folder","stringed","xml","shouldZip","nameInZip","zipCompress","progress","result_system_ids","result_files","systems","systemId","systemFiles","markRaw","dbsystem","dbcatalogues","shallowReactive","keepState","cataloguesStore","publications","remote","useSettingsStore","changedState","incrementRevision","revision","settings","sys","failed","incremented","increment","filter","component","$node","next_selected","next_unselected","selection","toRaw","unselected","onunselected","payload","last","last_element","low","high","undo","redo","n_to_remove","shallowCopies","action","actual","selections","sysId","addeds","selected","paths","removeds","temp","enumerate_zip","childKey","parentsWithPayload","selectedCatalogueKey","toAdd","initial","isAssociation","profileType","added","canBeLinked","shouldMakeLink","linkKey","noLog","open_el","context","close_el","nodes","forEachParent","childs","$router","query","curId","highlight","targetCatalogue","uistate","leftpanelstate","leftpanel","ignoreProfilesRules","prev","nextTick","more","desc","grouped"],"mappings":"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Y2M,EACd,ECVO,MAAM7N,GAAU,CACrB,eAAgB,CACd,iBAAkB,CAAC,CACrB,EACA,aAAc,CACZ,iBAAkB,CAAC,CACrB,EACA,UAAW,CACT,iBAAkB,CAAC,CACrB,EACA,aAAc,CACZ,iBAAkB,CAAC,qBAAqB,CAC1C,EACA,gBAAiB,CACf,iBAAkB,CAAC,WAAY,QAAS,aAAc,YAAa,cAAe,YAAa,gBAAgB,CACjH,EACA,cAAe,CACb,iBAAkB,CAAC,WAAY,QAAS,aAAc,YAAa,cAAe,YAAa,gBAAgB,CACjH,EACA,aAAc,CACZ,iBAAkB,CAChB,eACA,gBACA,WACA,QACA,aACA,YACA,cACA,YACA,iBACA,OACF,CACF,EACA,WAAY,CACV,iBAAkB,MACpB,EACA,qBAAsB,CACpB,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,2BAA4B,CAC1B,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,iBAAkB,CAChB,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,eACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,uBAAwB,CACtB,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,eACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,aAAc,CACZ,iBAAkB,CAAC,CACrB,EACA,YAAa,CACX,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,KAAM,CACJ,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,MAAO,CACL,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,QAAS,CACP,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,SAAU,CACR,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,eAAgB,CACd,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,UAAW,CACT,iBAAkB,CAAC,WAAY,QAAS,aAAc,Y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","x_google_ignoreList":[5,6,7,8,9,10,11,12,13,14,15,16,17,26]}