var gi=Object.defineProperty;var mi=(Jn,Xn,Qn)=>Xn in Jn?gi(Jn,Xn,{enumerable:!0,configurable:!0,writable:!0,value:Qn}):Jn[Xn]=Qn;var Sr=(Jn,Xn,Qn)=>(mi(Jn,typeof Xn!="symbol"?Xn+"":Xn,Qn),Qn);function makeMap(Jn,Xn){const Qn=Object.create(null),Zn=Jn.split(",");for(let er=0;er<Zn.length;er++)Qn[Zn[er]]=!0;return Xn?er=>!!Qn[er.toLowerCase()]:er=>!!Qn[er]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=Jn=>onRE.test(Jn),isModelListener=Jn=>Jn.startsWith("onUpdate:"),extend=Object.assign,remove$1=(Jn,Xn)=>{const Qn=Jn.indexOf(Xn);Qn>-1&&Jn.splice(Qn,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Jn,Xn)=>hasOwnProperty$1.call(Jn,Xn),isArray$1=Array.isArray,isMap=Jn=>toTypeString(Jn)==="[object Map]",isSet=Jn=>toTypeString(Jn)==="[object Set]",isDate$1=Jn=>toTypeString(Jn)==="[object Date]",isRegExp=Jn=>toTypeString(Jn)==="[object RegExp]",isFunction=Jn=>typeof Jn=="function",isString=Jn=>typeof Jn=="string",isSymbol=Jn=>typeof Jn=="symbol",isObject$3=Jn=>Jn!==null&&typeof Jn=="object",isPromise=Jn=>isObject$3(Jn)&&isFunction(Jn.then)&&isFunction(Jn.catch),objectToString=Object.prototype.toString,toTypeString=Jn=>objectToString.call(Jn),toRawType=Jn=>toTypeString(Jn).slice(8,-1),isPlainObject$1=Jn=>toTypeString(Jn)==="[object Object]",isIntegerKey=Jn=>isString(Jn)&&Jn!=="NaN"&&Jn[0]!=="-"&&""+parseInt(Jn,10)===Jn,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=Jn=>{const Xn=Object.create(null);return Qn=>Xn[Qn]||(Xn[Qn]=Jn(Qn))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Jn=>Jn.replace(camelizeRE,(Xn,Qn)=>Qn?Qn.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Jn=>Jn.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(Jn=>Jn.charAt(0).toUpperCase()+Jn.slice(1)),toHandlerKey=cacheStringFunction(Jn=>Jn?`on${capitalize$1(Jn)}`:""),hasChanged=(Jn,Xn)=>!Object.is(Jn,Xn),invokeArrayFns=(Jn,Xn)=>{for(let Qn=0;Qn<Jn.length;Qn++)Jn[Qn](Xn)},def=(Jn,Xn,Qn)=>{Object.defineProperty(Jn,Xn,{configurable:!0,enumerable:!1,value:Qn})},looseToNumber=Jn=>{const Xn=parseFloat(Jn);return isNaN(Xn)?Jn:Xn},toNumber$2=Jn=>{const Xn=isString(Jn)?Number(Jn):NaN;return isNaN(Xn)?Jn:Xn};let _globalThis$2;const getGlobalThis=()=>_globalThis$2||(_globalThis$2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(Jn){if(isArray$1(Jn)){const Xn={};for(let Qn=0;Qn<Jn.length;Qn++){const Zn=Jn[Qn],er=isString(Zn)?parseStringStyle(Zn):normalizeStyle(Zn);if(er)for(const tr in er)Xn[tr]=er[tr]}return Xn}else{if(isString(Jn))return Jn;if(isObject$3(Jn))return Jn}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Jn){const Xn={};return Jn.replace(styleCommentRE,"").split(listDelimiterRE).forEach(Qn=>{if(Qn){const Zn=Qn.split(propertyDelimiterRE);Zn.length>1&&(Xn[Zn[0].trim()]=Zn[1].trim())}}),Xn}function normalizeClass(Jn){let Xn="";if(isString(Jn))Xn=Jn;else if(isArray$1(Jn))for(let Qn=0;Qn<Jn.length;Qn++){const Zn=normalizeClass(Jn[Qn]);Zn&&(Xn+=Zn+" ")}else if(isObject$3(Jn))for(const Qn in Jn)Jn[Qn]&&(Xn+=Qn+" ");return Xn.trim()}function normalizeProps(Jn){if(!Jn)return null;let{class:Xn,style:Qn}=Jn;return Xn&&!isString(Xn)&&(Jn.class=normalizeClass(Xn)),Qn&&(Jn.style=normalizeStyle(Qn)),Jn}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(Jn){return!!Jn||Jn===""}function looseCompareArrays(Jn,Xn){if(Jn.length!==Xn.length)return!1;let Qn=!0;for(let Zn=0;Qn&&Zn<Jn.length;Zn++)Qn=looseEqual(Jn[Zn],Xn[Zn]);return Qn}function looseEqual(Jn,Xn){if(Jn===Xn)return!0;let Qn=isDate$1(Jn),Zn=isDate$1(Xn);if(Qn||Zn)return Qn&&Zn?Jn.getTime()===Xn.getTime():!1;if(Qn=isSymbol(Jn),Zn=isSymbol(Xn),Qn||Zn)return Jn===Xn;if(Qn=isArray$1(Jn),Zn=isArray$1(Xn),Qn||Zn)return Qn&&Zn?looseCompareArrays(Jn,Xn):!1;if(Qn=isObject$3(Jn),Zn=isObject$3(Xn),Qn||Zn){if(!Qn||!Zn)return!1;const er=Object.keys(Jn).length,tr=Object.keys(Xn).length;if(er!==tr)return!1;for(const nr in Jn){const rr=Jn.hasOwnProperty(nr),sr=Xn.hasOwnProperty(nr);if(rr&&!sr||!rr&&sr||!looseEqual(Jn[nr],Xn[nr]))return!1}}return String(Jn)===String(Xn)}function looseIndexOf(Jn,Xn){return Jn.findIndex(Qn=>looseEqual(Qn,Xn))}const toDisplayString=Jn=>isString(Jn)?Jn:Jn==null?"":isArray$1(Jn)||isObject$3(Jn)&&(Jn.toString===objectToString||!isFunction(Jn.toString))?JSON.stringify(Jn,replacer,2):String(Jn),replacer=(Jn,Xn)=>Xn&&Xn.__v_isRef?replacer(Jn,Xn.value):isMap(Xn)?{[`Map(${Xn.size})`]:[...Xn.entries()].reduce((Qn,[Zn,er])=>(Qn[`${Zn} =>`]=er,Qn),{})}:isSet(Xn)?{[`Set(${Xn.size})`]:[...Xn.values()]}:isObject$3(Xn)&&!isArray$1(Xn)&&!isPlainObject$1(Xn)?String(Xn):Xn;let activeEffectScope;class EffectScope{constructor(Xn=!1){this.detached=Xn,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!Xn&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(Xn){if(this._active){const Qn=activeEffectScope;try{return activeEffectScope=this,Xn()}finally{activeEffectScope=Qn}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(Xn){if(this._active){let Qn,Zn;for(Qn=0,Zn=this.effects.length;Qn<Zn;Qn++)this.effects[Qn].stop();for(Qn=0,Zn=this.cleanups.length;Qn<Zn;Qn++)this.cleanups[Qn]();if(this.scopes)for(Qn=0,Zn=this.scopes.length;Qn<Zn;Qn++)this.scopes[Qn].stop(!0);if(!this.detached&&this.parent&&!Xn){const er=this.parent.scopes.pop();er&&er!==this&&(this.parent.scopes[this.index]=er,er.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(Jn){return new EffectScope(Jn)}function recordEffectScope(Jn,Xn=activeEffectScope){Xn&&Xn.active&&Xn.effects.push(Jn)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Jn){activeEffectScope&&activeEffectScope.cleanups.push(Jn)}const createDep=Jn=>{const Xn=new Set(Jn);return Xn.w=0,Xn.n=0,Xn},wasTracked=Jn=>(Jn.w&trackOpBit)>0,newTracked=Jn=>(Jn.n&trackOpBit)>0,initDepMarkers=({deps:Jn})=>{if(Jn.length)for(let Xn=0;Xn<Jn.length;Xn++)Jn[Xn].w|=trackOpBit},finalizeDepMarkers=Jn=>{const{deps:Xn}=Jn;if(Xn.length){let Qn=0;for(let Zn=0;Zn<Xn.length;Zn++){const er=Xn[Zn];wasTracked(er)&&!newTracked(er)?er.delete(Jn):Xn[Qn++]=er,er.w&=~trackOpBit,er.n&=~trackOpBit}Xn.length=Qn}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(Xn,Qn=null,Zn){this.fn=Xn,this.scheduler=Qn,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,Zn)}run(){if(!this.active)return this.fn();let Xn=activeEffect,Qn=shouldTrack;for(;Xn;){if(Xn===this)return;Xn=Xn.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=Qn,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(Jn){const{deps:Xn}=Jn;if(Xn.length){for(let Qn=0;Qn<Xn.length;Qn++)Xn[Qn].delete(Jn);Xn.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Jn=trackStack.pop();shouldTrack=Jn===void 0?!0:Jn}function track(Jn,Xn,Qn){if(shouldTrack&&activeEffect){let Zn=targetMap.get(Jn);Zn||targetMap.set(Jn,Zn=new Map);let er=Zn.get(Qn);er||Zn.set(Qn,er=createDep()),trackEffects(er)}}function trackEffects(Jn,Xn){let Qn=!1;effectTrackDepth<=maxMarkerBits?newTracked(Jn)||(Jn.n|=trackOpBit,Qn=!wasTracked(Jn)):Qn=!Jn.has(activeEffect),Qn&&(Jn.add(activeEffect),activeEffect.deps.push(Jn))}function trigger(Jn,Xn,Qn,Zn,er,tr){const nr=targetMap.get(Jn);if(!nr)return;let rr=[];if(Xn==="clear")rr=[...nr.values()];else if(Qn==="length"&&isArray$1(Jn)){const sr=Number(Zn);nr.forEach((or,ir)=>{(ir==="length"||ir>=sr)&&rr.push(or)})}else switch(Qn!==void 0&&rr.push(nr.get(Qn)),Xn){case"add":isArray$1(Jn)?isIntegerKey(Qn)&&rr.push(nr.get("length")):(rr.push(nr.get(ITERATE_KEY)),isMap(Jn)&&rr.push(nr.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(Jn)||(rr.push(nr.get(ITERATE_KEY)),isMap(Jn)&&rr.push(nr.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Jn)&&rr.push(nr.get(ITERATE_KEY));break}if(rr.length===1)rr[0]&&triggerEffects(rr[0]);else{const sr=[];for(const or of rr)or&&sr.push(...or);triggerEffects(createDep(sr))}}function triggerEffects(Jn,Xn){const Qn=isArray$1(Jn)?Jn:[...Jn];for(const Zn of Qn)Zn.computed&&triggerEffect(Zn);for(const Zn of Qn)Zn.computed||triggerEffect(Zn)}function triggerEffect(Jn,Xn){(Jn!==activeEffect||Jn.allowRecurse)&&(Jn.scheduler?Jn.scheduler():Jn.run())}function getDepFromReactive(Jn,Xn){var Qn;return(Qn=targetMap.get(Jn))==null?void 0:Qn.get(Xn)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Jn=>Jn!=="arguments"&&Jn!=="caller").map(Jn=>Symbol[Jn]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const Jn={};return["includes","indexOf","lastIndexOf"].forEach(Xn=>{Jn[Xn]=function(...Qn){const Zn=toRaw(this);for(let tr=0,nr=this.length;tr<nr;tr++)track(Zn,"get",tr+"");const er=Zn[Xn](...Qn);return er===-1||er===!1?Zn[Xn](...Qn.map(toRaw)):er}}),["push","pop","shift","unshift","splice"].forEach(Xn=>{Jn[Xn]=function(...Qn){pauseTracking();const Zn=toRaw(this)[Xn].apply(this,Qn);return resetTracking(),Zn}}),Jn}function hasOwnProperty(Jn){const Xn=toRaw(this);return track(Xn,"has",Jn),Xn.hasOwnProperty(Jn)}function createGetter(Jn=!1,Xn=!1){return function(Zn,er,tr){if(er==="__v_isReactive")return!Jn;if(er==="__v_isReadonly")return Jn;if(er==="__v_isShallow")return Xn;if(er==="__v_raw"&&tr===(Jn?Xn?shallowReadonlyMap:readonlyMap:Xn?shallowReactiveMap:reactiveMap).get(Zn))return Zn;const nr=isArray$1(Zn);if(!Jn){if(nr&&hasOwn(arrayInstrumentations,er))return Reflect.get(arrayInstrumentations,er,tr);if(er==="hasOwnProperty")return hasOwnProperty}const rr=Reflect.get(Zn,er,tr);return(isSymbol(er)?builtInSymbols.has(er):isNonTrackableKeys(er))||(Jn||track(Zn,"get",er),Xn)?rr:isRef(rr)?nr&&isIntegerKey(er)?rr:rr.value:isObject$3(rr)?Jn?readonly(rr):reactive(rr):rr}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(Jn=!1){return function(Qn,Zn,er,tr){let nr=Qn[Zn];if(isReadonly(nr)&&isRef(nr)&&!isRef(er))return!1;if(!Jn&&(!isShallow(er)&&!isReadonly(er)&&(nr=toRaw(nr),er=toRaw(er)),!isArray$1(Qn)&&isRef(nr)&&!isRef(er)))return nr.value=er,!0;const rr=isArray$1(Qn)&&isIntegerKey(Zn)?Number(Zn)<Qn.length:hasOwn(Qn,Zn),sr=Reflect.set(Qn,Zn,er,tr);return Qn===toRaw(tr)&&(rr?hasChanged(er,nr)&&trigger(Qn,"set",Zn,er):trigger(Qn,"add",Zn,er)),sr}}function deleteProperty(Jn,Xn){const Qn=hasOwn(Jn,Xn);Jn[Xn];const Zn=Reflect.deleteProperty(Jn,Xn);return Zn&&Qn&&trigger(Jn,"delete",Xn,void 0),Zn}function has$1(Jn,Xn){const Qn=Reflect.has(Jn,Xn);return(!isSymbol(Xn)||!builtInSymbols.has(Xn))&&track(Jn,"has",Xn),Qn}function ownKeys(Jn){return track(Jn,"iterate",isArray$1(Jn)?"length":ITERATE_KEY),Reflect.ownKeys(Jn)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(Jn,Xn){return!0},deleteProperty(Jn,Xn){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=Jn=>Jn,getProto=Jn=>Reflect.getPrototypeOf(Jn);function get$2(Jn,Xn,Qn=!1,Zn=!1){Jn=Jn.__v_raw;const er=toRaw(Jn),tr=toRaw(Xn);Qn||(Xn!==tr&&track(er,"get",Xn),track(er,"get",tr));const{has:nr}=getProto(er),rr=Zn?toShallow:Qn?toReadonly:toReactive;if(nr.call(er,Xn))return rr(Jn.get(Xn));if(nr.call(er,tr))return rr(Jn.get(tr));Jn!==er&&Jn.get(Xn)}function has$2(Jn,Xn=!1){const Qn=this.__v_raw,Zn=toRaw(Qn),er=toRaw(Jn);return Xn||(Jn!==er&&track(Zn,"has",Jn),track(Zn,"has",er)),Jn===er?Qn.has(Jn):Qn.has(Jn)||Qn.has(er)}function size(Jn,Xn=!1){return Jn=Jn.__v_raw,!Xn&&track(toRaw(Jn),"iterate",ITERATE_KEY),Reflect.get(Jn,"size",Jn)}function add$1(Jn){Jn=toRaw(Jn);const Xn=toRaw(this);return getProto(Xn).has.call(Xn,Jn)||(Xn.add(Jn),trigger(Xn,"add",Jn,Jn)),this}function set$2(Jn,Xn){Xn=toRaw(Xn);const Qn=toRaw(this),{has:Zn,get:er}=getProto(Qn);let tr=Zn.call(Qn,Jn);tr||(Jn=toRaw(Jn),tr=Zn.call(Qn,Jn));const nr=er.call(Qn,Jn);return Qn.set(Jn,Xn),tr?hasChanged(Xn,nr)&&trigger(Qn,"set",Jn,Xn):trigger(Qn,"add",Jn,Xn),this}function deleteEntry(Jn){const Xn=toRaw(this),{has:Qn,get:Zn}=getProto(Xn);let er=Qn.call(Xn,Jn);er||(Jn=toRaw(Jn),er=Qn.call(Xn,Jn)),Zn&&Zn.call(Xn,Jn);const tr=Xn.delete(Jn);return er&&trigger(Xn,"delete",Jn,void 0),tr}function clear(){const Jn=toRaw(this),Xn=Jn.size!==0,Qn=Jn.clear();return Xn&&trigger(Jn,"clear",void 0,void 0),Qn}function createForEach(Jn,Xn){return function(Zn,er){const tr=this,nr=tr.__v_raw,rr=toRaw(nr),sr=Xn?toShallow:Jn?toReadonly:toReactive;return!Jn&&track(rr,"iterate",ITERATE_KEY),nr.forEach((or,ir)=>Zn.call(er,sr(or),sr(ir),tr))}}function createIterableMethod(Jn,Xn,Qn){return function(...Zn){const er=this.__v_raw,tr=toRaw(er),nr=isMap(tr),rr=Jn==="entries"||Jn===Symbol.iterator&&nr,sr=Jn==="keys"&&nr,or=er[Jn](...Zn),ir=Qn?toShallow:Xn?toReadonly:toReactive;return!Xn&&track(tr,"iterate",sr?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ar,done:lr}=or.next();return lr?{value:ar,done:lr}:{value:rr?[ir(ar[0]),ir(ar[1])]:ir(ar),done:lr}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Jn){return function(...Xn){return Jn==="delete"?!1:this}}function createInstrumentations(){const Jn={get(tr){return get$2(this,tr)},get size(){return size(this)},has:has$2,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},Xn={get(tr){return get$2(this,tr,!1,!0)},get size(){return size(this)},has:has$2,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},Qn={get(tr){return get$2(this,tr,!0)},get size(){return size(this,!0)},has(tr){return has$2.call(this,tr,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},Zn={get(tr){return get$2(this,tr,!0,!0)},get size(){return size(this,!0)},has(tr){return has$2.call(this,tr,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(tr=>{Jn[tr]=createIterableMethod(tr,!1,!1),Qn[tr]=createIterableMethod(tr,!0,!1),Xn[tr]=createIterableMethod(tr,!1,!0),Zn[tr]=createIterableMethod(tr,!0,!0)}),[Jn,Qn,Xn,Zn]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(Jn,Xn){const Qn=Xn?Jn?shallowReadonlyInstrumentations:shallowInstrumentations:Jn?readonlyInstrumentations:mutableInstrumentations;return(Zn,er,tr)=>er==="__v_isReactive"?!Jn:er==="__v_isReadonly"?Jn:er==="__v_raw"?Zn:Reflect.get(hasOwn(Qn,er)&&er in Zn?Qn:Zn,er,tr)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Jn){switch(Jn){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Jn){return Jn.__v_skip||!Object.isExtensible(Jn)?0:targetTypeMap(toRawType(Jn))}function reactive(Jn){return isReadonly(Jn)?Jn:createReactiveObject(Jn,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Jn){return createReactiveObject(Jn,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Jn){return createReactiveObject(Jn,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(Jn,Xn,Qn,Zn,er){if(!isObject$3(Jn)||Jn.__v_raw&&!(Xn&&Jn.__v_isReactive))return Jn;const tr=er.get(Jn);if(tr)return tr;const nr=getTargetType(Jn);if(nr===0)return Jn;const rr=new Proxy(Jn,nr===2?Zn:Qn);return er.set(Jn,rr),rr}function isReactive(Jn){return isReadonly(Jn)?isReactive(Jn.__v_raw):!!(Jn&&Jn.__v_isReactive)}function isReadonly(Jn){return!!(Jn&&Jn.__v_isReadonly)}function isShallow(Jn){return!!(Jn&&Jn.__v_isShallow)}function isProxy(Jn){return isReactive(Jn)||isReadonly(Jn)}function toRaw(Jn){const Xn=Jn&&Jn.__v_raw;return Xn?toRaw(Xn):Jn}function markRaw(Jn){return def(Jn,"__v_skip",!0),Jn}const toReactive=Jn=>isObject$3(Jn)?reactive(Jn):Jn,toReadonly=Jn=>isObject$3(Jn)?readonly(Jn):Jn;function trackRefValue(Jn){shouldTrack&&activeEffect&&(Jn=toRaw(Jn),trackEffects(Jn.dep||(Jn.dep=createDep())))}function triggerRefValue(Jn,Xn){Jn=toRaw(Jn);const Qn=Jn.dep;Qn&&triggerEffects(Qn)}function isRef(Jn){return!!(Jn&&Jn.__v_isRef===!0)}function ref(Jn){return createRef(Jn,!1)}function shallowRef(Jn){return createRef(Jn,!0)}function createRef(Jn,Xn){return isRef(Jn)?Jn:new RefImpl(Jn,Xn)}class RefImpl{constructor(Xn,Qn){this.__v_isShallow=Qn,this.dep=void 0,this.__v_isRef=!0,this._rawValue=Qn?Xn:toRaw(Xn),this._value=Qn?Xn:toReactive(Xn)}get value(){return trackRefValue(this),this._value}set value(Xn){const Qn=this.__v_isShallow||isShallow(Xn)||isReadonly(Xn);Xn=Qn?Xn:toRaw(Xn),hasChanged(Xn,this._rawValue)&&(this._rawValue=Xn,this._value=Qn?Xn:toReactive(Xn),triggerRefValue(this))}}function unref(Jn){return isRef(Jn)?Jn.value:Jn}function toValue(Jn){return isFunction(Jn)?Jn():unref(Jn)}const shallowUnwrapHandlers={get:(Jn,Xn,Qn)=>unref(Reflect.get(Jn,Xn,Qn)),set:(Jn,Xn,Qn,Zn)=>{const er=Jn[Xn];return isRef(er)&&!isRef(Qn)?(er.value=Qn,!0):Reflect.set(Jn,Xn,Qn,Zn)}};function proxyRefs(Jn){return isReactive(Jn)?Jn:new Proxy(Jn,shallowUnwrapHandlers)}function toRefs(Jn){const Xn=isArray$1(Jn)?new Array(Jn.length):{};for(const Qn in Jn)Xn[Qn]=propertyToRef(Jn,Qn);return Xn}class ObjectRefImpl{constructor(Xn,Qn,Zn){this._object=Xn,this._key=Qn,this._defaultValue=Zn,this.__v_isRef=!0}get value(){const Xn=this._object[this._key];return Xn===void 0?this._defaultValue:Xn}set value(Xn){this._object[this._key]=Xn}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(Xn){this._getter=Xn,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(Jn,Xn,Qn){return isRef(Jn)?Jn:isFunction(Jn)?new GetterRefImpl(Jn):isObject$3(Jn)&&arguments.length>1?propertyToRef(Jn,Xn,Qn):ref(Jn)}function propertyToRef(Jn,Xn,Qn){const Zn=Jn[Xn];return isRef(Zn)?Zn:new ObjectRefImpl(Jn,Xn,Qn)}class ComputedRefImpl{constructor(Xn,Qn,Zn,er){this._setter=Qn,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(Xn,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!er,this.__v_isReadonly=Zn}get value(){const Xn=toRaw(this);return trackRefValue(Xn),(Xn._dirty||!Xn._cacheable)&&(Xn._dirty=!1,Xn._value=Xn.effect.run()),Xn._value}set value(Xn){this._setter(Xn)}}function computed$1(Jn,Xn,Qn=!1){let Zn,er;const tr=isFunction(Jn);return tr?(Zn=Jn,er=NOOP):(Zn=Jn.get,er=Jn.set),new ComputedRefImpl(Zn,er,tr||!er,Qn)}function warn(Jn,...Xn){}function callWithErrorHandling(Jn,Xn,Qn,Zn){let er;try{er=Zn?Jn(...Zn):Jn()}catch(tr){handleError(tr,Xn,Qn)}return er}function callWithAsyncErrorHandling(Jn,Xn,Qn,Zn){if(isFunction(Jn)){const tr=callWithErrorHandling(Jn,Xn,Qn,Zn);return tr&&isPromise(tr)&&tr.catch(nr=>{handleError(nr,Xn,Qn)}),tr}const er=[];for(let tr=0;tr<Jn.length;tr++)er.push(callWithAsyncErrorHandling(Jn[tr],Xn,Qn,Zn));return er}function handleError(Jn,Xn,Qn,Zn=!0){const er=Xn?Xn.vnode:null;if(Xn){let tr=Xn.parent;const nr=Xn.proxy,rr=Qn;for(;tr;){const or=tr.ec;if(or){for(let ir=0;ir<or.length;ir++)if(or[ir](Jn,nr,rr)===!1)return}tr=tr.parent}const sr=Xn.appContext.config.errorHandler;if(sr){callWithErrorHandling(sr,null,10,[Jn,nr,rr]);return}}logError(Jn,Qn,er,Zn)}function logError(Jn,Xn,Qn,Zn=!0){console.error(Jn)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Jn){const Xn=currentFlushPromise||resolvedPromise;return Jn?Xn.then(this?Jn.bind(this):Jn):Xn}function findInsertionIndex(Jn){let Xn=flushIndex+1,Qn=queue.length;for(;Xn<Qn;){const Zn=Xn+Qn>>>1;getId(queue[Zn])<Jn?Xn=Zn+1:Qn=Zn}return Xn}function queueJob(Jn){(!queue.length||!queue.includes(Jn,isFlushing&&Jn.allowRecurse?flushIndex+1:flushIndex))&&(Jn.id==null?queue.push(Jn):queue.splice(findInsertionIndex(Jn.id),0,Jn),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(Jn){const Xn=queue.indexOf(Jn);Xn>flushIndex&&queue.splice(Xn,1)}function queuePostFlushCb(Jn){isArray$1(Jn)?pendingPostFlushCbs.push(...Jn):(!activePostFlushCbs||!activePostFlushCbs.includes(Jn,Jn.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(Jn),queueFlush()}function flushPreFlushCbs(Jn,Xn=isFlushing?flushIndex+1:0){for(;Xn<queue.length;Xn++){const Qn=queue[Xn];Qn&&Qn.pre&&(queue.splice(Xn,1),Xn--,Qn())}}function flushPostFlushCbs(Jn){if(pendingPostFlushCbs.length){const Xn=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...Xn);return}for(activePostFlushCbs=Xn,activePostFlushCbs.sort((Qn,Zn)=>getId(Qn)-getId(Zn)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=Jn=>Jn.id==null?1/0:Jn.id,comparator=(Jn,Xn)=>{const Qn=getId(Jn)-getId(Xn);if(Qn===0){if(Jn.pre&&!Xn.pre)return-1;if(Xn.pre&&!Jn.pre)return 1}return Qn};function flushJobs(Jn){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const Xn=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const Qn=queue[flushIndex];Qn&&Qn.active!==!1&&callWithErrorHandling(Qn,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(Jn,Xn,...Qn){if(Jn.isUnmounted)return;const Zn=Jn.vnode.props||EMPTY_OBJ;let er=Qn;const tr=Xn.startsWith("update:"),nr=tr&&Xn.slice(7);if(nr&&nr in Zn){const ir=`${nr==="modelValue"?"model":nr}Modifiers`,{number:ar,trim:lr}=Zn[ir]||EMPTY_OBJ;lr&&(er=Qn.map(cr=>isString(cr)?cr.trim():cr)),ar&&(er=Qn.map(looseToNumber))}let rr,sr=Zn[rr=toHandlerKey(Xn)]||Zn[rr=toHandlerKey(camelize(Xn))];!sr&&tr&&(sr=Zn[rr=toHandlerKey(hyphenate(Xn))]),sr&&callWithAsyncErrorHandling(sr,Jn,6,er);const or=Zn[rr+"Once"];if(or){if(!Jn.emitted)Jn.emitted={};else if(Jn.emitted[rr])return;Jn.emitted[rr]=!0,callWithAsyncErrorHandling(or,Jn,6,er)}}function normalizeEmitsOptions(Jn,Xn,Qn=!1){const Zn=Xn.emitsCache,er=Zn.get(Jn);if(er!==void 0)return er;const tr=Jn.emits;let nr={},rr=!1;if(!isFunction(Jn)){const sr=or=>{const ir=normalizeEmitsOptions(or,Xn,!0);ir&&(rr=!0,extend(nr,ir))};!Qn&&Xn.mixins.length&&Xn.mixins.forEach(sr),Jn.extends&&sr(Jn.extends),Jn.mixins&&Jn.mixins.forEach(sr)}return!tr&&!rr?(isObject$3(Jn)&&Zn.set(Jn,null),null):(isArray$1(tr)?tr.forEach(sr=>nr[sr]=null):extend(nr,tr),isObject$3(Jn)&&Zn.set(Jn,nr),nr)}function isEmitListener(Jn,Xn){return!Jn||!isOn(Xn)?!1:(Xn=Xn.slice(2).replace(/Once$/,""),hasOwn(Jn,Xn[0].toLowerCase()+Xn.slice(1))||hasOwn(Jn,hyphenate(Xn))||hasOwn(Jn,Xn))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Jn){const Xn=currentRenderingInstance;return currentRenderingInstance=Jn,currentScopeId=Jn&&Jn.type.__scopeId||null,Xn}function pushScopeId(Jn){currentScopeId=Jn}function popScopeId(){currentScopeId=null}function withCtx(Jn,Xn=currentRenderingInstance,Qn){if(!Xn||Jn._n)return Jn;const Zn=(...er)=>{Zn._d&&setBlockTracking(-1);const tr=setCurrentRenderingInstance(Xn);let nr;try{nr=Jn(...er)}finally{setCurrentRenderingInstance(tr),Zn._d&&setBlockTracking(1)}return nr};return Zn._n=!0,Zn._c=!0,Zn._d=!0,Zn}function markAttrsAccessed(){}function renderComponentRoot(Jn){const{type:Xn,vnode:Qn,proxy:Zn,withProxy:er,props:tr,propsOptions:[nr],slots:rr,attrs:sr,emit:or,render:ir,renderCache:ar,data:lr,setupState:cr,ctx:dr,inheritAttrs:hr}=Jn;let pr,fr;const ur=setCurrentRenderingInstance(Jn);try{if(Qn.shapeFlag&4){const gr=er||Zn;pr=normalizeVNode(ir.call(gr,gr,ar,tr,cr,lr,dr)),fr=sr}else{const gr=Xn;pr=normalizeVNode(gr.length>1?gr(tr,{attrs:sr,slots:rr,emit:or}):gr(tr,null)),fr=Xn.props?sr:getFunctionalFallthrough(sr)}}catch(gr){blockStack.length=0,handleError(gr,Jn,1),pr=createVNode(Comment)}let br=pr;if(fr&&hr!==!1){const gr=Object.keys(fr),{shapeFlag:mr}=br;gr.length&&mr&7&&(nr&&gr.some(isModelListener)&&(fr=filterModelListeners(fr,nr)),br=cloneVNode(br,fr))}return Qn.dirs&&(br=cloneVNode(br),br.dirs=br.dirs?br.dirs.concat(Qn.dirs):Qn.dirs),Qn.transition&&(br.transition=Qn.transition),pr=br,setCurrentRenderingInstance(ur),pr}function filterSingleRoot(Jn){let Xn;for(let Qn=0;Qn<Jn.length;Qn++){const Zn=Jn[Qn];if(isVNode(Zn)){if(Zn.type!==Comment||Zn.children==="v-if"){if(Xn)return;Xn=Zn}}else return}return Xn}const getFunctionalFallthrough=Jn=>{let Xn;for(const Qn in Jn)(Qn==="class"||Qn==="style"||isOn(Qn))&&((Xn||(Xn={}))[Qn]=Jn[Qn]);return Xn},filterModelListeners=(Jn,Xn)=>{const Qn={};for(const Zn in Jn)(!isModelListener(Zn)||!(Zn.slice(9)in Xn))&&(Qn[Zn]=Jn[Zn]);return Qn};function shouldUpdateComponent(Jn,Xn,Qn){const{props:Zn,children:er,component:tr}=Jn,{props:nr,children:rr,patchFlag:sr}=Xn,or=tr.emitsOptions;if(Xn.dirs||Xn.transition)return!0;if(Qn&&sr>=0){if(sr&1024)return!0;if(sr&16)return Zn?hasPropsChanged(Zn,nr,or):!!nr;if(sr&8){const ir=Xn.dynamicProps;for(let ar=0;ar<ir.length;ar++){const lr=ir[ar];if(nr[lr]!==Zn[lr]&&!isEmitListener(or,lr))return!0}}}else return(er||rr)&&(!rr||!rr.$stable)?!0:Zn===nr?!1:Zn?nr?hasPropsChanged(Zn,nr,or):!0:!!nr;return!1}function hasPropsChanged(Jn,Xn,Qn){const Zn=Object.keys(Xn);if(Zn.length!==Object.keys(Jn).length)return!0;for(let er=0;er<Zn.length;er++){const tr=Zn[er];if(Xn[tr]!==Jn[tr]&&!isEmitListener(Qn,tr))return!0}return!1}function updateHOCHostEl({vnode:Jn,parent:Xn},Qn){for(;Xn&&Xn.subTree===Jn;)(Jn=Xn.vnode).el=Qn,Xn=Xn.parent}const isSuspense=Jn=>Jn.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Jn,Xn,Qn,Zn,er,tr,nr,rr,sr,or){Jn==null?mountSuspense(Xn,Qn,Zn,er,tr,nr,rr,sr,or):patchSuspense(Jn,Xn,Qn,Zn,er,nr,rr,sr,or)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Jn,Xn){const Qn=Jn.props&&Jn.props[Xn];isFunction(Qn)&&Qn()}function mountSuspense(Jn,Xn,Qn,Zn,er,tr,nr,rr,sr){const{p:or,o:{createElement:ir}}=sr,ar=ir("div"),lr=Jn.suspense=createSuspenseBoundary(Jn,er,Zn,Xn,ar,Qn,tr,nr,rr,sr);or(null,lr.pendingBranch=Jn.ssContent,ar,null,Zn,lr,tr,nr),lr.deps>0?(triggerEvent(Jn,"onPending"),triggerEvent(Jn,"onFallback"),or(null,Jn.ssFallback,Xn,Qn,Zn,null,tr,nr),setActiveBranch(lr,Jn.ssFallback)):lr.resolve(!1,!0)}function patchSuspense(Jn,Xn,Qn,Zn,er,tr,nr,rr,{p:sr,um:or,o:{createElement:ir}}){const ar=Xn.suspense=Jn.suspense;ar.vnode=Xn,Xn.el=Jn.el;const lr=Xn.ssContent,cr=Xn.ssFallback,{activeBranch:dr,pendingBranch:hr,isInFallback:pr,isHydrating:fr}=ar;if(hr)ar.pendingBranch=lr,isSameVNodeType(lr,hr)?(sr(hr,lr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0?ar.resolve():pr&&(sr(dr,cr,Qn,Zn,er,null,tr,nr,rr),setActiveBranch(ar,cr))):(ar.pendingId++,fr?(ar.isHydrating=!1,ar.activeBranch=hr):or(hr,er,ar),ar.deps=0,ar.effects.length=0,ar.hiddenContainer=ir("div"),pr?(sr(null,lr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0?ar.resolve():(sr(dr,cr,Qn,Zn,er,null,tr,nr,rr),setActiveBranch(ar,cr))):dr&&isSameVNodeType(lr,dr)?(sr(dr,lr,Qn,Zn,er,ar,tr,nr,rr),ar.resolve(!0)):(sr(null,lr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0&&ar.resolve()));else if(dr&&isSameVNodeType(lr,dr))sr(dr,lr,Qn,Zn,er,ar,tr,nr,rr),setActiveBranch(ar,lr);else if(triggerEvent(Xn,"onPending"),ar.pendingBranch=lr,ar.pendingId++,sr(null,lr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0)ar.resolve();else{const{timeout:ur,pendingId:br}=ar;ur>0?setTimeout(()=>{ar.pendingId===br&&ar.fallback(cr)},ur):ur===0&&ar.fallback(cr)}}function createSuspenseBoundary(Jn,Xn,Qn,Zn,er,tr,nr,rr,sr,or,ir=!1){const{p:ar,m:lr,um:cr,n:dr,o:{parentNode:hr,remove:pr}}=or;let fr;const ur=isVNodeSuspensible(Jn);ur&&Xn!=null&&Xn.pendingBranch&&(fr=Xn.pendingId,Xn.deps++);const br=Jn.props?toNumber$2(Jn.props.timeout):void 0,gr={vnode:Jn,parent:Xn,parentComponent:Qn,isSVG:nr,container:Zn,hiddenContainer:er,anchor:tr,deps:0,pendingId:0,timeout:typeof br=="number"?br:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:ir,isUnmounted:!1,effects:[],resolve(mr=!1,_r=!1){const{vnode:wr,activeBranch:yr,pendingBranch:Cr,pendingId:Pr,effects:Tr,parentComponent:Rr,container:Or}=gr;if(gr.isHydrating)gr.isHydrating=!1;else if(!mr){const Hr=yr&&Cr.transition&&Cr.transition.mode==="out-in";Hr&&(yr.transition.afterLeave=()=>{Pr===gr.pendingId&&lr(Cr,Or,Wr,0)});let{anchor:Wr}=gr;yr&&(Wr=dr(yr),cr(yr,Rr,gr,!0)),Hr||lr(Cr,Or,Wr,0)}setActiveBranch(gr,Cr),gr.pendingBranch=null,gr.isInFallback=!1;let $r=gr.parent,Gr=!1;for(;$r;){if($r.pendingBranch){$r.effects.push(...Tr),Gr=!0;break}$r=$r.parent}Gr||queuePostFlushCb(Tr),gr.effects=[],ur&&Xn&&Xn.pendingBranch&&fr===Xn.pendingId&&(Xn.deps--,Xn.deps===0&&!_r&&Xn.resolve()),triggerEvent(wr,"onResolve")},fallback(mr){if(!gr.pendingBranch)return;const{vnode:_r,activeBranch:wr,parentComponent:yr,container:Cr,isSVG:Pr}=gr;triggerEvent(_r,"onFallback");const Tr=dr(wr),Rr=()=>{gr.isInFallback&&(ar(null,mr,Cr,Tr,yr,null,Pr,rr,sr),setActiveBranch(gr,mr))},Or=mr.transition&&mr.transition.mode==="out-in";Or&&(wr.transition.afterLeave=Rr),gr.isInFallback=!0,cr(wr,yr,null,!0),Or||Rr()},move(mr,_r,wr){gr.activeBranch&&lr(gr.activeBranch,mr,_r,wr),gr.container=mr},next(){return gr.activeBranch&&dr(gr.activeBranch)},registerDep(mr,_r){const wr=!!gr.pendingBranch;wr&&gr.deps++;const yr=mr.vnode.el;mr.asyncDep.catch(Cr=>{handleError(Cr,mr,0)}).then(Cr=>{if(mr.isUnmounted||gr.isUnmounted||gr.pendingId!==mr.suspenseId)return;mr.asyncResolved=!0;const{vnode:Pr}=mr;handleSetupResult(mr,Cr,!1),yr&&(Pr.el=yr);const Tr=!yr&&mr.subTree.el;_r(mr,Pr,hr(yr||mr.subTree.el),yr?null:dr(mr.subTree),gr,nr,sr),Tr&&pr(Tr),updateHOCHostEl(mr,Pr.el),wr&&--gr.deps===0&&gr.resolve()})},unmount(mr,_r){gr.isUnmounted=!0,gr.activeBranch&&cr(gr.activeBranch,Qn,mr,_r),gr.pendingBranch&&cr(gr.pendingBranch,Qn,mr,_r)}};return gr}function hydrateSuspense(Jn,Xn,Qn,Zn,er,tr,nr,rr,sr){const or=Xn.suspense=createSuspenseBoundary(Xn,Zn,Qn,Jn.parentNode,document.createElement("div"),null,er,tr,nr,rr,!0),ir=sr(Jn,or.pendingBranch=Xn.ssContent,Qn,or,tr,nr);return or.deps===0&&or.resolve(!1,!0),ir}function normalizeSuspenseChildren(Jn){const{shapeFlag:Xn,children:Qn}=Jn,Zn=Xn&32;Jn.ssContent=normalizeSuspenseSlot(Zn?Qn.default:Qn),Jn.ssFallback=Zn?normalizeSuspenseSlot(Qn.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Jn){let Xn;if(isFunction(Jn)){const Qn=isBlockTreeEnabled&&Jn._c;Qn&&(Jn._d=!1,openBlock()),Jn=Jn(),Qn&&(Jn._d=!0,Xn=currentBlock,closeBlock())}return isArray$1(Jn)&&(Jn=filterSingleRoot(Jn)),Jn=normalizeVNode(Jn),Xn&&!Jn.dynamicChildren&&(Jn.dynamicChildren=Xn.filter(Qn=>Qn!==Jn)),Jn}function queueEffectWithSuspense(Jn,Xn){Xn&&Xn.pendingBranch?isArray$1(Jn)?Xn.effects.push(...Jn):Xn.effects.push(Jn):queuePostFlushCb(Jn)}function setActiveBranch(Jn,Xn){Jn.activeBranch=Xn;const{vnode:Qn,parentComponent:Zn}=Jn,er=Qn.el=Xn.el;Zn&&Zn.subTree===Qn&&(Zn.vnode.el=er,updateHOCHostEl(Zn,er))}function isVNodeSuspensible(Jn){var Xn;return((Xn=Jn.props)==null?void 0:Xn.suspensible)!=null&&Jn.props.suspensible!==!1}function watchEffect(Jn,Xn){return doWatch(Jn,null,Xn)}function watchPostEffect(Jn,Xn){return doWatch(Jn,null,{flush:"post"})}const INITIAL_WATCHER_VALUE={};function watch(Jn,Xn,Qn){return doWatch(Jn,Xn,Qn)}function doWatch(Jn,Xn,{immediate:Qn,deep:Zn,flush:er,onTrack:tr,onTrigger:nr}=EMPTY_OBJ){var rr;const sr=getCurrentScope()===((rr=currentInstance)==null?void 0:rr.scope)?currentInstance:null;let or,ir=!1,ar=!1;if(isRef(Jn)?(or=()=>Jn.value,ir=isShallow(Jn)):isReactive(Jn)?(or=()=>Jn,Zn=!0):isArray$1(Jn)?(ar=!0,ir=Jn.some(gr=>isReactive(gr)||isShallow(gr)),or=()=>Jn.map(gr=>{if(isRef(gr))return gr.value;if(isReactive(gr))return traverse(gr);if(isFunction(gr))return callWithErrorHandling(gr,sr,2)})):isFunction(Jn)?Xn?or=()=>callWithErrorHandling(Jn,sr,2):or=()=>{if(!(sr&&sr.isUnmounted))return lr&&lr(),callWithAsyncErrorHandling(Jn,sr,3,[cr])}:or=NOOP,Xn&&Zn){const gr=or;or=()=>traverse(gr())}let lr,cr=gr=>{lr=ur.onStop=()=>{callWithErrorHandling(gr,sr,4)}},dr;if(isInSSRComponentSetup)if(cr=NOOP,Xn?Qn&&callWithAsyncErrorHandling(Xn,sr,3,[or(),ar?[]:void 0,cr]):or(),er==="sync"){const gr=useSSRContext();dr=gr.__watcherHandles||(gr.__watcherHandles=[])}else return NOOP;let hr=ar?new Array(Jn.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const pr=()=>{if(ur.active)if(Xn){const gr=ur.run();(Zn||ir||(ar?gr.some((mr,_r)=>hasChanged(mr,hr[_r])):hasChanged(gr,hr)))&&(lr&&lr(),callWithAsyncErrorHandling(Xn,sr,3,[gr,hr===INITIAL_WATCHER_VALUE?void 0:ar&&hr[0]===INITIAL_WATCHER_VALUE?[]:hr,cr]),hr=gr)}else ur.run()};pr.allowRecurse=!!Xn;let fr;er==="sync"?fr=pr:er==="post"?fr=()=>queuePostRenderEffect(pr,sr&&sr.suspense):(pr.pre=!0,sr&&(pr.id=sr.uid),fr=()=>queueJob(pr));const ur=new ReactiveEffect(or,fr);Xn?Qn?pr():hr=ur.run():er==="post"?queuePostRenderEffect(ur.run.bind(ur),sr&&sr.suspense):ur.run();const br=()=>{ur.stop(),sr&&sr.scope&&remove$1(sr.scope.effects,ur)};return dr&&dr.push(br),br}function instanceWatch(Jn,Xn,Qn){const Zn=this.proxy,er=isString(Jn)?Jn.includes(".")?createPathGetter(Zn,Jn):()=>Zn[Jn]:Jn.bind(Zn,Zn);let tr;isFunction(Xn)?tr=Xn:(tr=Xn.handler,Qn=Xn);const nr=currentInstance;setCurrentInstance(this);const rr=doWatch(er,tr.bind(Zn),Qn);return nr?setCurrentInstance(nr):unsetCurrentInstance(),rr}function createPathGetter(Jn,Xn){const Qn=Xn.split(".");return()=>{let Zn=Jn;for(let er=0;er<Qn.length&&Zn;er++)Zn=Zn[Qn[er]];return Zn}}function traverse(Jn,Xn){if(!isObject$3(Jn)||Jn.__v_skip||(Xn=Xn||new Set,Xn.has(Jn)))return Jn;if(Xn.add(Jn),isRef(Jn))traverse(Jn.value,Xn);else if(isArray$1(Jn))for(let Qn=0;Qn<Jn.length;Qn++)traverse(Jn[Qn],Xn);else if(isSet(Jn)||isMap(Jn))Jn.forEach(Qn=>{traverse(Qn,Xn)});else if(isPlainObject$1(Jn))for(const Qn in Jn)traverse(Jn[Qn],Xn);return Jn}function withDirectives(Jn,Xn){const Qn=currentRenderingInstance;if(Qn===null)return Jn;const Zn=getExposeProxy(Qn)||Qn.proxy,er=Jn.dirs||(Jn.dirs=[]);for(let tr=0;tr<Xn.length;tr++){let[nr,rr,sr,or=EMPTY_OBJ]=Xn[tr];nr&&(isFunction(nr)&&(nr={mounted:nr,updated:nr}),nr.deep&&traverse(rr),er.push({dir:nr,instance:Zn,value:rr,oldValue:void 0,arg:sr,modifiers:or}))}return Jn}function invokeDirectiveHook(Jn,Xn,Qn,Zn){const er=Jn.dirs,tr=Xn&&Xn.dirs;for(let nr=0;nr<er.length;nr++){const rr=er[nr];tr&&(rr.oldValue=tr[nr].value);let sr=rr.dir[Zn];sr&&(pauseTracking(),callWithAsyncErrorHandling(sr,Qn,8,[Jn.el,rr,Jn,Xn]),resetTracking())}}function useTransitionState(){const Jn={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Jn.isMounted=!0}),onBeforeUnmount(()=>{Jn.isUnmounting=!0}),Jn}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Jn,{slots:Xn}){const Qn=getCurrentInstance(),Zn=useTransitionState();let er;return()=>{const tr=Xn.default&&getTransitionRawChildren(Xn.default(),!0);if(!tr||!tr.length)return;let nr=tr[0];if(tr.length>1){for(const hr of tr)if(hr.type!==Comment){nr=hr;break}}const rr=toRaw(Jn),{mode:sr}=rr;if(Zn.isLeaving)return emptyPlaceholder(nr);const or=getKeepAliveChild(nr);if(!or)return emptyPlaceholder(nr);const ir=resolveTransitionHooks(or,rr,Zn,Qn);setTransitionHooks(or,ir);const ar=Qn.subTree,lr=ar&&getKeepAliveChild(ar);let cr=!1;const{getTransitionKey:dr}=or.type;if(dr){const hr=dr();er===void 0?er=hr:hr!==er&&(er=hr,cr=!0)}if(lr&&lr.type!==Comment&&(!isSameVNodeType(or,lr)||cr)){const hr=resolveTransitionHooks(lr,rr,Zn,Qn);if(setTransitionHooks(lr,hr),sr==="out-in")return Zn.isLeaving=!0,hr.afterLeave=()=>{Zn.isLeaving=!1,Qn.update.active!==!1&&Qn.update()},emptyPlaceholder(nr);sr==="in-out"&&or.type!==Comment&&(hr.delayLeave=(pr,fr,ur)=>{const br=getLeavingNodesForType(Zn,lr);br[String(lr.key)]=lr,pr._leaveCb=()=>{fr(),pr._leaveCb=void 0,delete ir.delayedLeave},ir.delayedLeave=ur})}return nr}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Jn,Xn){const{leavingVNodes:Qn}=Jn;let Zn=Qn.get(Xn.type);return Zn||(Zn=Object.create(null),Qn.set(Xn.type,Zn)),Zn}function resolveTransitionHooks(Jn,Xn,Qn,Zn){const{appear:er,mode:tr,persisted:nr=!1,onBeforeEnter:rr,onEnter:sr,onAfterEnter:or,onEnterCancelled:ir,onBeforeLeave:ar,onLeave:lr,onAfterLeave:cr,onLeaveCancelled:dr,onBeforeAppear:hr,onAppear:pr,onAfterAppear:fr,onAppearCancelled:ur}=Xn,br=String(Jn.key),gr=getLeavingNodesForType(Qn,Jn),mr=(yr,Cr)=>{yr&&callWithAsyncErrorHandling(yr,Zn,9,Cr)},_r=(yr,Cr)=>{const Pr=Cr[1];mr(yr,Cr),isArray$1(yr)?yr.every(Tr=>Tr.length<=1)&&Pr():yr.length<=1&&Pr()},wr={mode:tr,persisted:nr,beforeEnter(yr){let Cr=rr;if(!Qn.isMounted)if(er)Cr=hr||rr;else return;yr._leaveCb&&yr._leaveCb(!0);const Pr=gr[br];Pr&&isSameVNodeType(Jn,Pr)&&Pr.el._leaveCb&&Pr.el._leaveCb(),mr(Cr,[yr])},enter(yr){let Cr=sr,Pr=or,Tr=ir;if(!Qn.isMounted)if(er)Cr=pr||sr,Pr=fr||or,Tr=ur||ir;else return;let Rr=!1;const Or=yr._enterCb=$r=>{Rr||(Rr=!0,$r?mr(Tr,[yr]):mr(Pr,[yr]),wr.delayedLeave&&wr.delayedLeave(),yr._enterCb=void 0)};Cr?_r(Cr,[yr,Or]):Or()},leave(yr,Cr){const Pr=String(Jn.key);if(yr._enterCb&&yr._enterCb(!0),Qn.isUnmounting)return Cr();mr(ar,[yr]);let Tr=!1;const Rr=yr._leaveCb=Or=>{Tr||(Tr=!0,Cr(),Or?mr(dr,[yr]):mr(cr,[yr]),yr._leaveCb=void 0,gr[Pr]===Jn&&delete gr[Pr])};gr[Pr]=Jn,lr?_r(lr,[yr,Rr]):Rr()},clone(yr){return resolveTransitionHooks(yr,Xn,Qn,Zn)}};return wr}function emptyPlaceholder(Jn){if(isKeepAlive(Jn))return Jn=cloneVNode(Jn),Jn.children=null,Jn}function getKeepAliveChild(Jn){return isKeepAlive(Jn)?Jn.children?Jn.children[0]:void 0:Jn}function setTransitionHooks(Jn,Xn){Jn.shapeFlag&6&&Jn.component?setTransitionHooks(Jn.component.subTree,Xn):Jn.shapeFlag&128?(Jn.ssContent.transition=Xn.clone(Jn.ssContent),Jn.ssFallback.transition=Xn.clone(Jn.ssFallback)):Jn.transition=Xn}function getTransitionRawChildren(Jn,Xn=!1,Qn){let Zn=[],er=0;for(let tr=0;tr<Jn.length;tr++){let nr=Jn[tr];const rr=Qn==null?nr.key:String(Qn)+String(nr.key!=null?nr.key:tr);nr.type===Fragment?(nr.patchFlag&128&&er++,Zn=Zn.concat(getTransitionRawChildren(nr.children,Xn,rr))):(Xn||nr.type!==Comment)&&Zn.push(rr!=null?cloneVNode(nr,{key:rr}):nr)}if(er>1)for(let tr=0;tr<Zn.length;tr++)Zn[tr].patchFlag=-2;return Zn}function defineComponent(Jn,Xn){return isFunction(Jn)?(()=>extend({name:Jn.name},Xn,{setup:Jn}))():Jn}const isAsyncWrapper=Jn=>!!Jn.type.__asyncLoader;function defineAsyncComponent(Jn){isFunction(Jn)&&(Jn={loader:Jn});const{loader:Xn,loadingComponent:Qn,errorComponent:Zn,delay:er=200,timeout:tr,suspensible:nr=!0,onError:rr}=Jn;let sr=null,or,ir=0;const ar=()=>(ir++,sr=null,lr()),lr=()=>{let cr;return sr||(cr=sr=Xn().catch(dr=>{if(dr=dr instanceof Error?dr:new Error(String(dr)),rr)return new Promise((hr,pr)=>{rr(dr,()=>hr(ar()),()=>pr(dr),ir+1)});throw dr}).then(dr=>cr!==sr&&sr?sr:(dr&&(dr.__esModule||dr[Symbol.toStringTag]==="Module")&&(dr=dr.default),or=dr,dr)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:lr,get __asyncResolved(){return or},setup(){const cr=currentInstance;if(or)return()=>createInnerComp(or,cr);const dr=ur=>{sr=null,handleError(ur,cr,13,!Zn)};if(nr&&cr.suspense||isInSSRComponentSetup)return lr().then(ur=>()=>createInnerComp(ur,cr)).catch(ur=>(dr(ur),()=>Zn?createVNode(Zn,{error:ur}):null));const hr=ref(!1),pr=ref(),fr=ref(!!er);return er&&setTimeout(()=>{fr.value=!1},er),tr!=null&&setTimeout(()=>{if(!hr.value&&!pr.value){const ur=new Error(`Async component timed out after ${tr}ms.`);dr(ur),pr.value=ur}},tr),lr().then(()=>{hr.value=!0,cr.parent&&isKeepAlive(cr.parent.vnode)&&queueJob(cr.parent.update)}).catch(ur=>{dr(ur),pr.value=ur}),()=>{if(hr.value&&or)return createInnerComp(or,cr);if(pr.value&&Zn)return createVNode(Zn,{error:pr.value});if(Qn&&!fr.value)return createVNode(Qn)}}})}function createInnerComp(Jn,Xn){const{ref:Qn,props:Zn,children:er,ce:tr}=Xn.vnode,nr=createVNode(Jn,Zn,er);return nr.ref=Qn,nr.ce=tr,delete Xn.vnode.ce,nr}const isKeepAlive=Jn=>Jn.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Jn,{slots:Xn}){const Qn=getCurrentInstance(),Zn=Qn.ctx;if(!Zn.renderer)return()=>{const ur=Xn.default&&Xn.default();return ur&&ur.length===1?ur[0]:ur};const er=new Map,tr=new Set;let nr=null;const rr=Qn.suspense,{renderer:{p:sr,m:or,um:ir,o:{createElement:ar}}}=Zn,lr=ar("div");Zn.activate=(ur,br,gr,mr,_r)=>{const wr=ur.component;or(ur,br,gr,0,rr),sr(wr.vnode,ur,br,gr,wr,rr,mr,ur.slotScopeIds,_r),queuePostRenderEffect(()=>{wr.isDeactivated=!1,wr.a&&invokeArrayFns(wr.a);const yr=ur.props&&ur.props.onVnodeMounted;yr&&invokeVNodeHook(yr,wr.parent,ur)},rr)},Zn.deactivate=ur=>{const br=ur.component;or(ur,lr,null,1,rr),queuePostRenderEffect(()=>{br.da&&invokeArrayFns(br.da);const gr=ur.props&&ur.props.onVnodeUnmounted;gr&&invokeVNodeHook(gr,br.parent,ur),br.isDeactivated=!0},rr)};function cr(ur){resetShapeFlag(ur),ir(ur,Qn,rr,!0)}function dr(ur){er.forEach((br,gr)=>{const mr=getComponentName(br.type);mr&&(!ur||!ur(mr))&&hr(gr)})}function hr(ur){const br=er.get(ur);!nr||!isSameVNodeType(br,nr)?cr(br):nr&&resetShapeFlag(nr),er.delete(ur),tr.delete(ur)}watch(()=>[Jn.include,Jn.exclude],([ur,br])=>{ur&&dr(gr=>matches(ur,gr)),br&&dr(gr=>!matches(br,gr))},{flush:"post",deep:!0});let pr=null;const fr=()=>{pr!=null&&er.set(pr,getInnerChild(Qn.subTree))};return onMounted(fr),onUpdated(fr),onBeforeUnmount(()=>{er.forEach(ur=>{const{subTree:br,suspense:gr}=Qn,mr=getInnerChild(br);if(ur.type===mr.type&&ur.key===mr.key){resetShapeFlag(mr);const _r=mr.component.da;_r&&queuePostRenderEffect(_r,gr);return}cr(ur)})}),()=>{if(pr=null,!Xn.default)return null;const ur=Xn.default(),br=ur[0];if(ur.length>1)return nr=null,ur;if(!isVNode(br)||!(br.shapeFlag&4)&&!(br.shapeFlag&128))return nr=null,br;let gr=getInnerChild(br);const mr=gr.type,_r=getComponentName(isAsyncWrapper(gr)?gr.type.__asyncResolved||{}:mr),{include:wr,exclude:yr,max:Cr}=Jn;if(wr&&(!_r||!matches(wr,_r))||yr&&_r&&matches(yr,_r))return nr=gr,br;const Pr=gr.key==null?mr:gr.key,Tr=er.get(Pr);return gr.el&&(gr=cloneVNode(gr),br.shapeFlag&128&&(br.ssContent=gr)),pr=Pr,Tr?(gr.el=Tr.el,gr.component=Tr.component,gr.transition&&setTransitionHooks(gr,gr.transition),gr.shapeFlag|=512,tr.delete(Pr),tr.add(Pr)):(tr.add(Pr),Cr&&tr.size>parseInt(Cr,10)&&hr(tr.values().next().value)),gr.shapeFlag|=256,nr=gr,isSuspense(br.type)?br:gr}}},KeepAlive=KeepAliveImpl;function matches(Jn,Xn){return isArray$1(Jn)?Jn.some(Qn=>matches(Qn,Xn)):isString(Jn)?Jn.split(",").includes(Xn):isRegExp(Jn)?Jn.test(Xn):!1}function onActivated(Jn,Xn){registerKeepAliveHook(Jn,"a",Xn)}function onDeactivated(Jn,Xn){registerKeepAliveHook(Jn,"da",Xn)}function registerKeepAliveHook(Jn,Xn,Qn=currentInstance){const Zn=Jn.__wdc||(Jn.__wdc=()=>{let er=Qn;for(;er;){if(er.isDeactivated)return;er=er.parent}return Jn()});if(injectHook(Xn,Zn,Qn),Qn){let er=Qn.parent;for(;er&&er.parent;)isKeepAlive(er.parent.vnode)&&injectToKeepAliveRoot(Zn,Xn,Qn,er),er=er.parent}}function injectToKeepAliveRoot(Jn,Xn,Qn,Zn){const er=injectHook(Xn,Jn,Zn,!0);onUnmounted(()=>{remove$1(Zn[Xn],er)},Qn)}function resetShapeFlag(Jn){Jn.shapeFlag&=-257,Jn.shapeFlag&=-513}function getInnerChild(Jn){return Jn.shapeFlag&128?Jn.ssContent:Jn}function injectHook(Jn,Xn,Qn=currentInstance,Zn=!1){if(Qn){const er=Qn[Jn]||(Qn[Jn]=[]),tr=Xn.__weh||(Xn.__weh=(...nr)=>{if(Qn.isUnmounted)return;pauseTracking(),setCurrentInstance(Qn);const rr=callWithAsyncErrorHandling(Xn,Qn,Jn,nr);return unsetCurrentInstance(),resetTracking(),rr});return Zn?er.unshift(tr):er.push(tr),tr}}const createHook=Jn=>(Xn,Qn=currentInstance)=>(!isInSSRComponentSetup||Jn==="sp")&&injectHook(Jn,(...Zn)=>Xn(...Zn),Qn),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Jn,Xn=currentInstance){injectHook("ec",Jn,Xn)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Jn,Xn){return resolveAsset(COMPONENTS,Jn,!0,Xn)||Jn}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Jn){return isString(Jn)?resolveAsset(COMPONENTS,Jn,!1)||Jn:Jn||NULL_DYNAMIC_COMPONENT}function resolveDirective(Jn){return resolveAsset(DIRECTIVES,Jn)}function resolveAsset(Jn,Xn,Qn=!0,Zn=!1){const er=currentRenderingInstance||currentInstance;if(er){const tr=er.type;if(Jn===COMPONENTS){const rr=getComponentName(tr,!1);if(rr&&(rr===Xn||rr===camelize(Xn)||rr===capitalize$1(camelize(Xn))))return tr}const nr=resolve(er[Jn]||tr[Jn],Xn)||resolve(er.appContext[Jn],Xn);return!nr&&Zn?tr:nr}}function resolve(Jn,Xn){return Jn&&(Jn[Xn]||Jn[camelize(Xn)]||Jn[capitalize$1(camelize(Xn))])}function renderList(Jn,Xn,Qn,Zn){let er;const tr=Qn&&Qn[Zn];if(isArray$1(Jn)||isString(Jn)){er=new Array(Jn.length);for(let nr=0,rr=Jn.length;nr<rr;nr++)er[nr]=Xn(Jn[nr],nr,void 0,tr&&tr[nr])}else if(typeof Jn=="number"){er=new Array(Jn);for(let nr=0;nr<Jn;nr++)er[nr]=Xn(nr+1,nr,void 0,tr&&tr[nr])}else if(isObject$3(Jn))if(Jn[Symbol.iterator])er=Array.from(Jn,(nr,rr)=>Xn(nr,rr,void 0,tr&&tr[rr]));else{const nr=Object.keys(Jn);er=new Array(nr.length);for(let rr=0,sr=nr.length;rr<sr;rr++){const or=nr[rr];er[rr]=Xn(Jn[or],or,rr,tr&&tr[rr])}}else er=[];return Qn&&(Qn[Zn]=er),er}function renderSlot(Jn,Xn,Qn={},Zn,er){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return Xn!=="default"&&(Qn.name=Xn),createVNode("slot",Qn,Zn&&Zn());let tr=Jn[Xn];tr&&tr._c&&(tr._d=!1),openBlock();const nr=tr&&ensureValidVNode(tr(Qn)),rr=createBlock(Fragment,{key:Qn.key||nr&&nr.key||`_${Xn}`},nr||(Zn?Zn():[]),nr&&Jn._===1?64:-2);return!er&&rr.scopeId&&(rr.slotScopeIds=[rr.scopeId+"-s"]),tr&&tr._c&&(tr._d=!0),rr}function ensureValidVNode(Jn){return Jn.some(Xn=>isVNode(Xn)?!(Xn.type===Comment||Xn.type===Fragment&&!ensureValidVNode(Xn.children)):!0)?Jn:null}const getPublicInstance=Jn=>Jn?isStatefulComponent(Jn)?getExposeProxy(Jn)||Jn.proxy:getPublicInstance(Jn.parent):null,publicPropertiesMap=extend(Object.create(null),{$:Jn=>Jn,$el:Jn=>Jn.vnode.el,$data:Jn=>Jn.data,$props:Jn=>Jn.props,$attrs:Jn=>Jn.attrs,$slots:Jn=>Jn.slots,$refs:Jn=>Jn.refs,$parent:Jn=>getPublicInstance(Jn.parent),$root:Jn=>getPublicInstance(Jn.root),$emit:Jn=>Jn.emit,$options:Jn=>resolveMergedOptions(Jn),$forceUpdate:Jn=>Jn.f||(Jn.f=()=>queueJob(Jn.update)),$nextTick:Jn=>Jn.n||(Jn.n=nextTick.bind(Jn.proxy)),$watch:Jn=>instanceWatch.bind(Jn)}),hasSetupBinding=(Jn,Xn)=>Jn!==EMPTY_OBJ&&!Jn.__isScriptSetup&&hasOwn(Jn,Xn),PublicInstanceProxyHandlers={get({_:Jn},Xn){const{ctx:Qn,setupState:Zn,data:er,props:tr,accessCache:nr,type:rr,appContext:sr}=Jn;let or;if(Xn[0]!=="$"){const cr=nr[Xn];if(cr!==void 0)switch(cr){case 1:return Zn[Xn];case 2:return er[Xn];case 4:return Qn[Xn];case 3:return tr[Xn]}else{if(hasSetupBinding(Zn,Xn))return nr[Xn]=1,Zn[Xn];if(er!==EMPTY_OBJ&&hasOwn(er,Xn))return nr[Xn]=2,er[Xn];if((or=Jn.propsOptions[0])&&hasOwn(or,Xn))return nr[Xn]=3,tr[Xn];if(Qn!==EMPTY_OBJ&&hasOwn(Qn,Xn))return nr[Xn]=4,Qn[Xn];shouldCacheAccess&&(nr[Xn]=0)}}const ir=publicPropertiesMap[Xn];let ar,lr;if(ir)return Xn==="$attrs"&&track(Jn,"get",Xn),ir(Jn);if((ar=rr.__cssModules)&&(ar=ar[Xn]))return ar;if(Qn!==EMPTY_OBJ&&hasOwn(Qn,Xn))return nr[Xn]=4,Qn[Xn];if(lr=sr.config.globalProperties,hasOwn(lr,Xn))return lr[Xn]},set({_:Jn},Xn,Qn){const{data:Zn,setupState:er,ctx:tr}=Jn;return hasSetupBinding(er,Xn)?(er[Xn]=Qn,!0):Zn!==EMPTY_OBJ&&hasOwn(Zn,Xn)?(Zn[Xn]=Qn,!0):hasOwn(Jn.props,Xn)||Xn[0]==="$"&&Xn.slice(1)in Jn?!1:(tr[Xn]=Qn,!0)},has({_:{data:Jn,setupState:Xn,accessCache:Qn,ctx:Zn,appContext:er,propsOptions:tr}},nr){let rr;return!!Qn[nr]||Jn!==EMPTY_OBJ&&hasOwn(Jn,nr)||hasSetupBinding(Xn,nr)||(rr=tr[0])&&hasOwn(rr,nr)||hasOwn(Zn,nr)||hasOwn(publicPropertiesMap,nr)||hasOwn(er.config.globalProperties,nr)},defineProperty(Jn,Xn,Qn){return Qn.get!=null?Jn._.accessCache[Xn]=0:hasOwn(Qn,"value")&&this.set(Jn,Xn,Qn.value,null),Reflect.defineProperty(Jn,Xn,Qn)}};function normalizePropsOrEmits(Jn){return isArray$1(Jn)?Jn.reduce((Xn,Qn)=>(Xn[Qn]=null,Xn),{}):Jn}let shouldCacheAccess=!0;function applyOptions(Jn){const Xn=resolveMergedOptions(Jn),Qn=Jn.proxy,Zn=Jn.ctx;shouldCacheAccess=!1,Xn.beforeCreate&&callHook$1(Xn.beforeCreate,Jn,"bc");const{data:er,computed:tr,methods:nr,watch:rr,provide:sr,inject:or,created:ir,beforeMount:ar,mounted:lr,beforeUpdate:cr,updated:dr,activated:hr,deactivated:pr,beforeDestroy:fr,beforeUnmount:ur,destroyed:br,unmounted:gr,render:mr,renderTracked:_r,renderTriggered:wr,errorCaptured:yr,serverPrefetch:Cr,expose:Pr,inheritAttrs:Tr,components:Rr,directives:Or,filters:$r}=Xn;if(or&&resolveInjections(or,Zn,null),nr)for(const Wr in nr){const Yr=nr[Wr];isFunction(Yr)&&(Zn[Wr]=Yr.bind(Qn))}if(er){const Wr=er.call(Qn,Qn);isObject$3(Wr)&&(Jn.data=reactive(Wr))}if(shouldCacheAccess=!0,tr)for(const Wr in tr){const Yr=tr[Wr],us=isFunction(Yr)?Yr.bind(Qn,Qn):isFunction(Yr.get)?Yr.get.bind(Qn,Qn):NOOP,gs=!isFunction(Yr)&&isFunction(Yr.set)?Yr.set.bind(Qn):NOOP,vs=computed({get:us,set:gs});Object.defineProperty(Zn,Wr,{enumerable:!0,configurable:!0,get:()=>vs.value,set:cs=>vs.value=cs})}if(rr)for(const Wr in rr)createWatcher(rr[Wr],Zn,Qn,Wr);if(sr){const Wr=isFunction(sr)?sr.call(Qn):sr;Reflect.ownKeys(Wr).forEach(Yr=>{provide(Yr,Wr[Yr])})}ir&&callHook$1(ir,Jn,"c");function Hr(Wr,Yr){isArray$1(Yr)?Yr.forEach(us=>Wr(us.bind(Qn))):Yr&&Wr(Yr.bind(Qn))}if(Hr(onBeforeMount,ar),Hr(onMounted,lr),Hr(onBeforeUpdate,cr),Hr(onUpdated,dr),Hr(onActivated,hr),Hr(onDeactivated,pr),Hr(onErrorCaptured,yr),Hr(onRenderTracked,_r),Hr(onRenderTriggered,wr),Hr(onBeforeUnmount,ur),Hr(onUnmounted,gr),Hr(onServerPrefetch,Cr),isArray$1(Pr))if(Pr.length){const Wr=Jn.exposed||(Jn.exposed={});Pr.forEach(Yr=>{Object.defineProperty(Wr,Yr,{get:()=>Qn[Yr],set:us=>Qn[Yr]=us})})}else Jn.exposed||(Jn.exposed={});mr&&Jn.render===NOOP&&(Jn.render=mr),Tr!=null&&(Jn.inheritAttrs=Tr),Rr&&(Jn.components=Rr),Or&&(Jn.directives=Or)}function resolveInjections(Jn,Xn,Qn=NOOP){isArray$1(Jn)&&(Jn=normalizeInject(Jn));for(const Zn in Jn){const er=Jn[Zn];let tr;isObject$3(er)?"default"in er?tr=inject(er.from||Zn,er.default,!0):tr=inject(er.from||Zn):tr=inject(er),isRef(tr)?Object.defineProperty(Xn,Zn,{enumerable:!0,configurable:!0,get:()=>tr.value,set:nr=>tr.value=nr}):Xn[Zn]=tr}}function callHook$1(Jn,Xn,Qn){callWithAsyncErrorHandling(isArray$1(Jn)?Jn.map(Zn=>Zn.bind(Xn.proxy)):Jn.bind(Xn.proxy),Xn,Qn)}function createWatcher(Jn,Xn,Qn,Zn){const er=Zn.includes(".")?createPathGetter(Qn,Zn):()=>Qn[Zn];if(isString(Jn)){const tr=Xn[Jn];isFunction(tr)&&watch(er,tr)}else if(isFunction(Jn))watch(er,Jn.bind(Qn));else if(isObject$3(Jn))if(isArray$1(Jn))Jn.forEach(tr=>createWatcher(tr,Xn,Qn,Zn));else{const tr=isFunction(Jn.handler)?Jn.handler.bind(Qn):Xn[Jn.handler];isFunction(tr)&&watch(er,tr,Jn)}}function resolveMergedOptions(Jn){const Xn=Jn.type,{mixins:Qn,extends:Zn}=Xn,{mixins:er,optionsCache:tr,config:{optionMergeStrategies:nr}}=Jn.appContext,rr=tr.get(Xn);let sr;return rr?sr=rr:!er.length&&!Qn&&!Zn?sr=Xn:(sr={},er.length&&er.forEach(or=>mergeOptions$1(sr,or,nr,!0)),mergeOptions$1(sr,Xn,nr)),isObject$3(Xn)&&tr.set(Xn,sr),sr}function mergeOptions$1(Jn,Xn,Qn,Zn=!1){const{mixins:er,extends:tr}=Xn;tr&&mergeOptions$1(Jn,tr,Qn,!0),er&&er.forEach(nr=>mergeOptions$1(Jn,nr,Qn,!0));for(const nr in Xn)if(!(Zn&&nr==="expose")){const rr=internalOptionMergeStrats[nr]||Qn&&Qn[nr];Jn[nr]=rr?rr(Jn[nr],Xn[nr]):Xn[nr]}return Jn}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Jn,Xn){return Xn?Jn?function(){return extend(isFunction(Jn)?Jn.call(this,this):Jn,isFunction(Xn)?Xn.call(this,this):Xn)}:Xn:Jn}function mergeInject(Jn,Xn){return mergeObjectOptions(normalizeInject(Jn),normalizeInject(Xn))}function normalizeInject(Jn){if(isArray$1(Jn)){const Xn={};for(let Qn=0;Qn<Jn.length;Qn++)Xn[Jn[Qn]]=Jn[Qn];return Xn}return Jn}function mergeAsArray(Jn,Xn){return Jn?[...new Set([].concat(Jn,Xn))]:Xn}function mergeObjectOptions(Jn,Xn){return Jn?extend(Object.create(null),Jn,Xn):Xn}function mergeEmitsOrPropsOptions(Jn,Xn){return Jn?isArray$1(Jn)&&isArray$1(Xn)?[...new Set([...Jn,...Xn])]:extend(Object.create(null),normalizePropsOrEmits(Jn),normalizePropsOrEmits(Xn??{})):Xn}function mergeWatchOptions(Jn,Xn){if(!Jn)return Xn;if(!Xn)return Jn;const Qn=extend(Object.create(null),Jn);for(const Zn in Xn)Qn[Zn]=mergeAsArray(Jn[Zn],Xn[Zn]);return Qn}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Jn,Xn){return function(Zn,er=null){isFunction(Zn)||(Zn=extend({},Zn)),er!=null&&!isObject$3(er)&&(er=null);const tr=createAppContext(),nr=new Set;let rr=!1;const sr=tr.app={_uid:uid$1++,_component:Zn,_props:er,_container:null,_context:tr,_instance:null,version,get config(){return tr.config},set config(or){},use(or,...ir){return nr.has(or)||(or&&isFunction(or.install)?(nr.add(or),or.install(sr,...ir)):isFunction(or)&&(nr.add(or),or(sr,...ir))),sr},mixin(or){return tr.mixins.includes(or)||tr.mixins.push(or),sr},component(or,ir){return ir?(tr.components[or]=ir,sr):tr.components[or]},directive(or,ir){return ir?(tr.directives[or]=ir,sr):tr.directives[or]},mount(or,ir,ar){if(!rr){const lr=createVNode(Zn,er);return lr.appContext=tr,ir&&Xn?Xn(lr,or):Jn(lr,or,ar),rr=!0,sr._container=or,or.__vue_app__=sr,getExposeProxy(lr.component)||lr.component.proxy}},unmount(){rr&&(Jn(null,sr._container),delete sr._container.__vue_app__)},provide(or,ir){return tr.provides[or]=ir,sr},runWithContext(or){currentApp=sr;try{return or()}finally{currentApp=null}}};return sr}}let currentApp=null;function provide(Jn,Xn){if(currentInstance){let Qn=currentInstance.provides;const Zn=currentInstance.parent&&currentInstance.parent.provides;Zn===Qn&&(Qn=currentInstance.provides=Object.create(Zn)),Qn[Jn]=Xn}}function inject(Jn,Xn,Qn=!1){const Zn=currentInstance||currentRenderingInstance;if(Zn||currentApp){const er=Zn?Zn.parent==null?Zn.vnode.appContext&&Zn.vnode.appContext.provides:Zn.parent.provides:currentApp._context.provides;if(er&&Jn in er)return er[Jn];if(arguments.length>1)return Qn&&isFunction(Xn)?Xn.call(Zn&&Zn.proxy):Xn}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(Jn,Xn,Qn,Zn=!1){const er={},tr={};def(tr,InternalObjectKey,1),Jn.propsDefaults=Object.create(null),setFullProps(Jn,Xn,er,tr);for(const nr in Jn.propsOptions[0])nr in er||(er[nr]=void 0);Qn?Jn.props=Zn?er:shallowReactive(er):Jn.type.props?Jn.props=er:Jn.props=tr,Jn.attrs=tr}function updateProps(Jn,Xn,Qn,Zn){const{props:er,attrs:tr,vnode:{patchFlag:nr}}=Jn,rr=toRaw(er),[sr]=Jn.propsOptions;let or=!1;if((Zn||nr>0)&&!(nr&16)){if(nr&8){const ir=Jn.vnode.dynamicProps;for(let ar=0;ar<ir.length;ar++){let lr=ir[ar];if(isEmitListener(Jn.emitsOptions,lr))continue;const cr=Xn[lr];if(sr)if(hasOwn(tr,lr))cr!==tr[lr]&&(tr[lr]=cr,or=!0);else{const dr=camelize(lr);er[dr]=resolvePropValue(sr,rr,dr,cr,Jn,!1)}else cr!==tr[lr]&&(tr[lr]=cr,or=!0)}}}else{setFullProps(Jn,Xn,er,tr)&&(or=!0);let ir;for(const ar in rr)(!Xn||!hasOwn(Xn,ar)&&((ir=hyphenate(ar))===ar||!hasOwn(Xn,ir)))&&(sr?Qn&&(Qn[ar]!==void 0||Qn[ir]!==void 0)&&(er[ar]=resolvePropValue(sr,rr,ar,void 0,Jn,!0)):delete er[ar]);if(tr!==rr)for(const ar in tr)(!Xn||!hasOwn(Xn,ar))&&(delete tr[ar],or=!0)}or&&trigger(Jn,"set","$attrs")}function setFullProps(Jn,Xn,Qn,Zn){const[er,tr]=Jn.propsOptions;let nr=!1,rr;if(Xn)for(let sr in Xn){if(isReservedProp(sr))continue;const or=Xn[sr];let ir;er&&hasOwn(er,ir=camelize(sr))?!tr||!tr.includes(ir)?Qn[ir]=or:(rr||(rr={}))[ir]=or:isEmitListener(Jn.emitsOptions,sr)||(!(sr in Zn)||or!==Zn[sr])&&(Zn[sr]=or,nr=!0)}if(tr){const sr=toRaw(Qn),or=rr||EMPTY_OBJ;for(let ir=0;ir<tr.length;ir++){const ar=tr[ir];Qn[ar]=resolvePropValue(er,sr,ar,or[ar],Jn,!hasOwn(or,ar))}}return nr}function resolvePropValue(Jn,Xn,Qn,Zn,er,tr){const nr=Jn[Qn];if(nr!=null){const rr=hasOwn(nr,"default");if(rr&&Zn===void 0){const sr=nr.default;if(nr.type!==Function&&!nr.skipFactory&&isFunction(sr)){const{propsDefaults:or}=er;Qn in or?Zn=or[Qn]:(setCurrentInstance(er),Zn=or[Qn]=sr.call(null,Xn),unsetCurrentInstance())}else Zn=sr}nr[0]&&(tr&&!rr?Zn=!1:nr[1]&&(Zn===""||Zn===hyphenate(Qn))&&(Zn=!0))}return Zn}function normalizePropsOptions(Jn,Xn,Qn=!1){const Zn=Xn.propsCache,er=Zn.get(Jn);if(er)return er;const tr=Jn.props,nr={},rr=[];let sr=!1;if(!isFunction(Jn)){const ir=ar=>{sr=!0;const[lr,cr]=normalizePropsOptions(ar,Xn,!0);extend(nr,lr),cr&&rr.push(...cr)};!Qn&&Xn.mixins.length&&Xn.mixins.forEach(ir),Jn.extends&&ir(Jn.extends),Jn.mixins&&Jn.mixins.forEach(ir)}if(!tr&&!sr)return isObject$3(Jn)&&Zn.set(Jn,EMPTY_ARR),EMPTY_ARR;if(isArray$1(tr))for(let ir=0;ir<tr.length;ir++){const ar=camelize(tr[ir]);validatePropName(ar)&&(nr[ar]=EMPTY_OBJ)}else if(tr)for(const ir in tr){const ar=camelize(ir);if(validatePropName(ar)){const lr=tr[ir],cr=nr[ar]=isArray$1(lr)||isFunction(lr)?{type:lr}:extend({},lr);if(cr){const dr=getTypeIndex(Boolean,cr.type),hr=getTypeIndex(String,cr.type);cr[0]=dr>-1,cr[1]=hr<0||dr<hr,(dr>-1||hasOwn(cr,"default"))&&rr.push(ar)}}}const or=[nr,rr];return isObject$3(Jn)&&Zn.set(Jn,or),or}function validatePropName(Jn){return Jn[0]!=="$"}function getType(Jn){const Xn=Jn&&Jn.toString().match(/^\s*(function|class) (\w+)/);return Xn?Xn[2]:Jn===null?"null":""}function isSameType(Jn,Xn){return getType(Jn)===getType(Xn)}function getTypeIndex(Jn,Xn){return isArray$1(Xn)?Xn.findIndex(Qn=>isSameType(Qn,Jn)):isFunction(Xn)&&isSameType(Xn,Jn)?0:-1}const isInternalKey=Jn=>Jn[0]==="_"||Jn==="$stable",normalizeSlotValue=Jn=>isArray$1(Jn)?Jn.map(normalizeVNode):[normalizeVNode(Jn)],normalizeSlot$1=(Jn,Xn,Qn)=>{if(Xn._n)return Xn;const Zn=withCtx((...er)=>normalizeSlotValue(Xn(...er)),Qn);return Zn._c=!1,Zn},normalizeObjectSlots=(Jn,Xn,Qn)=>{const Zn=Jn._ctx;for(const er in Jn){if(isInternalKey(er))continue;const tr=Jn[er];if(isFunction(tr))Xn[er]=normalizeSlot$1(er,tr,Zn);else if(tr!=null){const nr=normalizeSlotValue(tr);Xn[er]=()=>nr}}},normalizeVNodeSlots=(Jn,Xn)=>{const Qn=normalizeSlotValue(Xn);Jn.slots.default=()=>Qn},initSlots=(Jn,Xn)=>{if(Jn.vnode.shapeFlag&32){const Qn=Xn._;Qn?(Jn.slots=toRaw(Xn),def(Xn,"_",Qn)):normalizeObjectSlots(Xn,Jn.slots={})}else Jn.slots={},Xn&&normalizeVNodeSlots(Jn,Xn);def(Jn.slots,InternalObjectKey,1)},updateSlots=(Jn,Xn,Qn)=>{const{vnode:Zn,slots:er}=Jn;let tr=!0,nr=EMPTY_OBJ;if(Zn.shapeFlag&32){const rr=Xn._;rr?Qn&&rr===1?tr=!1:(extend(er,Xn),!Qn&&rr===1&&delete er._):(tr=!Xn.$stable,normalizeObjectSlots(Xn,er)),nr=Xn}else Xn&&(normalizeVNodeSlots(Jn,Xn),nr={default:1});if(tr)for(const rr in er)!isInternalKey(rr)&&!(rr in nr)&&delete er[rr]};function setRef(Jn,Xn,Qn,Zn,er=!1){if(isArray$1(Jn)){Jn.forEach((lr,cr)=>setRef(lr,Xn&&(isArray$1(Xn)?Xn[cr]:Xn),Qn,Zn,er));return}if(isAsyncWrapper(Zn)&&!er)return;const tr=Zn.shapeFlag&4?getExposeProxy(Zn.component)||Zn.component.proxy:Zn.el,nr=er?null:tr,{i:rr,r:sr}=Jn,or=Xn&&Xn.r,ir=rr.refs===EMPTY_OBJ?rr.refs={}:rr.refs,ar=rr.setupState;if(or!=null&&or!==sr&&(isString(or)?(ir[or]=null,hasOwn(ar,or)&&(ar[or]=null)):isRef(or)&&(or.value=null)),isFunction(sr))callWithErrorHandling(sr,rr,12,[nr,ir]);else{const lr=isString(sr),cr=isRef(sr);if(lr||cr){const dr=()=>{if(Jn.f){const hr=lr?hasOwn(ar,sr)?ar[sr]:ir[sr]:sr.value;er?isArray$1(hr)&&remove$1(hr,tr):isArray$1(hr)?hr.includes(tr)||hr.push(tr):lr?(ir[sr]=[tr],hasOwn(ar,sr)&&(ar[sr]=ir[sr])):(sr.value=[tr],Jn.k&&(ir[Jn.k]=sr.value))}else lr?(ir[sr]=nr,hasOwn(ar,sr)&&(ar[sr]=nr)):cr&&(sr.value=nr,Jn.k&&(ir[Jn.k]=nr))};nr?(dr.id=-1,queuePostRenderEffect(dr,Qn)):dr()}}}let hasMismatch=!1;const isSVGContainer=Jn=>/svg/.test(Jn.namespaceURI)&&Jn.tagName!=="foreignObject",isComment$1=Jn=>Jn.nodeType===8;function createHydrationFunctions(Jn){const{mt:Xn,p:Qn,o:{patchProp:Zn,createText:er,nextSibling:tr,parentNode:nr,remove:rr,insert:sr,createComment:or}}=Jn,ir=(fr,ur)=>{if(!ur.hasChildNodes()){Qn(null,fr,ur),flushPostFlushCbs(),ur._vnode=fr;return}hasMismatch=!1,ar(ur.firstChild,fr,null,null,null),flushPostFlushCbs(),ur._vnode=fr,hasMismatch&&console.error("Hydration completed but contains mismatches.")},ar=(fr,ur,br,gr,mr,_r=!1)=>{const wr=isComment$1(fr)&&fr.data==="[",yr=()=>hr(fr,ur,br,gr,mr,wr),{type:Cr,ref:Pr,shapeFlag:Tr,patchFlag:Rr}=ur;let Or=fr.nodeType;ur.el=fr,Rr===-2&&(_r=!1,ur.dynamicChildren=null);let $r=null;switch(Cr){case Text:Or!==3?ur.children===""?(sr(ur.el=er(""),nr(fr),fr),$r=fr):$r=yr():(fr.data!==ur.children&&(hasMismatch=!0,fr.data=ur.children),$r=tr(fr));break;case Comment:Or!==8||wr?$r=yr():$r=tr(fr);break;case Static:if(wr&&(fr=tr(fr),Or=fr.nodeType),Or===1||Or===3){$r=fr;const Gr=!ur.children.length;for(let Hr=0;Hr<ur.staticCount;Hr++)Gr&&(ur.children+=$r.nodeType===1?$r.outerHTML:$r.data),Hr===ur.staticCount-1&&(ur.anchor=$r),$r=tr($r);return wr?tr($r):$r}else yr();break;case Fragment:wr?$r=dr(fr,ur,br,gr,mr,_r):$r=yr();break;default:if(Tr&1)Or!==1||ur.type.toLowerCase()!==fr.tagName.toLowerCase()?$r=yr():$r=lr(fr,ur,br,gr,mr,_r);else if(Tr&6){ur.slotScopeIds=mr;const Gr=nr(fr);if(Xn(ur,Gr,null,br,gr,isSVGContainer(Gr),_r),$r=wr?pr(fr):tr(fr),$r&&isComment$1($r)&&$r.data==="teleport end"&&($r=tr($r)),isAsyncWrapper(ur)){let Hr;wr?(Hr=createVNode(Fragment),Hr.anchor=$r?$r.previousSibling:Gr.lastChild):Hr=fr.nodeType===3?createTextVNode(""):createVNode("div"),Hr.el=fr,ur.component.subTree=Hr}}else Tr&64?Or!==8?$r=yr():$r=ur.type.hydrate(fr,ur,br,gr,mr,_r,Jn,cr):Tr&128&&($r=ur.type.hydrate(fr,ur,br,gr,isSVGContainer(nr(fr)),mr,_r,Jn,ar))}return Pr!=null&&setRef(Pr,null,gr,ur),$r},lr=(fr,ur,br,gr,mr,_r)=>{_r=_r||!!ur.dynamicChildren;const{type:wr,props:yr,patchFlag:Cr,shapeFlag:Pr,dirs:Tr}=ur,Rr=wr==="input"&&Tr||wr==="option";if(Rr||Cr!==-1){if(Tr&&invokeDirectiveHook(ur,null,br,"created"),yr)if(Rr||!_r||Cr&48)for(const $r in yr)(Rr&&$r.endsWith("value")||isOn($r)&&!isReservedProp($r))&&Zn(fr,$r,null,yr[$r],!1,void 0,br);else yr.onClick&&Zn(fr,"onClick",null,yr.onClick,!1,void 0,br);let Or;if((Or=yr&&yr.onVnodeBeforeMount)&&invokeVNodeHook(Or,br,ur),Tr&&invokeDirectiveHook(ur,null,br,"beforeMount"),((Or=yr&&yr.onVnodeMounted)||Tr)&&queueEffectWithSuspense(()=>{Or&&invokeVNodeHook(Or,br,ur),Tr&&invokeDirectiveHook(ur,null,br,"mounted")},gr),Pr&16&&!(yr&&(yr.innerHTML||yr.textContent))){let $r=cr(fr.firstChild,ur,fr,br,gr,mr,_r);for(;$r;){hasMismatch=!0;const Gr=$r;$r=$r.nextSibling,rr(Gr)}}else Pr&8&&fr.textContent!==ur.children&&(hasMismatch=!0,fr.textContent=ur.children)}return fr.nextSibling},cr=(fr,ur,br,gr,mr,_r,wr)=>{wr=wr||!!ur.dynamicChildren;const yr=ur.children,Cr=yr.length;for(let Pr=0;Pr<Cr;Pr++){const Tr=wr?yr[Pr]:yr[Pr]=normalizeVNode(yr[Pr]);if(fr)fr=ar(fr,Tr,gr,mr,_r,wr);else{if(Tr.type===Text&&!Tr.children)continue;hasMismatch=!0,Qn(null,Tr,br,null,gr,mr,isSVGContainer(br),_r)}}return fr},dr=(fr,ur,br,gr,mr,_r)=>{const{slotScopeIds:wr}=ur;wr&&(mr=mr?mr.concat(wr):wr);const yr=nr(fr),Cr=cr(tr(fr),ur,yr,br,gr,mr,_r);return Cr&&isComment$1(Cr)&&Cr.data==="]"?tr(ur.anchor=Cr):(hasMismatch=!0,sr(ur.anchor=or("]"),yr,Cr),Cr)},hr=(fr,ur,br,gr,mr,_r)=>{if(hasMismatch=!0,ur.el=null,_r){const Cr=pr(fr);for(;;){const Pr=tr(fr);if(Pr&&Pr!==Cr)rr(Pr);else break}}const wr=tr(fr),yr=nr(fr);return rr(fr),Qn(null,ur,yr,wr,br,gr,isSVGContainer(yr),mr),wr},pr=fr=>{let ur=0;for(;fr;)if(fr=tr(fr),fr&&isComment$1(fr)&&(fr.data==="["&&ur++,fr.data==="]")){if(ur===0)return tr(fr);ur--}return fr};return[ir,ar]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Jn){return baseCreateRenderer(Jn)}function createHydrationRenderer(Jn){return baseCreateRenderer(Jn,createHydrationFunctions)}function baseCreateRenderer(Jn,Xn){const Qn=getGlobalThis();Qn.__VUE__=!0;const{insert:Zn,remove:er,patchProp:tr,createElement:nr,createText:rr,createComment:sr,setText:or,setElementText:ir,parentNode:ar,nextSibling:lr,setScopeId:cr=NOOP,insertStaticContent:dr}=Jn,hr=(Ar,Er,xr,Nr=null,Br=null,Mr=null,Kr=!1,Ur=null,Vr=!!Er.dynamicChildren)=>{if(Ar===Er)return;Ar&&!isSameVNodeType(Ar,Er)&&(Nr=Lr(Ar),cs(Ar,Br,Mr,!0),Ar=null),Er.patchFlag===-2&&(Vr=!1,Er.dynamicChildren=null);const{type:Fr,ref:Xr,shapeFlag:zr}=Er;switch(Fr){case Text:pr(Ar,Er,xr,Nr);break;case Comment:fr(Ar,Er,xr,Nr);break;case Static:Ar==null&&ur(Er,xr,Nr,Kr);break;case Fragment:Rr(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr);break;default:zr&1?mr(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr):zr&6?Or(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr):(zr&64||zr&128)&&Fr.process(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr,Dr)}Xr!=null&&Br&&setRef(Xr,Ar&&Ar.ref,Mr,Er||Ar,!Er)},pr=(Ar,Er,xr,Nr)=>{if(Ar==null)Zn(Er.el=rr(Er.children),xr,Nr);else{const Br=Er.el=Ar.el;Er.children!==Ar.children&&or(Br,Er.children)}},fr=(Ar,Er,xr,Nr)=>{Ar==null?Zn(Er.el=sr(Er.children||""),xr,Nr):Er.el=Ar.el},ur=(Ar,Er,xr,Nr)=>{[Ar.el,Ar.anchor]=dr(Ar.children,Er,xr,Nr,Ar.el,Ar.anchor)},br=({el:Ar,anchor:Er},xr,Nr)=>{let Br;for(;Ar&&Ar!==Er;)Br=lr(Ar),Zn(Ar,xr,Nr),Ar=Br;Zn(Er,xr,Nr)},gr=({el:Ar,anchor:Er})=>{let xr;for(;Ar&&Ar!==Er;)xr=lr(Ar),er(Ar),Ar=xr;er(Er)},mr=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr)=>{Kr=Kr||Er.type==="svg",Ar==null?_r(Er,xr,Nr,Br,Mr,Kr,Ur,Vr):Cr(Ar,Er,Br,Mr,Kr,Ur,Vr)},_r=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur)=>{let Vr,Fr;const{type:Xr,props:zr,shapeFlag:Qr,transition:Zr,dirs:ts}=Ar;if(Vr=Ar.el=nr(Ar.type,Mr,zr&&zr.is,zr),Qr&8?ir(Vr,Ar.children):Qr&16&&yr(Ar.children,Vr,null,Nr,Br,Mr&&Xr!=="foreignObject",Kr,Ur),ts&&invokeDirectiveHook(Ar,null,Nr,"created"),wr(Vr,Ar,Ar.scopeId,Kr,Nr),zr){for(const is in zr)is!=="value"&&!isReservedProp(is)&&tr(Vr,is,null,zr[is],Mr,Ar.children,Nr,Br,ns);"value"in zr&&tr(Vr,"value",null,zr.value),(Fr=zr.onVnodeBeforeMount)&&invokeVNodeHook(Fr,Nr,Ar)}ts&&invokeDirectiveHook(Ar,null,Nr,"beforeMount");const as=(!Br||Br&&!Br.pendingBranch)&&Zr&&!Zr.persisted;as&&Zr.beforeEnter(Vr),Zn(Vr,Er,xr),((Fr=zr&&zr.onVnodeMounted)||as||ts)&&queuePostRenderEffect(()=>{Fr&&invokeVNodeHook(Fr,Nr,Ar),as&&Zr.enter(Vr),ts&&invokeDirectiveHook(Ar,null,Nr,"mounted")},Br)},wr=(Ar,Er,xr,Nr,Br)=>{if(xr&&cr(Ar,xr),Nr)for(let Mr=0;Mr<Nr.length;Mr++)cr(Ar,Nr[Mr]);if(Br){let Mr=Br.subTree;if(Er===Mr){const Kr=Br.vnode;wr(Ar,Kr,Kr.scopeId,Kr.slotScopeIds,Br.parent)}}},yr=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr=0)=>{for(let Fr=Vr;Fr<Ar.length;Fr++){const Xr=Ar[Fr]=Ur?cloneIfMounted(Ar[Fr]):normalizeVNode(Ar[Fr]);hr(null,Xr,Er,xr,Nr,Br,Mr,Kr,Ur)}},Cr=(Ar,Er,xr,Nr,Br,Mr,Kr)=>{const Ur=Er.el=Ar.el;let{patchFlag:Vr,dynamicChildren:Fr,dirs:Xr}=Er;Vr|=Ar.patchFlag&16;const zr=Ar.props||EMPTY_OBJ,Qr=Er.props||EMPTY_OBJ;let Zr;xr&&toggleRecurse(xr,!1),(Zr=Qr.onVnodeBeforeUpdate)&&invokeVNodeHook(Zr,xr,Er,Ar),Xr&&invokeDirectiveHook(Er,Ar,xr,"beforeUpdate"),xr&&toggleRecurse(xr,!0);const ts=Br&&Er.type!=="foreignObject";if(Fr?Pr(Ar.dynamicChildren,Fr,Ur,xr,Nr,ts,Mr):Kr||Yr(Ar,Er,Ur,null,xr,Nr,ts,Mr,!1),Vr>0){if(Vr&16)Tr(Ur,Er,zr,Qr,xr,Nr,Br);else if(Vr&2&&zr.class!==Qr.class&&tr(Ur,"class",null,Qr.class,Br),Vr&4&&tr(Ur,"style",zr.style,Qr.style,Br),Vr&8){const as=Er.dynamicProps;for(let is=0;is<as.length;is++){const hs=as[is],_s=zr[hs],ws=Qr[hs];(ws!==_s||hs==="value")&&tr(Ur,hs,_s,ws,Br,Ar.children,xr,Nr,ns)}}Vr&1&&Ar.children!==Er.children&&ir(Ur,Er.children)}else!Kr&&Fr==null&&Tr(Ur,Er,zr,Qr,xr,Nr,Br);((Zr=Qr.onVnodeUpdated)||Xr)&&queuePostRenderEffect(()=>{Zr&&invokeVNodeHook(Zr,xr,Er,Ar),Xr&&invokeDirectiveHook(Er,Ar,xr,"updated")},Nr)},Pr=(Ar,Er,xr,Nr,Br,Mr,Kr)=>{for(let Ur=0;Ur<Er.length;Ur++){const Vr=Ar[Ur],Fr=Er[Ur],Xr=Vr.el&&(Vr.type===Fragment||!isSameVNodeType(Vr,Fr)||Vr.shapeFlag&70)?ar(Vr.el):xr;hr(Vr,Fr,Xr,null,Nr,Br,Mr,Kr,!0)}},Tr=(Ar,Er,xr,Nr,Br,Mr,Kr)=>{if(xr!==Nr){if(xr!==EMPTY_OBJ)for(const Ur in xr)!isReservedProp(Ur)&&!(Ur in Nr)&&tr(Ar,Ur,xr[Ur],null,Kr,Er.children,Br,Mr,ns);for(const Ur in Nr){if(isReservedProp(Ur))continue;const Vr=Nr[Ur],Fr=xr[Ur];Vr!==Fr&&Ur!=="value"&&tr(Ar,Ur,Fr,Vr,Kr,Er.children,Br,Mr,ns)}"value"in Nr&&tr(Ar,"value",xr.value,Nr.value)}},Rr=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr)=>{const Fr=Er.el=Ar?Ar.el:rr(""),Xr=Er.anchor=Ar?Ar.anchor:rr("");let{patchFlag:zr,dynamicChildren:Qr,slotScopeIds:Zr}=Er;Zr&&(Ur=Ur?Ur.concat(Zr):Zr),Ar==null?(Zn(Fr,xr,Nr),Zn(Xr,xr,Nr),yr(Er.children,xr,Xr,Br,Mr,Kr,Ur,Vr)):zr>0&&zr&64&&Qr&&Ar.dynamicChildren?(Pr(Ar.dynamicChildren,Qr,xr,Br,Mr,Kr,Ur),(Er.key!=null||Br&&Er===Br.subTree)&&traverseStaticChildren(Ar,Er,!0)):Yr(Ar,Er,xr,Xr,Br,Mr,Kr,Ur,Vr)},Or=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr)=>{Er.slotScopeIds=Ur,Ar==null?Er.shapeFlag&512?Br.ctx.activate(Er,xr,Nr,Kr,Vr):$r(Er,xr,Nr,Br,Mr,Kr,Vr):Gr(Ar,Er,Vr)},$r=(Ar,Er,xr,Nr,Br,Mr,Kr)=>{const Ur=Ar.component=createComponentInstance(Ar,Nr,Br);if(isKeepAlive(Ar)&&(Ur.ctx.renderer=Dr),setupComponent(Ur),Ur.asyncDep){if(Br&&Br.registerDep(Ur,Hr),!Ar.el){const Vr=Ur.subTree=createVNode(Comment);fr(null,Vr,Er,xr)}return}Hr(Ur,Ar,Er,xr,Br,Mr,Kr)},Gr=(Ar,Er,xr)=>{const Nr=Er.component=Ar.component;if(shouldUpdateComponent(Ar,Er,xr))if(Nr.asyncDep&&!Nr.asyncResolved){Wr(Nr,Er,xr);return}else Nr.next=Er,invalidateJob(Nr.update),Nr.update();else Er.el=Ar.el,Nr.vnode=Er},Hr=(Ar,Er,xr,Nr,Br,Mr,Kr)=>{const Ur=()=>{if(Ar.isMounted){let{next:Xr,bu:zr,u:Qr,parent:Zr,vnode:ts}=Ar,as=Xr,is;toggleRecurse(Ar,!1),Xr?(Xr.el=ts.el,Wr(Ar,Xr,Kr)):Xr=ts,zr&&invokeArrayFns(zr),(is=Xr.props&&Xr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(is,Zr,Xr,ts),toggleRecurse(Ar,!0);const hs=renderComponentRoot(Ar),_s=Ar.subTree;Ar.subTree=hs,hr(_s,hs,ar(_s.el),Lr(_s),Ar,Br,Mr),Xr.el=hs.el,as===null&&updateHOCHostEl(Ar,hs.el),Qr&&queuePostRenderEffect(Qr,Br),(is=Xr.props&&Xr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(is,Zr,Xr,ts),Br)}else{let Xr;const{el:zr,props:Qr}=Er,{bm:Zr,m:ts,parent:as}=Ar,is=isAsyncWrapper(Er);if(toggleRecurse(Ar,!1),Zr&&invokeArrayFns(Zr),!is&&(Xr=Qr&&Qr.onVnodeBeforeMount)&&invokeVNodeHook(Xr,as,Er),toggleRecurse(Ar,!0),zr&&rs){const hs=()=>{Ar.subTree=renderComponentRoot(Ar),rs(zr,Ar.subTree,Ar,Br,null)};is?Er.type.__asyncLoader().then(()=>!Ar.isUnmounted&&hs()):hs()}else{const hs=Ar.subTree=renderComponentRoot(Ar);hr(null,hs,xr,Nr,Ar,Br,Mr),Er.el=hs.el}if(ts&&queuePostRenderEffect(ts,Br),!is&&(Xr=Qr&&Qr.onVnodeMounted)){const hs=Er;queuePostRenderEffect(()=>invokeVNodeHook(Xr,as,hs),Br)}(Er.shapeFlag&256||as&&isAsyncWrapper(as.vnode)&&as.vnode.shapeFlag&256)&&Ar.a&&queuePostRenderEffect(Ar.a,Br),Ar.isMounted=!0,Er=xr=Nr=null}},Vr=Ar.effect=new ReactiveEffect(Ur,()=>queueJob(Fr),Ar.scope),Fr=Ar.update=()=>Vr.run();Fr.id=Ar.uid,toggleRecurse(Ar,!0),Fr()},Wr=(Ar,Er,xr)=>{Er.component=Ar;const Nr=Ar.vnode.props;Ar.vnode=Er,Ar.next=null,updateProps(Ar,Er.props,Nr,xr),updateSlots(Ar,Er.children,xr),pauseTracking(),flushPreFlushCbs(),resetTracking()},Yr=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr=!1)=>{const Fr=Ar&&Ar.children,Xr=Ar?Ar.shapeFlag:0,zr=Er.children,{patchFlag:Qr,shapeFlag:Zr}=Er;if(Qr>0){if(Qr&128){gs(Fr,zr,xr,Nr,Br,Mr,Kr,Ur,Vr);return}else if(Qr&256){us(Fr,zr,xr,Nr,Br,Mr,Kr,Ur,Vr);return}}Zr&8?(Xr&16&&ns(Fr,Br,Mr),zr!==Fr&&ir(xr,zr)):Xr&16?Zr&16?gs(Fr,zr,xr,Nr,Br,Mr,Kr,Ur,Vr):ns(Fr,Br,Mr,!0):(Xr&8&&ir(xr,""),Zr&16&&yr(zr,xr,Nr,Br,Mr,Kr,Ur,Vr))},us=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr)=>{Ar=Ar||EMPTY_ARR,Er=Er||EMPTY_ARR;const Fr=Ar.length,Xr=Er.length,zr=Math.min(Fr,Xr);let Qr;for(Qr=0;Qr<zr;Qr++){const Zr=Er[Qr]=Vr?cloneIfMounted(Er[Qr]):normalizeVNode(Er[Qr]);hr(Ar[Qr],Zr,xr,null,Br,Mr,Kr,Ur,Vr)}Fr>Xr?ns(Ar,Br,Mr,!0,!1,zr):yr(Er,xr,Nr,Br,Mr,Kr,Ur,Vr,zr)},gs=(Ar,Er,xr,Nr,Br,Mr,Kr,Ur,Vr)=>{let Fr=0;const Xr=Er.length;let zr=Ar.length-1,Qr=Xr-1;for(;Fr<=zr&&Fr<=Qr;){const Zr=Ar[Fr],ts=Er[Fr]=Vr?cloneIfMounted(Er[Fr]):normalizeVNode(Er[Fr]);if(isSameVNodeType(Zr,ts))hr(Zr,ts,xr,null,Br,Mr,Kr,Ur,Vr);else break;Fr++}for(;Fr<=zr&&Fr<=Qr;){const Zr=Ar[zr],ts=Er[Qr]=Vr?cloneIfMounted(Er[Qr]):normalizeVNode(Er[Qr]);if(isSameVNodeType(Zr,ts))hr(Zr,ts,xr,null,Br,Mr,Kr,Ur,Vr);else break;zr--,Qr--}if(Fr>zr){if(Fr<=Qr){const Zr=Qr+1,ts=Zr<Xr?Er[Zr].el:Nr;for(;Fr<=Qr;)hr(null,Er[Fr]=Vr?cloneIfMounted(Er[Fr]):normalizeVNode(Er[Fr]),xr,ts,Br,Mr,Kr,Ur,Vr),Fr++}}else if(Fr>Qr)for(;Fr<=zr;)cs(Ar[Fr],Br,Mr,!0),Fr++;else{const Zr=Fr,ts=Fr,as=new Map;for(Fr=ts;Fr<=Qr;Fr++){const bs=Er[Fr]=Vr?cloneIfMounted(Er[Fr]):normalizeVNode(Er[Fr]);bs.key!=null&&as.set(bs.key,Fr)}let is,hs=0;const _s=Qr-ts+1;let ws=!1,Ps=0;const ks=new Array(_s);for(Fr=0;Fr<_s;Fr++)ks[Fr]=0;for(Fr=Zr;Fr<=zr;Fr++){const bs=Ar[Fr];if(hs>=_s){cs(bs,Br,Mr,!0);continue}let ys;if(bs.key!=null)ys=as.get(bs.key);else for(is=ts;is<=Qr;is++)if(ks[is-ts]===0&&isSameVNodeType(bs,Er[is])){ys=is;break}ys===void 0?cs(bs,Br,Mr,!0):(ks[ys-ts]=Fr+1,ys>=Ps?Ps=ys:ws=!0,hr(bs,Er[ys],xr,null,Br,Mr,Kr,Ur,Vr),hs++)}const Ls=ws?getSequence(ks):EMPTY_ARR;for(is=Ls.length-1,Fr=_s-1;Fr>=0;Fr--){const bs=ts+Fr,ys=Er[bs],xs=bs+1<Xr?Er[bs+1].el:Nr;ks[Fr]===0?hr(null,ys,xr,xs,Br,Mr,Kr,Ur,Vr):ws&&(is<0||Fr!==Ls[is]?vs(ys,xr,xs,2):is--)}}},vs=(Ar,Er,xr,Nr,Br=null)=>{const{el:Mr,type:Kr,transition:Ur,children:Vr,shapeFlag:Fr}=Ar;if(Fr&6){vs(Ar.component.subTree,Er,xr,Nr);return}if(Fr&128){Ar.suspense.move(Er,xr,Nr);return}if(Fr&64){Kr.move(Ar,Er,xr,Dr);return}if(Kr===Fragment){Zn(Mr,Er,xr);for(let zr=0;zr<Vr.length;zr++)vs(Vr[zr],Er,xr,Nr);Zn(Ar.anchor,Er,xr);return}if(Kr===Static){br(Ar,Er,xr);return}if(Nr!==2&&Fr&1&&Ur)if(Nr===0)Ur.beforeEnter(Mr),Zn(Mr,Er,xr),queuePostRenderEffect(()=>Ur.enter(Mr),Br);else{const{leave:zr,delayLeave:Qr,afterLeave:Zr}=Ur,ts=()=>Zn(Mr,Er,xr),as=()=>{zr(Mr,()=>{ts(),Zr&&Zr()})};Qr?Qr(Mr,ts,as):as()}else Zn(Mr,Er,xr)},cs=(Ar,Er,xr,Nr=!1,Br=!1)=>{const{type:Mr,props:Kr,ref:Ur,children:Vr,dynamicChildren:Fr,shapeFlag:Xr,patchFlag:zr,dirs:Qr}=Ar;if(Ur!=null&&setRef(Ur,null,xr,Ar,!0),Xr&256){Er.ctx.deactivate(Ar);return}const Zr=Xr&1&&Qr,ts=!isAsyncWrapper(Ar);let as;if(ts&&(as=Kr&&Kr.onVnodeBeforeUnmount)&&invokeVNodeHook(as,Er,Ar),Xr&6)ms(Ar.component,xr,Nr);else{if(Xr&128){Ar.suspense.unmount(xr,Nr);return}Zr&&invokeDirectiveHook(Ar,null,Er,"beforeUnmount"),Xr&64?Ar.type.remove(Ar,Er,xr,Br,Dr,Nr):Fr&&(Mr!==Fragment||zr>0&&zr&64)?ns(Fr,Er,xr,!1,!0):(Mr===Fragment&&zr&384||!Br&&Xr&16)&&ns(Vr,Er,xr),Nr&&es(Ar)}(ts&&(as=Kr&&Kr.onVnodeUnmounted)||Zr)&&queuePostRenderEffect(()=>{as&&invokeVNodeHook(as,Er,Ar),Zr&&invokeDirectiveHook(Ar,null,Er,"unmounted")},xr)},es=Ar=>{const{type:Er,el:xr,anchor:Nr,transition:Br}=Ar;if(Er===Fragment){ps(xr,Nr);return}if(Er===Static){gr(Ar);return}const Mr=()=>{er(xr),Br&&!Br.persisted&&Br.afterLeave&&Br.afterLeave()};if(Ar.shapeFlag&1&&Br&&!Br.persisted){const{leave:Kr,delayLeave:Ur}=Br,Vr=()=>Kr(xr,Mr);Ur?Ur(Ar.el,Mr,Vr):Vr()}else Mr()},ps=(Ar,Er)=>{let xr;for(;Ar!==Er;)xr=lr(Ar),er(Ar),Ar=xr;er(Er)},ms=(Ar,Er,xr)=>{const{bum:Nr,scope:Br,update:Mr,subTree:Kr,um:Ur}=Ar;Nr&&invokeArrayFns(Nr),Br.stop(),Mr&&(Mr.active=!1,cs(Kr,Ar,Er,xr)),Ur&&queuePostRenderEffect(Ur,Er),queuePostRenderEffect(()=>{Ar.isUnmounted=!0},Er),Er&&Er.pendingBranch&&!Er.isUnmounted&&Ar.asyncDep&&!Ar.asyncResolved&&Ar.suspenseId===Er.pendingId&&(Er.deps--,Er.deps===0&&Er.resolve())},ns=(Ar,Er,xr,Nr=!1,Br=!1,Mr=0)=>{for(let Kr=Mr;Kr<Ar.length;Kr++)cs(Ar[Kr],Er,xr,Nr,Br)},Lr=Ar=>Ar.shapeFlag&6?Lr(Ar.component.subTree):Ar.shapeFlag&128?Ar.suspense.next():lr(Ar.anchor||Ar.el),jr=(Ar,Er,xr)=>{Ar==null?Er._vnode&&cs(Er._vnode,null,null,!0):hr(Er._vnode||null,Ar,Er,null,null,null,xr),flushPreFlushCbs(),flushPostFlushCbs(),Er._vnode=Ar},Dr={p:hr,um:cs,m:vs,r:es,mt:$r,mc:yr,pc:Yr,pbc:Pr,n:Lr,o:Jn};let Jr,rs;return Xn&&([Jr,rs]=Xn(Dr)),{render:jr,hydrate:Jr,createApp:createAppAPI(jr,Jr)}}function toggleRecurse({effect:Jn,update:Xn},Qn){Jn.allowRecurse=Xn.allowRecurse=Qn}function traverseStaticChildren(Jn,Xn,Qn=!1){const Zn=Jn.children,er=Xn.children;if(isArray$1(Zn)&&isArray$1(er))for(let tr=0;tr<Zn.length;tr++){const nr=Zn[tr];let rr=er[tr];rr.shapeFlag&1&&!rr.dynamicChildren&&((rr.patchFlag<=0||rr.patchFlag===32)&&(rr=er[tr]=cloneIfMounted(er[tr]),rr.el=nr.el),Qn||traverseStaticChildren(nr,rr)),rr.type===Text&&(rr.el=nr.el)}}function getSequence(Jn){const Xn=Jn.slice(),Qn=[0];let Zn,er,tr,nr,rr;const sr=Jn.length;for(Zn=0;Zn<sr;Zn++){const or=Jn[Zn];if(or!==0){if(er=Qn[Qn.length-1],Jn[er]<or){Xn[Zn]=er,Qn.push(Zn);continue}for(tr=0,nr=Qn.length-1;tr<nr;)rr=tr+nr>>1,Jn[Qn[rr]]<or?tr=rr+1:nr=rr;or<Jn[Qn[tr]]&&(tr>0&&(Xn[Zn]=Qn[tr-1]),Qn[tr]=Zn)}}for(tr=Qn.length,nr=Qn[tr-1];tr-- >0;)Qn[tr]=nr,nr=Xn[nr];return Qn}const isTeleport=Jn=>Jn.__isTeleport,isTeleportDisabled=Jn=>Jn&&(Jn.disabled||Jn.disabled===""),isTargetSVG=Jn=>typeof SVGElement<"u"&&Jn instanceof SVGElement,resolveTarget=(Jn,Xn)=>{const Qn=Jn&&Jn.to;return isString(Qn)?Xn?Xn(Qn):null:Qn},TeleportImpl={__isTeleport:!0,process(Jn,Xn,Qn,Zn,er,tr,nr,rr,sr,or){const{mc:ir,pc:ar,pbc:lr,o:{insert:cr,querySelector:dr,createText:hr,createComment:pr}}=or,fr=isTeleportDisabled(Xn.props);let{shapeFlag:ur,children:br,dynamicChildren:gr}=Xn;if(Jn==null){const mr=Xn.el=hr(""),_r=Xn.anchor=hr("");cr(mr,Qn,Zn),cr(_r,Qn,Zn);const wr=Xn.target=resolveTarget(Xn.props,dr),yr=Xn.targetAnchor=hr("");wr&&(cr(yr,wr),nr=nr||isTargetSVG(wr));const Cr=(Pr,Tr)=>{ur&16&&ir(br,Pr,Tr,er,tr,nr,rr,sr)};fr?Cr(Qn,_r):wr&&Cr(wr,yr)}else{Xn.el=Jn.el;const mr=Xn.anchor=Jn.anchor,_r=Xn.target=Jn.target,wr=Xn.targetAnchor=Jn.targetAnchor,yr=isTeleportDisabled(Jn.props),Cr=yr?Qn:_r,Pr=yr?mr:wr;if(nr=nr||isTargetSVG(_r),gr?(lr(Jn.dynamicChildren,gr,Cr,er,tr,nr,rr),traverseStaticChildren(Jn,Xn,!0)):sr||ar(Jn,Xn,Cr,Pr,er,tr,nr,rr,!1),fr)yr||moveTeleport(Xn,Qn,mr,or,1);else if((Xn.props&&Xn.props.to)!==(Jn.props&&Jn.props.to)){const Tr=Xn.target=resolveTarget(Xn.props,dr);Tr&&moveTeleport(Xn,Tr,null,or,0)}else yr&&moveTeleport(Xn,_r,wr,or,1)}updateCssVars$1(Xn)},remove(Jn,Xn,Qn,Zn,{um:er,o:{remove:tr}},nr){const{shapeFlag:rr,children:sr,anchor:or,targetAnchor:ir,target:ar,props:lr}=Jn;if(ar&&tr(ir),(nr||!isTeleportDisabled(lr))&&(tr(or),rr&16))for(let cr=0;cr<sr.length;cr++){const dr=sr[cr];er(dr,Xn,Qn,!0,!!dr.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Jn,Xn,Qn,{o:{insert:Zn},m:er},tr=2){tr===0&&Zn(Jn.targetAnchor,Xn,Qn);const{el:nr,anchor:rr,shapeFlag:sr,children:or,props:ir}=Jn,ar=tr===2;if(ar&&Zn(nr,Xn,Qn),(!ar||isTeleportDisabled(ir))&&sr&16)for(let lr=0;lr<or.length;lr++)er(or[lr],Xn,Qn,2);ar&&Zn(rr,Xn,Qn)}function hydrateTeleport(Jn,Xn,Qn,Zn,er,tr,{o:{nextSibling:nr,parentNode:rr,querySelector:sr}},or){const ir=Xn.target=resolveTarget(Xn.props,sr);if(ir){const ar=ir._lpa||ir.firstChild;if(Xn.shapeFlag&16)if(isTeleportDisabled(Xn.props))Xn.anchor=or(nr(Jn),Xn,rr(Jn),Qn,Zn,er,tr),Xn.targetAnchor=ar;else{Xn.anchor=nr(Jn);let lr=ar;for(;lr;)if(lr=nr(lr),lr&&lr.nodeType===8&&lr.data==="teleport anchor"){Xn.targetAnchor=lr,ir._lpa=Xn.targetAnchor&&nr(Xn.targetAnchor);break}or(ar,Xn,ir,Qn,Zn,er,tr)}updateCssVars$1(Xn)}return Xn.anchor&&nr(Xn.anchor)}const Teleport=TeleportImpl;function updateCssVars$1(Jn){const Xn=Jn.ctx;if(Xn&&Xn.ut){let Qn=Jn.children[0].el;for(;Qn!==Jn.targetAnchor;)Qn.nodeType===1&&Qn.setAttribute("data-v-owner",Xn.uid),Qn=Qn.nextSibling;Xn.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Jn=!1){blockStack.push(currentBlock=Jn?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Jn){isBlockTreeEnabled+=Jn}function setupBlock(Jn){return Jn.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Jn),Jn}function createElementBlock(Jn,Xn,Qn,Zn,er,tr){return setupBlock(createBaseVNode(Jn,Xn,Qn,Zn,er,tr,!0))}function createBlock(Jn,Xn,Qn,Zn,er){return setupBlock(createVNode(Jn,Xn,Qn,Zn,er,!0))}function isVNode(Jn){return Jn?Jn.__v_isVNode===!0:!1}function isSameVNodeType(Jn,Xn){return Jn.type===Xn.type&&Jn.key===Xn.key}const InternalObjectKey="__vInternal",normalizeKey=({key:Jn})=>Jn??null,normalizeRef=({ref:Jn,ref_key:Xn,ref_for:Qn})=>(typeof Jn=="number"&&(Jn=""+Jn),Jn!=null?isString(Jn)||isRef(Jn)||isFunction(Jn)?{i:currentRenderingInstance,r:Jn,k:Xn,f:!!Qn}:Jn:null);function createBaseVNode(Jn,Xn=null,Qn=null,Zn=0,er=null,tr=Jn===Fragment?0:1,nr=!1,rr=!1){const sr={__v_isVNode:!0,__v_skip:!0,type:Jn,props:Xn,key:Xn&&normalizeKey(Xn),ref:Xn&&normalizeRef(Xn),scopeId:currentScopeId,slotScopeIds:null,children:Qn,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:tr,patchFlag:Zn,dynamicProps:er,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return rr?(normalizeChildren(sr,Qn),tr&128&&Jn.normalize(sr)):Qn&&(sr.shapeFlag|=isString(Qn)?8:16),isBlockTreeEnabled>0&&!nr&&currentBlock&&(sr.patchFlag>0||tr&6)&&sr.patchFlag!==32&&currentBlock.push(sr),sr}const createVNode=_createVNode;function _createVNode(Jn,Xn=null,Qn=null,Zn=0,er=null,tr=!1){if((!Jn||Jn===NULL_DYNAMIC_COMPONENT)&&(Jn=Comment),isVNode(Jn)){const rr=cloneVNode(Jn,Xn,!0);return Qn&&normalizeChildren(rr,Qn),isBlockTreeEnabled>0&&!tr&&currentBlock&&(rr.shapeFlag&6?currentBlock[currentBlock.indexOf(Jn)]=rr:currentBlock.push(rr)),rr.patchFlag|=-2,rr}if(isClassComponent(Jn)&&(Jn=Jn.__vccOpts),Xn){Xn=guardReactiveProps(Xn);let{class:rr,style:sr}=Xn;rr&&!isString(rr)&&(Xn.class=normalizeClass(rr)),isObject$3(sr)&&(isProxy(sr)&&!isArray$1(sr)&&(sr=extend({},sr)),Xn.style=normalizeStyle(sr))}const nr=isString(Jn)?1:isSuspense(Jn)?128:isTeleport(Jn)?64:isObject$3(Jn)?4:isFunction(Jn)?2:0;return createBaseVNode(Jn,Xn,Qn,Zn,er,nr,tr,!0)}function guardReactiveProps(Jn){return Jn?isProxy(Jn)||InternalObjectKey in Jn?extend({},Jn):Jn:null}function cloneVNode(Jn,Xn,Qn=!1){const{props:Zn,ref:er,patchFlag:tr,children:nr}=Jn,rr=Xn?mergeProps(Zn||{},Xn):Zn;return{__v_isVNode:!0,__v_skip:!0,type:Jn.type,props:rr,key:rr&&normalizeKey(rr),ref:Xn&&Xn.ref?Qn&&er?isArray$1(er)?er.concat(normalizeRef(Xn)):[er,normalizeRef(Xn)]:normalizeRef(Xn):er,scopeId:Jn.scopeId,slotScopeIds:Jn.slotScopeIds,children:nr,target:Jn.target,targetAnchor:Jn.targetAnchor,staticCount:Jn.staticCount,shapeFlag:Jn.shapeFlag,patchFlag:Xn&&Jn.type!==Fragment?tr===-1?16:tr|16:tr,dynamicProps:Jn.dynamicProps,dynamicChildren:Jn.dynamicChildren,appContext:Jn.appContext,dirs:Jn.dirs,transition:Jn.transition,component:Jn.component,suspense:Jn.suspense,ssContent:Jn.ssContent&&cloneVNode(Jn.ssContent),ssFallback:Jn.ssFallback&&cloneVNode(Jn.ssFallback),el:Jn.el,anchor:Jn.anchor,ctx:Jn.ctx,ce:Jn.ce}}function createTextVNode(Jn=" ",Xn=0){return createVNode(Text,null,Jn,Xn)}function createStaticVNode(Jn,Xn){const Qn=createVNode(Static,null,Jn);return Qn.staticCount=Xn,Qn}function createCommentVNode(Jn="",Xn=!1){return Xn?(openBlock(),createBlock(Comment,null,Jn)):createVNode(Comment,null,Jn)}function normalizeVNode(Jn){return Jn==null||typeof Jn=="boolean"?createVNode(Comment):isArray$1(Jn)?createVNode(Fragment,null,Jn.slice()):typeof Jn=="object"?cloneIfMounted(Jn):createVNode(Text,null,String(Jn))}function cloneIfMounted(Jn){return Jn.el===null&&Jn.patchFlag!==-1||Jn.memo?Jn:cloneVNode(Jn)}function normalizeChildren(Jn,Xn){let Qn=0;const{shapeFlag:Zn}=Jn;if(Xn==null)Xn=null;else if(isArray$1(Xn))Qn=16;else if(typeof Xn=="object")if(Zn&65){const er=Xn.default;er&&(er._c&&(er._d=!1),normalizeChildren(Jn,er()),er._c&&(er._d=!0));return}else{Qn=32;const er=Xn._;!er&&!(InternalObjectKey in Xn)?Xn._ctx=currentRenderingInstance:er===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?Xn._=1:(Xn._=2,Jn.patchFlag|=1024))}else isFunction(Xn)?(Xn={default:Xn,_ctx:currentRenderingInstance},Qn=32):(Xn=String(Xn),Zn&64?(Qn=16,Xn=[createTextVNode(Xn)]):Qn=8);Jn.children=Xn,Jn.shapeFlag|=Qn}function mergeProps(...Jn){const Xn={};for(let Qn=0;Qn<Jn.length;Qn++){const Zn=Jn[Qn];for(const er in Zn)if(er==="class")Xn.class!==Zn.class&&(Xn.class=normalizeClass([Xn.class,Zn.class]));else if(er==="style")Xn.style=normalizeStyle([Xn.style,Zn.style]);else if(isOn(er)){const tr=Xn[er],nr=Zn[er];nr&&tr!==nr&&!(isArray$1(tr)&&tr.includes(nr))&&(Xn[er]=tr?[].concat(tr,nr):nr)}else er!==""&&(Xn[er]=Zn[er])}return Xn}function invokeVNodeHook(Jn,Xn,Qn,Zn=null){callWithAsyncErrorHandling(Jn,Xn,7,[Qn,Zn])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Jn,Xn,Qn){const Zn=Jn.type,er=(Xn?Xn.appContext:Jn.appContext)||emptyAppContext,tr={uid:uid++,vnode:Jn,type:Zn,parent:Xn,appContext:er,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Xn?Xn.provides:Object.create(er.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Zn,er),emitsOptions:normalizeEmitsOptions(Zn,er),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Zn.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:Qn,suspenseId:Qn?Qn.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return tr.ctx={_:tr},tr.root=Xn?Xn.root:tr,tr.emit=emit.bind(null,tr),Jn.ce&&Jn.ce(tr),tr}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(Jn=>currentInstance=Jn),internalSetCurrentInstance=Jn=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(Xn=>Xn(Jn)):globalCurrentInstanceSetters[0](Jn)};const setCurrentInstance=Jn=>{internalSetCurrentInstance(Jn),Jn.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Jn){return Jn.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Jn,Xn=!1){isInSSRComponentSetup=Xn;const{props:Qn,children:Zn}=Jn.vnode,er=isStatefulComponent(Jn);initProps(Jn,Qn,er,Xn),initSlots(Jn,Zn);const tr=er?setupStatefulComponent(Jn,Xn):void 0;return isInSSRComponentSetup=!1,tr}function setupStatefulComponent(Jn,Xn){const Qn=Jn.type;Jn.accessCache=Object.create(null),Jn.proxy=markRaw(new Proxy(Jn.ctx,PublicInstanceProxyHandlers));const{setup:Zn}=Qn;if(Zn){const er=Jn.setupContext=Zn.length>1?createSetupContext(Jn):null;setCurrentInstance(Jn),pauseTracking();const tr=callWithErrorHandling(Zn,Jn,0,[Jn.props,er]);if(resetTracking(),unsetCurrentInstance(),isPromise(tr)){if(tr.then(unsetCurrentInstance,unsetCurrentInstance),Xn)return tr.then(nr=>{handleSetupResult(Jn,nr,Xn)}).catch(nr=>{handleError(nr,Jn,0)});Jn.asyncDep=tr}else handleSetupResult(Jn,tr,Xn)}else finishComponentSetup(Jn,Xn)}function handleSetupResult(Jn,Xn,Qn){isFunction(Xn)?Jn.type.__ssrInlineRender?Jn.ssrRender=Xn:Jn.render=Xn:isObject$3(Xn)&&(Jn.setupState=proxyRefs(Xn)),finishComponentSetup(Jn,Qn)}let compile;function finishComponentSetup(Jn,Xn,Qn){const Zn=Jn.type;if(!Jn.render){if(!Xn&&compile&&!Zn.render){const er=Zn.template||resolveMergedOptions(Jn).template;if(er){const{isCustomElement:tr,compilerOptions:nr}=Jn.appContext.config,{delimiters:rr,compilerOptions:sr}=Zn,or=extend(extend({isCustomElement:tr,delimiters:rr},nr),sr);Zn.render=compile(er,or)}}Jn.render=Zn.render||NOOP}setCurrentInstance(Jn),pauseTracking(),applyOptions(Jn),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(Jn){return Jn.attrsProxy||(Jn.attrsProxy=new Proxy(Jn.attrs,{get(Xn,Qn){return track(Jn,"get","$attrs"),Xn[Qn]}}))}function createSetupContext(Jn){const Xn=Qn=>{Jn.exposed=Qn||{}};return{get attrs(){return getAttrsProxy(Jn)},slots:Jn.slots,emit:Jn.emit,expose:Xn}}function getExposeProxy(Jn){if(Jn.exposed)return Jn.exposeProxy||(Jn.exposeProxy=new Proxy(proxyRefs(markRaw(Jn.exposed)),{get(Xn,Qn){if(Qn in Xn)return Xn[Qn];if(Qn in publicPropertiesMap)return publicPropertiesMap[Qn](Jn)},has(Xn,Qn){return Qn in Xn||Qn in publicPropertiesMap}}))}function getComponentName(Jn,Xn=!0){return isFunction(Jn)?Jn.displayName||Jn.name:Jn.name||Xn&&Jn.__name}function isClassComponent(Jn){return isFunction(Jn)&&"__vccOpts"in Jn}const computed=(Jn,Xn)=>computed$1(Jn,Xn,isInSSRComponentSetup);function h$2(Jn,Xn,Qn){const Zn=arguments.length;return Zn===2?isObject$3(Xn)&&!isArray$1(Xn)?isVNode(Xn)?createVNode(Jn,null,[Xn]):createVNode(Jn,Xn):createVNode(Jn,null,Xn):(Zn>3?Qn=Array.prototype.slice.call(arguments,2):Zn===3&&isVNode(Qn)&&(Qn=[Qn]),createVNode(Jn,Xn,Qn))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Jn,Xn,Qn)=>{Xn.insertBefore(Jn,Qn||null)},remove:Jn=>{const Xn=Jn.parentNode;Xn&&Xn.removeChild(Jn)},createElement:(Jn,Xn,Qn,Zn)=>{const er=Xn?doc.createElementNS(svgNS,Jn):doc.createElement(Jn,Qn?{is:Qn}:void 0);return Jn==="select"&&Zn&&Zn.multiple!=null&&er.setAttribute("multiple",Zn.multiple),er},createText:Jn=>doc.createTextNode(Jn),createComment:Jn=>doc.createComment(Jn),setText:(Jn,Xn)=>{Jn.nodeValue=Xn},setElementText:(Jn,Xn)=>{Jn.textContent=Xn},parentNode:Jn=>Jn.parentNode,nextSibling:Jn=>Jn.nextSibling,querySelector:Jn=>doc.querySelector(Jn),setScopeId(Jn,Xn){Jn.setAttribute(Xn,"")},insertStaticContent(Jn,Xn,Qn,Zn,er,tr){const nr=Qn?Qn.previousSibling:Xn.lastChild;if(er&&(er===tr||er.nextSibling))for(;Xn.insertBefore(er.cloneNode(!0),Qn),!(er===tr||!(er=er.nextSibling)););else{templateContainer.innerHTML=Zn?`<svg>${Jn}</svg>`:Jn;const rr=templateContainer.content;if(Zn){const sr=rr.firstChild;for(;sr.firstChild;)rr.appendChild(sr.firstChild);rr.removeChild(sr)}Xn.insertBefore(rr,Qn)}return[nr?nr.nextSibling:Xn.firstChild,Qn?Qn.previousSibling:Xn.lastChild]}};function patchClass(Jn,Xn,Qn){const Zn=Jn._vtc;Zn&&(Xn=(Xn?[Xn,...Zn]:[...Zn]).join(" ")),Xn==null?Jn.removeAttribute("class"):Qn?Jn.setAttribute("class",Xn):Jn.className=Xn}function patchStyle(Jn,Xn,Qn){const Zn=Jn.style,er=isString(Qn);if(Qn&&!er){if(Xn&&!isString(Xn))for(const tr in Xn)Qn[tr]==null&&setStyle(Zn,tr,"");for(const tr in Qn)setStyle(Zn,tr,Qn[tr])}else{const tr=Zn.display;er?Xn!==Qn&&(Zn.cssText=Qn):Xn&&Jn.removeAttribute("style"),"_vod"in Jn&&(Zn.display=tr)}}const importantRE=/\s*!important$/;function setStyle(Jn,Xn,Qn){if(isArray$1(Qn))Qn.forEach(Zn=>setStyle(Jn,Xn,Zn));else if(Qn==null&&(Qn=""),Xn.startsWith("--"))Jn.setProperty(Xn,Qn);else{const Zn=autoPrefix(Jn,Xn);importantRE.test(Qn)?Jn.setProperty(hyphenate(Zn),Qn.replace(importantRE,""),"important"):Jn[Zn]=Qn}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Jn,Xn){const Qn=prefixCache[Xn];if(Qn)return Qn;let Zn=camelize(Xn);if(Zn!=="filter"&&Zn in Jn)return prefixCache[Xn]=Zn;Zn=capitalize$1(Zn);for(let er=0;er<prefixes.length;er++){const tr=prefixes[er]+Zn;if(tr in Jn)return prefixCache[Xn]=tr}return Xn}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Jn,Xn,Qn,Zn,er){if(Zn&&Xn.startsWith("xlink:"))Qn==null?Jn.removeAttributeNS(xlinkNS,Xn.slice(6,Xn.length)):Jn.setAttributeNS(xlinkNS,Xn,Qn);else{const tr=isSpecialBooleanAttr(Xn);Qn==null||tr&&!includeBooleanAttr(Qn)?Jn.removeAttribute(Xn):Jn.setAttribute(Xn,tr?"":Qn)}}function patchDOMProp(Jn,Xn,Qn,Zn,er,tr,nr){if(Xn==="innerHTML"||Xn==="textContent"){Zn&&nr(Zn,er,tr),Jn[Xn]=Qn??"";return}const rr=Jn.tagName;if(Xn==="value"&&rr!=="PROGRESS"&&!rr.includes("-")){Jn._value=Qn;const or=rr==="OPTION"?Jn.getAttribute("value"):Jn.value,ir=Qn??"";or!==ir&&(Jn.value=ir),Qn==null&&Jn.removeAttribute(Xn);return}let sr=!1;if(Qn===""||Qn==null){const or=typeof Jn[Xn];or==="boolean"?Qn=includeBooleanAttr(Qn):Qn==null&&or==="string"?(Qn="",sr=!0):or==="number"&&(Qn=0,sr=!0)}try{Jn[Xn]=Qn}catch{}sr&&Jn.removeAttribute(Xn)}function addEventListener$1(Jn,Xn,Qn,Zn){Jn.addEventListener(Xn,Qn,Zn)}function removeEventListener$1(Jn,Xn,Qn,Zn){Jn.removeEventListener(Xn,Qn,Zn)}function patchEvent(Jn,Xn,Qn,Zn,er=null){const tr=Jn._vei||(Jn._vei={}),nr=tr[Xn];if(Zn&&nr)nr.value=Zn;else{const[rr,sr]=parseName(Xn);if(Zn){const or=tr[Xn]=createInvoker(Zn,er);addEventListener$1(Jn,rr,or,sr)}else nr&&(removeEventListener$1(Jn,rr,nr,sr),tr[Xn]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Jn){let Xn;if(optionsModifierRE.test(Jn)){Xn={};let Zn;for(;Zn=Jn.match(optionsModifierRE);)Jn=Jn.slice(0,Jn.length-Zn[0].length),Xn[Zn[0].toLowerCase()]=!0}return[Jn[2]===":"?Jn.slice(3):hyphenate(Jn.slice(2)),Xn]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Jn,Xn){const Qn=Zn=>{if(!Zn._vts)Zn._vts=Date.now();else if(Zn._vts<=Qn.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Zn,Qn.value),Xn,5,[Zn])};return Qn.value=Jn,Qn.attached=getNow(),Qn}function patchStopImmediatePropagation(Jn,Xn){if(isArray$1(Xn)){const Qn=Jn.stopImmediatePropagation;return Jn.stopImmediatePropagation=()=>{Qn.call(Jn),Jn._stopped=!0},Xn.map(Zn=>er=>!er._stopped&&Zn&&Zn(er))}else return Xn}const nativeOnRE=/^on[a-z]/,patchProp=(Jn,Xn,Qn,Zn,er=!1,tr,nr,rr,sr)=>{Xn==="class"?patchClass(Jn,Zn,er):Xn==="style"?patchStyle(Jn,Qn,Zn):isOn(Xn)?isModelListener(Xn)||patchEvent(Jn,Xn,Qn,Zn,nr):(Xn[0]==="."?(Xn=Xn.slice(1),!0):Xn[0]==="^"?(Xn=Xn.slice(1),!1):shouldSetAsProp(Jn,Xn,Zn,er))?patchDOMProp(Jn,Xn,Zn,tr,nr,rr,sr):(Xn==="true-value"?Jn._trueValue=Zn:Xn==="false-value"&&(Jn._falseValue=Zn),patchAttr(Jn,Xn,Zn,er))};function shouldSetAsProp(Jn,Xn,Qn,Zn){return Zn?!!(Xn==="innerHTML"||Xn==="textContent"||Xn in Jn&&nativeOnRE.test(Xn)&&isFunction(Qn)):Xn==="spellcheck"||Xn==="draggable"||Xn==="translate"||Xn==="form"||Xn==="list"&&Jn.tagName==="INPUT"||Xn==="type"&&Jn.tagName==="TEXTAREA"||nativeOnRE.test(Xn)&&isString(Qn)?!1:Xn in Jn}function useCssVars(Jn){const Xn=getCurrentInstance();if(!Xn)return;const Qn=Xn.ut=(er=Jn(Xn.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${Xn.uid}"]`)).forEach(tr=>setVarsOnNode(tr,er))},Zn=()=>{const er=Jn(Xn.proxy);setVarsOnVNode(Xn.subTree,er),Qn(er)};watchPostEffect(Zn),onMounted(()=>{const er=new MutationObserver(Zn);er.observe(Xn.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>er.disconnect())})}function setVarsOnVNode(Jn,Xn){if(Jn.shapeFlag&128){const Qn=Jn.suspense;Jn=Qn.activeBranch,Qn.pendingBranch&&!Qn.isHydrating&&Qn.effects.push(()=>{setVarsOnVNode(Qn.activeBranch,Xn)})}for(;Jn.component;)Jn=Jn.component.subTree;if(Jn.shapeFlag&1&&Jn.el)setVarsOnNode(Jn.el,Xn);else if(Jn.type===Fragment)Jn.children.forEach(Qn=>setVarsOnVNode(Qn,Xn));else if(Jn.type===Static){let{el:Qn,anchor:Zn}=Jn;for(;Qn&&(setVarsOnNode(Qn,Xn),Qn!==Zn);)Qn=Qn.nextSibling}}function setVarsOnNode(Jn,Xn){if(Jn.nodeType===1){const Qn=Jn.style;for(const Zn in Xn)Qn.setProperty(`--${Zn}`,Xn[Zn])}}const TRANSITION="transition",ANIMATION="animation",Transition=(Jn,{slots:Xn})=>h$2(BaseTransition,resolveTransitionProps(Jn),Xn);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(Jn,Xn=[])=>{isArray$1(Jn)?Jn.forEach(Qn=>Qn(...Xn)):Jn&&Jn(...Xn)},hasExplicitCallback=Jn=>Jn?isArray$1(Jn)?Jn.some(Xn=>Xn.length>1):Jn.length>1:!1;function resolveTransitionProps(Jn){const Xn={};for(const Rr in Jn)Rr in DOMTransitionPropsValidators||(Xn[Rr]=Jn[Rr]);if(Jn.css===!1)return Xn;const{name:Qn="v",type:Zn,duration:er,enterFromClass:tr=`${Qn}-enter-from`,enterActiveClass:nr=`${Qn}-enter-active`,enterToClass:rr=`${Qn}-enter-to`,appearFromClass:sr=tr,appearActiveClass:or=nr,appearToClass:ir=rr,leaveFromClass:ar=`${Qn}-leave-from`,leaveActiveClass:lr=`${Qn}-leave-active`,leaveToClass:cr=`${Qn}-leave-to`}=Jn,dr=normalizeDuration(er),hr=dr&&dr[0],pr=dr&&dr[1],{onBeforeEnter:fr,onEnter:ur,onEnterCancelled:br,onLeave:gr,onLeaveCancelled:mr,onBeforeAppear:_r=fr,onAppear:wr=ur,onAppearCancelled:yr=br}=Xn,Cr=(Rr,Or,$r)=>{removeTransitionClass(Rr,Or?ir:rr),removeTransitionClass(Rr,Or?or:nr),$r&&$r()},Pr=(Rr,Or)=>{Rr._isLeaving=!1,removeTransitionClass(Rr,ar),removeTransitionClass(Rr,cr),removeTransitionClass(Rr,lr),Or&&Or()},Tr=Rr=>(Or,$r)=>{const Gr=Rr?wr:ur,Hr=()=>Cr(Or,Rr,$r);callHook(Gr,[Or,Hr]),nextFrame(()=>{removeTransitionClass(Or,Rr?sr:tr),addTransitionClass(Or,Rr?ir:rr),hasExplicitCallback(Gr)||whenTransitionEnds(Or,Zn,hr,Hr)})};return extend(Xn,{onBeforeEnter(Rr){callHook(fr,[Rr]),addTransitionClass(Rr,tr),addTransitionClass(Rr,nr)},onBeforeAppear(Rr){callHook(_r,[Rr]),addTransitionClass(Rr,sr),addTransitionClass(Rr,or)},onEnter:Tr(!1),onAppear:Tr(!0),onLeave(Rr,Or){Rr._isLeaving=!0;const $r=()=>Pr(Rr,Or);addTransitionClass(Rr,ar),forceReflow(),addTransitionClass(Rr,lr),nextFrame(()=>{Rr._isLeaving&&(removeTransitionClass(Rr,ar),addTransitionClass(Rr,cr),hasExplicitCallback(gr)||whenTransitionEnds(Rr,Zn,pr,$r))}),callHook(gr,[Rr,$r])},onEnterCancelled(Rr){Cr(Rr,!1),callHook(br,[Rr])},onAppearCancelled(Rr){Cr(Rr,!0),callHook(yr,[Rr])},onLeaveCancelled(Rr){Pr(Rr),callHook(mr,[Rr])}})}function normalizeDuration(Jn){if(Jn==null)return null;if(isObject$3(Jn))return[NumberOf(Jn.enter),NumberOf(Jn.leave)];{const Xn=NumberOf(Jn);return[Xn,Xn]}}function NumberOf(Jn){return toNumber$2(Jn)}function addTransitionClass(Jn,Xn){Xn.split(/\s+/).forEach(Qn=>Qn&&Jn.classList.add(Qn)),(Jn._vtc||(Jn._vtc=new Set)).add(Xn)}function removeTransitionClass(Jn,Xn){Xn.split(/\s+/).forEach(Zn=>Zn&&Jn.classList.remove(Zn));const{_vtc:Qn}=Jn;Qn&&(Qn.delete(Xn),Qn.size||(Jn._vtc=void 0))}function nextFrame(Jn){requestAnimationFrame(()=>{requestAnimationFrame(Jn)})}let endId=0;function whenTransitionEnds(Jn,Xn,Qn,Zn){const er=Jn._endId=++endId,tr=()=>{er===Jn._endId&&Zn()};if(Qn)return setTimeout(tr,Qn);const{type:nr,timeout:rr,propCount:sr}=getTransitionInfo(Jn,Xn);if(!nr)return Zn();const or=nr+"end";let ir=0;const ar=()=>{Jn.removeEventListener(or,lr),tr()},lr=cr=>{cr.target===Jn&&++ir>=sr&&ar()};setTimeout(()=>{ir<sr&&ar()},rr+1),Jn.addEventListener(or,lr)}function getTransitionInfo(Jn,Xn){const Qn=window.getComputedStyle(Jn),Zn=dr=>(Qn[dr]||"").split(", "),er=Zn(`${TRANSITION}Delay`),tr=Zn(`${TRANSITION}Duration`),nr=getTimeout(er,tr),rr=Zn(`${ANIMATION}Delay`),sr=Zn(`${ANIMATION}Duration`),or=getTimeout(rr,sr);let ir=null,ar=0,lr=0;Xn===TRANSITION?nr>0&&(ir=TRANSITION,ar=nr,lr=tr.length):Xn===ANIMATION?or>0&&(ir=ANIMATION,ar=or,lr=sr.length):(ar=Math.max(nr,or),ir=ar>0?nr>or?TRANSITION:ANIMATION:null,lr=ir?ir===TRANSITION?tr.length:sr.length:0);const cr=ir===TRANSITION&&/\b(transform|all)(,|$)/.test(Zn(`${TRANSITION}Property`).toString());return{type:ir,timeout:ar,propCount:lr,hasTransform:cr}}function getTimeout(Jn,Xn){for(;Jn.length<Xn.length;)Jn=Jn.concat(Jn);return Math.max(...Xn.map((Qn,Zn)=>toMs(Qn)+toMs(Jn[Zn])))}function toMs(Jn){return Number(Jn.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Jn,{slots:Xn}){const Qn=getCurrentInstance(),Zn=useTransitionState();let er,tr;return onUpdated(()=>{if(!er.length)return;const nr=Jn.moveClass||`${Jn.name||"v"}-move`;if(!hasCSSTransform(er[0].el,Qn.vnode.el,nr))return;er.forEach(callPendingCbs),er.forEach(recordPosition);const rr=er.filter(applyTranslation);forceReflow(),rr.forEach(sr=>{const or=sr.el,ir=or.style;addTransitionClass(or,nr),ir.transform=ir.webkitTransform=ir.transitionDuration="";const ar=or._moveCb=lr=>{lr&&lr.target!==or||(!lr||/transform$/.test(lr.propertyName))&&(or.removeEventListener("transitionend",ar),or._moveCb=null,removeTransitionClass(or,nr))};or.addEventListener("transitionend",ar)})}),()=>{const nr=toRaw(Jn),rr=resolveTransitionProps(nr);let sr=nr.tag||Fragment;er=tr,tr=Xn.default?getTransitionRawChildren(Xn.default()):[];for(let or=0;or<tr.length;or++){const ir=tr[or];ir.key!=null&&setTransitionHooks(ir,resolveTransitionHooks(ir,rr,Zn,Qn))}if(er)for(let or=0;or<er.length;or++){const ir=er[or];setTransitionHooks(ir,resolveTransitionHooks(ir,rr,Zn,Qn)),positionMap.set(ir,ir.el.getBoundingClientRect())}return createVNode(sr,null,tr)}}},removeMode=Jn=>delete Jn.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(Jn){const Xn=Jn.el;Xn._moveCb&&Xn._moveCb(),Xn._enterCb&&Xn._enterCb()}function recordPosition(Jn){newPositionMap.set(Jn,Jn.el.getBoundingClientRect())}function applyTranslation(Jn){const Xn=positionMap.get(Jn),Qn=newPositionMap.get(Jn),Zn=Xn.left-Qn.left,er=Xn.top-Qn.top;if(Zn||er){const tr=Jn.el.style;return tr.transform=tr.webkitTransform=`translate(${Zn}px,${er}px)`,tr.transitionDuration="0s",Jn}}function hasCSSTransform(Jn,Xn,Qn){const Zn=Jn.cloneNode();Jn._vtc&&Jn._vtc.forEach(nr=>{nr.split(/\s+/).forEach(rr=>rr&&Zn.classList.remove(rr))}),Qn.split(/\s+/).forEach(nr=>nr&&Zn.classList.add(nr)),Zn.style.display="none";const er=Xn.nodeType===1?Xn:Xn.parentNode;er.appendChild(Zn);const{hasTransform:tr}=getTransitionInfo(Zn);return er.removeChild(Zn),tr}const getModelAssigner=Jn=>{const Xn=Jn.props["onUpdate:modelValue"]||!1;return isArray$1(Xn)?Qn=>invokeArrayFns(Xn,Qn):Xn};function onCompositionStart(Jn){Jn.target.composing=!0}function onCompositionEnd(Jn){const Xn=Jn.target;Xn.composing&&(Xn.composing=!1,Xn.dispatchEvent(new Event("input")))}const vModelText={created(Jn,{modifiers:{lazy:Xn,trim:Qn,number:Zn}},er){Jn._assign=getModelAssigner(er);const tr=Zn||er.props&&er.props.type==="number";addEventListener$1(Jn,Xn?"change":"input",nr=>{if(nr.target.composing)return;let rr=Jn.value;Qn&&(rr=rr.trim()),tr&&(rr=looseToNumber(rr)),Jn._assign(rr)}),Qn&&addEventListener$1(Jn,"change",()=>{Jn.value=Jn.value.trim()}),Xn||(addEventListener$1(Jn,"compositionstart",onCompositionStart),addEventListener$1(Jn,"compositionend",onCompositionEnd),addEventListener$1(Jn,"change",onCompositionEnd))},mounted(Jn,{value:Xn}){Jn.value=Xn??""},beforeUpdate(Jn,{value:Xn,modifiers:{lazy:Qn,trim:Zn,number:er}},tr){if(Jn._assign=getModelAssigner(tr),Jn.composing||document.activeElement===Jn&&Jn.type!=="range"&&(Qn||Zn&&Jn.value.trim()===Xn||(er||Jn.type==="number")&&looseToNumber(Jn.value)===Xn))return;const nr=Xn??"";Jn.value!==nr&&(Jn.value=nr)}},vModelCheckbox={deep:!0,created(Jn,Xn,Qn){Jn._assign=getModelAssigner(Qn),addEventListener$1(Jn,"change",()=>{const Zn=Jn._modelValue,er=getValue(Jn),tr=Jn.checked,nr=Jn._assign;if(isArray$1(Zn)){const rr=looseIndexOf(Zn,er),sr=rr!==-1;if(tr&&!sr)nr(Zn.concat(er));else if(!tr&&sr){const or=[...Zn];or.splice(rr,1),nr(or)}}else if(isSet(Zn)){const rr=new Set(Zn);tr?rr.add(er):rr.delete(er),nr(rr)}else nr(getCheckboxValue(Jn,tr))})},mounted:setChecked,beforeUpdate(Jn,Xn,Qn){Jn._assign=getModelAssigner(Qn),setChecked(Jn,Xn,Qn)}};function setChecked(Jn,{value:Xn,oldValue:Qn},Zn){Jn._modelValue=Xn,isArray$1(Xn)?Jn.checked=looseIndexOf(Xn,Zn.props.value)>-1:isSet(Xn)?Jn.checked=Xn.has(Zn.props.value):Xn!==Qn&&(Jn.checked=looseEqual(Xn,getCheckboxValue(Jn,!0)))}const vModelSelect={deep:!0,created(Jn,{value:Xn,modifiers:{number:Qn}},Zn){const er=isSet(Xn);addEventListener$1(Jn,"change",()=>{const tr=Array.prototype.filter.call(Jn.options,nr=>nr.selected).map(nr=>Qn?looseToNumber(getValue(nr)):getValue(nr));Jn._assign(Jn.multiple?er?new Set(tr):tr:tr[0])}),Jn._assign=getModelAssigner(Zn)},mounted(Jn,{value:Xn}){setSelected(Jn,Xn)},beforeUpdate(Jn,Xn,Qn){Jn._assign=getModelAssigner(Qn)},updated(Jn,{value:Xn}){setSelected(Jn,Xn)}};function setSelected(Jn,Xn){const Qn=Jn.multiple;if(!(Qn&&!isArray$1(Xn)&&!isSet(Xn))){for(let Zn=0,er=Jn.options.length;Zn<er;Zn++){const tr=Jn.options[Zn],nr=getValue(tr);if(Qn)isArray$1(Xn)?tr.selected=looseIndexOf(Xn,nr)>-1:tr.selected=Xn.has(nr);else if(looseEqual(getValue(tr),Xn)){Jn.selectedIndex!==Zn&&(Jn.selectedIndex=Zn);return}}!Qn&&Jn.selectedIndex!==-1&&(Jn.selectedIndex=-1)}}function getValue(Jn){return"_value"in Jn?Jn._value:Jn.value}function getCheckboxValue(Jn,Xn){const Qn=Xn?"_trueValue":"_falseValue";return Qn in Jn?Jn[Qn]:Xn}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Jn=>Jn.stopPropagation(),prevent:Jn=>Jn.preventDefault(),self:Jn=>Jn.target!==Jn.currentTarget,ctrl:Jn=>!Jn.ctrlKey,shift:Jn=>!Jn.shiftKey,alt:Jn=>!Jn.altKey,meta:Jn=>!Jn.metaKey,left:Jn=>"button"in Jn&&Jn.button!==0,middle:Jn=>"button"in Jn&&Jn.button!==1,right:Jn=>"button"in Jn&&Jn.button!==2,exact:(Jn,Xn)=>systemModifiers.some(Qn=>Jn[`${Qn}Key`]&&!Xn.includes(Qn))},withModifiers=(Jn,Xn)=>(Qn,...Zn)=>{for(let er=0;er<Xn.length;er++){const tr=modifierGuards[Xn[er]];if(tr&&tr(Qn,Xn))return}return Jn(Qn,...Zn)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Jn,Xn)=>Qn=>{if(!("key"in Qn))return;const Zn=hyphenate(Qn.key);if(Xn.some(er=>er===Zn||keyNames[er]===Zn))return Jn(Qn)},vShow={beforeMount(Jn,{value:Xn},{transition:Qn}){Jn._vod=Jn.style.display==="none"?"":Jn.style.display,Qn&&Xn?Qn.beforeEnter(Jn):setDisplay(Jn,Xn)},mounted(Jn,{value:Xn},{transition:Qn}){Qn&&Xn&&Qn.enter(Jn)},updated(Jn,{value:Xn,oldValue:Qn},{transition:Zn}){!Xn!=!Qn&&(Zn?Xn?(Zn.beforeEnter(Jn),setDisplay(Jn,!0),Zn.enter(Jn)):Zn.leave(Jn,()=>{setDisplay(Jn,!1)}):setDisplay(Jn,Xn))},beforeUnmount(Jn,{value:Xn}){setDisplay(Jn,Xn)}};function setDisplay(Jn,Xn){Jn.style.display=Xn?Jn._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const createApp=(...Jn)=>{const Xn=ensureRenderer().createApp(...Jn),{mount:Qn}=Xn;return Xn.mount=Zn=>{const er=normalizeContainer(Zn);if(!er)return;const tr=Xn._component;!isFunction(tr)&&!tr.render&&!tr.template&&(tr.template=er.innerHTML),er.innerHTML="";const nr=Qn(er,!1,er instanceof SVGElement);return er instanceof Element&&(er.removeAttribute("v-cloak"),er.setAttribute("data-v-app","")),nr},Xn},createSSRApp=(...Jn)=>{const Xn=ensureHydrationRenderer().createApp(...Jn),{mount:Qn}=Xn;return Xn.mount=Zn=>{const er=normalizeContainer(Zn);if(er)return Qn(er,!0,er instanceof SVGElement)},Xn};function normalizeContainer(Jn){return isString(Jn)?document.querySelector(Jn):Jn}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function jsonParseTransform(Jn,Xn){if(Jn!=="__proto__"&&!(Jn==="constructor"&&Xn&&typeof Xn=="object"&&"prototype"in Xn))return Xn}function destr(Jn,Xn={}){if(typeof Jn!="string")return Jn;const Qn=Jn.toLowerCase().trim();if(Qn==="true")return!0;if(Qn==="false")return!1;if(Qn==="null")return null;if(Qn==="nan")return Number.NaN;if(Qn==="infinity")return Number.POSITIVE_INFINITY;if(Qn!=="undefined"){if(!JsonSigRx.test(Jn)){if(Xn.strict)throw new SyntaxError("Invalid JSON");return Jn}try{return suspectProtoRx.test(Jn)||suspectConstructorRx.test(Jn)?JSON.parse(Jn,jsonParseTransform):JSON.parse(Jn)}catch(Zn){if(Xn.strict)throw Zn;return Jn}}}const HASH_RE$1=/#/g,AMPERSAND_RE$1=/&/g,EQUAL_RE$1=/=/g,PLUS_RE$1=/\+/g,ENC_CARET_RE$1=/%5e/gi,ENC_BACKTICK_RE$1=/%60/gi,ENC_PIPE_RE$1=/%7c/gi,ENC_SPACE_RE$1=/%20/gi;function encode$1(Jn){return encodeURI(""+Jn).replace(ENC_PIPE_RE$1,"|")}function encodeQueryValue$1(Jn){return encode$1(typeof Jn=="string"?Jn:JSON.stringify(Jn)).replace(PLUS_RE$1,"%2B").replace(ENC_SPACE_RE$1,"+").replace(HASH_RE$1,"%23").replace(AMPERSAND_RE$1,"%26").replace(ENC_BACKTICK_RE$1,"`").replace(ENC_CARET_RE$1,"^")}function encodeQueryKey$1(Jn){return encodeQueryValue$1(Jn).replace(EQUAL_RE$1,"%3D")}function decode$2(Jn=""){try{return decodeURIComponent(""+Jn)}catch{return""+Jn}}function decodeQueryValue(Jn){return decode$2(Jn.replace(PLUS_RE$1," "))}function parseQuery$1(Jn=""){const Xn={};Jn[0]==="?"&&(Jn=Jn.slice(1));for(const Qn of Jn.split("&")){const Zn=Qn.match(/([^=]+)=?(.*)/)||[];if(Zn.length<2)continue;const er=decode$2(Zn[1]);if(er==="__proto__"||er==="constructor")continue;const tr=decodeQueryValue(Zn[2]||"");typeof Xn[er]<"u"?Array.isArray(Xn[er])?Xn[er].push(tr):Xn[er]=[Xn[er],tr]:Xn[er]=tr}return Xn}function encodeQueryItem(Jn,Xn){return(typeof Xn=="number"||typeof Xn=="boolean")&&(Xn=String(Xn)),Xn?Array.isArray(Xn)?Xn.map(Qn=>`${encodeQueryKey$1(Jn)}=${encodeQueryValue$1(Qn)}`).join("&"):`${encodeQueryKey$1(Jn)}=${encodeQueryValue$1(Xn)}`:encodeQueryKey$1(Jn)}function stringifyQuery$1(Jn){return Object.keys(Jn).filter(Xn=>Jn[Xn]!==void 0).map(Xn=>encodeQueryItem(Xn,Jn[Xn])).join("&")}const PROTOCOL_STRICT_REGEX=/^\w{2,}:([/\\]{1,2})/,PROTOCOL_REGEX=/^\w{2,}:([/\\]{2})?/,PROTOCOL_RELATIVE_REGEX=/^([/\\]\s*){2,}[^/\\]/;function hasProtocol(Jn,Xn={}){return typeof Xn=="boolean"&&(Xn={acceptRelative:Xn}),Xn.strict?PROTOCOL_STRICT_REGEX.test(Jn):PROTOCOL_REGEX.test(Jn)||(Xn.acceptRelative?PROTOCOL_RELATIVE_REGEX.test(Jn):!1)}const TRAILING_SLASH_RE$1=/\/$|\/\?/;function hasTrailingSlash(Jn="",Xn=!1){return Xn?TRAILING_SLASH_RE$1.test(Jn):Jn.endsWith("/")}function withoutTrailingSlash(Jn="",Xn=!1){if(!Xn)return(hasTrailingSlash(Jn)?Jn.slice(0,-1):Jn)||"/";if(!hasTrailingSlash(Jn,!0))return Jn||"/";const[Qn,...Zn]=Jn.split("?");return(Qn.slice(0,-1)||"/")+(Zn.length>0?`?${Zn.join("?")}`:"")}function withTrailingSlash(Jn="",Xn=!1){if(!Xn)return Jn.endsWith("/")?Jn:Jn+"/";if(hasTrailingSlash(Jn,!0))return Jn||"/";const[Qn,...Zn]=Jn.split("?");return Qn+"/"+(Zn.length>0?`?${Zn.join("?")}`:"")}function hasLeadingSlash(Jn=""){return Jn.startsWith("/")}function withoutLeadingSlash(Jn=""){return(hasLeadingSlash(Jn)?Jn.slice(1):Jn)||"/"}function withBase(Jn,Xn){if(isEmptyURL(Xn)||hasProtocol(Jn))return Jn;const Qn=withoutTrailingSlash(Xn);return Jn.startsWith(Qn)?Jn:joinURL(Qn,Jn)}function withoutBase(Jn,Xn){if(isEmptyURL(Xn))return Jn;const Qn=withoutTrailingSlash(Xn);if(!Jn.startsWith(Qn))return Jn;const Zn=Jn.slice(Qn.length);return Zn[0]==="/"?Zn:"/"+Zn}function withQuery(Jn,Xn){const Qn=parseURL$1(Jn),Zn={...parseQuery$1(Qn.search),...Xn};return Qn.search=stringifyQuery$1(Zn),stringifyParsedURL(Qn)}function isEmptyURL(Jn){return!Jn||Jn==="/"}function isNonEmptyURL(Jn){return Jn&&Jn!=="/"}function joinURL(Jn,...Xn){let Qn=Jn||"";for(const Zn of Xn.filter(er=>isNonEmptyURL(er)))Qn=Qn?withTrailingSlash(Qn)+withoutLeadingSlash(Zn):Zn;return Qn}function parseURL$1(Jn="",Xn){if(!hasProtocol(Jn,{acceptRelative:!0}))return Xn?parseURL$1(Xn+Jn):parsePath(Jn);const[Qn="",Zn,er=""]=(Jn.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[tr="",nr=""]=(er.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:rr,search:sr,hash:or}=parsePath(nr.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:Qn,auth:Zn?Zn.slice(0,Math.max(0,Zn.length-1)):"",host:tr,pathname:rr,search:sr,hash:or}}function parsePath(Jn=""){const[Xn="",Qn="",Zn=""]=(Jn.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:Xn,search:Qn,hash:Zn}}function stringifyParsedURL(Jn){const Xn=Jn.pathname+(Jn.search?(Jn.search.startsWith("?")?"":"?")+Jn.search:"")+Jn.hash;return Jn.protocol?Jn.protocol+"//"+(Jn.auth?Jn.auth+"@":"")+Jn.host+Xn:Xn}class FetchError extends Error{constructor(){super(...arguments),this.name="FetchError"}}function createFetchError(Jn,Xn,Qn){let Zn="";Xn&&(Zn=Xn.message),Jn&&Qn?Zn=`${Zn} (${Qn.status} ${Qn.statusText} (${Jn.toString()}))`:Jn&&(Zn=`${Zn} (${Jn.toString()})`);const er=new FetchError(Zn);return Object.defineProperty(er,"request",{get(){return Jn}}),Object.defineProperty(er,"response",{get(){return Qn}}),Object.defineProperty(er,"data",{get(){return Qn&&Qn._data}}),Object.defineProperty(er,"status",{get(){return Qn&&Qn.status}}),Object.defineProperty(er,"statusText",{get(){return Qn&&Qn.statusText}}),Object.defineProperty(er,"statusCode",{get(){return Qn&&Qn.status}}),Object.defineProperty(er,"statusMessage",{get(){return Qn&&Qn.statusText}}),er}const payloadMethods=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(Jn="GET"){return payloadMethods.has(Jn.toUpperCase())}function isJSONSerializable(Jn){if(Jn===void 0)return!1;const Xn=typeof Jn;return Xn==="string"||Xn==="number"||Xn==="boolean"||Xn===null?!0:Xn!=="object"?!1:Array.isArray(Jn)?!0:Jn.constructor&&Jn.constructor.name==="Object"||typeof Jn.toJSON=="function"}const textTypes=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JSON_RE=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function detectResponseType(Jn=""){if(!Jn)return"json";const Xn=Jn.split(";").shift()||"";return JSON_RE.test(Xn)?"json":textTypes.has(Xn)||Xn.startsWith("text/")?"text":"blob"}const retryStatusCodes=new Set([408,409,425,429,500,502,503,504]);function createFetch(Jn){const{fetch:Xn,Headers:Qn}=Jn;function Zn(nr){const rr=nr.error&&nr.error.name==="AbortError"||!1;if(nr.options.retry!==!1&&!rr){let or;typeof nr.options.retry=="number"?or=nr.options.retry:or=isPayloadMethod(nr.options.method)?0:1;const ir=nr.response&&nr.response.status||500;if(or>0&&retryStatusCodes.has(ir))return er(nr.request,{...nr.options,retry:or-1})}const sr=createFetchError(nr.request,nr.error,nr.response);throw Error.captureStackTrace&&Error.captureStackTrace(sr,er),sr}const er=async function(rr,sr={}){const or={request:rr,options:{...Jn.defaults,...sr},response:void 0,error:void 0};or.options.onRequest&&await or.options.onRequest(or),typeof or.request=="string"&&(or.options.baseURL&&(or.request=withBase(or.request,or.options.baseURL)),(or.options.query||or.options.params)&&(or.request=withQuery(or.request,{...or.options.params,...or.options.query})),or.options.body&&isPayloadMethod(or.options.method)&&isJSONSerializable(or.options.body)&&(or.options.body=typeof or.options.body=="string"?or.options.body:JSON.stringify(or.options.body),or.options.headers=new Qn(or.options.headers),or.options.headers.has("content-type")||or.options.headers.set("content-type","application/json"),or.options.headers.has("accept")||or.options.headers.set("accept","application/json"))),or.response=await Xn(or.request,or.options).catch(async ar=>(or.error=ar,or.options.onRequestError&&await or.options.onRequestError(or),Zn(or)));const ir=(or.options.parseResponse?"json":or.options.responseType)||detectResponseType(or.response.headers.get("content-type")||"");if(ir==="json"){const ar=await or.response.text(),lr=or.options.parseResponse||destr;or.response._data=lr(ar)}else ir==="stream"?or.response._data=or.response.body:or.response._data=await or.response[ir]();return or.options.onResponse&&await or.options.onResponse(or),or.response.status>=400&&or.response.status<600?(or.options.onResponseError&&await or.options.onResponseError(or),Zn(or)):or.response},tr=function(rr,sr){return er(rr,sr).then(or=>or._data)};return tr.raw=er,tr.native=Xn,tr.create=(nr={})=>createFetch({...Jn,defaults:{...Jn.defaults,...nr}}),tr}const _globalThis$1=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fetch$1=_globalThis$1.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers=_globalThis$1.Headers,ofetch=createFetch({fetch:fetch$1,Headers}),$fetch$1=ofetch,useRuntimeConfig$1=()=>{var Jn;return((Jn=window==null?void 0:window.__NUXT__)==null?void 0:Jn.config)||{}},appConfig=useRuntimeConfig$1().app,baseURL=()=>appConfig.baseURL,buildAssetsDir=()=>appConfig.buildAssetsDir,buildAssetsURL=(...Jn)=>joinURL(publicAssetsURL(),buildAssetsDir(),...Jn),publicAssetsURL=(...Jn)=>{const Xn=appConfig.cdnURL||appConfig.baseURL;return Jn.length?joinURL(Xn,...Jn):Xn};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;function flatHooks(Jn,Xn={},Qn){for(const Zn in Jn){const er=Jn[Zn],tr=Qn?`${Qn}:${Zn}`:Zn;typeof er=="object"&&er!==null?flatHooks(er,Xn,tr):typeof er=="function"&&(Xn[tr]=er)}return Xn}const defaultTask={run:Jn=>Jn()},_createTask=()=>defaultTask,createTask=typeof console.createTask<"u"?console.createTask:_createTask;function serialTaskCaller(Jn,Xn){const Qn=Xn.shift(),Zn=createTask(Qn);return Jn.reduce((er,tr)=>er.then(()=>Zn.run(()=>tr(...Xn))),Promise.resolve())}function parallelTaskCaller(Jn,Xn){const Qn=Xn.shift(),Zn=createTask(Qn);return Promise.all(Jn.map(er=>Zn.run(()=>er(...Xn))))}function callEachWith(Jn,Xn){for(const Qn of[...Jn])Qn(Xn)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(Xn,Qn,Zn={}){if(!Xn||typeof Qn!="function")return()=>{};const er=Xn;let tr;for(;this._deprecatedHooks[Xn];)tr=this._deprecatedHooks[Xn],Xn=tr.to;if(tr&&!Zn.allowDeprecated){let nr=tr.message;nr||(nr=`${er} hook has been deprecated`+(tr.to?`, please use ${tr.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(nr)||(console.warn(nr),this._deprecatedMessages.add(nr))}if(!Qn.name)try{Object.defineProperty(Qn,"name",{get:()=>"_"+Xn.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[Xn]=this._hooks[Xn]||[],this._hooks[Xn].push(Qn),()=>{Qn&&(this.removeHook(Xn,Qn),Qn=void 0)}}hookOnce(Xn,Qn){let Zn,er=(...tr)=>(typeof Zn=="function"&&Zn(),Zn=void 0,er=void 0,Qn(...tr));return Zn=this.hook(Xn,er),Zn}removeHook(Xn,Qn){if(this._hooks[Xn]){const Zn=this._hooks[Xn].indexOf(Qn);Zn!==-1&&this._hooks[Xn].splice(Zn,1),this._hooks[Xn].length===0&&delete this._hooks[Xn]}}deprecateHook(Xn,Qn){this._deprecatedHooks[Xn]=typeof Qn=="string"?{to:Qn}:Qn;const Zn=this._hooks[Xn]||[];delete this._hooks[Xn];for(const er of Zn)this.hook(Xn,er)}deprecateHooks(Xn){Object.assign(this._deprecatedHooks,Xn);for(const Qn in Xn)this.deprecateHook(Qn,Xn[Qn])}addHooks(Xn){const Qn=flatHooks(Xn),Zn=Object.keys(Qn).map(er=>this.hook(er,Qn[er]));return()=>{for(const er of Zn.splice(0,Zn.length))er()}}removeHooks(Xn){const Qn=flatHooks(Xn);for(const Zn in Qn)this.removeHook(Zn,Qn[Zn])}removeAllHooks(){for(const Xn in this._hooks)delete this._hooks[Xn]}callHook(Xn,...Qn){return Qn.unshift(Xn),this.callHookWith(serialTaskCaller,Xn,...Qn)}callHookParallel(Xn,...Qn){return Qn.unshift(Xn),this.callHookWith(parallelTaskCaller,Xn,...Qn)}callHookWith(Xn,Qn,...Zn){const er=this._before||this._after?{name:Qn,args:Zn,context:{}}:void 0;this._before&&callEachWith(this._before,er);const tr=Xn(Qn in this._hooks?[...this._hooks[Qn]]:[],Zn);return tr instanceof Promise?tr.finally(()=>{this._after&&er&&callEachWith(this._after,er)}):(this._after&&er&&callEachWith(this._after,er),tr)}beforeEach(Xn){return this._before=this._before||[],this._before.push(Xn),()=>{if(this._before!==void 0){const Qn=this._before.indexOf(Xn);Qn!==-1&&this._before.splice(Qn,1)}}}afterEach(Xn){return this._after=this._after||[],this._after.push(Xn),()=>{if(this._after!==void 0){const Qn=this._after.indexOf(Xn);Qn!==-1&&this._after.splice(Qn,1)}}}}function createHooks(){return new Hookable}function createContext(Jn={}){let Xn,Qn=!1;const Zn=nr=>{if(Xn&&Xn!==nr)throw new Error("Context conflict")};let er;if(Jn.asyncContext){const nr=Jn.AsyncLocalStorage||globalThis.AsyncLocalStorage;nr?er=new nr:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const tr=()=>{if(er&&Xn===void 0){const nr=er.getStore();if(nr!==void 0)return nr}return Xn};return{use:()=>{const nr=tr();if(nr===void 0)throw new Error("Context is not available");return nr},tryUse:()=>tr(),set:(nr,rr)=>{rr||Zn(nr),Xn=nr,Qn=!0},unset:()=>{Xn=void 0,Qn=!1},call:(nr,rr)=>{Zn(nr),Xn=nr;try{return er?er.run(nr,rr):rr()}finally{Qn||(Xn=void 0)}},async callAsync(nr,rr){Xn=nr;const sr=()=>{Xn=nr},or=()=>Xn===nr?sr:void 0;asyncHandlers.add(or);try{const ir=er?er.run(nr,rr):rr();return Qn||(Xn=void 0),await ir}finally{asyncHandlers.delete(or)}}}}function createNamespace(Jn={}){const Xn={};return{get(Qn,Zn={}){return Xn[Qn]||(Xn[Qn]=createContext({...Jn,...Zn})),Xn[Qn],Xn[Qn]}}}const _globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},globalKey="__unctx__",defaultNamespace=_globalThis[globalKey]||(_globalThis[globalKey]=createNamespace()),getContext=(Jn,Xn={})=>defaultNamespace.get(Jn,Xn),asyncHandlersKey="__unctx_async_handlers__",asyncHandlers=_globalThis[asyncHandlersKey]||(_globalThis[asyncHandlersKey]=new Set);function executeAsync(Jn){const Xn=[];for(const er of asyncHandlers){const tr=er();tr&&Xn.push(tr)}const Qn=()=>{for(const er of Xn)er()};let Zn=Jn();return Zn&&typeof Zn=="object"&&"catch"in Zn&&(Zn=Zn.catch(er=>{throw Qn(),er})),[Zn,Qn]}const nuxtAppCtx=getContext("nuxt-app"),NuxtPluginIndicator="__nuxt_plugin";function createNuxtApp(Jn){let Xn=0;const Qn={provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.5.2"},get vue(){return Qn.vueApp.version}},payload:reactive({data:{},state:{},_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:er=>callWithNuxt(Qn,er),isHydrating:!0,deferHydration(){if(!Qn.isHydrating)return()=>{};Xn++;let er=!1;return()=>{if(!er&&(er=!0,Xn--,Xn===0))return Qn.isHydrating=!1,Qn.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...Jn};Qn.hooks=createHooks(),Qn.hook=Qn.hooks.hook,Qn.callHook=Qn.hooks.callHook,Qn.provide=(er,tr)=>{const nr="$"+er;defineGetter(Qn,nr,tr),defineGetter(Qn.vueApp.config.globalProperties,nr,tr)},defineGetter(Qn.vueApp,"$nuxt",Qn),defineGetter(Qn.vueApp.config.globalProperties,"$nuxt",Qn);{window.addEventListener("nuxt.preloadError",tr=>{Qn.callHook("app:chunkError",{error:tr.payload})});const er=Qn.hook("app:error",(...tr)=>{console.error("[nuxt] error caught during app initialization",...tr)});Qn.hook("app:mounted",er)}const Zn=reactive(Qn.payload.config);return Qn.provide("config",Zn),Qn}async function applyPlugin(Jn,Xn){if(typeof Xn!="function")return;const{provide:Qn}=await Jn.runWithContext(()=>Xn(Jn))||{};if(Qn&&typeof Qn=="object")for(const Zn in Qn)Jn.provide(Zn,Qn[Zn])}async function applyPlugins(Jn,Xn){var er;const Qn=[],Zn=[];for(const tr of Xn){const nr=applyPlugin(Jn,tr);(er=tr.meta)!=null&&er.parallel?Qn.push(nr.catch(rr=>Zn.push(rr))):await nr}if(await Promise.all(Qn),Zn.length)throw Zn[0]}function normalizePlugins(Jn){const Xn=[];for(const Qn of Jn){if(typeof Qn!="function")continue;let Zn=Qn;Qn.length>1&&(Zn=er=>Qn(er,er.provide)),Xn.push(Zn)}return Xn.sort((Qn,Zn)=>{var er,tr;return(((er=Qn.meta)==null?void 0:er.order)||orderMap.default)-(((tr=Zn.meta)==null?void 0:tr.order)||orderMap.default)}),Xn}const orderMap={pre:-20,default:0,post:20};function defineNuxtPlugin(Jn,Xn){var Zn;if(typeof Jn=="function")return defineNuxtPlugin({setup:Jn},Xn);const Qn=er=>{if(Jn.hooks&&er.hooks.addHooks(Jn.hooks),Jn.setup)return Jn.setup(er)};return Qn.meta={name:(Xn==null?void 0:Xn.name)||Jn.name||((Zn=Jn.setup)==null?void 0:Zn.name),parallel:Jn.parallel,order:(Xn==null?void 0:Xn.order)||Jn.order||orderMap[Jn.enforce||"default"]||orderMap.default},Qn[NuxtPluginIndicator]=!0,Qn}function callWithNuxt(Jn,Xn,Qn){const Zn=()=>Qn?Xn(...Qn):Xn();return nuxtAppCtx.set(Jn),Jn.vueApp.runWithContext(Zn)}function useNuxtApp(){var Xn;let Jn;if(hasInjectionContext()&&(Jn=(Xn=getCurrentInstance())==null?void 0:Xn.appContext.app.$nuxt),Jn=Jn||nuxtAppCtx.tryUse(),!Jn)throw new Error("[nuxt] instance unavailable");return Jn}function useRuntimeConfig(){return useNuxtApp().$config}function defineGetter(Jn,Xn,Qn){Object.defineProperty(Jn,Xn,{get:()=>Qn})}const windi="",vars="",style="",isVue2=!1;/*!
  * pinia v2.1.3
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=Jn=>activePinia=Jn,piniaSymbol=Symbol();function isPlainObject(Jn){return Jn&&typeof Jn=="object"&&Object.prototype.toString.call(Jn)==="[object Object]"&&typeof Jn.toJSON!="function"}var MutationType;(function(Jn){Jn.direct="direct",Jn.patchObject="patch object",Jn.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Jn=effectScope(!0),Xn=Jn.run(()=>ref({}));let Qn=[],Zn=[];const er=markRaw({install(tr){setActivePinia(er),er._a=tr,tr.provide(piniaSymbol,er),tr.config.globalProperties.$pinia=er,Zn.forEach(nr=>Qn.push(nr)),Zn=[]},use(tr){return!this._a&&!isVue2?Zn.push(tr):Qn.push(tr),this},_p:Qn,_a:null,_e:Jn,_s:new Map,state:Xn});return er}const noop$1=()=>{};function addSubscription(Jn,Xn,Qn,Zn=noop$1){Jn.push(Xn);const er=()=>{const tr=Jn.indexOf(Xn);tr>-1&&(Jn.splice(tr,1),Zn())};return!Qn&&getCurrentScope()&&onScopeDispose(er),er}function triggerSubscriptions(Jn,...Xn){Jn.slice().forEach(Qn=>{Qn(...Xn)})}const fallbackRunWithContext=Jn=>Jn();function mergeReactiveObjects(Jn,Xn){Jn instanceof Map&&Xn instanceof Map&&Xn.forEach((Qn,Zn)=>Jn.set(Zn,Qn)),Jn instanceof Set&&Xn instanceof Set&&Xn.forEach(Jn.add,Jn);for(const Qn in Xn){if(!Xn.hasOwnProperty(Qn))continue;const Zn=Xn[Qn],er=Jn[Qn];isPlainObject(er)&&isPlainObject(Zn)&&Jn.hasOwnProperty(Qn)&&!isRef(Zn)&&!isReactive(Zn)?Jn[Qn]=mergeReactiveObjects(er,Zn):Jn[Qn]=Zn}return Jn}const skipHydrateSymbol=Symbol();function shouldHydrate(Jn){return!isPlainObject(Jn)||!Jn.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Jn){return!!(isRef(Jn)&&Jn.effect)}function createOptionsStore(Jn,Xn,Qn,Zn){const{state:er,actions:tr,getters:nr}=Xn,rr=Qn.state.value[Jn];let sr;function or(){rr||(Qn.state.value[Jn]=er?er():{});const ir=toRefs(Qn.state.value[Jn]);return assign$1(ir,tr,Object.keys(nr||{}).reduce((ar,lr)=>(ar[lr]=markRaw(computed(()=>{setActivePinia(Qn);const cr=Qn._s.get(Jn);return nr[lr].call(cr,cr)})),ar),{}))}return sr=createSetupStore(Jn,or,Xn,Qn,Zn,!0),sr}function createSetupStore(Jn,Xn,Qn={},Zn,er,tr){let nr;const rr=assign$1({actions:{}},Qn),sr={deep:!0};let or,ir,ar=[],lr=[],cr;const dr=Zn.state.value[Jn];!tr&&!dr&&(Zn.state.value[Jn]={}),ref({});let hr;function pr(yr){let Cr;or=ir=!1,typeof yr=="function"?(yr(Zn.state.value[Jn]),Cr={type:MutationType.patchFunction,storeId:Jn,events:cr}):(mergeReactiveObjects(Zn.state.value[Jn],yr),Cr={type:MutationType.patchObject,payload:yr,storeId:Jn,events:cr});const Pr=hr=Symbol();nextTick().then(()=>{hr===Pr&&(or=!0)}),ir=!0,triggerSubscriptions(ar,Cr,Zn.state.value[Jn])}const fr=tr?function(){const{state:Cr}=Qn,Pr=Cr?Cr():{};this.$patch(Tr=>{assign$1(Tr,Pr)})}:noop$1;function ur(){nr.stop(),ar=[],lr=[],Zn._s.delete(Jn)}function br(yr,Cr){return function(){setActivePinia(Zn);const Pr=Array.from(arguments),Tr=[],Rr=[];function Or(Hr){Tr.push(Hr)}function $r(Hr){Rr.push(Hr)}triggerSubscriptions(lr,{args:Pr,name:yr,store:mr,after:Or,onError:$r});let Gr;try{Gr=Cr.apply(this&&this.$id===Jn?this:mr,Pr)}catch(Hr){throw triggerSubscriptions(Rr,Hr),Hr}return Gr instanceof Promise?Gr.then(Hr=>(triggerSubscriptions(Tr,Hr),Hr)).catch(Hr=>(triggerSubscriptions(Rr,Hr),Promise.reject(Hr))):(triggerSubscriptions(Tr,Gr),Gr)}}const gr={_p:Zn,$id:Jn,$onAction:addSubscription.bind(null,lr),$patch:pr,$reset:fr,$subscribe(yr,Cr={}){const Pr=addSubscription(ar,yr,Cr.detached,()=>Tr()),Tr=nr.run(()=>watch(()=>Zn.state.value[Jn],Rr=>{(Cr.flush==="sync"?ir:or)&&yr({storeId:Jn,type:MutationType.direct,events:cr},Rr)},assign$1({},sr,Cr)));return Pr},$dispose:ur},mr=reactive(gr);Zn._s.set(Jn,mr);const _r=Zn._a&&Zn._a.runWithContext||fallbackRunWithContext,wr=Zn._e.run(()=>(nr=effectScope(),_r(()=>nr.run(Xn))));for(const yr in wr){const Cr=wr[yr];if(isRef(Cr)&&!isComputed(Cr)||isReactive(Cr))tr||(dr&&shouldHydrate(Cr)&&(isRef(Cr)?Cr.value=dr[yr]:mergeReactiveObjects(Cr,dr[yr])),Zn.state.value[Jn][yr]=Cr);else if(typeof Cr=="function"){const Pr=br(yr,Cr);wr[yr]=Pr,rr.actions[yr]=Cr}}return assign$1(mr,wr),assign$1(toRaw(mr),wr),Object.defineProperty(mr,"$state",{get:()=>Zn.state.value[Jn],set:yr=>{pr(Cr=>{assign$1(Cr,yr)})}}),Zn._p.forEach(yr=>{assign$1(mr,nr.run(()=>yr({store:mr,app:Zn._a,pinia:Zn,options:rr})))}),dr&&tr&&Qn.hydrate&&Qn.hydrate(mr.$state,dr),or=!0,ir=!0,mr}function defineStore(Jn,Xn,Qn){let Zn,er;const tr=typeof Xn=="function";typeof Jn=="string"?(Zn=Jn,er=tr?Qn:Xn):(er=Jn,Zn=Jn.id);function nr(rr,sr){const or=hasInjectionContext();return rr=rr||(or?inject(piniaSymbol,null):null),rr&&setActivePinia(rr),rr=activePinia,rr._s.has(Zn)||(tr?createSetupStore(Zn,Xn,er,rr):createOptionsStore(Zn,er,rr)),rr._s.get(Zn)}return nr.$id=Zn,nr}function asArray(Jn){return Array.isArray(Jn)?Jn:[Jn]}const TagsWithInnerContent=["title","script","style","noscript"],HasElementTags=["base","meta","link","style","script","noscript"],ValidHeadTags=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],UniqueTags=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],TagConfigKeys=["tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent"];function defineHeadPlugin(Jn){return Jn}function hashCode(Jn){let Xn=9;for(let Qn=0;Qn<Jn.length;)Xn=Math.imul(Xn^Jn.charCodeAt(Qn++),9**9);return((Xn^Xn>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function hashTag(Jn){return hashCode(`${Jn.tag}:${Jn.textContent||Jn.innerHTML||""}:${Object.entries(Jn.props).map(([Xn,Qn])=>`${Xn}:${String(Qn)}`).join(",")}`)}function computeHashes(Jn){let Xn=9;for(const Qn of Jn)for(let Zn=0;Zn<Qn.length;)Xn=Math.imul(Xn^Qn.charCodeAt(Zn++),9**9);return((Xn^Xn>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function tagDedupeKey(Jn,Xn){const{props:Qn,tag:Zn}=Jn;if(UniqueTags.includes(Zn))return Zn;if(Zn==="link"&&Qn.rel==="canonical")return"canonical";if(Qn.charset)return"charset";const er=["id"];Zn==="meta"&&er.push("name","property","http-equiv");for(const tr of er)if(typeof Qn[tr]<"u"){const nr=String(Qn[tr]);return Xn&&!Xn(nr)?!1:`${Zn}:${tr}:${nr}`}return!1}function resolveTitleTemplate(Jn,Xn){return Jn==null?Xn||null:typeof Jn=="function"?Jn(Xn):Jn}function setAttrs(Jn,Xn=!1,Qn){const{tag:Zn,$el:er}=Jn;er&&(Object.entries(Zn.props).forEach(([tr,nr])=>{nr=String(nr);const rr=`attr:${tr}`;if(tr==="class"){if(!nr)return;for(const sr of nr.split(" ")){const or=`${rr}:${sr}`;Qn&&Qn(Jn,or,()=>er.classList.remove(sr)),er.classList.contains(sr)||er.classList.add(sr)}return}Qn&&!tr.startsWith("data-h-")&&Qn(Jn,rr,()=>er.removeAttribute(tr)),(Xn||er.getAttribute(tr)!==nr)&&er.setAttribute(tr,nr)}),TagsWithInnerContent.includes(Zn.tag)&&(Zn.textContent&&Zn.textContent!==er.textContent?er.textContent=Zn.textContent:Zn.innerHTML&&Zn.innerHTML!==er.innerHTML&&(er.innerHTML=Zn.innerHTML)))}let prevHash=!1;async function renderDOMHead(Jn,Xn={}){var lr,cr;const Qn={shouldRender:!0};if(await Jn.hooks.callHook("dom:beforeRender",Qn),!Qn.shouldRender)return;const Zn=Xn.document||Jn.resolvedOptions.document||window.document,er=(await Jn.resolveTags()).map(rr);if(Jn.resolvedOptions.experimentalHashHydration&&(prevHash=prevHash||Jn._hash||!1,prevHash)){const dr=computeHashes(er.map(hr=>hr.tag._h));if(prevHash===dr)return;prevHash=dr}const tr=Jn._popSideEffectQueue();Jn.headEntries().map(dr=>dr._sde).forEach(dr=>{Object.entries(dr).forEach(([hr,pr])=>{tr[hr]=pr})});const nr=(dr,hr,pr)=>{hr=`${dr.renderId}:${hr}`,dr.entry&&(dr.entry._sde[hr]=pr),delete tr[hr]};function rr(dr){const hr=Jn.headEntries().find(fr=>fr._i===dr._e),pr={renderId:dr._d||hashTag(dr),$el:null,shouldRender:!0,tag:dr,entry:hr,markSideEffect:(fr,ur)=>nr(pr,fr,ur)};return pr}const sr=[],or={body:[],head:[]},ir=dr=>{Jn._elMap[dr.renderId]=dr.$el,sr.push(dr),nr(dr,"el",()=>{var hr;(hr=dr.$el)==null||hr.remove(),delete Jn._elMap[dr.renderId]})};for(const dr of er){if(await Jn.hooks.callHook("dom:beforeRenderTag",dr),!dr.shouldRender)continue;const{tag:hr}=dr;if(hr.tag==="title"){Zn.title=hr.textContent||"",sr.push(dr);continue}if(hr.tag==="htmlAttrs"||hr.tag==="bodyAttrs"){dr.$el=Zn[hr.tag==="htmlAttrs"?"documentElement":"body"],setAttrs(dr,!1,nr),sr.push(dr);continue}if(dr.$el=Jn._elMap[dr.renderId],!dr.$el&&hr.key&&(dr.$el=Zn.querySelector(`${(lr=hr.tagPosition)!=null&&lr.startsWith("body")?"body":"head"} > ${hr.tag}[data-h-${hr._h}]`)),dr.$el){dr.tag._d&&setAttrs(dr),ir(dr);continue}or[(cr=hr.tagPosition)!=null&&cr.startsWith("body")?"body":"head"].push(dr)}const ar={bodyClose:void 0,bodyOpen:void 0,head:void 0};Object.entries(or).forEach(([dr,hr])=>{var fr;if(!hr.length)return;const pr=(fr=Zn==null?void 0:Zn[dr])==null?void 0:fr.children;if(pr){for(const ur of[...pr].reverse()){const br=ur.tagName.toLowerCase();if(!HasElementTags.includes(br))continue;const gr=ur.getAttributeNames().reduce((yr,Cr)=>({...yr,[Cr]:ur.getAttribute(Cr)}),{}),mr={tag:br,props:gr};ur.innerHTML&&(mr.innerHTML=ur.innerHTML);const _r=hashTag(mr);let wr=hr.findIndex(yr=>(yr==null?void 0:yr.renderId)===_r);if(wr===-1){const yr=tagDedupeKey(mr);wr=hr.findIndex(Cr=>(Cr==null?void 0:Cr.tag._d)&&Cr.tag._d===yr)}if(wr!==-1){const yr=hr[wr];yr.$el=ur,setAttrs(yr),ir(yr),delete hr[wr]}}hr.forEach(ur=>{const br=ur.tag.tagPosition||"head";ar[br]=ar[br]||Zn.createDocumentFragment(),ur.$el||(ur.$el=Zn.createElement(ur.tag.tag),setAttrs(ur,!0)),ar[br].appendChild(ur.$el),ir(ur)})}}),ar.head&&Zn.head.appendChild(ar.head),ar.bodyOpen&&Zn.body.insertBefore(ar.bodyOpen,Zn.body.firstChild),ar.bodyClose&&Zn.body.appendChild(ar.bodyClose);for(const dr of sr)await Jn.hooks.callHook("dom:renderTag",dr);Object.values(tr).forEach(dr=>dr())}let domUpdatePromise=null;async function debouncedRenderDOMHead(Jn,Xn={}){function Qn(){return domUpdatePromise=null,renderDOMHead(Jn,Xn)}const Zn=Xn.delayFn||(er=>setTimeout(er,10));return domUpdatePromise=domUpdatePromise||new Promise(er=>Zn(()=>er(Qn())))}function PatchDomOnEntryUpdatesPlugin(Jn){return{hooks:{"entries:updated":function(Xn){if(typeof(Jn==null?void 0:Jn.document)>"u"&&typeof window>"u")return;let Qn=Jn==null?void 0:Jn.delayFn;!Qn&&typeof requestAnimationFrame<"u"&&(Qn=requestAnimationFrame),debouncedRenderDOMHead(Xn,{document:(Jn==null?void 0:Jn.document)||window.document,delayFn:Qn})}}}}function maybeGetSSRHash(Jn){var Xn;return((Xn=Jn==null?void 0:Jn.head.querySelector('meta[name="unhead:ssr"]'))==null?void 0:Xn.getAttribute("content"))||!1}const TAG_WEIGHTS={critical:2,high:9,low:12,base:-1,title:1,meta:10};function tagWeight(Jn){if(typeof Jn.tagPriority=="number")return Jn.tagPriority;if(Jn.tag==="meta"){if(Jn.props.charset)return-2;if(Jn.props["http-equiv"]==="content-security-policy")return 0}const Xn=Jn.tagPriority||Jn.tag;return Xn in TAG_WEIGHTS?TAG_WEIGHTS[Xn]:10}const SortModifiers=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];function SortTagsPlugin(){return{hooks:{"tags:resolve":Jn=>{const Xn=Qn=>{var Zn;return(Zn=Jn.tags.find(er=>er._d===Qn))==null?void 0:Zn._p};for(const{prefix:Qn,offset:Zn}of SortModifiers)for(const er of Jn.tags.filter(tr=>typeof tr.tagPriority=="string"&&tr.tagPriority.startsWith(Qn))){const tr=Xn(er.tagPriority.replace(Qn,""));typeof tr<"u"&&(er._p=tr+Zn)}Jn.tags.sort((Qn,Zn)=>Qn._p-Zn._p).sort((Qn,Zn)=>tagWeight(Qn)-tagWeight(Zn))}}}}function TitleTemplatePlugin(){return{hooks:{"tags:resolve":Jn=>{const{tags:Xn}=Jn;let Qn=Xn.findIndex(er=>er.tag==="titleTemplate");const Zn=Xn.findIndex(er=>er.tag==="title");if(Zn!==-1&&Qn!==-1){const er=resolveTitleTemplate(Xn[Qn].textContent,Xn[Zn].textContent);er!==null?Xn[Zn].textContent=er||Xn[Zn].textContent:delete Xn[Zn]}else if(Qn!==-1){const er=resolveTitleTemplate(Xn[Qn].textContent);er!==null&&(Xn[Qn].textContent=er,Xn[Qn].tag="title",Qn=-1)}Qn!==-1&&delete Xn[Qn],Jn.tags=Xn.filter(Boolean)}}}}function DeprecatedTagAttrPlugin(){return{hooks:{"tag:normalise":function({tag:Jn}){typeof Jn.props.body<"u"&&(Jn.tagPosition="bodyClose",delete Jn.props.body)}}}}const DupeableTags=["link","style","script","noscript"];function ProvideTagHashPlugin(){return{hooks:{"tag:normalise":({tag:Jn,resolvedOptions:Xn})=>{Xn.experimentalHashHydration===!0&&(Jn._h=hashTag(Jn)),Jn.key&&DupeableTags.includes(Jn.tag)&&(Jn._h=hashCode(Jn.key),Jn.props[`data-h-${Jn._h}`]="")}}}}const ValidEventTags=["script","link","bodyAttrs"];function EventHandlersPlugin(){const Jn=(Xn,Qn)=>{const Zn={},er={};Object.entries(Qn.props).forEach(([nr,rr])=>{nr.startsWith("on")&&typeof rr=="function"?er[nr]=rr:Zn[nr]=rr});let tr;return Xn==="dom"&&Qn.tag==="script"&&typeof Zn.src=="string"&&typeof er.onload<"u"&&(tr=Zn.src,delete Zn.src),{props:Zn,eventHandlers:er,delayedSrc:tr}};return{hooks:{"ssr:render":function(Xn){Xn.tags=Xn.tags.map(Qn=>(!ValidEventTags.includes(Qn.tag)||!Object.entries(Qn.props).find(([Zn,er])=>Zn.startsWith("on")&&typeof er=="function")||(Qn.props=Jn("ssr",Qn).props),Qn))},"dom:beforeRenderTag":function(Xn){if(!ValidEventTags.includes(Xn.tag.tag)||!Object.entries(Xn.tag.props).find(([tr,nr])=>tr.startsWith("on")&&typeof nr=="function"))return;const{props:Qn,eventHandlers:Zn,delayedSrc:er}=Jn("dom",Xn.tag);Object.keys(Zn).length&&(Xn.tag.props=Qn,Xn.tag._eventHandlers=Zn,Xn.tag._delayedSrc=er)},"dom:renderTag":function(Xn){const Qn=Xn.$el;if(!Xn.tag._eventHandlers||!Qn)return;const Zn=Xn.tag.tag==="bodyAttrs"&&typeof window<"u"?window:Qn;Object.entries(Xn.tag._eventHandlers).forEach(([er,tr])=>{const nr=`${Xn.tag._d||Xn.tag._p}:${er}`,rr=er.slice(2).toLowerCase(),sr=`data-h-${rr}`;if(Xn.markSideEffect(nr,()=>{}),Qn.hasAttribute(sr))return;const or=tr;Qn.setAttribute(sr,""),Zn.addEventListener(rr,or),Xn.entry&&(Xn.entry._sde[nr]=()=>{Zn.removeEventListener(rr,or),Qn.removeAttribute(sr)})}),Xn.tag._delayedSrc&&Qn.setAttribute("src",Xn.tag._delayedSrc)}}}}const UsesMergeStrategy=["templateParams","htmlAttrs","bodyAttrs"];function DedupesTagsPlugin(){return{hooks:{"tag:normalise":function({tag:Jn}){["hid","vmid","key"].forEach(Zn=>{Jn.props[Zn]&&(Jn.key=Jn.props[Zn],delete Jn.props[Zn])});const Qn=tagDedupeKey(Jn)||(Jn.key?`${Jn.tag}:${Jn.key}`:!1);Qn&&(Jn._d=Qn)},"tags:resolve":function(Jn){const Xn={};Jn.tags.forEach(Zn=>{const er=(Zn.key?`${Zn.tag}:${Zn.key}`:Zn._d)||Zn._p,tr=Xn[er];if(tr){let rr=Zn==null?void 0:Zn.tagDuplicateStrategy;if(!rr&&UsesMergeStrategy.includes(Zn.tag)&&(rr="merge"),rr==="merge"){const sr=tr.props;["class","style"].forEach(or=>{Zn.props[or]&&sr[or]&&(or==="style"&&!sr[or].endsWith(";")&&(sr[or]+=";"),Zn.props[or]=`${sr[or]} ${Zn.props[or]}`)}),Xn[er].props={...sr,...Zn.props};return}else if(Zn._e===tr._e){tr._duped=tr._duped||[],Zn._d=`${tr._d}:${tr._duped.length+1}`,tr._duped.push(Zn);return}}const nr=Object.keys(Zn.props).length+(Zn.innerHTML?1:0)+(Zn.textContent?1:0);if(HasElementTags.includes(Zn.tag)&&nr===0){delete Xn[er];return}Xn[er]=Zn});const Qn=[];Object.values(Xn).forEach(Zn=>{const er=Zn._duped;delete Zn._duped,Qn.push(Zn),er&&Qn.push(...er)}),Jn.tags=Qn}}}}function processTemplateParams(Jn,Xn){function Qn(tr){if(["s","pageTitle"].includes(tr))return Xn.pageTitle;let nr;return tr.includes(".")?nr=tr.split(".").reduce((rr,sr)=>rr&&rr[sr]||void 0,Xn):nr=Xn[tr],typeof nr<"u"?nr||"":!1}let Zn=Jn;try{Zn=decodeURI(Jn)}catch{}return(Zn.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(tr=>{const nr=Qn(tr.slice(1));typeof nr=="string"&&(Jn=Jn.replace(new RegExp(`\\${tr}(\\W|$)`,"g"),`${nr}$1`).trim())}),Xn.separator&&(Jn.endsWith(Xn.separator)&&(Jn=Jn.slice(0,-Xn.separator.length).trim()),Jn.startsWith(Xn.separator)&&(Jn=Jn.slice(Xn.separator.length).trim()),Jn=Jn.replace(new RegExp(`\\${Xn.separator}\\s*\\${Xn.separator}`,"g"),Xn.separator)),Jn}function TemplateParamsPlugin(){return{hooks:{"tags:resolve":Jn=>{var tr;const{tags:Xn}=Jn,Qn=(tr=Xn.find(nr=>nr.tag==="title"))==null?void 0:tr.textContent,Zn=Xn.findIndex(nr=>nr.tag==="templateParams"),er=Zn!==-1?Xn[Zn].props:{};er.pageTitle=er.pageTitle||Qn||"";for(const nr of Xn)if(["titleTemplate","title"].includes(nr.tag)&&typeof nr.textContent=="string")nr.textContent=processTemplateParams(nr.textContent,er);else if(nr.tag==="meta"&&typeof nr.props.content=="string")nr.props.content=processTemplateParams(nr.props.content,er);else if(nr.tag==="link"&&typeof nr.props.href=="string")nr.props.href=processTemplateParams(nr.props.href,er);else if(nr.tag==="script"&&["application/json","application/ld+json"].includes(nr.props.type)&&typeof nr.innerHTML=="string")try{nr.innerHTML=JSON.stringify(JSON.parse(nr.innerHTML),(rr,sr)=>typeof sr=="string"?processTemplateParams(sr,er):sr)}catch{}Jn.tags=Xn.filter(nr=>nr.tag!=="templateParams")}}}}const IsBrowser$1=typeof window<"u";let activeHead;function setActiveHead(Jn){return activeHead=Jn}function getActiveHead(){return activeHead}async function normaliseTag(Jn,Xn){const Qn={tag:Jn,props:{}};return Jn==="templateParams"?(Qn.props=Xn,Qn):["title","titleTemplate"].includes(Jn)?(Qn.textContent=Xn instanceof Promise?await Xn:Xn,Qn):typeof Xn=="string"?["script","noscript","style"].includes(Jn)?(Jn==="script"&&(/^(https?:)?\/\//.test(Xn)||Xn.startsWith("/"))?Qn.props.src=Xn:Qn.innerHTML=Xn,Qn):!1:(Qn.props=await normaliseProps(Jn,{...Xn}),Qn.props.children&&(Qn.props.innerHTML=Qn.props.children),delete Qn.props.children,Object.keys(Qn.props).filter(Zn=>TagConfigKeys.includes(Zn)).forEach(Zn=>{(!["innerHTML","textContent"].includes(Zn)||TagsWithInnerContent.includes(Qn.tag))&&(Qn[Zn]=Qn.props[Zn]),delete Qn.props[Zn]}),["innerHTML","textContent"].forEach(Zn=>{if(Qn.tag==="script"&&typeof Qn[Zn]=="string"&&["application/ld+json","application/json"].includes(Qn.props.type))try{Qn[Zn]=JSON.parse(Qn[Zn])}catch{Qn[Zn]=""}typeof Qn[Zn]=="object"&&(Qn[Zn]=JSON.stringify(Qn[Zn]))}),Qn.props.class&&(Qn.props.class=normaliseClassProp(Qn.props.class)),Qn.props.content&&Array.isArray(Qn.props.content)?Qn.props.content.map(Zn=>({...Qn,props:{...Qn.props,content:Zn}})):Qn)}function normaliseClassProp(Jn){return typeof Jn=="object"&&!Array.isArray(Jn)&&(Jn=Object.keys(Jn).filter(Xn=>Jn[Xn])),(Array.isArray(Jn)?Jn.join(" "):Jn).split(" ").filter(Xn=>Xn.trim()).filter(Boolean).join(" ")}async function normaliseProps(Jn,Xn){for(const Qn of Object.keys(Xn)){const Zn=Qn.startsWith("data-");Xn[Qn]instanceof Promise&&(Xn[Qn]=await Xn[Qn]),String(Xn[Qn])==="true"?Xn[Qn]=Zn?"true":"":String(Xn[Qn])==="false"&&(Zn?Xn[Qn]="false":delete Xn[Qn])}return Xn}const TagEntityBits=10;async function normaliseEntryTags(Jn){const Xn=[];return Object.entries(Jn.resolvedInput).filter(([Qn,Zn])=>typeof Zn<"u"&&ValidHeadTags.includes(Qn)).forEach(([Qn,Zn])=>{const er=asArray(Zn);Xn.push(...er.map(tr=>normaliseTag(Qn,tr)).flat())}),(await Promise.all(Xn)).flat().filter(Boolean).map((Qn,Zn)=>(Qn._e=Jn._i,Qn._p=(Jn._i<<TagEntityBits)+Zn,Qn))}function CorePlugins(){return[DedupesTagsPlugin(),SortTagsPlugin(),TemplateParamsPlugin(),TitleTemplatePlugin(),ProvideTagHashPlugin(),EventHandlersPlugin(),DeprecatedTagAttrPlugin()]}function DOMPlugins(Jn={}){return[PatchDomOnEntryUpdatesPlugin({document:Jn==null?void 0:Jn.document,delayFn:Jn==null?void 0:Jn.domDelayFn})]}function createHead$1(Jn={}){const Xn=createHeadCore({...Jn,plugins:[...DOMPlugins(Jn),...(Jn==null?void 0:Jn.plugins)||[]]});return Jn.experimentalHashHydration&&Xn.resolvedOptions.document&&(Xn._hash=maybeGetSSRHash(Xn.resolvedOptions.document)),setActiveHead(Xn),Xn}function createHeadCore(Jn={}){let Xn=[],Qn={},Zn=0;const er=createHooks();Jn!=null&&Jn.hooks&&er.addHooks(Jn.hooks),Jn.plugins=[...CorePlugins(),...(Jn==null?void 0:Jn.plugins)||[]],Jn.plugins.forEach(rr=>rr.hooks&&er.addHooks(rr.hooks)),Jn.document=Jn.document||(IsBrowser$1?document:void 0);const tr=()=>er.callHook("entries:updated",nr),nr={resolvedOptions:Jn,headEntries(){return Xn},get hooks(){return er},use(rr){rr.hooks&&er.addHooks(rr.hooks)},push(rr,sr){const or={_i:Zn++,input:rr,_sde:{}};return sr!=null&&sr.mode&&(or._m=sr==null?void 0:sr.mode),sr!=null&&sr.transform&&(or._t=sr==null?void 0:sr.transform),Xn.push(or),tr(),{dispose(){Xn=Xn.filter(ir=>ir._i!==or._i?!0:(Qn={...Qn,...ir._sde||{}},ir._sde={},tr(),!1))},patch(ir){Xn=Xn.map(ar=>(ar._i===or._i&&(or.input=ar.input=ir,tr()),ar))}}},async resolveTags(){const rr={tags:[],entries:[...Xn]};await er.callHook("entries:resolve",rr);for(const sr of rr.entries){const or=sr._t||(ir=>ir);if(sr.resolvedInput=or(sr.resolvedInput||sr.input),sr.resolvedInput)for(const ir of await normaliseEntryTags(sr)){const ar={tag:ir,entry:sr,resolvedOptions:nr.resolvedOptions};await er.callHook("tag:normalise",ar),rr.tags.push(ar.tag)}}return await er.callHook("tags:resolve",rr),rr.tags},_popSideEffectQueue(){const rr={...Qn};return Qn={},rr},_elMap:{}};return nr.hooks.callHook("init",nr),nr}function resolveUnref(Jn){return typeof Jn=="function"?Jn():unref(Jn)}function resolveUnrefHeadInput(Jn,Xn=""){if(Jn instanceof Promise)return Jn;const Qn=resolveUnref(Jn);return!Jn||!Qn?Qn:Array.isArray(Qn)?Qn.map(Zn=>resolveUnrefHeadInput(Zn,Xn)):typeof Qn=="object"?Object.fromEntries(Object.entries(Qn).map(([Zn,er])=>Zn==="titleTemplate"||Zn.startsWith("on")?[Zn,unref(er)]:[Zn,resolveUnrefHeadInput(er,Zn)])):Qn}const Vue3=version.startsWith("3"),IsBrowser=typeof window<"u",headSymbol="usehead";function injectHead(){return getCurrentInstance()&&inject(headSymbol)||getActiveHead()}function vueInstall(Jn){return{install(Qn){Vue3&&(Qn.config.globalProperties.$unhead=Jn,Qn.config.globalProperties.$head=Jn,Qn.provide(headSymbol,Jn))}}.install}function createHead(Jn={}){const Xn=createHead$1({...Jn,domDelayFn:Qn=>setTimeout(()=>nextTick(()=>Qn()),10),plugins:[VueReactiveUseHeadPlugin(),...(Jn==null?void 0:Jn.plugins)||[]]});return Xn.install=vueInstall(Xn),Xn}function VueReactiveUseHeadPlugin(){return{hooks:{"entries:resolve":function(Jn){for(const Xn of Jn.entries)Xn.resolvedInput=resolveUnrefHeadInput(Xn.input)}}}}function clientUseHead(Jn,Xn={}){const Qn=injectHead(),Zn=ref(!1),er=ref({});watchEffect(()=>{er.value=Zn.value?{}:resolveUnrefHeadInput(Jn)});const tr=Qn.push(er.value,Xn);return watch(er,rr=>{tr.patch(rr)}),getCurrentInstance()&&(onBeforeUnmount(()=>{tr.dispose()}),onDeactivated(()=>{Zn.value=!0}),onActivated(()=>{Zn.value=!1})),tr}function serverUseHead(Jn,Xn={}){return injectHead().push(Jn,Xn)}function useHead(Jn,Xn={}){var Zn;const Qn=injectHead();if(Qn){const er=IsBrowser||!!((Zn=Qn.resolvedOptions)!=null&&Zn.document);return Xn.mode==="server"&&er||Xn.mode==="client"&&!er?void 0:er?clientUseHead(Jn,Xn):serverUseHead(Jn,Xn)}}const fieldContentRegExp=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function parse$1(Jn,Xn){if(typeof Jn!="string")throw new TypeError("argument str must be a string");const Qn={},er=(Xn||{}).decode||decode$1;let tr=0;for(;tr<Jn.length;){const nr=Jn.indexOf("=",tr);if(nr===-1)break;let rr=Jn.indexOf(";",tr);if(rr===-1)rr=Jn.length;else if(rr<nr){tr=Jn.lastIndexOf(";",nr-1)+1;continue}const sr=Jn.slice(tr,nr).trim();if(Qn[sr]===void 0){let or=Jn.slice(nr+1,rr).trim();or.codePointAt(0)===34&&(or=or.slice(1,-1)),Qn[sr]=tryDecode(or,er)}tr=rr+1}return Qn}function serialize(Jn,Xn,Qn){const Zn=Qn||{},er=Zn.encode||encode;if(typeof er!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(Jn))throw new TypeError("argument name is invalid");const tr=er(Xn);if(tr&&!fieldContentRegExp.test(tr))throw new TypeError("argument val is invalid");let nr=Jn+"="+tr;if(Zn.maxAge!==void 0&&Zn.maxAge!==null){const rr=Zn.maxAge-0;if(Number.isNaN(rr)||!Number.isFinite(rr))throw new TypeError("option maxAge is invalid");nr+="; Max-Age="+Math.floor(rr)}if(Zn.domain){if(!fieldContentRegExp.test(Zn.domain))throw new TypeError("option domain is invalid");nr+="; Domain="+Zn.domain}if(Zn.path){if(!fieldContentRegExp.test(Zn.path))throw new TypeError("option path is invalid");nr+="; Path="+Zn.path}if(Zn.expires){if(!isDate(Zn.expires)||Number.isNaN(Zn.expires.valueOf()))throw new TypeError("option expires is invalid");nr+="; Expires="+Zn.expires.toUTCString()}if(Zn.httpOnly&&(nr+="; HttpOnly"),Zn.secure&&(nr+="; Secure"),Zn.priority)switch(typeof Zn.priority=="string"?Zn.priority.toLowerCase():Zn.priority){case"low":nr+="; Priority=Low";break;case"medium":nr+="; Priority=Medium";break;case"high":nr+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(Zn.sameSite)switch(typeof Zn.sameSite=="string"?Zn.sameSite.toLowerCase():Zn.sameSite){case!0:nr+="; SameSite=Strict";break;case"lax":nr+="; SameSite=Lax";break;case"strict":nr+="; SameSite=Strict";break;case"none":nr+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return nr}function isDate(Jn){return Object.prototype.toString.call(Jn)==="[object Date]"||Jn instanceof Date}function tryDecode(Jn,Xn){try{return Xn(Jn)}catch{return Jn}}function decode$1(Jn){return Jn.includes("%")?decodeURIComponent(Jn):Jn}function encode(Jn){return encodeURIComponent(Jn)}function isObject$2(Jn){return Jn!==null&&typeof Jn=="object"}function _defu(Jn,Xn,Qn=".",Zn){if(!isObject$2(Xn))return _defu(Jn,{},Qn,Zn);const er=Object.assign({},Xn);for(const tr in Jn){if(tr==="__proto__"||tr==="constructor")continue;const nr=Jn[tr];nr!=null&&(Zn&&Zn(er,tr,nr,Qn)||(Array.isArray(nr)&&Array.isArray(er[tr])?er[tr]=[...nr,...er[tr]]:isObject$2(nr)&&isObject$2(er[tr])?er[tr]=_defu(nr,er[tr],(Qn?`${Qn}.`:"")+tr.toString(),Zn):er[tr]=nr))}return er}function createDefu(Jn){return(...Xn)=>Xn.reduce((Qn,Zn)=>_defu(Qn,Zn,"",Jn),{})}const defu=createDefu();class H3Error extends Error{constructor(){super(...arguments),this.statusCode=500,this.fatal=!1,this.unhandled=!1,this.statusMessage=void 0}toJSON(){const Xn={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(Xn.statusMessage=sanitizeStatusMessage(this.statusMessage)),this.data!==void 0&&(Xn.data=this.data),Xn}}H3Error.__h3_error__=!0;function createError$1(Jn){if(typeof Jn=="string")return new H3Error(Jn);if(isError(Jn))return Jn;const Xn=new H3Error(Jn.message??Jn.statusMessage,Jn.cause?{cause:Jn.cause}:void 0);if("stack"in Jn)try{Object.defineProperty(Xn,"stack",{get(){return Jn.stack}})}catch{try{Xn.stack=Jn.stack}catch{}}if(Jn.data&&(Xn.data=Jn.data),Jn.statusCode?Xn.statusCode=sanitizeStatusCode(Jn.statusCode,Xn.statusCode):Jn.status&&(Xn.statusCode=sanitizeStatusCode(Jn.status,Xn.statusCode)),Jn.statusMessage?Xn.statusMessage=Jn.statusMessage:Jn.statusText&&(Xn.statusMessage=Jn.statusText),Xn.statusMessage){const Qn=Xn.statusMessage;sanitizeStatusMessage(Xn.statusMessage)!==Qn&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future `statusMessage` will be sanitized by default.")}return Jn.fatal!==void 0&&(Xn.fatal=Jn.fatal),Jn.unhandled!==void 0&&(Xn.unhandled=Jn.unhandled),Xn}function isError(Jn){var Xn;return((Xn=Jn==null?void 0:Jn.constructor)==null?void 0:Xn.__h3_error__)===!0}const DISALLOWED_STATUS_CHARS=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(Jn=""){return Jn.replace(DISALLOWED_STATUS_CHARS,"")}function sanitizeStatusCode(Jn,Xn=200){return!Jn||(typeof Jn=="string"&&(Jn=Number.parseInt(Jn,10)),Jn<100||Jn>999)?Xn:Jn}typeof setImmediate<"u"&&setImmediate;function useState(...Jn){const Xn=typeof Jn[Jn.length-1]=="string"?Jn.pop():void 0;typeof Jn[0]!="string"&&Jn.unshift(Xn);const[Qn,Zn]=Jn;if(!Qn||typeof Qn!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+Qn);if(Zn!==void 0&&typeof Zn!="function")throw new Error("[nuxt] [useState] init must be a function: "+Zn);const er="$s"+Qn,tr=useNuxtApp(),nr=toRef(tr.payload.state,er);if(nr.value===void 0&&Zn){const rr=Zn();if(isRef(rr))return tr.payload.state[er]=rr,rr;nr.value=rr}return nr}const useRouter=()=>{var Jn;return(Jn=useNuxtApp())==null?void 0:Jn.$router},useRoute=()=>hasInjectionContext()?inject("_route",useNuxtApp()._route):useNuxtApp()._route,defineNuxtRouteMiddleware=Jn=>Jn,isProcessingMiddleware=()=>{try{if(useNuxtApp()._processingMiddleware)return!0}catch{return!0}return!1},navigateTo=(Jn,Xn)=>{Jn||(Jn="/");const Qn=typeof Jn=="string"?Jn:Jn.path||"/",Zn=(Xn==null?void 0:Xn.external)||hasProtocol(Qn,{acceptRelative:!0});if(Zn&&!(Xn!=null&&Xn.external))throw new Error("Navigating to external URL is not allowed by default. Use `navigateTo (url, { external: true })`.");if(Zn&&parseURL$1(Qn).protocol==="script:")throw new Error("Cannot navigate to an URL with script protocol.");const er=isProcessingMiddleware();if(!Zn&&er)return Jn;const tr=useRouter();return Zn?(Xn!=null&&Xn.replace?location.replace(Qn):location.href=Qn,Promise.resolve()):Xn!=null&&Xn.replace?tr.replace(Jn):tr.push(Jn)},useError=()=>toRef(useNuxtApp().payload,"error"),showError=Jn=>{const Xn=createError(Jn);try{const Qn=useNuxtApp(),Zn=useError();Qn.hooks.callHook("app:error",Xn),Zn.value=Zn.value||Xn}catch{throw Xn}return Xn},clearError=async(Jn={})=>{const Xn=useNuxtApp(),Qn=useError();Xn.callHook("app:error:cleared",Jn),Jn.redirect&&await useRouter().replace(Jn.redirect),Qn.value=null},isNuxtError=Jn=>!!(Jn&&typeof Jn=="object"&&"__nuxt_error"in Jn),createError=Jn=>{const Xn=createError$1(Jn);return Xn.__nuxt_error=!0,Xn},requestIdleCallback=globalThis.requestIdleCallback||(Jn=>{const Xn=Date.now(),Qn={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-Xn))};return setTimeout(()=>{Jn(Qn)},1)}),cancelIdleCallback=globalThis.cancelIdleCallback||(Jn=>{clearTimeout(Jn)}),onNuxtReady=Jn=>{const Xn=useNuxtApp();Xn.isHydrating?Xn.hooks.hookOnce("app:suspense:resolve",()=>{requestIdleCallback(Jn)}):requestIdleCallback(Jn)},CookieDefaults={path:"/",watch:!0,decode:Jn=>destr(decodeURIComponent(Jn)),encode:Jn=>encodeURIComponent(typeof Jn=="string"?Jn:JSON.stringify(Jn))};function useCookie(Jn,Xn){var tr;const Qn={...CookieDefaults,...Xn},Zn=readRawCookies(Qn)||{},er=ref(Zn[Jn]??((tr=Qn.default)==null?void 0:tr.call(Qn)));{const nr=()=>{writeClientCookie(Jn,er.value,Qn)};Qn.watch?watch(er,nr,{deep:Qn.watch!=="shallow"}):nr()}return er}function readRawCookies(Jn={}){return parse$1(document.cookie,Jn)}function serializeCookie(Jn,Xn,Qn={}){return Xn==null?serialize(Jn,Xn,{...Qn,maxAge:-1}):serialize(Jn,Xn,Qn)}function writeClientCookie(Jn,Xn,Qn={}){document.cookie=serializeCookie(Jn,Xn,Qn)}async function preloadRouteComponents(Jn,Xn=useRouter()){const{path:Qn,matched:Zn}=Xn.resolve(Jn);if(!Zn.length||(Xn._routePreloaded||(Xn._routePreloaded=new Set),Xn._routePreloaded.has(Qn)))return;const er=Xn._preloadPromises=Xn._preloadPromises||[];if(er.length>4)return Promise.all(er).then(()=>preloadRouteComponents(Jn,Xn));Xn._routePreloaded.add(Qn);const tr=Zn.map(nr=>{var rr;return(rr=nr.components)==null?void 0:rr.default}).filter(nr=>typeof nr=="function");for(const nr of tr){const rr=Promise.resolve(nr()).catch(()=>{}).finally(()=>er.splice(er.indexOf(rr)));er.push(rr)}await Promise.all(er)}const scriptRel="modulepreload",assetsURL=function(Jn,Xn){return Jn.startsWith(".")?new URL(Jn,Xn).href:Jn},seen={},___vitePreload=function(Xn,Qn,Zn){if(!Qn||Qn.length===0)return Xn();const er=document.getElementsByTagName("link");return Promise.all(Qn.map(tr=>{if(tr=assetsURL(tr,Zn),tr in seen)return;seen[tr]=!0;const nr=tr.endsWith(".css"),rr=nr?'[rel="stylesheet"]':"";if(!!Zn)for(let ir=er.length-1;ir>=0;ir--){const ar=er[ir];if(ar.href===tr&&(!nr||ar.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${tr}"]${rr}`))return;const or=document.createElement("link");if(or.rel=nr?"stylesheet":scriptRel,nr||(or.as="script",or.crossOrigin=""),or.href=tr,document.head.appendChild(or),nr)return new Promise((ir,ar)=>{or.addEventListener("load",ir),or.addEventListener("error",()=>ar(new Error(`Unable to preload CSS for ${tr}`)))})})).then(()=>Xn())},__vitePreload=(...Jn)=>___vitePreload(...Jn).catch(Xn=>{const Qn=new Event("nuxt.preloadError");throw Qn.payload=Xn,window.dispatchEvent(Qn),Xn}),UNDEFINED=-1,HOLE=-2,NAN=-3,POSITIVE_INFINITY=-4,NEGATIVE_INFINITY=-5,NEGATIVE_ZERO=-6;function parse(Jn,Xn){return unflatten(JSON.parse(Jn),Xn)}function unflatten(Jn,Xn){if(typeof Jn=="number")return er(Jn,!0);if(!Array.isArray(Jn)||Jn.length===0)throw new Error("Invalid input");const Qn=Jn,Zn=Array(Qn.length);function er(tr,nr=!1){if(tr===UNDEFINED)return;if(tr===NAN)return NaN;if(tr===POSITIVE_INFINITY)return 1/0;if(tr===NEGATIVE_INFINITY)return-1/0;if(tr===NEGATIVE_ZERO)return-0;if(nr)throw new Error("Invalid input");if(tr in Zn)return Zn[tr];const rr=Qn[tr];if(!rr||typeof rr!="object")Zn[tr]=rr;else if(Array.isArray(rr))if(typeof rr[0]=="string"){const sr=rr[0],or=Xn==null?void 0:Xn[sr];if(or)return Zn[tr]=or(er(rr[1]));switch(sr){case"Date":Zn[tr]=new Date(rr[1]);break;case"Set":const ir=new Set;Zn[tr]=ir;for(let cr=1;cr<rr.length;cr+=1)ir.add(er(rr[cr]));break;case"Map":const ar=new Map;Zn[tr]=ar;for(let cr=1;cr<rr.length;cr+=2)ar.set(er(rr[cr]),er(rr[cr+1]));break;case"RegExp":Zn[tr]=new RegExp(rr[1],rr[2]);break;case"Object":Zn[tr]=Object(rr[1]);break;case"BigInt":Zn[tr]=BigInt(rr[1]);break;case"null":const lr=Object.create(null);Zn[tr]=lr;for(let cr=1;cr<rr.length;cr+=2)lr[rr[cr]]=er(rr[cr+1]);break;default:throw new Error(`Unknown type ${sr}`)}}else{const sr=new Array(rr.length);Zn[tr]=sr;for(let or=0;or<rr.length;or+=1){const ir=rr[or];ir!==HOLE&&(sr[or]=er(ir))}}else{const sr={};Zn[tr]=sr;for(const or in rr){const ir=rr[or];sr[or]=er(ir)}}return Zn[tr]}return er(0)}const appHead={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"}],link:[],style:[],script:[],noscript:[],title:"New Recruit - Editor",base:{href:"/nr-editor/"}},appPageTransition=!1,appKeepalive=!1,appRootId="__nuxt",renderJsonPayloads=!0;function loadPayload(Jn,Xn={}){const Qn=_getPayloadURL(Jn,Xn),Zn=useNuxtApp(),er=Zn._payloadCache=Zn._payloadCache||{};return er[Qn]||(er[Qn]=_importPayload(Qn).then(tr=>tr||(delete er[Qn],null))),er[Qn]}const extension="json";function _getPayloadURL(Jn,Xn={}){const Qn=new URL(Jn,"http://localhost");if(Qn.search)throw new Error("Payload URL cannot contain search params: "+Jn);if(Qn.host!=="localhost"||hasProtocol(Qn.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+Jn);const Zn=Xn.hash||(Xn.fresh?Date.now():"");return joinURL(useRuntimeConfig().app.baseURL,Qn.pathname,Zn?`_payload.${Zn}.${extension}`:`_payload.${extension}`)}async function _importPayload(Jn){try{return renderJsonPayloads?parsePayload(await fetch(Jn).then(Xn=>Xn.text())):await __vitePreload(()=>import(Jn),[],import.meta.url).then(Xn=>Xn.default||Xn)}catch(Xn){console.warn("[nuxt] Cannot load payload ",Jn,Xn)}return null}function isPrerendered(){return!!useNuxtApp().payload.prerenderedAt}let payloadCache=null;async function getNuxtClientPayload(){if(payloadCache)return payloadCache;const Jn=document.getElementById("__NUXT_DATA__");if(!Jn)return{};const Xn=parsePayload(Jn.textContent||""),Qn=Jn.dataset.src?await _importPayload(Jn.dataset.src):void 0;return payloadCache={...Xn,...Qn,...window.__NUXT__},payloadCache}function parsePayload(Jn){return parse(Jn,useNuxtApp()._payloadRevivers)}function definePayloadReviver(Jn,Xn){useNuxtApp()._payloadRevivers[Jn]=Xn}function reloadNuxtApp(Jn={}){const Xn=Jn.path||window.location.pathname;let Qn={};try{Qn=JSON.parse(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(Jn.force||(Qn==null?void 0:Qn.path)!==Xn||(Qn==null?void 0:Qn.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:Xn,expires:Date.now()+(Jn.ttl??1e4)}))}catch{}if(Jn.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:useNuxtApp().payload.state}))}catch{}window.location.pathname!==Xn?window.location.href=Xn:window.location.reload()}}const firstNonUndefined=(...Jn)=>Jn.find(Xn=>Xn!==void 0),DEFAULT_EXTERNAL_REL_ATTRIBUTE="noopener noreferrer";function defineNuxtLink(Jn){const Xn=Jn.componentName||"NuxtLink",Qn=(Zn,er)=>{if(!Zn||Jn.trailingSlash!=="append"&&Jn.trailingSlash!=="remove")return Zn;const tr=Jn.trailingSlash==="append"?withTrailingSlash:withoutTrailingSlash;if(typeof Zn=="string")return tr(Zn,!0);const nr="path"in Zn?Zn.path:er(Zn).path;return{...Zn,name:void 0,path:tr(nr,!0)}};return defineComponent({name:Xn,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(Zn,{slots:er}){const tr=useRouter(),nr=computed(()=>{const ar=Zn.to||Zn.href||"";return Qn(ar,tr.resolve)}),rr=computed(()=>Zn.external||Zn.target&&Zn.target!=="_self"?!0:typeof nr.value=="object"?!1:nr.value===""||hasProtocol(nr.value,{acceptRelative:!0})),sr=ref(!1),or=ref(null),ir=ar=>{var lr;or.value=Zn.custom?(lr=ar==null?void 0:ar.$el)==null?void 0:lr.nextElementSibling:ar==null?void 0:ar.$el};if(Zn.prefetch!==!1&&Zn.noPrefetch!==!0&&Zn.target!=="_blank"&&!isSlowConnection()){const lr=useNuxtApp();let cr,dr=null;onMounted(()=>{const hr=useObserver();onNuxtReady(()=>{cr=requestIdleCallback(()=>{var pr;(pr=or==null?void 0:or.value)!=null&&pr.tagName&&(dr=hr.observe(or.value,async()=>{dr==null||dr(),dr=null;const fr=typeof nr.value=="string"?nr.value:tr.resolve(nr.value).fullPath;await Promise.all([lr.hooks.callHook("link:prefetch",fr).catch(()=>{}),!rr.value&&preloadRouteComponents(nr.value,tr).catch(()=>{})]),sr.value=!0}))})})}),onBeforeUnmount(()=>{cr&&cancelIdleCallback(cr),dr==null||dr(),dr=null})}return()=>{var hr,pr;if(!rr.value){const fr={ref:ir,to:nr.value,activeClass:Zn.activeClass||Jn.activeClass,exactActiveClass:Zn.exactActiveClass||Jn.exactActiveClass,replace:Zn.replace,ariaCurrentValue:Zn.ariaCurrentValue,custom:Zn.custom};return Zn.custom||(sr.value&&(fr.class=Zn.prefetchedClass||Jn.prefetchedClass),fr.rel=Zn.rel),h$2(resolveComponent("RouterLink"),fr,er.default)}const ar=typeof nr.value=="object"?((hr=tr.resolve(nr.value))==null?void 0:hr.href)??null:nr.value||null,lr=Zn.target||null,cr=Zn.noRel?null:firstNonUndefined(Zn.rel,Jn.externalRelAttribute,ar?DEFAULT_EXTERNAL_REL_ATTRIBUTE:"")||null,dr=()=>navigateTo(ar,{replace:Zn.replace});return Zn.custom?er.default?er.default({href:ar,navigate:dr,get route(){if(!ar)return;const fr=parseURL$1(ar);return{path:fr.pathname,fullPath:fr.pathname,get query(){return parseQuery$1(fr.search)},hash:fr.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:ar}},rel:cr,target:lr,isExternal:rr.value,isActive:!1,isExactActive:!1}):null:h$2("a",{ref:or,href:ar,rel:cr,target:lr},(pr=er.default)==null?void 0:pr.call(er))}}})}const __nuxt_component_0$2=defineNuxtLink({componentName:"NuxtLink"});function useObserver(){const Jn=useNuxtApp();if(Jn._observer)return Jn._observer;let Xn=null;const Qn=new Map,Zn=(tr,nr)=>(Xn||(Xn=new IntersectionObserver(rr=>{for(const sr of rr){const or=Qn.get(sr.target);(sr.isIntersecting||sr.intersectionRatio>0)&&or&&or()}})),Qn.set(tr,nr),Xn.observe(tr),()=>{Qn.delete(tr),Xn.unobserve(tr),Qn.size===0&&(Xn.disconnect(),Xn=null)});return Jn._observer={observe:Zn}}function isSlowConnection(){const Jn=navigator.connection;return!!(Jn&&(Jn.saveData||/2g/.test(Jn.effectiveType)))}const plugin$1=defineNuxtPlugin(Jn=>{const Xn=createPinia();return Jn.vueApp.use(Xn),setActivePinia(Xn),Jn.payload&&Jn.payload.pinia&&(Xn.state.value=Jn.payload.pinia),{provide:{pinia:Xn}}}),revivers={NuxtError:Jn=>createError(Jn),EmptyShallowRef:Jn=>shallowRef(Jn==="_"?void 0:JSON.parse(Jn)),EmptyRef:Jn=>ref(Jn==="_"?void 0:JSON.parse(Jn)),ShallowRef:Jn=>shallowRef(Jn),ShallowReactive:Jn=>shallowReactive(Jn),Ref:Jn=>ref(Jn),Reactive:Jn=>reactive(Jn)},revive_payload_client_4sVQNw7RlN=defineNuxtPlugin({name:"nuxt:revive-payload:client",order:-30,async setup(Jn){let Xn,Qn;for(const Zn in revivers)definePayloadReviver(Zn,revivers[Zn]);Object.assign(Jn.payload,([Xn,Qn]=executeAsync(()=>Jn.runWithContext(getNuxtClientPayload)),Xn=await Xn,Qn(),Xn)),window.__NUXT__=Jn.payload}},1),components_plugin_KR1HBZs4kY=defineNuxtPlugin({name:"nuxt:global-components"}),unhead_KgADcZ0jPj=defineNuxtPlugin({name:"nuxt:head",setup(Jn){const Qn=createHead();Qn.push(appHead),Jn.vueApp.use(Qn);{let Zn=!0;const er=()=>{Zn=!1,Qn.hooks.callHook("entries:updated",Qn)};Qn.hooks.hook("dom:beforeRender",tr=>{tr.shouldRender=!Zn}),Jn.hooks.hook("page:start",()=>{Zn=!0}),Jn.hooks.hook("page:finish",er),Jn.hooks.hook("app:suspense:resolve",er)}}});/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(Jn){return Jn.__esModule||Jn[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(Jn,Xn){const Qn={};for(const Zn in Xn){const er=Xn[Zn];Qn[Zn]=isArray(er)?er.map(Jn):Jn(er)}return Qn}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Jn=>Jn.replace(TRAILING_SLASH_RE,"");function parseURL(Jn,Xn,Qn="/"){let Zn,er={},tr="",nr="";const rr=Xn.indexOf("#");let sr=Xn.indexOf("?");return rr<sr&&rr>=0&&(sr=-1),sr>-1&&(Zn=Xn.slice(0,sr),tr=Xn.slice(sr+1,rr>-1?rr:Xn.length),er=Jn(tr)),rr>-1&&(Zn=Zn||Xn.slice(0,rr),nr=Xn.slice(rr,Xn.length)),Zn=resolveRelativePath(Zn??Xn,Qn),{fullPath:Zn+(tr&&"?")+tr+nr,path:Zn,query:er,hash:nr}}function stringifyURL(Jn,Xn){const Qn=Xn.query?Jn(Xn.query):"";return Xn.path+(Qn&&"?")+Qn+(Xn.hash||"")}function stripBase(Jn,Xn){return!Xn||!Jn.toLowerCase().startsWith(Xn.toLowerCase())?Jn:Jn.slice(Xn.length)||"/"}function isSameRouteLocation(Jn,Xn,Qn){const Zn=Xn.matched.length-1,er=Qn.matched.length-1;return Zn>-1&&Zn===er&&isSameRouteRecord(Xn.matched[Zn],Qn.matched[er])&&isSameRouteLocationParams(Xn.params,Qn.params)&&Jn(Xn.query)===Jn(Qn.query)&&Xn.hash===Qn.hash}function isSameRouteRecord(Jn,Xn){return(Jn.aliasOf||Jn)===(Xn.aliasOf||Xn)}function isSameRouteLocationParams(Jn,Xn){if(Object.keys(Jn).length!==Object.keys(Xn).length)return!1;for(const Qn in Jn)if(!isSameRouteLocationParamsValue(Jn[Qn],Xn[Qn]))return!1;return!0}function isSameRouteLocationParamsValue(Jn,Xn){return isArray(Jn)?isEquivalentArray(Jn,Xn):isArray(Xn)?isEquivalentArray(Xn,Jn):Jn===Xn}function isEquivalentArray(Jn,Xn){return isArray(Xn)?Jn.length===Xn.length&&Jn.every((Qn,Zn)=>Qn===Xn[Zn]):Jn.length===1&&Jn[0]===Xn}function resolveRelativePath(Jn,Xn){if(Jn.startsWith("/"))return Jn;if(!Jn)return Xn;const Qn=Xn.split("/"),Zn=Jn.split("/"),er=Zn[Zn.length-1];(er===".."||er===".")&&Zn.push("");let tr=Qn.length-1,nr,rr;for(nr=0;nr<Zn.length;nr++)if(rr=Zn[nr],rr!==".")if(rr==="..")tr>1&&tr--;else break;return Qn.slice(0,tr).join("/")+"/"+Zn.slice(nr-(nr===Zn.length?1:0)).join("/")}var NavigationType;(function(Jn){Jn.pop="pop",Jn.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Jn){Jn.back="back",Jn.forward="forward",Jn.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Jn){if(!Jn)if(isBrowser){const Xn=document.querySelector("base");Jn=Xn&&Xn.getAttribute("href")||"/",Jn=Jn.replace(/^\w+:\/\/[^\/]+/,"")}else Jn="/";return Jn[0]!=="/"&&Jn[0]!=="#"&&(Jn="/"+Jn),removeTrailingSlash(Jn)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Jn,Xn){return Jn.replace(BEFORE_HASH_RE,"#")+Xn}function getElementPosition(Jn,Xn){const Qn=document.documentElement.getBoundingClientRect(),Zn=Jn.getBoundingClientRect();return{behavior:Xn.behavior,left:Zn.left-Qn.left-(Xn.left||0),top:Zn.top-Qn.top-(Xn.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(Jn){let Xn;if("el"in Jn){const Qn=Jn.el,Zn=typeof Qn=="string"&&Qn.startsWith("#"),er=typeof Qn=="string"?Zn?document.getElementById(Qn.slice(1)):document.querySelector(Qn):Qn;if(!er)return;Xn=getElementPosition(er,Jn)}else Xn=Jn;"scrollBehavior"in document.documentElement.style?window.scrollTo(Xn):window.scrollTo(Xn.left!=null?Xn.left:window.pageXOffset,Xn.top!=null?Xn.top:window.pageYOffset)}function getScrollKey(Jn,Xn){return(history.state?history.state.position-Xn:-1)+Jn}const scrollPositions=new Map;function saveScrollPosition(Jn,Xn){scrollPositions.set(Jn,Xn)}function getSavedScrollPosition(Jn){const Xn=scrollPositions.get(Jn);return scrollPositions.delete(Jn),Xn}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation$1(Jn,Xn){const{pathname:Qn,search:Zn,hash:er}=Xn,tr=Jn.indexOf("#");if(tr>-1){let rr=er.includes(Jn.slice(tr))?Jn.slice(tr).length:1,sr=er.slice(rr);return sr[0]!=="/"&&(sr="/"+sr),stripBase(sr,"")}return stripBase(Qn,Jn)+Zn+er}function useHistoryListeners(Jn,Xn,Qn,Zn){let er=[],tr=[],nr=null;const rr=({state:lr})=>{const cr=createCurrentLocation$1(Jn,location),dr=Qn.value,hr=Xn.value;let pr=0;if(lr){if(Qn.value=cr,Xn.value=lr,nr&&nr===dr){nr=null;return}pr=hr?lr.position-hr.position:0}else Zn(cr);er.forEach(fr=>{fr(Qn.value,dr,{delta:pr,type:NavigationType.pop,direction:pr?pr>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function sr(){nr=Qn.value}function or(lr){er.push(lr);const cr=()=>{const dr=er.indexOf(lr);dr>-1&&er.splice(dr,1)};return tr.push(cr),cr}function ir(){const{history:lr}=window;lr.state&&lr.replaceState(assign({},lr.state,{scroll:computeScrollPosition()}),"")}function ar(){for(const lr of tr)lr();tr=[],window.removeEventListener("popstate",rr),window.removeEventListener("beforeunload",ir)}return window.addEventListener("popstate",rr),window.addEventListener("beforeunload",ir,{passive:!0}),{pauseListeners:sr,listen:or,destroy:ar}}function buildState(Jn,Xn,Qn,Zn=!1,er=!1){return{back:Jn,current:Xn,forward:Qn,replaced:Zn,position:window.history.length,scroll:er?computeScrollPosition():null}}function useHistoryStateNavigation(Jn){const{history:Xn,location:Qn}=window,Zn={value:createCurrentLocation$1(Jn,Qn)},er={value:Xn.state};er.value||tr(Zn.value,{back:null,current:Zn.value,forward:null,position:Xn.length-1,replaced:!0,scroll:null},!0);function tr(sr,or,ir){const ar=Jn.indexOf("#"),lr=ar>-1?(Qn.host&&document.querySelector("base")?Jn:Jn.slice(ar))+sr:createBaseLocation()+Jn+sr;try{Xn[ir?"replaceState":"pushState"](or,"",lr),er.value=or}catch(cr){console.error(cr),Qn[ir?"replace":"assign"](lr)}}function nr(sr,or){const ir=assign({},Xn.state,buildState(er.value.back,sr,er.value.forward,!0),or,{position:er.value.position});tr(sr,ir,!0),Zn.value=sr}function rr(sr,or){const ir=assign({},er.value,Xn.state,{forward:sr,scroll:computeScrollPosition()});tr(ir.current,ir,!0);const ar=assign({},buildState(Zn.value,sr,null),{position:ir.position+1},or);tr(sr,ar,!1),Zn.value=sr}return{location:Zn,state:er,push:rr,replace:nr}}function createWebHistory(Jn){Jn=normalizeBase(Jn);const Xn=useHistoryStateNavigation(Jn),Qn=useHistoryListeners(Jn,Xn.state,Xn.location,Xn.replace);function Zn(tr,nr=!0){nr||Qn.pauseListeners(),history.go(tr)}const er=assign({location:"",base:Jn,go:Zn,createHref:createHref.bind(null,Jn)},Xn,Qn);return Object.defineProperty(er,"location",{enumerable:!0,get:()=>Xn.location.value}),Object.defineProperty(er,"state",{enumerable:!0,get:()=>Xn.state.value}),er}function createWebHashHistory(Jn){return Jn=location.host?Jn||location.pathname+location.search:"",Jn.includes("#")||(Jn+="#"),createWebHistory(Jn)}function isRouteLocation(Jn){return typeof Jn=="string"||Jn&&typeof Jn=="object"}function isRouteName(Jn){return typeof Jn=="string"||typeof Jn=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Jn){Jn[Jn.aborted=4]="aborted",Jn[Jn.cancelled=8]="cancelled",Jn[Jn.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Jn,Xn){return assign(new Error,{type:Jn,[NavigationFailureSymbol]:!0},Xn)}function isNavigationFailure(Jn,Xn){return Jn instanceof Error&&NavigationFailureSymbol in Jn&&(Xn==null||!!(Jn.type&Xn))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Jn,Xn){const Qn=assign({},BASE_PATH_PARSER_OPTIONS,Xn),Zn=[];let er=Qn.start?"^":"";const tr=[];for(const or of Jn){const ir=or.length?[]:[90];Qn.strict&&!or.length&&(er+="/");for(let ar=0;ar<or.length;ar++){const lr=or[ar];let cr=40+(Qn.sensitive?.25:0);if(lr.type===0)ar||(er+="/"),er+=lr.value.replace(REGEX_CHARS_RE,"\\$&"),cr+=40;else if(lr.type===1){const{value:dr,repeatable:hr,optional:pr,regexp:fr}=lr;tr.push({name:dr,repeatable:hr,optional:pr});const ur=fr||BASE_PARAM_PATTERN;if(ur!==BASE_PARAM_PATTERN){cr+=10;try{new RegExp(`(${ur})`)}catch(gr){throw new Error(`Invalid custom RegExp for param "${dr}" (${ur}): `+gr.message)}}let br=hr?`((?:${ur})(?:/(?:${ur}))*)`:`(${ur})`;ar||(br=pr&&or.length<2?`(?:/${br})`:"/"+br),pr&&(br+="?"),er+=br,cr+=20,pr&&(cr+=-8),hr&&(cr+=-20),ur===".*"&&(cr+=-50)}ir.push(cr)}Zn.push(ir)}if(Qn.strict&&Qn.end){const or=Zn.length-1;Zn[or][Zn[or].length-1]+=.7000000000000001}Qn.strict||(er+="/?"),Qn.end?er+="$":Qn.strict&&(er+="(?:/|$)");const nr=new RegExp(er,Qn.sensitive?"":"i");function rr(or){const ir=or.match(nr),ar={};if(!ir)return null;for(let lr=1;lr<ir.length;lr++){const cr=ir[lr]||"",dr=tr[lr-1];ar[dr.name]=cr&&dr.repeatable?cr.split("/"):cr}return ar}function sr(or){let ir="",ar=!1;for(const lr of Jn){(!ar||!ir.endsWith("/"))&&(ir+="/"),ar=!1;for(const cr of lr)if(cr.type===0)ir+=cr.value;else if(cr.type===1){const{value:dr,repeatable:hr,optional:pr}=cr,fr=dr in or?or[dr]:"";if(isArray(fr)&&!hr)throw new Error(`Provided param "${dr}" is an array but it is not repeatable (* or + modifiers)`);const ur=isArray(fr)?fr.join("/"):fr;if(!ur)if(pr)lr.length<2&&(ir.endsWith("/")?ir=ir.slice(0,-1):ar=!0);else throw new Error(`Missing required param "${dr}"`);ir+=ur}}return ir||"/"}return{re:nr,score:Zn,keys:tr,parse:rr,stringify:sr}}function compareScoreArray(Jn,Xn){let Qn=0;for(;Qn<Jn.length&&Qn<Xn.length;){const Zn=Xn[Qn]-Jn[Qn];if(Zn)return Zn;Qn++}return Jn.length<Xn.length?Jn.length===1&&Jn[0]===40+40?-1:1:Jn.length>Xn.length?Xn.length===1&&Xn[0]===40+40?1:-1:0}function comparePathParserScore(Jn,Xn){let Qn=0;const Zn=Jn.score,er=Xn.score;for(;Qn<Zn.length&&Qn<er.length;){const tr=compareScoreArray(Zn[Qn],er[Qn]);if(tr)return tr;Qn++}if(Math.abs(er.length-Zn.length)===1){if(isLastScoreNegative(Zn))return 1;if(isLastScoreNegative(er))return-1}return er.length-Zn.length}function isLastScoreNegative(Jn){const Xn=Jn[Jn.length-1];return Jn.length>0&&Xn[Xn.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Jn){if(!Jn)return[[]];if(Jn==="/")return[[ROOT_TOKEN]];if(!Jn.startsWith("/"))throw new Error(`Invalid path "${Jn}"`);function Xn(cr){throw new Error(`ERR (${Qn})/"${or}": ${cr}`)}let Qn=0,Zn=Qn;const er=[];let tr;function nr(){tr&&er.push(tr),tr=[]}let rr=0,sr,or="",ir="";function ar(){or&&(Qn===0?tr.push({type:0,value:or}):Qn===1||Qn===2||Qn===3?(tr.length>1&&(sr==="*"||sr==="+")&&Xn(`A repeatable param (${or}) must be alone in its segment. eg: '/:ids+.`),tr.push({type:1,value:or,regexp:ir,repeatable:sr==="*"||sr==="+",optional:sr==="*"||sr==="?"})):Xn("Invalid state to consume buffer"),or="")}function lr(){or+=sr}for(;rr<Jn.length;){if(sr=Jn[rr++],sr==="\\"&&Qn!==2){Zn=Qn,Qn=4;continue}switch(Qn){case 0:sr==="/"?(or&&ar(),nr()):sr===":"?(ar(),Qn=1):lr();break;case 4:lr(),Qn=Zn;break;case 1:sr==="("?Qn=2:VALID_PARAM_RE.test(sr)?lr():(ar(),Qn=0,sr!=="*"&&sr!=="?"&&sr!=="+"&&rr--);break;case 2:sr===")"?ir[ir.length-1]=="\\"?ir=ir.slice(0,-1)+sr:Qn=3:ir+=sr;break;case 3:ar(),Qn=0,sr!=="*"&&sr!=="?"&&sr!=="+"&&rr--,ir="";break;default:Xn("Unknown state");break}}return Qn===2&&Xn(`Unfinished custom RegExp for param "${or}"`),ar(),nr(),er}function createRouteRecordMatcher(Jn,Xn,Qn){const Zn=tokensToParser(tokenizePath(Jn.path),Qn),er=assign(Zn,{record:Jn,parent:Xn,children:[],alias:[]});return Xn&&!er.record.aliasOf==!Xn.record.aliasOf&&Xn.children.push(er),er}function createRouterMatcher(Jn,Xn){const Qn=[],Zn=new Map;Xn=mergeOptions({strict:!1,end:!0,sensitive:!1},Xn);function er(ir){return Zn.get(ir)}function tr(ir,ar,lr){const cr=!lr,dr=normalizeRouteRecord(ir);dr.aliasOf=lr&&lr.record;const hr=mergeOptions(Xn,ir),pr=[dr];if("alias"in ir){const br=typeof ir.alias=="string"?[ir.alias]:ir.alias;for(const gr of br)pr.push(assign({},dr,{components:lr?lr.record.components:dr.components,path:gr,aliasOf:lr?lr.record:dr}))}let fr,ur;for(const br of pr){const{path:gr}=br;if(ar&&gr[0]!=="/"){const mr=ar.record.path,_r=mr[mr.length-1]==="/"?"":"/";br.path=ar.record.path+(gr&&_r+gr)}if(fr=createRouteRecordMatcher(br,ar,hr),lr?lr.alias.push(fr):(ur=ur||fr,ur!==fr&&ur.alias.push(fr),cr&&ir.name&&!isAliasRecord(fr)&&nr(ir.name)),dr.children){const mr=dr.children;for(let _r=0;_r<mr.length;_r++)tr(mr[_r],fr,lr&&lr.children[_r])}lr=lr||fr,(fr.record.components&&Object.keys(fr.record.components).length||fr.record.name||fr.record.redirect)&&sr(fr)}return ur?()=>{nr(ur)}:noop}function nr(ir){if(isRouteName(ir)){const ar=Zn.get(ir);ar&&(Zn.delete(ir),Qn.splice(Qn.indexOf(ar),1),ar.children.forEach(nr),ar.alias.forEach(nr))}else{const ar=Qn.indexOf(ir);ar>-1&&(Qn.splice(ar,1),ir.record.name&&Zn.delete(ir.record.name),ir.children.forEach(nr),ir.alias.forEach(nr))}}function rr(){return Qn}function sr(ir){let ar=0;for(;ar<Qn.length&&comparePathParserScore(ir,Qn[ar])>=0&&(ir.record.path!==Qn[ar].record.path||!isRecordChildOf(ir,Qn[ar]));)ar++;Qn.splice(ar,0,ir),ir.record.name&&!isAliasRecord(ir)&&Zn.set(ir.record.name,ir)}function or(ir,ar){let lr,cr={},dr,hr;if("name"in ir&&ir.name){if(lr=Zn.get(ir.name),!lr)throw createRouterError(1,{location:ir});hr=lr.record.name,cr=assign(paramsFromLocation(ar.params,lr.keys.filter(ur=>!ur.optional).map(ur=>ur.name)),ir.params&&paramsFromLocation(ir.params,lr.keys.map(ur=>ur.name))),dr=lr.stringify(cr)}else if("path"in ir)dr=ir.path,lr=Qn.find(ur=>ur.re.test(dr)),lr&&(cr=lr.parse(dr),hr=lr.record.name);else{if(lr=ar.name?Zn.get(ar.name):Qn.find(ur=>ur.re.test(ar.path)),!lr)throw createRouterError(1,{location:ir,currentLocation:ar});hr=lr.record.name,cr=assign({},ar.params,ir.params),dr=lr.stringify(cr)}const pr=[];let fr=lr;for(;fr;)pr.unshift(fr.record),fr=fr.parent;return{name:hr,path:dr,params:cr,matched:pr,meta:mergeMetaFields(pr)}}return Jn.forEach(ir=>tr(ir)),{addRoute:tr,resolve:or,removeRoute:nr,getRoutes:rr,getRecordMatcher:er}}function paramsFromLocation(Jn,Xn){const Qn={};for(const Zn of Xn)Zn in Jn&&(Qn[Zn]=Jn[Zn]);return Qn}function normalizeRouteRecord(Jn){return{path:Jn.path,redirect:Jn.redirect,name:Jn.name,meta:Jn.meta||{},aliasOf:void 0,beforeEnter:Jn.beforeEnter,props:normalizeRecordProps(Jn),children:Jn.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Jn?Jn.components||null:Jn.component&&{default:Jn.component}}}function normalizeRecordProps(Jn){const Xn={},Qn=Jn.props||!1;if("component"in Jn)Xn.default=Qn;else for(const Zn in Jn.components)Xn[Zn]=typeof Qn=="boolean"?Qn:Qn[Zn];return Xn}function isAliasRecord(Jn){for(;Jn;){if(Jn.record.aliasOf)return!0;Jn=Jn.parent}return!1}function mergeMetaFields(Jn){return Jn.reduce((Xn,Qn)=>assign(Xn,Qn.meta),{})}function mergeOptions(Jn,Xn){const Qn={};for(const Zn in Jn)Qn[Zn]=Zn in Xn?Xn[Zn]:Jn[Zn];return Qn}function isRecordChildOf(Jn,Xn){return Xn.children.some(Qn=>Qn===Jn||isRecordChildOf(Jn,Qn))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Jn){return encodeURI(""+Jn).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Jn){return commonEncode(Jn).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Jn){return commonEncode(Jn).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Jn){return encodeQueryValue(Jn).replace(EQUAL_RE,"%3D")}function encodePath(Jn){return commonEncode(Jn).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Jn){return Jn==null?"":encodePath(Jn).replace(SLASH_RE,"%2F")}function decode(Jn){try{return decodeURIComponent(""+Jn)}catch{}return""+Jn}function parseQuery(Jn){const Xn={};if(Jn===""||Jn==="?")return Xn;const Zn=(Jn[0]==="?"?Jn.slice(1):Jn).split("&");for(let er=0;er<Zn.length;++er){const tr=Zn[er].replace(PLUS_RE," "),nr=tr.indexOf("="),rr=decode(nr<0?tr:tr.slice(0,nr)),sr=nr<0?null:decode(tr.slice(nr+1));if(rr in Xn){let or=Xn[rr];isArray(or)||(or=Xn[rr]=[or]),or.push(sr)}else Xn[rr]=sr}return Xn}function stringifyQuery(Jn){let Xn="";for(let Qn in Jn){const Zn=Jn[Qn];if(Qn=encodeQueryKey(Qn),Zn==null){Zn!==void 0&&(Xn+=(Xn.length?"&":"")+Qn);continue}(isArray(Zn)?Zn.map(tr=>tr&&encodeQueryValue(tr)):[Zn&&encodeQueryValue(Zn)]).forEach(tr=>{tr!==void 0&&(Xn+=(Xn.length?"&":"")+Qn,tr!=null&&(Xn+="="+tr))})}return Xn}function normalizeQuery(Jn){const Xn={};for(const Qn in Jn){const Zn=Jn[Qn];Zn!==void 0&&(Xn[Qn]=isArray(Zn)?Zn.map(er=>er==null?null:""+er):Zn==null?Zn:""+Zn)}return Xn}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Jn=[];function Xn(Zn){return Jn.push(Zn),()=>{const er=Jn.indexOf(Zn);er>-1&&Jn.splice(er,1)}}function Qn(){Jn=[]}return{add:Xn,list:()=>Jn,reset:Qn}}function guardToPromiseFn(Jn,Xn,Qn,Zn,er){const tr=Zn&&(Zn.enterCallbacks[er]=Zn.enterCallbacks[er]||[]);return()=>new Promise((nr,rr)=>{const sr=ar=>{ar===!1?rr(createRouterError(4,{from:Qn,to:Xn})):ar instanceof Error?rr(ar):isRouteLocation(ar)?rr(createRouterError(2,{from:Xn,to:ar})):(tr&&Zn.enterCallbacks[er]===tr&&typeof ar=="function"&&tr.push(ar),nr())},or=Jn.call(Zn&&Zn.instances[er],Xn,Qn,sr);let ir=Promise.resolve(or);Jn.length<3&&(ir=ir.then(sr)),ir.catch(ar=>rr(ar))})}function extractComponentsGuards(Jn,Xn,Qn,Zn){const er=[];for(const tr of Jn)for(const nr in tr.components){let rr=tr.components[nr];if(!(Xn!=="beforeRouteEnter"&&!tr.instances[nr]))if(isRouteComponent(rr)){const or=(rr.__vccOpts||rr)[Xn];or&&er.push(guardToPromiseFn(or,Qn,Zn,tr,nr))}else{let sr=rr();er.push(()=>sr.then(or=>{if(!or)return Promise.reject(new Error(`Couldn't resolve component "${nr}" at "${tr.path}"`));const ir=isESModule(or)?or.default:or;tr.components[nr]=ir;const lr=(ir.__vccOpts||ir)[Xn];return lr&&guardToPromiseFn(lr,Qn,Zn,tr,nr)()}))}}return er}function isRouteComponent(Jn){return typeof Jn=="object"||"displayName"in Jn||"props"in Jn||"__vccOpts"in Jn}function useLink(Jn){const Xn=inject(routerKey),Qn=inject(routeLocationKey),Zn=computed(()=>Xn.resolve(unref(Jn.to))),er=computed(()=>{const{matched:sr}=Zn.value,{length:or}=sr,ir=sr[or-1],ar=Qn.matched;if(!ir||!ar.length)return-1;const lr=ar.findIndex(isSameRouteRecord.bind(null,ir));if(lr>-1)return lr;const cr=getOriginalPath(sr[or-2]);return or>1&&getOriginalPath(ir)===cr&&ar[ar.length-1].path!==cr?ar.findIndex(isSameRouteRecord.bind(null,sr[or-2])):lr}),tr=computed(()=>er.value>-1&&includesParams(Qn.params,Zn.value.params)),nr=computed(()=>er.value>-1&&er.value===Qn.matched.length-1&&isSameRouteLocationParams(Qn.params,Zn.value.params));function rr(sr={}){return guardEvent(sr)?Xn[unref(Jn.replace)?"replace":"push"](unref(Jn.to)).catch(noop):Promise.resolve()}return{route:Zn,href:computed(()=>Zn.value.href),isActive:tr,isExactActive:nr,navigate:rr}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Jn,{slots:Xn}){const Qn=reactive(useLink(Jn)),{options:Zn}=inject(routerKey),er=computed(()=>({[getLinkClass(Jn.activeClass,Zn.linkActiveClass,"router-link-active")]:Qn.isActive,[getLinkClass(Jn.exactActiveClass,Zn.linkExactActiveClass,"router-link-exact-active")]:Qn.isExactActive}));return()=>{const tr=Xn.default&&Xn.default(Qn);return Jn.custom?tr:h$2("a",{"aria-current":Qn.isExactActive?Jn.ariaCurrentValue:null,href:Qn.href,onClick:Qn.navigate,class:er.value},tr)}}}),RouterLink=RouterLinkImpl;function guardEvent(Jn){if(!(Jn.metaKey||Jn.altKey||Jn.ctrlKey||Jn.shiftKey)&&!Jn.defaultPrevented&&!(Jn.button!==void 0&&Jn.button!==0)){if(Jn.currentTarget&&Jn.currentTarget.getAttribute){const Xn=Jn.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(Xn))return}return Jn.preventDefault&&Jn.preventDefault(),!0}}function includesParams(Jn,Xn){for(const Qn in Xn){const Zn=Xn[Qn],er=Jn[Qn];if(typeof Zn=="string"){if(Zn!==er)return!1}else if(!isArray(er)||er.length!==Zn.length||Zn.some((tr,nr)=>tr!==er[nr]))return!1}return!0}function getOriginalPath(Jn){return Jn?Jn.aliasOf?Jn.aliasOf.path:Jn.path:""}const getLinkClass=(Jn,Xn,Qn)=>Jn??Xn??Qn,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Jn,{attrs:Xn,slots:Qn}){const Zn=inject(routerViewLocationKey),er=computed(()=>Jn.route||Zn.value),tr=inject(viewDepthKey,0),nr=computed(()=>{let or=unref(tr);const{matched:ir}=er.value;let ar;for(;(ar=ir[or])&&!ar.components;)or++;return or}),rr=computed(()=>er.value.matched[nr.value]);provide(viewDepthKey,computed(()=>nr.value+1)),provide(matchedRouteKey,rr),provide(routerViewLocationKey,er);const sr=ref();return watch(()=>[sr.value,rr.value,Jn.name],([or,ir,ar],[lr,cr,dr])=>{ir&&(ir.instances[ar]=or,cr&&cr!==ir&&or&&or===lr&&(ir.leaveGuards.size||(ir.leaveGuards=cr.leaveGuards),ir.updateGuards.size||(ir.updateGuards=cr.updateGuards))),or&&ir&&(!cr||!isSameRouteRecord(ir,cr)||!lr)&&(ir.enterCallbacks[ar]||[]).forEach(hr=>hr(or))},{flush:"post"}),()=>{const or=er.value,ir=Jn.name,ar=rr.value,lr=ar&&ar.components[ir];if(!lr)return normalizeSlot(Qn.default,{Component:lr,route:or});const cr=ar.props[ir],dr=cr?cr===!0?or.params:typeof cr=="function"?cr(or):cr:null,pr=h$2(lr,assign({},dr,Xn,{onVnodeUnmounted:fr=>{fr.component.isUnmounted&&(ar.instances[ir]=null)},ref:sr}));return normalizeSlot(Qn.default,{Component:pr,route:or})||pr}}});function normalizeSlot(Jn,Xn){if(!Jn)return null;const Qn=Jn(Xn);return Qn.length===1?Qn[0]:Qn}const RouterView=RouterViewImpl;function createRouter(Jn){const Xn=createRouterMatcher(Jn.routes,Jn),Qn=Jn.parseQuery||parseQuery,Zn=Jn.stringifyQuery||stringifyQuery,er=Jn.history,tr=useCallbacks(),nr=useCallbacks(),rr=useCallbacks(),sr=shallowRef(START_LOCATION_NORMALIZED);let or=START_LOCATION_NORMALIZED;isBrowser&&Jn.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const ir=applyToParams.bind(null,Lr=>""+Lr),ar=applyToParams.bind(null,encodeParam),lr=applyToParams.bind(null,decode);function cr(Lr,jr){let Dr,Jr;return isRouteName(Lr)?(Dr=Xn.getRecordMatcher(Lr),Jr=jr):Jr=Lr,Xn.addRoute(Jr,Dr)}function dr(Lr){const jr=Xn.getRecordMatcher(Lr);jr&&Xn.removeRoute(jr)}function hr(){return Xn.getRoutes().map(Lr=>Lr.record)}function pr(Lr){return!!Xn.getRecordMatcher(Lr)}function fr(Lr,jr){if(jr=assign({},jr||sr.value),typeof Lr=="string"){const xr=parseURL(Qn,Lr,jr.path),Nr=Xn.resolve({path:xr.path},jr),Br=er.createHref(xr.fullPath);return assign(xr,Nr,{params:lr(Nr.params),hash:decode(xr.hash),redirectedFrom:void 0,href:Br})}let Dr;if("path"in Lr)Dr=assign({},Lr,{path:parseURL(Qn,Lr.path,jr.path).path});else{const xr=assign({},Lr.params);for(const Nr in xr)xr[Nr]==null&&delete xr[Nr];Dr=assign({},Lr,{params:ar(xr)}),jr.params=ar(jr.params)}const Jr=Xn.resolve(Dr,jr),rs=Lr.hash||"";Jr.params=ir(lr(Jr.params));const Ar=stringifyURL(Zn,assign({},Lr,{hash:encodeHash(rs),path:Jr.path})),Er=er.createHref(Ar);return assign({fullPath:Ar,hash:rs,query:Zn===stringifyQuery?normalizeQuery(Lr.query):Lr.query||{}},Jr,{redirectedFrom:void 0,href:Er})}function ur(Lr){return typeof Lr=="string"?parseURL(Qn,Lr,sr.value.path):assign({},Lr)}function br(Lr,jr){if(or!==Lr)return createRouterError(8,{from:jr,to:Lr})}function gr(Lr){return wr(Lr)}function mr(Lr){return gr(assign(ur(Lr),{replace:!0}))}function _r(Lr){const jr=Lr.matched[Lr.matched.length-1];if(jr&&jr.redirect){const{redirect:Dr}=jr;let Jr=typeof Dr=="function"?Dr(Lr):Dr;return typeof Jr=="string"&&(Jr=Jr.includes("?")||Jr.includes("#")?Jr=ur(Jr):{path:Jr},Jr.params={}),assign({query:Lr.query,hash:Lr.hash,params:"path"in Jr?{}:Lr.params},Jr)}}function wr(Lr,jr){const Dr=or=fr(Lr),Jr=sr.value,rs=Lr.state,Ar=Lr.force,Er=Lr.replace===!0,xr=_r(Dr);if(xr)return wr(assign(ur(xr),{state:typeof xr=="object"?assign({},rs,xr.state):rs,force:Ar,replace:Er}),jr||Dr);const Nr=Dr;Nr.redirectedFrom=jr;let Br;return!Ar&&isSameRouteLocation(Zn,Jr,Dr)&&(Br=createRouterError(16,{to:Nr,from:Jr}),vs(Jr,Jr,!0,!1)),(Br?Promise.resolve(Br):Pr(Nr,Jr)).catch(Mr=>isNavigationFailure(Mr)?isNavigationFailure(Mr,2)?Mr:gs(Mr):Yr(Mr,Nr,Jr)).then(Mr=>{if(Mr){if(isNavigationFailure(Mr,2))return wr(assign({replace:Er},ur(Mr.to),{state:typeof Mr.to=="object"?assign({},rs,Mr.to.state):rs,force:Ar}),jr||Nr)}else Mr=Rr(Nr,Jr,!0,Er,rs);return Tr(Nr,Jr,Mr),Mr})}function yr(Lr,jr){const Dr=br(Lr,jr);return Dr?Promise.reject(Dr):Promise.resolve()}function Cr(Lr){const jr=ps.values().next().value;return jr&&typeof jr.runWithContext=="function"?jr.runWithContext(Lr):Lr()}function Pr(Lr,jr){let Dr;const[Jr,rs,Ar]=extractChangingRecords(Lr,jr);Dr=extractComponentsGuards(Jr.reverse(),"beforeRouteLeave",Lr,jr);for(const xr of Jr)xr.leaveGuards.forEach(Nr=>{Dr.push(guardToPromiseFn(Nr,Lr,jr))});const Er=yr.bind(null,Lr,jr);return Dr.push(Er),ns(Dr).then(()=>{Dr=[];for(const xr of tr.list())Dr.push(guardToPromiseFn(xr,Lr,jr));return Dr.push(Er),ns(Dr)}).then(()=>{Dr=extractComponentsGuards(rs,"beforeRouteUpdate",Lr,jr);for(const xr of rs)xr.updateGuards.forEach(Nr=>{Dr.push(guardToPromiseFn(Nr,Lr,jr))});return Dr.push(Er),ns(Dr)}).then(()=>{Dr=[];for(const xr of Lr.matched)if(xr.beforeEnter&&!jr.matched.includes(xr))if(isArray(xr.beforeEnter))for(const Nr of xr.beforeEnter)Dr.push(guardToPromiseFn(Nr,Lr,jr));else Dr.push(guardToPromiseFn(xr.beforeEnter,Lr,jr));return Dr.push(Er),ns(Dr)}).then(()=>(Lr.matched.forEach(xr=>xr.enterCallbacks={}),Dr=extractComponentsGuards(Ar,"beforeRouteEnter",Lr,jr),Dr.push(Er),ns(Dr))).then(()=>{Dr=[];for(const xr of nr.list())Dr.push(guardToPromiseFn(xr,Lr,jr));return Dr.push(Er),ns(Dr)}).catch(xr=>isNavigationFailure(xr,8)?xr:Promise.reject(xr))}function Tr(Lr,jr,Dr){for(const Jr of rr.list())Cr(()=>Jr(Lr,jr,Dr))}function Rr(Lr,jr,Dr,Jr,rs){const Ar=br(Lr,jr);if(Ar)return Ar;const Er=jr===START_LOCATION_NORMALIZED,xr=isBrowser?history.state:{};Dr&&(Jr||Er?er.replace(Lr.fullPath,assign({scroll:Er&&xr&&xr.scroll},rs)):er.push(Lr.fullPath,rs)),sr.value=Lr,vs(Lr,jr,Dr,Er),gs()}let Or;function $r(){Or||(Or=er.listen((Lr,jr,Dr)=>{if(!ms.listening)return;const Jr=fr(Lr),rs=_r(Jr);if(rs){wr(assign(rs,{replace:!0}),Jr).catch(noop);return}or=Jr;const Ar=sr.value;isBrowser&&saveScrollPosition(getScrollKey(Ar.fullPath,Dr.delta),computeScrollPosition()),Pr(Jr,Ar).catch(Er=>isNavigationFailure(Er,12)?Er:isNavigationFailure(Er,2)?(wr(Er.to,Jr).then(xr=>{isNavigationFailure(xr,20)&&!Dr.delta&&Dr.type===NavigationType.pop&&er.go(-1,!1)}).catch(noop),Promise.reject()):(Dr.delta&&er.go(-Dr.delta,!1),Yr(Er,Jr,Ar))).then(Er=>{Er=Er||Rr(Jr,Ar,!1),Er&&(Dr.delta&&!isNavigationFailure(Er,8)?er.go(-Dr.delta,!1):Dr.type===NavigationType.pop&&isNavigationFailure(Er,20)&&er.go(-1,!1)),Tr(Jr,Ar,Er)}).catch(noop)}))}let Gr=useCallbacks(),Hr=useCallbacks(),Wr;function Yr(Lr,jr,Dr){gs(Lr);const Jr=Hr.list();return Jr.length?Jr.forEach(rs=>rs(Lr,jr,Dr)):console.error(Lr),Promise.reject(Lr)}function us(){return Wr&&sr.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Lr,jr)=>{Gr.add([Lr,jr])})}function gs(Lr){return Wr||(Wr=!Lr,$r(),Gr.list().forEach(([jr,Dr])=>Lr?Dr(Lr):jr()),Gr.reset()),Lr}function vs(Lr,jr,Dr,Jr){const{scrollBehavior:rs}=Jn;if(!isBrowser||!rs)return Promise.resolve();const Ar=!Dr&&getSavedScrollPosition(getScrollKey(Lr.fullPath,0))||(Jr||!Dr)&&history.state&&history.state.scroll||null;return nextTick().then(()=>rs(Lr,jr,Ar)).then(Er=>Er&&scrollToPosition(Er)).catch(Er=>Yr(Er,Lr,jr))}const cs=Lr=>er.go(Lr);let es;const ps=new Set,ms={currentRoute:sr,listening:!0,addRoute:cr,removeRoute:dr,hasRoute:pr,getRoutes:hr,resolve:fr,options:Jn,push:gr,replace:mr,go:cs,back:()=>cs(-1),forward:()=>cs(1),beforeEach:tr.add,beforeResolve:nr.add,afterEach:rr.add,onError:Hr.add,isReady:us,install(Lr){const jr=this;Lr.component("RouterLink",RouterLink),Lr.component("RouterView",RouterView),Lr.config.globalProperties.$router=jr,Object.defineProperty(Lr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(sr)}),isBrowser&&!es&&sr.value===START_LOCATION_NORMALIZED&&(es=!0,gr(er.location).catch(rs=>{}));const Dr={};for(const rs in START_LOCATION_NORMALIZED)Dr[rs]=computed(()=>sr.value[rs]);Lr.provide(routerKey,jr),Lr.provide(routeLocationKey,reactive(Dr)),Lr.provide(routerViewLocationKey,sr);const Jr=Lr.unmount;ps.add(Lr),Lr.unmount=function(){ps.delete(Lr),ps.size<1&&(or=START_LOCATION_NORMALIZED,Or&&Or(),Or=null,sr.value=START_LOCATION_NORMALIZED,es=!1,Wr=!1),Jr()}}};function ns(Lr){return Lr.reduce((jr,Dr)=>jr.then(()=>Cr(Dr)),Promise.resolve())}return ms}function extractChangingRecords(Jn,Xn){const Qn=[],Zn=[],er=[],tr=Math.max(Xn.matched.length,Jn.matched.length);for(let nr=0;nr<tr;nr++){const rr=Xn.matched[nr];rr&&(Jn.matched.find(or=>isSameRouteRecord(or,rr))?Zn.push(rr):Qn.push(rr));const sr=Jn.matched[nr];sr&&(Xn.matched.find(or=>isSameRouteRecord(or,sr))||er.push(sr))}return[Qn,Zn,er]}const _routes=[{name:"slugs",path:"/:slugs(.*)*",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_...slugs_.53b7d9de.js"),[],import.meta.url).then(Jn=>Jn.default||Jn)},{name:"catalogue",path:"/catalogue",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./catalogue.76a2db81.js"),["./catalogue.76a2db81.js","./Loading.cad49b74.js","./catalogue.d9bc4a64.js","./catalogue.f007a896.css","./warning_sign.958e77dc.js","./warning_sign.d392e129.css","./NodePath.08ea83fa.js","./catalogue.b7905b8d.css"],import.meta.url).then(Jn=>Jn.default||Jn)},{name:"index",path:"/",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./index.810c5cb9.js"),["./index.810c5cb9.js","./CreateSystem.c344afcc.js","./CreateSystem.ea4932ba.css","./warning_sign.958e77dc.js","./warning_sign.d392e129.css","./right2.91afc9dd.js","./index.ccf56f8a.css"],import.meta.url).then(Jn=>Jn.default||Jn)},{name:"scripts-id",path:"/scripts/:id()",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_id_.dbc1115f.js"),["./_id_.dbc1115f.js","./catalogue.d9bc4a64.js","./catalogue.f007a896.css","./NodePath.08ea83fa.js","./right2.91afc9dd.js","./_id_.e03ab298.css"],import.meta.url).then(Jn=>Jn.default||Jn)},{name:"search-id",path:"/search/:id()",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_id_.a6186107.js"),["./_id_.a6186107.js","./NodePath.08ea83fa.js"],import.meta.url).then(Jn=>Jn.default||Jn)},{name:"system",path:"/system",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./system.7f862d1f.js"),["./system.7f862d1f.js","./CreateSystem.c344afcc.js","./CreateSystem.ea4932ba.css","./Loading.cad49b74.js","./system.279e2974.css"],import.meta.url).then(Jn=>Jn.default||Jn)}],routerOptions0={scrollBehavior(Jn,Xn,Qn){const Zn=useNuxtApp();let er=Qn||void 0;if(!er&&Xn&&Jn&&Jn.meta.scrollToTop!==!1&&_isDifferentRoute(Xn,Jn)&&(er={left:0,top:0}),Jn.path===Xn.path){if(Xn.hash&&!Jn.hash)return{left:0,top:0};if(Jn.hash)return{el:Jn.hash,top:_getHashElementScrollMarginTop(Jn.hash)}}const tr=rr=>!!(rr.meta.pageTransition??appPageTransition),nr=tr(Xn)&&tr(Jn)?"page:transition:finish":"page:finish";return new Promise(rr=>{Zn.hooks.hookOnce(nr,async()=>{await nextTick(),Jn.hash&&(er={el:Jn.hash,top:_getHashElementScrollMarginTop(Jn.hash)}),rr(er)})})}};function _getHashElementScrollMarginTop(Jn){try{const Xn=document.querySelector(Jn);if(Xn)return parseFloat(getComputedStyle(Xn).scrollMarginTop)}catch{}return 0}function _isDifferentRoute(Jn,Xn){const Qn=Jn.matched[0]===Xn.matched[0];return!!(!Qn||Qn&&JSON.stringify(Jn.params)!==JSON.stringify(Xn.params))}const configRouterOptions={},routerOptions={...configRouterOptions,...routerOptions0},validate=defineNuxtRouteMiddleware(async Jn=>{var sr;let Xn,Qn;if(!((sr=Jn.meta)!=null&&sr.validate))return;const Zn=useNuxtApp(),er=useRouter();if(([Xn,Qn]=executeAsync(()=>Promise.resolve(Jn.meta.validate(Jn))),Xn=await Xn,Qn(),Xn)===!0)return;const nr=createError({statusCode:404,statusMessage:`Page Not Found: ${Jn.fullPath}`}),rr=er.beforeResolve(or=>{if(rr(),or===Jn){const ir=er.afterEach(async()=>{ir(),await Zn.runWithContext(()=>showError(nr)),window.history.pushState({},"",Jn.fullPath)});return!1}})}),globalMiddleware=[validate],namedMiddleware={};function createCurrentLocation(Jn,Xn){const{pathname:Qn,search:Zn,hash:er}=Xn,tr=Jn.indexOf("#");if(tr>-1){const rr=er.includes(Jn.slice(tr))?Jn.slice(tr).length:1;let sr=er.slice(rr);return sr[0]!=="/"&&(sr="/"+sr),withoutBase(sr,"")}return withoutBase(Qn,Jn)+Zn+er}const plugin=defineNuxtPlugin({name:"nuxt:router",enforce:"pre",async setup(Jn){var hr,pr;let Xn,Qn,Zn=useRuntimeConfig().app.baseURL;routerOptions.hashMode&&!Zn.includes("#")&&(Zn+="#");const er=((hr=routerOptions.history)==null?void 0:hr.call(routerOptions,Zn))??(routerOptions.hashMode?createWebHashHistory(Zn):createWebHistory(Zn)),tr=((pr=routerOptions.routes)==null?void 0:pr.call(routerOptions,_routes))??_routes;let nr;const rr=createCurrentLocation(Zn,window.location),sr=createRouter({...routerOptions,scrollBehavior:(fr,ur,br)=>{var gr;if(ur===START_LOCATION_NORMALIZED){nr=br;return}return sr.options.scrollBehavior=routerOptions.scrollBehavior,(gr=routerOptions.scrollBehavior)==null?void 0:gr.call(routerOptions,fr,START_LOCATION_NORMALIZED,nr||br)},history:er,routes:tr});Jn.vueApp.use(sr);const or=shallowRef(sr.currentRoute.value);sr.afterEach((fr,ur)=>{or.value=ur}),Object.defineProperty(Jn.vueApp.config.globalProperties,"previousRoute",{get:()=>or.value});const ir=shallowRef(sr.resolve(rr)),ar=()=>{ir.value=sr.currentRoute.value};Jn.hook("page:finish",ar),sr.afterEach((fr,ur)=>{var br,gr,mr,_r;((gr=(br=fr.matched[0])==null?void 0:br.components)==null?void 0:gr.default)===((_r=(mr=ur.matched[0])==null?void 0:mr.components)==null?void 0:_r.default)&&ar()});const lr={};for(const fr in ir.value)lr[fr]=computed(()=>ir.value[fr]);Jn._route=reactive(lr),Jn._middleware=Jn._middleware||{global:[],named:{}};const cr=useError();try{[Xn,Qn]=executeAsync(()=>sr.isReady()),await Xn,Qn()}catch(fr){[Xn,Qn]=executeAsync(()=>Jn.runWithContext(()=>showError(fr))),await Xn,Qn()}const dr=useState("_layout");return sr.beforeEach(async(fr,ur)=>{var br;fr.meta=reactive(fr.meta),Jn.isHydrating&&dr.value&&!isReadonly(fr.meta.layout)&&(fr.meta.layout=dr.value),Jn._processingMiddleware=!0;{const gr=new Set([...globalMiddleware,...Jn._middleware.global]);for(const mr of fr.matched){const _r=mr.meta.middleware;if(_r)if(Array.isArray(_r))for(const wr of _r)gr.add(wr);else gr.add(_r)}for(const mr of gr){const _r=typeof mr=="string"?Jn._middleware.named[mr]||await((br=namedMiddleware[mr])==null?void 0:br.call(namedMiddleware).then(yr=>yr.default||yr)):mr;if(!_r)throw new Error(`Unknown route middleware: '${mr}'.`);const wr=await Jn.runWithContext(()=>_r(fr,ur));if(!Jn.payload.serverRendered&&Jn.isHydrating&&(wr===!1||wr instanceof Error)){const yr=wr||createError$1({statusCode:404,statusMessage:`Page Not Found: ${rr}`});return await Jn.runWithContext(()=>showError(yr)),!1}if(wr||wr===!1)return wr}}}),sr.onError(()=>{delete Jn._processingMiddleware}),sr.afterEach(async(fr,ur,br)=>{delete Jn._processingMiddleware,!Jn.isHydrating&&cr.value&&await Jn.runWithContext(clearError),fr.matched.length===0&&await Jn.runWithContext(()=>showError(createError$1({statusCode:404,fatal:!1,statusMessage:`Page not found: ${fr.fullPath}`})))}),Jn.hooks.hookOnce("app:created",async()=>{try{await sr.replace({...sr.resolve(rr),name:void 0,force:!0}),sr.options.scrollBehavior=routerOptions.scrollBehavior}catch(fr){await Jn.runWithContext(()=>showError(fr))}}),{provide:{router:sr}}}},1),layouts={},prefetch_client_5tzzN0oIVL=defineNuxtPlugin({name:"nuxt:prefetch",setup(Jn){const Xn=useRouter();Jn.hooks.hook("app:mounted",()=>{Xn.beforeEach(async Qn=>{var er;const Zn=(er=Qn==null?void 0:Qn.meta)==null?void 0:er.layout;Zn&&typeof layouts[Zn]=="function"&&await layouts[Zn]()})}),Jn.hooks.hook("link:prefetch",Qn=>{var nr,rr,sr,or;if(hasProtocol(Qn))return;const Zn=Xn.resolve(Qn);if(!Zn)return;const er=(nr=Zn==null?void 0:Zn.meta)==null?void 0:nr.layout;let tr=Array.isArray((rr=Zn==null?void 0:Zn.meta)==null?void 0:rr.middleware)?(sr=Zn==null?void 0:Zn.meta)==null?void 0:sr.middleware:[(or=Zn==null?void 0:Zn.meta)==null?void 0:or.middleware];tr=tr.filter(ir=>typeof ir=="string");for(const ir of tr)typeof namedMiddleware[ir]=="function"&&namedMiddleware[ir]();er&&typeof layouts[er]=="function"&&layouts[er]()})}}),chunk_reload_client_UciE0i6zes=defineNuxtPlugin({name:"nuxt:chunk-reload",setup(Jn){const Xn=useRouter(),Qn=useRuntimeConfig(),Zn=new Set;Xn.beforeEach(()=>{Zn.clear()}),Jn.hook("app:chunkError",({error:er})=>{Zn.add(er)}),Xn.onError((er,tr)=>{if(Zn.has(er)){const rr="href"in tr&&tr.href.startsWith("#")?Qn.app.baseURL+tr.href:joinURL(Qn.app.baseURL,tr.fullPath);reloadNuxtApp({path:rr,persistState:!0})}})}}),payload_client_yVLowv6hDl=defineNuxtPlugin({name:"nuxt:payload",setup(Jn){isPrerendered()&&(Jn.hooks.hook("link:prefetch",async Xn=>{parseURL$1(Xn).protocol||await loadPayload(Xn)}),useRouter().beforeResolve(async(Xn,Qn)=>{if(Xn.path===Qn.path)return;const Zn=await loadPayload(Xn.path);Zn&&Object.assign(Jn.static.data,Zn.data)}))}}),usePersistedstateCookies=Jn=>({getItem:Xn=>useCookie(Xn,{...Jn,encode:encodeURIComponent,decode:decodeURIComponent}).value,setItem:(Xn,Qn)=>{useCookie(Xn,{...Jn,encode:encodeURIComponent,decode:decodeURIComponent}).value=Qn}}),usePersistedstateLocalStorage=()=>({getItem:Jn=>useNuxtApp().ssrContext?null:localStorage.getItem(Jn),setItem:(Jn,Xn)=>{useNuxtApp().ssrContext||localStorage.setItem(Jn,Xn)}}),usePersistedstateSessionStorage=()=>({getItem:Jn=>useNuxtApp().ssrContext?null:sessionStorage.getItem(Jn),setItem:(Jn,Xn)=>{useNuxtApp().ssrContext||sessionStorage.setItem(Jn,Xn)}}),persistedState={localStorage:usePersistedstateLocalStorage(),sessionStorage:usePersistedstateSessionStorage(),cookies:usePersistedstateCookies(),cookiesWithOptions:usePersistedstateCookies};function isObject$1(Jn){return typeof Jn=="object"&&Jn!==null}function normalizeOptions(Jn,Xn){return Jn=isObject$1(Jn)?Jn:Object.create(null),new Proxy(Jn,{get(Qn,Zn,er){return Zn==="key"?Reflect.get(Qn,Zn,er):Reflect.get(Qn,Zn,er)||Reflect.get(Xn,Zn,er)}})}function get(Jn,Xn){return Xn.reduce((Qn,Zn)=>Qn==null?void 0:Qn[Zn],Jn)}function set(Jn,Xn,Qn){return Xn.slice(0,-1).reduce((Zn,er)=>/^(__proto__)$/.test(er)?{}:Zn[er]=Zn[er]||{},Jn)[Xn[Xn.length-1]]=Qn,Jn}function pick(Jn,Xn){return Xn.reduce((Qn,Zn)=>{const er=Zn.split(".");return set(Qn,er,get(Jn,er))},{})}function hydrateStore(Jn,{storage:Xn,serializer:Qn,key:Zn,debug:er}){try{const tr=Xn==null?void 0:Xn.getItem(Zn);tr&&Jn.$patch(Qn==null?void 0:Qn.deserialize(tr))}catch(tr){er&&console.error(tr)}}function persistState(Jn,{storage:Xn,serializer:Qn,key:Zn,paths:er,debug:tr}){try{const nr=Array.isArray(er)?pick(Jn,er):Jn;Xn.setItem(Zn,Qn.serialize(nr))}catch(nr){tr&&console.error(nr)}}function createPersistedState(Jn={}){return Xn=>{const{auto:Qn=!1}=Jn,{options:{persist:Zn=Qn},store:er}=Xn;if(!Zn)return;const tr=(Array.isArray(Zn)?Zn.map(nr=>normalizeOptions(nr,Jn)):[normalizeOptions(Zn,Jn)]).map(({storage:nr=localStorage,beforeRestore:rr=null,afterRestore:sr=null,serializer:or={serialize:JSON.stringify,deserialize:JSON.parse},key:ir=er.$id,paths:ar=null,debug:lr=!1})=>{var cr;return{storage:nr,beforeRestore:rr,afterRestore:sr,serializer:or,key:((cr=Jn.key)!=null?cr:dr=>dr)(ir),paths:ar,debug:lr}});er.$persist=()=>{tr.forEach(nr=>{persistState(er.$state,nr)})},er.$hydrate=({runHooks:nr=!0}={})=>{tr.forEach(rr=>{const{beforeRestore:sr,afterRestore:or}=rr;nr&&(sr==null||sr(Xn)),hydrateStore(er,rr),nr&&(or==null||or(Xn))})},tr.forEach(nr=>{const{beforeRestore:rr,afterRestore:sr}=nr;rr==null||rr(Xn),hydrateStore(er,nr),sr==null||sr(Xn),er.$subscribe((or,ir)=>{persistState(ir,nr)},{detached:!0})})}}const plugin_1UohGbtF8v=defineNuxtPlugin(Jn=>{const{cookieOptions:Xn,debug:Qn,storage:Zn}=useRuntimeConfig().public.persistedState;Jn.$pinia.use(createPersistedState({storage:Zn==="cookies"?persistedState.cookiesWithOptions(Xn):persistedState[Zn],debug:Qn}))});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(Jn){return Jn&&Jn.__esModule&&Object.prototype.hasOwnProperty.call(Jn,"default")?Jn.default:Jn}var vClickOutside_umd={exports:{}};(function(Jn,Xn){(function(Qn,Zn){Jn.exports=Zn()})(commonjsGlobal,function(){var Qn="__v-click-outside",Zn=typeof window<"u",er=typeof navigator<"u",tr=Zn&&("ontouchstart"in window||er&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],nr=function(ir){var ar=ir.event,lr=ir.handler;(0,ir.middleware)(ar)&&lr(ar)},rr=function(ir,ar){var lr=function(ur){var br=typeof ur=="function";if(!br&&typeof ur!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:br?ur:ur.handler,middleware:ur.middleware||function(gr){return gr},events:ur.events||tr,isActive:ur.isActive!==!1,detectIframe:ur.detectIframe!==!1,capture:!!ur.capture}}(ar.value),cr=lr.handler,dr=lr.middleware,hr=lr.detectIframe,pr=lr.capture;if(lr.isActive){if(ir[Qn]=lr.events.map(function(ur){return{event:ur,srcTarget:document.documentElement,handler:function(br){return function(gr){var mr=gr.el,_r=gr.event,wr=gr.handler,yr=gr.middleware,Cr=_r.path||_r.composedPath&&_r.composedPath();(Cr?Cr.indexOf(mr)<0:!mr.contains(_r.target))&&nr({event:_r,handler:wr,middleware:yr})}({el:ir,event:br,handler:cr,middleware:dr})},capture:pr}}),hr){var fr={event:"blur",srcTarget:window,handler:function(ur){return function(br){var gr=br.el,mr=br.event,_r=br.handler,wr=br.middleware;setTimeout(function(){var yr=document.activeElement;yr&&yr.tagName==="IFRAME"&&!gr.contains(yr)&&nr({event:mr,handler:_r,middleware:wr})},0)}({el:ir,event:ur,handler:cr,middleware:dr})},capture:pr};ir[Qn]=[].concat(ir[Qn],[fr])}ir[Qn].forEach(function(ur){var br=ur.event,gr=ur.srcTarget,mr=ur.handler;return setTimeout(function(){ir[Qn]&&gr.addEventListener(br,mr,pr)},0)})}},sr=function(ir){(ir[Qn]||[]).forEach(function(ar){return ar.srcTarget.removeEventListener(ar.event,ar.handler,ar.capture)}),delete ir[Qn]},or=Zn?{beforeMount:rr,updated:function(ir,ar){var lr=ar.value,cr=ar.oldValue;JSON.stringify(lr)!==JSON.stringify(cr)&&(sr(ir),rr(ir,{value:lr}))},unmounted:sr}:{};return{install:function(ir){ir.directive("click-outside",or)},directive:or}})})(vClickOutside_umd);var vClickOutside_umdExports=vClickOutside_umd.exports;const vClickOutside=getDefaultExportFromCjs(vClickOutside_umdExports);function M$1(Jn){return{all:Jn=Jn||new Map,on:function(Xn,Qn){var Zn=Jn.get(Xn);Zn?Zn.push(Qn):Jn.set(Xn,[Qn])},off:function(Xn,Qn){var Zn=Jn.get(Xn);Zn&&(Qn?Zn.splice(Zn.indexOf(Qn)>>>0,1):Jn.set(Xn,[]))},emit:function(Xn,Qn){var Zn=Jn.get(Xn);Zn&&Zn.slice().map(function(er){er(Qn)}),(Zn=Jn.get("*"))&&Zn.slice().map(function(er){er(Xn,Qn)})}}}const d$1=M$1(),C$1=new Map,w$1={x:["left","center","right"],y:["top","bottom"]},R$1=(Jn=>()=>Jn++)(0),V$1=Jn=>typeof Jn!="string"?[]:Jn.split(/\s+/gi).filter(Xn=>Xn),W$1=Jn=>{typeof Jn=="string"&&(Jn=V$1(Jn));let Xn=null,Qn=null;return Jn.forEach(Zn=>{w$1.y.indexOf(Zn)!==-1&&(Qn=Zn),w$1.x.indexOf(Zn)!==-1&&(Xn=Zn)}),{x:Xn,y:Qn}};let Y$1=class{constructor(Xn,Qn,Zn){this.remaining=Qn,this.callback=Xn,this.notifyItem=Zn,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}};const m$1={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:Jn=>({height:[Jn.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},j$1=defineComponent({name:"velocity-group",emits:["after-leave","leave","enter"],methods:{enter(Jn,Xn){this.$emit("enter",Jn,Xn)},leave(Jn,Xn){this.$emit("leave",Jn,Xn)},afterLeave(){this.$emit("after-leave")}}}),v$1=(Jn,Xn)=>{const Qn=Jn.__vccOpts||Jn;for(const[Zn,er]of Xn)Qn[Zn]=er;return Qn};function G$1(Jn,Xn,Qn,Zn,er,tr){return openBlock(),createBlock(TransitionGroup,{tag:"span",css:!1,onEnter:Jn.enter,onLeave:Jn.leave,onAfterLeave:Jn.afterLeave},{default:withCtx(()=>[renderSlot(Jn.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}const z$1=v$1(j$1,[["render",G$1]]),F$1=defineComponent({name:"css-group",inheritAttrs:!1,props:{name:{type:String,required:!0}}});function P$1(Jn,Xn,Qn,Zn,er,tr){return openBlock(),createBlock(TransitionGroup,{tag:"span",name:Jn.name},{default:withCtx(()=>[renderSlot(Jn.$slots,"default")]),_:3},8,["name"])}const q$1=v$1(F$1,[["render",P$1]]),h$1="[-+]?[0-9]*.?[0-9]+",L$1=[{name:"px",regexp:new RegExp(`^${h$1}px$`)},{name:"%",regexp:new RegExp(`^${h$1}%$`)},{name:"px",regexp:new RegExp(`^${h$1}$`)}],J$1=Jn=>{if(Jn==="auto")return{type:Jn,value:0};for(let Xn=0;Xn<L$1.length;Xn++){const Qn=L$1[Xn];if(Qn.regexp.test(Jn))return{type:Qn.name,value:parseFloat(Jn)}}return{type:"",value:Jn}},K$1=Jn=>{switch(typeof Jn){case"number":return{type:"px",value:Jn};case"string":return J$1(Jn);default:return{type:"",value:Jn}}},f$1={IDLE:0,DESTROYED:2},Q$1=defineComponent({name:"notifications",components:{VelocityGroup:z$1,CssGroup:q$1},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:m$1.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css"},animation:{type:Object,default:m$1.velocityAnimation},animationName:{type:String,default:m$1.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},emits:["click","destroy","start"],data(){return{list:[],velocity:C$1.get("velocity"),timerControl:null}},computed:{actualWidth(){return K$1(this.width)},isVA(){return this.animationType==="velocity"},componentName(){return this.isVA?"velocity-group":"css-group"},styles(){const{x:Jn,y:Xn}=W$1(this.position),Qn=this.actualWidth.value,Zn=this.actualWidth.type,er={width:Qn+Zn};return Xn&&(er[Xn]="0px"),Jn&&(Jn==="center"?er.left=`calc(50% - ${+Qn/2}${Zn})`:er[Jn]="0px"),er},active(){return this.list.filter(Jn=>Jn.state!==f$1.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},mounted(){d$1.on("add",this.addItem),d$1.on("close",this.closeItem)},methods:{destroyIfNecessary(Jn){this.$emit("click",Jn),this.closeOnClick&&this.destroy(Jn)},pauseTimeout(){var Jn;this.pauseOnHover&&((Jn=this.timerControl)==null||Jn.pause())},resumeTimeout(){var Jn;this.pauseOnHover&&((Jn=this.timerControl)==null||Jn.resume())},addItem(Jn={}){if(Jn.group||(Jn.group=""),Jn.data||(Jn.data={}),this.group!==Jn.group)return;if(Jn.clean||Jn.clear){this.destroyAll();return}const Xn=typeof Jn.duration=="number"?Jn.duration:this.duration,Qn=typeof Jn.speed=="number"?Jn.speed:this.speed,Zn=typeof Jn.ignoreDuplicates=="boolean"?Jn.ignoreDuplicates:this.ignoreDuplicates,{title:er,text:tr,type:nr,data:rr,id:sr}=Jn,or={id:sr||R$1(),title:er,text:tr,type:nr,state:f$1.IDLE,speed:Qn,length:Xn+2*Qn,data:rr};Xn>=0&&(this.timerControl=new Y$1(()=>this.destroy(or),or.length,or));const ir=this.reverse?!this.botToTop:this.botToTop;let ar=-1;const lr=this.active.some(cr=>cr.title===Jn.title&&cr.text===Jn.text);(!Zn||!lr)&&(ir?(this.list.push(or),this.$emit("start",or),this.active.length>this.max&&(ar=0)):(this.list.unshift(or),this.$emit("start",or),this.active.length>this.max&&(ar=this.active.length-1)),ar!==-1&&this.destroy(this.active[ar]))},closeItem(Jn){this.destroyById(Jn)},notifyClass(Jn){return["vue-notification-template",this.classes,Jn.type||""]},notifyWrapperStyle(Jn){return this.isVA?void 0:{transition:`all ${Jn.speed}ms`}},destroy(Jn){clearTimeout(Jn.timer),Jn.state=f$1.DESTROYED,this.clean(),this.$emit("destroy",Jn)},destroyById(Jn){const Xn=this.list.find(Qn=>Qn.id===Jn);Xn&&this.destroy(Xn)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(Jn,Xn){var Qn;const Zn=(Qn=this.animation)==null?void 0:Qn[Jn];return typeof Zn=="function"?Zn.call(this,Xn):Zn},enter(Jn,Xn){if(!this.isVA)return;const Qn=this.getAnimation("enter",Jn);this.velocity(Jn,Qn,{duration:this.speed,complete:Xn})},leave(Jn,Xn){if(!this.isVA)return;const Qn=this.getAnimation("leave",Jn);this.velocity(Jn,Qn,{duration:this.speed,complete:Xn})},clean(){this.list=this.list.filter(Jn=>Jn.state!==f$1.DESTROYED)}}}),U$2=["data-id"],X$1=["onClick"],Z$1=["innerHTML"],tt$1=["innerHTML"];function et$1(Jn,Xn,Qn,Zn,er,tr){return openBlock(),createElementBlock("div",{class:"vue-notification-group",style:normalizeStyle(Jn.styles)},[(openBlock(),createBlock(resolveDynamicComponent(Jn.componentName),{name:Jn.animationName,onEnter:Jn.enter,onLeave:Jn.leave,onAfterLeave:Jn.clean},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Jn.active,nr=>(openBlock(),createElementBlock("div",{key:nr.id,class:"vue-notification-wrapper",style:normalizeStyle(Jn.notifyWrapperStyle(nr)),"data-id":nr.id,onMouseenter:Xn[0]||(Xn[0]=(...rr)=>Jn.pauseTimeout&&Jn.pauseTimeout(...rr)),onMouseleave:Xn[1]||(Xn[1]=(...rr)=>Jn.resumeTimeout&&Jn.resumeTimeout(...rr))},[renderSlot(Jn.$slots,"body",{class:normalizeClass([Jn.classes,nr.type]),item:nr,close:()=>Jn.destroy(nr)},()=>[createBaseVNode("div",{class:normalizeClass(Jn.notifyClass(nr)),onClick:rr=>Jn.destroyIfNecessary(nr)},[nr.title?(openBlock(),createElementBlock("div",{key:0,class:"notification-title",innerHTML:nr.title},null,8,Z$1)):createCommentVNode("",!0),createBaseVNode("div",{class:"notification-content",innerHTML:nr.text},null,8,tt$1)],10,X$1)])],44,U$2))),128))]),_:3},40,["name","onEnter","onLeave","onAfterLeave"]))],4)}const it$1=v$1(Q$1,[["render",et$1]]),A$1=Jn=>{typeof Jn=="string"&&(Jn={title:"",text:Jn}),typeof Jn=="object"&&d$1.emit("add",Jn)};A$1.close=Jn=>{d$1.emit("close",Jn)};function st$1(Jn,Xn={}){Object.entries(Xn).forEach(Zn=>C$1.set(...Zn));const Qn=Xn.name||"notify";Jn.config.globalProperties["$"+Qn]=A$1,Jn.component(Xn.componentName||"Notifications",it$1)}const at$1={install:st$1};(function(){var Jn;try{if(typeof document<"u"){var Xn=document.createElement("style");Xn.nonce=(Jn=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:Jn.content,Xn.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(Xn)}}catch(Qn){console.error("vite-plugin-css-injected-by-js",Qn)}})();function setAppearanceFont(Jn,Xn,Qn="sans-serif",Zn=16){const er=`font${Xn}`,tr=`font${Xn}Size`;let nr=Jn[er]||"sans-serif";document.documentElement.style.setProperty(`--${er}`,nr||Qn),document.documentElement.style.setProperty(`--${tr}`,(Jn[tr]||Zn)+"px")}var lodash_merge={exports:{}};lodash_merge.exports;(function(Jn,Xn){var Qn=200,Zn="__lodash_hash_undefined__",er=800,tr=16,nr=9007199254740991,rr="[object Arguments]",sr="[object Array]",or="[object AsyncFunction]",ir="[object Boolean]",ar="[object Date]",lr="[object Error]",cr="[object Function]",dr="[object GeneratorFunction]",hr="[object Map]",pr="[object Number]",fr="[object Null]",ur="[object Object]",br="[object Proxy]",gr="[object RegExp]",mr="[object Set]",_r="[object String]",wr="[object Undefined]",yr="[object WeakMap]",Cr="[object ArrayBuffer]",Pr="[object DataView]",Tr="[object Float32Array]",Rr="[object Float64Array]",Or="[object Int8Array]",$r="[object Int16Array]",Gr="[object Int32Array]",Hr="[object Uint8Array]",Wr="[object Uint8ClampedArray]",Yr="[object Uint16Array]",us="[object Uint32Array]",gs=/[\\^$.*+?()[\]{}|]/g,vs=/^\[object .+?Constructor\]$/,cs=/^(?:0|[1-9]\d*)$/,es={};es[Tr]=es[Rr]=es[Or]=es[$r]=es[Gr]=es[Hr]=es[Wr]=es[Yr]=es[us]=!0,es[rr]=es[sr]=es[Cr]=es[ir]=es[Pr]=es[ar]=es[lr]=es[cr]=es[hr]=es[pr]=es[ur]=es[gr]=es[mr]=es[_r]=es[yr]=!1;var ps=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ms=typeof self=="object"&&self&&self.Object===Object&&self,ns=ps||ms||Function("return this")(),Lr=Xn&&!Xn.nodeType&&Xn,jr=Lr&&!0&&Jn&&!Jn.nodeType&&Jn,Dr=jr&&jr.exports===Lr,Jr=Dr&&ps.process,rs=function(){try{var vr=jr&&jr.require&&jr.require("util").types;return vr||Jr&&Jr.binding&&Jr.binding("util")}catch{}}(),Ar=rs&&rs.isTypedArray;function Er(vr,kr,Ir){switch(Ir.length){case 0:return vr.call(kr);case 1:return vr.call(kr,Ir[0]);case 2:return vr.call(kr,Ir[0],Ir[1]);case 3:return vr.call(kr,Ir[0],Ir[1],Ir[2])}return vr.apply(kr,Ir)}function xr(vr,kr){for(var Ir=-1,qr=Array(vr);++Ir<vr;)qr[Ir]=kr(Ir);return qr}function Nr(vr){return function(kr){return vr(kr)}}function Br(vr,kr){return vr==null?void 0:vr[kr]}function Mr(vr,kr){return function(Ir){return vr(kr(Ir))}}var Kr=Array.prototype,Ur=Function.prototype,Vr=Object.prototype,Fr=ns["__core-js_shared__"],Xr=Ur.toString,zr=Vr.hasOwnProperty,Qr=function(){var vr=/[^.]+$/.exec(Fr&&Fr.keys&&Fr.keys.IE_PROTO||"");return vr?"Symbol(src)_1."+vr:""}(),Zr=Vr.toString,ts=Xr.call(Object),as=RegExp("^"+Xr.call(zr).replace(gs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),is=Dr?ns.Buffer:void 0,hs=ns.Symbol,_s=ns.Uint8Array,ws=is?is.allocUnsafe:void 0,Ps=Mr(Object.getPrototypeOf,Object),ks=Object.create,Ls=Vr.propertyIsEnumerable,bs=Kr.splice,ys=hs?hs.toStringTag:void 0,xs=function(){try{var vr=Vs(Object,"defineProperty");return vr({},"",{}),vr}catch{}}(),ho=is?is.isBuffer:void 0,Ys=Math.max,po=Date.now,Xs=Vs(ns,"Map"),Os=Vs(Object,"create"),go=function(){function vr(){}return function(kr){if(!Is(kr))return{};if(ks)return ks(kr);vr.prototype=kr;var Ir=new vr;return vr.prototype=void 0,Ir}}();function Ss(vr){var kr=-1,Ir=vr==null?0:vr.length;for(this.clear();++kr<Ir;){var qr=vr[kr];this.set(qr[0],qr[1])}}function mo(){this.__data__=Os?Os(null):{},this.size=0}function yo(vr){var kr=this.has(vr)&&delete this.__data__[vr];return this.size-=kr?1:0,kr}function vo(vr){var kr=this.__data__;if(Os){var Ir=kr[vr];return Ir===Zn?void 0:Ir}return zr.call(kr,vr)?kr[vr]:void 0}function bo(vr){var kr=this.__data__;return Os?kr[vr]!==void 0:zr.call(kr,vr)}function _o(vr,kr){var Ir=this.__data__;return this.size+=this.has(vr)?0:1,Ir[vr]=Os&&kr===void 0?Zn:kr,this}Ss.prototype.clear=mo,Ss.prototype.delete=yo,Ss.prototype.get=vo,Ss.prototype.has=bo,Ss.prototype.set=_o;function Cs(vr){var kr=-1,Ir=vr==null?0:vr.length;for(this.clear();++kr<Ir;){var qr=vr[kr];this.set(qr[0],qr[1])}}function Ao(){this.__data__=[],this.size=0}function Eo(vr){var kr=this.__data__,Ir=Bs(kr,vr);if(Ir<0)return!1;var qr=kr.length-1;return Ir==qr?kr.pop():bs.call(kr,Ir,1),--this.size,!0}function wo(vr){var kr=this.__data__,Ir=Bs(kr,vr);return Ir<0?void 0:kr[Ir][1]}function Co(vr){return Bs(this.__data__,vr)>-1}function ko(vr,kr){var Ir=this.__data__,qr=Bs(Ir,vr);return qr<0?(++this.size,Ir.push([vr,kr])):Ir[qr][1]=kr,this}Cs.prototype.clear=Ao,Cs.prototype.delete=Eo,Cs.prototype.get=wo,Cs.prototype.has=Co,Cs.prototype.set=ko;function Ts(vr){var kr=-1,Ir=vr==null?0:vr.length;for(this.clear();++kr<Ir;){var qr=vr[kr];this.set(qr[0],qr[1])}}function xo(){this.size=0,this.__data__={hash:new Ss,map:new(Xs||Cs),string:new Ss}}function So(vr){var kr=Fs(this,vr).delete(vr);return this.size-=kr?1:0,kr}function Io(vr){return Fs(this,vr).get(vr)}function To(vr){return Fs(this,vr).has(vr)}function Ro(vr,kr){var Ir=Fs(this,vr),qr=Ir.size;return Ir.set(vr,kr),this.size+=Ir.size==qr?0:1,this}Ts.prototype.clear=xo,Ts.prototype.delete=So,Ts.prototype.get=Io,Ts.prototype.has=To,Ts.prototype.set=Ro;function Rs(vr){var kr=this.__data__=new Cs(vr);this.size=kr.size}function Po(){this.__data__=new Cs,this.size=0}function Oo(vr){var kr=this.__data__,Ir=kr.delete(vr);return this.size=kr.size,Ir}function No(vr){return this.__data__.get(vr)}function $o(vr){return this.__data__.has(vr)}function Lo(vr,kr){var Ir=this.__data__;if(Ir instanceof Cs){var qr=Ir.__data__;if(!Xs||qr.length<Qn-1)return qr.push([vr,kr]),this.size=++Ir.size,this;Ir=this.__data__=new Ts(qr)}return Ir.set(vr,kr),this.size=Ir.size,this}Rs.prototype.clear=Po,Rs.prototype.delete=Oo,Rs.prototype.get=No,Rs.prototype.has=$o,Rs.prototype.set=Lo;function Bo(vr,kr){var Ir=Ks(vr),qr=!Ir&&js(vr),os=!Ir&&!qr&&no(vr),ls=!Ir&&!qr&&!os&&so(vr),fs=Ir||qr||os||ls,ss=fs?xr(vr.length,String):[],ds=ss.length;for(var Es in vr)(kr||zr.call(vr,Es))&&!(fs&&(Es=="length"||os&&(Es=="offset"||Es=="parent")||ls&&(Es=="buffer"||Es=="byteLength"||Es=="byteOffset")||eo(Es,ds)))&&ss.push(Es);return ss}function Hs(vr,kr,Ir){(Ir!==void 0&&!Us(vr[kr],Ir)||Ir===void 0&&!(kr in vr))&&Ds(vr,kr,Ir)}function Mo(vr,kr,Ir){var qr=vr[kr];(!(zr.call(vr,kr)&&Us(qr,Ir))||Ir===void 0&&!(kr in vr))&&Ds(vr,kr,Ir)}function Bs(vr,kr){for(var Ir=vr.length;Ir--;)if(Us(vr[Ir][0],kr))return Ir;return-1}function Ds(vr,kr,Ir){kr=="__proto__"&&xs?xs(vr,kr,{configurable:!0,enumerable:!0,value:Ir,writable:!0}):vr[kr]=Ir}var Fo=Xo();function Ms(vr){return vr==null?vr===void 0?wr:fr:ys&&ys in Object(vr)?Qo(vr):si(vr)}function Qs(vr){return Ns(vr)&&Ms(vr)==rr}function Uo(vr){if(!Is(vr)||ni(vr))return!1;var kr=zs(vr)?as:vs;return kr.test(li(vr))}function Ho(vr){return Ns(vr)&&ro(vr.length)&&!!es[Ms(vr)]}function Do(vr){if(!Is(vr))return ri(vr);var kr=to(vr),Ir=[];for(var qr in vr)qr=="constructor"&&(kr||!zr.call(vr,qr))||Ir.push(qr);return Ir}function Zs(vr,kr,Ir,qr,os){vr!==kr&&Fo(kr,function(ls,fs){if(os||(os=new Rs),Is(ls))Vo(vr,kr,fs,Ir,Zs,qr,os);else{var ss=qr?qr(Gs(vr,fs),ls,fs+"",vr,kr,os):void 0;ss===void 0&&(ss=ls),Hs(vr,fs,ss)}},oo)}function Vo(vr,kr,Ir,qr,os,ls,fs){var ss=Gs(vr,Ir),ds=Gs(kr,Ir),Es=fs.get(ds);if(Es){Hs(vr,Ir,Es);return}var As=ls?ls(ss,ds,Ir+"",vr,kr,fs):void 0,$s=As===void 0;if($s){var qs=Ks(ds),Js=!qs&&no(ds),ao=!qs&&!Js&&so(ds);As=ds,qs||Js||ao?Ks(ss)?As=ss:ci(ss)?As=qo(ss):Js?($s=!1,As=Ko(ds,!0)):ao?($s=!1,As=zo(ds,!0)):As=[]:ui(ds)||js(ds)?(As=ss,js(ss)?As=fi(ss):(!Is(ss)||zs(ss))&&(As=Zo(ds))):$s=!1}$s&&(fs.set(ds,As),os(As,ds,qr,ls,fs),fs.delete(ds)),Hs(vr,Ir,As)}function Go(vr,kr){return ii(oi(vr,kr,io),vr+"")}var jo=xs?function(vr,kr){return xs(vr,"toString",{configurable:!0,enumerable:!1,value:hi(kr),writable:!0})}:io;function Ko(vr,kr){if(kr)return vr.slice();var Ir=vr.length,qr=ws?ws(Ir):new vr.constructor(Ir);return vr.copy(qr),qr}function Wo(vr){var kr=new vr.constructor(vr.byteLength);return new _s(kr).set(new _s(vr)),kr}function zo(vr,kr){var Ir=kr?Wo(vr.buffer):vr.buffer;return new vr.constructor(Ir,vr.byteOffset,vr.length)}function qo(vr,kr){var Ir=-1,qr=vr.length;for(kr||(kr=Array(qr));++Ir<qr;)kr[Ir]=vr[Ir];return kr}function Jo(vr,kr,Ir,qr){var os=!Ir;Ir||(Ir={});for(var ls=-1,fs=kr.length;++ls<fs;){var ss=kr[ls],ds=qr?qr(Ir[ss],vr[ss],ss,Ir,vr):void 0;ds===void 0&&(ds=vr[ss]),os?Ds(Ir,ss,ds):Mo(Ir,ss,ds)}return Ir}function Yo(vr){return Go(function(kr,Ir){var qr=-1,os=Ir.length,ls=os>1?Ir[os-1]:void 0,fs=os>2?Ir[2]:void 0;for(ls=vr.length>3&&typeof ls=="function"?(os--,ls):void 0,fs&&ei(Ir[0],Ir[1],fs)&&(ls=os<3?void 0:ls,os=1),kr=Object(kr);++qr<os;){var ss=Ir[qr];ss&&vr(kr,ss,qr,ls)}return kr})}function Xo(vr){return function(kr,Ir,qr){for(var os=-1,ls=Object(kr),fs=qr(kr),ss=fs.length;ss--;){var ds=fs[vr?ss:++os];if(Ir(ls[ds],ds,ls)===!1)break}return kr}}function Fs(vr,kr){var Ir=vr.__data__;return ti(kr)?Ir[typeof kr=="string"?"string":"hash"]:Ir.map}function Vs(vr,kr){var Ir=Br(vr,kr);return Uo(Ir)?Ir:void 0}function Qo(vr){var kr=zr.call(vr,ys),Ir=vr[ys];try{vr[ys]=void 0;var qr=!0}catch{}var os=Zr.call(vr);return qr&&(kr?vr[ys]=Ir:delete vr[ys]),os}function Zo(vr){return typeof vr.constructor=="function"&&!to(vr)?go(Ps(vr)):{}}function eo(vr,kr){var Ir=typeof vr;return kr=kr??nr,!!kr&&(Ir=="number"||Ir!="symbol"&&cs.test(vr))&&vr>-1&&vr%1==0&&vr<kr}function ei(vr,kr,Ir){if(!Is(Ir))return!1;var qr=typeof kr;return(qr=="number"?Ws(Ir)&&eo(kr,Ir.length):qr=="string"&&kr in Ir)?Us(Ir[kr],vr):!1}function ti(vr){var kr=typeof vr;return kr=="string"||kr=="number"||kr=="symbol"||kr=="boolean"?vr!=="__proto__":vr===null}function ni(vr){return!!Qr&&Qr in vr}function to(vr){var kr=vr&&vr.constructor,Ir=typeof kr=="function"&&kr.prototype||Vr;return vr===Ir}function ri(vr){var kr=[];if(vr!=null)for(var Ir in Object(vr))kr.push(Ir);return kr}function si(vr){return Zr.call(vr)}function oi(vr,kr,Ir){return kr=Ys(kr===void 0?vr.length-1:kr,0),function(){for(var qr=arguments,os=-1,ls=Ys(qr.length-kr,0),fs=Array(ls);++os<ls;)fs[os]=qr[kr+os];os=-1;for(var ss=Array(kr+1);++os<kr;)ss[os]=qr[os];return ss[kr]=Ir(fs),Er(vr,this,ss)}}function Gs(vr,kr){if(!(kr==="constructor"&&typeof vr[kr]=="function")&&kr!="__proto__")return vr[kr]}var ii=ai(jo);function ai(vr){var kr=0,Ir=0;return function(){var qr=po(),os=tr-(qr-Ir);if(Ir=qr,os>0){if(++kr>=er)return arguments[0]}else kr=0;return vr.apply(void 0,arguments)}}function li(vr){if(vr!=null){try{return Xr.call(vr)}catch{}try{return vr+""}catch{}}return""}function Us(vr,kr){return vr===kr||vr!==vr&&kr!==kr}var js=Qs(function(){return arguments}())?Qs:function(vr){return Ns(vr)&&zr.call(vr,"callee")&&!Ls.call(vr,"callee")},Ks=Array.isArray;function Ws(vr){return vr!=null&&ro(vr.length)&&!zs(vr)}function ci(vr){return Ns(vr)&&Ws(vr)}var no=ho||pi;function zs(vr){if(!Is(vr))return!1;var kr=Ms(vr);return kr==cr||kr==dr||kr==or||kr==br}function ro(vr){return typeof vr=="number"&&vr>-1&&vr%1==0&&vr<=nr}function Is(vr){var kr=typeof vr;return vr!=null&&(kr=="object"||kr=="function")}function Ns(vr){return vr!=null&&typeof vr=="object"}function ui(vr){if(!Ns(vr)||Ms(vr)!=ur)return!1;var kr=Ps(vr);if(kr===null)return!0;var Ir=zr.call(kr,"constructor")&&kr.constructor;return typeof Ir=="function"&&Ir instanceof Ir&&Xr.call(Ir)==ts}var so=Ar?Nr(Ar):Ho;function fi(vr){return Jo(vr,oo(vr))}function oo(vr){return Ws(vr)?Bo(vr,!0):Do(vr)}var di=Yo(function(vr,kr,Ir){Zs(vr,kr,Ir)});function hi(vr){return function(){return vr}}function io(vr){return vr}function pi(){return!1}Jn.exports=di})(lodash_merge,lodash_merge.exports);var lodash_mergeExports=lodash_merge.exports;const merge=getDefaultExportFromCjs(lodash_mergeExports);function hexToRgb(Jn){const Xn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Jn);return Xn?{r:parseInt(Xn[1],16),g:parseInt(Xn[2],16),b:parseInt(Xn[3],16)}:null}async function updateCssVars(Jn,Xn){const Qn=document.documentElement;if(Jn.dark?Qn.classList.add("dark"):Qn.classList.remove("dark"),Jn.background){const er=hexToRgb(Jn.background);if(document.documentElement.style.setProperty("--bg",Jn.background),document.documentElement.style.setProperty("--popups_background",Jn.background),er!=null)for(const tr in er)document.documentElement.style.setProperty(`--bg-${tr}`,`${er[tr]}`)}if(Jn.title&&document.documentElement.style.setProperty("--title",Jn.title),Jn.forcesBackground?document.documentElement.style.setProperty("--forces_background",Jn.forcesBackground):Jn.title&&(document.documentElement.style.setProperty("--forces_background",Jn.title),Jn.forcesBackground=Jn.title),Jn.highlight){const er=hexToRgb(Jn.highlight);if(er!=null)for(const tr in er)document.documentElement.style.setProperty(`--highlight-${tr}`,`${er[tr]}`)}Jn.borderColor&&document.documentElement.style.setProperty("--box-border",`${Jn.borderColor}`);let Zn="";if(Jn.invertColors==!0?Zn="invert(100)":Jn.invertImages?Zn="":Zn="invert(0)",Jn.hue&&(Zn+=` hue-rotate(${Jn.hue}deg)`),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?document.documentElement.style.setProperty("--global-filter","none"):document.documentElement.style.setProperty("--global-filter",Zn),Jn.backgroundTexture&&document.documentElement.style.setProperty("--bg-texture",Jn.backgroundTexture),Jn.backgroundSize&&document.documentElement.style.setProperty("--backgroundSize",Jn.backgroundSize),Jn.inputRadius&&document.documentElement.style.setProperty("--input-radius",Jn.inputRadius+"px"),Jn.inputBackground&&document.documentElement.style.setProperty("--input-background",Jn.inputBackground),Xn.unitColor&&document.documentElement.style.setProperty("--color-unit",Xn.unitColor),Xn.armyColor&&document.documentElement.style.setProperty("--color-army",Xn.armyColor),Jn.fontColor&&document.documentElement.style.setProperty("--font-color",Jn.fontColor),document.documentElement.style.setProperty("--italic",Jn.italic??"italic"),Jn.colorGray&&document.documentElement.style.setProperty("--color-gray",Jn.colorGray),Jn.colorRed&&document.documentElement.style.setProperty("--color-red",Jn.colorRed),Jn.colorGreen&&document.documentElement.style.setProperty("--color-green",Jn.colorGreen),Jn.colorBlue&&document.documentElement.style.setProperty("--color-blue",Jn.colorBlue),Jn.colorLightblue&&document.documentElement.style.setProperty("--color-lightblue",Jn.colorLightblue),Jn.bga){let er=Number(Jn.bga);er>1&&(er/=100),document.documentElement.style.setProperty("--bg-a",`${er}`)}if(Jn.invertImagesBrightness){const er=180*(Number(Jn.invertImagesBrightness)/100);document.documentElement.style.setProperty("--image-filter",`invert(${Jn.invertImagesBrightness}%) hue-rotate(${er}deg)`)}else Jn.invertImages?document.documentElement.style.setProperty("--image-filter","invert(100%) hue-rotate(180deg)"):document.documentElement.style.setProperty("--image-filter","");if(Jn.costColor){const er=Jn.costColor;document.documentElement.style.setProperty("--cost-color",er)}if(setAppearanceFont(Jn,""),setAppearanceFont(Jn,"Header"),setAppearanceFont(Jn,"Button"),document.documentElement.style.setProperty("--fontHeaderTransform",Jn.headerTransform),Jn.inputHighlights){const er=Jn.inputHighlights;document.documentElement.style.setProperty("--input-highlights",er)}Jn.dark?(document.documentElement.style.setProperty("--hover-brighten-color","rgba(0, 0, 0, 0.15)"),document.documentElement.style.setProperty("--hover-darken-color","rgba(255, 255, 255, 0.15)")):(document.documentElement.style.setProperty("--hover-darken-color","rgba(0, 0, 0, 0.15)"),document.documentElement.style.setProperty("--hover-brighten-color","rgba(255, 255, 255, 0.15)")),Jn.titleBarColor&&document.documentElement.style.setProperty("--titleBarColor",Jn.titleBarColor)}const defaultAppearence={background:"#f0f5ff",backgroundTexture:"url(assets/images/no.jpg)",backgroundSize:"auto",bga:70,hue:0,title:"#8ecff0",forcesBackground:"#dcd189",highlight:"#fffef1",dropdownStyle:2,inputRadius:0,inputBackground:"#ffffff",inputHighlights:"#add8e6",categoryIcons:!0,costsLeft:!1,invertColors:!1,invertImages:!1,invertImagesBrightness:0,font:"sans-serif",fontSize:16,fontHeader:"sans-serif",fontHeaderSize:16,headerTransform:"none",fontButton:"sans-serif",fontButtonSize:16,fontColor:"black",borderColor:"#aaaaaa",colorGray:"gray",colorBlue:"#0f59ba",colorRed:"#e64e4e",colorGreen:"#439943",colorLightblue:"#bcdaf9",costColor:"#284781",titleBarColor:"#708090",unitsBackground:"",fitBackground:!1,hoverColor:""},defaultSortConfiguration=`type:model
type:mount
type:crew
type:upgrade
type:entry
type:group & name:/mount/i
type:group & name:/weapons/i
type:group & name:/armour/i
type:group & name:/equipment/i
type:group & name:/items/i
type:group & name:/options/i
type:group
cost:pts
cost:points
name`,defaultState={systemsFolder:"",showOnlyEnabledCategories:!1,globalDuplicateIdError:!1,useNewCategoriesUI:!1,sort:"asc",theme:"",githubAutoIncrement:!0,autosort:{config:defaultSortConfiguration},display:{sortIndex:!0,references:!0,costs:!0,primaryCategory:!1},autoFormatCharacteristics:!1,autoRenameInfoLinkParent:!1,stickyScroll:!1},useSettingsStore=defineStore("settings",{state:()=>({...defaultState}),persist:{storage:globalThis.localStorage,deserialize(Jn){const Xn=JSON.parse(Jn);return merge(Xn,defaultState)},serialize:JSON.stringify},getters:{isDarkTheme(){return this.theme==="dark"}},actions:{getDefaultAppareance(){return this.theme==="dark"?{...defaultAppearence,background:"#2b2b2b",bga:"100",borderColor:"#5e5e5e",colorGray:"#737283",colorBlue:"#2d9ce1",colorLightblue:"#009cbd",colorRed:"#c74343",costColor:"#5dabdf",dropdownStyle:2,fontColor:"#ababab",inputBackground:"#333333",inputHighlights:"#add8e6",invertImagesBrightness:"85",titleBarColor:"#525252",title:"#333333",dark:!0}:defaultAppearence},setTheme(Jn){this.theme=Jn,this.refreshAppearance()},refreshAppearance(){updateCssVars(this.getDefaultAppareance(),{})},init(){this.display||(this.display={sortIndex:!0,references:!0,costs:!0})}}});function getRandomKey(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function getRandomInt(Jn){return Math.floor(Math.random()*Math.floor(Jn))}function isHtml(Jn){const Xn=/<[^>]+>/,Qn=/&[a-zA-Z]+;/;return Xn.test(Jn)||Qn.test(Jn)}function stripHtml(Jn){if(!isHtml(Jn))return Jn;if(Jn==null)return"";let Xn=Jn;return Xn=Xn.replace(/[\t ]+/g," "),Xn=Xn.replace(/&bull;/g,"•"),Xn=Xn.replace(/&nbsp;/g," "),Xn=Xn.replace(/−/g,"-"),Xn=Xn.replace(/<br *[/]?>/g,`
`),Xn=Xn.replace(/(<([^>]+)>)/gi,""),Xn=Xn.replace(/[&][a-zA-Z]+;/g,""),Xn}function stripNumber(Jn){return Jn.replace(/[0-9]+ *[.-] *(.*)/,"$1")}function fix_xml_object(Jn){const Xn=[Jn];for(;Xn.length;){const Qn=Xn.pop();for(const er in Qn){const tr=Qn[er];if(Array.isArray(tr)&&tr.length===1){const nr=tr[0],rr=Object.values(nr);rr.length===1&&Array.isArray(rr[0])&&(Qn[er]=rr[0])}}const Zn=Qn.$;delete Qn.$,Qn&&typeof Qn=="object"&&Xn.push(...Object.values(Qn)),Zn&&Object.assign(Qn,Zn)}}function to_kebab_case(Jn){return Jn.trim().toLowerCase().replace(/\s/g,"-")}function to_snake_case(Jn){return Jn.toLowerCase().replace(/\s/g,"_")}function delete_path_related_characters(Jn){return Jn.replace(/([\ :])/g,"_").replace(/([\\\/\$\@\~\'\"\`\ \:])/g,"")}function hashFnv32a$1(Jn,Xn=198209835){let Qn,Zn,er=Xn===void 0?2166136261:Xn;for(Qn=0,Zn=Jn.length;Qn<Zn;Qn++)er^=Jn.charCodeAt(Qn),er+=(er<<1)+(er<<4)+(er<<7)+(er<<8)+(er<<24);return er>>>0}function findLastIndexOfAssumingSorted(Jn,Xn){let Qn=-1;const Zn=Jn.length;for(let er=0;er<Zn;er++)if(Xn(Jn[er]))Qn=er;else if(Qn)return Qn;return Qn}function pushAfterLastOfAssumingSorted(Jn,Xn,Qn){const Zn=findLastIndexOfAssumingSorted(Jn,Qn);Zn===-1?Jn.push(Xn):Jn.splice(Zn+1,0,Xn)}function escapeRegex(Jn){return Jn.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function groupBy(Jn,Xn=Qn=>Qn.toString()){const Qn={};for(let Zn=0;Zn<Jn.length;Zn++){const er=Jn[Zn],tr=Xn(er),nr=Qn[tr];nr?nr.push(er):Qn[tr]=[er]}return Qn}function forEachValueRecursive(Jn,Xn,Qn=new Set){const Zn=[Jn];for(;Zn.length;){const er=Zn.pop();if(Array.isArray(er))for(const tr of Object.values(er))tr&&typeof tr=="object"&&Zn.push(tr);else for(const tr in er){if(Qn.has(tr))continue;const nr=er[tr];nr&&typeof nr=="object"&&Zn.push(nr)}Array.isArray(er)||Xn(er)}}function forEachPairRecursive(Jn,Xn,Qn){function Zn(tr,nr){if(isObject(tr))for(const rr of Object.keys(tr)){const sr=tr[rr];if(isObject(sr)){if(nr.push(rr),Array.isArray(sr))for(const or of sr)Qn&&!Qn(or,rr)||(Xn(or,rr,tr,nr),Zn(or,nr));else{if(Qn&&!Qn(sr,rr))continue;Xn(sr,rr,tr,nr),Zn(sr,nr)}nr.pop()}else Xn(sr,rr,tr,nr)}}Zn(Jn,[])}function shouldPatch(Jn,Xn){for(const Qn of Xn)switch(Qn.type){case"or":{if(!Qn.value.includes(Jn[Qn.field]))return!1;break}case"not":{if(Jn[Qn.field]===Qn.value)return!1;break}case"if":default:{if(Jn[Qn.field]!==Qn.value)return!1;break}}return!0}function patchJson(Jn,Xn){let Qn=0;return forEachValueRecursive(Jn,Zn=>{for(const er of Object.keys(Xn)){const tr=Xn[er],nr=Zn[er];let rr=tr[nr];if(!rr)if(nr!==void 0&&tr.$any)rr=tr.$any;else continue;if((!rr.$patchConditions||shouldPatch(Zn,rr.$patchConditions))&&(rr.$move?Zn[rr.$move]=nr:Object.assign(Zn,rr),Qn++,delete Zn.$patchConditions,rr.$patchPush)){for(const[sr,or]of Object.entries(rr.$patchPush)){const ir=JSON.parse(JSON.stringify(or));sr in Zn||(Zn[sr]=[]),Array.isArray(ir)?Zn[sr].push(...ir):Zn[sr].push(ir)}delete Zn.$patchPush}}}),Qn}function sortByAscending$2(Jn,Xn){return[...Jn].sort((Qn,Zn)=>(Xn(Qn)??"").toString().localeCompare((Xn(Zn)??"").toString(),void 0,{numeric:!0}))}function sortByDescending(Jn,Xn){return[...Jn].sort((Qn,Zn)=>(Xn(Zn)??"").toString().localeCompare((Xn(Qn)??"").toString(),void 0,{numeric:!0}))}const sortBy=sortByAscending$2;function sortByAscendingInplace(Jn,Xn){return Jn.sort((Qn,Zn)=>(Xn(Qn)??"").toString().localeCompare((Xn(Zn)??"").toString(),void 0,{numeric:!0}))}function sortByDescendingInplace(Jn,Xn){return Jn.sort((Qn,Zn)=>(Xn(Zn)??"").toString().localeCompare((Xn(Qn)??"").toString(),void 0,{numeric:!0}))}function findMax(Jn,Xn){if(!Jn.length)return;if(Jn.length==1)return Jn[0];let Qn=Jn[0],Zn=Xn(Qn).toString();for(const er of Jn){const tr=(Xn(er)??"").toString();tr.localeCompare(Zn,void 0,{numeric:!0})===1&&(Qn=er,Zn=tr)}return Qn}function findMin(Jn,Xn){if(!Jn.length)return;let Qn=Jn[0],Zn=Xn(Qn).toString();for(const er of Jn){const tr=(Xn(er)??"").toString();tr.localeCompare(Zn,void 0,{numeric:!0})===-1&&(Qn=er,Zn=tr)}return Qn}function diffSet(Jn,Xn){const Qn=[];for(const Zn of Xn.values())Jn.delete(Zn)||Qn.push(Zn);for(const Zn of Jn.values())Qn.push(Zn);return Qn}function suffixIf(Jn,Xn){return Jn?Jn.toString()+Xn:""}function prefixIf(Jn,Xn){return Xn?Jn+Xn.toString():""}function surroundIf(Jn,Xn,Qn){return Xn?Jn+Xn.toString()+Qn:""}function betweenIf(Jn,Xn,Qn){return Jn&&Qn?`${Jn}${Xn.toString()}${Qn}`:`${Jn}${Qn}`}function textIf(Jn,Xn){return Jn?Xn:""}function cleanName(Jn){return stripNumber(`${Jn}`).trim()}function replaceKey(Jn,Xn,Qn){Xn in Jn&&(Jn[Qn]=Jn[Xn],delete Jn[Xn])}function countKeys(Jn){const Xn={};for(const Qn of Jn)Xn[Qn]=1+(Xn[Qn]||0);return Xn}function flattenRecursive(Jn,Xn=0,Qn=[]){Qn.push({depth:Xn,current:Jn.self});for(const Zn of Jn.childs)flattenRecursive(Zn,Xn+1,Qn);return Qn}function forEachRecursive(Jn,Xn){for(const Qn of Jn.childs)forEachRecursive(Qn,Xn);Xn(Jn)}function recurseThis(Jn,Xn,Qn=100,Zn=0){const er={childs:[],self:Jn};if(Zn<Qn){const tr=Jn[Xn]();for(const nr of tr)er.childs.push(recurseThis(nr,Xn,Qn,Zn+1))}return er}function recurseFn(Jn,Xn,Qn=100,Zn=0){const er={childs:[],self:Jn};if(Zn<Qn){const tr=Xn(Jn,Zn);if(tr!==void 0)for(const nr of tr){const rr=recurseFn(nr,Xn,Qn,Zn+1);rr.self.parent=Jn,er.childs.push(rr)}}return er}function clone(Jn){return Object.create(Jn)}function copy(Jn){return Object.assign(Object.create(Object.getPrototypeOf(Jn)),Jn)}function findAndRemove(Jn,Xn){const Qn=Jn.findIndex(Xn);return Qn!==-1?(Jn.splice(Qn,1),!0):!1}function remove(Jn,Xn){const Qn=Jn.findIndex(Zn=>Zn===Xn);return Qn!==-1?(Jn.splice(Qn,1),!0):!1}function insert(Jn,Xn){return Jn.findIndex(Qn=>Qn===Xn)===-1?(Jn.push(Xn),!0):!1}function addObjIfMissing(Jn,Xn,Qn){const Zn=Jn[Xn];Zn?Zn.includes(Qn)||Zn.push(Qn):Jn[Xn]=[Qn]}function addObj(Jn,Xn,Qn){const Zn=Jn[Xn];Zn?Zn.push(Qn):Jn[Xn]=[Qn]}function addObjUnique(Jn,Xn,Qn){const Zn=Jn[Xn];Zn?Zn.indexOf(Qn)===-1&&Zn.push(Qn):Jn[Xn]=[Qn]}function popObj(Jn,Xn,Qn){const Zn=Jn[Xn];if(Zn){const er=Zn.indexOf(Qn);er>=0&&Zn.splice(er,1);return}}function add(Jn,Xn,Qn=1){const Zn=Jn[Xn]||0,er=Qn+Zn;return Qn===0?delete Jn[Xn]:Jn[Xn]=er,Zn}function addOne(Jn,Xn){const Qn=Jn[Xn]||0;return Jn[Xn]=1+Qn,Qn}function removeOne(Jn,Xn){const Zn=(Jn[Xn]||0)-1;return Zn===0?delete Jn[Xn]:Jn[Xn]=Zn,Zn}function isObject(Jn){return Jn&&typeof Jn=="object"}function isDefaultObject(Jn){return!Object.getPrototypeOf(Object.getPrototypeOf(Jn))}function removePrefix$3(Jn,Xn){return Jn.startsWith(Xn)?Jn.substring(Xn.length):Jn}function removeSuffix$1(Jn,Xn){return Jn.endsWith(Xn)?Jn.substring(0,Jn.length-Xn.length):Jn}function makeNoObserve(Jn){Object.defineProperty(Jn,Symbol.toStringTag,{get:function(){return"ObjectNoObserve"}})}function setMinus(Jn,Xn){const Qn=new Set;for(const Zn of Jn.values())Xn.has(Zn)||Qn.add(Zn);return Qn}function combineArrays(Jn){const Xn=[];for(const Qn of Jn)Qn&&Xn.push(...Qn);return Xn}function arraysEqual(Jn,Xn){if(Jn.length!==Xn.length)return!1;for(let Qn=0;Qn<Jn.length;++Qn)if(Jn[Qn]!==Xn[Qn])return!1;return!0}function textSearchRegex(Jn){const Qn=`^(?=.*${escapeRegex(Jn).split(" ").map(er=>`(?=.*${er})`).join("")}).*$`;return new RegExp(Qn,"i")}function generateBattlescribeId(){return[getRandomInt(65535),getRandomInt(65535),getRandomInt(65535),getRandomInt(65535)].map(Jn=>Jn.toString(16).padStart(4,"0")).join("-")}function*enumerate_zip(Jn,Xn){for(let Qn=0;Qn<Math.min(Jn.length,Xn.length);Qn++)yield[Jn[Qn],Xn[Qn]]}function escapeXml(Jn){return Jn.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}async function zipCompress(Jn,Xn,Qn){const Zn=await __vitePreload(()=>import("./jszip.min.d2cd7c99.js").then(nr=>nr.j),[],import.meta.url),er=new Zn.default;return er.file(Jn,Xn),await er.generateAsync({type:Qn,compression:"DEFLATE"})}function debouncePromise(Jn,Xn){let Qn;return function(...Zn){return clearTimeout(Qn),new Promise(er=>{Qn=setTimeout(()=>{const tr=Jn(Zn);er(tr)},Xn)})}}function findSelfOrParentWhere(Jn,Xn){let Qn=Jn;for(;Qn&&!Object.is(Qn,Qn.parent);){if(Xn(Qn))return Qn;Qn=Qn.parent}}function findParentWhere(Jn,Xn){let Qn=Jn.parent;for(;Qn&&!Object.is(Qn,Qn.parent);){if(Xn(Qn))return Qn;Qn=Qn.parent}}function forEachParent(Jn,Xn){let Qn=Jn.parent;for(;Qn&&!(!Qn||Xn(Qn)===!1);)Qn=Qn.parent}function first(Jn){for(const Xn of Jn)return Xn}function has(Jn,Xn){for(const Qn of Jn)if(Xn===Qn)return!0;return!1}function capitalize(Jn){return Jn.charAt(0).toUpperCase()+Jn.slice(1)}function arrayIf(Jn){return Jn?[Jn]:[]}function inBounds(Jn,Xn,Qn){return Jn<Xn?Xn:Jn>Qn?Qn:Jn}function replaceAt(Jn,Xn,Qn,Zn){if(Qn===0)return Jn.replaceAll(Xn,Zn);const er=[...Jn.matchAll(Xn)],tr=Qn<0?er.length+Qn:Qn-1;if(tr<0||tr>=er.length)return Jn;const nr=er[tr],rr=nr.index,sr=nr[0];return Jn.slice(0,rr)+Zn(sr)+Jn.slice(rr+sr.length)}function recursive(Jn,Xn){const Qn=[...Xn(Jn)];for(let Zn=0;Zn<Qn.length;Zn++)Qn.push(...Xn(Qn[Zn]));return Qn}const helpers=Object.freeze(Object.defineProperty({__proto__:null,add,addObj,addObjIfMissing,addObjUnique,addOne,arrayIf,arraysEqual,betweenIf,capitalize,cleanName,clone,combineArrays,copy,countKeys,debouncePromise,delete_path_related_characters,diffSet,enumerate_zip,escapeRegex,escapeXml,findAndRemove,findLastIndexOfAssumingSorted,findMax,findMin,findParentWhere,findSelfOrParentWhere,first,fix_xml_object,flattenRecursive,forEachPairRecursive,forEachParent,forEachRecursive,forEachValueRecursive,generateBattlescribeId,groupBy,has,hashFnv32a:hashFnv32a$1,inBounds,insert,isDefaultObject,isObject,makeNoObserve,patchJson,popObj,prefixIf,pushAfterLastOfAssumingSorted,recurseFn,recurseThis,recursive,remove,removeOne,removePrefix:removePrefix$3,removeSuffix:removeSuffix$1,replaceAt,replaceKey,setMinus,shouldPatch,sortBy,sortByAscending:sortByAscending$2,sortByAscendingInplace,sortByDescending,sortByDescendingInplace,stripNumber,suffixIf,surroundIf,textIf,textSearchRegex,to_kebab_case,to_snake_case,zipCompress},Symbol.toStringTag,{value:"Module"}));function dirname(Jn){return Jn.replaceAll("\\","/").split("/").slice(0,-1).join("/")}function filename$1(Jn){const Xn=Jn.replaceAll("\\","/").split("/");return Xn[Xn.length-1]}async function getFolderFiles(Jn,Xn=!1,Qn){return electron?await electron.invoke("getFolderFiles",Jn,Xn,Qn):[]}async function getFolderFolders(Jn){if(electron)try{const Xn=[];if(!await electron.invoke("isDirectory",Jn))return[];const Zn=await electron.invoke("readdirSync",Jn);for(const er of Zn){const tr=`${Jn}/${er}`;try{if(await electron.invoke("isDirectory",tr)){const rr={name:er,path:tr};Xn.push(rr)}}catch(nr){console.error("Error reading dir:",tr,nr);continue}}return Xn}catch(Xn){throw console.error("Error:",Xn),Xn}}async function writeFile(Jn,Xn){if(!electron)return;const Qn=dirname(Jn);await electron.invoke("mkdirSync",Qn,{recursive:!0}),await electron.invoke("saveFile",Jn,Xn)}async function deleteFile(Jn){if(electron)return await electron.invoke("unlinkSync",Jn)}async function readFile(Jn){if(electron)return await electron.invoke("getFile",Jn)}async function showOpenDialog(Jn){if(electron)return electron.invoke("showOpenDialog",Jn)}async function showMessageBox(Jn){if(electron)return electron.invoke("showMessageBoxSync",Jn)}async function closeWindow(){if(electron)return electron.invoke("closeWindow")}async function getPath(Jn){if(electron)return await electron.invoke("getPath",Jn)}async function createFolder(Jn){electron&&await electron.invoke("mkdirSync",Jn,{recursive:!0})}let initialized=!1;const watchers={};async function watchFile(Jn,Xn){electron&&(initialized||(initialized=!0,electron.on("fileChanged",(Qn,Zn,er)=>{const tr=watchers[Zn];tr&&tr(Zn,er)})),await electron.invoke("chokidarWatchFile",Jn),watchers[Jn]=Xn)}async function unwatchFile(Jn){electron&&(delete watchers[Jn],await electron.invoke("chokidarUnwatchFile",Jn))}async function getFolderRemote(Jn){return electron?await electron.invoke("getFolderRemote",Jn):null}const node=Object.freeze(Object.defineProperty({__proto__:null,closeWindow,createFolder,deleteFile,dirname,filename:filename$1,getFolderFiles,getFolderFolders,getFolderRemote,getPath,readFile,showMessageBox,showOpenDialog,unwatchFile,watchFile,writeFile},Symbol.toStringTag,{value:"Module"})),e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,t=Object.keys,n=Array.isArray;function r(Jn,Xn){return typeof Xn!="object"||t(Xn).forEach(function(Qn){Jn[Qn]=Xn[Qn]}),Jn}typeof Promise>"u"||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(Jn,Xn){return i.call(Jn,Xn)}function a(Jn,Xn){typeof Xn=="function"&&(Xn=Xn(s(Jn))),(typeof Reflect>"u"?t:Reflect.ownKeys)(Xn).forEach(Qn=>{l(Jn,Qn,Xn[Qn])})}const u=Object.defineProperty;function l(Jn,Xn,Qn,Zn){u(Jn,Xn,r(Qn&&o(Qn,"get")&&typeof Qn.get=="function"?{get:Qn.get,set:Qn.set,configurable:!0}:{value:Qn,configurable:!0,writable:!0},Zn))}function c(Jn){return{from:function(Xn){return Jn.prototype=Object.create(Xn.prototype),l(Jn.prototype,"constructor",Jn),{extend:a.bind(null,Jn.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(Jn,Xn){let Qn;return h(Jn,Xn)||(Qn=s(Jn))&&d(Qn,Xn)}const f=[].slice;function p(Jn,Xn,Qn){return f.call(Jn,Xn,Qn)}function y(Jn,Xn){return Xn(Jn)}function m(Jn){if(!Jn)throw new Error("Assertion Failed")}function v(Jn){e.setImmediate?setImmediate(Jn):setTimeout(Jn,0)}function g(Jn,Xn){return Jn.reduce((Qn,Zn,er)=>{var tr=Xn(Zn,er);return tr&&(Qn[tr[0]]=tr[1]),Qn},{})}function b(Jn,Xn){if(o(Jn,Xn))return Jn[Xn];if(!Xn)return Jn;if(typeof Xn!="string"){for(var Qn=[],Zn=0,er=Xn.length;Zn<er;++Zn){var tr=b(Jn,Xn[Zn]);Qn.push(tr)}return Qn}var nr=Xn.indexOf(".");if(nr!==-1){var rr=Jn[Xn.substr(0,nr)];return rr===void 0?void 0:b(rr,Xn.substr(nr+1))}}function _(Jn,Xn,Qn){if(Jn&&Xn!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(Jn)))if(typeof Xn!="string"&&"length"in Xn){m(typeof Qn!="string"&&"length"in Qn);for(var Zn=0,er=Xn.length;Zn<er;++Zn)_(Jn,Xn[Zn],Qn[Zn])}else{var tr=Xn.indexOf(".");if(tr!==-1){var nr=Xn.substr(0,tr),rr=Xn.substr(tr+1);if(rr==="")Qn===void 0?n(Jn)&&!isNaN(parseInt(nr))?Jn.splice(nr,1):delete Jn[nr]:Jn[nr]=Qn;else{var sr=Jn[nr];sr&&o(Jn,nr)||(sr=Jn[nr]={}),_(sr,rr,Qn)}}else Qn===void 0?n(Jn)&&!isNaN(parseInt(Xn))?Jn.splice(Xn,1):delete Jn[Xn]:Jn[Xn]=Qn}}function w(Jn){var Xn={};for(var Qn in Jn)o(Jn,Qn)&&(Xn[Qn]=Jn[Qn]);return Xn}const x=[].concat;function k(Jn){return x.apply([],Jn)}const E="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(Jn=>["Int","Uint","Float"].map(Xn=>Xn+Jn+"Array")))).filter(Jn=>e[Jn]),P=E.map(Jn=>e[Jn]);g(E,Jn=>[Jn,!0]);let K=null;function O(Jn){K=typeof WeakMap<"u"&&new WeakMap;const Xn=S(Jn);return K=null,Xn}function S(Jn){if(!Jn||typeof Jn!="object")return Jn;let Xn=K&&K.get(Jn);if(Xn)return Xn;if(n(Jn)){Xn=[],K&&K.set(Jn,Xn);for(var Qn=0,Zn=Jn.length;Qn<Zn;++Qn)Xn.push(S(Jn[Qn]))}else if(P.indexOf(Jn.constructor)>=0)Xn=Jn;else{const tr=s(Jn);for(var er in Xn=tr===Object.prototype?{}:Object.create(tr),K&&K.set(Jn,Xn),Jn)o(Jn,er)&&(Xn[er]=S(Jn[er]))}return Xn}const{toString:A}={};function C(Jn){return A.call(Jn).slice(8,-1)}const j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",D=typeof j=="symbol"?function(Jn){var Xn;return Jn!=null&&(Xn=Jn[j])&&Xn.apply(Jn)}:function(){return null},I={};function B(Jn){var Xn,Qn,Zn,er;if(arguments.length===1){if(n(Jn))return Jn.slice();if(this===I&&typeof Jn=="string")return[Jn];if(er=D(Jn)){for(Qn=[];!(Zn=er.next()).done;)Qn.push(Zn.value);return Qn}if(Jn==null)return[Jn];if(typeof(Xn=Jn.length)=="number"){for(Qn=new Array(Xn);Xn--;)Qn[Xn]=Jn[Xn];return Qn}return[Jn]}for(Xn=arguments.length,Qn=new Array(Xn);Xn--;)Qn[Xn]=arguments[Xn];return Qn}const T=typeof Symbol<"u"?Jn=>Jn[Symbol.toStringTag]==="AsyncFunction":()=>!1;var R=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(Jn,Xn){R=Jn,M=Xn}var M=()=>!0;const N=!new Error("").stack;function q(){if(N)try{throw q.arguments,new Error}catch(Jn){return Jn}return new Error}function $(Jn,Xn){var Qn=Jn.stack;return Qn?(Xn=Xn||0,Qn.indexOf(Jn.name)===0&&(Xn+=(Jn.name+Jn.message).split(`
`).length),Qn.split(`
`).slice(Xn).filter(M).map(Zn=>`
`+Zn).join("")):""}var U$1=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U$1),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(Jn,Xn){this._e=q(),this.name=Jn,this.message=Xn}function Y(Jn,Xn){return Jn+". Errors: "+Object.keys(Xn).map(Qn=>Xn[Qn].toString()).filter((Qn,Zn,er)=>er.indexOf(Qn)===Zn).join(`
`)}function z(Jn,Xn,Qn,Zn){this._e=q(),this.failures=Xn,this.failedKeys=Zn,this.successCount=Qn,this.message=Y(Jn,Xn)}function G(Jn,Xn){this._e=q(),this.name="BulkError",this.failures=Object.keys(Xn).map(Qn=>Xn[Qn]),this.failuresByPos=Xn,this.message=Y(Jn,Xn)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce((Jn,Xn)=>(Jn[Xn]=Xn+"Error",Jn),{});const Q=W;var X=L.reduce((Jn,Xn)=>{var Qn=Xn+"Error";function Zn(er,tr){this._e=q(),this.name=Qn,er?typeof er=="string"?(this.message=`${er}${tr?`
 `+tr:""}`,this.inner=tr||null):typeof er=="object"&&(this.message=`${er.name} ${er.message}`,this.inner=er):(this.message=V[Xn]||Qn,this.inner=null)}return c(Zn).from(Q),Jn[Xn]=Zn,Jn},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U$1.reduce((Jn,Xn)=>(Jn[Xn+"Error"]=X[Xn],Jn),{}),Z=L.reduce((Jn,Xn)=>(["Syntax","Type","Range"].indexOf(Xn)===-1&&(Jn[Xn+"Error"]=X[Xn]),Jn),{});function ee(){}function te(Jn){return Jn}function ne(Jn,Xn){return Jn==null||Jn===te?Xn:function(Qn){return Xn(Jn(Qn))}}function re(Jn,Xn){return function(){Jn.apply(this,arguments),Xn.apply(this,arguments)}}function se(Jn,Xn){return Jn===ee?Xn:function(){var Qn=Jn.apply(this,arguments);Qn!==void 0&&(arguments[0]=Qn);var Zn=this.onsuccess,er=this.onerror;this.onsuccess=null,this.onerror=null;var tr=Xn.apply(this,arguments);return Zn&&(this.onsuccess=this.onsuccess?re(Zn,this.onsuccess):Zn),er&&(this.onerror=this.onerror?re(er,this.onerror):er),tr!==void 0?tr:Qn}}function ie(Jn,Xn){return Jn===ee?Xn:function(){Jn.apply(this,arguments);var Qn=this.onsuccess,Zn=this.onerror;this.onsuccess=this.onerror=null,Xn.apply(this,arguments),Qn&&(this.onsuccess=this.onsuccess?re(Qn,this.onsuccess):Qn),Zn&&(this.onerror=this.onerror?re(Zn,this.onerror):Zn)}}function oe(Jn,Xn){return Jn===ee?Xn:function(Qn){var Zn=Jn.apply(this,arguments);r(Qn,Zn);var er=this.onsuccess,tr=this.onerror;this.onsuccess=null,this.onerror=null;var nr=Xn.apply(this,arguments);return er&&(this.onsuccess=this.onsuccess?re(er,this.onsuccess):er),tr&&(this.onerror=this.onerror?re(tr,this.onerror):tr),Zn===void 0?nr===void 0?void 0:nr:r(Zn,nr)}}function ae(Jn,Xn){return Jn===ee?Xn:function(){return Xn.apply(this,arguments)!==!1&&Jn.apply(this,arguments)}}function ue(Jn,Xn){return Jn===ee?Xn:function(){var Qn=Jn.apply(this,arguments);if(Qn&&typeof Qn.then=="function"){for(var Zn=this,er=arguments.length,tr=new Array(er);er--;)tr[er]=arguments[er];return Qn.then(function(){return Xn.apply(Zn,tr)})}return Xn.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=typeof Promise>"u"?[]:(()=>{let Jn=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[Jn,s(Jn),Jn];const Xn=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[Xn,s(Xn),Jn]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var Jn=document.createElement("div");new MutationObserver(()=>{qe(),Jn=null}).observe(Jn,{attributes:!0}),Jn.setAttribute("i","1")}:()=>{setTimeout(qe,0)},ge=function(Jn,Xn){Oe.push([Jn,Xn]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(Jn=>{try{ct(Jn[0],Jn[1])}catch{}})}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(Jn){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var Xn=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),typeof Jn!="function"){if(Jn!==le)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Be(this,this._value))}this._state=null,this._value=null,++Xn.ref,Ie(this,Jn)}const je={get:function(){var Jn=Ke,Xn=Qe;function Qn(Zn,er){var tr=!Jn.global&&(Jn!==Ke||Xn!==Qe);const nr=tr&&!et();var rr=new Ce((sr,or)=>{Re(this,new De(ut(Zn,Jn,tr,nr),ut(er,Jn,tr,nr),sr,or,Jn))});return R&&Ne(rr,this),rr}return Qn.prototype=le,Qn},set:function(Jn){l(this,"then",Jn&&Jn.prototype===le?je:{get:function(){return Jn},set:je.set})}};function De(Jn,Xn,Qn,Zn,er){this.onFulfilled=typeof Jn=="function"?Jn:null,this.onRejected=typeof Xn=="function"?Xn:null,this.resolve=Qn,this.reject=Zn,this.psd=er}function Ie(Jn,Xn){try{Xn(Qn=>{if(Jn._state===null){if(Qn===Jn)throw new TypeError("A promise cannot be resolved with itself.");var Zn=Jn._lib&&$e();Qn&&typeof Qn.then=="function"?Ie(Jn,(er,tr)=>{Qn instanceof Ce?Qn._then(er,tr):Qn.then(er,tr)}):(Jn._state=!0,Jn._value=Qn,Te(Jn)),Zn&&Ue()}},Be.bind(null,Jn))}catch(Qn){Be(Jn,Qn)}}function Be(Jn,Xn){if(xe.push(Xn),Jn._state===null){var Qn=Jn._lib&&$e();Xn=Ee(Xn),Jn._state=!1,Jn._value=Xn,R&&Xn!==null&&typeof Xn=="object"&&!Xn._promise&&function(Zn,er,tr){try{Zn.apply(null,tr)}catch(nr){er&&er(nr)}}(()=>{var Zn=d(Xn,"stack");Xn._promise=Jn,l(Xn,"stack",{get:()=>me?Zn&&(Zn.get?Zn.get.apply(Xn):Zn.value):Jn.stack})}),function(Zn){we.some(er=>er._value===Zn._value)||we.push(Zn)}(Jn),Te(Jn),Qn&&Ue()}}function Te(Jn){var Xn=Jn._listeners;Jn._listeners=[];for(var Qn=0,Zn=Xn.length;Qn<Zn;++Qn)Re(Jn,Xn[Qn]);var er=Jn._PSD;--er.ref||er.finalize(),Se===0&&(++Se,ge(()=>{--Se==0&&Le()},[]))}function Re(Jn,Xn){if(Jn._state!==null){var Qn=Jn._state?Xn.onFulfilled:Xn.onRejected;if(Qn===null)return(Jn._state?Xn.resolve:Xn.reject)(Jn._value);++Xn.psd.ref,++Se,ge(Fe,[Qn,Jn,Xn])}else Jn._listeners.push(Xn)}function Fe(Jn,Xn,Qn){try{ke=Xn;var Zn,er=Xn._value;Xn._state?Zn=Jn(er):(xe.length&&(xe=[]),Zn=Jn(er),xe.indexOf(er)===-1&&function(tr){for(var nr=we.length;nr;)if(we[--nr]._value===tr._value)return void we.splice(nr,1)}(Xn)),Qn.resolve(Zn)}catch(tr){Qn.reject(tr)}finally{ke=null,--Se==0&&Le(),--Qn.psd.ref||Qn.psd.finalize()}}function Me(Jn,Xn,Qn){if(Xn.length===Qn)return Xn;var Zn="";if(Jn._state===!1){var er,tr,nr=Jn._value;nr!=null?(er=nr.name||"Error",tr=nr.message||nr,Zn=$(nr,0)):(er=nr,tr=""),Xn.push(er+(tr?": "+tr:"")+Zn)}return R&&((Zn=$(Jn._stackHolder,2))&&Xn.indexOf(Zn)===-1&&Xn.push(Zn),Jn._prev&&Me(Jn._prev,Xn,Qn)),Xn}function Ne(Jn,Xn){var Qn=Xn?Xn._numPrev+1:0;Qn<100&&(Jn._prev=Xn,Jn._numPrev=Qn)}function qe(){$e()&&Ue()}function $e(){var Jn=be;return be=!1,_e=!1,Jn}function Ue(){var Jn,Xn,Qn;do for(;Oe.length>0;)for(Jn=Oe,Oe=[],Qn=Jn.length,Xn=0;Xn<Qn;++Xn){var Zn=Jn[Xn];Zn[0].apply(null,Zn[1])}while(Oe.length>0);be=!0,_e=!0}function Le(){var Jn=we;we=[],Jn.forEach(Zn=>{Zn._PSD.onunhandled.call(null,Zn._value,Zn)});for(var Xn=Ae.slice(0),Qn=Xn.length;Qn;)Xn[--Qn]()}function Ve(Jn){return new Ce(le,!1,Jn)}function We(Jn,Xn){var Qn=Ke;return function(){var Zn=$e(),er=Ke;try{return st(Qn,!0),Jn.apply(this,arguments)}catch(tr){Xn&&Xn(tr)}finally{st(er,!1),Zn&&Ue()}}}a(Ce.prototype,{then:je,_then:function(Jn,Xn){Re(this,new De(null,null,Jn,Xn,Ke))},catch:function(Jn){if(arguments.length===1)return this.then(null,Jn);var Xn=arguments[0],Qn=arguments[1];return typeof Xn=="function"?this.then(null,Zn=>Zn instanceof Xn?Qn(Zn):Ve(Zn)):this.then(null,Zn=>Zn&&Zn.name===Xn?Qn(Zn):Ve(Zn))},finally:function(Jn){return this.then(Xn=>(Jn(),Xn),Xn=>(Jn(),Ve(Xn)))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var Jn=Me(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=Jn),Jn}finally{me=!1}}},timeout:function(Jn,Xn){return Jn<1/0?new Ce((Qn,Zn)=>{var er=setTimeout(()=>Zn(new X.Timeout(Xn)),Jn);this.then(Qn,Zn).finally(clearTimeout.bind(null,er))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,"Dexie.Promise"),Pe.env=it(),a(Ce,{all:function(){var Jn=B.apply(null,arguments).map(tt);return new Ce(function(Xn,Qn){Jn.length===0&&Xn([]);var Zn=Jn.length;Jn.forEach((er,tr)=>Ce.resolve(er).then(nr=>{Jn[tr]=nr,--Zn||Xn(Jn)},Qn))})},resolve:Jn=>{if(Jn instanceof Ce)return Jn;if(Jn&&typeof Jn.then=="function")return new Ce((Qn,Zn)=>{Jn.then(Qn,Zn)});var Xn=new Ce(le,!0,Jn);return Ne(Xn,ke),Xn},reject:Ve,race:function(){var Jn=B.apply(null,arguments).map(tt);return new Ce((Xn,Qn)=>{Jn.map(Zn=>Ce.resolve(Zn).then(Xn,Qn))})},PSD:{get:()=>Ke,set:Jn=>Ke=Jn},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:Jn=>{ge=Jn}},rejectionMapper:{get:()=>Ee,set:Jn=>{Ee=Jn}},follow:(Jn,Xn)=>new Ce((Qn,Zn)=>Je((er,tr)=>{var nr=Ke;nr.unhandleds=[],nr.onunhandled=tr,nr.finalize=re(function(){(function(rr){function sr(){rr(),Ae.splice(Ae.indexOf(sr),1)}Ae.push(sr),++Se,ge(()=>{--Se==0&&Le()},[])})(()=>{this.unhandleds.length===0?er():tr(this.unhandleds[0])})},nr.finalize),Jn()},Xn,Qn,Zn))}),pe&&(pe.allSettled&&l(Ce,"allSettled",function(){const Jn=B.apply(null,arguments).map(tt);return new Ce(Xn=>{Jn.length===0&&Xn([]);let Qn=Jn.length;const Zn=new Array(Qn);Jn.forEach((er,tr)=>Ce.resolve(er).then(nr=>Zn[tr]={status:"fulfilled",value:nr},nr=>Zn[tr]={status:"rejected",reason:nr}).then(()=>--Qn||Xn(Zn)))})}),pe.any&&typeof AggregateError<"u"&&l(Ce,"any",function(){const Jn=B.apply(null,arguments).map(tt);return new Ce((Xn,Qn)=>{Jn.length===0&&Qn(new AggregateError([]));let Zn=Jn.length;const er=new Array(Zn);Jn.forEach((tr,nr)=>Ce.resolve(tr).then(rr=>Xn(rr),rr=>{er[nr]=rr,--Zn||Qn(new AggregateError(er))}))})}));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(Jn,Xn,Qn,Zn){var er=Ke,tr=Object.create(er);tr.parent=er,tr.ref=0,tr.global=!1,tr.id=++Xe;var nr=Pe.env;tr.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(nr.nthen,tr),gthen:lt(nr.gthen,tr)}:{},Xn&&r(tr,Xn),++er.ref,tr.finalize=function(){--this.parent.ref||this.parent.finalize()};var rr=ot(tr,Jn,Qn,Zn);return tr.ref===0&&tr.finalize(),rr}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(Jn){return Ye.echoes&&Jn&&Jn.constructor===pe?(Ze(),Jn.then(Xn=>(et(),Xn),Xn=>(et(),ht(Xn)))):Jn}function nt(Jn){++Qe,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(Jn,!0)}function rt(){var Jn=Ge[Ge.length-1];Ge.pop(),st(Jn,!1)}function st(Jn,Xn){var Qn=Ke;if((Xn?!Ye.echoes||He++&&Jn===Ke:!He||--He&&Jn===Ke)||at(Xn?nt.bind(null,Jn):rt),Jn!==Ke&&(Ke=Jn,Qn===Pe&&(Pe.env=it()),ye)){var Zn=Pe.env.Promise,er=Jn.env;he.then=er.nthen,Zn.prototype.then=er.gthen,(Qn.global||Jn.global)&&(Object.defineProperty(e,"Promise",er.PromiseProp),Zn.all=er.all,Zn.race=er.race,Zn.resolve=er.resolve,Zn.reject=er.reject,er.allSettled&&(Zn.allSettled=er.allSettled),er.any&&(Zn.any=er.any))}}function it(){var Jn=e.Promise;return ye?{Promise:Jn,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:Jn.all,race:Jn.race,allSettled:Jn.allSettled,any:Jn.any,resolve:Jn.resolve,reject:Jn.reject,nthen:he.then,gthen:Jn.prototype.then}:{}}function ot(Jn,Xn,Qn,Zn,er){var tr=Ke;try{return st(Jn,!0),Xn(Qn,Zn,er)}finally{st(tr,!1)}}function at(Jn){fe.call(ce,Jn)}function ut(Jn,Xn,Qn,Zn){return typeof Jn!="function"?Jn:function(){var er=Ke;Qn&&Ze(),st(Xn,!0);try{return Jn.apply(this,arguments)}finally{st(er,!1),Zn&&at(et)}}}function lt(Jn,Xn){return function(Qn,Zn){return Jn.call(this,ut(Qn,Xn),ut(Zn,Xn))}}(""+fe).indexOf("[native code]")===-1&&(Ze=et=ee);function ct(Jn,Xn){var Qn;try{Qn=Xn.onuncatched(Jn)}catch{}if(Qn!==!1)try{var Zn,er={promise:Xn,reason:Jn};if(e.document&&document.createEvent?((Zn=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),r(Zn,er)):e.CustomEvent&&r(Zn=new CustomEvent("unhandledrejection",{detail:er}),er),Zn&&e.dispatchEvent&&(dispatchEvent(Zn),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(Zn)}catch{}R&&Zn&&!Zn.defaultPrevented&&console.warn(`Unhandled rejection: ${Jn.stack||Jn}`)}catch{}}var ht=Ce.reject;function dt(Jn,Xn,Qn,Zn){if(Jn.idbdb&&(Jn._state.openComplete||Ke.letThrough||Jn._vip)){var er=Jn._createTransaction(Xn,Qn,Jn._dbSchema);try{er.create(),Jn._state.PR1398_maxLoop=3}catch(tr){return tr.name===H.InvalidState&&Jn.isOpen()&&--Jn._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),Jn._close(),Jn.open().then(()=>dt(Jn,Xn,Qn,Zn))):ht(tr)}return er._promise(Xn,(tr,nr)=>Je(()=>(Ke.trans=er,Zn(tr,nr,er)))).then(tr=>er._completion.then(()=>tr))}if(Jn._state.openComplete)return ht(new X.DatabaseClosed(Jn._state.dbOpenError));if(!Jn._state.isBeingOpened){if(!Jn._options.autoOpen)return ht(new X.DatabaseClosed);Jn.open().catch(ee)}return Jn._state.dbReadyPromise.then(()=>dt(Jn,Xn,Qn,Zn))}const ft=String.fromCharCode(65535),pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt=[],mt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=Jn=>!/(dexie\.js|dexie\.min\.js)/.test(Jn);function _t(Jn,Xn){return Jn?Xn?function(){return Jn.apply(this,arguments)&&Xn.apply(this,arguments)}:Jn:Xn}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(Jn){return typeof Jn!="string"||/\./.test(Jn)?Xn=>Xn:Xn=>(Xn[Jn]===void 0&&Jn in Xn&&delete(Xn=O(Xn))[Jn],Xn)}class kt{_trans(Xn,Qn,Zn){const er=this._tx||Ke.trans,tr=this.name;function nr(sr,or,ir){if(!ir.schema[tr])throw new X.NotFound("Table "+tr+" not part of transaction");return Qn(ir.idbtrans,ir)}const rr=$e();try{return er&&er.db===this.db?er===Ke.trans?er._promise(Xn,nr,Zn):Je(()=>er._promise(Xn,nr,Zn),{trans:er,transless:Ke.transless||Ke}):dt(this.db,Xn,[this.name],nr)}finally{rr&&Ue()}}get(Xn,Qn){return Xn&&Xn.constructor===Object?this.where(Xn).first(Qn):this._trans("readonly",Zn=>this.core.get({trans:Zn,key:Xn}).then(er=>this.hook.reading.fire(er))).then(Qn)}where(Xn){if(typeof Xn=="string")return new this.db.WhereClause(this,Xn);if(n(Xn))return new this.db.WhereClause(this,`[${Xn.join("+")}]`);const Qn=t(Xn);if(Qn.length===1)return this.where(Qn[0]).equals(Xn[Qn[0]]);const Zn=this.schema.indexes.concat(this.schema.primKey).filter(or=>or.compound&&Qn.every(ir=>or.keyPath.indexOf(ir)>=0)&&or.keyPath.every(ir=>Qn.indexOf(ir)>=0))[0];if(Zn&&this.db._maxKey!==ft)return this.where(Zn.name).equals(Zn.keyPath.map(or=>Xn[or]));!Zn&&R&&console.warn(`The query ${JSON.stringify(Xn)} on ${this.name} would benefit of a compound index [${Qn.join("+")}]`);const{idxByName:er}=this.schema,tr=this.db._deps.indexedDB;function nr(or,ir){try{return tr.cmp(or,ir)===0}catch{return!1}}const[rr,sr]=Qn.reduce(([or,ir],ar)=>{const lr=er[ar],cr=Xn[ar];return[or||lr,or||!lr?_t(ir,lr&&lr.multi?dr=>{const hr=b(dr,ar);return n(hr)&&hr.some(pr=>nr(cr,pr))}:dr=>nr(cr,b(dr,ar))):ir]},[null,null]);return rr?this.where(rr.name).equals(Xn[rr.keyPath]).filter(sr):Zn?this.filter(sr):this.where(Qn).equals("")}filter(Xn){return this.toCollection().and(Xn)}count(Xn){return this.toCollection().count(Xn)}offset(Xn){return this.toCollection().offset(Xn)}limit(Xn){return this.toCollection().limit(Xn)}each(Xn){return this.toCollection().each(Xn)}toArray(Xn){return this.toCollection().toArray(Xn)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(Xn){return new this.db.Collection(new this.db.WhereClause(this,n(Xn)?`[${Xn.join("+")}]`:Xn))}reverse(){return this.toCollection().reverse()}mapToClass(Xn){this.schema.mappedClass=Xn;const Qn=Zn=>{if(!Zn)return Zn;const er=Object.create(Xn.prototype);for(var tr in Zn)if(o(Zn,tr))try{er[tr]=Zn[tr]}catch{}return er};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Qn,this.hook("reading",Qn),Xn}defineClass(){return this.mapToClass(function(Xn){r(this,Xn)})}add(Xn,Qn){const{auto:Zn,keyPath:er}=this.schema.primKey;let tr=Xn;return er&&Zn&&(tr=xt(er)(Xn)),this._trans("readwrite",nr=>this.core.mutate({trans:nr,type:"add",keys:Qn!=null?[Qn]:null,values:[tr]})).then(nr=>nr.numFailures?Ce.reject(nr.failures[0]):nr.lastResult).then(nr=>{if(er)try{_(Xn,er,nr)}catch{}return nr})}update(Xn,Qn){if(typeof Xn!="object"||n(Xn))return this.where(":id").equals(Xn).modify(Qn);{const Zn=b(Xn,this.schema.primKey.keyPath);if(Zn===void 0)return ht(new X.InvalidArgument("Given object does not contain its primary key"));try{typeof Qn!="function"?t(Qn).forEach(er=>{_(Xn,er,Qn[er])}):Qn(Xn,{value:Xn,primKey:Zn})}catch{}return this.where(":id").equals(Zn).modify(Qn)}}put(Xn,Qn){const{auto:Zn,keyPath:er}=this.schema.primKey;let tr=Xn;return er&&Zn&&(tr=xt(er)(Xn)),this._trans("readwrite",nr=>this.core.mutate({trans:nr,type:"put",values:[tr],keys:Qn!=null?[Qn]:null})).then(nr=>nr.numFailures?Ce.reject(nr.failures[0]):nr.lastResult).then(nr=>{if(er)try{_(Xn,er,nr)}catch{}return nr})}delete(Xn){return this._trans("readwrite",Qn=>this.core.mutate({trans:Qn,type:"delete",keys:[Xn]})).then(Qn=>Qn.numFailures?Ce.reject(Qn.failures[0]):void 0)}clear(){return this._trans("readwrite",Xn=>this.core.mutate({trans:Xn,type:"deleteRange",range:wt})).then(Xn=>Xn.numFailures?Ce.reject(Xn.failures[0]):void 0)}bulkGet(Xn){return this._trans("readonly",Qn=>this.core.getMany({keys:Xn,trans:Qn}).then(Zn=>Zn.map(er=>this.hook.reading.fire(er))))}bulkAdd(Xn,Qn,Zn){const er=Array.isArray(Qn)?Qn:void 0,tr=(Zn=Zn||(er?void 0:Qn))?Zn.allKeys:void 0;return this._trans("readwrite",nr=>{const{auto:rr,keyPath:sr}=this.schema.primKey;if(sr&&er)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(er&&er.length!==Xn.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const or=Xn.length;let ir=sr&&rr?Xn.map(xt(sr)):Xn;return this.core.mutate({trans:nr,type:"add",keys:er,values:ir,wantResults:tr}).then(({numFailures:ar,results:lr,lastResult:cr,failures:dr})=>{if(ar===0)return tr?lr:cr;throw new G(`${this.name}.bulkAdd(): ${ar} of ${or} operations failed`,dr)})})}bulkPut(Xn,Qn,Zn){const er=Array.isArray(Qn)?Qn:void 0,tr=(Zn=Zn||(er?void 0:Qn))?Zn.allKeys:void 0;return this._trans("readwrite",nr=>{const{auto:rr,keyPath:sr}=this.schema.primKey;if(sr&&er)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(er&&er.length!==Xn.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const or=Xn.length;let ir=sr&&rr?Xn.map(xt(sr)):Xn;return this.core.mutate({trans:nr,type:"put",keys:er,values:ir,wantResults:tr}).then(({numFailures:ar,results:lr,lastResult:cr,failures:dr})=>{if(ar===0)return tr?lr:cr;throw new G(`${this.name}.bulkPut(): ${ar} of ${or} operations failed`,dr)})})}bulkDelete(Xn){const Qn=Xn.length;return this._trans("readwrite",Zn=>this.core.mutate({trans:Zn,type:"delete",keys:Xn})).then(({numFailures:Zn,lastResult:er,failures:tr})=>{if(Zn===0)return er;throw new G(`${this.name}.bulkDelete(): ${Zn} of ${Qn} operations failed`,tr)})}}function Et(Jn){var Xn={},Qn=function(rr,sr){if(sr){for(var or=arguments.length,ir=new Array(or-1);--or;)ir[or-1]=arguments[or];return Xn[rr].subscribe.apply(null,ir),Jn}if(typeof rr=="string")return Xn[rr]};Qn.addEventType=tr;for(var Zn=1,er=arguments.length;Zn<er;++Zn)tr(arguments[Zn]);return Qn;function tr(rr,sr,or){if(typeof rr=="object")return nr(rr);sr||(sr=ae),or||(or=ee);var ir={subscribers:[],fire:or,subscribe:function(ar){ir.subscribers.indexOf(ar)===-1&&(ir.subscribers.push(ar),ir.fire=sr(ir.fire,ar))},unsubscribe:function(ar){ir.subscribers=ir.subscribers.filter(function(lr){return lr!==ar}),ir.fire=ir.subscribers.reduce(sr,or)}};return Xn[rr]=Qn[rr]=ir,ir}function nr(rr){t(rr).forEach(function(sr){var or=rr[sr];if(n(or))tr(sr,rr[sr][0],rr[sr][1]);else{if(or!=="asap")throw new X.InvalidArgument("Invalid event config");var ir=tr(sr,te,function(){for(var ar=arguments.length,lr=new Array(ar);ar--;)lr[ar]=arguments[ar];ir.subscribers.forEach(function(cr){v(function(){cr.apply(null,lr)})})})}})}}function Pt(Jn,Xn){return c(Xn).from({prototype:Jn}),Xn}function Kt(Jn,Xn){return!(Jn.filter||Jn.algorithm||Jn.or)&&(Xn?Jn.justLimit:!Jn.replayFilter)}function Ot(Jn,Xn){Jn.filter=_t(Jn.filter,Xn)}function St(Jn,Xn,Qn){var Zn=Jn.replayFilter;Jn.replayFilter=Zn?()=>_t(Zn(),Xn()):Xn,Jn.justLimit=Qn&&!Zn}function At(Jn,Xn){if(Jn.isPrimKey)return Xn.primaryKey;const Qn=Xn.getIndexByKeyPath(Jn.index);if(!Qn)throw new X.Schema("KeyPath "+Jn.index+" on object store "+Xn.name+" is not indexed");return Qn}function Ct(Jn,Xn,Qn){const Zn=At(Jn,Xn.schema);return Xn.openCursor({trans:Qn,values:!Jn.keysOnly,reverse:Jn.dir==="prev",unique:!!Jn.unique,query:{index:Zn,range:Jn.range}})}function jt(Jn,Xn,Qn,Zn){const er=Jn.replayFilter?_t(Jn.filter,Jn.replayFilter()):Jn.filter;if(Jn.or){const tr={},nr=(rr,sr,or)=>{if(!er||er(sr,or,lr=>sr.stop(lr),lr=>sr.fail(lr))){var ir=sr.primaryKey,ar=""+ir;ar==="[object ArrayBuffer]"&&(ar=""+new Uint8Array(ir)),o(tr,ar)||(tr[ar]=!0,Xn(rr,sr,or))}};return Promise.all([Jn.or._iterate(nr,Qn),Dt(Ct(Jn,Zn,Qn),Jn.algorithm,nr,!Jn.keysOnly&&Jn.valueMapper)])}return Dt(Ct(Jn,Zn,Qn),_t(Jn.algorithm,er),Xn,!Jn.keysOnly&&Jn.valueMapper)}function Dt(Jn,Xn,Qn,Zn){var er=We(Zn?(tr,nr,rr)=>Qn(Zn(tr),nr,rr):Qn);return Jn.then(tr=>{if(tr)return tr.start(()=>{var nr=()=>tr.continue();Xn&&!Xn(tr,rr=>nr=rr,rr=>{tr.stop(rr),nr=ee},rr=>{tr.fail(rr),nr=ee})||er(tr.value,tr,rr=>nr=rr),nr()})})}function It(Jn,Xn){try{const Qn=Bt(Jn),Zn=Bt(Xn);if(Qn!==Zn)return Qn==="Array"?1:Zn==="Array"?-1:Qn==="binary"?1:Zn==="binary"?-1:Qn==="string"?1:Zn==="string"?-1:Qn==="Date"?1:Zn!=="Date"?NaN:-1;switch(Qn){case"number":case"Date":case"string":return Jn>Xn?1:Jn<Xn?-1:0;case"binary":return function(er,tr){const nr=er.length,rr=tr.length,sr=nr<rr?nr:rr;for(let or=0;or<sr;++or)if(er[or]!==tr[or])return er[or]<tr[or]?-1:1;return nr===rr?0:nr<rr?-1:1}(Tt(Jn),Tt(Xn));case"Array":return function(er,tr){const nr=er.length,rr=tr.length,sr=nr<rr?nr:rr;for(let or=0;or<sr;++or){const ir=It(er[or],tr[or]);if(ir!==0)return ir}return nr===rr?0:nr<rr?-1:1}(Jn,Xn)}}catch{}return NaN}function Bt(Jn){const Xn=typeof Jn;if(Xn!=="object")return Xn;if(ArrayBuffer.isView(Jn))return"binary";const Qn=C(Jn);return Qn==="ArrayBuffer"?"binary":Qn}function Tt(Jn){return Jn instanceof Uint8Array?Jn:ArrayBuffer.isView(Jn)?new Uint8Array(Jn.buffer,Jn.byteOffset,Jn.byteLength):new Uint8Array(Jn)}class Rt{_read(Xn,Qn){var Zn=this._ctx;return Zn.error?Zn.table._trans(null,ht.bind(null,Zn.error)):Zn.table._trans("readonly",Xn).then(Qn)}_write(Xn){var Qn=this._ctx;return Qn.error?Qn.table._trans(null,ht.bind(null,Qn.error)):Qn.table._trans("readwrite",Xn,"locked")}_addAlgorithm(Xn){var Qn=this._ctx;Qn.algorithm=_t(Qn.algorithm,Xn)}_iterate(Xn,Qn){return jt(this._ctx,Xn,Qn,this._ctx.table.core)}clone(Xn){var Qn=Object.create(this.constructor.prototype),Zn=Object.create(this._ctx);return Xn&&r(Zn,Xn),Qn._ctx=Zn,Qn}raw(){return this._ctx.valueMapper=null,this}each(Xn){var Qn=this._ctx;return this._read(Zn=>jt(Qn,Xn,Zn,Qn.table.core))}count(Xn){return this._read(Qn=>{const Zn=this._ctx,er=Zn.table.core;if(Kt(Zn,!0))return er.count({trans:Qn,query:{index:At(Zn,er.schema),range:Zn.range}}).then(nr=>Math.min(nr,Zn.limit));var tr=0;return jt(Zn,()=>(++tr,!1),Qn,er).then(()=>tr)}).then(Xn)}sortBy(Xn,Qn){const Zn=Xn.split(".").reverse(),er=Zn[0],tr=Zn.length-1;function nr(or,ir){return ir?nr(or[Zn[ir]],ir-1):or[er]}var rr=this._ctx.dir==="next"?1:-1;function sr(or,ir){var ar=nr(or,tr),lr=nr(ir,tr);return ar<lr?-rr:ar>lr?rr:0}return this.toArray(function(or){return or.sort(sr)}).then(Qn)}toArray(Xn){return this._read(Qn=>{var Zn=this._ctx;if(Zn.dir==="next"&&Kt(Zn,!0)&&Zn.limit>0){const{valueMapper:er}=Zn,tr=At(Zn,Zn.table.core.schema);return Zn.table.core.query({trans:Qn,limit:Zn.limit,values:!0,query:{index:tr,range:Zn.range}}).then(({result:nr})=>er?nr.map(er):nr)}{const er=[];return jt(Zn,tr=>er.push(tr),Qn,Zn.table.core).then(()=>er)}},Xn)}offset(Xn){var Qn=this._ctx;return Xn<=0||(Qn.offset+=Xn,Kt(Qn)?St(Qn,()=>{var Zn=Xn;return(er,tr)=>Zn===0||(Zn===1?(--Zn,!1):(tr(()=>{er.advance(Zn),Zn=0}),!1))}):St(Qn,()=>{var Zn=Xn;return()=>--Zn<0})),this}limit(Xn){return this._ctx.limit=Math.min(this._ctx.limit,Xn),St(this._ctx,()=>{var Qn=Xn;return function(Zn,er,tr){return--Qn<=0&&er(tr),Qn>=0}},!0),this}until(Xn,Qn){return Ot(this._ctx,function(Zn,er,tr){return!Xn(Zn.value)||(er(tr),Qn)}),this}first(Xn){return this.limit(1).toArray(function(Qn){return Qn[0]}).then(Xn)}last(Xn){return this.reverse().first(Xn)}filter(Xn){var Qn,Zn;return Ot(this._ctx,function(er){return Xn(er.value)}),Qn=this._ctx,Zn=Xn,Qn.isMatch=_t(Qn.isMatch,Zn),this}and(Xn){return this.filter(Xn)}or(Xn){return new this.db.WhereClause(this._ctx.table,Xn,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(Xn){var Qn=this._ctx;return Qn.keysOnly=!Qn.isMatch,this.each(function(Zn,er){Xn(er.key,er)})}eachUniqueKey(Xn){return this._ctx.unique="unique",this.eachKey(Xn)}eachPrimaryKey(Xn){var Qn=this._ctx;return Qn.keysOnly=!Qn.isMatch,this.each(function(Zn,er){Xn(er.primaryKey,er)})}keys(Xn){var Qn=this._ctx;Qn.keysOnly=!Qn.isMatch;var Zn=[];return this.each(function(er,tr){Zn.push(tr.key)}).then(function(){return Zn}).then(Xn)}primaryKeys(Xn){var Qn=this._ctx;if(Qn.dir==="next"&&Kt(Qn,!0)&&Qn.limit>0)return this._read(er=>{var tr=At(Qn,Qn.table.core.schema);return Qn.table.core.query({trans:er,values:!1,limit:Qn.limit,query:{index:tr,range:Qn.range}})}).then(({result:er})=>er).then(Xn);Qn.keysOnly=!Qn.isMatch;var Zn=[];return this.each(function(er,tr){Zn.push(tr.primaryKey)}).then(function(){return Zn}).then(Xn)}uniqueKeys(Xn){return this._ctx.unique="unique",this.keys(Xn)}firstKey(Xn){return this.limit(1).keys(function(Qn){return Qn[0]}).then(Xn)}lastKey(Xn){return this.reverse().firstKey(Xn)}distinct(){var Xn=this._ctx,Qn=Xn.index&&Xn.table.schema.idxByName[Xn.index];if(!Qn||!Qn.multi)return this;var Zn={};return Ot(this._ctx,function(er){var tr=er.primaryKey.toString(),nr=o(Zn,tr);return Zn[tr]=!0,!nr}),this}modify(Xn){var Qn=this._ctx;return this._write(Zn=>{var er;if(typeof Xn=="function")er=Xn;else{var tr=t(Xn),nr=tr.length;er=function(hr){for(var pr=!1,fr=0;fr<nr;++fr){var ur=tr[fr],br=Xn[ur];b(hr,ur)!==br&&(_(hr,ur,br),pr=!0)}return pr}}const rr=Qn.table.core,{outbound:sr,extractKey:or}=rr.schema.primaryKey,ir=this.db._options.modifyChunkSize||200,ar=[];let lr=0;const cr=[],dr=(hr,pr)=>{const{failures:fr,numFailures:ur}=pr;lr+=hr-ur;for(let br of t(fr))ar.push(fr[br])};return this.clone().primaryKeys().then(hr=>{const pr=fr=>{const ur=Math.min(ir,hr.length-fr);return rr.getMany({trans:Zn,keys:hr.slice(fr,fr+ur),cache:"immutable"}).then(br=>{const gr=[],mr=[],_r=sr?[]:null,wr=[];for(let Cr=0;Cr<ur;++Cr){const Pr=br[Cr],Tr={value:O(Pr),primKey:hr[fr+Cr]};er.call(Tr,Tr.value,Tr)!==!1&&(Tr.value==null?wr.push(hr[fr+Cr]):sr||It(or(Pr),or(Tr.value))===0?(mr.push(Tr.value),sr&&_r.push(hr[fr+Cr])):(wr.push(hr[fr+Cr]),gr.push(Tr.value)))}const yr=Kt(Qn)&&Qn.limit===1/0&&(typeof Xn!="function"||Xn===Ft)&&{index:Qn.index,range:Qn.range};return Promise.resolve(gr.length>0&&rr.mutate({trans:Zn,type:"add",values:gr}).then(Cr=>{for(let Pr in Cr.failures)wr.splice(parseInt(Pr),1);dr(gr.length,Cr)})).then(()=>(mr.length>0||yr&&typeof Xn=="object")&&rr.mutate({trans:Zn,type:"put",keys:_r,values:mr,criteria:yr,changeSpec:typeof Xn!="function"&&Xn}).then(Cr=>dr(mr.length,Cr))).then(()=>(wr.length>0||yr&&Xn===Ft)&&rr.mutate({trans:Zn,type:"delete",keys:wr,criteria:yr}).then(Cr=>dr(wr.length,Cr))).then(()=>hr.length>fr+ur&&pr(fr+ir))})};return pr(0).then(()=>{if(ar.length>0)throw new z("Error modifying one or more objects",ar,lr,cr);return hr.length})})})}delete(){var Xn=this._ctx,Qn=Xn.range;return Kt(Xn)&&(Xn.isPrimKey&&!gt||Qn.type===3)?this._write(Zn=>{const{primaryKey:er}=Xn.table.core.schema,tr=Qn;return Xn.table.core.count({trans:Zn,query:{index:er,range:tr}}).then(nr=>Xn.table.core.mutate({trans:Zn,type:"deleteRange",range:tr}).then(({failures:rr,lastResult:sr,results:or,numFailures:ir})=>{if(ir)throw new z("Could not delete some values",Object.keys(rr).map(ar=>rr[ar]),nr-ir);return nr-ir}))}):this.modify(Ft)}}const Ft=(Jn,Xn)=>Xn.value=null;function Mt(Jn,Xn){return Jn<Xn?-1:Jn===Xn?0:1}function Nt(Jn,Xn){return Jn>Xn?-1:Jn===Xn?0:1}function qt(Jn,Xn,Qn){var Zn=Jn instanceof Yt?new Jn.Collection(Jn):Jn;return Zn._ctx.error=Qn?new Qn(Xn):new TypeError(Xn),Zn}function $t(Jn){return new Jn.Collection(Jn,()=>Wt("")).limit(0)}function Ut(Jn,Xn,Qn,Zn,er,tr){for(var nr=Math.min(Jn.length,Zn.length),rr=-1,sr=0;sr<nr;++sr){var or=Xn[sr];if(or!==Zn[sr])return er(Jn[sr],Qn[sr])<0?Jn.substr(0,sr)+Qn[sr]+Qn.substr(sr+1):er(Jn[sr],Zn[sr])<0?Jn.substr(0,sr)+Zn[sr]+Qn.substr(sr+1):rr>=0?Jn.substr(0,rr)+Xn[rr]+Qn.substr(rr+1):null;er(Jn[sr],or)<0&&(rr=sr)}return nr<Zn.length&&tr==="next"?Jn+Qn.substr(Jn.length):nr<Jn.length&&tr==="prev"?Jn.substr(0,Qn.length):rr<0?null:Jn.substr(0,rr)+Zn[rr]+Qn.substr(rr+1)}function Lt(Jn,Xn,Qn,Zn){var er,tr,nr,rr,sr,or,ir,ar=Qn.length;if(!Qn.every(hr=>typeof hr=="string"))return qt(Jn,"String expected.");function lr(hr){er=function(fr){return fr==="next"?ur=>ur.toUpperCase():ur=>ur.toLowerCase()}(hr),tr=function(fr){return fr==="next"?ur=>ur.toLowerCase():ur=>ur.toUpperCase()}(hr),nr=hr==="next"?Mt:Nt;var pr=Qn.map(function(fr){return{lower:tr(fr),upper:er(fr)}}).sort(function(fr,ur){return nr(fr.lower,ur.lower)});rr=pr.map(function(fr){return fr.upper}),sr=pr.map(function(fr){return fr.lower}),or=hr,ir=hr==="next"?"":Zn}lr("next");var cr=new Jn.Collection(Jn,()=>Vt(rr[0],sr[ar-1]+Zn));cr._ondirectionchange=function(hr){lr(hr)};var dr=0;return cr._addAlgorithm(function(hr,pr,fr){var ur=hr.key;if(typeof ur!="string")return!1;var br=tr(ur);if(Xn(br,sr,dr))return!0;for(var gr=null,mr=dr;mr<ar;++mr){var _r=Ut(ur,br,rr[mr],sr[mr],nr,or);_r===null&&gr===null?dr=mr+1:(gr===null||nr(gr,_r)>0)&&(gr=_r)}return pr(gr!==null?function(){hr.continue(gr+ir)}:fr),!1}),cr}function Vt(Jn,Xn,Qn,Zn){return{type:2,lower:Jn,upper:Xn,lowerOpen:Qn,upperOpen:Zn}}function Wt(Jn){return{type:1,lower:Jn,upper:Jn}}class Yt{get Collection(){return this._ctx.table.db.Collection}between(Xn,Qn,Zn,er){Zn=Zn!==!1,er=er===!0;try{return this._cmp(Xn,Qn)>0||this._cmp(Xn,Qn)===0&&(Zn||er)&&(!Zn||!er)?$t(this):new this.Collection(this,()=>Vt(Xn,Qn,!Zn,!er))}catch{return qt(this,pt)}}equals(Xn){return Xn==null?qt(this,pt):new this.Collection(this,()=>Wt(Xn))}above(Xn){return Xn==null?qt(this,pt):new this.Collection(this,()=>Vt(Xn,void 0,!0))}aboveOrEqual(Xn){return Xn==null?qt(this,pt):new this.Collection(this,()=>Vt(Xn,void 0,!1))}below(Xn){return Xn==null?qt(this,pt):new this.Collection(this,()=>Vt(void 0,Xn,!1,!0))}belowOrEqual(Xn){return Xn==null?qt(this,pt):new this.Collection(this,()=>Vt(void 0,Xn))}startsWith(Xn){return typeof Xn!="string"?qt(this,"String expected."):this.between(Xn,Xn+ft,!0,!0)}startsWithIgnoreCase(Xn){return Xn===""?this.startsWith(Xn):Lt(this,(Qn,Zn)=>Qn.indexOf(Zn[0])===0,[Xn],ft)}equalsIgnoreCase(Xn){return Lt(this,(Qn,Zn)=>Qn===Zn[0],[Xn],"")}anyOfIgnoreCase(){var Xn=B.apply(I,arguments);return Xn.length===0?$t(this):Lt(this,(Qn,Zn)=>Zn.indexOf(Qn)!==-1,Xn,"")}startsWithAnyOfIgnoreCase(){var Xn=B.apply(I,arguments);return Xn.length===0?$t(this):Lt(this,(Qn,Zn)=>Zn.some(er=>Qn.indexOf(er)===0),Xn,ft)}anyOf(){const Xn=B.apply(I,arguments);let Qn=this._cmp;try{Xn.sort(Qn)}catch{return qt(this,pt)}if(Xn.length===0)return $t(this);const Zn=new this.Collection(this,()=>Vt(Xn[0],Xn[Xn.length-1]));Zn._ondirectionchange=tr=>{Qn=tr==="next"?this._ascending:this._descending,Xn.sort(Qn)};let er=0;return Zn._addAlgorithm((tr,nr,rr)=>{const sr=tr.key;for(;Qn(sr,Xn[er])>0;)if(++er,er===Xn.length)return nr(rr),!1;return Qn(sr,Xn[er])===0||(nr(()=>{tr.continue(Xn[er])}),!1)}),Zn}notEqual(Xn){return this.inAnyRange([[-(1/0),Xn],[Xn,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const Xn=B.apply(I,arguments);if(Xn.length===0)return new this.Collection(this);try{Xn.sort(this._ascending)}catch{return qt(this,pt)}const Qn=Xn.reduce((Zn,er)=>Zn?Zn.concat([[Zn[Zn.length-1][1],er]]):[[-(1/0),er]],null);return Qn.push([Xn[Xn.length-1],this.db._maxKey]),this.inAnyRange(Qn,{includeLowers:!1,includeUppers:!1})}inAnyRange(Xn,Qn){const Zn=this._cmp,er=this._ascending,tr=this._descending,nr=this._min,rr=this._max;if(Xn.length===0)return $t(this);if(!Xn.every(ur=>ur[0]!==void 0&&ur[1]!==void 0&&er(ur[0],ur[1])<=0))return qt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);const sr=!Qn||Qn.includeLowers!==!1,or=Qn&&Qn.includeUppers===!0;let ir,ar=er;function lr(ur,br){return ar(ur[0],br[0])}try{ir=Xn.reduce(function(ur,br){let gr=0,mr=ur.length;for(;gr<mr;++gr){const _r=ur[gr];if(Zn(br[0],_r[1])<0&&Zn(br[1],_r[0])>0){_r[0]=nr(_r[0],br[0]),_r[1]=rr(_r[1],br[1]);break}}return gr===mr&&ur.push(br),ur},[]),ir.sort(lr)}catch{return qt(this,pt)}let cr=0;const dr=or?ur=>er(ur,ir[cr][1])>0:ur=>er(ur,ir[cr][1])>=0,hr=sr?ur=>tr(ur,ir[cr][0])>0:ur=>tr(ur,ir[cr][0])>=0;let pr=dr;const fr=new this.Collection(this,()=>Vt(ir[0][0],ir[ir.length-1][1],!sr,!or));return fr._ondirectionchange=ur=>{ur==="next"?(pr=dr,ar=er):(pr=hr,ar=tr),ir.sort(lr)},fr._addAlgorithm((ur,br,gr)=>{for(var mr=ur.key;pr(mr);)if(++cr,cr===ir.length)return br(gr),!1;return!!function(_r){return!dr(_r)&&!hr(_r)}(mr)||(this._cmp(mr,ir[cr][1])===0||this._cmp(mr,ir[cr][0])===0||br(()=>{ar===er?ur.continue(ir[cr][0]):ur.continue(ir[cr][1])}),!1)}),fr}startsWithAnyOf(){const Xn=B.apply(I,arguments);return Xn.every(Qn=>typeof Qn=="string")?Xn.length===0?$t(this):this.inAnyRange(Xn.map(Qn=>[Qn,Qn+ft])):qt(this,"startsWithAnyOf() only works with strings")}}function zt(Jn){return We(function(Xn){return Gt(Xn),Jn(Xn.target.error),!1})}function Gt(Jn){Jn.stopPropagation&&Jn.stopPropagation(),Jn.preventDefault&&Jn.preventDefault()}const Ht=Et(null,"storagemutated");class Qt{_lock(){return m(!Ke.global),++this._reculock,this._reculock!==1||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),--this._reculock==0)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var Xn=this._blockedFuncs.shift();try{ot(Xn[1],Xn[0])}catch{}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(Xn){if(!this.mode)return this;const Qn=this.db.idbdb,Zn=this.db._state.dbOpenError;if(m(!this.idbtrans),!Xn&&!Qn)switch(Zn&&Zn.name){case"DatabaseClosedError":throw new X.DatabaseClosed(Zn);case"MissingAPIError":throw new X.MissingAPI(Zn.message,Zn);default:throw new X.OpenFailed(Zn)}if(!this.active)throw new X.TransactionInactive;return m(this._completion._state===null),(Xn=this.idbtrans=Xn||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):Qn.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We(er=>{Gt(er),this._reject(Xn.error)}),Xn.onabort=We(er=>{Gt(er),this.active&&this._reject(new X.Abort(Xn.error)),this.active=!1,this.on("abort").fire(er)}),Xn.oncomplete=We(()=>{this.active=!1,this._resolve(),"mutatedParts"in Xn&&Ht.storagemutated.fire(Xn.mutatedParts)}),this}_promise(Xn,Qn,Zn){if(Xn==="readwrite"&&this.mode!=="readwrite")return ht(new X.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce((tr,nr)=>{this._blockedFuncs.push([()=>{this._promise(Xn,Qn,Zn).then(tr,nr)},Ke])});if(Zn)return Je(()=>{var tr=new Ce((nr,rr)=>{this._lock();const sr=Qn(nr,rr,this);sr&&sr.then&&sr.then(nr,rr)});return tr.finally(()=>this._unlock()),tr._lib=!0,tr});var er=new Ce((tr,nr)=>{var rr=Qn(tr,nr,this);rr&&rr.then&&rr.then(tr,nr)});return er._lib=!0,er}_root(){return this.parent?this.parent._root():this}waitFor(Xn){var Qn=this._root();const Zn=Ce.resolve(Xn);if(Qn._waitingFor)Qn._waitingFor=Qn._waitingFor.then(()=>Zn);else{Qn._waitingFor=Zn,Qn._waitingQueue=[];var er=Qn.idbtrans.objectStore(Qn.storeNames[0]);(function nr(){for(++Qn._spinCount;Qn._waitingQueue.length;)Qn._waitingQueue.shift()();Qn._waitingFor&&(er.get(-1/0).onsuccess=nr)})()}var tr=Qn._waitingFor;return new Ce((nr,rr)=>{Zn.then(sr=>Qn._waitingQueue.push(We(nr.bind(null,sr))),sr=>Qn._waitingQueue.push(We(rr.bind(null,sr)))).finally(()=>{Qn._waitingFor===tr&&(Qn._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(Xn){const Qn=this._memoizedTables||(this._memoizedTables={});if(o(Qn,Xn))return Qn[Xn];const Zn=this.schema[Xn];if(!Zn)throw new X.NotFound("Table "+Xn+" not part of transaction");const er=new this.db.Table(Xn,Zn,this);return er.core=this.db.core.table(Xn),Qn[Xn]=er,er}}function Xt(Jn,Xn,Qn,Zn,er,tr,nr){return{name:Jn,keyPath:Xn,unique:Qn,multi:Zn,auto:er,compound:tr,src:(Qn&&!nr?"&":"")+(Zn?"*":"")+(er?"++":"")+Jt(Xn)}}function Jt(Jn){return typeof Jn=="string"?Jn:Jn?"["+[].join.call(Jn,"+")+"]":""}function Zt(Jn,Xn,Qn){return{name:Jn,primKey:Xn,indexes:Qn,mappedClass:null,idxByName:g(Qn,Zn=>[Zn.name,Zn])}}let en=Jn=>{try{return Jn.only([[]]),en=()=>[[]],[[]]}catch{return en=()=>ft,ft}};function tn(Jn){return Jn==null?()=>{}:typeof Jn=="string"?function(Xn){return Xn.split(".").length===1?Qn=>Qn[Xn]:Qn=>b(Qn,Xn)}(Jn):Xn=>b(Xn,Jn)}function nn(Jn){return[].slice.call(Jn)}let rn=0;function sn(Jn){return Jn==null?":id":typeof Jn=="string"?Jn:`[${Jn.join("+")}]`}function on(Jn,Xn,Qn){function Zn(sr){if(sr.type===3)return null;if(sr.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:or,upper:ir,lowerOpen:ar,upperOpen:lr}=sr;return or===void 0?ir===void 0?null:Xn.upperBound(ir,!!lr):ir===void 0?Xn.lowerBound(or,!!ar):Xn.bound(or,ir,!!ar,!!lr)}const{schema:er,hasGetAll:tr}=function(sr,or){const ir=nn(sr.objectStoreNames);return{schema:{name:sr.name,tables:ir.map(ar=>or.objectStore(ar)).map(ar=>{const{keyPath:lr,autoIncrement:cr}=ar,dr=n(lr),hr=lr==null,pr={},fr={name:ar.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:hr,compound:dr,keyPath:lr,autoIncrement:cr,unique:!0,extractKey:tn(lr)},indexes:nn(ar.indexNames).map(ur=>ar.index(ur)).map(ur=>{const{name:br,unique:gr,multiEntry:mr,keyPath:_r}=ur,wr={name:br,compound:n(_r),keyPath:_r,unique:gr,multiEntry:mr,extractKey:tn(_r)};return pr[sn(_r)]=wr,wr}),getIndexByKeyPath:ur=>pr[sn(ur)]};return pr[":id"]=fr.primaryKey,lr!=null&&(pr[sn(lr)]=fr.primaryKey),fr})},hasGetAll:ir.length>0&&"getAll"in or.objectStore(ir[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(Jn,Qn),nr=er.tables.map(sr=>function(or){const ir=or.name;return{name:ir,schema:or,mutate:function({trans:ar,type:lr,keys:cr,values:dr,range:hr}){return new Promise((pr,fr)=>{pr=We(pr);const ur=ar.objectStore(ir),br=ur.keyPath==null,gr=lr==="put"||lr==="add";if(!gr&&lr!=="delete"&&lr!=="deleteRange")throw new Error("Invalid operation type: "+lr);const{length:mr}=cr||dr||{length:1};if(cr&&dr&&cr.length!==dr.length)throw new Error("Given keys array must have same length as given values array.");if(mr===0)return pr({numFailures:0,failures:{},results:[],lastResult:void 0});let _r;const wr=[],yr=[];let Cr=0;const Pr=Rr=>{++Cr,Gt(Rr)};if(lr==="deleteRange"){if(hr.type===4)return pr({numFailures:Cr,failures:yr,results:[],lastResult:void 0});hr.type===3?wr.push(_r=ur.clear()):wr.push(_r=ur.delete(Zn(hr)))}else{const[Rr,Or]=gr?br?[dr,cr]:[dr,null]:[cr,null];if(gr)for(let $r=0;$r<mr;++$r)wr.push(_r=Or&&Or[$r]!==void 0?ur[lr](Rr[$r],Or[$r]):ur[lr](Rr[$r])),_r.onerror=Pr;else for(let $r=0;$r<mr;++$r)wr.push(_r=ur[lr](Rr[$r])),_r.onerror=Pr}const Tr=Rr=>{const Or=Rr.target.result;wr.forEach(($r,Gr)=>$r.error!=null&&(yr[Gr]=$r.error)),pr({numFailures:Cr,failures:yr,results:lr==="delete"?cr:wr.map($r=>$r.result),lastResult:Or})};_r.onerror=Rr=>{Pr(Rr),Tr(Rr)},_r.onsuccess=Tr})},getMany:({trans:ar,keys:lr})=>new Promise((cr,dr)=>{cr=We(cr);const hr=ar.objectStore(ir),pr=lr.length,fr=new Array(pr);let ur,br=0,gr=0;const mr=wr=>{const yr=wr.target;fr[yr._pos]=yr.result,++gr===br&&cr(fr)},_r=zt(dr);for(let wr=0;wr<pr;++wr)lr[wr]!=null&&(ur=hr.get(lr[wr]),ur._pos=wr,ur.onsuccess=mr,ur.onerror=_r,++br);br===0&&cr(fr)}),get:({trans:ar,key:lr})=>new Promise((cr,dr)=>{cr=We(cr);const hr=ar.objectStore(ir).get(lr);hr.onsuccess=pr=>cr(pr.target.result),hr.onerror=zt(dr)}),query:function(ar){return lr=>new Promise((cr,dr)=>{cr=We(cr);const{trans:hr,values:pr,limit:fr,query:ur}=lr,br=fr===1/0?void 0:fr,{index:gr,range:mr}=ur,_r=hr.objectStore(ir),wr=gr.isPrimaryKey?_r:_r.index(gr.name),yr=Zn(mr);if(fr===0)return cr({result:[]});if(ar){const Cr=pr?wr.getAll(yr,br):wr.getAllKeys(yr,br);Cr.onsuccess=Pr=>cr({result:Pr.target.result}),Cr.onerror=zt(dr)}else{let Cr=0;const Pr=pr||!("openKeyCursor"in wr)?wr.openCursor(yr):wr.openKeyCursor(yr),Tr=[];Pr.onsuccess=Rr=>{const Or=Pr.result;return Or?(Tr.push(pr?Or.value:Or.primaryKey),++Cr===fr?cr({result:Tr}):void Or.continue()):cr({result:Tr})},Pr.onerror=zt(dr)}})}(tr),openCursor:function({trans:ar,values:lr,query:cr,reverse:dr,unique:hr}){return new Promise((pr,fr)=>{pr=We(pr);const{index:ur,range:br}=cr,gr=ar.objectStore(ir),mr=ur.isPrimaryKey?gr:gr.index(ur.name),_r=dr?hr?"prevunique":"prev":hr?"nextunique":"next",wr=lr||!("openKeyCursor"in mr)?mr.openCursor(Zn(br),_r):mr.openKeyCursor(Zn(br),_r);wr.onerror=zt(fr),wr.onsuccess=We(yr=>{const Cr=wr.result;if(!Cr)return void pr(null);Cr.___id=++rn,Cr.done=!1;const Pr=Cr.continue.bind(Cr);let Tr=Cr.continuePrimaryKey;Tr&&(Tr=Tr.bind(Cr));const Rr=Cr.advance.bind(Cr),Or=()=>{throw new Error("Cursor not stopped")};Cr.trans=ar,Cr.stop=Cr.continue=Cr.continuePrimaryKey=Cr.advance=()=>{throw new Error("Cursor not started")},Cr.fail=We(fr),Cr.next=function(){let $r=1;return this.start(()=>$r--?this.continue():this.stop()).then(()=>this)},Cr.start=$r=>{const Gr=new Promise((Wr,Yr)=>{Wr=We(Wr),wr.onerror=zt(Yr),Cr.fail=Yr,Cr.stop=us=>{Cr.stop=Cr.continue=Cr.continuePrimaryKey=Cr.advance=Or,Wr(us)}}),Hr=()=>{if(wr.result)try{$r()}catch(Wr){Cr.fail(Wr)}else Cr.done=!0,Cr.start=()=>{throw new Error("Cursor behind last entry")},Cr.stop()};return wr.onsuccess=We(Wr=>{wr.onsuccess=Hr,Hr()}),Cr.continue=Pr,Cr.continuePrimaryKey=Tr,Cr.advance=Rr,Hr(),Gr},pr(Cr)},fr)})},count({query:ar,trans:lr}){const{index:cr,range:dr}=ar;return new Promise((hr,pr)=>{const fr=lr.objectStore(ir),ur=cr.isPrimaryKey?fr:fr.index(cr.name),br=Zn(dr),gr=br?ur.count(br):ur.count();gr.onsuccess=We(mr=>hr(mr.target.result)),gr.onerror=zt(pr)})}}}(sr)),rr={};return nr.forEach(sr=>rr[sr.name]=sr),{stack:"dbcore",transaction:Jn.transaction.bind(Jn),table(sr){if(!rr[sr])throw new Error(`Table '${sr}' not found`);return rr[sr]},MIN_KEY:-1/0,MAX_KEY:en(Xn),schema:er}}function an({_novip:Jn},Xn){const Qn=Xn.db,Zn=function(er,tr,{IDBKeyRange:nr,indexedDB:rr},sr){return{dbcore:function(ir,ar){return ar.reduce((lr,{create:cr})=>({...lr,...cr(lr)}),ir)}(on(tr,nr,sr),er.dbcore)}}(Jn._middlewares,Qn,Jn._deps,Xn);Jn.core=Zn.dbcore,Jn.tables.forEach(er=>{const tr=er.name;Jn.core.schema.tables.some(nr=>nr.name===tr)&&(er.core=Jn.core.table(tr),Jn[tr]instanceof Jn.Table&&(Jn[tr].core=er.core))})}function un({_novip:Jn},Xn,Qn,Zn){Qn.forEach(er=>{const tr=Zn[er];Xn.forEach(nr=>{const rr=d(nr,er);(!rr||"value"in rr&&rr.value===void 0)&&(nr===Jn.Transaction.prototype||nr instanceof Jn.Transaction?l(nr,er,{get(){return this.table(er)},set(sr){u(this,er,{value:sr,writable:!0,configurable:!0,enumerable:!0})}}):nr[er]=new Jn.Table(er,tr))})})}function ln({_novip:Jn},Xn){Xn.forEach(Qn=>{for(let Zn in Qn)Qn[Zn]instanceof Jn.Table&&delete Qn[Zn]})}function cn(Jn,Xn){return Jn._cfg.version-Xn._cfg.version}function hn(Jn,Xn,Qn,Zn){const er=Jn._dbSchema,tr=Jn._createTransaction("readwrite",Jn._storeNames,er);tr.create(Qn),tr._completion.catch(Zn);const nr=tr._reject.bind(tr),rr=Ke.transless||Ke;Je(()=>{Ke.trans=tr,Ke.transless=rr,Xn===0?(t(er).forEach(sr=>{fn(Qn,sr,er[sr].primKey,er[sr].indexes)}),an(Jn,Qn),Ce.follow(()=>Jn.on.populate.fire(tr)).catch(nr)):function({_novip:sr},or,ir,ar){const lr=[],cr=sr._versions;let dr=sr._dbSchema=yn(sr,sr.idbdb,ar),hr=!1;function pr(){return lr.length?Ce.resolve(lr.shift()(ir.idbtrans)).then(pr):Ce.resolve()}return cr.filter(fr=>fr._cfg.version>=or).forEach(fr=>{lr.push(()=>{const ur=dr,br=fr._cfg.dbschema;mn(sr,ur,ar),mn(sr,br,ar),dr=sr._dbSchema=br;const gr=dn(ur,br);gr.add.forEach(_r=>{fn(ar,_r[0],_r[1].primKey,_r[1].indexes)}),gr.change.forEach(_r=>{if(_r.recreate)throw new X.Upgrade("Not yet support for changing primary key");{const wr=ar.objectStore(_r.name);_r.add.forEach(yr=>pn(wr,yr)),_r.change.forEach(yr=>{wr.deleteIndex(yr.name),pn(wr,yr)}),_r.del.forEach(yr=>wr.deleteIndex(yr))}});const mr=fr._cfg.contentUpgrade;if(mr&&fr._cfg.version>or){an(sr,ar),ir._memoizedTables={},hr=!0;let _r=w(br);gr.del.forEach(Pr=>{_r[Pr]=ur[Pr]}),ln(sr,[sr.Transaction.prototype]),un(sr,[sr.Transaction.prototype],t(_r),_r),ir.schema=_r;const wr=T(mr);let yr;wr&&Ze();const Cr=Ce.follow(()=>{if(yr=mr(ir),yr&&wr){var Pr=et.bind(null,null);yr.then(Pr,Pr)}});return yr&&typeof yr.then=="function"?Ce.resolve(yr):Cr.then(()=>yr)}}),lr.push(ur=>{(!hr||!vt)&&function(br,gr){[].slice.call(gr.db.objectStoreNames).forEach(mr=>br[mr]==null&&gr.db.deleteObjectStore(mr))}(fr._cfg.dbschema,ur),ln(sr,[sr.Transaction.prototype]),un(sr,[sr.Transaction.prototype],sr._storeNames,sr._dbSchema),ir.schema=sr._dbSchema})}),pr().then(()=>{var fr,ur;ur=ar,t(fr=dr).forEach(br=>{ur.db.objectStoreNames.contains(br)||fn(ur,br,fr[br].primKey,fr[br].indexes)})})}(Jn,Xn,tr,Qn).catch(nr)})}function dn(Jn,Xn){const Qn={del:[],add:[],change:[]};let Zn;for(Zn in Jn)Xn[Zn]||Qn.del.push(Zn);for(Zn in Xn){const er=Jn[Zn],tr=Xn[Zn];if(er){const nr={name:Zn,def:tr,recreate:!1,del:[],add:[],change:[]};if(""+(er.primKey.keyPath||"")!=""+(tr.primKey.keyPath||"")||er.primKey.auto!==tr.primKey.auto&&!mt)nr.recreate=!0,Qn.change.push(nr);else{const rr=er.idxByName,sr=tr.idxByName;let or;for(or in rr)sr[or]||nr.del.push(or);for(or in sr){const ir=rr[or],ar=sr[or];ir?ir.src!==ar.src&&nr.change.push(ar):nr.add.push(ar)}(nr.del.length>0||nr.add.length>0||nr.change.length>0)&&Qn.change.push(nr)}}else Qn.add.push([Zn,tr])}return Qn}function fn(Jn,Xn,Qn,Zn){const er=Jn.db.createObjectStore(Xn,Qn.keyPath?{keyPath:Qn.keyPath,autoIncrement:Qn.auto}:{autoIncrement:Qn.auto});return Zn.forEach(tr=>pn(er,tr)),er}function pn(Jn,Xn){Jn.createIndex(Xn.name,Xn.keyPath,{unique:Xn.unique,multiEntry:Xn.multi})}function yn(Jn,Xn,Qn){const Zn={};return p(Xn.objectStoreNames,0).forEach(er=>{const tr=Qn.objectStore(er);let nr=tr.keyPath;const rr=Xt(Jt(nr),nr||"",!1,!1,!!tr.autoIncrement,nr&&typeof nr!="string",!0),sr=[];for(let ir=0;ir<tr.indexNames.length;++ir){const ar=tr.index(tr.indexNames[ir]);nr=ar.keyPath;var or=Xt(ar.name,nr,!!ar.unique,!!ar.multiEntry,!1,nr&&typeof nr!="string",!1);sr.push(or)}Zn[er]=Zt(er,rr,sr)}),Zn}function mn({_novip:Jn},Xn,Qn){const Zn=Qn.db.objectStoreNames;for(let er=0;er<Zn.length;++er){const tr=Zn[er],nr=Qn.objectStore(tr);Jn._hasGetAll="getAll"in nr;for(let rr=0;rr<nr.indexNames.length;++rr){const sr=nr.indexNames[rr],or=nr.index(sr).keyPath,ir=typeof or=="string"?or:"["+p(or).join("+")+"]";if(Xn[tr]){const ar=Xn[tr].idxByName[ir];ar&&(ar.name=sr,delete Xn[tr].idxByName[ir],Xn[tr].idxByName[sr]=ar)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(Jn._hasGetAll=!1)}class vn{_parseStoresSpec(Xn,Qn){t(Xn).forEach(Zn=>{if(Xn[Zn]!==null){var er=Xn[Zn].split(",").map((nr,rr)=>{const sr=(nr=nr.trim()).replace(/([&*]|\+\+)/g,""),or=/^\[/.test(sr)?sr.match(/^\[(.*)\]$/)[1].split("+"):sr;return Xt(sr,or||null,/\&/.test(nr),/\*/.test(nr),/\+\+/.test(nr),n(or),rr===0)}),tr=er.shift();if(tr.multi)throw new X.Schema("Primary key cannot be multi-valued");er.forEach(nr=>{if(nr.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!nr.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),Qn[Zn]=Zt(Zn,tr,er)}})}stores(Xn){const Qn=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,Xn):Xn;const Zn=Qn._versions,er={};let tr={};return Zn.forEach(nr=>{r(er,nr._cfg.storesSource),tr=nr._cfg.dbschema={},nr._parseStoresSpec(er,tr)}),Qn._dbSchema=tr,ln(Qn,[Qn._allTables,Qn,Qn.Transaction.prototype]),un(Qn,[Qn._allTables,Qn,Qn.Transaction.prototype,this._cfg.tables],t(tr),tr),Qn._storeNames=t(tr),this}upgrade(Xn){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,Xn),this}}function gn(Jn,Xn){let Qn=Jn._dbNamesDB;return Qn||(Qn=Jn._dbNamesDB=new $n("__dbnames",{addons:[],indexedDB:Jn,IDBKeyRange:Xn}),Qn.version(1).stores({dbnames:"name"})),Qn.table("dbnames")}function bn(Jn){return Jn&&typeof Jn.databases=="function"}function _n(Jn){return Je(function(){return Ke.letThrough=!0,Jn()})}function wn(){var Jn;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Xn){var Qn=function(){return indexedDB.databases().finally(Xn)};Jn=setInterval(Qn,100),Qn()}).finally(function(){return clearInterval(Jn)}):Promise.resolve()}function xn(Jn){const Xn=Jn._state,{indexedDB:Qn}=Jn._deps;if(Xn.isBeingOpened||Jn.idbdb)return Xn.dbReadyPromise.then(()=>Xn.dbOpenError?ht(Xn.dbOpenError):Jn);R&&(Xn.openCanceller._stackHolder=q()),Xn.isBeingOpened=!0,Xn.dbOpenError=null,Xn.openComplete=!1;const Zn=Xn.openCanceller;function er(){if(Xn.openCanceller!==Zn)throw new X.DatabaseClosed("db.open() was cancelled")}let tr=Xn.dbReadyResolve,nr=null,rr=!1;return Ce.race([Zn,(typeof navigator>"u"?Ce.resolve():wn()).then(()=>new Ce((sr,or)=>{if(er(),!Qn)throw new X.MissingAPI;const ir=Jn.name,ar=Xn.autoSchema?Qn.open(ir):Qn.open(ir,Math.round(10*Jn.verno));if(!ar)throw new X.MissingAPI;ar.onerror=zt(or),ar.onblocked=We(Jn._fireOnBlocked),ar.onupgradeneeded=We(lr=>{if(nr=ar.transaction,Xn.autoSchema&&!Jn._options.allowEmptyDB){ar.onerror=Gt,nr.abort(),ar.result.close();const dr=Qn.deleteDatabase(ir);dr.onsuccess=dr.onerror=We(()=>{or(new X.NoSuchDatabase(`Database ${ir} doesnt exist`))})}else{nr.onerror=zt(or);var cr=lr.oldVersion>Math.pow(2,62)?0:lr.oldVersion;rr=cr<1,Jn._novip.idbdb=ar.result,hn(Jn,cr/10,nr,or)}},or),ar.onsuccess=We(()=>{nr=null;const lr=Jn._novip.idbdb=ar.result,cr=p(lr.objectStoreNames);if(cr.length>0)try{const hr=lr.transaction((dr=cr).length===1?dr[0]:dr,"readonly");Xn.autoSchema?function({_novip:pr},fr,ur){pr.verno=fr.version/10;const br=pr._dbSchema=yn(0,fr,ur);pr._storeNames=p(fr.objectStoreNames,0),un(pr,[pr._allTables],t(br),br)}(Jn,lr,hr):(mn(Jn,Jn._dbSchema,hr),function(pr,fr){const ur=dn(yn(0,pr.idbdb,fr),pr._dbSchema);return!(ur.add.length||ur.change.some(br=>br.add.length||br.change.length))}(Jn,hr)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),an(Jn,hr)}catch{}var dr;yt.push(Jn),lr.onversionchange=We(hr=>{Xn.vcFired=!0,Jn.on("versionchange").fire(hr)}),lr.onclose=We(hr=>{Jn.on("close").fire(hr)}),rr&&function({indexedDB:hr,IDBKeyRange:pr},fr){!bn(hr)&&fr!=="__dbnames"&&gn(hr,pr).put({name:fr}).catch(ee)}(Jn._deps,ir),sr()},or)}))]).then(()=>(er(),Xn.onReadyBeingFired=[],Ce.resolve(_n(()=>Jn.on.ready.fire(Jn.vip))).then(function sr(){if(Xn.onReadyBeingFired.length>0){let or=Xn.onReadyBeingFired.reduce(ue,ee);return Xn.onReadyBeingFired=[],Ce.resolve(_n(()=>or(Jn.vip))).then(sr)}}))).finally(()=>{Xn.onReadyBeingFired=null,Xn.isBeingOpened=!1}).then(()=>Jn).catch(sr=>{Xn.dbOpenError=sr;try{nr&&nr.abort()}catch{}return Zn===Xn.openCanceller&&Jn._close(),ht(sr)}).finally(()=>{Xn.openComplete=!0,tr()})}function kn(Jn){var Xn=tr=>Jn.next(tr),Qn=er(Xn),Zn=er(tr=>Jn.throw(tr));function er(tr){return nr=>{var rr=tr(nr),sr=rr.value;return rr.done?sr:sr&&typeof sr.then=="function"?sr.then(Qn,Zn):n(sr)?Promise.all(sr).then(Qn,Zn):Qn(sr)}}return er(Xn)()}function En(Jn,Xn,Qn){var Zn=arguments.length;if(Zn<2)throw new X.InvalidArgument("Too few arguments");for(var er=new Array(Zn-1);--Zn;)er[Zn-1]=arguments[Zn];Qn=er.pop();var tr=k(er);return[Jn,tr,Qn]}function Pn(Jn,Xn,Qn,Zn,er){return Ce.resolve().then(()=>{const tr=Ke.transless||Ke,nr=Jn._createTransaction(Xn,Qn,Jn._dbSchema,Zn),rr={trans:nr,transless:tr};if(Zn)nr.idbtrans=Zn.idbtrans;else try{nr.create(),Jn._state.PR1398_maxLoop=3}catch(ar){return ar.name===H.InvalidState&&Jn.isOpen()&&--Jn._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),Jn._close(),Jn.open().then(()=>Pn(Jn,Xn,Qn,null,er))):ht(ar)}const sr=T(er);let or;sr&&Ze();const ir=Ce.follow(()=>{if(or=er.call(nr,nr),or)if(sr){var ar=et.bind(null,null);or.then(ar,ar)}else typeof or.next=="function"&&typeof or.throw=="function"&&(or=kn(or))},rr);return(or&&typeof or.then=="function"?Ce.resolve(or).then(ar=>nr.active?ar:ht(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):ir.then(()=>or)).then(ar=>(Zn&&nr._resolve(),nr._completion.then(()=>ar))).catch(ar=>(nr._reject(ar),ht(ar)))})}function Kn(Jn,Xn,Qn){const Zn=n(Jn)?Jn.slice():[Jn];for(let er=0;er<Qn;++er)Zn.push(Xn);return Zn}const On={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(Jn){return{...Jn,table(Xn){const Qn=Jn.table(Xn),{schema:Zn}=Qn,er={},tr=[];function nr(ir,ar,lr){const cr=sn(ir),dr=er[cr]=er[cr]||[],hr=ir==null?0:typeof ir=="string"?1:ir.length,pr=ar>0,fr={...lr,isVirtual:pr,keyTail:ar,keyLength:hr,extractKey:tn(ir),unique:!pr&&lr.unique};return dr.push(fr),fr.isPrimaryKey||tr.push(fr),hr>1&&nr(hr===2?ir[0]:ir.slice(0,hr-1),ar+1,lr),dr.sort((ur,br)=>ur.keyTail-br.keyTail),fr}const rr=nr(Zn.primaryKey.keyPath,0,Zn.primaryKey);er[":id"]=[rr];for(const ir of Zn.indexes)nr(ir.keyPath,0,ir);function sr(ir){const ar=ir.query.index;return ar.isVirtual?{...ir,query:{index:ar,range:(lr=ir.query.range,cr=ar.keyTail,{type:lr.type===1?2:lr.type,lower:Kn(lr.lower,lr.lowerOpen?Jn.MAX_KEY:Jn.MIN_KEY,cr),lowerOpen:!0,upper:Kn(lr.upper,lr.upperOpen?Jn.MIN_KEY:Jn.MAX_KEY,cr),upperOpen:!0})}}:ir;var lr,cr}return{...Qn,schema:{...Zn,primaryKey:rr,indexes:tr,getIndexByKeyPath:function(ir){const ar=er[sn(ir)];return ar&&ar[0]}},count:ir=>Qn.count(sr(ir)),query:ir=>Qn.query(sr(ir)),openCursor(ir){const{keyTail:ar,isVirtual:lr,keyLength:cr}=ir.query.index;return lr?Qn.openCursor(sr(ir)).then(dr=>dr&&function(hr){return Object.create(hr,{continue:{value:function(fr){fr!=null?hr.continue(Kn(fr,ir.reverse?Jn.MAX_KEY:Jn.MIN_KEY,ar)):ir.unique?hr.continue(hr.key.slice(0,cr).concat(ir.reverse?Jn.MIN_KEY:Jn.MAX_KEY,ar)):hr.continue()}},continuePrimaryKey:{value(fr,ur){hr.continuePrimaryKey(Kn(fr,Jn.MAX_KEY,ar),ur)}},primaryKey:{get:()=>hr.primaryKey},key:{get(){const fr=hr.key;return cr===1?fr[0]:fr.slice(0,cr)}},value:{get:()=>hr.value}})}(dr)):Qn.openCursor(ir)}}}}}};function Sn(Jn,Xn,Qn,Zn){return Qn=Qn||{},Zn=Zn||"",t(Jn).forEach(er=>{if(o(Xn,er)){var tr=Jn[er],nr=Xn[er];if(typeof tr=="object"&&typeof nr=="object"&&tr&&nr){const rr=C(tr);rr!==C(nr)?Qn[Zn+er]=Xn[er]:rr==="Object"?Sn(tr,nr,Qn,Zn+er+"."):tr!==nr&&(Qn[Zn+er]=Xn[er])}else tr!==nr&&(Qn[Zn+er]=Xn[er])}else Qn[Zn+er]=void 0}),t(Xn).forEach(er=>{o(Jn,er)||(Qn[Zn+er]=Xn[er])}),Qn}const An={stack:"dbcore",name:"HooksMiddleware",level:2,create:Jn=>({...Jn,table(Xn){const Qn=Jn.table(Xn),{primaryKey:Zn}=Qn.schema;return{...Qn,mutate(tr){const nr=Ke.trans,{deleting:rr,creating:sr,updating:or}=nr.table(Xn).hook;switch(tr.type){case"add":if(sr.fire===ee)break;return nr._promise("readwrite",()=>ir(tr),!0);case"put":if(sr.fire===ee&&or.fire===ee)break;return nr._promise("readwrite",()=>ir(tr),!0);case"delete":if(rr.fire===ee)break;return nr._promise("readwrite",()=>ir(tr),!0);case"deleteRange":if(rr.fire===ee)break;return nr._promise("readwrite",()=>function(lr){return ar(lr.trans,lr.range,1e4)}(tr),!0)}return Qn.mutate(tr);function ir(lr){const cr=Ke.trans,dr=lr.keys||function(hr,pr){return pr.type==="delete"?pr.keys:pr.keys||pr.values.map(hr.extractKey)}(Zn,lr);if(!dr)throw new Error("Keys missing");return(lr=lr.type==="add"||lr.type==="put"?{...lr,keys:dr}:{...lr}).type!=="delete"&&(lr.values=[...lr.values]),lr.keys&&(lr.keys=[...lr.keys]),function(hr,pr,fr){return pr.type==="add"?Promise.resolve([]):hr.getMany({trans:pr.trans,keys:fr,cache:"immutable"})}(Qn,lr,dr).then(hr=>{const pr=dr.map((fr,ur)=>{const br=hr[ur],gr={onerror:null,onsuccess:null};if(lr.type==="delete")rr.fire.call(gr,fr,br,cr);else if(lr.type==="add"||br===void 0){const mr=sr.fire.call(gr,fr,lr.values[ur],cr);fr==null&&mr!=null&&(fr=mr,lr.keys[ur]=fr,Zn.outbound||_(lr.values[ur],Zn.keyPath,fr))}else{const mr=Sn(br,lr.values[ur]),_r=or.fire.call(gr,mr,fr,br,cr);if(_r){const wr=lr.values[ur];Object.keys(_r).forEach(yr=>{o(wr,yr)?wr[yr]=_r[yr]:_(wr,yr,_r[yr])})}}return gr});return Qn.mutate(lr).then(({failures:fr,results:ur,numFailures:br,lastResult:gr})=>{for(let mr=0;mr<dr.length;++mr){const _r=ur?ur[mr]:dr[mr],wr=pr[mr];_r==null?wr.onerror&&wr.onerror(fr[mr]):wr.onsuccess&&wr.onsuccess(lr.type==="put"&&hr[mr]?lr.values[mr]:_r)}return{failures:fr,results:ur,numFailures:br,lastResult:gr}}).catch(fr=>(pr.forEach(ur=>ur.onerror&&ur.onerror(fr)),Promise.reject(fr)))})}function ar(lr,cr,dr){return Qn.query({trans:lr,values:!1,query:{index:Zn,range:cr},limit:dr}).then(({result:hr})=>ir({type:"delete",keys:hr,trans:lr}).then(pr=>pr.numFailures>0?Promise.reject(pr.failures[0]):hr.length<dr?{failures:[],numFailures:0,lastResult:void 0}:ar(lr,{...cr,lower:hr[hr.length-1],lowerOpen:!0},dr)))}}}}})};function Cn(Jn,Xn,Qn){try{if(!Xn||Xn.keys.length<Jn.length)return null;const Zn=[];for(let er=0,tr=0;er<Xn.keys.length&&tr<Jn.length;++er)It(Xn.keys[er],Jn[tr])===0&&(Zn.push(Qn?O(Xn.values[er]):Xn.values[er]),++tr);return Zn.length===Jn.length?Zn:null}catch{return null}}const jn={stack:"dbcore",level:-1,create:Jn=>({table:Xn=>{const Qn=Jn.table(Xn);return{...Qn,getMany:Zn=>{if(!Zn.cache)return Qn.getMany(Zn);const er=Cn(Zn.keys,Zn.trans._cache,Zn.cache==="clone");return er?Ce.resolve(er):Qn.getMany(Zn).then(tr=>(Zn.trans._cache={keys:Zn.keys,values:Zn.cache==="clone"?O(tr):tr},tr))},mutate:Zn=>(Zn.type!=="add"&&(Zn.trans._cache=null),Qn.mutate(Zn))}}})};function Dn(Jn){return!("from"in Jn)}const In=function(Jn,Xn){if(!this){const Qn=new In;return Jn&&"d"in Jn&&r(Qn,Jn),Qn}r(this,arguments.length?{d:1,from:Jn,to:arguments.length>1?Xn:Jn}:{d:0})};function Bn(Jn,Xn,Qn){const Zn=It(Xn,Qn);if(isNaN(Zn))return;if(Zn>0)throw RangeError();if(Dn(Jn))return r(Jn,{from:Xn,to:Qn,d:1});const er=Jn.l,tr=Jn.r;if(It(Qn,Jn.from)<0)return er?Bn(er,Xn,Qn):Jn.l={from:Xn,to:Qn,d:1,l:null,r:null},Mn(Jn);if(It(Xn,Jn.to)>0)return tr?Bn(tr,Xn,Qn):Jn.r={from:Xn,to:Qn,d:1,l:null,r:null},Mn(Jn);It(Xn,Jn.from)<0&&(Jn.from=Xn,Jn.l=null,Jn.d=tr?tr.d+1:1),It(Qn,Jn.to)>0&&(Jn.to=Qn,Jn.r=null,Jn.d=Jn.l?Jn.l.d+1:1);const nr=!Jn.r;er&&!Jn.l&&Tn(Jn,er),tr&&nr&&Tn(Jn,tr)}function Tn(Jn,Xn){Dn(Xn)||function Qn(Zn,{from:er,to:tr,l:nr,r:rr}){Bn(Zn,er,tr),nr&&Qn(Zn,nr),rr&&Qn(Zn,rr)}(Jn,Xn)}function Rn(Jn,Xn){const Qn=Fn(Xn);let Zn=Qn.next();if(Zn.done)return!1;let er=Zn.value;const tr=Fn(Jn);let nr=tr.next(er.from),rr=nr.value;for(;!Zn.done&&!nr.done;){if(It(rr.from,er.to)<=0&&It(rr.to,er.from)>=0)return!0;It(er.from,rr.from)<0?er=(Zn=Qn.next(rr.from)).value:rr=(nr=tr.next(er.from)).value}return!1}function Fn(Jn){let Xn=Dn(Jn)?null:{s:0,n:Jn};return{next(Qn){const Zn=arguments.length>0;for(;Xn;)switch(Xn.s){case 0:if(Xn.s=1,Zn)for(;Xn.n.l&&It(Qn,Xn.n.from)<0;)Xn={up:Xn,n:Xn.n.l,s:1};else for(;Xn.n.l;)Xn={up:Xn,n:Xn.n.l,s:1};case 1:if(Xn.s=2,!Zn||It(Qn,Xn.n.to)<=0)return{value:Xn.n,done:!1};case 2:if(Xn.n.r){Xn.s=3,Xn={up:Xn,n:Xn.n.r,s:0};continue}case 3:Xn=Xn.up}return{done:!0}}}}function Mn(Jn){var Xn,Qn;const Zn=(((Xn=Jn.r)===null||Xn===void 0?void 0:Xn.d)||0)-(((Qn=Jn.l)===null||Qn===void 0?void 0:Qn.d)||0),er=Zn>1?"r":Zn<-1?"l":"";if(er){const tr=er==="r"?"l":"r",nr={...Jn},rr=Jn[er];Jn.from=rr.from,Jn.to=rr.to,Jn[er]=rr[er],nr[er]=rr[tr],Jn[tr]=nr,nr.d=Nn(nr)}Jn.d=Nn(Jn)}function Nn({r:Jn,l:Xn}){return(Jn?Xn?Math.max(Jn.d,Xn.d):Jn.d:Xn?Xn.d:0)+1}a(In.prototype,{add(Jn){return Tn(this,Jn),this},addKey(Jn){return Bn(this,Jn,Jn),this},addKeys(Jn){return Jn.forEach(Xn=>Bn(this,Xn,Xn)),this},[j](){return Fn(this)}});const qn={stack:"dbcore",level:0,create:Jn=>{const Xn=Jn.schema.name,Qn=new In(Jn.MIN_KEY,Jn.MAX_KEY);return{...Jn,table:Zn=>{const er=Jn.table(Zn),{schema:tr}=er,{primaryKey:nr}=tr,{extractKey:rr,outbound:sr}=nr,or={...er,mutate:lr=>{const cr=lr.trans,dr=cr.mutatedParts||(cr.mutatedParts={}),hr=_r=>{const wr=`idb://${Xn}/${Zn}/${_r}`;return dr[wr]||(dr[wr]=new In)},pr=hr(""),fr=hr(":dels"),{type:ur}=lr;let[br,gr]=lr.type==="deleteRange"?[lr.range]:lr.type==="delete"?[lr.keys]:lr.values.length<50?[[],lr.values]:[];const mr=lr.trans._cache;return er.mutate(lr).then(_r=>{if(n(br)){ur!=="delete"&&(br=_r.results),pr.addKeys(br);const wr=Cn(br,mr);wr||ur==="add"||fr.addKeys(br),(wr||gr)&&function(yr,Cr,Pr,Tr){function Rr(Or){const $r=yr(Or.name||"");function Gr(Wr){return Wr!=null?Or.extractKey(Wr):null}const Hr=Wr=>Or.multiEntry&&n(Wr)?Wr.forEach(Yr=>$r.addKey(Yr)):$r.addKey(Wr);(Pr||Tr).forEach((Wr,Yr)=>{const us=Pr&&Gr(Pr[Yr]),gs=Tr&&Gr(Tr[Yr]);It(us,gs)!==0&&(us!=null&&Hr(us),gs!=null&&Hr(gs))})}Cr.indexes.forEach(Rr)}(hr,tr,wr,gr)}else if(br){const wr={from:br.lower,to:br.upper};fr.add(wr),pr.add(wr)}else pr.add(Qn),fr.add(Qn),tr.indexes.forEach(wr=>hr(wr.name).add(Qn));return _r})}},ir=({query:{index:lr,range:cr}})=>{var dr,hr;return[lr,new In((dr=cr.lower)!==null&&dr!==void 0?dr:Jn.MIN_KEY,(hr=cr.upper)!==null&&hr!==void 0?hr:Jn.MAX_KEY)]},ar={get:lr=>[nr,new In(lr.key)],getMany:lr=>[nr,new In().addKeys(lr.keys)],count:ir,query:ir,openCursor:ir};return t(ar).forEach(lr=>{or[lr]=function(cr){const{subscr:dr}=Ke;if(dr){const hr=gr=>{const mr=`idb://${Xn}/${Zn}/${gr}`;return dr[mr]||(dr[mr]=new In)},pr=hr(""),fr=hr(":dels"),[ur,br]=ar[lr](cr);if(hr(ur.name||"").add(br),!ur.isPrimaryKey){if(lr!=="count"){const gr=lr==="query"&&sr&&cr.values&&er.query({...cr,values:!1});return er[lr].apply(this,arguments).then(mr=>{if(lr==="query"){if(sr&&cr.values)return gr.then(({result:wr})=>(pr.addKeys(wr),mr));const _r=cr.values?mr.result.map(rr):mr.result;cr.values?pr.addKeys(_r):fr.addKeys(_r)}else if(lr==="openCursor"){const _r=mr,wr=cr.values;return _r&&Object.create(_r,{key:{get:()=>(fr.addKey(_r.primaryKey),_r.key)},primaryKey:{get(){const yr=_r.primaryKey;return fr.addKey(yr),yr}},value:{get:()=>(wr&&pr.addKey(_r.primaryKey),_r.value)}})}return mr})}fr.add(Qn)}}return er[lr].apply(this,arguments)}}),or}}}};class $n{constructor(Xn,Qn){this._middlewares={},this.verno=0;const Zn=$n.dependencies;this._options=Qn={addons:$n.addons,autoOpen:!0,indexedDB:Zn.indexedDB,IDBKeyRange:Zn.IDBKeyRange,...Qn},this._deps={indexedDB:Qn.indexedDB,IDBKeyRange:Qn.IDBKeyRange};const{addons:er}=Qn;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const tr={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var nr;tr.dbReadyPromise=new Ce(rr=>{tr.dbReadyResolve=rr}),tr.openCanceller=new Ce((rr,sr)=>{tr.cancelOpen=sr}),this._state=tr,this.name=Xn,this.on=Et(this,"populate","blocked","versionchange","close",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,rr=>(sr,or)=>{$n.vip(()=>{const ir=this._state;if(ir.openComplete)ir.dbOpenError||Ce.resolve().then(sr),or&&rr(sr);else if(ir.onReadyBeingFired)ir.onReadyBeingFired.push(sr),or&&rr(sr);else{rr(sr);const ar=this;or||rr(function lr(){ar.on.ready.unsubscribe(sr),ar.on.ready.unsubscribe(lr)})}})}),this.Collection=(nr=this,Pt(Rt.prototype,function(rr,sr){this.db=nr;let or=wt,ir=null;if(sr)try{or=sr()}catch(dr){ir=dr}const ar=rr._ctx,lr=ar.table,cr=lr.hook.reading.fire;this._ctx={table:lr,index:ar.index,isPrimKey:!ar.index||lr.schema.primKey.keyPath&&ar.index===lr.schema.primKey.name,range:or,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ir,or:ar.or,valueMapper:cr!==te?cr:null}})),this.Table=function(rr){return Pt(kt.prototype,function(sr,or,ir){this.db=rr,this._tx=ir,this.name=sr,this.schema=or,this.hook=rr._allTables[sr]?rr._allTables[sr].hook:Et(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})})}(this),this.Transaction=function(rr){return Pt(Qt.prototype,function(sr,or,ir,ar,lr){this.db=rr,this.mode=sr,this.storeNames=or,this.schema=ir,this.chromeTransactionDurability=ar,this.idbtrans=null,this.on=Et(this,"complete","error","abort"),this.parent=lr||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce((cr,dr)=>{this._resolve=cr,this._reject=dr}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},cr=>{var dr=this.active;return this.active=!1,this.on.error.fire(cr),this.parent?this.parent._reject(cr):dr&&this.idbtrans&&this.idbtrans.abort(),ht(cr)})})}(this),this.Version=function(rr){return Pt(vn.prototype,function(sr){this.db=rr,this._cfg={version:sr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(rr){return Pt(Yt.prototype,function(sr,or,ir){this.db=rr,this._ctx={table:sr,index:or===":id"?null:or,or:ir};const ar=rr._deps.indexedDB;if(!ar)throw new X.MissingAPI;this._cmp=this._ascending=ar.cmp.bind(ar),this._descending=(lr,cr)=>ar.cmp(cr,lr),this._max=(lr,cr)=>ar.cmp(lr,cr)>0?lr:cr,this._min=(lr,cr)=>ar.cmp(lr,cr)<0?lr:cr,this._IDBKeyRange=rr._deps.IDBKeyRange})}(this),this.on("versionchange",rr=>{rr.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",rr=>{!rr.newVersion||rr.newVersion<rr.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${rr.oldVersion/10}`)}),this._maxKey=en(Qn.IDBKeyRange),this._createTransaction=(rr,sr,or,ir)=>new this.Transaction(rr,sr,or,this._options.chromeTransactionDurability,ir),this._fireOnBlocked=rr=>{this.on("blocked").fire(rr),yt.filter(sr=>sr.name===this.name&&sr!==this&&!sr._state.vcFired).map(sr=>sr.on("versionchange").fire(rr))},this.use(On),this.use(An),this.use(qn),this.use(jn),this.vip=Object.create(this,{_vip:{value:!0}}),er.forEach(rr=>rr(this))}version(Xn){if(isNaN(Xn)||Xn<.1)throw new X.Type("Given version is not a positive number");if(Xn=Math.round(10*Xn)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,Xn);const Qn=this._versions;var Zn=Qn.filter(er=>er._cfg.version===Xn)[0];return Zn||(Zn=new this.Version(Xn),Qn.push(Zn),Qn.sort(cn),Zn.stores({}),this._state.autoSchema=!1,Zn)}_whenReady(Xn){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?Xn():new Ce((Qn,Zn)=>{if(this._state.openComplete)return Zn(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void Zn(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(Qn,Zn)}).then(Xn)}use({stack:Xn,create:Qn,level:Zn,name:er}){er&&this.unuse({stack:Xn,name:er});const tr=this._middlewares[Xn]||(this._middlewares[Xn]=[]);return tr.push({stack:Xn,create:Qn,level:Zn??10,name:er}),tr.sort((nr,rr)=>nr.level-rr.level),this}unuse({stack:Xn,name:Qn,create:Zn}){return Xn&&this._middlewares[Xn]&&(this._middlewares[Xn]=this._middlewares[Xn].filter(er=>Zn?er.create!==Zn:!!Qn&&er.name!==Qn)),this}open(){return xn(this)}_close(){const Xn=this._state,Qn=yt.indexOf(this);if(Qn>=0&&yt.splice(Qn,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}Xn.dbReadyPromise=new Ce(Zn=>{Xn.dbReadyResolve=Zn}),Xn.openCanceller=new Ce((Zn,er)=>{Xn.cancelOpen=er})}close(){this._close();const Xn=this._state;this._options.autoOpen=!1,Xn.dbOpenError=new X.DatabaseClosed,Xn.isBeingOpened&&Xn.cancelOpen(Xn.dbOpenError)}delete(){const Xn=arguments.length>0,Qn=this._state;return new Ce((Zn,er)=>{const tr=()=>{this.close();var nr=this._deps.indexedDB.deleteDatabase(this.name);nr.onsuccess=We(()=>{(function({indexedDB:rr,IDBKeyRange:sr},or){!bn(rr)&&or!=="__dbnames"&&gn(rr,sr).delete(or).catch(ee)})(this._deps,this.name),Zn()}),nr.onerror=zt(er),nr.onblocked=this._fireOnBlocked};if(Xn)throw new X.InvalidArgument("Arguments not allowed in db.delete()");Qn.isBeingOpened?Qn.dbReadyPromise.then(tr):tr()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const Xn=this._state.dbOpenError;return Xn&&Xn.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map(Xn=>this._allTables[Xn])}transaction(){const Xn=En.apply(this,arguments);return this._transaction.apply(this,Xn)}_transaction(Xn,Qn,Zn){let er=Ke.trans;er&&er.db===this&&Xn.indexOf("!")===-1||(er=null);const tr=Xn.indexOf("?")!==-1;let nr,rr;Xn=Xn.replace("!","").replace("?","");try{if(rr=Qn.map(or=>{var ir=or instanceof this.Table?or.name:or;if(typeof ir!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ir}),Xn=="r"||Xn==="readonly")nr="readonly";else{if(Xn!="rw"&&Xn!="readwrite")throw new X.InvalidArgument("Invalid transaction mode: "+Xn);nr="readwrite"}if(er){if(er.mode==="readonly"&&nr==="readwrite"){if(!tr)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");er=null}er&&rr.forEach(or=>{if(er&&er.storeNames.indexOf(or)===-1){if(!tr)throw new X.SubTransaction("Table "+or+" not included in parent transaction.");er=null}}),tr&&er&&!er.active&&(er=null)}}catch(or){return er?er._promise(null,(ir,ar)=>{ar(or)}):ht(or)}const sr=Pn.bind(null,this,nr,rr,er,Zn);return er?er._promise(nr,sr,"lock"):Ke.trans?ot(Ke.transless,()=>this._whenReady(sr)):this._whenReady(sr)}table(Xn){if(!o(this._allTables,Xn))throw new X.InvalidTable(`Table ${Xn} does not exist`);return this._allTables[Xn]}}const Un=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Ln{constructor(Xn){this._subscribe=Xn}subscribe(Xn,Qn,Zn){return this._subscribe(Xn&&typeof Xn!="function"?Xn:{next:Xn,error:Qn,complete:Zn})}[Un](){return this}}function Vn(Jn,Xn){return t(Xn).forEach(Qn=>{Tn(Jn[Qn]||(Jn[Qn]=new In),Xn[Qn])}),Jn}function Wn(Jn){return new Ln(Xn=>{const Qn=T(Jn);let Zn=!1,er={},tr={};const nr={get closed(){return Zn},unsubscribe:()=>{Zn=!0,Ht.storagemutated.unsubscribe(ir)}};Xn.start&&Xn.start(nr);let rr=!1,sr=!1;function or(){return t(tr).some(lr=>er[lr]&&Rn(er[lr],tr[lr]))}const ir=lr=>{Vn(er,lr),or()&&ar()},ar=()=>{if(rr||Zn)return;er={};const lr={},cr=function(dr){Qn&&Ze();const hr=()=>Je(Jn,{subscr:dr,trans:null}),pr=Ke.trans?ot(Ke.transless,hr):hr();return Qn&&pr.then(et,et),pr}(lr);sr||(Ht("storagemutated",ir),sr=!0),rr=!0,Promise.resolve(cr).then(dr=>{rr=!1,Zn||(or()?ar():(er={},tr=lr,Xn.next&&Xn.next(dr)))},dr=>{rr=!1,Xn.error&&Xn.error(dr),nr.unsubscribe()})};return ar(),nr})}let Yn;try{Yn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch{Yn={indexedDB:null,IDBKeyRange:null}}const zn=$n;function Gn(Jn){let Xn=Hn;try{Hn=!0,Ht.storagemutated.fire(Jn)}finally{Hn=Xn}}a(zn,{...Z,delete:Jn=>new zn(Jn,{addons:[]}).delete(),exists:Jn=>new zn(Jn,{addons:[]}).open().then(Xn=>(Xn.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(Jn){try{return function({indexedDB:Xn,IDBKeyRange:Qn}){return bn(Xn)?Promise.resolve(Xn.databases()).then(Zn=>Zn.map(er=>er.name).filter(er=>er!=="__dbnames")):gn(Xn,Qn).toCollection().primaryKeys()}(zn.dependencies).then(Jn)}catch{return ht(new X.MissingAPI)}},defineClass:()=>function(Jn){r(this,Jn)},ignoreTransaction:Jn=>Ke.trans?ot(Ke.transless,Jn):Jn(),vip:_n,async:function(Jn){return function(){try{var Xn=kn(Jn.apply(this,arguments));return Xn&&typeof Xn.then=="function"?Xn:Ce.resolve(Xn)}catch(Qn){return ht(Qn)}}},spawn:function(Jn,Xn,Qn){try{var Zn=kn(Jn.apply(Qn,Xn||[]));return Zn&&typeof Zn.then=="function"?Zn:Ce.resolve(Zn)}catch(er){return ht(er)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(Jn,Xn){const Qn=Ce.resolve(typeof Jn=="function"?zn.ignoreTransaction(Jn):Jn).timeout(Xn||6e4);return Ke.trans?Ke.trans.waitFor(Qn):Qn},Promise:Ce,debug:{get:()=>R,set:Jn=>{F(Jn,Jn==="dexie"?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Et,on:Ht,liveQuery:Wn,extendObservabilitySet:Vn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(Jn,Xn){typeof Xn=="string"?_(Jn,Xn,void 0):"length"in Xn&&[].map.call(Xn,function(Qn){_(Jn,Qn,void 0)})},shallowClone:w,deepClone:O,getObjectDiff:Sn,cmp:It,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:Yn,semVer:"3.2.3",version:"3.2.3".split(".").map(Jn=>parseInt(Jn)).reduce((Jn,Xn,Qn)=>Jn+Xn/Math.pow(10,2*Qn))}),zn.maxKey=en(zn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ht("storagemutated",Jn=>{if(!Hn){let Xn;mt?(Xn=document.createEvent("CustomEvent"),Xn.initCustomEvent("x-storagemutated-1",!0,!0,Jn)):Xn=new CustomEvent("x-storagemutated-1",{detail:Jn}),Hn=!0,dispatchEvent(Xn),Hn=!1}}),addEventListener("x-storagemutated-1",({detail:Jn})=>{Hn||Gn(Jn)}));let Hn=!1;if(typeof BroadcastChannel<"u"){const Jn=new BroadcastChannel("x-storagemutated-1");typeof Jn.unref=="function"&&Jn.unref(),Ht("storagemutated",Xn=>{Hn||Jn.postMessage(Xn)}),Jn.onmessage=Xn=>{Xn.data&&Gn(Xn.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ht("storagemutated",Xn=>{try{Hn||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:Xn})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(Qn=>Qn.postMessage({type:"x-storagemutated-1",changedParts:Xn})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",Xn=>{if(Xn.key==="x-storagemutated-1"){const Qn=JSON.parse(Xn.newValue);Qn&&Gn(Qn.changedParts)}});const Jn=self.document&&navigator.serviceWorker;Jn&&Jn.addEventListener("message",function({data:Xn}){Xn&&Xn.type==="x-storagemutated-1"&&Gn(Xn.changedParts)})}Ce.rejectionMapper=function(Jn,Xn){if(!Jn||Jn instanceof W||Jn instanceof TypeError||Jn instanceof SyntaxError||!Jn.name||!J[Jn.name])return Jn;var Qn=new J[Jn.name](Xn||Jn.message,Jn);return"stack"in Jn&&l(Qn,"stack",{get:function(){return this.inner.stack}}),Qn},F(R,bt);class MySubClassedDexie extends $n{constructor(){super("nr-editor");Sr(this,"catalogues");Sr(this,"systems");Sr(this,"systemrows");this.version(6).stores({catalogues:"id, content.catalogue.id, content.catalogue.gameSystemId",systems:"id",systemrows:"id"})}}const db=new MySubClassedDexie,vue_init_9ZUD1XgGXo=defineNuxtPlugin(Jn=>{Jn.vueApp.use(vClickOutside),Jn.vueApp.use(at$1),Jn.$pinia.use(({store:Zn})=>{Zn.$router=Jn.$router});const Xn=globalThis.console.log;globalThis.$toRaw=toRaw,globalThis.console.log=(...Zn)=>Xn(...Zn.map(er=>toRaw(er))),globalThis.$markRaw=markRaw,globalThis.$helpers=helpers,globalThis.$node=node,globalThis.notify=A$1,globalThis.isEditor=!0,globalThis.$nextTick=nextTick,globalThis.cataloguesdexie=db,typeof globalThis.electron>"u"&&(globalThis.electron=null),useSettingsStore().init(),Jn.vueApp.config.globalProperties.$optionStore=null}),_plugins=[plugin$1,revive_payload_client_4sVQNw7RlN,components_plugin_KR1HBZs4kY,unhead_KgADcZ0jPj,plugin,prefetch_client_5tzzN0oIVL,chunk_reload_client_UciE0i6zes,payload_client_yVLowv6hDl,plugin_1UohGbtF8v,vue_init_9ZUD1XgGXo],usePromptStore=defineStore("prompts",{state:()=>({}),persist:{storage:globalThis.localStorage},actions:{get(Jn){return this.$state[Jn]},set(Jn,Xn){this.$state[Jn]=Xn}}}),Settings_vue_vue_type_style_index_0_lang="",_export_sfc=(Jn,Xn)=>{const Qn=Jn.__vccOpts||Jn;for(const[Zn,er]of Xn)Qn[Zn]=er;return Qn},_sfc_main$4={setup(){return{settings:useSettingsStore(),prompt:usePromptStore()}},computed:{noRevisionPopup:{get(){return this.prompt.get("revision")},set(Jn){this.prompt.set("revision",Jn)}}}},_hoisted_1$4=createBaseVNode("label",{for:"theme"},"Theme: ",-1),_hoisted_2$4=createBaseVNode("option",{value:"light"},"Light",-1),_hoisted_3$4=createBaseVNode("option",{value:"dark"},"Dark",-1),_hoisted_4$3=[_hoisted_2$4,_hoisted_3$4],_hoisted_5$2={class:"row"},_hoisted_6$2=createBaseVNode("label",{for:"global-duplicate-id-error"},"Check for duplicate ids across all catalogues (requires reload)",-1),_hoisted_7$2={class:"row"},_hoisted_8$1=createBaseVNode("label",{for:"github-auto-increment"},"Auto increment revision when saving (requires github integration & internet)",-1),_hoisted_9$1={class:"row"},_hoisted_10$1=createBaseVNode("label",{for:"revision-popupt"},"Don't show popups asking to increment revision",-1),_hoisted_11$1={class:"row"},_hoisted_12$1=createBaseVNode("label",{for:"categories-ui-v2"},"Use new UI for categories",-1),_hoisted_13$1={class:"row"},_hoisted_14$1=createBaseVNode("label",{for:"sticky-scroll"},"Sticky Scroll (show parents even when out of view)",-1),_hoisted_15$1={key:0,class:"row"},_hoisted_16$1=createBaseVNode("label",{for:"auto-format"},"Automatically format characteristics on paste",-1),_hoisted_17={key:1,class:"row"},_hoisted_18=createBaseVNode("label",{for:"auto-rename"},"Automatically rename parent entry when assigning info links",-1),_hoisted_19={class:"mt-10px"},_hoisted_20=createBaseVNode("legend",null,"Display",-1),_hoisted_21={class:"row"},_hoisted_22=createBaseVNode("label",{for:""},"Sort Index",-1),_hoisted_23={class:"row"},_hoisted_24=createBaseVNode("label",{for:"refs"},"Refs",-1),_hoisted_25={class:"row"},_hoisted_26=createBaseVNode("label",{for:""},"Costs",-1),_hoisted_27={class:"row"},_hoisted_28=createBaseVNode("label",{for:""},"Primary Category",-1);function _sfc_render$3(Jn,Xn,Qn,Zn,er,tr){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[_hoisted_1$4,withDirectives(createBaseVNode("select",{id:"theme","onUpdate:modelValue":Xn[0]||(Xn[0]=nr=>Zn.settings.theme=nr)},_hoisted_4$3,512),[[vModelSelect,Zn.settings.theme]])]),createBaseVNode("div",_hoisted_5$2,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"global-duplicate-id-error","onUpdate:modelValue":Xn[1]||(Xn[1]=nr=>Zn.settings.globalDuplicateIdError=nr)},null,512),[[vModelCheckbox,Zn.settings.globalDuplicateIdError]]),_hoisted_6$2]),createBaseVNode("div",_hoisted_7$2,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"github-auto-increment","onUpdate:modelValue":Xn[2]||(Xn[2]=nr=>Zn.settings.githubAutoIncrement=nr)},null,512),[[vModelCheckbox,Zn.settings.githubAutoIncrement]]),_hoisted_8$1]),createBaseVNode("div",_hoisted_9$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"revision-popup","onUpdate:modelValue":Xn[3]||(Xn[3]=nr=>tr.noRevisionPopup=nr)},null,512),[[vModelCheckbox,tr.noRevisionPopup]]),_hoisted_10$1]),createBaseVNode("div",_hoisted_11$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"categories-ui-v2","onUpdate:modelValue":Xn[4]||(Xn[4]=nr=>Zn.settings.useNewCategoriesUI=nr)},null,512),[[vModelCheckbox,Zn.settings.useNewCategoriesUI]]),_hoisted_12$1]),createBaseVNode("div",_hoisted_13$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"sticky-scroll","onUpdate:modelValue":Xn[5]||(Xn[5]=nr=>Zn.settings.stickyScroll=nr)},null,512),[[vModelCheckbox,Zn.settings.stickyScroll]]),_hoisted_14$1]),Zn.settings.autoFormatCharacteristics?(openBlock(),createElementBlock("div",_hoisted_15$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"auto-format","onUpdate:modelValue":Xn[6]||(Xn[6]=nr=>Zn.settings.autoFormatCharacteristics=nr)},null,512),[[vModelCheckbox,Zn.settings.autoFormatCharacteristics]]),_hoisted_16$1])):createCommentVNode("",!0),Zn.settings.autoRenameInfoLinkParent?(openBlock(),createElementBlock("div",_hoisted_17,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"auto-rename","onUpdate:modelValue":Xn[7]||(Xn[7]=nr=>Zn.settings.autoRenameInfoLinkParent=nr)},null,512),[[vModelCheckbox,Zn.settings.autoRenameInfoLinkParent]]),_hoisted_18])):createCommentVNode("",!0),createBaseVNode("fieldset",_hoisted_19,[_hoisted_20,createBaseVNode("div",_hoisted_21,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"sort","onUpdate:modelValue":Xn[8]||(Xn[8]=nr=>Zn.settings.display.sortIndex=nr)},null,512),[[vModelCheckbox,Zn.settings.display.sortIndex]]),_hoisted_22]),createBaseVNode("div",_hoisted_23,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"refs","onUpdate:modelValue":Xn[9]||(Xn[9]=nr=>Zn.settings.display.references=nr)},null,512),[[vModelCheckbox,Zn.settings.display.references]]),_hoisted_24]),createBaseVNode("div",_hoisted_25,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"costs","onUpdate:modelValue":Xn[10]||(Xn[10]=nr=>Zn.settings.display.costs=nr)},null,512),[[vModelCheckbox,Zn.settings.display.costs]]),_hoisted_26]),createBaseVNode("div",_hoisted_27,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"costs","onUpdate:modelValue":Xn[11]||(Xn[11]=nr=>Zn.settings.display.primaryCategory=nr)},null,512),[[vModelCheckbox,Zn.settings.display.primaryCategory]]),_hoisted_28])])])}const __nuxt_component_1$1=_export_sfc(_sfc_main$4,[["render",_sfc_render$3]]),__default__={name:"PopupDialog",emits:["button","close","update:modelValue","cancel"],methods:{stop(Jn){Jn.stopImmediatePropagation()},click_button(){const Jn={close:!0};this.$emit("button",Jn),Jn.close instanceof Promise?Jn.close.then(Xn=>{Xn&&this.close()}):this.buttonclose&&Jn.close&&this.close()},click_buttons(Jn){Jn.event&&this.$emit(Jn.event,Jn),Jn.function&&Jn.function(),Jn.close&&this.close()},veil_close_popup(){this.nocloseonclickoutside||this.close()},button_close_popup(){this.close()},close(){this.mobile?history.back():this.doClose()},doClose(){var Jn;this.content=!1,this.$emit("update:modelValue",this.content),this.$emit("cancel"),this.$emit("close"),(Jn=globalThis.notifyPopupStatus)==null||Jn.call(globalThis,!1)},popstate(Jn){this.mobile&&Jn.state.popupDepth&&Jn.state.popupDepth>=this.popupDepth||this.doClose()},esc_close_popup(Jn){var Xn;Jn.stopPropagation(),Jn.stopImmediatePropagation(),((Xn=Jn.key)==null?void 0:Xn.toLowerCase())==="escape"&&this.close()},before_print(Jn){let Qn=this.$refs.content.cloneNode(!0);document.body.appendChild(Qn),Qn.classList.add("printable");const Zn=()=>{document.body.removeChild(Qn)};addEventListener("afterprint",Zn,{once:!0})},isMobile(){var Jn=window.matchMedia||window.msMatchMedia;if(Jn){var Xn=Jn("(pointer:coarse)");return Xn.matches}return!1}},watch:{content:{handler(Jn){var Xn;(Xn=globalThis.notifyPopupStatus)==null||Xn.call(globalThis,!!Jn)},immediate:!1},modelValue(Jn){this.content=Jn}},mounted(){var Jn;addEventListener("keydown",this.esc_close_popup),this.print&&addEventListener("beforeprint",this.before_print),this.mobile&&history.pushState({url:window.location.href,popupId:this.popupUid,popupDepth:this.popupDepth},""),(Jn=globalThis.notifyPopupStatus)==null||Jn.call(globalThis,!0),addEventListener("popstate",this.popstate),addEventListener("beforepush",this.doClose)},unmounted(){var Jn;removeEventListener("keydown",this.esc_close_popup),this.print&&removeEventListener("beforeprint",this.before_print),removeEventListener("popstate",this.popstate),removeEventListener("beforepush",this.doClose),(Jn=globalThis.notifyPopupStatus)==null||Jn.call(globalThis,!1)},props:{modelValue:{default:!0,type:Boolean},text:{type:String,default:"Close"},noclose:{default:!1,type:Boolean},x:{default:!1,type:Boolean},button:{default:"",type:String},disabled:{default:!1,type:Boolean},slotstyle:{default:""},print:{type:Boolean,default:!1},buttonclose:{type:Boolean,default:!0},buttons:{type:Array,default:[]},overflow:{type:Boolean,default:!1},width:{type:String,default:"300px"},maxwidth:{type:String,default:"1200px"},nocloseonclickoutside:{type:Boolean,default:!1},notitlebar:{type:Boolean,default:!1},xtop:{type:String,default:"5px"},xright:{type:String,default:"6px"}},data(){var Xn;const Jn=getRandomKey();return{content:this.modelValue,mobile:this.isMobile(),popupUid:Jn,popupDepth:(((Xn=document.getElementById("popups"))==null?void 0:Xn.childElementCount)||0)+1}}},__injectCSSVars__=()=>{useCssVars(Jn=>({"3c3ff72f":Jn.maxwidth,d7f7aece:Jn.width,bca3a6ac:Jn.xtop,"2292a79e":Jn.xright}))},__setup__=__default__.setup;__default__.setup=__setup__?(Jn,Xn)=>(__injectCSSVars__(),__setup__(Jn,Xn)):__injectCSSVars__;const _imports_0$2=""+globalThis.__publicAssetsURL("assets/icons/blackcross.png"),PopupDialog_vue_vue_type_style_index_0_scoped_235dcd39_lang="",_withScopeId$1=Jn=>(pushScopeId("data-v-235dcd39"),Jn=Jn(),popScopeId(),Jn),_hoisted_1$3={class:"content",ref:"content"},_hoisted_2$3={key:0,class:"headTitle"},_hoisted_3$3=_withScopeId$1(()=>createBaseVNode("img",{style:{display:"block"},src:_imports_0$2},null,-1)),_hoisted_4$2=[_hoisted_3$3],_hoisted_5$1={class:"close-wrap"},_hoisted_6$1=["disabled","onClick"],_hoisted_7$1=["disabled"];function _sfc_render$2(Jn,Xn,Qn,Zn,er,tr){return er.content?(openBlock(),createBlock(Teleport,{key:0,to:"#popups",ref:"popup"},[createBaseVNode("div",{class:normalizeClass(["container",{allowoverflow:Qn.overflow}]),onClick:Xn[4]||(Xn[4]=(...nr)=>tr.stop&&tr.stop(...nr))},[createBaseVNode("div",{class:"veil",onClick:Xn[0]||(Xn[0]=(...nr)=>tr.veil_close_popup&&tr.veil_close_popup(...nr))}),createBaseVNode("div",{class:normalizeClass(["box",{print:Qn.print}]),style:normalizeStyle(Qn.slotstyle)},[createBaseVNode("div",_hoisted_1$3,[Qn.x?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass({head:!Qn.notitlebar})},[Qn.notitlebar?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_2$3,[renderSlot(Jn.$slots,"header",{},void 0,!0)])),Qn.x?(openBlock(),createElementBlock("div",{key:1,onClick:Xn[1]||(Xn[1]=(...nr)=>tr.close&&tr.close(...nr)),class:"xCross imgBt"},_hoisted_4$2)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),renderSlot(Jn.$slots,"default",{},void 0,!0)],512),createBaseVNode("div",_hoisted_5$1,[renderSlot(Jn.$slots,"boutons",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Qn.buttons,nr=>(openBlock(),createElementBlock("button",{disabled:nr.disabled===void 0?!1:nr.disabled,class:"bouton close",onClick:rr=>tr.click_buttons(nr)},toDisplayString(nr.label),9,_hoisted_6$1))),256)),Qn.button?(openBlock(),createElementBlock("button",{key:0,disabled:Qn.disabled,class:"bouton close",onClick:Xn[2]||(Xn[2]=(...nr)=>tr.click_button&&tr.click_button(...nr))},toDisplayString(Qn.button),9,_hoisted_7$1)):createCommentVNode("",!0),Qn.noclose?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,class:"bouton close",onClick:Xn[3]||(Xn[3]=(...nr)=>tr.button_close_popup&&tr.button_close_popup(...nr))},toDisplayString(Qn.text),1))])],6)],2)],512)):createCommentVNode("",!0)}const __nuxt_component_0$1=_export_sfc(__default__,[["render",_sfc_render$2],["__scopeId","data-v-235dcd39"]]),_hoisted_1$2=["innerHTML"],_hoisted_2$2={key:0},_hoisted_3$2=createBaseVNode("br",null,null,-1),_hoisted_4$1=createBaseVNode("label",null,"Dont show this again",-1),_sfc_main$3=defineComponent({__name:"Prompt",setup(Jn){const Xn=usePromptStore(),Qn=ref(!1),Zn=ref(""),er=ref("Yes"),tr=ref("Cancel"),nr=ref(null),rr=ref(!1);let sr=null;globalThis.customPrompt=ir=>{let ar=!0;if(sr!==null)throw new Error("Cannot create a Prompt when one is already active");const lr=new Promise(cr=>{if(typeof ir=="string")Zn.value=ir;else if(isObject(ir)){if(ir.id&&Xn.get(ir.id)){ar=!1,cr(!1);return}Zn.value=ir.html,tr.value=ir.cancel??"Cancel",er.value=ir.accept??"Yes",rr.value=!1,nr.value=ir.id??null}sr=cr});return Qn.value=ar,lr};function or(ir){sr&&(sr(ir),sr=null),rr.value&&nr.value&&Xn.set(nr.value,rr.value),Qn.value=!1}return(ir,ar)=>{const lr=__nuxt_component_0$1;return unref(Qn)?(openBlock(),createBlock(lr,{key:0,modelValue:unref(Qn),"onUpdate:modelValue":ar[1]||(ar[1]=cr=>isRef(Qn)?Qn.value=cr:null),text:unref(tr),onButton:ar[2]||(ar[2]=cr=>or(!0)),onClose:ar[3]||(ar[3]=cr=>or(!1)),button:unref(er),nocloseonclickoutside:""},{default:withCtx(()=>[createBaseVNode("div",{innerHTML:unref(Zn)},null,8,_hoisted_1$2),unref(nr)?(openBlock(),createElementBlock("div",_hoisted_2$2,[_hoisted_3$2,withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":ar[0]||(ar[0]=cr=>isRef(rr)?rr.value=cr:null)},null,512),[[vModelCheckbox,unref(rr)]]),_hoisted_4$1])):createCommentVNode("",!0)]),_:1},8,["modelValue","text","button"])):createCommentVNode("",!0)}}}),_sfc_main$2={data(){return{settingsOpen:!1,bug:!1,feedback:!1,contact:"",text:"",text1:"",text2:""}},setup(){return{version:useRuntimeConfig().public.clientVersion,settings:useSettingsStore()}},computed:{electron(){return!!globalThis.electron}},components:{Settings:__nuxt_component_1$1,Prompt:_sfc_main$3}},_imports_0$1=""+new URL("icon.e7345919.png",import.meta.url).href,_imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAYAAADaILXQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4gceBjUENG+WiAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACGklEQVRIx7WVv2sUQRTHP2/2zsCecOfqhaCePwpRMCjYiTGlNiKWNhIQCztLtRUsBEEr8wdEsE4VBK0METuNjZWYQDAEFDzczWJxY+GbOBln904xDx7M7HznO2/fm++8hF8mgAnG4ua9Xu98v9+fAaa73e5kURQrQO7tcXgBrM9nAkLx5glwTTf4/hkY13WCfb5vnwTkAK8i5ANgBmjw23yOrd8JzXrjMeB0BCPAcT3ET8cfvKIRHAOOZFnmR3MuErXzpeDADnACmPAPSIEXQAF8Bz4Bc8At4GsNuRWRReA68AFY1yJvisgVR365juAf/Vun08kS4F1QmP9hY2VZFkaLthN2xmi+RrHXwFNgY0T8PEAX+FiTv3VgMriGd4bk/KG78w1rbVP/IAa8CjQ9BTeAXcDzCvxtDaKBMcbJ/CzwIwLeF5G1Ae5FsCv+U2IGg4FT5WGNMLR2xfuxJ4JtaTAOTwLcqMnfEwUnnqx3a5Qx/DKw35FfGEEUD5S4CfSAzSH4DWAvFXmOeV4Tbcwfm4o8xywFDv2FiMYBnu3A22KBiwBH9TX0F/rAlxEISsWVwfc3rvhNYApYAGbb7fYlLVoKPBpSg5N6c04BN7Vr3QcyrwVu7zIiIoC0Wq0DNeRzVe1tS0SRxoy1VgCT5/kasFpRsPdBm5Sw5YWLNuiFiMjLCvK3vhIjY4Z1f0nT9KAWyE/JXU+xUkEsPwGe1gSU5MFaMAAAAABJRU5ErkJggg==",_imports_2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAEmSURBVDhPlZTLSsRAEEXjCxQRX6Dzh/MRLtwouvBD3YhL3Y11kj7hGiYhc+DSVdVV1T2VZroZfku7Jkh7NRa9TFZt/VVkoStsSs+DeXhDm8BDW0/aCtOcRfJ0bXVaOmp27s1iAsmPYUMW2uyjrbNMN/WPS9hvvTfY6DrsvTfOTWambyz9ixLclPbl/MMAM4P3EjHmh25LyXmJ+FnJpiM4BIEksSFMb4t/2fTZ/JFMRNuwuZnNWJV+jonmIwZNRs7MeGKe9DV8SXFWT6XXEjf7Ka2BunuMbCh8QZp+N3sN3O5rMOfpf0KJ03NmSp99cxexiAKGra/w+SBX4S9iEu+MhvlHARxEM96thy2SN9EGGgG+7y/3FzExi+7CPqjZFN6kxTMNuu4P/5eO8a9CnUMAAAAASUVORK5CYII=",_imports_3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpVoqDlYQcQhSnayIijhqFYpQIdQKrTqYXL+EJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoC4uTkpukiJ/0sKLWI8OO7Hu3uPu3eAUCsx1WwbA1TNMpLxmJjOrIiBV3SiF0EMYlRmpj4rSQl4jq97+Ph6F+VZ3uf+HF3ZnMkAn0g8w3TDIl4nntq0dM77xGFWlLPE58QjBl2Q+JHristvnAsOCzwzbKSSc8RhYrHQwkoLs6KhEk8SR7KqRvlC2uUs5y3OaqnCGvfkLwzltOUlrtMcQBwLWIQEEQoq2EAJFqK0aqSYSNJ+zMPf7/glcink2gAjxzzKUCE7fvA/+N2tmZ8Yd5NCMaD9xbY/hoDALlCv2vb3sW3XTwD/M3ClNf3lGjD9SXq1qUWOgO5t4OK6qSl7wOUO0Peky4bsSH6aQj4PvJ/RN2WAnlsguOr21tjH6QOQoq4SN8DBITBcoOw1j3d3tPb275lGfz+YcHK2AYSdwAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+UJFQolAuvg0VAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAERUlEQVRIx8VXXUwcVRT+7sydnZ0dFpYKyBK2GOGBFKMSjFVJsHS7YkNSk42+9EU0YGIao6ZQ1ESqPljRhz4ZHkoUEuOT1p9Yg6F0rYlRH5AqJaEPaKINu4Eu7jLMzs7Oz/VB23V3ZoHdlHiebu6Ze7/c833nzDmEMYad7Js5XZ791jimqAhnddYleUmrmmF+APBJRMnqbMUrknm/jLnIIeHLvrCo7nQn2Q741bfUO9aS9rBp4kTOgB+7MI8AxevBRG2AG3/ntLxRFvDZCQ3xhDUYX2PvmRYCqMAoj1RjPRlpCvKTLz8vOfxc8cZsTPcuLZtTf8bZuUpBAcC0ELieYOeuLpsfzsZ077Yvno3p3vMXjAupTXYYt9EC1eRStF/oj/SKWQfw2QkNS8vmlKrhaeyB+SRM3dNOn7kZ9luhXo1bg3sFCgAZDQOrcWuw4MWjb6r7VhP2yk6cWhYgioBpFgmJAroO8PzOggs1cW1vvy4nKQCkN9loKVCOAx5/lKKrk6IlRJFIWPjoEx37AgQA8Fea4aljHrTsp/jjuoX5KwZmYiZMy11wiXX7JIDXyMzFrPzx+VzcLU9tBrw7JqElRMsKazxuYfiNDGzmnufHo54gf+f+0SdTmzjudkH0KEX3Q2LZfPr9HESeYXHZdtJlQ1y/YV/lFBVh18pCgMhhsWIxHeoR4SnBuaIizGV11uXmfKyHojbAVQxcVUXQf0Rw9WV11sVJIml1cx7scvKayTDoupO4XI5BVZ37D3S6a0MSSSunaszvwgPuaik8dO2aiede2MJLr6hYW89LdiNp4+SoiqEXt7C4ZBScCYV4ECfNUDXmd43lgTYOkkQK9mKXc7B4IKUyLPyST+TFJQM3VAbGAXOXC4EFgaCzw50uTpaIUrwZbCCOD5ub8xfU1+fXdXX5dXOTE6Shzrkn+4hCNZ2tALi/IB2qnMB9ERHVNQSSl6Dz3rxoOg4IOHUCSG/aePhBj+NcTY3zLi3LVqhXJPM5gxUAE5foCAJBT7d7enXeJ5TuNJy48IpknvPLmCt2JDcKFcoYsHDFwJZSultRVYaFBQN2kZjW15zq8suYK1kyj3RTRJ8Qb+WypjF8MK1BzTDc3cIjUEtAAKTTDL/9bkHwEAw9K8Hn++eJ6bSNz7/QMfOdWdBu3CyZtC8sqp99bUzkDHbqv8AXvzcR+8FE9KiARw4K8EkEP/9qIWMCCy6lUBQAPcegKDZ+/MnAp18ZMFx6HErxfl9YVHf3W2SAJACauX21kjxAJgMQWvq32Bzk2s6MyUkOAMZPyxvBBjJSWiE7gwKAlisN+m+ajpwZk5MFgQg28pOyhOm96kBkCdPBRn7yf2/2CqiP9IrZaL/QfztfLkuYLgZ17asjvWK2o50OhIJkiPJIVQpIeaSaG8lQRzsdKAbd1QiznrSHjTJHGMlLJmqqyfh4uSNMOUObLBFFq2Bo+xtLw+9KZ6ba2AAAAABJRU5ErkJggg==",_imports_4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAMAAADZqYNOAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAkNQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////zmGfoQAAAL90Uk5TAAN08vN2KePmLTfx/qcbDKb8ub+0HBNVVxq2CyfRayBQbXVxakMJCBnPYE4fkdfMs5qlwQUxerrTY8eBjsvWkMUWAg8BTajfiksNfLUGFVPCsheMyB5RuNyfSRE1HcaD1G+s3S7EWs0j2EgOeOCqM4lEZyZfCndhpKEyXr6bnSwvr8oqmSurQQSUsMAYi9s7fWU2+vvDcGZsPlJCk9pbeQfZ1fDefr1/+VRWIdCPEjho+KmgRiXhl7uGQHPikkd8TFklAAAAAWJLR0TAE2Hf+AAAAAlwSFlzAAANqwAADasBvUJgOAAAAk9JREFUKM9jYEACjEzMLKyMDDgAG/v+/RycuGS5uPfv5+HlwyHLLyAoKCQsIopDWkxcQkxSSkCaATeQkZVDcaq8gqKSsoqqGpinrsGqyamlqK0Dcbyorp6+gaGRsYg8A4OJqZm5haWVtY25rZ09yHmSIg4SjiYMTmrOLtKubu62Hp5e3j5qvn7+AYFBDC7BIaEQC9TCwiMio6KBrBgLNiAZGxfPIJmQCJZz4kpK1k2B2OWcmgai5NIZMjKzQKzsnNy8fCeYOyMLQGShHoOkRRGQUZyUWVKK8EVZEsiQ8nQGxopKJ4YqzZB8ZD9W1wB951Jbx8DgmVnfoNkIdZmJCZhSbfJjYGhOiGJgkG4x009yhEi25rWBo6g9U4eho7MLZJdOt3kP1MTe/fttYLJaff0g5gS7iZOgsoqTpyRCZGP9pk4DsYr7ps+ImAmNwln+/CB6doJoR6s6iKWU7ig9Z+4slAQzL9ULwpCu6QXqsc6d74Uky2S+AMLQWQgKjQ7xRYGTXOCyLbWgiHXkZ5i3eMlSkF2tbhHWUE8zqC1TBpq3fNEyBvf9+1esBMf6qhC7+Tpg/RmL2hkY/Ffs388AxPtBZq8OZehhWrNobfs6J4b1QkEMDBuAEgy1G/enNwNl4zcBHRKk1bXQdrOyhNbsLYrGK3g2MmQrTNwKMm3LNrCffdnKt+9YY5e5qGanp6UC3JnSBm3QKFSfsStWR7TUhQEZ9C/ZAA2KTFMs6Xj3Hn9ggDm5uithS+XS8Uv2Zu1b6x6MPSuYzHJgZtGfp44QAQBbAJc9o1Mk+QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0wN1QxNzozMTo1MCswMDowMFttfAMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMDdUMTc6MzE6NTArMDA6MDAqMMS/AAAARnRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA2LjcuOC05IDIwMTktMDItMDEgUTE2IGh0dHA6Ly93d3cuaW1hZ2VtYWdpY2sub3JnQXviyAAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpoZWlnaHQANDc0fis41QAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA0Mzm4WtLhAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1ODEwOTY3MTB6P0nOAAAAE3RFWHRUaHVtYjo6U2l6ZQAxOC42S0JCW1UXCAAAAER0RVh0VGh1bWI6OlVSSQBmaWxlOi8vLi91cGxvYWRzLzU2L3NaenQxS3MvMjE0OC9lbGVjdHJvbl9pY29uXzEzMjQxMS5wbmfkifMWAAAAAElFTkSuQmCC",TitleBar_vue_vue_type_style_index_0_scoped_eeefa952_lang="",_withScopeId=Jn=>(pushScopeId("data-v-eeefa952"),Jn=Jn(),popScopeId(),Jn),_hoisted_1$1={class:"titlebar"},_hoisted_2$1={class:"titlebar-content titlebar-left",id:"titlebar-content"},_hoisted_3$1={class:"flex titletext"},_hoisted_4=_withScopeId(()=>createBaseVNode("img",{class:"w-30px h-30px",src:_imports_0$1},null,-1)),_hoisted_5={class:"m-auto version"},_hoisted_6={class:"text-slate-300"},_hoisted_7={class:"titlebar-content titlebar-right",id:"titlebar-content-right"},_hoisted_8=_withScopeId(()=>createBaseVNode("img",{class:"icon",src:_imports_0},null,-1)),_hoisted_9=_withScopeId(()=>createBaseVNode("span",{class:"icontext"},"Settings",-1)),_hoisted_10=[_hoisted_8,_hoisted_9],_hoisted_11=_withScopeId(()=>createBaseVNode("img",{class:"icon",src:_imports_2},null,-1)),_hoisted_12=_withScopeId(()=>createBaseVNode("span",{class:"icontext"},"Systems",-1)),_hoisted_13=_withScopeId(()=>createBaseVNode("a",{class:"iconbox no-underline",href:"https://discord.gg/cCtqGbugwb",target:"_blank"},[createBaseVNode("img",{class:"static-icon",src:_imports_3}),createBaseVNode("span",{class:"icontext"},"Discord")],-1)),_hoisted_14={key:1},_hoisted_15=_withScopeId(()=>createBaseVNode("img",{src:_imports_4},null,-1)),_hoisted_16=[_hoisted_15];function _sfc_render$1(Jn,Xn,Qn,Zn,er,tr){const nr=__nuxt_component_0$2,rr=__nuxt_component_1$1,sr=__nuxt_component_0$1,or=_sfc_main$3;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createVNode(nr,{to:{name:"index"},class:"titlecolor no-underline unselectable"},{default:withCtx(()=>[createBaseVNode("h1",_hoisted_3$1,[_hoisted_4,createBaseVNode("span",_hoisted_5,[createTextVNode(" New Recruit - Editor "),createBaseVNode("span",_hoisted_6,"v"+toDisplayString(Zn.version),1)])])]),_:1}),renderSlot(Jn.$slots,"default",{},void 0,!0)]),createBaseVNode("div",_hoisted_7,[createBaseVNode("div",{class:"iconbox no-underline unselectable",onClick:Xn[0]||(Xn[0]=ir=>er.settingsOpen=!0)},_hoisted_10),tr.electron?(openBlock(),createBlock(nr,{key:0,class:"iconbox no-underline unselectable",to:"/system"},{default:withCtx(()=>[_hoisted_11,_hoisted_12]),_:1})):createCommentVNode("",!0),_hoisted_13,tr.electron?(openBlock(),createElementBlock("div",_hoisted_14,_hoisted_16)):createCommentVNode("",!0),er.settingsOpen?(openBlock(),createBlock(sr,{key:2,modelValue:er.settingsOpen,"onUpdate:modelValue":Xn[1]||(Xn[1]=ir=>er.settingsOpen=ir)},{default:withCtx(()=>[createVNode(rr)]),_:1},8,["modelValue"])):createCommentVNode("",!0)]),createVNode(or)])}const __nuxt_component_0=_export_sfc(_sfc_main$2,[["render",_sfc_render$1],["__scopeId","data-v-eeefa952"]]),interpolatePath=(Jn,Xn)=>Xn.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,Qn=>{var Zn;return((Zn=Jn.params[Qn.slice(1)])==null?void 0:Zn.toString())||""}),generateRouteKey=(Jn,Xn)=>{const Qn=Jn.route.matched.find(er=>{var tr;return((tr=er.components)==null?void 0:tr.default)===Jn.Component.type}),Zn=Xn??(Qn==null?void 0:Qn.meta.key)??(Qn&&interpolatePath(Jn.route,Qn));return typeof Zn=="function"?Zn(Jn.route):Zn},wrapInKeepAlive=(Jn,Xn)=>({default:()=>Jn?h$2(KeepAlive,Jn===!0?{}:Jn,Xn):Xn}),_wrapIf=(Jn,Xn,Qn)=>(Xn=Xn===!0?{}:Xn,{default:()=>{var Zn;return Xn?h$2(Jn,Xn,Qn):(Zn=Qn.default)==null?void 0:Zn.call(Qn)}}),__nuxt_component_1=defineComponent({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(Jn,{attrs:Xn}){const Qn=useNuxtApp();return()=>h$2(RouterView,{name:Jn.name,route:Jn.route,...Xn},{default:Zn=>{if(!Zn.Component)return;const er=generateRouteKey(Zn,Jn.pageKey),tr=Qn.deferHydration(),nr=!!(Jn.transition??Zn.route.meta.pageTransition??appPageTransition),rr=nr&&_mergeTransitionProps([Jn.transition,Zn.route.meta.pageTransition,appPageTransition,{onAfterLeave:()=>{Qn.callHook("page:transition:finish",Zn.Component)}}].filter(Boolean));return _wrapIf(Transition,nr&&rr,wrapInKeepAlive(Jn.keepalive??Zn.route.meta.keepalive??appKeepalive,h$2(Suspense,{suspensible:!0,onPending:()=>Qn.callHook("page:start",Zn.Component),onResolve:()=>{nextTick(()=>Qn.callHook("page:finish",Zn.Component).finally(tr))}},{default:()=>h$2(RouteProvider,{key:er,routeProps:Zn,pageKey:er,hasTransition:nr})}))).default()}})}});function _toArray(Jn){return Array.isArray(Jn)?Jn:Jn?[Jn]:[]}function _mergeTransitionProps(Jn){const Xn=Jn.map(Qn=>({...Qn,onAfterLeave:_toArray(Qn.onAfterLeave)}));return defu(...Xn)}const RouteProvider=defineComponent({name:"RouteProvider",props:["routeProps","pageKey","hasTransition"],setup(Jn){const Xn=Jn.pageKey,Qn=Jn.routeProps.route,Zn={};for(const er in Jn.routeProps.route)Zn[er]=computed(()=>Xn===Jn.pageKey?Jn.routeProps.route[er]:Qn[er]);return provide("_route",reactive(Zn)),()=>h$2(Jn.routeProps.Component)}}),__nuxt_component_2=defineComponent({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(Jn,{slots:Xn,attrs:Qn}){const Zn=ref(!1);return onMounted(()=>{Zn.value=!0}),er=>{var sr;if(Zn.value)return(sr=Xn.default)==null?void 0:sr.call(Xn);const tr=Xn.fallback||Xn.placeholder;if(tr)return tr();const nr=er.fallback||er.placeholder||"",rr=er.fallbackTag||er.placeholderTag||"span";return createElementBlock(rr,Qn,nr)}}});function splitExactlyConstraints(Jn){if(!Jn.constraints)return Jn;const Xn=[];for(const Zn of Jn.constraints)if(Zn.type==="exactly"){const er={...Zn,id:Zn.id+"-min",type:"min"},tr={...Zn,id:Zn.id+"-max",type:"max"};Xn.push(er,tr)}else Xn.push(Zn);const Qn=copy(Jn);return Qn.constraints=Xn,Qn}function splitExactlyConstraintsModifiers(Jn){if(!Jn.modifiers&&!Jn.modifierGroups||!Jn.constraintsIterator)return Jn;const Xn={};for(const tr of Jn.constraintsIterator())tr.type==="exactly"&&(Xn[tr.id]=tr);function Qn(tr){const nr=[];for(const rr of tr)if(rr.field in Xn){const sr={...rr,field:rr.field+"-min"},or={...rr,field:rr.field+"-max"};nr.push(sr,or)}else nr.push(rr);return nr}function Zn(tr){const nr=[];for(const rr of tr){const sr={...rr};sr.modifiers&&(sr.modifiers=Qn(sr.modifiers)),sr.modifierGroups&&(sr.modifierGroups=Zn(sr.modifierGroups)),nr.push(sr)}return nr}const er=copy(Jn);return er.modifiers&&(er.modifiers=Qn(er.modifiers)),er.modifierGroups&&(er.modifierGroups=Zn(er.modifierGroups)),er}const entries={catalogueLinks:{type:"catalogueLink"},publications:{type:"publication"},costs:{type:"cost"},costTypes:{allowedChildrens:["modifiers"],type:"costType"},costLimits:{type:"costLimit"},profileTypes:{allowedChildrens:["characteristicTypes","attributeTypes"],type:"profileType"},characteristicTypes:{type:"characteristicType"},characteristics:{type:"characteristic"},attributeTypes:{type:"attributeType"},attributes:{type:"attribute"},categoryEntries:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups"],type:"categoryEntry"},categoryLinks:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups"],type:"categoryLink"},categories:{type:"category"},forceEntries:{allowedChildrens:["forceEntries","forceEntryLinks","categoryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","costs"],type:"forceEntry"},sharedForceEntries:{allowedChildrens:["forceEntries","forceEntryLinks","categoryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","costs"],type:"forceEntry"},forceEntryLinks:{allowedChildrens:["forceEntries","forceEntryLinks","categoryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","costs"],type:"forceEntryLink"},forces:{type:"force"},selections:{type:"selection"},entryLinks:{allowedChildrens:"type",type:"entryLink"},selectionEntryGroups:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","categoryLinks","costs"],type:"selectionEntryGroup"},sharedSelectionEntryGroups:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","categoryLinks","costs"],type:"selectionEntryGroup"},selectionEntries:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","associations","constraints","modifiers","modifierGroups","categoryLinks","costs"],type:"selectionEntry"},sharedSelectionEntries:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","associations","constraints","modifiers","modifierGroups","categoryLinks","costs"],type:"selectionEntry"},associations:{type:"association"},sharedRules:{allowedChildrens:["modifiers","modifierGroups"],type:"rule"},rules:{allowedChildrens:["modifiers","modifierGroups"],type:"rule"},profiles:{allowedChildrens:["modifiers","modifierGroups","characteristics","attributes"],type:"profile"},sharedProfiles:{allowedChildrens:["modifiers","modifierGroups","characteristics","attributes"],type:"profile"},infoGroups:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","modifiers","modifierGroups"],type:"infoGroup"},sharedInfoGroups:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","modifiers","modifierGroups"],type:"infoGroup"},infoLinks:{allowedChildrens:"type",type:"infoLink"},modifiers:{allowedChildrens:["conditions","conditionGroups","localConditionGroups","repeats"],type:"modifier"},modifierGroups:{allowedChildrens:["modifiers","modifierGroups","conditions","conditionGroups","localConditionGroups","repeats"],type:"modifierGroup"},repeats:{allowedChildrens:[],type:"repeat"},conditions:{allowedChildrens:[],type:"condition"},constraints:{allowedChildrens:[],type:"constraint"},conditionGroups:{allowedChildrens:["conditions","conditionGroups","localConditionGroups"],type:"conditionGroup"},localConditionGroups:{allowedChildrens:["conditions","conditionGroups"],type:"localConditionGroup"},catalogue:{allowedChildrens:["catalogueLinks","publications","costTypes","profileTypes","categoryEntries","forceEntries","sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","sharedForceEntries","selectionEntries","entryLinks","infoLinks","infoGroups","rules"]},gameSystem:{allowedChildrens:["publications","costTypes","profileTypes","categoryEntries","forceEntries","sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","sharedForceEntries","selectionEntries","entryLinks","infoLinks","infoGroups","rules"]}},types={selectionEntry:{label:"Entry"},selectionEntryGroup:{label:"Group"},selectionEntryLink:{label:"Entry (link)"},selectionEntryGroupLink:{label:"Group (link)"},entryLink:{label:"Entry (link)"},forceEntry:{label:"Force"},force:{label:"Force"},forceEntryLink:{label:"Force (link)"},selection:{label:"Selection"},category:{label:"Category"},categoryEntry:{label:"Category"},categoryLink:{label:"Category (link)"},catalogueLink:{label:"Catalogue (link)"},publication:{label:"Publication"},costType:{label:"Cost Type"},cost:{label:"Cost"},costLimit:{label:"Cost Limit"},link:{label:"Link"},profileType:{label:"Profile Type"},profile:{label:"Profile"},rule:{label:"Rule"},infoLink:{label:"Info (link)"},infoGroup:{label:"Info Group"},profileLink:{label:"Profile"},ruleLink:{label:"Rule (link)"},infoGroupLink:{label:"Info Group (link)"},characteristic:{label:"Characteristic"},characteristicType:{label:"Characteristic Type"},attribute:{label:"Attribute"},attributeType:{label:"Attribute Type"},constraint:{label:"Constraint"},condition:{label:"Condition"},modifier:{label:"Modifier"},modifierGroup:{label:"Modifier Group"},repeat:{label:"Repeat"},conditionGroup:{label:"Condition Group"},localConditionGroup:{label:"Local Condition Group"},association:{label:"Association"},catalogue:{label:"Catalogue"},gameSystem:{label:"Game System"}},isNonEmptyIfHasOneOf=["modifiers","modifierGroups","constraints","entryLinks","categoryLinks","selectionEntries","selectionEntryGroups","infoLinks","infoGroups","rules","profiles"],arrayKeys=new Set([...Object.keys(entries).filter(Jn=>Jn.endsWith("s"))]);function getDataObject(Jn){if(Jn.isCatalogue&&Jn.isCatalogue())return Jn;if(Jn.gameSystem)return Jn.gameSystem;if(Jn.catalogue)return Jn.catalogue;throw Error("getDataObject data argument is not a valid system or catalogue")}function getDataDbId(Jn){if(Jn.isCatalogue&&Jn.isCatalogue()){if(Jn.id&&Jn.gameSystemId)return`${Jn.gameSystemId}-${Jn.id}`;if(Jn.id)return`${Jn.id}`}if(Jn.catalogue)return`${Jn.catalogue.gameSystemId}-${Jn.catalogue.id}`;if(Jn.gameSystem)return Jn.gameSystem.id;throw Error("getDataId data argument is not a valid system or catalogue")}class Base{constructor(Xn){Sr(this,"id");Sr(this,"type");Sr(this,"subType");Sr(this,"shared");Sr(this,"import");Sr(this,"collective");Sr(this,"comment");Sr(this,"publicationId");Sr(this,"typeName");Sr(this,"typeId");Sr(this,"categoryEntryId");Sr(this,"name");Sr(this,"hidden");Sr(this,"value");Sr(this,"page");Sr(this,"defaultAmount");Sr(this,"profiles");Sr(this,"rules");Sr(this,"infoLinks");Sr(this,"infoGroups");Sr(this,"publications");Sr(this,"costs");Sr(this,"selectionEntries");Sr(this,"selectionEntryGroups");Sr(this,"entryLinks");Sr(this,"profileTypes");Sr(this,"categoryEntries");Sr(this,"categoryLinks");Sr(this,"forceEntries");Sr(this,"sharedForceEntries");Sr(this,"forceEntryLinks");Sr(this,"sharedSelectionEntryGroups");Sr(this,"sharedSelectionEntries");Sr(this,"sharedProfiles");Sr(this,"sharedRules");Sr(this,"sharedInfoGroups");Sr(this,"target");Sr(this,"modifiers");Sr(this,"modifierGroups");Sr(this,"constraints");Sr(this,"conditions");Sr(this,"conditionGroups");Sr(this,"localConditionGroups");Sr(this,"catalogue");Sr(this,"extra_constraints");Sr(this,"childs");Sr(this,"loaded");Sr(this,"collective_recursive");Sr(this,"limited_to_one");Sr(this,"lazy");Sr(this,"associations");Sr(this,"associationConstraints");Sr(this,"flatten");Sr(this,"collapsible");Sr(this,"sortIndex");Sr(this,"alias");Sr(this,"noindex");Sr(this,"exportable");return Object.setPrototypeOf(Xn,Object.getPrototypeOf(this))}get url(){return"%{main_catalogue|catalogue}/%{id}/%{getName}"}process(){this.loaded||(this.collective_recursive=this.isCollectiveRecursive(),this.limited_to_one=!this.canAmountBeAbove1(),this.loaded=!0)}toJson(){return entryToJson(this)}getCatalogue(){return this.catalogue}getGameSystem(){return this.getCatalogue().getGameSystem()}get[Symbol.toStringTag](){return globalThis.isEditor?"Object":"ObjectNoObserve"}isGroup(){return!1}isForce(){return!1}isCatalogue(){return!1}isLink(){return!1}isCategory(){return!1}isRoster(){return!1}isQuantifiable(){return!1}isEntry(){return!1}isIdUnique(){return!1}isRule(){return!1}isProfile(){return!1}isInfoGroup(){return!1}isUnit(){for(const Xn of this.categoryLinks||[])if(Xn.primary)return!0;return!1}isExportable(){return this.exportable??!0}getId(){return this.id}getType(){return this.subType??this.type}getTypeName(){return this.typeName}getCategoryEntryId(){return this.categoryEntryId}getHidden(){return this.hidden}getPage(){return this.page}getName(){return String(this.name||"")}getDefaultAmount(){return this.defaultAmount}isCollective(){return this.collective}isCollapsible(){return this.collapsible}isCollectiveRecursive(){const Xn=[...this.selectionsIterator()];for(;Xn.length;){const Qn=Xn.pop();if(!Qn.isCollective()&&!Qn.isGroup())return!1;Xn.push(...Qn.selectionsIterator())}return!0}isEmptyNode(){for(const Xn of isNonEmptyIfHasOneOf)if(this[Xn]!==void 0)return!1;return!0}*associationsIterator(){this.associations&&(yield*this.associations)}*profilesIterator(){var Xn;for(const Qn of getAllInfoGroups(this))Qn.profiles&&(yield*Qn.profiles),Qn.infoLinks&&(yield*(Xn=Qn.infoLinks)==null?void 0:Xn.filter(Zn=>Zn.type==="profile").map(Zn=>Zn.target))}*rulesIterator(){var Xn;for(const Qn of getAllInfoGroups(this))Qn.rules&&(yield*Qn.rules),Qn.infoLinks&&(yield*(Xn=Qn.infoLinks)==null?void 0:Xn.filter(Zn=>Zn.type==="rule").map(Zn=>Zn.target))}*constraintsIterator(){this.constraints&&(yield*this.constraints)}*extraConstraintsIterator(){this.extra_constraints&&(yield*this.extra_constraints)}*modifierGroupsIterator(){this.modifierGroups&&(yield*this.modifierGroups)}*modifiersIterator(){this.modifiers&&(yield*this.modifiers)}*modifierGroupsIteratorRecursive(){yield this,this.isLink()&&(yield this.target);for(const Xn of this.modifierGroupsIterator())yield Xn,yield*iterateModifierGroupsRecursive(Xn.modifierGroups)}*selectionsIterator(){this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*localSelectionsIterator(){this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*nodesIterator(){this.isLink()&&(yield*this.target.nodesIterator()),this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*entriesIterator(){this.isLink()&&(yield*this.target.entriesIterator()),this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks),this.childs&&(yield*this.childs)}*iterateSelectionEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups)}*iterateSelectionEntriesWithRoot(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups)}*iterateRootEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.forceEntries&&(yield*this.forceEntries)}*iterateAllRootEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.forceEntries&&(yield*this.forceEntries)}*forceEntriesIterator(){this.forceEntries&&(yield*this.forceEntries),this.forceEntryLinks&&(yield*this.forceEntryLinks)}*forcesIterator(){this.forceEntries&&(yield*this.forceEntries),this.forceEntryLinks&&(yield*this.forceEntryLinks)}*forcesIteratorRecursive(){if(this.forceEntries)for(const Xn of this.forceEntries)yield Xn,yield*Xn.forcesIteratorRecursive();if(this.forceEntryLinks)for(const Xn of this.forceEntryLinks)yield Xn,yield*Xn.forcesIteratorRecursive()}*categoryLinksIterator(){this.categoryLinks&&(yield*this.categoryLinks)}*infoLinksIterator(){this.infoLinks&&(yield*this.infoLinks)}*infoGroupsIterator(){this.infoGroups&&(yield*this.infoGroups)}*infoRulesIterator(){this.rules&&(yield*this.rules)}*infoProfilesIterator(){this.profiles&&(yield*this.profiles)}forEachCond(Xn,Qn=0){if(Xn(this,0)===void 0)for(const Zn of this.selectionsIterator())Zn.forEachCond(Xn,Qn+1)}forEach(Xn){Xn(this);for(const Qn of this.selectionsIterator())Qn.forEach(Xn)}forEachNode(Xn){Xn(this);for(const Qn of this.nodesIterator())Qn.forEachNode(Xn)}forEachNodeCb(Xn){const Qn=[this],Zn=new Set;for(;Qn.length;){const er=Qn.pop();if(!Zn.has(er.id)){if(Zn.add(er.id),Xn(er),er.childs){Qn.push(...er.childs);continue}if(er.target){const tr=er.target;tr.selectionEntries&&Qn.push(...tr.selectionEntries),tr.selectionEntryGroups&&Qn.push(...tr.selectionEntryGroups),tr.entryLinks&&Qn.push(...tr.entryLinks)}er.selectionEntries&&Qn.push(...er.selectionEntries),er.selectionEntryGroups&&Qn.push(...er.selectionEntryGroups),er.entryLinks&&Qn.push(...er.entryLinks)}}}forEachObject(Xn,Qn=arrayKeys,Zn){let er=[this],tr=[],nr=0;for(;er.length;){for(;er.length;){const rr=er.pop();for(const sr in rr){const or=rr[sr];if(Qn.has(sr)&&isObject(or))if(Array.isArray(or)){if(or.length&&isObject(or[0]))for(let ir=0;ir<or.length;ir++){const ar=or[ir];Xn(ar,rr)!==!1&&tr.push(ar)}}else Xn(or,rr)!==!1&&tr.push(or)}}if(er=tr,tr=[],nr++,Zn&&nr>=Zn)break}}forEachObjectWhitelist(Xn,Qn=arrayKeys,Zn){return this.forEachObject(Xn,Qn,Zn)}findOption(Xn){for(const Qn of this.selectionsIterator())if(Xn(Qn))return Qn}findOptionRecursive(Xn){const Qn=[...this.selectionsIterator()];for(;Qn.length;){const Zn=Qn.pop();if(Xn(Zn))return Zn}}find_recursive(Xn,Qn=!1){let Zn=[this],er=[];for(;Zn.length;){for(;Zn.length;){const tr=Zn.pop();for(const nr in tr){const rr=tr[nr];if(arrayKeys.has(nr)&&isObject(rr))if(Array.isArray(rr)){if(rr.length&&isObject(rr[0]))for(let sr=0;sr<rr.length;sr++){const or=rr[sr],ir=Xn(or);if(ir)return or;ir!==!1&&(er.push(or),or.target&&Qn&&er.push(or.target))}}else{const sr=Xn(rr);if(sr)return rr;sr!==!1&&(er.push(rr),rr.target&&Qn&&er.push(rr.target))}}}Zn=er,er=[]}}find(Xn,Qn=!1){let Zn=[this],er=[],tr=!0;for(;Zn.length;){for(;Zn.length;){const nr=Zn.pop();for(const rr in nr){const sr=nr[rr];if(arrayKeys.has(rr)&&isObject(sr))if(Array.isArray(sr)){if(sr.length&&isObject(sr[0]))for(let or=0;or<sr.length;or++){const ir=sr[or];if(Xn(ir))return ir;er.push(ir),ir.target&&Qn&&er.push(ir.target)}}else{if(Xn(sr))return sr;er.push(sr),sr.target&&Qn&&er.push(sr.target)}}}if(!tr)return;tr=!1,Zn=er,er=[]}}getCosts(){return this.costs||[]}getPrimaryCategory(){for(const Xn of this.categoryLinks||[])if(Xn.primary)return Xn.targetId;return this.getCategoryEntryId()??UNCATEGORIZED_ID}getPrimaryCategoryLink(){for(const Xn of this.categoryLinks||[])if(Xn.primary)return Xn}getPackedConstraint(Xn){const Qn=Object.assign({},Xn);Qn.name=this.getName(),Qn.parent=this;const Zn=Xn.shared||this instanceof CategoryLink;Qn.childId=this.isLink()&&Zn?this.targetId:this.id,Qn.modifiers=[];for(const er of this.modifiersIterator())(er.field===Xn.id||er.field==="hidden"&&Xn.type==="min"&&!this.isCategory())&&Qn.modifiers.push(er);Qn.modifierGroups=[];for(const er of this.modifierGroupsIterator())e:for(const tr of iterateModifierGroupsRecursive([er]))for(const nr of tr.modifiers||[])if(nr.field===Xn.id||nr.field==="hidden"&&Xn.type==="min"&&!this.isCategory()){Qn.modifierGroups.push(er);break e}return Qn}getBoundConstraint(Xn){const Qn=this.getPackedConstraint(Xn);return Qn.scope="self",Qn}getChildBoundConstraints(Xn){const Qn=[];for(const Zn of this.selectionsIterator())if(!(Xn&&Zn.isGroup())){for(const er of Zn.constraintsIterator())(er.type==="min"||er.type==="exactly")&&er.scope==="parent"&&Qn.push(Zn.getBoundConstraint(er));Zn.isGroup()&&Qn.push(...Zn.getChildBoundConstraints())}return Qn}canAmountBeAbove1(){const Xn=getTheoreticalMaxes(this.constraintsIterator(),[...this.modifierGroupsIterator(),{modifiers:[...this.modifiersIterator()]}]);return!Xn.length||Xn.includes(-1)?!0:Math.min(...Xn)>1}hasOption(Xn){let Qn;return this.forEachCond(Zn=>(Zn.getName()===Xn&&(Qn=!0),Qn)),!!Qn}}class Entry extends Base{isEntry(){return!0}isQuantifiable(){return!0}isIdUnique(){return!0}}class Group extends Base{getDefaultSelectionEntryId(){return this.defaultSelectionEntryId}isGroup(){return!0}isIdUnique(){return!0}}class Link extends Base{constructor(){super(...arguments);Sr(this,"targetId")}isLink(){return!0}isGroup(){var Qn;return(Qn=this.target)==null?void 0:Qn.isGroup()}isCategory(){var Qn;return(Qn=this.target)==null?void 0:Qn.isCategory()}isQuantifiable(){var Qn;return(Qn=this.target)==null?void 0:Qn.isQuantifiable()}isEntry(){var Qn;return(Qn=this.target)==null?void 0:Qn.isEntry()}isIdUnique(){return!1}isProfile(){var Qn;return((Qn=this.target)==null?void 0:Qn.isProfile())||!1}isRule(){var Qn;return((Qn=this.target)==null?void 0:Qn.isRule())||!1}isInfoGroup(){var Qn;return((Qn=this.target)==null?void 0:Qn.isInfoGroup())||!1}isUnit(){if(this.target.isUnit())return!0;for(const Qn of this.categoryLinks||[])if(Qn.primary)return!0;return!1}isExportable(){return this.exportable??this.target.isExportable()}isCollapsible(){return this.collapsible||this.target.collapsible}getId(){return this.targetId}getType(){var Qn;return(Qn=this.target)==null?void 0:Qn.getType()}getPage(){var Qn;return this.page||((Qn=this.target)==null?void 0:Qn.page)}getHidden(){return this.target.hidden||this.hidden}getDefaultSelectionEntryId(){var Qn;return this.defaultSelectionEntryId||((Qn=this.target)==null?void 0:Qn.getDefaultSelectionEntryId())}getCategoryEntryId(){var Qn;return this.categoryEntryId??((Qn=this.target)==null?void 0:Qn.categoryEntryId)}get associationConstraints(){return this.target.associationConstraints}getAssociations(){return this.associations||this.target.associations}isCollective(){var Qn;return super.isCollective()||((Qn=this.target)==null?void 0:Qn.isCollective())}*extraConstraintsIterator(){yield*this.target.extraConstraintsIterator(),yield*super.extraConstraintsIterator()}*associationsIterator(){yield*this.target.associationsIterator(),yield*super.associationsIterator()}*rulesIterator(){yield*this.target.rulesIterator(),yield*super.rulesIterator()}*profilesIterator(){yield*this.target.profilesIterator(),yield*super.profilesIterator()}*constraintsIterator(){this.target&&(yield*this.target.constraintsIterator()),yield*super.constraintsIterator()}*modifierGroupsIterator(){yield*this.target.modifierGroupsIterator(),yield*super.modifierGroupsIterator()}*modifiersIterator(){yield*this.target.modifiersIterator(),yield*super.modifiersIterator()}*selectionsIterator(){yield*this.target.selectionsIterator(),yield*super.selectionsIterator()}*categoryLinksIterator(){yield*this.target.categoryLinksIterator(),yield*super.categoryLinksIterator()}*infoLinksIterator(){yield*this.target.infoLinksIterator(),yield*super.infoLinksIterator()}*infoGroupsIterator(){yield*this.target.infoGroupsIterator(),yield*super.infoGroupsIterator()}*infoRulesIterator(){yield*this.target.infoRulesIterator(),yield*super.infoRulesIterator()}*infoProfilesIterator(){yield*this.target.infoProfilesIterator(),yield*super.infoProfilesIterator()}getDefaultAmount(){return this.defaultAmount===""||this.defaultAmount===void 0?this.target.getDefaultAmount():this.defaultAmount}getName(){var Qn;return String(((Qn=this.target)==null?void 0:Qn.name)??this.name??"")}getPrimaryCategory(){var Qn;for(const Zn of this.categoryLinks||[])if(Zn.primary)return Zn.targetId;for(const Zn of((Qn=this.target)==null?void 0:Qn.categoryLinks)||[])if(Zn.primary)return Zn.targetId;return this.getCategoryEntryId()??UNCATEGORIZED_ID}getPrimaryCategoryLink(){var Qn;for(const Zn of this.categoryLinks||[])if(Zn.primary)return Zn;for(const Zn of((Qn=this.target)==null?void 0:Qn.categoryLinks)||[])if(Zn.primary)return Zn}getCosts(){var Zn;const Qn={};if((Zn=this.target)!=null&&Zn.costs)for(const er of this.target.costs)Qn[er.typeId]=er;if(this.costs)for(const er of this.costs)Qn[er.typeId]=er;return Object.values(Qn)}}Link.prototype.keyInfoCache={};class InfoLink extends Link{getTypeName(){var Xn;return(Xn=this.target)==null?void 0:Xn.typeName}getTypeId(){var Xn;return(Xn=this.target)==null?void 0:Xn.typeId}}class CategoryLink extends Link{constructor(){super(...arguments);Sr(this,"primary");Sr(this,"main_catalogue")}get units(){return this.target.units}*selectionsIterator(){yield*this.target.units}isEmpty(){return this.target.isEmpty()}}const UNCATEGORIZED_ID="(No Category)",ILLEGAL_ID="(Illegal Units)";class Category extends Base{constructor(){super(...arguments);Sr(this,"units");Sr(this,"main_catalogue");Sr(this,"description")}isCategory(){return!0}isEmpty(){return!this.units.length}isIdUnique(){return!this.isEmptyNode()}getDescription(){return Array.isArray(this.description)?this.description.join(`
`):this.description||""}*selectionsIterator(){yield*this.units}}class ForceEntryLink extends Link{constructor(){super(...arguments);Sr(this,"childForcesLabel");Sr(this,"categories");Sr(this,"forces");Sr(this,"main_catalogue")}isForce(){return!0}getChildForcesLabel(){var Qn;return((Qn=this.target)==null?void 0:Qn.childForcesLabel)??this.childForcesLabel??"Forces"}*selectionsIterator(){yield*this.categories,this.forces&&(yield*this.forces)}}class Force extends Base{constructor(){super(...arguments);Sr(this,"childForcesLabel");Sr(this,"categories");Sr(this,"forces");Sr(this,"main_catalogue")}isForce(){return!0}isEntry(){return!0}isIdUnique(){return!0}getChildForcesLabel(){return this.childForcesLabel??"Forces"}*infoLinksIterator(){if(this.isForce()&&this.main_catalogue){for(const Qn of this.main_catalogue.imports)yield*Qn.infoLinksIterator();yield*this.main_catalogue.infoLinksIterator()}yield*super.infoLinksIterator()}*infoRulesIterator(){if(this.isForce()&&this.main_catalogue){for(const Qn of this.main_catalogue.imports)yield*Qn.infoRulesIterator();yield*this.main_catalogue.infoRulesIterator()}yield*super.infoRulesIterator()}*selectionsIterator(){yield*this.categories,this.forces&&(yield*this.forces)}*rulesIterator(){var Qn;for(const Zn of getAllInfoGroups(this))Zn.rules&&(yield*Zn.rules),Zn.infoLinks&&(yield*(Qn=Zn.infoLinks)==null?void 0:Qn.filter(er=>er.type==="rule").map(er=>er.target));this.main_catalogue&&(yield*this.main_catalogue.rulesIterator())}isEmpty(){for(const Qn of this.categories)if(!Qn.isEmpty())return!1;return!0}}const maxValue=1/0;function getTheoreticalMaxes(Jn,Xn){var er,tr,nr,rr;const Qn=[];function Zn(sr){Qn.push(sr)}for(const sr of Jn){const or=Qn.length;if(sr.field!=="selections"||sr.type!=="max")continue;if(sr.value>1){Zn(sr.value);continue}let ir=sr.value;for(const ar of iterateModifierGroupsRecursive(Xn))for(const lr of ar.modifiers||[])if(lr.field===sr.id){if(lr.type==="increment"){if((er=ar.repeats)!=null&&er.length||(tr=lr.repeats)!=null&&tr.length){Zn(maxValue);continue}if(ir+=lr.value,ir>1){Zn(ir);continue}}if(lr.type==="decrement"&&lr.value<0){if((nr=ar.repeats)!=null&&nr.length||(rr=lr.repeats)!=null&&rr.length){Zn(maxValue);continue}if(ir-=lr.value,ir>1){Zn(ir);continue}}if(lr.type==="set"&&lr.value>1){if(lr.value===-1){Zn(maxValue);continue}Zn(lr.value)}}or===Qn.length&&Zn(ir)}return Qn}class ProfileType extends Base{}class Profile extends Base{isProfile(){return!0}getTypeName(){return this.typeName}getTypeId(){return this.typeId}isIdUnique(){return!0}}class Characteristic extends Base{constructor(){super(...arguments);Sr(this,"originalValue")}getLabel(){var Qn;return this.catalogue?((Qn=this.catalogue.findOptionById(this.typeId))==null?void 0:Qn.getName())??this.typeId:this.typeId}getTypeName(){return this.getLabel()}getName(){return`${this.getLabel()} = ${this.$text}`}}class InfoGroup extends Base{isInfoGroup(){return!0}isIdUnique(){return!0}}const basicQueryFields=new Set(["any","model","unit","upgrade","mount","crew","entry","roster","group","force","category"]);class Condition extends Base{}class Constraint extends Condition{}class Modifier extends Base{}class ModifierGroup extends Base{}class ConditionGroup extends Base{}class Rule extends Base{getDescription(){return Array.isArray(this.description)?this.description.join(`
`):this.description||""}isRule(){return!0}isIdUnique(){return!0}}function getIds(Jn){return Jn.isLink()?[Jn.id,Jn.targetId]:[Jn.id]}function*getAllInfoGroups(Jn){yield Jn;for(const Xn of Jn.infoGroups||[])yield*getAllInfoGroups(Xn);for(const Xn of Jn.infoLinks||[])Xn.type==="infoGroup"&&(yield*getAllInfoGroups(Xn.target))}function*iterateModifierGroupsRecursive(Jn){if(Jn)for(const Xn of Jn)yield Xn,yield*iterateModifierGroupsRecursive(Xn.modifierGroups)}const goodJsonKeys=new Set([...arrayKeys,"defaultAmount","id","import","importRootEntries","name","hidden","field","scope","value","percentValue","shared","includeChildSelections","includeChildForces","childId","type","targetId","primary","typeId","collective","$text","page","typeName","defaultSelectionEntryId","revision","battleScribeVersion","authorName","authorContact","authorUrl","library","gameSystemId","gameSystemRevision","xmlns","readme","description","comment","publicationDate","publisher","publisherId","publisherUrl","shortName","repeats","roundUp","defaultCostLimit","publicationId","affects","label","labelMembers","maxAssociationsPerMember","ids","min","max","of","info","flatten","collapsible","sortIndex","subType","arg","position","join","automatic","negative","message","childForcesLabel","forceLabel","categoriesLabel","affects","alias","noindex","exportable","costTypeId","profileTypeId","characteristicTypeId"]);function rootToJson(Jn,Xn=!1){const Qn={catalogue:void 0,gameSystem:void 0},Zn={...Jn};Jn.gameSystemId?(Qn.catalogue=Zn,Qn.catalogue.type="catalogue",delete Qn.gameSystem):(Qn.gameSystem=Zn,Qn.gameSystem.type="gameSystem",delete Qn.catalogue);const er=Xn?getDataObject(Qn):Qn;return JSON.stringify(er,(nr,rr)=>{if(!(Array.isArray(rr)&&rr.length===0)&&(rr===Zn||goodJsonKeys.has(nr)||isFinite(Number(nr))))return isObject(rr)?splitExactlyConstraints(splitExactlyConstraintsModifiers(rr)):rr},2)}function entryToJson(Jn,Xn){return JSON.stringify(Jn,function(Zn,er){if(!(Array.isArray(er)&&er.length===0)&&(goodJsonKeys.has(Zn)||isFinite(Number(Zn))||Xn!=null&&Xn.has(Zn)))return er})}function entriesToJson(Jn,Xn,Qn){const Zn=(Qn==null?void 0:Qn.forceArray)===!1;return Jn=Array.isArray(Jn)&&(Jn==null?void 0:Jn.length)===1&&Zn?Jn[0]:Jn,JSON.stringify(Jn,function(tr,nr){if(goodJsonKeys.has(tr)||isFinite(Number(tr))||Xn!=null&&Xn.has(tr))return nr},(Qn==null?void 0:Qn.formatted)===!0?2:void 0)}function forEachObjectWhitelist2(Jn,Xn,Qn=arrayKeys){for(const Zn in Jn)if(Qn.has(Zn)){const er=Jn[Zn];if(Array.isArray(er)&&er.length&&isObject(er[0]))for(let tr=0;tr<er.length;tr++){const nr=er[tr];Xn(nr,Jn),forEachObjectWhitelist2(nr,Xn,Qn)}}}function readable_affects_query(Jn,Xn){const Qn=[];return Jn.self&&(Jn.entries||Jn.forces)&&Qn.push("self"),Jn.entries&&Qn.push("entries"),Jn.forces&&Qn.push("forces"),Jn.recursive&&Qn.push("recursive"),Jn.filterBy&&Jn.filterBy!=="any"&&Qn.push(Xn(Jn.filterBy)),Jn.affectsWhat&&Jn.affectsWhat!=="entries"&&Qn.push(Xn(Jn.affectsWhat)),Qn.join(".")}function construct_affects_query(Jn){const Xn=[];return Jn.self&&(Jn.entries||Jn.forces)&&Xn.push("self"),Jn.entries&&Xn.push("entries"),Jn.forces&&Xn.push("forces"),Jn.recursive&&Xn.push("recursive"),Jn.filterBy&&Jn.filterBy!=="any"&&Xn.push(Jn.filterBy),Jn.affectsWhat&&Jn.affectsWhat!=="entries"&&Xn.push(Jn.affectsWhat),Xn.join(".")}function deconstruct_affects_query(Jn){const Xn=["profiles","constraints","costs","rules","categories"],Qn=[],Zn={self:!1,entries:!1,forces:!1,recursive:!1},er=(Jn||"").split(".");let tr="entries";for(let nr=0;nr<er.length;nr++){const rr=er[nr];if(Xn.includes(rr)){tr=er.slice(nr).join(".");break}if(rr in Zn){Zn[rr]=!0;continue}Qn.push(rr)}return!Zn.entries&&!Zn.forces&&(Zn.self=!0),{...Zn,filterBy:Qn.length?Qn.join("."):"any",affectsWhat:tr}}class InfoIndex{constructor(){Sr(this,"index",{})}words(Xn){const Qn=`${Xn}`;return Qn.trim().match(/(\w+|\s|\W)/g)??[Qn]}clean(Xn){return Xn.match(/[a-z]/)?Xn.toLowerCase():Xn}add(Xn,Qn){typeof Xn!="string"||!Xn.match(/(?=.*[a-zA-Z0-9].*[a-zA-Z0-9])/)||this.addToIndex(this.index,Qn,this.words(Xn))}addToIndex(Xn,Qn,Zn,er=0){if(er<Zn.length){const tr=this.clean(Zn[er]);tr!==" "?(Xn[tr]||(Xn[tr]={}),this.addToIndex(Xn[tr],Qn,Zn,er+1)):this.addToIndex(Xn,Qn,Zn,er+1)}else Xn.$||(Xn.$=[]),Xn.$.push(Qn)}match(Xn){if(typeof Xn!="string"||!Xn.match(/(?=.*[a-zA-Z0-9].*[a-zA-Z0-9])/))return[{text:Xn}];const Qn=this.words(Xn),Zn=Qn.map(this.clean,this),er=[];let tr=[];for(let nr=0;nr<Zn.length;nr++){let rr=this.index,sr=0,or;if(isMultilineCodeBlockStart(Zn,nr)){let ir=findMultilineCodeBlockEnd(nr,Zn);ir!==-1&&(tr.push(Qn.slice(nr,ir).join("")),nr=ir-1);continue}else if(isCodeBlockStart(Zn,nr)){let ir=findCodeBlockEnd(nr,Zn);ir!==-1&&(tr.push(Qn.slice(nr,ir).join("")),nr=ir-1);continue}if(Zn[nr]!==" ")for(let ir=nr;ir<Zn.length;ir++){const ar=Zn[ir];if(ar!==" ")if(rr=rr[ar],rr)rr.$&&(sr=1+(ir-nr),or=rr.$);else break}sr?(tr.length&&(er.push({text:tr.join("")}),tr=[]),er.push({match:or,text:Qn.slice(nr,nr+sr).join("")}),nr+=sr-1):tr.push(Qn[nr])}return tr.length&&er.push({text:tr.join("")}),er}}function findMultilineCodeBlockEnd(Jn,Xn){let Qn=-1;for(let Zn=Jn+3;Zn<Xn.length;Zn++)Xn[Jn]==="`"&&Xn[Jn+1]==="`"&&Xn[Jn+2]==="`"&&(Qn=Zn+3);return Qn}function findCodeBlockEnd(Jn,Xn){let Qn=-1;for(let Zn=Jn+1;Zn<Xn.length;Zn++)(Xn[Jn]==="`"||Xn[Jn]==`
`)&&(Qn=Zn+1);return Qn}function isCodeBlockStart(Jn,Xn){return Jn[Xn]==="`"}function isMultilineCodeBlockStart(Jn,Xn){return Jn[Xn]==="`"&&Jn[Xn+1]==="`"&&Jn[Xn+2]==="`"}const validScopes=new Set(["force","roster","self","parent","ancestor","primary-category","force","roster","primary-catalogue","root-entry","unit","model","upgrade","model-or-unit"]),validChildIds=new Set(["any","unit","model","upgrade","mount","crew"]);function isScopeValid(Jn,Xn){if(validScopes.has(Xn))return!0;const Zn=Jn.catalogue.findOptionById(Xn);if(Zn&&(Zn.isForce()&&!Jn.isForce()||Zn.isCategory()||Zn.isCatalogue()))return!0;const er=[Jn];for(;er.length;){const tr=er.pop();if(tr.id===Xn)return!0;tr.parent&&er.push(tr.parent),tr.refs&&er.push(...tr.refs)}return!1}function getModifierOrConditionParent(Jn){return findSelfOrParentWhere(Jn,Qn=>!(Qn instanceof Modifier||Qn instanceof Condition||Qn instanceof ModifierGroup||Qn instanceof ConditionGroup))}function getModifiedField(Jn,Xn){if(!Jn||!Xn)return;const Qn=Jn.getCatalogue();if(Jn.parent){const er=getModifierOrConditionParent(Jn);if(er){for(const tr of er.constraintsIterator())if(tr.id===Xn)return tr}}return Qn==null?void 0:Qn.findOptionById(Xn)}function fieldToText(Jn,Xn){if(Xn===void 0)return"";if(Jn){if(`${Xn}`.startsWith("limit::"))return`limit::${fieldToText(Jn,removePrefix$3(`${Xn}`,"limit::"))}`;const Qn=Jn.catalogue||Jn,Zn=getModifiedField(Jn,Xn);if(Zn){const tr=Zn.type;if(tr&&["min","max","exactly"].includes(tr))return constraintToText(Jn,Zn);if(Zn.name)return Zn.isCategory&&Zn.isCategory()?`${Zn.name}`:Zn.url?`${Zn.name}`:Zn.name}const er=Qn.manager;if(er){const tr=Qn.manager.findOptionById(Xn)||er.getCatalogueInfo({targetId:Xn});return(tr==null?void 0:tr.name)||Xn}}return Xn}function conditionToString(Jn,Xn,Qn=!1,Zn=fieldToText){const er=Xn.type||"none",tr=Xn.value===void 0?1:Xn.percentValue?`${Xn.value}%`:Xn.value,nr=Zn(Jn,Xn.field),rr=["selections","forces"].includes(nr)?` ${nr}`:` ${Zn(Jn,nr)}`,sr=Zn(Jn,Xn.childId||"")+(Qn?`(${Xn.childId||"any"})`:""),or=sr&&rr?"of ":"",ir=Zn(Jn,Xn.scope),ar=ir===(Jn==null?void 0:Jn.getName())?"":`${ir}`,lr=Xn.includeChildSelections?" (recursive)":"",cr=ar?` in ${ar}${lr}`:"";switch(er){case"instanceOf":return`${ar} is ${sr}`;case"notInstanceOf":return`${ar} is not ${sr}`;case"atLeast":return`${tr}+${rr} ${or}${sr}${cr}`;case"greaterThan":return`${Number(tr)+1}+${rr} ${or}${sr}${cr}`;case"atMost":return`${tr}${tr===0?"":"-"}${rr} ${or}${sr}${cr}`;case"lessThan":return`${Number(tr)-1}${Number(tr)-1===0?"":"-"}${rr} ${or}${sr}${cr}`;case"equalTo":return`${tr}${rr} ${or}${sr}${cr}`;case"notEqualTo":return`not ${tr}${rr} ${or}${sr}${cr}`;case"none":return`${rr} ${or}${sr}${cr}`;default:return`${er} ${tr}${rr} ${or}${sr}${cr}`}}function constraintToText(Jn,Xn,Qn=fieldToText){if(!has(Jn.constraintsIterator(),Xn))return Xn.id;const Zn=Xn.field==="selections"?"":` ${Qn(Jn,Xn.field)}`,er=Xn.scope==="parent"?"":`(${Qn(Jn,Xn.scope)})`,tr=Xn.childId?` ${Qn(Jn,Xn.childId)}`:"";return`${Xn.type}${Zn}${tr}${er}`}function modifierToString(Jn,Xn,Qn=fieldToText){var tr,nr;const Zn=[];Xn.scope&&Zn.push(Xn.scope),Xn.affects&&Zn.push(readable_affects_query(deconstruct_affects_query(Xn.affects),rr=>Qn(Jn,rr)));const er=Zn.length?` in ${Zn.join(".")}`:"";return Xn.type==="replace"?`${Xn.type} ${Qn(Jn,Xn.field)} ${Xn.arg} with ${Qn(Jn,(tr=Xn.value)==null?void 0:tr.toString())}${er}`:`${Xn.type} ${Qn(Jn,Xn.field)} ${Qn(Jn,(nr=Xn.value)==null?void 0:nr.toString())}${er}`}typeof $toRaw>"u"&&(globalThis.$toRaw=function(Jn){return Jn});class CatalogueLink extends Base{constructor(){super(...arguments);Sr(this,"targetId");Sr(this,"importRootEntries")}isLink(){return!1}}class Publication extends Base{constructor(){super(...arguments);Sr(this,"shortName");Sr(this,"publisher");Sr(this,"publicationDate");Sr(this,"publisherUrl")}}class Catalogue extends Base{constructor(){super(...arguments);Sr(this,"library");Sr(this,"revision");Sr(this,"gameSystemId");Sr(this,"gameSystemRevision");Sr(this,"authorContact");Sr(this,"authorName");Sr(this,"authorUrl");Sr(this,"battleScribeVersion");Sr(this,"costTypes");Sr(this,"catalogueLinks");Sr(this,"gameSystem");Sr(this,"initialized");Sr(this,"loaded_wiki");Sr(this,"loaded_editor");Sr(this,"imports");Sr(this,"importsWithEntries");Sr(this,"index");Sr(this,"infoIndex");Sr(this,"unresolvedLinks",{});Sr(this,"forces");Sr(this,"categories");Sr(this,"units");Sr(this,"roster_constraints");Sr(this,"manager");Sr(this,"book");Sr(this,"short");Sr(this,"version");Sr(this,"nrversion");Sr(this,"lastUpdated");Sr(this,"costIndex");Sr(this,"fullFilePath");Sr(this,"errors")}reset(){delete this.initialized,delete this.loaded,delete this.loaded_editor,delete this.loaded_wiki;for(const Qn of this.imports||[])delete Qn.initialized,delete Qn.loaded,delete Qn.loaded_editor,delete Qn.loaded_wiki}init(Qn=!0){this.initialized||(this.initialized=!0,this.generateImports(Qn),this.resolveAllLinks(Qn),this.generateCostIndex(),this.indexInfo())}process(){if(this.loaded)return;this.loaded=!0,this.init();const Qn=this.generateUnits(),Zn=this.generateCategories(Qn);this.categories=Object.values(Zn),this.generateForces(Zn,this.forcesIterator()),this.generateExtraConstraints()}processForWiki(Qn){if(this.loaded_wiki)return;this.loaded_wiki=!0,this.process();const Zn=Qn.rules||{};Qn.rules=Zn,this.imports.forEach(tr=>{addObjUnique(tr,"refs",this)});function er(tr,nr){tr.id&&(tr.parent=nr,tr.target&&addObjUnique(tr.target,"refs",nr),tr instanceof Rule&&(Zn[tr.id]=tr))}forEachObjectWhitelist2(this,er,arrayKeys);for(const tr of this.forces||[]){tr.parent=this;for(const nr of tr.categories)nr.parent=tr}}processForEditor(){this.loaded_editor||(this.loaded_editor=!0,this.init(!1),this.gameSystem&&addObjUnique(this.gameSystem,"refs",this),forEachObjectWhitelist2(this,(Qn,Zn)=>{if(Qn.parent=Zn,Qn.catalogue=this,Qn.refs||(Qn.refs=[]),Qn.other_refs||(Qn.other_refs=[]),Qn.target&&addObjUnique(Qn.target,"refs",Qn),Qn.isProfile()&&!Qn.isLink()){const tr=this.findOptionById(Qn.typeId);tr&&addObjUnique(tr,"refs",Qn)}const er=Qn.value;if(er){const tr=this.findOptionById(er);tr&&addObjUnique(tr,"other_refs",Qn)}},arrayKeys),forEachObjectWhitelist2(this,Qn=>Qn.isLink()?this.updateLink(Qn):this.refreshErrors(Qn),arrayKeys))}get url(){return"%{book}"}isCatalogue(){return!0}isGameSystem(){return this.gameSystemId===this.id||!this.gameSystemId}isIdUnique(){return!0}getCatalogue(){return this}getGameSystem(){return this.isGameSystem()?this:this.gameSystem}getSystemId(){return this.isGameSystem()?this.id:this.gameSystemId}addError(Qn,Zn){this.removeError(Qn,Zn.id),Qn.errors||(Qn.errors=[]),this.errors||(this.errors=[]),Qn.errors.push(Zn),this.errors.push(Zn)}onRemoveError(Qn,Zn=!0){var er,tr;if(this.errors){const nr=this.errors.indexOf(Qn);nr>=0&&this.errors.splice(nr,1)}if(Qn.other&&Zn){const nr=Qn.other;(er=nr.getCatalogue())==null||er.removeError(nr,"duplicate-id-1",!1),(tr=nr.getCatalogue())==null||tr.removeError(nr,"duplicate-id-2",!1)}}removeErrors(Qn){var Zn;(Zn=Qn.errors)==null||Zn.forEach(er=>this.onRemoveError(er)),Qn instanceof Constraint&&Qn.catalogue.updateConstraint(Qn,!0),delete Qn.errors}removeError(Qn,Zn,er=!0){var tr;(tr=Qn.errors)!=null&&tr.length&&(Qn.errors=Qn.errors.filter(nr=>(nr.id===Zn&&this.onRemoveError(nr,er),nr.id!==Zn)))}*iterateCategoryEntries(){for(const Qn of this.imports)for(const Zn of Qn.categoryEntries||[])yield Zn;this.categoryEntries&&(yield*this.categoryEntries)}*iterateCostTypes(){for(const Qn of this.imports)for(const Zn of Qn.costTypes||[])yield Zn;this.costTypes&&(yield*this.costTypes)}*forceEntriesIterator(){for(const Qn of this.imports)Qn.forceEntries&&(yield*Qn.forceEntries),Qn.forceEntryLinks&&(yield*Qn.forceEntryLinks),Qn.sharedForceEntries&&(yield*Qn.sharedForceEntries);this.forceEntries&&(yield*this.forceEntries),this.forceEntryLinks&&(yield*this.forceEntryLinks),this.sharedForceEntries&&(yield*this.sharedForceEntries)}*forcesIterator(){for(const Qn of this.imports)Qn.forceEntries&&(yield*Qn.forceEntries),Qn.forceEntryLinks&&(yield*Qn.forceEntryLinks);this.forceEntries&&(yield*this.forceEntries),this.forceEntryLinks&&(yield*this.forceEntryLinks)}*forcesIteratorRecursive(){for(const Qn of this.imports)for(const Zn of Qn.forceEntries||[])yield Zn,yield*Zn.forcesIteratorRecursive();if(this.forceEntries)for(const Qn of this.forceEntries)yield Qn,yield*Qn.forcesIteratorRecursive();if(this.sharedForceEntries)for(const Qn of this.sharedForceEntries)yield Qn,yield*Qn.forcesIteratorRecursive()}*iterateProfileTypes(){for(const Qn of this.imports)Qn.profileTypes&&(yield*Qn.profileTypes);this.profileTypes&&(yield*this.profileTypes)}*iteratePublications(){for(const Qn of this.imports)for(const Zn of Qn.publications||[])yield Zn;for(const Qn of this.publications||[])yield Qn}*iterateSelectionEntries(){for(const Qn of this.importsWithEntries){for(const Zn of Qn.sharedSelectionEntries||[])yield Zn;for(const Zn of Qn.sharedSelectionEntryGroups||[])yield Zn}this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups)}*iterateAllImported(){const Qn=["sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","categoryEntries"],Zn=["rules","entryLinks","profiles","infoGroups","selectionEntries","selectionEntryGroups"];for(const er of this.importsWithEntries)for(const tr of Zn)for(const nr of er[tr]||[])nr.import!==!1&&(yield nr);for(const er of this.imports)for(const tr of Qn)for(const nr of er[tr]||[])yield nr;for(const er of Zn)for(const tr of this[er]||[])yield tr;for(const er of Qn)for(const tr of this[er]||[])yield tr}*iterateSelectionEntriesWithRoot(){for(const Qn of this.importsWithEntries){for(const Zn of Qn.selectionEntries||[])Zn.import!==!1&&(yield Zn);for(const Zn of Qn.entryLinks||[])Zn.import!==!1&&(yield Zn);for(const Zn of Qn.sharedSelectionEntries||[])yield Zn;for(const Zn of Qn.sharedSelectionEntryGroups||[])yield Zn}this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups)}*iterateAllRootEntries(){for(const Qn of this.importsWithEntries){for(const Zn of Qn.selectionEntries||[])Zn.import!==!1&&(yield Zn);for(const Zn of Qn.entryLinks||[])Zn.import!==!1&&(yield Zn)}this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks)}*entriesIterator(){this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.selectionEntries&&(yield*this.selectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}forEachNode(Qn){if(Qn(this),this.childs)for(const Zn of this.childs)Zn.forEachNode(Qn)}*selectionsIterator(){yield*this.forces}findOptionById(Qn){var tr;const Zn=this.index[Qn];if(Zn)return Zn;const er=(tr=this.imports.find(nr=>Qn in nr.index))==null?void 0:tr.index[Qn];if(er)return er;if(this.manager&&Qn)return this.manager.getLoadedCatalogue(Qn)??this.manager.getCatalogueInfo({targetId:Qn})}findOptionByIdGlobal(Qn){var tr;const Zn=this.index[Qn];if(Zn)return Zn;const er=(tr=this.imports.find(nr=>Qn in nr.index))==null?void 0:tr.index[Qn];if(er)return er;if(this.manager){const nr=this.manager.findOptionById(Qn);return nr||this.manager.getCatalogueInfo({targetId:Qn})}}findOptionsById(Qn){const Zn=[];for(const er of[this,...this.imports])for(const tr of Object.values(er.index))tr.id&&tr.id===Qn&&Zn.push(tr);return Zn}findOptionsByText(Qn,Zn=!1){var nr,rr,sr;if(!Qn||!Qn.trim()||Zn){const or=[];for(const ir of[this,...this.imports])for(const ar of Object.values(ir.index))if(ar.getName){if(ar.isLink()&&ar.target&&ar.isCategory()&&!((nr=ar.parent)!=null&&nr.isForce()))continue;Zn?ar.getName()===Qn&&or.push(ar):or.push(ar)}return or}const er=[],tr=textSearchRegex(Qn);for(const or of[this,...this.imports])for(const ir of Object.values(or.index)){if(ir.isLink()&&ir.target&&ir.isCategory()&&!((rr=ir.parent)!=null&&rr.isForce()))continue;const ar=(sr=ir.getName)==null?void 0:sr.call(ir),lr=ir.comment,cr=ir.id;(ar&&String(ar).match(tr)||lr&&String(lr).match(tr)||cr===Qn)&&er.push(ir)}return er}findForceByPath(Qn){var er;if(!Qn.length)return;let Zn=this;for(const tr of Qn)Zn=(er=Zn==null?void 0:Zn.forces)==null?void 0:er.find(nr=>getIds(nr).includes(tr));return Zn}generateNonConflictingId(Qn){if(Qn&&this.findOptionByIdGlobal(Qn)===void 0)return Qn;for(;;){const Zn=generateBattlescribeId();if(this.findOptionById(Zn)===void 0)return Zn}}generateCostIndex(){const Qn={};for(const Zn of this.imports)for(const er of Zn.costTypes||[])Qn[er.id]=er,this.index[er.id]=er;for(const Zn of this.costTypes||[])Qn[Zn.id]=Zn,this.index[Zn.id]=Zn;return this.costIndex=Qn,Qn}getSystem(){return this.gameSystem??this}indexInfo(){const Qn=this.gameSystem??this;Qn===this&&(Qn.infoIndex=new InfoIndex);const Zn=Qn.infoIndex;if(!Zn)throw new Error("Couldn't index info: system isn't initialized");this.forEachObjectWhitelist((er,tr)=>{if(!er.isLink()&&(er.isProfile()||er.isRule()||er.isCategory())&&(er.noindex||Zn.add(er.getName(),er),er.alias))for(const nr of er.alias){const rr=clone(er);rr.name=nr,Zn.add(nr,rr)}})}markLazyNodes(Qn){function Zn(tr){let nr=!1,rr=new Set;for(const sr of tr.constraintsIterator())if(sr.scope!=="roster"&&sr.scope!=="force"&&(sr.type==="min"||sr.type==="exactly")){if(sr.value>0)return!0;rr.add(sr.id),nr=!0}if(nr){for(const sr of tr.modifierGroupsIteratorRecursive())for(const or of sr.modifiers||[])if(rr.has(or.field)&&(or.type==="increment"||or.type==="set"&&Number(or.value)>0))return!0}return!1}function er(tr,nr=0){if(tr.lazy!==void 0)return tr.lazy;let rr=0,sr=0;for(const or of tr.entriesIterator())er(or,nr+1)&&sr++,rr++;return tr.isGroup()?rr===sr&&!Zn(tr)?tr.lazy=!0:tr.lazy=!1:tr.isEntry()&&(Zn(tr)?tr.lazy=!1:tr.lazy=!0),tr.lazy===!0}er(Qn)}generateImports(Qn=!0){const Zn={},er={};this.gameSystem&&(this.gameSystem.init(Qn),Zn[this.gameSystem.id]=this.gameSystem,er[this.gameSystem.id]=this.gameSystem,this.gameSystem.import||(this.gameSystem.imports=[]));for(const tr of this.catalogueLinks||[]){const nr=tr.target;if(nr){nr.init(Qn);for(const rr of nr.imports)er[rr.id]=rr;for(const rr of nr.importsWithEntries)Zn[rr.id]=rr;tr.importRootEntries&&(Zn[nr.id]=nr),er[nr.id]=nr}}return this.imports=Object.values(er),this.importsWithEntries=Object.values(Zn),this.imports}generateForces(Qn,Zn,er){var nr,rr;er||(er=this);const tr=[];for(const sr of Zn){const or=clone(sr);or.main_catalogue=this;const ir=[],ar=new Set;if((rr=(nr=Qn[UNCATEGORIZED_ID])==null?void 0:nr.units)!=null&&rr.length){ir.push(Qn[UNCATEGORIZED_ID]);for(const cr of Qn[UNCATEGORIZED_ID].childs)ar.add(cr.id)}for(const cr of sr.categoryLinksIterator())if(cr.targetId in Qn){const dr=clone(cr);dr.main_catalogue=this;const hr=Qn[dr.targetId];dr.target=hr,dr.childs=hr.childs;for(const pr of dr.childs)ar.add(pr.id);ir.push(dr)}for(const cr of sr.categoryEntries||[])if(cr.id in Qn){const dr=Qn[cr.id],hr=clone(dr);hr.main_catalogue=this;for(const pr of hr.childs)ar.add(pr.id);ir.push(hr)}const lr=this.units.filter(cr=>!ar.has(cr.id));if(lr.length){const cr=clone(Qn[ILLEGAL_ID]);cr.childs=lr,cr.units=lr,ir.push(cr)}or.childs=ir,or.categories=ir,this.index[or.id]=or,this.generateForces(Qn,or.forcesIterator(),or),tr.push(or)}return sortByAscendingInplace(tr,sr=>sr.sortIndex??1e3),er.forces=tr,er.childs=tr,tr}generateCategories(Qn){const Zn={},er=new Set;for(const sr of this.iterateCategoryEntries()){const or=clone(sr);or.main_catalogue=this;const ir=Qn[or.id]||[];or.units=ir,or.childs=ir,this.index[sr.id]=sr,Zn[or.id]=or,er.add(or.id)}for(const sr in Qn)if(!er.has(sr)){const or=this.findOptionById(sr);if(or){const ir=clone(or);ir.main_catalogue=this;const ar=Qn[ir.id]||[];ir.units=ar,ir.childs=ar,this.index[or.id]=or,Zn[ir.id]=ir}}const tr=Qn[UNCATEGORIZED_ID]||[],nr={name:"Uncategorized",id:UNCATEGORIZED_ID,hidden:!1,units:tr,childs:tr,catalogue:this};Zn[UNCATEGORIZED_ID]=Object.setPrototypeOf(nr,Category.prototype);const rr={name:"Illegal Units",id:ILLEGAL_ID,hidden:!0,units:[],childs:[],catalogue:this};return Zn[ILLEGAL_ID]=Object.setPrototypeOf(rr,Category.prototype),Zn}generateUnits(){return this.units=sortByAscendingInplace([...this.iterateAllRootEntries()],Qn=>Qn.getName()),groupBy(this.units,Qn=>Qn.getPrimaryCategory())}generateExtraConstraints(){const Qn={},Zn=[],er={},tr=new Set,nr={};function rr(or,ir,ar){const lr=ir.target||ir;for(const cr of ar){if(cr.type==="max")continue;const dr=`${cr.id}::${ir.id}`;switch(cr.scope){case"parent":break;case"roster":Qn[dr]=ir.getBoundConstraint(cr);break;case"force":cr.field!=="forces"&&Zn.push(ir.getBoundConstraint(cr));break;case"primary-category":case"primary-catalogue":break;default:if(tr.has(cr.scope)){addObj(er,cr.scope,lr.getBoundConstraint(cr));break}const hr=or.index[cr.scope];if(hr){const pr=hr.extra_constraints||[];pr.push(ir.getBoundConstraint(cr)),hr.extra_constraints=pr;break}break}}}const sr=[...this.forces];for(const or of sr)or.forces&&sr.push(...or.forces),rr(this,or,or.constraintsIterator()),tr.add(or.id);for(const or of this.categories)tr.add(or.id);for(const or of this.categories){rr(this,or,or.constraintsIterator());const ir={};or.forEachNodeCb(ar=>{var lr;if(ar&&!ar.isForce()&&(!ar.isGroup()&&!ar.extra_constraints&&(ar.extra_constraints=ar.getChildBoundConstraints(!0)),!(ar.isCategory()&&ar.isLink())&&!(!ar.constraints&&!((lr=ar.target)!=null&&lr.constraints)))){for(const cr of ar.constraintsIterator())if(cr.type==="min"||cr.type==="exactly"){const dr=`${cr.id}::${ar.id}`;switch(cr.scope){case"parent":break;case"roster":Qn[dr]=ar.getBoundConstraint(cr);break;case"force":ir[dr]=ar.getBoundConstraint(cr);break;case"primary-category":case"primary-catalogue":break;default:if(tr.has(cr.scope)){addObj(er,cr.scope,ar.getBoundConstraint(cr));break}const hr=this.index[cr.scope];if(hr){const pr=hr.extra_constraints||[];pr.push(ar.getBoundConstraint(cr)),hr.extra_constraints=pr;break}break}}}}),nr[or.getId()]=Object.values(ir)}for(const or of sr){const ir=or.extra_constraints||[];ir.push(...Zn),or.id in er&&ir.push(...er[or.id]),or.isLink()&&or.targetId in er&&ir.push(...er[or.targetId]);for(const ar of or.categories)ar.getId()in nr&&ir.push(...nr[ar.getId()]);for(const ar of or.forcesIterator())for(const lr of ar.constraintsIterator())if(lr.type==="min"||lr.type==="exactly")["parent","force",...getIds(or)].includes(lr.scope)&&ir.push(ar.getBoundConstraint(lr));else if(["roster"].includes(lr.scope)){const cr=`${lr.id}::${ar.id}`;Qn[cr]=ar.getBoundConstraint(lr)}ir.length&&(or.extra_constraints=ir)}for(const or of this.categories){const ir=or.extra_constraints||[];or.id in er&&ir.push(...er[or.id]),ir.length&&(or.extra_constraints=ir)}this.roster_constraints=Object.values(Qn)}async reload(Qn=this.manager){var nr;delete this.initialized,delete this.loaded,delete this.loaded_editor;const Zn=this.refs;delete this.index;const er=this.isGameSystem()?"gameSystem":"catalogue",tr=await Qn.loadData({[er]:this});if(this.processForEditor(),Zn)for(const rr of Zn)rr.editorTypeName==="catalogueLink"&&await((nr=rr.catalogue)==null?void 0:nr.reload(Qn));return tr}refreshErrors(Qn,Zn=!1){var er,tr,nr,rr,sr;if(this.removeErrors(Qn),(er=Qn.comment)!=null&&er.startsWith("todo:")?this.addError(Qn,{source:Qn,severity:"info",msg:`${Qn.getName()}: ${Qn.comment}`,id:"comment"}):(tr=Qn.comment)!=null&&tr.startsWith("warning:")?this.addError(Qn,{source:Qn,severity:"warning",msg:`${Qn.getName()}: ${Qn.comment}`,id:"comment"}):(nr=Qn.comment)!=null&&nr.startsWith("error:")?this.addError(Qn,{source:Qn,severity:"error",msg:`${Qn.getName()}: ${Qn.comment}`,id:"comment"}):this.removeError(Qn,"comment"),Qn.isLink()){Qn.target?(popObj(this.unresolvedLinks,Qn.targetId,$toRaw(Qn)),popObj(this.manager.unresolvedLinks,Qn.targetId,$toRaw(Qn))):(this.addError(Qn,{source:Qn,severity:"error",msg:`(${Qn.editorTypeName}) ${Qn.name} has no target`,id:"no-target"}),!((rr=this.unresolvedLinks[Qn.targetId])!=null&&rr.includes($toRaw(Qn)))&&!Zn&&addObj(this.unresolvedLinks,Qn.targetId,$toRaw(Qn)),(sr=this.manager.unresolvedLinks[Qn.targetId])!=null&&sr.includes($toRaw(Qn))||addObj(this.manager.unresolvedLinks,Qn.targetId,$toRaw(Qn)));const or=resolveLink(Qn.targetId,this.getIndexes());if(getAllPossibleParents(Qn).find(ar=>ar.id===Qn.targetId))Qn.catalogue.addError(Qn,{id:"bad-link-target",msg:"Link target cannot be itself or include itself as a child",source:Qn});else if(or!=null&&or.isLink()){Qn.catalogue.addError(Qn,{id:"bad-link-target",msg:"Link target Cannot be a Link",source:Qn});return}}else Qn.isProfile()?Qn.typeId||this.addError(Qn,{source:Qn,severity:"error",msg:"Profile has no type",id:"no-profile-type"}):Qn instanceof Condition&&this.updateCondition(Qn)}addToIndex(Qn){var Zn,er,tr,nr,rr,sr;if(Qn.id){if(Qn.catalogue=this,(er=(Zn=this.manager)==null?void 0:Zn.settings)!=null&&er.globalDuplicateIdError){const or=this.manager.index;if(or[Qn.id]&&or[Qn.id]!==Qn&&(Qn.isIdUnique()||or[Qn.id].isIdUnique())){const ir=or[Qn.id],ar=ir.getCatalogue();ar&&this!==ar&&(ar.addError(ir,{source:ir,severity:"error",msg:`Duplicate id ${Qn.id} ${Qn.getName()}`,id:"duplicate-id-1",other:Qn,extra:ar.name}),ar.addError(Qn,{source:Qn,severity:"error",msg:`Duplicate id ${Qn.id} ${ir.getName()}`,id:"duplicate-id-2",other:ir,extra:this.name}),this.addError(ir,{source:ir,severity:"error",msg:`Duplicate id ${Qn.id}  ${Qn.getName()}`,id:"duplicate-id-1",other:Qn,extra:ar.name}),this.addError(Qn,{source:Qn,severity:"error",msg:`Duplicate id ${Qn.id} ${ir.getName()}`,id:"duplicate-id-2",other:ir,extra:this.name}))}or[Qn.id]=Qn}else if(this.index[Qn.id]&&this.index[Qn.id]!==Qn){const or=this.index[Qn.id];(Qn.isIdUnique()||or.isIdUnique()||Qn.getName()!==or.getName())&&(this.addError(or,{source:or,severity:"error",msg:`Duplicate id ${Qn.id} ${Qn.getName()}`,id:"duplicate-id-1",other:Qn}),this.addError(Qn,{source:Qn,severity:"error",msg:`Duplicate id ${Qn.id} ${or.getName()}`,id:"duplicate-id-2",other:or}))}if(this.index[Qn.id]=Qn,this.unresolvedLinks&&this.unresolvedLinks[Qn.id])for(const or of[...this.unresolvedLinks[Qn.id]])or.isLink()&&or.catalogue?this.updateLink(or):this.refreshErrors(or);if((tr=this.manager)!=null&&tr.unresolvedLinks&&((nr=this.manager.unresolvedLinks[Qn.id])!=null&&nr.length))for(const or of[...this.manager.unresolvedLinks[Qn.id]])or.isLink()?(rr=or.catalogue)==null||rr.updateLink(or):(sr=or.catalogue)==null||sr.refreshErrors(or)}}removeFromIndex(Qn){var Zn;Qn.id&&$toRaw(this.index[Qn.id])===$toRaw(Qn)&&delete this.index[Qn.id],this.removeErrors(Qn);for(const er of Qn.refs||[])delete er.target,er.catalogue.refreshErrors(er);for(const er of Qn.other_refs||[])(Zn=er.catalogue)==null||Zn.refreshErrors(er,!0)}getIndexes(){const Qn=[];Qn.push(this.index);for(const Zn of this.imports)Qn.push(Zn.index);return Qn}resolveAllLinks(Qn=!0){const Zn=[],er=[],tr=[];this.index=noObserve$1(),forEachObjectWhitelist2(this,(sr,or)=>{this.addToIndex(sr),sr.publicationId&&(delete sr.publication,er.push(sr)),sr.isLink()&&(delete sr.target,Zn.push(sr),tr.push(or)),hasSharedChildId(sr)},arrayKeys);const nr=this.getIndexes(),rr=resolveLinks(Zn,nr,tr,Qn);if(resolvePublications(er,nr),!Qn){this.unresolvedLinks={};for(const sr of rr)addObj(this.unresolvedLinks,sr.targetId,$toRaw(sr)),delete sr.target}}removeRef(Qn,Zn){Zn.refs||(Zn.refs=[]);const er=Zn.refs.indexOf(Qn);er>=0&&Zn.refs.splice(er,1)}addRef(Qn,Zn){Zn.refs||(Zn.refs=[]),Zn.refs.indexOf(Qn)===-1&&Zn.refs.push(Qn)}hasOtherRef(Qn,Zn){return Zn.other_refs&&Zn.other_refs.includes(Qn)}removeOtherRef(Qn,Zn){Zn.other_refs||(Zn.other_refs=[]);const er=Zn.other_refs.indexOf(Qn);er>=0&&Zn.other_refs.splice(er,1)}addOtherRef(Qn,Zn){Zn.other_refs||(Zn.other_refs=[]),Zn.other_refs.indexOf(Qn)===-1&&Zn.other_refs.push(Qn)}updateLink(Qn){Qn.target&&this.removeRef(Qn,Qn.target);const Zn=resolveLink(Qn.targetId,this.getIndexes());if(Qn.target=Zn,Qn.target){Qn.name=Zn.name,this.addRef(Qn,Qn.target);const er=Qn.target.editorTypeName;er=="categoryEntry"?delete Qn.type:Qn.type=er}return this.refreshErrors(Qn),Qn.target!==void 0}updateConstraint(Qn,Zn=!1){var nr,rr,sr,or;const er=new Set,tr=new Set;for(const ir of((nr=Qn.parent)==null?void 0:nr.constraintsIterator())||[])Zn&&Qn===ir||(er.has(ir.id)?tr.add(ir.id):er.add(ir.id));for(const ir of((rr=Qn.parent)==null?void 0:rr.constraintsIterator())||[])Zn&&Qn===ir||(tr.has(ir.id)?(sr=ir.catalogue)==null||sr.addError(ir,{id:"duplicate-constraint-id",msg:"Duplicate constraints id",source:Qn}):(or=ir.catalogue)==null||or.removeError(ir,"duplicate-constraint-id"))}updateCondition(Qn,Zn){if(Qn.scope){const tr=getModifierOrConditionParent(Qn);if(tr&&!isScopeValid(tr,Qn.scope)?this.addError(Qn,{source:Qn,id:"invalid-scope",msg:`Invalid scope ${Qn.scope}`}):this.removeError(Qn,"invalid-scope"),Qn.scope&&!validScopes.has(Qn.scope)){const nr=this.findOptionById(Qn.scope);nr&&nr.getCatalogue().addOtherRef(Qn,nr)}}if(Qn instanceof Constraint)return this.updateConstraint(Qn);const er=["instanceOf","notInstanceOf"].includes(Qn.type);if(Zn&&!basicQueryFields.has(Zn)){const tr=er?this.findOptionByIdGlobal(Zn):this.findOptionById(Zn);tr&&this.removeOtherRef(Qn,tr)}if(Qn.childId){if(basicQueryFields.has(Qn.childId)){this.removeError(Qn,"id-not-exist");return}const tr=er?this.findOptionByIdGlobal(Qn.childId):this.findOptionById(Qn.childId);if(tr){this.hasOtherRef(Qn,tr)||this.addOtherRef(Qn,tr),this.removeError(Qn,"id-not-exist"),popObj(this.manager.unresolvedLinks,Qn.childId,$toRaw(Qn));return}}Qn.editorTypeName!=="localConditionGroup"&&this.addError(Qn,{source:Qn,severity:"warning",msg:"child id does not exist",id:"id-not-exist"}),addObjIfMissing(this.manager.unresolvedLinks,Qn.childId,$toRaw(Qn))}unlinkLink(Qn){Qn.target&&this.removeRef(Qn,Qn.target)}getForceLabel(){return this.gameSystem.getForceLabel()}getCategoriesLabel(){return this.gameSystem.getCategoriesLabel()}}class GameSystem extends Catalogue{constructor(){super(...arguments);Sr(this,"forceLabel");Sr(this,"categoriesLabel")}getForceLabel(){return this.forceLabel??"Force"}getCategoriesLabel(){return this.categoriesLabel??"Categories"}}function resolveLink(Jn,Xn){for(const Qn of Xn)if(Jn in Qn)return Qn[Jn]}function resolveLinks(Jn=[],Xn,Qn,Zn=!0){Jn.length;let er=0;for(;Jn.length!==er;){const tr=Jn,nr=Qn;er=tr.length,Jn=[],Qn=[];for(let rr=0;rr<tr.length;rr++){const sr=tr[rr],or=nr[rr],ir=sr.targetId,ar=resolveLink(ir,Xn);if(ar){ar.isLink()?console.warn(`Failed to resolve link (target is a link): ${sr.getName()}(${sr.id})`):sr.target=ar;continue}Jn.push(sr),Qn.push(or)}}if(Jn.length&&Zn)for(let tr=0;tr<Jn.length;tr++){const nr=Jn[tr],rr=Qn[tr];for(const[sr,or]of Object.entries(rr))if(or===nr&&delete rr[sr],Array.isArray(or))for(const ir in or)or[ir]===nr&&or.splice(ir,1)}return Jn}function resolvePublications(Jn=[],Xn){for(const Qn of Jn)for(const Zn of Xn)if(Qn.publicationId in Zn){Qn.publication=Zn[Qn.publicationId];break}}function hasSharedChildId(Jn){return Jn.shared!==!1&&Jn.childId!==void 0}let NoObserve$1=class{get[Symbol.toStringTag](){return"ObjectNoObserve"}};function noObserve$1(){return new NoObserve$1}function getAllPossibleParents(Jn){var nr;const Xn=[];if(Jn.isCatalogue()||!Jn.parent&&!((nr=Jn.refs)!=null&&nr.length))return Xn;let Qn=[];const Zn=[],er=[Jn.parent,...(Jn==null?void 0:Jn.refs)??[]].filter(Boolean),tr=new Set;for(;er.length;){for(Zn.push(er.shift()),Qn=[];Zn.length;){const rr=Zn.pop();tr.has(rr.id)||(tr.add(rr.id),Qn.push(rr),rr.parent&&!rr.parent.isCatalogue()&&Zn.push(rr.parent),rr.refs&&er.push(...rr.refs))}Xn.push(...Qn.reverse())}return Xn.filter(rr=>rr.editorTypeName!=="catalogueLink")}function readBlobAsArrayBuffer(Jn){return Jn.arrayBuffer?Jn.arrayBuffer():new Promise((Xn,Qn)=>{const Zn=new FileReader;Zn.addEventListener("loadend",()=>{Xn(Zn.result)}),Zn.addEventListener("error",Qn),Zn.readAsArrayBuffer(Jn)})}async function readBlobAsUint8Array(Jn){const Xn=await readBlobAsArrayBuffer(Jn);return new Uint8Array(Xn)}function isBlob(Jn){return typeof Blob<"u"&&Jn instanceof Blob}function isSharedArrayBuffer(Jn){return typeof SharedArrayBuffer<"u"&&Jn instanceof SharedArrayBuffer}const isNode=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function isTypedArraySameAsArrayBuffer(Jn){return Jn.byteOffset===0&&Jn.byteLength===Jn.buffer.byteLength}class ArrayBufferReader{constructor(Xn){this.typedArray=Xn instanceof ArrayBuffer||isSharedArrayBuffer(Xn)?new Uint8Array(Xn):new Uint8Array(Xn.buffer,Xn.byteOffset,Xn.byteLength)}async getLength(){return this.typedArray.byteLength}async read(Xn,Qn){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+Xn,Qn)}}class BlobReader{constructor(Xn){this.blob=Xn}async getLength(){return this.blob.size}async read(Xn,Qn){const Zn=this.blob.slice(Xn,Xn+Qn),er=await readBlobAsArrayBuffer(Zn);return new Uint8Array(er)}async sliceAsBlob(Xn,Qn,Zn=""){return this.blob.slice(Xn,Xn+Qn,Zn)}}function inflate(Jn,Xn){var Qn=Uint8Array;if(Jn[0]==3&&Jn[1]==0)return Xn||new Qn(0);var Zn=_bitsF,er=_bitsE,tr=_decodeTiny,nr=_get17,rr=Xn==null;rr&&(Xn=new Qn(Jn.length>>>2<<3));for(var sr=0,or=0,ir=0,ar=0,lr=0,cr=0,dr=0,hr=0,pr=0,fr,ur;sr==0;){if(sr=Zn(Jn,pr,1),or=Zn(Jn,pr+1,2),pr+=3,or==0){pr&7&&(pr+=8-(pr&7));var br=(pr>>>3)+4,gr=Jn[br-4]|Jn[br-3]<<8;rr&&(Xn=_check(Xn,hr+gr)),Xn.set(new Qn(Jn.buffer,Jn.byteOffset+br,gr),hr),pr=br+gr<<3,hr+=gr;continue}if(rr&&(Xn=_check(Xn,hr+(1<<17))),or==1&&(fr=U.flmap,ur=U.fdmap,cr=512-1,dr=32-1),or==2){ir=er(Jn,pr,5)+257,ar=er(Jn,pr+5,5)+1,lr=er(Jn,pr+10,4)+4,pr+=14;for(var mr=0;mr<38;mr+=2)U.itree[mr]=0,U.itree[mr+1]=0;for(var _r=1,mr=0;mr<lr;mr++){var wr=er(Jn,pr+mr*3,3);U.itree[(U.ordr[mr]<<1)+1]=wr,wr>_r&&(_r=wr)}pr+=3*lr,makeCodes(U.itree,_r),codes2map(U.itree,_r,U.imap),fr=U.lmap,ur=U.dmap,pr=tr(U.imap,(1<<_r)-1,ir+ar,Jn,pr,U.ttree);var yr=_copyOut(U.ttree,0,ir,U.ltree);cr=(1<<yr)-1;var Cr=_copyOut(U.ttree,ir,ar,U.dtree);dr=(1<<Cr)-1,makeCodes(U.ltree,yr),codes2map(U.ltree,yr,fr),makeCodes(U.dtree,Cr),codes2map(U.dtree,Cr,ur)}for(;;){var Pr=fr[nr(Jn,pr)&cr];pr+=Pr&15;var Tr=Pr>>>4;if(!(Tr>>>8))Xn[hr++]=Tr;else{if(Tr==256)break;var Rr=hr+Tr-254;if(Tr>264){var Or=U.ldef[Tr-257];Rr=hr+(Or>>>3)+er(Jn,pr,Or&7),pr+=Or&7}var $r=ur[nr(Jn,pr)&dr];pr+=$r&15;var Gr=$r>>>4,Hr=U.ddef[Gr],Wr=(Hr>>>4)+Zn(Jn,pr,Hr&15);for(pr+=Hr&15,rr&&(Xn=_check(Xn,hr+(1<<17)));hr<Rr;)Xn[hr]=Xn[hr++-Wr],Xn[hr]=Xn[hr++-Wr],Xn[hr]=Xn[hr++-Wr],Xn[hr]=Xn[hr++-Wr];hr=Rr}}}return Xn.length==hr?Xn:Xn.slice(0,hr)}function _check(Jn,Xn){var Qn=Jn.length;if(Xn<=Qn)return Jn;var Zn=new Uint8Array(Math.max(Qn<<1,Xn));return Zn.set(Jn,0),Zn}function _decodeTiny(Jn,Xn,Qn,Zn,er,tr){for(var nr=_bitsE,rr=_get17,sr=0;sr<Qn;){var or=Jn[rr(Zn,er)&Xn];er+=or&15;var ir=or>>>4;if(ir<=15)tr[sr]=ir,sr++;else{var ar=0,lr=0;ir==16?(lr=3+nr(Zn,er,2),er+=2,ar=tr[sr-1]):ir==17?(lr=3+nr(Zn,er,3),er+=3):ir==18&&(lr=11+nr(Zn,er,7),er+=7);for(var cr=sr+lr;sr<cr;)tr[sr]=ar,sr++}}return er}function _copyOut(Jn,Xn,Qn,Zn){for(var er=0,tr=0,nr=Zn.length>>>1;tr<Qn;){var rr=Jn[tr+Xn];Zn[tr<<1]=0,Zn[(tr<<1)+1]=rr,rr>er&&(er=rr),tr++}for(;tr<nr;)Zn[tr<<1]=0,Zn[(tr<<1)+1]=0,tr++;return er}function makeCodes(Jn,Xn){for(var Qn=Jn.length,Zn,er,tr,nr,rr,sr=U.bl_count,nr=0;nr<=Xn;nr++)sr[nr]=0;for(nr=1;nr<Qn;nr+=2)sr[Jn[nr]]++;var or=U.next_code;for(Zn=0,sr[0]=0,er=1;er<=Xn;er++)Zn=Zn+sr[er-1]<<1,or[er]=Zn;for(tr=0;tr<Qn;tr+=2)rr=Jn[tr+1],rr!=0&&(Jn[tr]=or[rr],or[rr]++)}function codes2map(Jn,Xn,Qn){for(var Zn=Jn.length,er=U.rev15,tr=0;tr<Zn;tr+=2)if(Jn[tr+1]!=0)for(var nr=tr>>1,rr=Jn[tr+1],sr=nr<<4|rr,or=Xn-rr,ir=Jn[tr]<<or,ar=ir+(1<<or);ir!=ar;){var lr=er[ir]>>>15-Xn;Qn[lr]=sr,ir++}}function revCodes(Jn,Xn){for(var Qn=U.rev15,Zn=15-Xn,er=0;er<Jn.length;er+=2){var tr=Jn[er]<<Xn-Jn[er+1];Jn[er]=Qn[tr]>>>Zn}}function _bitsE(Jn,Xn,Qn){return(Jn[Xn>>>3]|Jn[(Xn>>>3)+1]<<8)>>>(Xn&7)&(1<<Qn)-1}function _bitsF(Jn,Xn,Qn){return(Jn[Xn>>>3]|Jn[(Xn>>>3)+1]<<8|Jn[(Xn>>>3)+2]<<16)>>>(Xn&7)&(1<<Qn)-1}function _get17(Jn,Xn){return(Jn[Xn>>>3]|Jn[(Xn>>>3)+1]<<8|Jn[(Xn>>>3)+2]<<16)>>>(Xn&7)}const U=function(){var Jn=Uint16Array,Xn=Uint32Array;return{next_code:new Jn(16),bl_count:new Jn(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Jn(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new Xn(32),flmap:new Jn(512),fltree:[],fdmap:new Jn(32),fdtree:[],lmap:new Jn(32768),ltree:[],ttree:[],dmap:new Jn(32768),dtree:[],imap:new Jn(512),itree:[],rev15:new Jn(32768),lhst:new Xn(286),dhst:new Xn(30),ihst:new Xn(19),lits:new Xn(15e3),strt:new Jn(65536),prev:new Jn(32768)}}();(function(){for(var Jn=32768,Xn=0;Xn<Jn;Xn++){var Qn=Xn;Qn=(Qn&2863311530)>>>1|(Qn&1431655765)<<1,Qn=(Qn&3435973836)>>>2|(Qn&858993459)<<2,Qn=(Qn&4042322160)>>>4|(Qn&252645135)<<4,Qn=(Qn&4278255360)>>>8|(Qn&16711935)<<8,U.rev15[Xn]=(Qn>>>16|Qn<<16)>>>17}function Zn(er,tr,nr){for(;tr--!=0;)er.push(0,nr)}for(var Xn=0;Xn<32;Xn++)U.ldef[Xn]=U.of0[Xn]<<3|U.exb[Xn],U.ddef[Xn]=U.df0[Xn]<<4|U.dxb[Xn];Zn(U.fltree,144,8),Zn(U.fltree,255-143,9),Zn(U.fltree,279-255,7),Zn(U.fltree,287-279,8),makeCodes(U.fltree,9),codes2map(U.fltree,9,U.flmap),revCodes(U.fltree,9),Zn(U.fdtree,32,5),makeCodes(U.fdtree,5),codes2map(U.fdtree,5,U.fdmap),revCodes(U.fdtree,5),Zn(U.itree,19,0),Zn(U.ltree,286,0),Zn(U.dtree,30,0),Zn(U.ttree,320,0)})();const crc={table:function(){for(var Jn=new Uint32Array(256),Xn=0;Xn<256;Xn++){for(var Qn=Xn,Zn=0;Zn<8;Zn++)Qn&1?Qn=3988292384^Qn>>>1:Qn=Qn>>>1;Jn[Xn]=Qn}return Jn}(),update:function(Jn,Xn,Qn,Zn){for(var er=0;er<Zn;er++)Jn=crc.table[(Jn^Xn[Qn+er])&255]^Jn>>>8;return Jn},crc:function(Jn,Xn,Qn){return crc.update(4294967295,Jn,Xn,Qn)^4294967295}};function inflateRaw(Jn,Xn){return inflate(Jn,Xn)}const config={numWorkers:1,workerURL:"",useWorkers:!1};let nextId=0;const waitingForWorkerQueue=[];function startWorker(Jn){return new Promise((Xn,Qn)=>{const Zn=new Worker(Jn);Zn.onmessage=er=>{er.data==="start"?(Zn.onerror=void 0,Zn.onmessage=void 0,Xn(Zn)):Qn(new Error(`unexpected message: ${er.data}`))},Zn.onerror=Qn})}function dynamicRequire(Jn,Xn){return Jn.require?Jn.require(Xn):{}}(function(){if(isNode){const{Worker:Jn}=dynamicRequire(module,"worker_threads");return{async createWorker(Xn){return new Jn(Xn)},addEventListener(Xn,Qn){Xn.on("message",Zn=>{Qn({target:Xn,data:Zn})})},async terminate(Xn){await Xn.terminate()}}}else return{async createWorker(Jn){try{return await startWorker(Jn)}catch{console.warn("could not load worker:",Jn)}let Xn;try{const Qn=await fetch(Jn,{mode:"cors"});if(!Qn.ok)throw new Error(`could not load: ${Jn}`);Xn=await Qn.text(),Jn=URL.createObjectURL(new Blob([Xn],{type:"application/javascript"}));const Zn=await startWorker(Jn);return config.workerURL=Jn,Zn}catch{console.warn("could not load worker via fetch:",Jn)}if(Xn!==void 0)try{Jn=`data:application/javascript;base64,${btoa(Xn)}`;const Qn=await startWorker(Jn);return config.workerURL=Jn,Qn}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(Jn,Xn){Jn.addEventListener("message",Xn)},async terminate(Jn){Jn.terminate()}}})();function inflateRawLocal(Jn,Xn,Qn,Zn){const er=new Uint8Array(Xn);inflateRaw(Jn,er),Zn(Qn?new Blob([er],{type:Qn}):er.buffer)}async function processWaitingForWorkerQueue(){if(waitingForWorkerQueue.length!==0)for(;waitingForWorkerQueue.length;){const{src:Jn,uncompressedSize:Xn,type:Qn,resolve:Zn}=waitingForWorkerQueue.shift();let er=Jn;isBlob(Jn)&&(er=await readBlobAsUint8Array(Jn)),inflateRawLocal(er,Xn,Qn,Zn)}}function inflateRawAsync(Jn,Xn,Qn){return new Promise((Zn,er)=>{waitingForWorkerQueue.push({src:Jn,uncompressedSize:Xn,type:Qn,resolve:Zn,reject:er,id:nextId++}),processWaitingForWorkerQueue()})}function dosDateTimeToDate(Jn,Xn){const Qn=Jn&31,Zn=(Jn>>5&15)-1,er=(Jn>>9&127)+1980,tr=0,nr=(Xn&31)*2,rr=Xn>>5&63,sr=Xn>>11&31;return new Date(er,Zn,Qn,sr,rr,nr,tr)}class ZipEntry{constructor(Xn,Qn){this._reader=Xn,this._rawEntry=Qn,this.name=Qn.name,this.nameBytes=Qn.nameBytes,this.size=Qn.uncompressedSize,this.compressedSize=Qn.compressedSize,this.comment=Qn.comment,this.commentBytes=Qn.commentBytes,this.compressionMethod=Qn.compressionMethod,this.lastModDate=dosDateTimeToDate(Qn.lastModFileDate,Qn.lastModFileTime),this.isDirectory=Qn.uncompressedSize===0&&Qn.name.endsWith("/"),this.encrypted=!!(Qn.generalPurposeBitFlag&1),this.externalFileAttributes=Qn.externalFileAttributes,this.versionMadeBy=Qn.versionMadeBy}async blob(Xn="application/octet-stream"){return await readEntryDataAsBlob(this._reader,this._rawEntry,Xn)}async arrayBuffer(){return await readEntryDataAsArrayBuffer(this._reader,this._rawEntry)}async text(){const Xn=await this.arrayBuffer();return decodeBuffer(new Uint8Array(Xn))}async json(){const Xn=await this.text();return JSON.parse(Xn)}}const EOCDR_WITHOUT_COMMENT_SIZE=22,MAX_COMMENT_SIZE=65535,EOCDR_SIGNATURE=101010256,ZIP64_EOCDR_SIGNATURE=101075792;async function readAs(Jn,Xn,Qn){return await Jn.read(Xn,Qn)}async function readAsBlobOrTypedArray(Jn,Xn,Qn,Zn){return Jn.sliceAsBlob?await Jn.sliceAsBlob(Xn,Qn,Zn):await Jn.read(Xn,Qn)}const crc$1={unsigned(){return 0}};function getUint16LE(Jn,Xn){return Jn[Xn]+Jn[Xn+1]*256}function getUint32LE(Jn,Xn){return Jn[Xn]+Jn[Xn+1]*256+Jn[Xn+2]*65536+Jn[Xn+3]*16777216}function getUint64LE(Jn,Xn){return getUint32LE(Jn,Xn)+getUint32LE(Jn,Xn+4)*4294967296}const utf8Decoder=new TextDecoder;function decodeBuffer(Jn,Xn){return isSharedArrayBuffer(Jn.buffer)&&(Jn=new Uint8Array(Jn)),utf8Decoder.decode(Jn)}async function findEndOfCentralDirector(Jn,Xn){const Qn=Math.min(EOCDR_WITHOUT_COMMENT_SIZE+MAX_COMMENT_SIZE,Xn),Zn=Xn-Qn,er=await readAs(Jn,Zn,Qn);for(let tr=Qn-EOCDR_WITHOUT_COMMENT_SIZE;tr>=0;--tr){if(getUint32LE(er,tr)!==EOCDR_SIGNATURE)continue;const nr=new Uint8Array(er.buffer,er.byteOffset+tr,er.byteLength-tr),rr=getUint16LE(nr,4);if(rr!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${rr}`);const sr=getUint16LE(nr,10),or=getUint32LE(nr,12),ir=getUint32LE(nr,16),ar=getUint16LE(nr,20),lr=nr.length-EOCDR_WITHOUT_COMMENT_SIZE;if(ar!==lr)throw new Error(`invalid comment length. expected: ${lr}, actual: ${ar}`);const cr=new Uint8Array(nr.buffer,nr.byteOffset+22,ar),dr=decodeBuffer(cr);return sr===65535||ir===4294967295?await readZip64CentralDirectory(Jn,Zn+tr,dr,cr):await readEntries(Jn,ir,or,sr,dr,cr)}throw new Error("could not find end of central directory. maybe not zip file")}const END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE=117853008;async function readZip64CentralDirectory(Jn,Xn,Qn,Zn){const er=Xn-20,tr=await readAs(Jn,er,20);if(getUint32LE(tr,0)!==END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE)throw new Error("invalid zip64 end of central directory locator signature");const nr=getUint64LE(tr,8),rr=await readAs(Jn,nr,56);if(getUint32LE(rr,0)!==ZIP64_EOCDR_SIGNATURE)throw new Error("invalid zip64 end of central directory record signature");const sr=getUint64LE(rr,32),or=getUint64LE(rr,40),ir=getUint64LE(rr,48);return readEntries(Jn,ir,or,sr,Qn,Zn)}const CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE=33639248;async function readEntries(Jn,Xn,Qn,Zn,er,tr){let nr=0;const rr=await readAs(Jn,Xn,Qn),sr=[];for(let ir=0;ir<Zn;++ir){const ar=rr.subarray(nr,nr+46),lr=getUint32LE(ar,0);if(lr!==CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE)throw new Error(`invalid central directory file header signature: 0x${lr.toString(16)}`);const cr={versionMadeBy:getUint16LE(ar,4),versionNeededToExtract:getUint16LE(ar,6),generalPurposeBitFlag:getUint16LE(ar,8),compressionMethod:getUint16LE(ar,10),lastModFileTime:getUint16LE(ar,12),lastModFileDate:getUint16LE(ar,14),crc32:getUint32LE(ar,16),compressedSize:getUint32LE(ar,20),uncompressedSize:getUint32LE(ar,24),fileNameLength:getUint16LE(ar,28),extraFieldLength:getUint16LE(ar,30),fileCommentLength:getUint16LE(ar,32),internalFileAttributes:getUint16LE(ar,36),externalFileAttributes:getUint32LE(ar,38),relativeOffsetOfLocalHeader:getUint32LE(ar,42)};if(cr.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");nr+=46;const dr=rr.subarray(nr,nr+cr.fileNameLength+cr.extraFieldLength+cr.fileCommentLength);cr.nameBytes=dr.slice(0,cr.fileNameLength),cr.name=decodeBuffer(cr.nameBytes);const hr=cr.fileNameLength+cr.extraFieldLength,pr=dr.slice(cr.fileNameLength,hr);cr.extraFields=[];let fr=0;for(;fr<pr.length-3;){const br=getUint16LE(pr,fr+0),gr=getUint16LE(pr,fr+2),mr=fr+4,_r=mr+gr;if(_r>pr.length)throw new Error("extra field length exceeds extra field buffer size");cr.extraFields.push({id:br,data:pr.slice(mr,_r)}),fr=_r}if(cr.commentBytes=dr.slice(hr,hr+cr.fileCommentLength),cr.comment=decodeBuffer(cr.commentBytes),nr+=dr.length,cr.uncompressedSize===4294967295||cr.compressedSize===4294967295||cr.relativeOffsetOfLocalHeader===4294967295){const br=cr.extraFields.find(_r=>_r.id===1);if(!br)throw new Error("expected zip64 extended information extra field");const gr=br.data;let mr=0;if(cr.uncompressedSize===4294967295){if(mr+8>gr.length)throw new Error("zip64 extended information extra field does not include uncompressed size");cr.uncompressedSize=getUint64LE(gr,mr),mr+=8}if(cr.compressedSize===4294967295){if(mr+8>gr.length)throw new Error("zip64 extended information extra field does not include compressed size");cr.compressedSize=getUint64LE(gr,mr),mr+=8}if(cr.relativeOffsetOfLocalHeader===4294967295){if(mr+8>gr.length)throw new Error("zip64 extended information extra field does not include relative header offset");cr.relativeOffsetOfLocalHeader=getUint64LE(gr,mr),mr+=8}}const ur=cr.extraFields.find(br=>br.id===28789&&br.data.length>=6&&br.data[0]===1&&getUint32LE(br.data,1),crc$1.unsigned(cr.nameBytes));if(ur&&(cr.fileName=decodeBuffer(ur.data.slice(5))),cr.compressionMethod===0){let br=cr.uncompressedSize;if(cr.generalPurposeBitFlag&1&&(br+=12),cr.compressedSize!==br)throw new Error(`compressed size mismatch for stored file: ${cr.compressedSize} != ${br}`)}sr.push(cr)}return{zip:{comment:er,commentBytes:tr},entries:sr.map(ir=>new ZipEntry(Jn,ir))}}async function readEntryDataHeader(Jn,Xn){if(Xn.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const Qn=await readAs(Jn,Xn.relativeOffsetOfLocalHeader,30),Zn=await Jn.getLength(),er=getUint32LE(Qn,0);if(er!==67324752)throw new Error(`invalid local file header signature: 0x${er.toString(16)}`);const tr=getUint16LE(Qn,26),nr=getUint16LE(Qn,28),rr=Xn.relativeOffsetOfLocalHeader+Qn.length+tr+nr;let sr;if(Xn.compressionMethod===0)sr=!1;else if(Xn.compressionMethod===8)sr=!0;else throw new Error(`unsupported compression method: ${Xn.compressionMethod}`);const or=rr,ir=or+Xn.compressedSize;if(Xn.compressedSize!==0&&ir>Zn)throw new Error(`file data overflows file bounds: ${or} +  ${Xn.compressedSize}  > ${Zn}`);return{decompress:sr,fileDataStart:or}}async function readEntryDataAsArrayBuffer(Jn,Xn){const{decompress:Qn,fileDataStart:Zn}=await readEntryDataHeader(Jn,Xn);if(!Qn){const nr=await readAs(Jn,Zn,Xn.compressedSize);return isTypedArraySameAsArrayBuffer(nr)?nr.buffer:nr.slice().buffer}const er=await readAsBlobOrTypedArray(Jn,Zn,Xn.compressedSize);return await inflateRawAsync(er,Xn.uncompressedSize)}async function readEntryDataAsBlob(Jn,Xn,Qn){const{decompress:Zn,fileDataStart:er}=await readEntryDataHeader(Jn,Xn);if(!Zn){const rr=await readAsBlobOrTypedArray(Jn,er,Xn.compressedSize,Qn);return isBlob(rr)?rr:new Blob([isSharedArrayBuffer(rr.buffer)?new Uint8Array(rr):rr],{type:Qn})}const tr=await readAsBlobOrTypedArray(Jn,er,Xn.compressedSize);return await inflateRawAsync(tr,Xn.uncompressedSize,Qn)}async function unzipRaw(Jn){let Xn;if(typeof Blob<"u"&&Jn instanceof Blob)Xn=new BlobReader(Jn);else if(Jn instanceof ArrayBuffer||Jn&&Jn.buffer&&Jn.buffer instanceof ArrayBuffer)Xn=new ArrayBufferReader(Jn);else if(isSharedArrayBuffer(Jn)||isSharedArrayBuffer(Jn.buffer))Xn=new ArrayBufferReader(Jn);else if(typeof Jn=="string"){const Zn=await fetch(Jn);if(!Zn.ok)throw new Error(`failed http request ${Jn}, status: ${Zn.status}: ${Zn.statusText}`);const er=await Zn.blob();Xn=new BlobReader(er)}else if(typeof Jn.getLength=="function"&&typeof Jn.read=="function")Xn=Jn;else throw new Error("unsupported source type");const Qn=await Xn.getLength();if(Qn>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${Qn}. Only file sizes up 4503599627370496 bytes are supported`);return await findEndOfCentralDirector(Xn,Qn)}async function unzip(Jn){const{zip:Xn,entries:Qn}=await unzipRaw(Jn);return{zip:Xn,entries:Object.fromEntries(Qn.map(Zn=>[Zn.name,Zn]))}}var validator$2={},util$2={};(function(Jn){const Xn=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Qn=Xn+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Zn="["+Xn+"]["+Qn+"]*",er=new RegExp("^"+Zn+"$"),tr=function(rr,sr){const or=[];let ir=sr.exec(rr);for(;ir;){const ar=[];ar.startIndex=sr.lastIndex-ir[0].length;const lr=ir.length;for(let cr=0;cr<lr;cr++)ar.push(ir[cr]);or.push(ar),ir=sr.exec(rr)}return or},nr=function(rr){const sr=er.exec(rr);return!(sr===null||typeof sr>"u")};Jn.isExist=function(rr){return typeof rr<"u"},Jn.isEmptyObject=function(rr){return Object.keys(rr).length===0},Jn.merge=function(rr,sr,or){if(sr){const ir=Object.keys(sr),ar=ir.length;for(let lr=0;lr<ar;lr++)or==="strict"?rr[ir[lr]]=[sr[ir[lr]]]:rr[ir[lr]]=sr[ir[lr]]}},Jn.getValue=function(rr){return Jn.isExist(rr)?rr:""},Jn.isName=nr,Jn.getAllMatches=tr,Jn.nameRegexp=Zn})(util$2);const util$1=util$2,defaultOptions$2={allowBooleanAttributes:!1,unpairedTags:[]};validator$2.validate=function(Jn,Xn){Xn=Object.assign({},defaultOptions$2,Xn);const Qn=[];let Zn=!1,er=!1;Jn[0]==="\uFEFF"&&(Jn=Jn.substr(1));for(let tr=0;tr<Jn.length;tr++)if(Jn[tr]==="<"&&Jn[tr+1]==="?"){if(tr+=2,tr=readPI(Jn,tr),tr.err)return tr}else if(Jn[tr]==="<"){let nr=tr;if(tr++,Jn[tr]==="!"){tr=readCommentAndCDATA(Jn,tr);continue}else{let rr=!1;Jn[tr]==="/"&&(rr=!0,tr++);let sr="";for(;tr<Jn.length&&Jn[tr]!==">"&&Jn[tr]!==" "&&Jn[tr]!=="	"&&Jn[tr]!==`
`&&Jn[tr]!=="\r";tr++)sr+=Jn[tr];if(sr=sr.trim(),sr[sr.length-1]==="/"&&(sr=sr.substring(0,sr.length-1),tr--),!validateTagName(sr)){let ar;return sr.trim().length===0?ar="Invalid space after '<'.":ar="Tag '"+sr+"' is an invalid name.",getErrorObject("InvalidTag",ar,getLineNumberForPosition(Jn,tr))}const or=readAttributeStr(Jn,tr);if(or===!1)return getErrorObject("InvalidAttr","Attributes for '"+sr+"' have open quote.",getLineNumberForPosition(Jn,tr));let ir=or.value;if(tr=or.index,ir[ir.length-1]==="/"){const ar=tr-ir.length;ir=ir.substring(0,ir.length-1);const lr=validateAttributeString(ir,Xn);if(lr===!0)Zn=!0;else return getErrorObject(lr.err.code,lr.err.msg,getLineNumberForPosition(Jn,ar+lr.err.line))}else if(rr)if(or.tagClosed){if(ir.trim().length>0)return getErrorObject("InvalidTag","Closing tag '"+sr+"' can't have attributes or invalid starting.",getLineNumberForPosition(Jn,nr));{const ar=Qn.pop();if(sr!==ar.tagName){let lr=getLineNumberForPosition(Jn,ar.tagStartPos);return getErrorObject("InvalidTag","Expected closing tag '"+ar.tagName+"' (opened in line "+lr.line+", col "+lr.col+") instead of closing tag '"+sr+"'.",getLineNumberForPosition(Jn,nr))}Qn.length==0&&(er=!0)}}else return getErrorObject("InvalidTag","Closing tag '"+sr+"' doesn't have proper closing.",getLineNumberForPosition(Jn,tr));else{const ar=validateAttributeString(ir,Xn);if(ar!==!0)return getErrorObject(ar.err.code,ar.err.msg,getLineNumberForPosition(Jn,tr-ir.length+ar.err.line));if(er===!0)return getErrorObject("InvalidXml","Multiple possible root nodes found.",getLineNumberForPosition(Jn,tr));Xn.unpairedTags.indexOf(sr)!==-1||Qn.push({tagName:sr,tagStartPos:nr}),Zn=!0}for(tr++;tr<Jn.length;tr++)if(Jn[tr]==="<")if(Jn[tr+1]==="!"){tr++,tr=readCommentAndCDATA(Jn,tr);continue}else if(Jn[tr+1]==="?"){if(tr=readPI(Jn,++tr),tr.err)return tr}else break;else if(Jn[tr]==="&"){const ar=validateAmpersand(Jn,tr);if(ar==-1)return getErrorObject("InvalidChar","char '&' is not expected.",getLineNumberForPosition(Jn,tr));tr=ar}else if(er===!0&&!isWhiteSpace(Jn[tr]))return getErrorObject("InvalidXml","Extra text at the end",getLineNumberForPosition(Jn,tr));Jn[tr]==="<"&&tr--}}else{if(isWhiteSpace(Jn[tr]))continue;return getErrorObject("InvalidChar","char '"+Jn[tr]+"' is not expected.",getLineNumberForPosition(Jn,tr))}if(Zn){if(Qn.length==1)return getErrorObject("InvalidTag","Unclosed tag '"+Qn[0].tagName+"'.",getLineNumberForPosition(Jn,Qn[0].tagStartPos));if(Qn.length>0)return getErrorObject("InvalidXml","Invalid '"+JSON.stringify(Qn.map(tr=>tr.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return getErrorObject("InvalidXml","Start tag expected.",1);return!0};function isWhiteSpace(Jn){return Jn===" "||Jn==="	"||Jn===`
`||Jn==="\r"}function readPI(Jn,Xn){const Qn=Xn;for(;Xn<Jn.length;Xn++)if(Jn[Xn]=="?"||Jn[Xn]==" "){const Zn=Jn.substr(Qn,Xn-Qn);if(Xn>5&&Zn==="xml")return getErrorObject("InvalidXml","XML declaration allowed only at the start of the document.",getLineNumberForPosition(Jn,Xn));if(Jn[Xn]=="?"&&Jn[Xn+1]==">"){Xn++;break}else continue}return Xn}function readCommentAndCDATA(Jn,Xn){if(Jn.length>Xn+5&&Jn[Xn+1]==="-"&&Jn[Xn+2]==="-"){for(Xn+=3;Xn<Jn.length;Xn++)if(Jn[Xn]==="-"&&Jn[Xn+1]==="-"&&Jn[Xn+2]===">"){Xn+=2;break}}else if(Jn.length>Xn+8&&Jn[Xn+1]==="D"&&Jn[Xn+2]==="O"&&Jn[Xn+3]==="C"&&Jn[Xn+4]==="T"&&Jn[Xn+5]==="Y"&&Jn[Xn+6]==="P"&&Jn[Xn+7]==="E"){let Qn=1;for(Xn+=8;Xn<Jn.length;Xn++)if(Jn[Xn]==="<")Qn++;else if(Jn[Xn]===">"&&(Qn--,Qn===0))break}else if(Jn.length>Xn+9&&Jn[Xn+1]==="["&&Jn[Xn+2]==="C"&&Jn[Xn+3]==="D"&&Jn[Xn+4]==="A"&&Jn[Xn+5]==="T"&&Jn[Xn+6]==="A"&&Jn[Xn+7]==="["){for(Xn+=8;Xn<Jn.length;Xn++)if(Jn[Xn]==="]"&&Jn[Xn+1]==="]"&&Jn[Xn+2]===">"){Xn+=2;break}}return Xn}const doubleQuote='"',singleQuote="'";function readAttributeStr(Jn,Xn){let Qn="",Zn="",er=!1;for(;Xn<Jn.length;Xn++){if(Jn[Xn]===doubleQuote||Jn[Xn]===singleQuote)Zn===""?Zn=Jn[Xn]:Zn!==Jn[Xn]||(Zn="");else if(Jn[Xn]===">"&&Zn===""){er=!0;break}Qn+=Jn[Xn]}return Zn!==""?!1:{value:Qn,index:Xn,tagClosed:er}}const validAttrStrRegxp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function validateAttributeString(Jn,Xn){const Qn=util$1.getAllMatches(Jn,validAttrStrRegxp),Zn={};for(let er=0;er<Qn.length;er++){if(Qn[er][1].length===0)return getErrorObject("InvalidAttr","Attribute '"+Qn[er][2]+"' has no space in starting.",getPositionFromMatch(Qn[er]));if(Qn[er][3]!==void 0&&Qn[er][4]===void 0)return getErrorObject("InvalidAttr","Attribute '"+Qn[er][2]+"' is without value.",getPositionFromMatch(Qn[er]));if(Qn[er][3]===void 0&&!Xn.allowBooleanAttributes)return getErrorObject("InvalidAttr","boolean attribute '"+Qn[er][2]+"' is not allowed.",getPositionFromMatch(Qn[er]));const tr=Qn[er][2];if(!validateAttrName(tr))return getErrorObject("InvalidAttr","Attribute '"+tr+"' is an invalid name.",getPositionFromMatch(Qn[er]));if(!Zn.hasOwnProperty(tr))Zn[tr]=1;else return getErrorObject("InvalidAttr","Attribute '"+tr+"' is repeated.",getPositionFromMatch(Qn[er]))}return!0}function validateNumberAmpersand(Jn,Xn){let Qn=/\d/;for(Jn[Xn]==="x"&&(Xn++,Qn=/[\da-fA-F]/);Xn<Jn.length;Xn++){if(Jn[Xn]===";")return Xn;if(!Jn[Xn].match(Qn))break}return-1}function validateAmpersand(Jn,Xn){if(Xn++,Jn[Xn]===";")return-1;if(Jn[Xn]==="#")return Xn++,validateNumberAmpersand(Jn,Xn);let Qn=0;for(;Xn<Jn.length;Xn++,Qn++)if(!(Jn[Xn].match(/\w/)&&Qn<20)){if(Jn[Xn]===";")break;return-1}return Xn}function getErrorObject(Jn,Xn,Qn){return{err:{code:Jn,msg:Xn,line:Qn.line||Qn,col:Qn.col}}}function validateAttrName(Jn){return util$1.isName(Jn)}function validateTagName(Jn){return util$1.isName(Jn)}function getLineNumberForPosition(Jn,Xn){const Qn=Jn.substring(0,Xn).split(/\r?\n/);return{line:Qn.length,col:Qn[Qn.length-1].length+1}}function getPositionFromMatch(Jn){return Jn.startIndex+Jn[1].length}var OptionsBuilder={};const defaultOptions$1={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(Jn,Xn){return Xn},attributeValueProcessor:function(Jn,Xn){return Xn},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(Jn,Xn,Qn){return Jn}},buildOptions$1=function(Jn){return Object.assign({},defaultOptions$1,Jn)};OptionsBuilder.buildOptions=buildOptions$1;OptionsBuilder.defaultOptions=defaultOptions$1;class XmlNode{constructor(Xn){this.tagname=Xn,this.child=[],this[":@"]={}}add(Xn,Qn){Xn==="__proto__"&&(Xn="#__proto__"),this.child.push({[Xn]:Qn})}addChild(Xn){Xn.tagname==="__proto__"&&(Xn.tagname="#__proto__"),Xn[":@"]&&Object.keys(Xn[":@"]).length>0?this.child.push({[Xn.tagname]:Xn.child,[":@"]:Xn[":@"]}):this.child.push({[Xn.tagname]:Xn.child})}}var xmlNode$1=XmlNode;function readDocType$1(Jn,Xn){const Qn={};if(Jn[Xn+3]==="O"&&Jn[Xn+4]==="C"&&Jn[Xn+5]==="T"&&Jn[Xn+6]==="Y"&&Jn[Xn+7]==="P"&&Jn[Xn+8]==="E"){Xn=Xn+9;let Zn=1,er=!1,tr=!1,nr="";for(;Xn<Jn.length;Xn++)if(Jn[Xn]==="<"&&!tr){if(er&&isEntity(Jn,Xn))Xn+=7,[entityName,val,Xn]=readEntityExp(Jn,Xn+1),val.indexOf("&")===-1&&(Qn[entityName]={regx:RegExp(`&${entityName};`,"g"),val});else if(er&&isElement(Jn,Xn))Xn+=8;else if(er&&isAttlist(Jn,Xn))Xn+=8;else if(er&&isNotation(Jn,Xn))Xn+=9;else if(isComment)tr=!0;else throw new Error("Invalid DOCTYPE");Zn++,nr=""}else if(Jn[Xn]===">"){if(tr?Jn[Xn-1]==="-"&&Jn[Xn-2]==="-"&&(tr=!1,Zn--):Zn--,Zn===0)break}else Jn[Xn]==="["?er=!0:nr+=Jn[Xn];if(Zn!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:Qn,i:Xn}}function readEntityExp(Jn,Xn){let Qn="";for(;Xn<Jn.length&&Jn[Xn]!=="'"&&Jn[Xn]!=='"';Xn++)Qn+=Jn[Xn];if(Qn=Qn.trim(),Qn.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Zn=Jn[Xn++];let er="";for(;Xn<Jn.length&&Jn[Xn]!==Zn;Xn++)er+=Jn[Xn];return[Qn,er,Xn]}function isComment(Jn,Xn){return Jn[Xn+1]==="!"&&Jn[Xn+2]==="-"&&Jn[Xn+3]==="-"}function isEntity(Jn,Xn){return Jn[Xn+1]==="!"&&Jn[Xn+2]==="E"&&Jn[Xn+3]==="N"&&Jn[Xn+4]==="T"&&Jn[Xn+5]==="I"&&Jn[Xn+6]==="T"&&Jn[Xn+7]==="Y"}function isElement(Jn,Xn){return Jn[Xn+1]==="!"&&Jn[Xn+2]==="E"&&Jn[Xn+3]==="L"&&Jn[Xn+4]==="E"&&Jn[Xn+5]==="M"&&Jn[Xn+6]==="E"&&Jn[Xn+7]==="N"&&Jn[Xn+8]==="T"}function isAttlist(Jn,Xn){return Jn[Xn+1]==="!"&&Jn[Xn+2]==="A"&&Jn[Xn+3]==="T"&&Jn[Xn+4]==="T"&&Jn[Xn+5]==="L"&&Jn[Xn+6]==="I"&&Jn[Xn+7]==="S"&&Jn[Xn+8]==="T"}function isNotation(Jn,Xn){return Jn[Xn+1]==="!"&&Jn[Xn+2]==="N"&&Jn[Xn+3]==="O"&&Jn[Xn+4]==="T"&&Jn[Xn+5]==="A"&&Jn[Xn+6]==="T"&&Jn[Xn+7]==="I"&&Jn[Xn+8]==="O"&&Jn[Xn+9]==="N"}var DocTypeReader=readDocType$1;const hexRegex=/^[-+]?0x[a-fA-F0-9]+$/,numRegex=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const consider={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function toNumber$1(Jn,Xn={}){if(Xn=Object.assign({},consider,Xn),!Jn||typeof Jn!="string")return Jn;let Qn=Jn.trim();if(Xn.skipLike!==void 0&&Xn.skipLike.test(Qn))return Jn;if(Xn.hex&&hexRegex.test(Qn))return Number.parseInt(Qn,16);{const Zn=numRegex.exec(Qn);if(Zn){const er=Zn[1],tr=Zn[2];let nr=trimZeros(Zn[3]);const rr=Zn[4]||Zn[6];if(!Xn.leadingZeros&&tr.length>0&&er&&Qn[2]!==".")return Jn;if(!Xn.leadingZeros&&tr.length>0&&!er&&Qn[1]!==".")return Jn;{const sr=Number(Qn),or=""+sr;return or.search(/[eE]/)!==-1||rr?Xn.eNotation?sr:Jn:Qn.indexOf(".")!==-1?or==="0"&&nr===""||or===nr||er&&or==="-"+nr?sr:Jn:tr?nr===or||er+nr===or?sr:Jn:Qn===or||Qn===er+or?sr:Jn}}else return Jn}}function trimZeros(Jn){return Jn&&Jn.indexOf(".")!==-1&&(Jn=Jn.replace(/0+$/,""),Jn==="."?Jn="0":Jn[0]==="."?Jn="0"+Jn:Jn[Jn.length-1]==="."&&(Jn=Jn.substr(0,Jn.length-1))),Jn}var strnum=toNumber$1;const util=util$2,xmlNode=xmlNode$1,readDocType=DocTypeReader,toNumber=strnum;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,util.nameRegexp);let OrderedObjParser$1=class{constructor(Xn){this.options=Xn,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=addExternalEntities,this.parseXml=parseXml,this.parseTextData=parseTextData,this.resolveNameSpace=resolveNameSpace,this.buildAttributesMap=buildAttributesMap,this.isItStopNode=isItStopNode,this.replaceEntitiesValue=replaceEntitiesValue$1,this.readStopNodeData=readStopNodeData,this.saveTextToParentTag=saveTextToParentTag,this.addChild=addChild}};function addExternalEntities(Jn){const Xn=Object.keys(Jn);for(let Qn=0;Qn<Xn.length;Qn++){const Zn=Xn[Qn];this.lastEntities[Zn]={regex:new RegExp("&"+Zn+";","g"),val:Jn[Zn]}}}function parseTextData(Jn,Xn,Qn,Zn,er,tr,nr){if(Jn!==void 0&&(this.options.trimValues&&!Zn&&(Jn=Jn.trim()),Jn.length>0)){nr||(Jn=this.replaceEntitiesValue(Jn));const rr=this.options.tagValueProcessor(Xn,Jn,Qn,er,tr);return rr==null?Jn:typeof rr!=typeof Jn||rr!==Jn?rr:this.options.trimValues?parseValue$1(Jn,this.options.parseTagValue,this.options.numberParseOptions):Jn.trim()===Jn?parseValue$1(Jn,this.options.parseTagValue,this.options.numberParseOptions):Jn}}function resolveNameSpace(Jn){if(this.options.removeNSPrefix){const Xn=Jn.split(":"),Qn=Jn.charAt(0)==="/"?"/":"";if(Xn[0]==="xmlns")return"";Xn.length===2&&(Jn=Qn+Xn[1])}return Jn}const attrsRegx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function buildAttributesMap(Jn,Xn,Qn){if(!this.options.ignoreAttributes&&typeof Jn=="string"){const Zn=util.getAllMatches(Jn,attrsRegx),er=Zn.length,tr={};for(let nr=0;nr<er;nr++){const rr=this.resolveNameSpace(Zn[nr][1]);let sr=Zn[nr][4],or=this.options.attributeNamePrefix+rr;if(rr.length)if(this.options.transformAttributeName&&(or=this.options.transformAttributeName(or)),or==="__proto__"&&(or="#__proto__"),sr!==void 0){this.options.trimValues&&(sr=sr.trim()),sr=this.replaceEntitiesValue(sr);const ir=this.options.attributeValueProcessor(rr,sr,Xn);ir==null?tr[or]=sr:typeof ir!=typeof sr||ir!==sr?tr[or]=ir:tr[or]=parseValue$1(sr,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(tr[or]=!0)}if(!Object.keys(tr).length)return;if(this.options.attributesGroupName){const nr={};return nr[this.options.attributesGroupName]=tr,nr}return tr}}const parseXml=function(Jn){Jn=Jn.replace(/\r\n?/g,`
`);const Xn=new xmlNode("!xml");let Qn=Xn,Zn="",er="";for(let tr=0;tr<Jn.length;tr++)if(Jn[tr]==="<")if(Jn[tr+1]==="/"){const rr=findClosingIndex(Jn,">",tr,"Closing Tag is not closed.");let sr=Jn.substring(tr+2,rr).trim();if(this.options.removeNSPrefix){const ar=sr.indexOf(":");ar!==-1&&(sr=sr.substr(ar+1))}this.options.transformTagName&&(sr=this.options.transformTagName(sr)),Qn&&(Zn=this.saveTextToParentTag(Zn,Qn,er));const or=er.substring(er.lastIndexOf(".")+1);if(sr&&this.options.unpairedTags.indexOf(sr)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${sr}>`);let ir=0;or&&this.options.unpairedTags.indexOf(or)!==-1?(ir=er.lastIndexOf(".",er.lastIndexOf(".")-1),this.tagsNodeStack.pop()):ir=er.lastIndexOf("."),er=er.substring(0,ir),Qn=this.tagsNodeStack.pop(),Zn="",tr=rr}else if(Jn[tr+1]==="?"){let rr=readTagExp(Jn,tr,!1,"?>");if(!rr)throw new Error("Pi Tag is not closed.");if(Zn=this.saveTextToParentTag(Zn,Qn,er),!(this.options.ignoreDeclaration&&rr.tagName==="?xml"||this.options.ignorePiTags)){const sr=new xmlNode(rr.tagName);sr.add(this.options.textNodeName,""),rr.tagName!==rr.tagExp&&rr.attrExpPresent&&(sr[":@"]=this.buildAttributesMap(rr.tagExp,er,rr.tagName)),this.addChild(Qn,sr,er)}tr=rr.closeIndex+1}else if(Jn.substr(tr+1,3)==="!--"){const rr=findClosingIndex(Jn,"-->",tr+4,"Comment is not closed.");if(this.options.commentPropName){const sr=Jn.substring(tr+4,rr-2);Zn=this.saveTextToParentTag(Zn,Qn,er),Qn.add(this.options.commentPropName,[{[this.options.textNodeName]:sr}])}tr=rr}else if(Jn.substr(tr+1,2)==="!D"){const rr=readDocType(Jn,tr);this.docTypeEntities=rr.entities,tr=rr.i}else if(Jn.substr(tr+1,2)==="!["){const rr=findClosingIndex(Jn,"]]>",tr,"CDATA is not closed.")-2,sr=Jn.substring(tr+9,rr);if(Zn=this.saveTextToParentTag(Zn,Qn,er),this.options.cdataPropName)Qn.add(this.options.cdataPropName,[{[this.options.textNodeName]:sr}]);else{let or=this.parseTextData(sr,Qn.tagname,er,!0,!1,!0);or==null&&(or=""),Qn.add(this.options.textNodeName,or)}tr=rr+2}else{let rr=readTagExp(Jn,tr,this.options.removeNSPrefix),sr=rr.tagName,or=rr.tagExp,ir=rr.attrExpPresent,ar=rr.closeIndex;this.options.transformTagName&&(sr=this.options.transformTagName(sr)),Qn&&Zn&&Qn.tagname!=="!xml"&&(Zn=this.saveTextToParentTag(Zn,Qn,er,!1));const lr=Qn;if(lr&&this.options.unpairedTags.indexOf(lr.tagname)!==-1&&(Qn=this.tagsNodeStack.pop(),er=er.substring(0,er.lastIndexOf("."))),sr!==Xn.tagname&&(er+=er?"."+sr:sr),this.isItStopNode(this.options.stopNodes,er,sr)){let cr="";if(or.length>0&&or.lastIndexOf("/")===or.length-1)tr=rr.closeIndex;else if(this.options.unpairedTags.indexOf(sr)!==-1)tr=rr.closeIndex;else{const hr=this.readStopNodeData(Jn,sr,ar+1);if(!hr)throw new Error(`Unexpected end of ${sr}`);tr=hr.i,cr=hr.tagContent}const dr=new xmlNode(sr);sr!==or&&ir&&(dr[":@"]=this.buildAttributesMap(or,er,sr)),cr&&(cr=this.parseTextData(cr,sr,er,!0,ir,!0,!0)),er=er.substr(0,er.lastIndexOf(".")),dr.add(this.options.textNodeName,cr),this.addChild(Qn,dr,er)}else{if(or.length>0&&or.lastIndexOf("/")===or.length-1){sr[sr.length-1]==="/"?(sr=sr.substr(0,sr.length-1),or=sr):or=or.substr(0,or.length-1),this.options.transformTagName&&(sr=this.options.transformTagName(sr));const cr=new xmlNode(sr);sr!==or&&ir&&(cr[":@"]=this.buildAttributesMap(or,er,sr)),this.addChild(Qn,cr,er),er=er.substr(0,er.lastIndexOf("."))}else{const cr=new xmlNode(sr);this.tagsNodeStack.push(Qn),sr!==or&&ir&&(cr[":@"]=this.buildAttributesMap(or,er,sr)),this.addChild(Qn,cr,er),Qn=cr}Zn="",tr=ar}}else Zn+=Jn[tr];return Xn.child};function addChild(Jn,Xn,Qn){const Zn=this.options.updateTag(Xn.tagname,Qn,Xn[":@"]);Zn===!1||(typeof Zn=="string"&&(Xn.tagname=Zn),Jn.addChild(Xn))}const replaceEntitiesValue$1=function(Jn){if(this.options.processEntities){for(let Xn in this.docTypeEntities){const Qn=this.docTypeEntities[Xn];Jn=Jn.replace(Qn.regx,Qn.val)}for(let Xn in this.lastEntities){const Qn=this.lastEntities[Xn];Jn=Jn.replace(Qn.regex,Qn.val)}if(this.options.htmlEntities)for(let Xn in this.htmlEntities){const Qn=this.htmlEntities[Xn];Jn=Jn.replace(Qn.regex,Qn.val)}Jn=Jn.replace(this.ampEntity.regex,this.ampEntity.val)}return Jn};function saveTextToParentTag(Jn,Xn,Qn,Zn){return Jn&&(Zn===void 0&&(Zn=Object.keys(Xn.child).length===0),Jn=this.parseTextData(Jn,Xn.tagname,Qn,!1,Xn[":@"]?Object.keys(Xn[":@"]).length!==0:!1,Zn),Jn!==void 0&&Jn!==""&&Xn.add(this.options.textNodeName,Jn),Jn=""),Jn}function isItStopNode(Jn,Xn,Qn){const Zn="*."+Qn;for(const er in Jn){const tr=Jn[er];if(Zn===tr||Xn===tr)return!0}return!1}function tagExpWithClosingIndex(Jn,Xn,Qn=">"){let Zn,er="";for(let tr=Xn;tr<Jn.length;tr++){let nr=Jn[tr];if(Zn)nr===Zn&&(Zn="");else if(nr==='"'||nr==="'")Zn=nr;else if(nr===Qn[0])if(Qn[1]){if(Jn[tr+1]===Qn[1])return{data:er,index:tr}}else return{data:er,index:tr};else nr==="	"&&(nr=" ");er+=nr}}function findClosingIndex(Jn,Xn,Qn,Zn){const er=Jn.indexOf(Xn,Qn);if(er===-1)throw new Error(Zn);return er+Xn.length-1}function readTagExp(Jn,Xn,Qn,Zn=">"){const er=tagExpWithClosingIndex(Jn,Xn+1,Zn);if(!er)return;let tr=er.data;const nr=er.index,rr=tr.search(/\s/);let sr=tr,or=!0;if(rr!==-1&&(sr=tr.substr(0,rr).replace(/\s\s*$/,""),tr=tr.substr(rr+1)),Qn){const ir=sr.indexOf(":");ir!==-1&&(sr=sr.substr(ir+1),or=sr!==er.data.substr(ir+1))}return{tagName:sr,tagExp:tr,closeIndex:nr,attrExpPresent:or}}function readStopNodeData(Jn,Xn,Qn){const Zn=Qn;let er=1;for(;Qn<Jn.length;Qn++)if(Jn[Qn]==="<")if(Jn[Qn+1]==="/"){const tr=findClosingIndex(Jn,">",Qn,`${Xn} is not closed`);if(Jn.substring(Qn+2,tr).trim()===Xn&&(er--,er===0))return{tagContent:Jn.substring(Zn,Qn),i:tr};Qn=tr}else if(Jn[Qn+1]==="?")Qn=findClosingIndex(Jn,"?>",Qn+1,"StopNode is not closed.");else if(Jn.substr(Qn+1,3)==="!--")Qn=findClosingIndex(Jn,"-->",Qn+3,"StopNode is not closed.");else if(Jn.substr(Qn+1,2)==="![")Qn=findClosingIndex(Jn,"]]>",Qn,"StopNode is not closed.")-2;else{const tr=readTagExp(Jn,Qn,">");tr&&((tr&&tr.tagName)===Xn&&tr.tagExp[tr.tagExp.length-1]!=="/"&&er++,Qn=tr.closeIndex)}}function parseValue$1(Jn,Xn,Qn){if(Xn&&typeof Jn=="string"){const Zn=Jn.trim();return Zn==="true"?!0:Zn==="false"?!1:toNumber(Jn,Qn)}else return util.isExist(Jn)?Jn:""}var OrderedObjParser_1=OrderedObjParser$1,node2json={};function prettify$1(Jn,Xn){return compress(Jn,Xn)}function compress(Jn,Xn,Qn){let Zn;const er={};for(let tr=0;tr<Jn.length;tr++){const nr=Jn[tr],rr=propName$1(nr);let sr="";if(Qn===void 0?sr=rr:sr=Qn+"."+rr,rr===Xn.textNodeName)Zn===void 0?Zn=nr[rr]:Zn+=""+nr[rr];else{if(rr===void 0)continue;if(nr[rr]){let or=compress(nr[rr],Xn,sr);const ir=isLeafTag(or,Xn);nr[":@"]?assignAttributes(or,nr[":@"],sr,Xn):Object.keys(or).length===1&&or[Xn.textNodeName]!==void 0&&!Xn.alwaysCreateTextNode?or=or[Xn.textNodeName]:Object.keys(or).length===0&&(Xn.alwaysCreateTextNode?or[Xn.textNodeName]="":or=""),er[rr]!==void 0&&er.hasOwnProperty(rr)?(Array.isArray(er[rr])||(er[rr]=[er[rr]]),er[rr].push(or)):Xn.isArray(rr,sr,ir)?er[rr]=[or]:er[rr]=or}}}return typeof Zn=="string"?Zn.length>0&&(er[Xn.textNodeName]=Zn):Zn!==void 0&&(er[Xn.textNodeName]=Zn),er}function propName$1(Jn){const Xn=Object.keys(Jn);for(let Qn=0;Qn<Xn.length;Qn++){const Zn=Xn[Qn];if(Zn!==":@")return Zn}}function assignAttributes(Jn,Xn,Qn,Zn){if(Xn){const er=Object.keys(Xn),tr=er.length;for(let nr=0;nr<tr;nr++){const rr=er[nr];Zn.isArray(rr,Qn+"."+rr,!0,!0)?Jn[rr]=[Xn[rr]]:Jn[rr]=Xn[rr]}}}function isLeafTag(Jn,Xn){const{textNodeName:Qn}=Xn,Zn=Object.keys(Jn).length;return!!(Zn===0||Zn===1&&(Jn[Qn]||typeof Jn[Qn]=="boolean"||Jn[Qn]===0))}node2json.prettify=prettify$1;const{buildOptions}=OptionsBuilder,OrderedObjParser=OrderedObjParser_1,{prettify}=node2json,validator$1=validator$2;let XMLParser$1=class{constructor(Xn){this.externalEntities={},this.options=buildOptions(Xn)}parse(Xn,Qn){if(typeof Xn!="string")if(Xn.toString)Xn=Xn.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(Qn){Qn===!0&&(Qn={});const tr=validator$1.validate(Xn,Qn);if(tr!==!0)throw Error(`${tr.err.msg}:${tr.err.line}:${tr.err.col}`)}const Zn=new OrderedObjParser(this.options);Zn.addExternalEntities(this.externalEntities);const er=Zn.parseXml(Xn);return this.options.preserveOrder||er===void 0?er:prettify(er,this.options)}addEntity(Xn,Qn){if(Qn.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(Xn.indexOf("&")!==-1||Xn.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(Qn==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[Xn]=Qn}};var XMLParser_1=XMLParser$1;const EOL=`
`;function toXml(Jn,Xn){let Qn="";return Xn.format&&Xn.indentBy.length>0&&(Qn=EOL),arrToStr(Jn,Xn,"",Qn)}function arrToStr(Jn,Xn,Qn,Zn){let er="",tr=!1;for(let nr=0;nr<Jn.length;nr++){const rr=Jn[nr],sr=propName(rr);let or="";if(Qn.length===0?or=sr:or=`${Qn}.${sr}`,sr===Xn.textNodeName){let dr=rr[sr];isStopNode(or,Xn)||(dr=Xn.tagValueProcessor(sr,dr),dr=replaceEntitiesValue(dr,Xn)),tr&&(er+=Zn),er+=dr,tr=!1;continue}else if(sr===Xn.cdataPropName){tr&&(er+=Zn),er+=`<![CDATA[${rr[sr][0][Xn.textNodeName]}]]>`,tr=!1;continue}else if(sr===Xn.commentPropName){er+=Zn+`<!--${rr[sr][0][Xn.textNodeName]}-->`,tr=!0;continue}else if(sr[0]==="?"){const dr=attr_to_str(rr[":@"],Xn),hr=sr==="?xml"?"":Zn;let pr=rr[sr][0][Xn.textNodeName];pr=pr.length!==0?" "+pr:"",er+=hr+`<${sr}${pr}${dr}?>`,tr=!0;continue}let ir=Zn;ir!==""&&(ir+=Xn.indentBy);const ar=attr_to_str(rr[":@"],Xn),lr=Zn+`<${sr}${ar}`,cr=arrToStr(rr[sr],Xn,or,ir);Xn.unpairedTags.indexOf(sr)!==-1?Xn.suppressUnpairedNode?er+=lr+">":er+=lr+"/>":(!cr||cr.length===0)&&Xn.suppressEmptyNode?er+=lr+"/>":cr&&cr.endsWith(">")?er+=lr+`>${cr}${Zn}</${sr}>`:(er+=lr+">",cr&&Zn!==""&&(cr.includes("/>")||cr.includes("</"))?er+=Zn+Xn.indentBy+cr+Zn:er+=cr,er+=`</${sr}>`),tr=!0}return er}function propName(Jn){const Xn=Object.keys(Jn);for(let Qn=0;Qn<Xn.length;Qn++){const Zn=Xn[Qn];if(Zn!==":@")return Zn}}function attr_to_str(Jn,Xn){let Qn="";if(Jn&&!Xn.ignoreAttributes)for(let Zn in Jn){let er=Xn.attributeValueProcessor(Zn,Jn[Zn]);er=replaceEntitiesValue(er,Xn),er===!0&&Xn.suppressBooleanAttributes?Qn+=` ${Zn.substr(Xn.attributeNamePrefix.length)}`:Qn+=` ${Zn.substr(Xn.attributeNamePrefix.length)}="${er}"`}return Qn}function isStopNode(Jn,Xn){Jn=Jn.substr(0,Jn.length-Xn.textNodeName.length-1);let Qn=Jn.substr(Jn.lastIndexOf(".")+1);for(let Zn in Xn.stopNodes)if(Xn.stopNodes[Zn]===Jn||Xn.stopNodes[Zn]==="*."+Qn)return!0;return!1}function replaceEntitiesValue(Jn,Xn){if(Jn&&Jn.length>0&&Xn.processEntities)for(let Qn=0;Qn<Xn.entities.length;Qn++){const Zn=Xn.entities[Qn];Jn=Jn.replace(Zn.regex,Zn.val)}return Jn}var orderedJs2Xml=toXml;const buildFromOrderedJs=orderedJs2Xml,defaultOptions={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(Jn,Xn){return Xn},attributeValueProcessor:function(Jn,Xn){return Xn},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Builder(Jn){this.options=Object.assign({},defaultOptions,Jn),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.processTextOrObjNode=processTextOrObjNode,this.options.format?(this.indentate=indentate,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Builder.prototype.build=function(Jn){return this.options.preserveOrder?buildFromOrderedJs(Jn,this.options):(Array.isArray(Jn)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(Jn={[this.options.arrayNodeName]:Jn}),this.j2x(Jn,0).val)};Builder.prototype.j2x=function(Jn,Xn){let Qn="",Zn="";for(let er in Jn)if(!(typeof Jn[er]>"u"))if(Jn[er]===null)er[0]==="?"?Zn+=this.indentate(Xn)+"<"+er+"?"+this.tagEndChar:Zn+=this.indentate(Xn)+"<"+er+"/"+this.tagEndChar;else if(Jn[er]instanceof Date)Zn+=this.buildTextValNode(Jn[er],er,"",Xn);else if(typeof Jn[er]!="object"){const tr=this.isAttribute(er);if(tr)Qn+=this.buildAttrPairStr(tr,""+Jn[er]);else if(er===this.options.textNodeName){let nr=this.options.tagValueProcessor(er,""+Jn[er]);Zn+=this.replaceEntitiesValue(nr)}else Zn+=this.buildTextValNode(Jn[er],er,"",Xn)}else if(Array.isArray(Jn[er])){const tr=Jn[er].length;let nr="";for(let rr=0;rr<tr;rr++){const sr=Jn[er][rr];typeof sr>"u"||(sr===null?er[0]==="?"?Zn+=this.indentate(Xn)+"<"+er+"?"+this.tagEndChar:Zn+=this.indentate(Xn)+"<"+er+"/"+this.tagEndChar:typeof sr=="object"?this.options.oneListGroup?nr+=this.j2x(sr,Xn+1).val:nr+=this.processTextOrObjNode(sr,er,Xn):nr+=this.buildTextValNode(sr,er,"",Xn))}this.options.oneListGroup&&(nr=this.buildObjectNode(nr,er,"",Xn)),Zn+=nr}else if(this.options.attributesGroupName&&er===this.options.attributesGroupName){const tr=Object.keys(Jn[er]),nr=tr.length;for(let rr=0;rr<nr;rr++)Qn+=this.buildAttrPairStr(tr[rr],""+Jn[er][tr[rr]])}else Zn+=this.processTextOrObjNode(Jn[er],er,Xn);return{attrStr:Qn,val:Zn}};Builder.prototype.buildAttrPairStr=function(Jn,Xn){return Xn=this.options.attributeValueProcessor(Jn,""+Xn),Xn=this.replaceEntitiesValue(Xn),this.options.suppressBooleanAttributes&&Xn==="true"?" "+Jn:" "+Jn+'="'+Xn+'"'};function processTextOrObjNode(Jn,Xn,Qn){const Zn=this.j2x(Jn,Qn+1);return Jn[this.options.textNodeName]!==void 0&&Object.keys(Jn).length===1?this.buildTextValNode(Jn[this.options.textNodeName],Xn,Zn.attrStr,Qn):this.buildObjectNode(Zn.val,Xn,Zn.attrStr,Qn)}Builder.prototype.buildObjectNode=function(Jn,Xn,Qn,Zn){if(Jn==="")return Xn[0]==="?"?this.indentate(Zn)+"<"+Xn+Qn+"?"+this.tagEndChar:this.indentate(Zn)+"<"+Xn+Qn+this.closeTag(Xn)+this.tagEndChar;{let er="</"+Xn+this.tagEndChar,tr="";return Xn[0]==="?"&&(tr="?",er=""),Qn&&Jn.indexOf("<")===-1?this.indentate(Zn)+"<"+Xn+Qn+tr+">"+Jn+er:this.options.commentPropName!==!1&&Xn===this.options.commentPropName&&tr.length===0?this.indentate(Zn)+`<!--${Jn}-->`+this.newLine:this.indentate(Zn)+"<"+Xn+Qn+tr+this.tagEndChar+Jn+this.indentate(Zn)+er}};Builder.prototype.closeTag=function(Jn){let Xn="";return this.options.unpairedTags.indexOf(Jn)!==-1?this.options.suppressUnpairedNode||(Xn="/"):this.options.suppressEmptyNode?Xn="/":Xn=`></${Jn}`,Xn};Builder.prototype.buildTextValNode=function(Jn,Xn,Qn,Zn){if(this.options.cdataPropName!==!1&&Xn===this.options.cdataPropName)return this.indentate(Zn)+`<![CDATA[${Jn}]]>`+this.newLine;if(this.options.commentPropName!==!1&&Xn===this.options.commentPropName)return this.indentate(Zn)+`<!--${Jn}-->`+this.newLine;if(Xn[0]==="?")return this.indentate(Zn)+"<"+Xn+Qn+"?"+this.tagEndChar;{let er=this.options.tagValueProcessor(Xn,Jn);return er=this.replaceEntitiesValue(er),er===""?this.indentate(Zn)+"<"+Xn+Qn+this.closeTag(Xn)+this.tagEndChar:this.indentate(Zn)+"<"+Xn+Qn+">"+er+"</"+Xn+this.tagEndChar}};Builder.prototype.replaceEntitiesValue=function(Jn){if(Jn&&Jn.length>0&&this.options.processEntities)for(let Xn=0;Xn<this.options.entities.length;Xn++){const Qn=this.options.entities[Xn];Jn=Jn.replace(Qn.regex,Qn.val)}return Jn};function indentate(Jn){return this.options.indentBy.repeat(Jn)}function isAttribute(Jn){return Jn.startsWith(this.options.attributeNamePrefix)?Jn.substr(this.attrPrefixLen):!1}var json2xml=Builder;const validator=validator$2,XMLParser=XMLParser_1,XMLBuilder=json2xml;var fxp={XMLParser,XMLValidator:validator,XMLBuilder};const containerTags={};for(const Jn in entries){const Xn=entries[Jn];Xn.type&&(containerTags[Jn]=Xn.type)}const textNodeTags=new Set(["description","readme","comment"]),textArrayTags=new Set(["alias"]),allowEmptyStringKeys=new Set(["join"]),escapedHtml=/&(?:amp|lt|gt|quot|#39|apos);/g,htmlUnescapes={"&amp;":"&","&apos;":"'","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescape=Jn=>escapedHtml.test(Jn)?Jn.replace(escapedHtml,Xn=>htmlUnescapes[Xn]):Jn,containers={};for(const Jn in containerTags)containers[containerTags[Jn]]=Jn;const allowed={};for(const[Jn,Xn]of Object.entries(entries))typeof Xn.allowedChildrens=="string"?allowed[Jn]=Xn.allowedChildrens:allowed[Jn]=new Set(Xn.allowedChildrens);function parseValue(Jn){switch(Jn){case"true":return!0;case"false":return!1;default:if(isNaN(Jn))return Jn;const Xn=parseFloat(Jn);return isFinite(Xn)&&Jn.includes("+")==!1?Xn:Jn}}function xmlToJson(Jn){const Xn={allowBooleanAttributes:!0,ignoreAttributes:!1,attributeNamePrefix:"",textNodeName:"$text",processEntities:!1,parseTagValue:!1,ignoreDeclaration:!0,alwaysCreateTextNode:!1,trimValues:!1,isArray:(Zn,er,tr,nr)=>!nr&&(Zn in containers||textArrayTags.has(Zn)),attributeValueProcessor:(Zn,er)=>parseValue(unescape(er)),tagValueProcessor:(Zn,er)=>unescape(er).trim()};return new fxp.XMLParser(Xn).parse(Jn)}async function unzipFolder(Jn,Xn){const Qn=await unzip(Jn),Zn={};for(const er in Qn.entries){const tr=Qn.entries[er];if(tr.isDirectory)continue;const nr=removePrefix$3(removePrefix$3(er,Xn),"/");if(nr.startsWith("."))continue;const rr=isZipExtension(nr)?await tr.arrayBuffer():await tr.text();Zn[nr]=rr}return Zn}async function unzipFile(Jn){if(typeof Jn=="string"){var Xn=new TextEncoder;Jn=Xn.encode(Jn)}const Qn=await unzip(Jn);for(const Zn of Object.values(Qn.entries))return await Zn.text();throw"unzipFile failed: No Entries"}const zipExtensions=["gstz","zip","catz"],allowedExtensions=["gst","gstz","cat","catz","json"];function removeExtension(Jn){const Xn=Jn.lastIndexOf(".");return Xn===-1?Jn:Jn.substring(0,Xn)}function getExtension(Jn){return Jn.split(".").pop().toLowerCase()}function isZipExtension(Jn){const Xn=getExtension(Jn);return zipExtensions.includes(Xn)}function isAllowedExtension(Jn){const Xn=getExtension(Jn);return!!allowedExtensions.includes(Xn)}const oldBuggedTypes={sharedRules:"sharedRule",sharedProfiles:"sharedProfile",sharedInfoGroups:"sharedInfoGroup",sharedSelectionEntries:"sharedSelectionEntry",sharedSelectionEntryGroups:"sharedSelectionEntryGroup"};function normalize(Jn){var Xn,Qn;for(let Zn in Jn)if(Jn[Zn]===""&&!allowEmptyStringKeys.has(Zn))delete Jn[Zn];else if(containerTags[Zn]&&Jn[Zn])if(Zn in oldBuggedTypes){const er=Jn[Zn][containerTags[Zn]],tr=Jn[Zn][oldBuggedTypes[Zn]];Jn[Zn]=[...Array.isArray(er)?er:[],...Array.isArray(tr)?tr:[]],(Xn=Jn[Zn])==null||Xn.forEach(normalize)}else{const er=Jn[Zn][containerTags[Zn]];Array.isArray(er)?(Jn[Zn]=er,(Qn=Jn[Zn])==null||Qn.forEach(normalize)):isObject(Jn[Zn])&&delete Jn[Zn]}else textNodeTags.has(Zn)&&typeof Jn[Zn]=="object"&&!Array.isArray(Jn[Zn])&&(Jn[Zn]=Jn[Zn].$text??"");return Jn}function clean(Jn,Xn){const Qn=allowed[Xn],Zn=typeof Qn=="string"?allowed[Jn[Qn]]:Qn;for(let er in Jn)er in containerTags&&Array.isArray(Jn[er])&&(Zn&&!Zn.has(er)?delete Jn[er]:Jn[er].forEach(tr=>clean(tr,er)))}const empty=new Set;function allowed_children(Jn,Xn){let Qn=allowed[Xn];if(typeof Qn=="string"){const Zn=Jn[Qn];if(Zn){const er=toPlural(Zn);if(typeof er!="string"||er===Qn)return empty;Qn=allowed[er]}}return Qn||empty}function BSXmlToJson(Jn){const Xn=xmlToJson(Jn),Qn=Object.keys(Xn)[0],Zn=Xn[Qn];switch(normalize(Zn),Qn){case"catalogue":Xn.playable=1,Xn.id=hashFnv32a$1(Xn.catalogue.id),Xn.include=[1e3],Xn.name=Zn.name,Xn.short=to_snake_case(Zn.name),Xn.playable=!Zn.library,Xn.version=Zn.battleScribeVersion,Xn.nrversion=Zn.revision;break;case"gameSystem":Xn.playable=0,Xn.id=1e3,Xn.name=Zn.name,Xn.short=to_snake_case(Zn.name),Xn.playable=!Zn.library,Xn.version=Zn.battleScribeVersion,Xn.nrversion=Zn.revision;break}return Xn}async function convertToJson(Jn,Xn){switch(Xn=getExtension(Xn),Xn){case"xml":case"cat":case"gst":return BSXmlToJson(Jn);case"zip":case"catz":case"gstz":return BSXmlToJson(await unzipFile(Jn));case"json":return JSON.parse(Jn);default:throw new Error("Extension not supported "+Xn)}}function toSingle(Jn){return containerTags[Jn]}function toPlural(Jn){return containers[Jn]}const skipKeys=new Set(["?xml","$text","_"]);function renestChilds(Jn){for(const[Xn,Qn]of Object.entries(Jn))textNodeTags.has(Xn)||textArrayTags.has(Xn)?Jn[Xn]=Array.isArray(Qn)?Qn:[Qn]:Array.isArray(Qn)&&!skipKeys.has(Xn)&&(Jn[Xn]=[{[toSingle(Xn)]:Qn}])}function putAttributesIn$(Jn){return forEachValueRecursive(Jn,Xn=>{typeof Xn=="object"&&renestChilds(Xn)}),forEachValueRecursive(Jn,Xn=>{if(typeof Xn=="object")for(const[Qn,Zn]of Object.entries(Xn))Array.isArray(Zn)||skipKeys.has(Qn)||textNodeTags.has(Qn)||isObject(Zn)||(Xn[`_${Qn}`]=Zn,delete Xn[Qn])}),Jn}function convertToXml(Jn){const Xn=JSON.parse(rootToJson(Jn));putAttributesIn$(Xn);const Qn={textNodeName:"$text",format:!0,attributeNamePrefix:"_",ignoreAttributes:!1,suppressBooleanAttributes:!1,suppressEmptyNode:!0};return Xn.gameSystem&&(Xn.gameSystem._xmlns="http://www.battlescribe.net/schema/gameSystemSchema"),Xn.catalogue&&(Xn.catalogue._xmlns="http://www.battlescribe.net/schema/catalogueSchema"),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
`+new fxp.XMLBuilder(Qn).build(Xn)}const filterByItems=[{id:"any",name:"Anything",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"self",name:"Self",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"unit",name:"Unit",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"model",name:"Model",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"upgrade",name:"Upgrade",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"mount",name:"Mount",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"crew",name:"Crew",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"entry",name:"Entry",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"group",name:"Group",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"force",name:"Force",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"category",name:"Category",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"roster",name:"Roster",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1}],systemCategories=[{type:"publications",name:"Publications",icon:"publication.png"},{type:"costTypes",name:"Cost Types",icon:"cost.png"},{type:"profileTypes",name:"Profile Types",icon:"profileType.png"},{type:"categoryEntries",name:"Category Entries",icon:"categoryEntry.png"},{type:"forceEntries",name:"Force Entries",icon:"forceEntry.png"},{type:"sharedSelectionEntries",name:"Shared Selection Entries",icon:"selectionEntryLink.png"},{type:"sharedSelectionEntryGroups",name:"Shared Selection Entry Groups",icon:"shared_groups.png"},{type:"sharedProfiles",name:"Shared Profiles",icon:"shared_profiles.png"},{type:"sharedRules",name:"Shared Rules",icon:"shared_rules.png"},{type:"sharedInfoGroups",name:"Shared Info Groups",icon:"infoGroup.png"},{type:"sharedForceEntries",name:"Shared Force Entries",icon:"forceEntryLink.png"},{type:"rules",links:"infoLinks",name:"Root Rules",icon:"rule.png"},{type:"selectionEntries",links:"entryLinks",name:"Root Selection Entries",icon:"selectionEntry.png"}],catalogueCategories=[{type:"catalogueLinks",name:"Catalogue Links",icon:"catalogueLink.png"},...systemCategories];function getTypeLabel(Jn){var Qn;const Xn=(Qn=types[Jn])==null?void 0:Qn.label;return Xn||(console.warn("unknown getTypeLabel key",Jn),Jn)}function getTypeName(Jn,Xn){var Zn;if(Xn!=null&&Xn.target)return getTypeName(Xn.target.parentKey,Xn.target)+"Link";const Qn=(Zn=entries[Jn])==null?void 0:Zn.type;return Qn||Jn}function getNameExtra(Jn,Xn=!0,Qn=!0){var nr,rr,sr,or,ir;const Zn=Jn.parentKey,er=[];switch(Zn){case"infoLinks":["profiles","sharedProfiles"].includes((nr=Jn.target)==null?void 0:nr.parentKey)&&Qn&&er.push(Jn.target.typeName);break;case"sharedProfiles":case"profiles":Qn&&er.push(Jn.typeName);break;case"selectionEntries":case"sharedSelectionEntries":Jn.isEntry()&&Jn.getType()!=="upgrade"&&Qn&&er.push(Jn.getType());break;case"entryLinks":Jn.target&&Jn.isEntry()&&Jn.getType()!=="upgrade"&&Qn&&er.push(Jn.getType());break;case"modifierGroups":er.push(`(${(((rr=Jn.modifiers)==null?void 0:rr.length)||0)+(((sr=Jn.modifierGroups)==null?void 0:sr.length)||0)})`);break;case"constraints":Jn.automatic&&er.push("(automatic)");break}const tr=(((or=Jn.refs)==null?void 0:or.length)??0)+(((ir=Jn.other_refs)==null?void 0:ir.length)??0);if(tr&&Xn){const ar=tr===1?"":"s";er.push(`(${tr||0} ref${ar})`)}return Jn.comment&&Jn.comment[0]&&er.push("# "+Jn.comment),Jn.isCollective&&Jn.isCollective()&&er.push("(collective)"),er.join(" ")}function getName(Jn){const Xn=Jn.parentKey;switch(Xn){case"sharedSelectionEntries":case"selectionEntries":case"entryLinks":case"sharedSelectionEntryGroups":case"selectionEntryGroups":case"sharedForceEntries":case"forceEntries":case"forceEntryLinks":case"categoryEntries":case"categoryLinks":case"sharedInfoGroups":case"infoGroups":case"infoLinks":case"publications":case"catalogue":case"gameSystem":case"catalogueLinks":case"sharedRules":case"rules":case"costs":case"costTypes":case"profileTypes":case"sharedProfiles":case"profiles":case"attributeTypes":case"attributes":case"characteristicTypes":case"characteristics":return Jn.getName();case"modifiers":return modifierToString(getModifierOrConditionParent(Jn),Jn);case"repeats":{const Zn=Jn,er=getModifierOrConditionParent(Jn);return er||console.error("no parent for repeat",Jn),`Repeat ${Zn.repeats} times for every ${Zn.value} ${fieldToText(er,Zn.field)} in ${fieldToText(er,Zn.scope)} of ${Zn.childId?fieldToText(er,Zn.childId):" any"}`+(Zn.includeChildSelections?" (recursive)":"")}case"constraints":const Qn=Jn;return conditionToString(getModifierOrConditionParent(Jn),Qn);case"conditions":return conditionToString(getModifierOrConditionParent(Jn),Jn);case"localConditionGroups":return conditionToString(getModifierOrConditionParent(Jn),Jn)+" where:";case"modifierGroups":return"Modify...";case"conditionGroups":return`${Jn.type.toUpperCase()}`;case"associations":return Jn.name;default:return console.log(Xn,Jn),Xn}}function forEachEntryRecursive(Jn,Xn){Xn(Jn);const Qn=[Jn];for(;Qn.length;){const Zn=Qn.pop();for(const er of Object.keys(Zn)){if(!goodJsonKeys.has(er)||textNodeTags.has(er))continue;const tr=Zn[er];if(tr&&Array.isArray(tr))for(const nr of tr)Qn.push(nr),Xn(nr,er,Zn)}}}function removeEntry(Jn){const Xn=Jn.parent;if(Xn){const Qn=Xn[Jn.parentKey],Zn=Qn.indexOf(Jn);Zn!==-1&&Qn.splice(Zn,1)}}function onRemoveEntry(Jn,Xn){const Qn=Jn.catalogue;forEachEntryRecursive(Jn,(Zn,er,tr)=>{if(Qn.removeFromIndex(Zn),Zn.isLink&&Zn.isLink()&&(Qn.unlinkLink(Zn),delete Zn.target),Zn instanceof Profile&&Zn.typeId){const nr=Zn.catalogue.findOptionById(Zn.typeId);nr&&Zn.catalogue.removeRef(Zn,nr)}if(Zn instanceof Condition){const nr=Zn.scope,rr=Zn.childId;if(!validScopes.has(nr)){const sr=Zn.catalogue.findOptionById(Zn.scope);sr&&Zn.catalogue.removeOtherRef(Zn,sr)}if(!validChildIds.has(rr)){const sr=Zn.catalogue.findOptionById(Zn.childId);sr&&Zn.catalogue.removeOtherRef(Zn,sr)}}delete Zn.parent,delete Zn.catalogue}),Xn&&Jn instanceof CatalogueLink&&Qn.reload(Xn)}function onAddEntry(Jn,Xn,Qn,Zn){let er=!1;for(const tr of Array.isArray(Jn)?Jn:[Jn])forEachEntryRecursive(tr,(nr,rr,sr)=>{if(isObject(nr)){if(nr.parent=sr||Qn,nr.catalogue=Xn,Xn.addToIndex(nr),nr instanceof Link&&Xn.updateLink(nr),nr instanceof Profile&&nr.typeId){const or=nr.catalogue.findOptionById(nr.typeId);or&&nr.catalogue.addRef(nr,or)}nr instanceof CatalogueLink&&nr.targetId&&(er=!0),Xn.refreshErrors(nr)}});er&&Qn&&(Qn.catalogue||Qn).reload(Zn)}function getEntryPath(Jn){if(!Jn.parent&&!Jn.isCatalogue())return[{id:Jn.id,key:Jn.parentKey,index:0}];const Xn=[];for(;Jn.parent;){const Qn=Jn.parent||Jn.catalogue;Xn.push({key:Jn.parentKey,index:Qn[Jn.parentKey].indexOf(Jn),id:Jn.id}),Jn=Jn.parent}return Xn.reverse(),Xn}function getEntryPathInfo(Jn){if(!Jn.parent&&!Jn.isCatalogue())return[{id:Jn.id,key:Jn.parentKey,index:0}];const Xn=[];do{const Qn=Jn.parent||Jn.catalogue;Qn?Xn.push({name:Jn.getName(),type:Jn.editorTypeName,label:Jn.getTypeName(),display:getName(Jn),key:Jn.parentKey,index:Qn[Jn.parentKey].indexOf(Jn),id:Jn.id}):Xn.push({name:Jn.getName(),display:getName(Jn),type:"catalogue",key:"catalogue",id:Jn.id,index:0}),Jn=Jn.parent}while(Jn);return Xn.reverse(),Xn}function addAtEntryPath(Jn,Xn,Qn){let Zn=Jn;for(let nr=0;nr<Xn.length-1;nr++){const rr=Xn[nr];Zn=Zn[rr.key][rr.index]}const er=Xn[Xn.length-1];return Zn[er.key]||(Zn[er.key]=[]),Zn[er.key].splice(er.index,0,Qn),Zn}function getAtEntryPath(Jn,Xn){let Qn=Jn;for(const Zn of Xn){if(Qn=Qn[Zn.key],!Qn)return;Qn=Qn[Zn.index]}return Qn}function popAtEntryPath(Jn,Xn){let Qn=Jn;const Zn=Xn[Xn.length-1];for(const nr of Xn)nr!==Zn&&(Qn=Qn[nr.key][nr.index]);const tr=Qn[Zn.key].splice(Zn.index,1)[0];if(!tr)throw new Error("popAtEntryPath failed");return tr}function scrambleIds(Jn,Xn){const Qn={},Zn=Array.isArray(Xn)?Xn:[Xn];for(const er of Zn)forEachEntryRecursive(er,(tr,nr,rr)=>{if(tr.id){const sr=tr.id,or=Jn.generateNonConflictingId(sr);tr.id=or,Qn[sr]=or}});for(const er of Zn)forEachEntryRecursive(er,(tr,nr,rr)=>{tr instanceof Condition&&(tr.scope in Qn&&(tr.scope=Qn[tr.scope]),tr.childId in Qn&&(tr.childId=Qn[tr.childId])),tr instanceof Modifier&&tr.field in Qn&&(tr.field=Qn[tr.field])})}function fixKey(Jn,Xn,Qn){if(Jn.isCatalogue()){if(Qn)switch(Xn){case"sharedRules":case"rules":return["sharedRules","rules"].includes(Qn)?Qn:"";case"sharedProfiles":case"profiles":return["sharedProfiles","profiles"].includes(Qn)?Qn:"";case"sharedInfoGroups":case"infoGroups":return["sharedInfoGroups","infoGroups"].includes(Qn)?Qn:"";case"sharedSelectionEntries":case"selectionEntries":return["sharedSelectionEntries","selectionEntries"].includes(Qn)?Qn:"";case"sharedSelectionEntryGroups":case"selectionEntryGroups":return["sharedSelectionEntryGroups","selectionEntryGroups"].includes(Qn)?Qn:"";default:return Xn}}else switch(Xn){case"sharedRules":return"rules";case"sharedProfiles":return"profiles";case"sharedInfoGroups":return"infoGroups";case"sharedSelectionEntries":return"selectionEntries";case"sharedSelectionEntryGroups":return"selectionEntryGroups";default:return Xn}return Xn}class NoObserve{get[Symbol.toStringTag](){return"ObjectNoObserve"}}function noObserve(){return new NoObserve}const keyInfoCache={};function getKeyInfoClass(Jn,Xn,Qn){if(Xn in Jn)return Jn[Xn];class Zn extends Base{constructor(){super(...arguments);Sr(this,"parent")}get parentKey(){return Xn}get editorTypeName(){return getTypeName(Xn,this)}toString(){return`${this.editorTypeName} - ${getName(this)}`}}return Zn.prototype.parentKey,Object.setPrototypeOf(Zn.prototype,Object.getPrototypeOf(Qn)),Jn[Xn]=Zn.prototype,Zn.prototype}function setKeyInfo(Jn,Xn,Qn){Object.setPrototypeOf(Qn,getKeyInfoClass(Jn,Xn,Qn))}const protoMap={"*":Base.prototype,catalogue:Catalogue.prototype,catalogueLinks:CatalogueLink.prototype,gameSystem:GameSystem.prototype,sharedForceEntries:Force.prototype,forceEntries:Force.prototype,forces:Force.prototype,forceEntry:Force.prototype,force:Force.prototype,forceEntryLinks:ForceEntryLink.prototype,categoryEntries:Category.prototype,categoryEntry:Category.prototype,category:Category.prototype,categories:Category.prototype,link:Link.prototype,infoLinks:InfoLink.prototype,categoryLinks:CategoryLink.prototype,entry:Entry.prototype,selectionEntries:Entry.prototype,entryLinks:Link.prototype,sharedSelectionEntries:Entry.prototype,group:Group.prototype,selectionEntryGroups:Group.prototype,sharedSelectionEntryGroups:Group.prototype,sharedRules:Rule.prototype,rules:Rule.prototype,rule:Rule.prototype,profileTypes:ProfileType.prototype,sharedProfiles:Profile.prototype,profiles:Profile.prototype,profile:Profile.prototype,characteristics:Characteristic.prototype,characteristic:Characteristic.prototype,characteristicTypes:Base.prototype,characteristicType:Base.prototype,sharedInfoGroups:InfoGroup.prototype,infoGroups:InfoGroup.prototype,infoGroup:InfoGroup.prototype,publications:Publication.prototype,publication:Publication.prototype,repeats:Condition.prototype,conditions:Condition.prototype,constraints:Constraint.prototype,modifiers:Modifier.prototype,modifierGroups:ModifierGroup.prototype};Object.values(protoMap);function getPrototypeFromKey(Jn){return Jn in protoMap?protoMap[Jn]:protoMap["*"]}function setPrototype(Jn,Xn){const Qn=getPrototypeFromKey(Xn);return Qn&&(Object.setPrototypeOf(Jn,Qn),Jn.post_init&&Jn.post_init(),globalThis.isEditor&&setKeyInfo(Jn.keyInfoCache||keyInfoCache,Xn,Jn)),Jn}function setPrototypeRecursive(Jn){const Xn=[Jn];for(;Xn.length;){const Qn=Xn.pop();for(const Zn of Object.keys(Qn)){const er=Qn[Zn];if(isObject(er))if(Array.isArray(er)){if(er.length&&isObject(er[0]))for(let tr=er.length;tr--;){const nr=er[tr];isDefaultObject(nr)&&(setPrototype(nr,Zn),Xn.push(nr))}}else isDefaultObject(er)&&(setPrototype(er,Zn),Xn.push(er))}}}const useCataloguesStore=defineStore("catalogues",{state:()=>({dict:{},version:1}),persist:{storage:globalThis.localStorage},actions:{get(Jn){return Jn in this.dict||(this.dict[Jn]={}),this.dict[Jn]},setEdited(Jn,Xn){this.get(Jn).edited=Xn},getEdited(Jn){return this.get(Jn).edited},setErrors(Jn,Xn){this.get(Jn).errors=Xn},getErrors(Jn){return this.get(Jn).errors},getDependents(Jn){return this.get(Jn).dependents},updateCatalogue(Jn){var er;const Xn=Jn.id,Qn=Jn.gameSystemId||Jn.id,Zn=(er=Jn.catalogueLinks)==null?void 0:er.map(tr=>({targetId:tr.targetId===Qn?Qn:`${Qn}-${tr.targetId}`,sourceId:Xn===Qn?Qn:`${Qn}-${Xn}`,importRootEntries:tr.importRootEntries,sourceName:Jn.name}));Jn.gameSystemId&&(Zn==null||Zn.push({targetId:Jn.gameSystemId,sourceId:Xn,importRootEntries:!0,sourceName:Jn.name})),this.setDependencies(Xn,Zn)},setDependencies(Jn,Xn){var Zn;const Qn=(Zn=this.get(Jn))==null?void 0:Zn.dependencies;if(Qn)for(const er of Qn)this.removeDependent(er.targetId,er);if(Xn)for(const er of Xn)this.addDependent(er.targetId,er);this.get(Jn).dependencies=Xn||[]},setDependents(Jn,Xn){this.get(Jn).dependents=Xn},addDependent(Jn,Xn){const Qn=this.get(Jn);Qn.dependents||(Qn.dependents=[]),Qn.dependents.push(Xn)},removeDependent(Jn,Xn){var Zn;const Qn=(Zn=this.get(Jn))==null?void 0:Zn.dependents;if(Qn){const er=Qn.findIndex(tr=>tr.sourceId===Xn.sourceId);er>=0&&Qn.splice(er,1)}}}}),LeftPanelDefaults={showImported:!1,ignoreProfilesRules:!1,filter:"",scroll:0,selection:void 0,mode:"edit"},useEditorUIState=defineStore("editor-ui",{state:()=>({catalogues:{}}),persist:{storage:globalThis.localStorage},actions:{collapse_level(Jn){var Qn;if(Jn>=0){const Zn=`depth-${Jn} collapsible-box opened`,er=document.documentElement.getElementsByClassName(Zn);if(er!=null&&er.length)for(var Xn=0;Xn<er.length;Xn++){const tr=er[Xn];(Qn=get_ctx(tr))==null||Qn.close()}}},collapse_all(){this.collapse_level(1),this.collapse_level(0)},collapse_deepest(){const Jn="collapsible-box opened",Xn=document.documentElement.getElementsByClassName(Jn);let Qn=-1;if(Xn!=null&&Xn.length)for(var Zn=0;Zn<Xn.length;Zn++)Xn[Zn].classList.forEach(tr=>{tr.startsWith("depth-")&&(Qn=Math.max(Qn,parseInt(tr.split("-")[1])))});this.collapse_level(Qn)},set_state(Jn,Xn){function Qn(tr,nr,rr=0){const sr=`depth-${rr} collapsible-box opened`,or=tr.getElementsByClassName(sr);if(or!=null&&or.length)for(var ir=0;ir<or.length;ir++){const ar=or[ir],lr=get_base_from_vue_el(get_ctx(ar)),cr=lr.parentKey,dr=lr.parent;let hr=nr;if(dr){const pr=dr[cr];if(!pr||!Array.isArray(pr))continue;const fr=pr.indexOf(lr);cr in nr||(nr[cr]={});const ur=nr[cr];fr in ur||(ur[fr]={}),hr=ur[fr]}else{const pr=[];for(let ur=0;ur<ar.classList.length;ur++)pr.push(ar.classList[ur]);const fr=pr.filter(ur=>arrayKeys.has(ur));for(const ur of fr)nr[ur]={},nr[ur][0]={},hr=nr[ur][0]}Qn(ar,hr,rr+1)}}const Zn={};Qn(document.documentElement,Zn);const er={...Xn,open:Zn};return this.$state.catalogues[Jn]=er,Zn},get_data(Jn){const Xn=this.$state.catalogues[Jn];return Xn||{}},get_root(Jn,Xn){let Qn=this.$state.catalogues[Jn];return!(!Qn||(Qn=Qn.open[Xn],!Qn))},get(Jn,Xn){if(!Xn.length)return!1;let Qn=this.$state.catalogues[Jn];if(!Qn)return!1;let Zn=Qn.open[Xn[0].key];if(!Zn||(Zn=Zn[0],!Zn))return!1;for(const er of Xn){const tr=Zn[er.key];if(!tr)return!1;const nr=tr[er.index];if(!nr)return!1;Zn=nr}return!0}}});var lo,co;(co=(lo=globalThis.process)==null?void 0:lo.env)!=null&&co.githubToken;var uo,fo;(fo=(uo=globalThis.process)==null?void 0:uo.env)!=null&&fo.githubAnonToken;function filename(Jn){const Xn=Jn.replaceAll("\\","/").split("/");return Xn[Xn.length-1]}function normalizeGithubRepoUrl(Jn){const Xn=/^(?:(http(?:s?)?:\/\/)?(?:www\.)?github.com\/)?([^\/]+)\/([^\/]+)\/?.*$/,Qn=Jn.match(Xn);if(!Qn)return null;const[,Zn="https://",er,tr]=Qn;return!er||!tr?null:`https://github.com/${er}/${tr}`}function parseGitHubUrl(Jn){const Xn=/^(?:https?:\/\/)?(?:www\.)?github\.com\/([^/]+)\/([^/]+)(?:\/)?$/,Qn=Jn.match(Xn);if(!Qn)throw new Error("Invalid GitHub URL format: "+Jn);const[,Zn,er]=Qn;return{githubUrl:Jn,githubRepo:`${Zn}/${er}`,githubOwner:Zn,githubName:er}}async function getFileContentFromRepo(Jn,Xn){try{const Qn=Jn.split("/"),Zn=Qn[Qn.length-2],er=Qn[Qn.length-1].replace(".git",""),tr=`https://api.github.com/repos/${Zn}/${er}/contents/${encodeURIComponent(Xn)}`;console.log(`Querying github api at ${tr}`);const nr=await $fetch(tr,{headers:{"User-Agent":"New Recruit Data Editor (Electron)",Accept:"application/vnd.github.v3+json"}});if(!nr||!(nr!=null&&nr.download_url))throw new Error("No download_url found");console.log(`Downloading file at ${nr==null?void 0:nr.download_url}`);const rr=await $fetch(nr.download_url,{headers:{"User-Agent":"New Recruit Data Editor (Electron)",Accept:"application/vnd.github.v3+json"}});return console.log(`Downloaded file, length: ${rr.length}`),rr}catch(Qn){throw Qn}}async function getFileContentFromRepoWithFallback(Jn,Xn,Qn){try{return await getFileContentFromRepo(Jn,Xn)}catch(Zn){if(!Qn)throw Zn;return await getFileContentFromRepo(Jn,Qn)}}async function getNextRevision(Jn,Xn){if(Xn.fullFilePath)try{const Qn=filename(Xn.fullFilePath),Zn=Qn.endsWith("z")?removeSuffix$1(Qn,"z"):void 0,er=await getFileContentFromRepoWithFallback(Jn.githubUrl,Qn,Zn),tr=/revision="(\d+)"/,nr=er.match(tr);if(nr){const rr=(Number(nr[1])||0)+1;return console.log(`Revision of ${Xn.name}: ${Xn.revision} -> ${rr}`),rr}}catch(Qn){console.error(Qn)}return Xn.revision||1}function getBookDate(Jn,Xn){if(Jn)return Jn[Xn]||Jn["*"]}async function loadData(Jn,Xn,Qn,Zn){if(!Xn.catalogue&&!Xn.gameSystem)throw Error("invalid loadBsData argument: no .catalogue or .gameSystem in data");const er=Xn.catalogue?"catalogue":"gameSystem",tr=er==="gameSystem",nr=er==="catalogue",rr=Xn[er],sr=rr;if(sr.loaded||sr.loaded_editor)return sr;setPrototypeRecursive(rr);const or=setPrototype(rr,er);if(or.manager=Jn,nr){const ar={targetId:or.gameSystemId},lr=Jn.getLoadedCatalogue(ar,Qn);if(lr)or.gameSystem=lr;else{const cr=await Jn.getData(ar,Qn),dr=Jn.getLoadedCatalogue(ar,Qn);dr?or.gameSystem=dr:or.gameSystem=await loadData(Jn,cr,Qn)}}const ir=[];for(const ar of(or==null?void 0:or.catalogueLinks)||[]){if(!ar.targetId){console.warn(`invalid link: no targetId in link: ${ar}, found in ${rr.name}`);continue}if(ar.targetId===or.id){ar.target=or;continue}const lr=Jn.getLoadedCatalogue(ar,Qn);if(lr){ar.target=lr;continue}const cr=Jn.getData(ar,Qn).then(dr=>{const hr=Jn.getLoadedCatalogue(ar,Qn);if(hr){ar.target=hr;return}return loadData(Jn,dr,Qn).then(pr=>ar.target=pr)});ir.push(cr)}return await Promise.all(ir),tr&&Jn.addLoadedSystem(or),nr&&Jn.addLoadedCatalogue(or),or}class BSCatalogueManager{constructor(){Sr(this,"catalogues",{});Sr(this,"unresolvedLinks");Sr(this,"settings");Sr(this,"system");Sr(this,"translations")}async getData(Xn,Qn){throw new Error("Method not implemented.")}async loadAll(){throw new Error("Method not implemented.")}async translate(Xn){if(this.translations){const Qn=this.translations;forEachPairRecursive(getDataObject(Xn),(Zn,er,tr)=>{typeof Zn=="string"&&Zn in Qn&&(tr[er]=Qn[Zn],tr[`original_${er}`]=Zn)},(Zn,er)=>!!arrayKeys.has(er))}}async untranslate(Xn){forEachPairRecursive(getDataObject(Xn),(Qn,Zn,er)=>{if(Zn.startsWith("original_")){const tr=removePrefix$3(Zn,"original_");er[tr]=Qn,delete er[Zn]}},(Qn,Zn)=>!(!arrayKeys.has(Zn)||!(Qn instanceof Base)))}async setTranslations(Xn){const Qn=this.translations;this.translations=Xn??void 0;for(const Zn of this.getAllLoadedCatalogues())Qn&&await this.untranslate(Zn),Xn&&await this.translate(Zn)}getTranslations(){return this.translations}getCatalogueInfo(Xn){var Qn,Zn;return(Zn=(Qn=this.system)==null?void 0:Qn.books.array)==null?void 0:Zn.find(er=>er.bsid===Xn.targetId)}findOptionById(Xn){}getLoadedCatalogue(Xn,Qn){const Zn=typeof Xn=="string"?Xn:Xn.targetId||Xn.name,er=getBookDate(Qn,Zn)||"default",tr=this.catalogues[Zn];return tr?tr[er]:void 0}getAllLoadedCatalogues(){return Object.values(this.catalogues).map(Xn=>Object.values(Xn)).flat(1)}addLoadedCatalogue(Xn,Qn){const Zn=getBookDate(Qn,Xn.id)||"default";this.catalogues[Xn.name]||(this.catalogues[Xn.name]={}),this.catalogues[Xn.id]||(this.catalogues[Xn.id]={}),this.catalogues[Xn.name][Zn]=Xn,this.catalogues[Xn.id][Zn]=Xn}addLoadedSystem(Xn,Qn){return this.addLoadedCatalogue(Xn,Qn)}unloadAll(){this.catalogues={}}async loadData(Xn,Qn){const Zn=await loadData(this,Xn,Qn);return Zn.process(),Zn}async loadCatalogue(Xn,Qn,Zn){const er=this.getLoadedCatalogue(Xn,Qn);if(er&&!Zn)return er;const tr=await this.getData(Xn,Qn);if(tr)return await this.loadData(tr,Qn);throw Error(`Couldn't load catalogue: couldn't getData ${Xn}`)}}class GameSystemFiles extends BSCatalogueManager{constructor(){super(...arguments);Sr(this,"gameSystem",null);Sr(this,"catalogueFiles",noObserve());Sr(this,"allLoaded");Sr(this,"loadedCatalogues",{});Sr(this,"github");Sr(this,"unresolvedLinks",{});Sr(this,"index",{});Sr(this,"update")}async loadData(Qn,Zn){return await loadData(this,Qn,Zn)}findOptionById(Qn){for(const Zn of Object.values(this.loadedCatalogues))if(Zn.index&&Zn.index[Qn])return Zn.index[Qn]}unloadAll(){super.unloadAll();for(const Qn of Object.values(this.loadedCatalogues))Qn.reset();this.loadedCatalogues={},this.index={},delete this.allLoaded}async loadAll(Qn){var tr,nr;let Zn=Object.values(this.catalogueFiles).length+1,er=0;if(this.allLoaded||console.log("Loading all catalogues in",(nr=(tr=this.gameSystem)==null?void 0:tr.gameSystem)==null?void 0:nr.name),this.gameSystem){Qn&&await Qn(er,Zn,`Loading ${this.gameSystem.gameSystem.name}`),(await this.loadCatalogue({targetId:this.gameSystem.gameSystem.id})).processForEditor(),er++;for(const sr of Object.values(this.catalogueFiles))Qn&&await Qn(er,Zn,`Loading ${sr.catalogue.name}`),(await this.loadCatalogue({targetId:sr.catalogue.id})).processForEditor(),er++,Qn&&await Qn(er,Zn,`Loading ${sr.catalogue.name}`)}this.allLoaded=!0}getLoadedCatalogue(Qn,Zn){const er=Qn.targetId||Qn.name;return this.loadedCatalogues[er]}addLoadedCatalogue(Qn,Zn){this.loadedCatalogues[Qn.id]=Qn}getAllLoadedCatalogues(){var Zn;return((Zn=this.gameSystem)==null?void 0:Zn.gameSystem.id)?Object.values(this.loadedCatalogues):[]}getId(){var Qn;return(Qn=this.gameSystem)==null?void 0:Qn.gameSystem.id}getCatalogueInfo(Qn){var Zn,er;if(((Zn=this.gameSystem)==null?void 0:Zn.gameSystem.id)===Qn.targetId)return(er=this.gameSystem)==null?void 0:er.gameSystem;for(const tr of Object.values(this.catalogueFiles))if(tr.catalogue.id===Qn.targetId)return tr.catalogue}getAllCatalogueFiles(){return[...this.gameSystem?[this.gameSystem]:[],...Object.values(this.catalogueFiles)]}setSystem(Qn){this.gameSystem=Qn;const Zn=db.systems.put({id:Qn.gameSystem.id,content:Qn});return this.update&&this.update(Qn),Zn}setCatalogue(Qn){const Zn=Qn.catalogue.id;this.catalogueFiles[Zn]=Qn;const er=db.catalogues.put({id:Qn.catalogue.id,content:Qn});return this.update&&this.update(Qn),er}removeCatalogue(Qn){for(const[Zn,er]of Object.entries(this.catalogueFiles))er.catalogue.id===Qn.catalogue.id&&delete this.catalogueFiles[Zn]}async getData(Qn,Zn){var rr;if(Qn.targetId==((rr=this.gameSystem)==null?void 0:rr.gameSystem.id))return this.gameSystem;if(Qn.targetId in this.catalogueFiles)return this.catalogueFiles[Qn.targetId];const er=await db.catalogues.get({"content.catalogue.id":Qn.targetId});if(er)return er.content;const tr=await db.systems.get(Qn.targetId);if(tr)return tr.content;const nr=Qn.name?`name ${Qn.name}`:`id ${Qn.targetId}`;throw Error(`Couldn't import catalogue with ${nr}, perhaps it wasnt uploaded?`)}}const fixLinkNames={name:"Fix link names",arguments:[{name:"catalogues",type:"catalogue[]"}],run:Jn=>{const Xn=[];for(const Qn of Jn)Qn.forEachObjectWhitelist(Zn=>{Zn.target&&Zn.name!==Zn.target.name&&(Xn.push([Zn,`${Zn.name} -> ${Zn.target.name}`]),$store.edit_node(Zn,{name:Zn.target.name}))});return Xn}},fixProfiles={name:"Fix profiles",arguments:[{name:"catalogues",type:"catalogue[]"}],run:Jn=>{const Xn=[],Qn=[];Jn.map(Zn=>Zn.processForEditor());for(const Zn of Jn)Zn.forEachObjectWhitelist(er=>{var tr,nr,rr,sr,or,ir,ar,lr,cr,dr;if(er.isProfile()&&!er.isLink()&&er.typeId){const hr=er.catalogue.findOptionById(er.typeId);if(!hr)return;hr.name!==er.typeName&&(Xn.push([er,`fixed typeName: ${er.typeName} -> ${hr.name}`]),$store.edit_node(er,{typeName:hr.name}));for(const gr of er.characteristics||[]){const mr=(tr=hr.characteristicTypes)==null?void 0:tr.find(_r=>_r.name===gr.name);mr&&gr.typeId!==mr.id&&(Xn.push([er,`fixed typeId: ${gr.name}`]),$store.edit_node(gr,{typeId:mr.id}))}for(const gr of er.attributes||[]){const mr=(nr=hr.attributeTypes)==null?void 0:nr.find(_r=>_r.name===gr.name);mr&&gr.typeId!==mr.id&&(Xn.push([er,`fixed typeId: ${gr.name}`]),$store.edit_node(gr,{typeId:mr.id}))}for(const gr of er.characteristics||[]){const mr=(rr=hr.characteristicTypes)==null?void 0:rr.find(_r=>_r.id===gr.typeId);mr&&gr.name!==mr.name&&(Xn.push([er,`fixed characteristic name: ${gr.name} -> ${mr.name}`]),$store.edit_node(gr,{name:mr.name}))}for(const gr of er.attributes||[]){const mr=(sr=hr.attributeTypes)==null?void 0:sr.find(_r=>_r.id===gr.typeId);mr&&gr.name!==mr.name&&(Xn.push([er,`fixed attribute name: ${gr.name} -> ${mr.name}`]),$store.edit_node(gr,{name:mr.name}))}const pr=((or=hr.characteristicTypes)==null?void 0:or.filter(gr=>{var mr;return!((mr=er.characteristics)!=null&&mr.find(_r=>_r.typeId===gr.id))}))||[],fr=(ir=er.characteristics)==null?void 0:ir.find((gr,mr)=>{var _r;return mr!==((_r=hr.characteristicTypes)==null?void 0:_r.findIndex(wr=>wr.id===gr.typeId))});if(pr.length||fr){const gr=[],mr=[...er.characteristics||[]];for(const _r of pr)mr.push({name:_r.name,typeId:_r.id,$text:""}),Xn.push([er,`added missing characteristic: ${_r.name}`]);fr&&Xn.push([er,"fixed characteristics order"]);for(const _r of mr){const wr=(ar=hr.characteristicTypes)==null?void 0:ar.findIndex(yr=>yr.id===_r.typeId);wr>=0?gr[wr]=_r:(Qn.push([[er,`removed extra characteristic: ${_r.name}`]]),Qn.push(`<pre style="background-color: rgba(0,0,0,0.1); border: 1px solid rgba(0.5,0.5,0.5,0.15)">${_r.$text}</pre><hr class="gray" style="border-bottom: none;"/>`))}$store.edit_node(er,{characteristics:gr})}const ur=((lr=hr.attributeTypes)==null?void 0:lr.filter(gr=>{var mr;return!((mr=er.attributes)!=null&&mr.find(_r=>_r.typeId===gr.id))}))||[],br=(cr=er.attributes)==null?void 0:cr.find((gr,mr)=>{var _r;return mr!==((_r=hr.attributeTypes)==null?void 0:_r.findIndex(wr=>wr.id===gr.typeId))});if(ur.length||br){const gr=[],mr=[...er.attributes||[]];for(const _r of ur)mr.push({name:_r.name,typeId:_r.id,$text:""}),Xn.push([er,`added missing attribute: ${_r.name}`]);br&&Xn.push([er,"fixed attributes order"]);for(const _r of mr){const wr=(dr=hr.attributeTypes)==null?void 0:dr.findIndex(yr=>yr.id===_r.typeId);wr>=0?gr[wr]=_r:(Qn.push([[er,`removed extra attribute: ${_r.name}`]]),Qn.push(`<pre style="background-color: rgba(0,0,0,0.1); border: 1px solid rgba(0.5,0.5,0.5,0.15)">${_r.$text}</pre><hr class="gray" style="border-bottom: none;"/>`))}$store.edit_node(er,{attributes:gr})}}});return Qn.length===0&&Xn.length===0?["No Issues found"]:[...Qn,Xn]}},listRefs={name:"List used imports",description:"Lists what a catalogue uses from an imported catalogue, can used to find out if an import is not necesarry",arguments:[{name:"catalogue",type:"catalogue"},{name:"catalogue (imported)",type:"catalogue[]"}],run(Jn,Xn){const Qn=[];for(const Zn of Xn){if(!Jn.imports.find(er=>er.name===Zn.name)&&Xn.length===1)throw new Error(`${Jn.name} doesn't import ${Zn.name}`);if(Zn.forEachObjectWhitelist(er=>{for(const tr of er.refs||[])if(tr.catalogue.name===Jn.name){Qn.push(er);break}for(const tr of er.other_refs||[])if(tr.catalogue.name===Jn.name){Qn.push(er);break}}),Jn.importsWithEntries.find(er=>er.name===Zn.name)){for(const er of Zn.selectionEntries||[])er.import!==!1&&Qn.push([er,"root"]);for(const er of Zn.entryLinks||[])er.import!==!1&&Qn.push([er,"root"])}}return Qn}};function getParents(Jn){const Xn=[];let Qn=Jn;for(;Qn.parent;)Xn.push(Qn.parent),Qn=Qn.parent;return Xn}function getParentsAndSelf(Jn){const Xn=[Jn];let Qn=Jn;for(;Qn.parent;)Xn.push(Qn.parent),Qn=Qn.parent;return Xn}class NodeView{constructor(Xn){Sr(this,"iter");Sr(this,"followTargets",!1);this.iter=Xn}self(Xn){const Qn=[];for(const Zn of this.iter)Xn(Zn)&&Qn.push(Zn);return this.return(Qn)}map(Xn){const Qn=[];for(const Zn of this.iter)Qn.push(Xn(Zn));return Qn}descendant(Xn){const Qn=[];for(const Zn of this.iter)Zn.forEachObjectWhitelist(er=>{const tr=Xn(er);return tr&&Qn.push(er),tr});return this.return(Qn)}child(Xn){const Qn=[];for(const Zn of this.iter)Zn.forEachObjectWhitelist(er=>{const tr=Xn(er);return tr&&Qn.push(er),tr},void 0,2);return this.return(Qn)}parent(Xn){const Qn=[];for(const Zn of this.iter)Zn.parent&&Xn(Zn.parent)&&Qn.push(Zn.parent);return this.return(Qn)}ancestor(Xn){const Qn=[];for(const Zn of this.iter)for(const er of getParents(Zn)){const tr=Xn(er);if(tr){Qn.push(tr);break}if(tr===!1)break}return this.return(Qn)}has_descendant(Xn){const Qn=[];for(const Zn of this.iter)Zn.find_recursive(Xn,this.followTargets)&&Qn.push(Zn);return this.return(Qn)}has_descendant_or_self(Xn){const Qn=[];for(const Zn of this.iter)(Xn(Zn)||Zn.find_recursive(Xn,this.followTargets))&&Qn.push(Zn);return this.return(Qn)}has_child(Xn){const Qn=[];for(const Zn of this.iter)Zn.find(Xn,this.followTargets)&&Qn.push(Zn);return this.return(Qn)}has_child_or_self(Xn){const Qn=[];for(const Zn of this.iter)(Xn(Zn)||Zn.find(Xn,this.followTargets))&&Qn.push(Zn);return this.return(Qn)}has_parent(Xn){const Qn=[];for(const Zn of this.iter)Zn.parent&&Xn(Zn.parent)&&Qn.push(Zn);return this.return(Qn)}has_parent_or_self(Xn){const Qn=[];for(const Zn of this.iter)(Xn(Zn)||Zn.parent&&Xn(Zn.parent))&&Qn.push(Zn);return this.return(Qn)}has_ancestor(Xn){const Qn=[];for(const Zn of this.iter)for(const er of getParents(Zn))if(Xn(er)){Qn.push(Zn);break}return this.return(Qn)}has_ancestor_or_self(Xn){const Qn=[];for(const Zn of this.iter)for(const er of getParentsAndSelf(Zn))if(Xn(er)){Qn.push(Zn);break}return this.return(Qn)}hasnot_descendant(Xn){const Qn=[];for(const Zn of this.iter)Zn.find_recursive(Xn,this.followTargets)||Qn.push(Zn);return this.return(Qn)}hasnot_descendant_or_self(Xn){const Qn=[];for(const Zn of this.iter)!Xn(Zn)&&!Zn.find_recursive(Xn,this.followTargets)&&Qn.push(Zn);return this.return(Qn)}hasnot_child(Xn){const Qn=[];for(const Zn of this.iter)Zn.find(Xn,this.followTargets)||Qn.push(Zn);return this.return(Qn)}hasnot_child_or_self(Xn){const Qn=[];for(const Zn of this.iter)!Xn(Zn)&&!Zn.find(Xn,this.followTargets)&&Qn.push(Zn);return this.return(Qn)}hasnot_parent(Xn){const Qn=[];for(const Zn of this.iter)(!Zn.parent||!Xn(Zn.parent))&&Qn.push(Zn);return this.return(Qn)}hasnot_parent_or_self(Xn){const Qn=[];for(const Zn of this.iter)!Xn(Zn)&&!(Zn.parent&&Xn(Zn.parent))&&Qn.push(Zn);return this.return(Qn)}hasnot_ancestor(Xn){const Qn=[];for(const Zn of this.iter){for(const er of getParents(Zn))if(Xn(er))break;Qn.push(Zn)}return this.return(Qn)}hasnot_ancestor_or_self(Xn){const Qn=[];for(const Zn of this.iter){for(const er of getParentsAndSelf(Zn))if(Xn(er))break;Qn.push(Zn)}return this.return(Qn)}return(Xn){const Qn=new NodeView(Xn);return Qn.followTargets=this.followTargets,Qn}}const select={name:"Select nodes",arguments:[{name:"catalogues",type:"catalogue[]"},{name:"query (js)",type:"string"}],run(from,query){const all=[];from.forEach(Jn=>Jn.forEachObjectWhitelist(Xn=>all.push(Xn))),globalThis.$view=new NodeView(all);const evaled=eval(`$view.${query}`),result=Array.isArray(evaled)?evaled:evaled.iter||evaled;return $store.set_selections(result),[`Selected ${result.length} nodes: <code>$store.get_selections())</code>`,result]}},listAutomaticRefs={name:"List all rule/profile text refs",description:"Lists all rules/profiles that are referenced in other rule/profile texts, sorted by most referenced. Optionally filter by name to only show references to a specific rule/profile.",arguments:[{name:"catalogues",type:"catalogue[]"},{name:"filter",type:"string",optional:!0,description:"Leave empty to list all. or show references to (exact match)"}],run(Jn,Xn){const Qn=[],Zn=Jn[0].getSystem(),er=new(Object.getPrototypeOf(Zn.infoIndex)).constructor;for(const ar of Jn)ar.forEachObjectWhitelist(lr=>{if(!lr.isLink()&&(lr.isProfile()||lr.isRule())&&((!Xn||lr.getName()===Xn)&&er.add(lr.getName(),lr),lr.alias))for(const cr of lr.alias){const dr=clone(lr);dr.name=cr,(!Xn||cr===Xn)&&er.add(cr,dr)}});const tr={},nr={},rr=[];for(const ar of Jn)ar.forEachObjectWhitelist(lr=>{var cr;if(!lr.isLink()){let dr=!1;lr.isProfile()?(cr=lr.characteristics)==null||cr.forEach(hr=>{er.match(hr.$text).forEach(pr=>{var fr;(fr=pr.match)!=null&&fr.length&&pr.match[0].getName()!==lr.getName()&&(tr[pr.match[0].getName()]=(tr[pr.match[0].getName()]||0)+1,nr[pr.match[0].getName()]=pr.match,Xn&&!dr&&rr.push(hr))})}):lr.isRule()&&er.match(lr.description).forEach(hr=>{var pr;(pr=hr.match)!=null&&pr.length&&hr.match[0].getName()!==lr.getName()&&(tr[hr.match[0].getName()]=(tr[hr.match[0].getName()]||0)+1,nr[hr.match[0].getName()]=hr.match,Xn&&!dr&&rr.push(lr))})}});const sr=sortByDescendingInplace(Object.entries(tr),ar=>ar[1]),or=[];Qn.push(or);function ir(ar){var lr,cr;return(((lr=ar.refs)==null?void 0:lr.length)||0)+(((cr=ar.other_refs)==null?void 0:cr.length)||0)}for(const[ar,lr]of sr)for(const cr of nr[ar])or.push([cr,`${lr} text refs, ${ir(cr)} actual refs`]);if(rr.length){Qn.push('<div class="bold">References:</div>');for(const ar of rr){Qn.push([ar]);const lr=ar.$text??ar.description??"",cr=er.match(lr).map(dr=>dr.match?`<b>${dr.text}</b>`:dr.text).join("");Qn.push(`<div class="gray" style="padding-left: 18px; white-space: pre-wrap;">${cr}</div>`)}}return Qn}},pasteSpecialRule={name:"[TOW 1] Paste Special Rule",hooks:{paste(Jn,Xn){if(typeof Xn!="string"||!["M","WS","BS","S","T","W","I","A","Ld"].find(tr=>!Xn.includes(tr))||!["R","S","AP","Special Rules"].find(tr=>!Xn.includes(tr)))return;const Qn=Xn.replace(/\r\n/g,`
`).split(`
`),Zn=Qn.shift();return{parentKey:"profiles",characteristics:[{$text:Qn.join(`
`),name:"Description",typeId:"9f84-4221-785a-db50"}],name:Zn,typeId:"c1ac-c1c8-f9d5-9673",typeName:"Special Rule"}}}};function toWeaponProfile(Jn){return{parentKey:"profiles",name:Jn.Name,typeId:"a378-c633-912d-11ce",typeName:"Weapon",characteristics:[{name:"R",typeId:"2360-c777-5e07-ed58",$text:Jn.Stats.R},{name:"S",typeId:"ac19-f99c-72e9-a1a7",$text:Jn.Stats.S},{name:"AP",typeId:"9429-ffe7-2ce5-e9a5",$text:Jn.Stats.AP},{name:"Special Rules",typeId:"5f83-3633-336b-93b4",$text:Jn.Stats["Special Rules"]},{name:"Notes",typeId:"772a-a7ff-f6b3-df71",$text:Jn.Stats.Notes}]}}function lastItem(Jn){return Jn[Jn.length-1]}const pasteWeapons={name:"[TOW 2] Paste Weapon",hooks:{paste(Jn,Xn){if(typeof Xn!="string"||!["M","WS","BS","S","T","W","I","A","Ld"].find(tr=>!Xn.includes(tr))||["R","S","AP","Special Rules"].find(tr=>!Xn.includes(tr)))return;const Qn=Xn.replace(/\r\n/g,`
`).split(`
`).filter(tr=>tr);let Zn="weaponsTable";const er=[];for(let tr=0;tr<Qn.length;tr++){const nr=Qn[tr];if(nr.includes("R")&&nr.includes("S")&&nr.includes("AP")&&nr.includes("Special Rules")){Zn="weaponsTable";continue}else nr.startsWith("Notes:")&&(Zn="notes");if(Zn==="weaponsTable"&&nr){const[rr,sr,or,ir,ar]=nr.replace(/\t|\s{2,}/g,"  ").split("  ");er.push({Name:rr,Stats:{R:sr,S:or,AP:ir,"Special Rules":ar,Notes:""}})}if(Zn==="notes"){const rr=lastItem(er);rr!=null&&rr.Stats.Notes&&(rr.Stats.Notes+=nr)}}return er.map(tr=>toWeaponProfile(tr))}}};function hashFnv32a(Jn,Xn=198209835){let Qn,Zn,er=Xn===void 0?2166136261:Xn;for(Qn=0,Zn=Jn.length;Qn<Zn;Qn++)er^=Jn.charCodeAt(Qn),er+=(er<<1)+(er<<4)+(er<<7)+(er<<8)+(er<<24);return(er>>>0).toString(16)}function id(Jn){return`${hashFnv32a(Jn)}-${hashFnv32a(Jn+"------")}`}function removeTextInParentheses(Jn){return Jn.replace(/\([^()]*\)/g,"")}function extractTextAndDetails(Jn){const Xn=[];let Qn=!1,Zn={text:"",details:""};for(let er=0;er<Jn.length;er++){const tr=Jn[er];if(tr==="("){Qn=!0;continue}else if(tr===")"){Qn=!1,Xn.push({...Zn}),Zn.text="",Zn.details="";continue}Qn?Zn.details+=tr:Zn.text+=tr}Zn.text.trim()&&Xn.push(Zn);for(const er of Xn)er.text=removePrefix$2(er.text.trim(),", "),er.details.trim()||(er.details=null);return Xn}function sortByAscending$1(Jn,Xn){return[...Jn].sort((Qn,Zn)=>(Xn(Qn)??"").toString().localeCompare((Xn(Zn)??"").toString(),void 0,{numeric:!0}))}function isSameCharacteristics(Jn,Xn){const Qn=sortByAscending$1(Jn,er=>er.name).map(er=>er.$text).join("::"),Zn=sortByAscending$1(Xn,er=>er.name).map(er=>er.$text).join("::");return Qn===Zn}function splitByCenterDot(Jn){if(!Jn.includes("•"))return{all:Jn};const Xn=Jn.split("•").filter(Boolean),Qn={all:""};return Xn.forEach(Zn=>{const[er,...tr]=Zn.split(":"),nr=tr.join(":").trim(),rr=replaceSuffix(removeSuffix(er.trim(),"s"),"ve","f");for(const sr of rr.split("/").map(or=>or.trim()))Qn[sr]=nr}),Qn}function removeSuffix(Jn,Xn){return Jn.endsWith(Xn)?Jn.substring(0,Jn.length-Xn.length):Jn}function removePrefix$2(Jn,Xn){return Jn.startsWith(Xn)?Jn.substring(Xn.length):Jn}function replaceSuffix(Jn,Xn,Qn){return Jn.endsWith(Xn)?Jn.slice(0,-Xn.length)+Qn:Jn}function splitAnd(Jn){return Jn.split(/, | and /).map(Qn=>removePrefix$2(removePrefix$2(Qn.trim(),"a "),"and "))}function parseSpecialRule(Jn){const Xn=/^([^(]+?)([*]*)(?:\s*[(]([^)]+)[)])?([*]*)$/,Qn=Jn.trim().match(Xn);if(!Qn)return console.warn("Couldn't parse rule "+Jn),{};let Zn=Qn[1].trim(),er=null,tr=null,nr=Qn[2].length+Qn[4].length;if(Qn[3]){const rr=Qn[3].split(", ");er=rr[0],rr.length===1&&(tr=rr[1]),rr.length>2&&console.log(`${Jn} has more text within parentheses that is not handled.`)}return Zn=Zn.replace("\x07 ",""),Zn=Zn.replace("\x07",""),Zn.startsWith("Poisoned Attacks")&&Zn.includes("*Note")&&(Zn="Poisoned Attacks"),{ruleName:Zn,param:er,specification:tr,asterisks:nr}}function toTitleCase(Jn){return Jn.split(" ").map(Xn=>Xn.charAt(0).toUpperCase()+Xn.slice(1).toLowerCase()).join(" ")}function toModelProfile(Jn,Xn){const{ruleName:Qn,param:Zn}=parseSpecialRule(Jn.Name),er=Jn.Stats,tr={characteristics:[{name:"M",typeId:"cd3b-a5a4-e185-5a9d",$text:er.M??"-"},{name:"WS",typeId:"b007-7d58-4f14-1e01",$text:er.WS??"-"},{name:"BS",typeId:"59f9-ccf5-1155-fb05",$text:er.BS??"-"},{name:"S",typeId:"5b6b-1427-2a45-dd0c",$text:er.S??"-"},{name:"T",typeId:"ab43-8b61-83e7-d090",$text:er.T??"-"},{name:"W",typeId:"83ed-7b82-bf1f-e558",$text:er.W??"-"},{name:"I",typeId:"73b1-abe5-72f8-41e2",$text:er.I??"-"},{name:"A",typeId:"dddc-9fbd-b0fd-a480",$text:er.A??"-"},{name:"Ld",typeId:"c435-6b14-f77e-3c72",$text:er.Ld??"-"}],name:Qn,hidden:!1,typeId:"b070-143a-73f-2772",typeName:"Model"};return Xn&&(tr.comment=`${Xn}/${Qn}`),tr}function toSpecialRule(Jn,Xn){return{name:Jn,hidden:!1,typeId:"c1ac-c1c8-f9d5-9673",typeName:"Special Rule",characteristics:[{name:"Description",typeId:"9f84-4221-785a-db50",$text:Xn}]}}function toUnitProfile(Jn,Xn){if(!Xn.Subheadings["Troop Type:"]||!Xn.Subheadings["Unit Size:"]){console.log(`Couldn't make Unit profile for ${Jn} (missing data) in `,Xn);return}return{characteristics:[{name:"Troop Type",typeId:"5d94-6b94-bd89-1944",$text:Xn.Subheadings["Troop Type:"]},{name:"Unit Size",typeId:"80a1-bb6f-66e4-4a5b",$text:Xn.Subheadings["Unit Size:"]}],name:Jn,typeId:"2878-9a1f-dd74-48e3",typeName:"Unit",hidden:!1,id:id(`${Jn}/unit/profile`)}}function toEquipment(Jn,Xn,Qn){return{name:Jn,id:id(`${Xn}/equipment/${Jn}`),hidden:!1,type:"selectionEntry",targetId:Qn??Jn,modifiers:[],constraints:[{type:"min",value:1,scope:"parent",shared:!1,field:"selections",id:id(`${Xn}/equipment/${Jn}/min`)},{type:"max",value:1,scope:"parent",shared:!1,field:"selections",id:id(`${Xn}/equipment/${Jn}/max`)}]}}function toGroup(Jn,Xn){return{name:Jn,hidden:!1,id:id(`${Xn}/${Jn}`),selectionEntries:[],entryLinks:[],constraints:[],modifiers:[]}}function getGroup(Jn,Xn,Qn){Jn.selectionEntryGroups||(Jn.selectionEntryGroups=[]);const Zn=Jn.selectionEntryGroups.find(tr=>tr.name===Xn);if(Zn)return Zn;const er=toGroup(Xn,Qn);return Jn.selectionEntryGroups.push(er),er}function parseDetails(Jn){const Xn=parseInt(Jn);return isNaN(Xn)?0:Xn}function toCost(Jn){Jn||(Jn=0);const Xn=typeof Jn=="string"?parseInt(Jn):Jn;return{name:"pts",typeId:"points",value:isNaN(Xn)?0:Xn}}function toEntry(Jn,Xn,Qn){if(!Jn)throw new Error("Cannot create entry with no name.");const Zn={name:Jn,id:id(`${Xn}/${Jn}`),costs:[],infoLinks:[],profiles:[],modifiers:[],entryLinks:[],type:"upgrade",import:!0,hidden:!1};return Qn&&Zn.costs.push(toCost(Qn)),Zn}function toProfileLink(Jn,Xn,Qn){if(!Jn)throw new Error("Cannot create profile link with no name.");return{name:Jn,hidden:!1,type:"profile",id:id(`${Xn}/${Jn}`),targetId:Qn}}function toEntryLink(Jn,Xn,Qn){if(!Jn)throw new Error("Cannot create profile link with no name.");return{import:!0,name:Jn,hidden:!1,id:id(`${Xn}/${Jn}`),type:"selectionEntry",targetId:Qn??Jn,costs:[],modifiers:[],constraints:[]}}function toGroupLink(Jn,Xn,Qn){if(!Jn)throw new Error("Cannot create profile link with no name.");return{import:!0,name:Jn,hidden:!1,id:id(`${Xn}/${Jn}`),type:"selectionEntryGroup",targetId:Qn??Jn,costs:[],modifiers:[],constraints:[]}}function toMinConstraint(Jn,Xn){return{type:"min",value:Jn,field:"selections",scope:"parent",shared:!1,id:id(`${Xn}/min`)}}function toMaxConstraint(Jn,Xn,Qn="parent"){return{type:"max",value:Jn,field:"selections",scope:Qn,shared:!1,id:id(`${Xn}/max`),includeChildSelections:Qn!=="parent"}}function toSpecialRuleLink(Jn,Xn,Qn,Zn){const er={name:removeTextInParentheses(Jn),hidden:!1,id:id(`${Xn}/rule/${Jn}`),type:"profile",targetId:Qn??Jn,modifiers:[]};return Zn&&er.modifiers.push({type:"append",value:`(${Zn})`,field:"name"}),er}function getPerModelCostModifier(Jn,Xn){return{comment:"per model",type:"increment",value:parseDetails(Jn),field:"points",repeats:[{value:1,repeats:1,field:"selections",scope:"parent",childId:"model",shared:!0,roundUp:!1}]}}function toCategoryLink(Jn,Xn){return{name:Jn.name,hidden:!1,id:id(`${Xn}/${Jn.name}`),targetId:Jn.id,primary:!1}}function removePrefix$1(Jn,Xn){return Jn.startsWith(Xn)?Jn.substring(Xn.length):Jn}function removeUndefineds(Jn){for(const Xn in Jn)Jn[Xn]===void 0&&delete Jn[Xn];return Jn}class Parser{constructor(Xn){Sr(this,"source");Sr(this,"text");Sr(this,"parsed",[]);this.text=Xn,this.source=Xn}text_upto_token(Xn){if(!this.text)return null;const Zn=new RegExp(Xn.join("|"),"i").exec(this.text);if(!Zn)return null;const er=Zn.index,tr=this.text.substring(0,er).trim(),nr=Zn[0];this.text=this.text.substring(er+nr.length).trim();const rr=this.clean_text(tr);return rr&&this.parsed.push({text:rr,type:"text"}),this.parsed.push({text:nr,type:"token"}),nr}next_token(Xn,Qn=!1){if(!this.text)return null;for(const Zn of Xn)if(this.text.toLowerCase().startsWith(Qn?Zn+" ":Zn))return this.parsed.push({text:Zn,type:"token"}),this.text=this.text.substring(Zn.length).trim(),Zn;return null}clean_text(Xn){return Xn=removePrefix$1(Xn,"a "),Xn=removePrefix$1(Xn,"an "),Xn=removePrefix$1(Xn,"the "),Xn=removePrefix$1(Xn,"its "),Xn=Xn.replace(/ \(see .*\)/,""),Xn}remainder(){if(!this.text)return null;const Xn=this.clean_text(this.text);return Xn?(this.parsed.push({text:Xn,type:"text"}),this.text="",Xn):null}}function parseOptionsLine(Jn){if(Jn.includes("unless"))throw"cant parse 'unless' options";Jn=Jn.replace("may have may have","may have");const[Xn,Qn,Zn]=Jn.trim().match(/([^.]*)(?:[.]{2,})?([^.]*)?/);if(!Qn.startsWith("•")&&!Qn.startsWith("-"))return console.warn("invalid input",Qn),{tokens:[],source:Qn,details:Zn};const er=["may be mounted on a:","may be mounted on","may take:","may take","must take","must be mounted on","may have","must have","may be upgraded to","may replace","may purchase","may be:","may be","may upgrade","may:"],tr=["one of the following:","0-2 of the following","one of the following","any of the following:","up to a total of","up to","for every two","for every three","worth up to","a single"],nr=["any unit of","any unit","any model in the unit","the entire unit","one model","0-1 unit","on a","its","an","a:","a","the","any"],rr=["be a","purchase","be mounted on a","upgrade one model to","have","a","include one","upgrade one","may purchase","replace","be","add","magic items","take"],sr=["•","-"],or=new Parser(Qn);switch(or.next_token(sr)){case"•":{const ir=or.next_token(nr,!0);if(ir)switch(ir){case"a":case"an":case"0-1 unit":case"any unit of":case"the":case"any":switch(or.text_upto_token(er)){case"may be upgraded to":case"may be":case"may take":or.remainder();break;case"may replace":or.text_upto_token(["with:","with"]),or.remainder();break;default:or.text_upto_token(tr),or.remainder();break}break}const ar=or.next_token(er);if(ar)switch(ar){case"may replace":or.text_upto_token(["with:","with"]),or.remainder();break;case"may have":case"may take":case"may be":case"must take":or.next_token(tr),or.text_upto_token(tr),or.remainder();break;case"may be":or.next_token(er),or.remainder();break;case"may be mounted on":case"may be mounted on a:":case"may be upgraded to":case"must be mounted on":or.remainder();break;case"may purchase":or.text_upto_token(tr);break;case"may upgrade":or.text_upto_token(["to an","to a"]),or.remainder();break}else or.remainder()}break;case"-":switch(or.next_token(rr,!0)){case"be a":case"be mounted on a":case"upgrade one model to":case"have":case"be":case"add":or.remainder();break;default:or.text_upto_token(tr),or.remainder();break;case"take":case"purchase":case"may purchase":case"magic items":or.text_upto_token(tr),or.remainder();break;case"a":or.text_upto_token(er),or.text_upto_token(tr),or.remainder();break;case"include one":or.text_upto_token(["for every three","for every two"]),or.remainder();break;case"upgrade one":or.text_upto_token(["to"]),or.remainder();break;case"replace":or.text_upto_token(["with"]),or.remainder();break}break}return{tokens:or.parsed,details:Zn==null?void 0:Zn.trim(),source:or.source}}function processLines(Jn){const Xn=Jn.split(`
`).map(er=>er.trim());let Qn=[],Zn="";return Xn.forEach(er=>{er.startsWith("-")||er.startsWith("•")?(Zn.trim()&&Qn.push(Zn),Zn=er):Zn+=" "+er}),Zn!==""&&Qn.push(Zn),Qn}function parseOptions(Jn){const Qn=processLines(Jn).map(tr=>tr.replace(" // ","....")).filter(tr=>tr&&!tr.includes("Unless")).map(tr=>parseOptionsLine(tr));let Zn=null;const er=[];for(const tr of Qn)tr.tokens[0].text==="•"?(tr.childs=[],Zn=tr,er.push(tr)):Zn.childs.push(tr),tr.tokens.shift();return er}function toToken(Jn){return Jn.type==="text"?Jn.type:Jn.text}class TokenIterator{constructor(Xn){Sr(this,"tokens");Sr(this,"index",0);Sr(this,"last",[]);this.tokens=Xn}hasTokens(Xn){Xn=Array.isArray(Xn)?Xn:[Xn];for(let Qn=0;Qn<Xn.length;Qn++){const Zn=Xn[Qn],er=this.tokens[Qn+this.index];if(typeof Zn=="string"){if(toToken(er)!==Zn)return!1}else if(!Zn.includes(toToken(er)))return!1}return this.last=this.tokens.slice(this.index,this.index+Xn.length),this.index+=Xn.length,!0}next(){if(this.index>=this.tokens.length)return null;const Xn=this.tokens[this.index];return this.last=[Xn],this.index+=1,Xn}nextAlways(){if(this.index>=this.tokens.length)throw Error("nextAlways failed");return this.next()}maybeNextText(){for(;this.index<this.tokens.length;){const Xn=this.tokens[this.index];if(this.index+=1,Xn.type==="text")return this.last=[Xn],Xn}return null}nextText(){for(;this.index<this.tokens.length;){const Xn=this.tokens[this.index];if(this.index+=1,Xn.type==="text")return this.last=[Xn],Xn}throw Error("nextText failed")}lastText(){for(let Xn=this.last.length-1;Xn>=0;Xn--)if(this.last[Xn].type==="text")return this.last[Xn].text;return null}remaining(){return this.tokens.length-this.index}}function getScope(Jn){return Jn.hasTokens(["any model in the unit"])?{scope:"model",amount:"*"}:Jn.hasTokens(["the entire unit"])?{scope:"unit",amount:"*"}:Jn.hasTokens(["0-1 unit","in your army"])?{scope:"unit",amount:"1"}:Jn.hasTokens(["0-1 unit","text"])?{scope:"unit",amount:Jn.lastText()}:Jn.hasTokens([["any unit of"],"text"])?{scope:Jn.lastText(),amount:"*"}:Jn.hasTokens(["any unit"])?{scope:"unit",amount:"*"}:Jn.hasTokens([["any"],"text"])?{scope:Jn.lastText(),amount:"*"}:Jn.hasTokens([["a","an","the"],"text"])?{scope:Jn.lastText(),amount:"1"}:{scope:"self",amount:"*"}}function getGroupAmount(Jn){const Xn=Jn.nextAlways().text;switch(Xn){case"may:":case"may take:":case"may be":case"may be:":return"*";case"must take":const Qn=Jn.nextAlways().text;return Qn==="one of the following:"||Qn==="one of the following"?"1":(console.warn(`unparsed group (${Xn}) amount`,Qn),null);case"may take":case"may have":{const Zn=Jn.nextAlways().text;return Zn==="one of the following:"||Zn==="one of the following"?"0-1":Zn==="any of the following:"?"*":Zn==="0-2 of the following"?"0-2":(console.warn(`unparsed group (${Xn}) amount`,Zn),"*")}case"may replace":return"1";case"must be mounted on":return Jn.nextAlways(),"1";case"may be mounted on a:":case"may be mounted on":return"0-1";default:return console.warn("unparsed group amount",Xn,Jn),null}}function optionsToGroups(Jn){var er,tr,nr;const Xn=[],Qn=[];for(const rr of parseOptions(Jn)){const sr=new TokenIterator(rr.tokens);if(!rr.childs.length&&!rr.source.endsWith(":")){const{scope:pr,amount:fr}=getScope(sr),ur=toToken(sr.nextAlways()),br={scope:pr,amount:fr,details:rr.details,source:rr.source};switch(ur){case"text":Qn.push({...br,what:sr.lastText(),token:ur});break;case"may be":Qn.push({...br,what:(er=sr.maybeNextText())==null?void 0:er.text,token:ur});break;case"may have":case"may take":case"may be upgraded to":case"may be mounted on":Qn.push({...br,what:sr.nextText().text,token:ur}),sr.next();break;case"may purchase":Qn.push({...br,what:sr.nextText().text,token:ur}),sr.nextAlways();break;case"may upgrade":Qn.push({...br,what:sr.nextText().text,to:(tr=sr.nextText())==null?void 0:tr.text,type:"upgrade"});break;case"may replace":Qn.push({...br,what:sr.nextText().text,with:sr.nextText().text,type:"replace"});break;default:console.warn("unhandled token",ur)}sr.remaining()&&console.error(`didnt finish parsing (remaining ${sr.remaining()} tokens)`,rr.source);continue}const{scope:or,amount:ir}=getScope(sr),ar=getGroupAmount(sr)||rr.details,lr=sr.last[0].text==="may replace";let cr;lr&&(cr=sr.nextText(),sr.nextAlways());const dr=(nr=sr.next())==null?void 0:nr.text,hr={scope:or,amount:ir,groupAmount:ar,replace:cr,details:rr.details,specification:dr,entries:[],source:rr.source};for(const pr of rr.childs){const fr=new TokenIterator(pr.tokens),ur=toToken(fr.nextAlways()),br={scope:or,amount:ir,details:pr.details,source:pr.source,parentSource:rr.source};switch(ur){case"text":hr.entries.push({...br,what:fr.lastText(),details:pr.details,token:ur});break;case"a":case"an":const gr=fr.nextAlways().text;if(cr){hr.entries.push({...br,what:cr.text,with:gr,type:"replace"});break}hr.entries.push({...br,what:gr,details:pr.details});break;case"be a":case"be":case"add":case"be mounted on a":case"have":case"take":hr.entries.push({...br,what:fr.nextText().text,token:ur});break;case"may purchase":case"purchase":hr.entries.push({...br,what:fr.nextText().text}),fr.nextAlways();break;case"upgrade one":hr.entries.push({...br,what:fr.nextText().text,to:fr.nextText().text,type:"upgrade"});break;case"upgrade one model to":hr.entries.push({...br,what:"model",to:fr.nextText().text,type:"upgrade"});break;case"include one":hr.entries.push({...br,what:fr.nextText().text,for:fr.nextText().text,type:"include"});break;case"replace":hr.entries.push({...br,what:fr.nextText().text,with:fr.nextText().text,type:"replace"});break;case"magic items":fr.nextAlways(),hr.entries.push({...br,what:"magic items"});break;default:console.warn("unhandled token",ur),fr.remaining()&&console.error(`didnt finish parsing (remaining ${fr.remaining()} tokens)`,pr.source)}sr.remaining()&&console.error(`didnt finish parsing (remaining ${sr.remaining()} tokens)`,rr.source)}hr.entries=hr.entries.map(pr=>removeUndefineds(pr)),hr.groupAmount==="*"?Qn.push(...hr.entries):Xn.push(removeUndefineds(hr))}return Qn.forEach(rr=>removeUndefineds(rr)),{groups:Xn,entries:Qn}}function parseUnitText(Jn){function Xn(pr){return pr[pr.length-1]}function Qn(pr){return pr.replace(/,\s*\n\s*/g,", ")}const Zn=Qn(Jn.replaceAll("\r",`
`)).split(`
`).filter(pr=>pr).join(`
`);function er(pr){const fr=/(.*?)(Troop Type:.*)$/s,ur=pr.match(fr);return ur?[ur[1],ur[2]]:pr.includes("Points")&&pr.includes("WS")?[pr,""]:["",pr]}const[tr,nr]=er(Zn),rr={Subheadings:{},Name:"",Profiles:[],Points:null,ProfilesText:tr},sr=tr.split(`
`).filter(pr=>!pr.includes("Points")&&!pr.includes("WS"));for(const pr of sr){const fr=pr.replace(/\s+/g," ").trim().split(" ");fr.length<10||rr.Profiles.push({Stats:{Points:fr.pop(),Ld:fr.pop(),A:fr.pop(),I:fr.pop(),W:fr.pop(),T:fr.pop(),S:fr.pop(),BS:fr.pop(),WS:fr.pop(),M:fr.pop()},Name:fr.join(" ")})}const or=nr.split(`
`).filter(pr=>pr);let ir="preSpecialRules",ar=nr;const lr=[],cr=[];for(let pr=0;pr<or.length;pr++){const fr=or[pr];if(fr.startsWith("Special Rules:")){ir="specialRules";continue}else if(ir==="specialRules"){if(fr.startsWith("•"))continue;ar=or.slice(0,pr).join(`
`),ir="afterSpecialRules"}if(ir!=="preSpecialRules"){if(fr.includes(" R ")&&fr.includes(" S ")&&fr.includes(" AP ")){ir="weaponsTable",lr.push({rows:[]});continue}else fr.startsWith("Notes:")?ir="notes":ir==="afterSpecialRules"&&(ir="specialRuleDefinitions");if(ir==="weaponsTable"&&fr){const ur=Xn(lr),[br,gr,mr,_r,wr]=fr.replace(/\s{2,}/g,"  ").split("  ");ur.rows.push({Name:br,Stats:{R:gr,S:mr,AP:_r,"Special Rules":wr,Notes:""}})}if(ir==="notes"){const ur=Xn(lr),br=Xn(ur.rows);br.Stats.Notes&&(br.Stats.Notes+=fr)}if(ir==="specialRuleDefinitions")if(fr.match(/^[A-Z][a-z]*(?:\s[A-Z][a-z]*)*$/))cr.push({name:fr,description:""});else{const ur=Xn(cr);ur.description=`${ur.description} ${fr}`.trim()}}}const dr=/(?:^|\n)([A-Za-z\s]+):\s*(.*?)(?=\n[A-Za-z\s]+:|$)/gs;return[...ar.matchAll(dr)].forEach(pr=>{const fr=pr[1].trim()+":",ur=pr[2].trim();rr.Subheadings[fr]=ur}),cr.length&&(rr["Special Rules"]=cr),rr}function cmpItems(Jn,Xn){return Jn.toLowerCase().replace(/s/g,"")===Xn.toLowerCase().replace(/s/g,"")}function findProfile(Jn,Xn){var Qn,Zn;return Xn.comment?(Qn=Jn.sharedProfiles)==null?void 0:Qn.find(er=>er.comment===Xn.comment&&er.typeName===Xn.typeName):(Zn=Jn.sharedProfiles)==null?void 0:Zn.find(er=>er.name===Xn.name&&er.typeName===Xn.typeName)}function findImportedProfile(Jn,Xn,Qn){if(!Xn)return;const Zn=Xn.trim().toLowerCase();for(const er of[Jn,...Jn.imports])for(const tr of er.sharedProfiles||[]){if(!tr.getName())continue;const nr=removeSuffix(tr.getName().trim().toLowerCase()," (x)");if(Zn===nr&&tr.typeName===Qn)return tr}}function findImportedCategory(Jn,Xn){if(!Xn)return;const Qn=Xn.trim().toLowerCase();for(const Zn of[Jn,...Jn.imports])for(const er of Zn.categoryEntries||[])if(Qn===er.name.toLowerCase())return er}function findImportedEntry(Jn,Xn,Qn){const Zn=removeSuffix(Xn.trim().toLowerCase(),"s");if(Zn)for(const er of[Jn,...Jn.imports]){for(const tr of er.sharedSelectionEntries||[])if(tr.getType()===Qn&&tr.name.trim().toLowerCase()===Zn)return tr;for(const tr of er.sharedSelectionEntries||[])if(tr.getType()===Qn&&tr.name.trim().toLowerCase().includes(Zn))return tr}}function findUnitProfile(Jn,Xn,Qn,Zn){var tr,nr;const er=`${Xn}/${Qn}`;return((tr=Jn.sharedProfiles)==null?void 0:tr.find(rr=>rr.comment===er&&rr.typeName===Zn))??((nr=Jn.sharedProfiles)==null?void 0:nr.find(rr=>rr.name===Qn&&rr.typeName===Zn))}function findRootUnit(Jn,Xn){var Qn;return(Qn=Jn.entryLinks)==null?void 0:Qn.find(Zn=>Zn.name===Xn)}function splitSpecialRules(Jn){let Xn=[],Qn=0,Zn=0;for(let er=0;er<Jn.length;er++)Jn[er]==="("?Zn++:Jn[er]===")"?Zn--:Jn.substring(er,er+2)===", "&&Zn===0&&(Xn.push(Jn.substring(Qn,er)),Qn=er+2,er++);return Xn.push(Jn.substring(Qn)),Xn}function getSpecialRules(Jn,Xn,Qn,Zn){const er=Zn?`${Xn}/${Zn}`:Xn,tr={infoLinks:[],name:"Special Rules",hidden:!1,id:id(`${er}/specialRules`)};if(Qn.Subheadings["Special Rules:"]){const nr=parseUnitField(Qn.Subheadings["Special Rules:"]),rr=Zn?getSpecific(nr,Zn):nr.all;if(rr)for(const sr of splitSpecialRules(rr)){const{ruleName:or,param:ir}=parseSpecialRule(sr),ar=findImportedProfile(Jn,or,"Special Rule");if(!ar){tr.infoLinks.push(toSpecialRuleLink(sr,er,or||"undefined rulename",ir)),console.log(`[SPECIAL RULES] Couldn't find Special Rule from ${er}: ${or}`);continue}tr.infoLinks.push(toSpecialRuleLink(sr,er,ar.id,ir))}}return!Zn&&Qn.Subheadings["Armour Value:"]&&tr.infoLinks.push(getArmourValueProfile(Jn,Xn,Qn.Subheadings["Armour Value:"])),tr}function getArmourValueProfile(Jn,Xn,Qn){const Zn=findImportedProfile(Jn,"Armour Value","Armour");return{name:"Armour Value",hidden:!1,id:id(`${Xn}/armourValue`),type:"profile",targetId:(Zn==null?void 0:Zn.id)??`Armour Value ${Qn}`,modifiers:[{type:"append",value:`: ${Qn}`,field:"name"}]}}function cmpModel(Jn,Xn){return Jn=Jn.toLowerCase(),Jn=Jn.replace(/ie$/,"y"),Jn=Jn.replace(/men$/,"man"),Jn=Jn.replace(/s/,""),Xn=Xn.toLowerCase(),Xn=Xn.replace(/ie$/,"y"),Xn=Xn.replace(/men$/,"man"),Xn=Xn.replace(/s/,""),Jn===Xn}function cmpModel2(Jn,Xn){return Jn=Jn.toLowerCase(),Jn=Jn.replace(/ie$/,"y"),Jn=Jn.replace(/men$/,"man"),Jn=Jn.replace(/s/,""),Xn=Xn.toLowerCase(),Xn=Xn.replace(/ie$/,"y"),Xn=Xn.replace(/men$/,"man"),Xn=Xn.replace(/s/,""),Jn.includes(Xn)||Xn.includes(Jn)}function getSpecific(Jn,Xn){const Qn=Xn;if(Jn[Xn]){if(Jn[Xn]||(Xn=Xn.replace(/ie$/,"y"),Xn=Xn.replace(/men$/,"man"),Jn[Xn]))return Jn[Xn]}else{const Zn=Qn.replace(/s/g,"");for(const er in Jn){const tr=er.replace(/s/g,"");if(er!=="all"&&(tr.includes(Zn)||Zn.includes(tr)))return Jn[er]}}}function getEquipment(Jn,Xn,Qn,Zn){const er=[],tr=Zn.Subheadings["Equipment:"];if(tr){const nr=parseUnitField(tr),rr=[];nr.all&&rr.push(...parseEquipment(nr.all));const sr=getSpecific(nr,Qn);sr&&rr.push(...parseEquipment(sr));for(const or of rr){for(const ir of splitAnd(or.text)){let ar=findImportedEntry(Jn,ir,"upgrade");if(!ar)if(!or.details)console.log(`[EQUIPMENT] Couldn't find Entry ${ir}`);else continue;er.push(toEquipment(ir,`${Xn}/${Qn}`,(ar==null?void 0:ar.id)??ir))}if(or.details)for(const ir of splitAnd(or.details)){let ar=findImportedEntry(Jn,ir,"upgrade");ar||console.log(`[EQUIPMENT] Couldn't find Entry(${ir}) From: ${or.text}/${or.details} ${ir}`),er.push(toEquipment((ar==null?void 0:ar.name)??ir,`${Xn}/${Qn}`,(ar==null?void 0:ar.id)??ir))}}}return er}function getModelEntry(Jn,Xn,Qn,Zn){var hr;const{ruleName:er,param:tr}=parseSpecialRule(Qn.Name),nr=er,rr=findUnitProfile(Jn,Xn,nr,"Model");if(!rr){console.error(`Couldn't find shared profile for ${Xn}/${nr}`);return}const sr=Qn.Stats.Points==="-"?0:Number(Qn.Stats.Points);isNaN(sr)&&console.log(`[MODEL] got a NaN cost in ${Xn}/${nr}`);const or=`${Xn}/model/${nr}`,ir={type:"model",subType:nr.includes("Crew")?"crew":void 0,name:nr,id:id(or),hidden:!1,infoLinks:[{name:nr,hidden:!1,type:"profile",id:id(`${or}/profile`),targetId:rr.id}],costs:[{name:"pts",typeId:"points",value:sr}],entryLinks:[],infoGroups:[],profiles:[],selectionEntries:[],selectionEntryGroups:[],constraints:[],categoryLinks:[]};if(tr){const pr=parseInt(tr.replace(/x/,""));ir.constraints.push(toMinConstraint(pr,or),toMaxConstraint(pr,or))}const ar=((hr=Zn.Subheadings["Base Size:"])==null?void 0:hr.split(", "))||[],lr=getBase(Jn,ar,Qn);if(lr)ir.infoLinks.push({name:"Base",hidden:!1,type:"profile",id:id(`${Xn}/${nr}/base`),targetId:lr.id});else{const pr=`[BASE] ${ar}`;ir.entryLinks.push(toEntryLink(pr,`${ir.name}/bug/base`,pr))}const cr=getEquipment(Jn,Xn,nr,Zn);cr.length&&ir.entryLinks.push(...cr);const dr=getSpecialRules(Jn,Xn,Zn,nr);if(dr.infoLinks.length&&ir.infoGroups.push(dr),Zn.Subheadings["Troop Type:"]){const pr=Zn.Subheadings["Troop Type:"].replace("(champion)","").replace("(character)","").trim(),fr=findImportedCategory(Jn,pr);fr?ir.categoryLinks.push(toCategoryLink(fr,`${Xn}/${ir.name}`)):console.error(`Couldn't find imported category ${pr}`)}return ir}function getConstraints(Jn,Xn,Qn){function Zn(rr){return{type:"min",value:rr,field:"selections",scope:"parent",shared:!0,id:id(`${Xn}/min`)}}function er(rr){return{type:"max",value:rr,field:"selections",scope:"parent",shared:!0,id:id(`${Xn}/max`)}}const tr=[Zn(parseInt(Qn))],nr=Qn.match(/([0-9]+)[-]([0-9]+)/);return nr?tr.push(er(nr[2])):Qn.endsWith("+")||tr.push(er(parseInt(Qn))),tr}function getBase(Jn,Xn,Qn){function Zn(er){const tr=/(\d+)\s*x\s*(\d+)/i,nr=er.match(tr);return nr?`${nr[1]}x${nr[2]}`:null}if(Xn.length){let er=Xn[0];return Qn.Name.toLowerCase().includes("Crew")&&(er=Xn.find(nr=>nr.includes("crew"))??Xn[0]),er==="N/A"?null:findImportedProfile(Jn,`Base (${Zn(er)})`,"Base")}}function updateProfile(Jn,Xn){const Qn=findProfile(Jn,Xn);return Qn?(isSameCharacteristics(Qn.characteristics,Xn.characteristics)||(Qn.characteristics=Xn.characteristics),Qn):$store.add_node("sharedProfiles",Jn,Xn)}function parseUnitField(Jn){const Xn=Jn.replace(/([\n]|\s)+/g," ");return splitByCenterDot(Xn)}function removePrefix(Jn,Xn){return Jn.startsWith(Xn)?Jn.substring(Xn.length):Jn}function parseEquipment(Jn){const Xn=extractTextAndDetails(Jn);for(const Qn of Xn)if(Qn.details!==null){if(Qn.details.includes("see below")){Qn.details=null;continue}if(Qn.details.includes("see page")){Qn.details=null;continue}Qn.details.startsWith("counts as ")&&(Qn.details=removePrefix(Qn.details,"counts as "))}return Xn}function commonGroups(Jn,Xn){switch(Jn=Jn.toLowerCase(),Jn){case"magic items":return"Magic Items";case"magic standard":return"Magic Standard";case"daemonic icon":return"Daemonic Icons";case"daemonic gifts":return"Daemonic Gifts";case"vampiric powers":return"Vampiric Powers";case"big name":return"Big Name";default:return Jn.includes("special rule")||Xn!=null&&Xn.includes("special rule")?"Special Rules":Jn.includes("level")?"Wizard Level":Jn.includes("mount")||Xn!=null&&Xn.includes("mount")?"Mount":Jn.includes("daemon")&&Jn.includes("of")?"Special Rules":"Equipment"}}function findModel(Jn,Xn){return Jn.find(Zn=>cmpModel(Zn.name,Xn))??Jn.find(Zn=>cmpModel2(Zn.name,Xn))}function findModels(Jn,Xn){return Jn.filter(Zn=>cmpModel(Zn.name,Xn))??Jn.filter(Zn=>cmpModel2(Zn.name,Xn))}async function modifyUnit(Jn,Xn,Qn){var ir,ar,lr,cr,dr,hr,pr,fr,ur,br,gr;const Zn=Xn.Name,er={type:"unit",import:!0,name:Zn,hidden:!1,profiles:[],selectionEntries:[],selectionEntryGroups:[],infoGroups:[],entryLinks:[],costs:[],constraints:[],categoryLinks:[],id:id(`${Zn}/unit`),collective:!1};if(Xn.Points){const mr=parseInt(Xn.Points);isNaN(mr)&&console.log(`[UNIT] got a NaN cost in Unit ${Zn}`),er.costs.push({name:"pts",typeId:"points",value:mr})}const tr=getSpecialRules(Jn,Zn,Xn);tr.infoLinks.length&&er.infoGroups.push(tr);const nr=toUnitProfile(Zn,Xn);nr&&er.profiles.push(nr),Xn.Profiles.length||console.log(`[UNIT] ${Zn} has no profiles`);const rr=[];for(const mr of Qn.localSelectionsIterator())if(mr.type==="model"){const _r={costs:[],entryLinks:[],infoGroups:[],profiles:[],selectionEntries:[],selectionEntryGroups:[],constraints:[],categoryLinks:[],infoLinks:[],...JSON.parse(mr.toJson())};er.selectionEntries.push(_r),rr.push(_r)}for(const mr of Xn.Profiles||[]){const _r=getModelEntry(Jn,Zn,mr,Xn);_r&&(er.selectionEntries.push(_r),rr.push(_r))}if(!rr.length){notify({text:"Add models entries first",type:"error"});return}if(Xn.Subheadings["Unit Size:"]){const mr=er.selectionEntries[0],_r=Xn.Subheadings["Unit Size:"].trim();if(!_r.match("^[0-9]+[+]?$")&&!_r.match(/([0-9])+[-]([0-9])+/)){const yr=`[UNIT SIZE] Unparsed value: ${_r}`;er.entryLinks.push(toEntryLink(yr,`${Zn}/bug`,yr))}const wr=getConstraints(Jn,`${Zn}/${mr.name}`,_r);mr.constraints=wr}else console.log(`[UNIT] ${Zn} has no Unit Size`);if(Xn.Subheadings["Troop Type:"]){if(Xn.Subheadings["Troop Type:"].toLowerCase().includes("character")){const mr=rr[0],_r="7d76-b1a1-1535-a04c";getGroup(mr,"Command",Zn).entryLinks.push(toEntryLink("General",`${Zn}/${mr.name}`,_r))}if(Xn.Subheadings["Troop Type:"].toLowerCase().includes("chariot"))for(const mr of rr.slice(1)){const _r=findImportedCategory(Jn,"CHARIOT CREW");_r?mr.categoryLinks.push(toCategoryLink(_r,`${Zn}/${mr.name}`)):console.error(`Couldn't find imported category ${_r}`)}}const sr=[];if(Xn.Subheadings["Magic:"]){const mr=Xn.Subheadings["Magic:"],_r=mr.split(`
`).map(yr=>yr.trim()).filter(yr=>yr.startsWith("•")).map(yr=>removePrefix(yr,"• ")),wr=mr.split(`
`).filter(yr=>!yr.includes("•")).map(yr=>yr.trim()).join(" ");for(const yr of wr.split(".").map(Cr=>Cr.trim())){if(yr.includes("knows")){const Pr=yr.match(/^(?:A|Every) (.*?) (?:that is a Wizard knows spells|knows spells|knows a spell) from(?: the)? (.*)? Lores? of Magic:?$/i);Pr&&sr.push({wizardModel:Pr[1],knowsFrom:_r.length?_r:[Pr[2]],requiresWizard:yr.includes("that is a Wizard"),isWizard:yr.includes("Every")});continue}const Cr=yr.match(/^AN? (.*) is a (.*)$/i);if(Cr){const[Pr,Tr,Rr]=Cr,Or=Rr.match(/\d+/)[0],$r=findModel(rr,Tr);if($r){const Gr=`Wizard Level ${Or}`,Hr=findImportedEntry(Jn,Gr,"upgrade"),Wr=getGroup($r,"Wizard Level",`${Zn}/${$r.name}`);Wr.constraints=[toMinConstraint(1,`${Zn}/${$r.name}/wizardlevel`),toMaxConstraint(1,`${Zn}/${$r.name}/wizardlevel`)];const Yr=toEntryLink(Gr,`${Zn}/${$r.name}`,Hr==null?void 0:Hr.id);Wr.entryLinks.push(Yr),Wr.defaultSelectionEntryId=Yr.id}else console.log([Cr[1],Cr[2]],"no model")}}}if(Xn.Subheadings["Options:"]){let _r=function(yr,Cr){if(Cr==="replace")return rr;if(yr==="self")return[rr[0]];if(yr==="unit")return[er];const Pr=findModel(rr,yr);return Pr?[Pr]:rr};const mr=optionsToGroups(Xn.Subheadings["Options:"]);console.log("Parsed options",mr);for(const yr of mr.groups)for(const Cr of _r(yr.scope,yr.amount)){const Pr=`${Zn}/${Cr.name}/${yr.entries.map(Gr=>Gr.what).join(",")}`,Tr=toGroup("Options",Pr),Rr=new Set;for(const Gr of yr.entries){const Hr=Gr.scope==="unit"&&((ir=Gr.details)==null?void 0:ir.includes("per model")),Wr=Gr.details?Hr?"0":parseDetails(Gr.details):0,Yr=Gr.what;let us=Gr.what.replace(/special rule(s)?/,"").replace(/^The /,"");const{ruleName:gs,param:vs}=parseSpecialRule(us),cs=toEntry(us,`${Pr}/${Yr}`,Wr);Hr&&cs.modifiers.push(getPerModelCostModifier(Gr.details)),cs.constraints=[toMaxConstraint(1,`${Pr}/${Yr}`)];const es=findImportedProfile(Jn,gs,"Special Rule");if(es){Rr.add("Special Rule"),cs.infoLinks.push(toSpecialRuleLink(gs,`${Pr}/${Yr}/link`,es==null?void 0:es.id,vs)),Tr.selectionEntries.push(cs);continue}const ps=findImportedEntry(Jn,Yr,"upgrade");if(!ps)console.log("Couldn't import profile",Zn,"/",Yr);else{for(const ns of(ps==null?void 0:ps.profiles)||[])ns.typeName&&Rr.add(ns.typeName);for(const ns of(ps==null?void 0:ps.infoLinks)||[])(ar=ns.target)!=null&&ar.typeName&&Rr.add(ns.target.typeName)}const ms=toEquipment(Yr,`${Pr}/${Yr}`,ps==null?void 0:ps.id);(lr=Tr.entryLinks)==null||lr.push(ms),ms.costs=[toCost(Wr)],ms.constraints=[],Hr&&ms.modifiers.push(getPerModelCostModifier(Gr.details))}const[Or,$r]=yr.groupAmount.split("-");Tr.constraints=[toMinConstraint(Or,`${Pr}`),toMaxConstraint($r,`${Pr}`)],Cr.selectionEntryGroups.push(Tr),yr.specification?Tr.name=toTitleCase(yr.specification).replace(":",""):(console.error(Zn,Rr),Rr.size===1&&Rr.has("Weapon")&&(Tr.name="Weapons"),Rr.size===1&&Rr.has("Armour")&&(Tr.name="Armour"),Rr.size===2&&Rr.has("Weapon")&&Rr.has("Armour")&&(Tr.name="Equipment"),Rr.size===1&&Rr.has("Special Rule")&&(Tr.name="Special Rules"))}const wr=[];for(const yr of mr.entries){const Cr=yr.scope==="unit"&&((cr=yr.details)==null?void 0:cr.includes("per model")),Pr=yr.details?Cr?"0":parseDetails(yr.details):0;if(yr.type==="upgrade"){const Tr=yr.to.replace(" (champion)",""),Rr=findModel(rr,Tr);if(Rr)er.selectionEntries=er.selectionEntries.filter(Or=>Or!==Rr);else{if(Tr.includes("musician")){const Or="40f2-dd77-f0ca-3663",$r=getGroup(er,"Command",Zn),Gr=toEntry("Musician",`${Zn}/command`,yr.details);Gr.comment=`upgrades: ${rr[0].id}`,Gr.infoLinks.push(toProfileLink("Musician",`${Zn}/command/profile`,Or)),Gr.constraints=[toMaxConstraint(1,`${Zn}/command/musician`)],Gr.subType="crew",Gr.type="model",$r.selectionEntries.push(Gr)}else if(Tr.includes("standard bearer")){const Or="bcf8-d942-102e-b155",$r=getGroup(er,"Command",Zn),Gr=toEntry("Standard Bearer",`${Zn}/command`,yr.details);Gr.infoLinks.push(toProfileLink("Standard Bearer",`${Zn}/command/profile`,Or)),Gr.comment=`upgrades: ${rr[0].id}`,Gr.constraints=[toMaxConstraint(1,`${Zn}/command/standard bearer`)],Gr.type="model",Gr.subType="crew",$r.selectionEntries.push(Gr)}else console.log(`Couldn't find model to upgrade ${Zn}/${Tr}`);continue}Rr.entryLinks=Rr.entryLinks.filter(Or=>Or.type!=="selectionEntry"),Rr.selectionEntryGroups=[],Rr.subType="crew",Rr.infoLinks.push(toProfileLink("Champion",`${Zn}/command`,"5f1c-fd04-b0d5-d5e")),Rr.constraints.push(toMaxConstraint(1,`${Zn}/${Rr.name}/champion`)),Rr.comment=`upgrades: ${rr[0].id}`,getGroup(er,"Command",Zn).selectionEntries.push(Rr)}else if(yr.type==="replace")for(const Tr of _r(yr.scope,yr.type)){const Rr=yr.what,Or=Tr.entryLinks.find(Yr=>cmpItems(Yr.name,Rr));if(Or)Tr.entryLinks=Tr.entryLinks.filter(Yr=>Yr!==Or);else{console.warn("Couldn't find weapon to replace",Zn,Tr.name,Rr,"with",yr.with);continue}const $r=getGroup(Tr,"Equipment",`${Zn}/${Tr.name}`),Gr=yr.with,Hr=findImportedEntry(Jn,Gr,"upgrade"),Wr=toEquipment((Hr==null?void 0:Hr.name)??Gr,`${Zn}/${Tr.name}`,Hr==null?void 0:Hr.id);Or.constraints=[],yr.scope==="unit"&&(Or.collective=!0,Wr.collective=!0,$r.collective=!0,Tr.collective=!0),Wr.constraints=[],Wr.costs=[toCost(yr.details)],Cr&&((dr=Wr.modifiers)==null||dr.push(getPerModelCostModifier(yr.details,`${Zn}/${Tr.name}/${Gr}`))),yr.amount!=="*"&&Wr.constraints.push(toMaxConstraint(yr.amount,`${Zn}/${Tr.name}/equipment/${yr.scope}`,"roster")),$r.defaultSelectionEntryId=Or.id,$r.entryLinks.push(Or),$r.entryLinks.push(Wr),$r.constraints=[toMinConstraint(1,`${Zn}/${Tr.name}/equipment`),toMaxConstraint(1,`${Zn}/${Tr.name}/equipment`)]}else{const Tr=yr.what;if(!Tr){console.error(Zn,yr,"no name");continue}const Rr=commonGroups(Tr,yr.token);for(const Or of _r(yr.scope,yr.amount))switch(Rr){case"Equipment":const $r=getGroup(Or,Rr,`${Zn}/${Or.name}`),Gr=findImportedEntry(Jn,Tr,"upgrade");Gr||console.log("Couldn't import profile",Zn,"/",Tr,yr.token,yr);const Hr=toEquipment((Gr==null?void 0:Gr.name)??Tr,`${Zn}/${Or.name}`,Gr==null?void 0:Gr.id);Hr.costs=[toCost(Pr)],Hr.constraints=[toMaxConstraint(1,`${Zn}/${Or.name}/${Tr}`)],Cr&&((hr=Hr.modifiers)==null||hr.push(getPerModelCostModifier(yr.details,`${Zn}/${Or.name}/${Tr}`))),yr.amount!=="*"&&Hr.constraints.push(toMaxConstraint(1,`${Zn}/${Or.name}/${Tr}/roster`,"roster")),(pr=$r.entryLinks)==null||pr.push(Hr);break;case"Magic Items":case"Vampiric Powers":case"Daemonic Icons":case"Big Name":case"Daemonic Gifts":const Wr={"Magic Items":"1539-fd78-88f-badd","Daemonic Icons":"e5a3-889f-31ed-d42f","Daemonic Gifts":"ce0c-2efd-59ad-f802","Big Name":"b8ce-a2e-453d-d59e","Vampiric Powers":"a88c-1e61-583f-2bab"},Yr=toGroupLink(Rr,`${Zn}/${Or.name}`,Wr[Rr]);parseDetails(yr.details)&&Yr.constraints.push({type:"max",value:parseDetails(yr.details),field:"points",scope:"parent",shared:!1,id:id(`${Zn}/${Or.name}/${Rr}/max`)}),Or.entryLinks.push(Yr);break;case"Wizard Level":const us=getGroup(Or,Rr,`${Zn}/${Or.name}`),vs=`Wizard Level ${yr.what.match(/\d+/)[0]}`,cs=findImportedEntry(Jn,vs,"upgrade"),es=toEntryLink(vs,`${Zn}/${Or.name}`,cs==null?void 0:cs.id);es.costs=[toCost(yr.details)],us.constraints||(us.constraints=[toMaxConstraint(1,`${Zn}/${Or.name}/wizardlevel`)]),us.entryLinks.push(es);break;case"Magic Standard":wr.push(yr);break;case"Mount":(fr=Or.entryLinks)==null||fr.push(toEntryLink(`${yr.token} ${yr.what}`,`${Zn}/${Or.name}`,`${yr.token} ${yr.what}`));break;case"Special Rules":const ps=getGroup(Or,Rr,`${Zn}/${Or.name}`);let ms=yr.what.replace(/special rule(s)?/,"");ms=ms.replace("\x07 ",""),ms=ms.replace("\x07","");const{ruleName:ns,param:Lr}=parseSpecialRule(ms),jr=toEntry(ms,`${Zn}/${Or.name}`,Pr);if(jr.constraints=[toMaxConstraint(1,`${Zn}/${Or.name}/${ns}`)],Cr&&((ur=jr.modifiers)==null||ur.push(getPerModelCostModifier(yr.details,`${Zn}/${Or.name}/${ns}`))),yr.amount!=="*")if(yr.amount==="per 1,000 points"){const Jr=toMaxConstraint(0,`${Zn}/${Or.name}/${ns}/roster`,"roster");jr.constraints.push(Jr);const rs={type:"increment",value:1,field:Jr.id,repeats:[{value:1e3,repeats:1,field:"limit::points",scope:"roster",childId:"any",shared:!0,roundUp:!1}]};jr.modifiers.push(rs)}else{const Jr=toMaxConstraint(yr.amount,`${Zn}/${Or.name}/${ns}/roster`,"roster");jr.constraints.push(Jr)}const Dr=findImportedProfile(Jn,ns,"Special Rule");if(!Dr){console.log(`[SPECIAL RULES] Couldn't find Special Rule: ${ns}`);continue}jr.infoLinks.push(toSpecialRuleLink(ns,`${Zn}/${Or.name}`,Dr.id,Lr)),ps.selectionEntries.push(jr);break}}}if(wr.length){const yr="6bbe-8054-19b7-e5d6",Cr=wr[0],Tr=(br=getGroup(er,"Command",`${Zn}/command`).selectionEntries)==null?void 0:br.find(Or=>Or.name==="Standard Bearer"),Rr=toGroupLink("Magic Standard",`${Zn}/command`,yr);Rr.constraints=[{type:"max",value:parseDetails(Cr.details),field:"points",scope:"parent",shared:!1,id:id(`${Zn}/command/magic standard/max`)}],Cr.amount==="per 1,000 points"&&Tr.entryLinks.push(toEntryLink("Magic Standard per 1,000 points",`${Zn}/command/standard/bug`)),Tr.entryLinks.push(Rr)}if(sr.length)for(const{wizardModel:yr,knowsFrom:Cr,requiresWizard:Pr}of sr){const Tr=findModels(rr,yr),Rr=Tr.length?Tr:rr;for(const Or of Rr){const $r=getGroup(Or,"Lores of Magic",`${Zn}/${Or==null?void 0:Or.name}`);$r.constraints=[toMinConstraint(1,`${Zn}/${Or.name}/lores of magic`),toMaxConstraint(1,`${Zn}/${Or.name}/lores of magic`)];for(const Gr of Cr){const Hr=findImportedEntry(Jn,Gr,"upgrade"),Wr=toEntryLink(Gr,`${Zn}/${Or==null?void 0:Or.name}`,(Hr==null?void 0:Hr.id)??Gr);$r.entryLinks.push(Wr)}$r.modifiers.push({comment:"Hide if not a wizard",type:"set",value:!0,field:"hidden",conditions:[{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"7d84-39e9-a5f-947e",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"8e47-73e8-f7f9-808",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"59f1-ac46-8123-3f8d",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"50bd-b918-574a-60c3",shared:!0}]})}}}const or=[];if((gr=Xn.Subheadings["Troop Type:"])!=null&&gr.includes("character"))for(const mr of rr){const _r={...er,name:mr.name,id:id(`character/${mr.name}`),profiles:[],selectionEntries:[],infoGroups:[]},wr=er.selectionEntries.find(Cr=>Cr.name===mr.name);_r.selectionEntries.push(wr),er.selectionEntries.length>rr.length&&console.error("CHARACTER BUG",Zn);for(const Cr of er.infoGroups){const Pr=JSON.parse(JSON.stringify(Cr));Pr.id+=`/${mr.name}`;for(const Tr of Pr.infoLinks)Tr.id+=`/${mr.name}`;_r.infoGroups.push(Pr)}const yr=toUnitProfile(mr.name,Xn);yr&&_r.profiles.push(yr),or.push(_r)}else or.push(er);console.log("Adding",or),await $store.remove();for(const mr of or){const _r=findRootUnit(Jn,mr.name);_r&&$store.del_node(_r);const wr=await $store.create_child("sharedSelectionEntries",Jn,mr),yr={import:!0,name:mr.name,hidden:!1,id:id(`${mr.name}/root`),type:"selectionEntry",targetId:wr==null?void 0:wr.id,categoryLinks:[]};$store.add_node("entryLinks",Jn,yr)}}const pasteEquipment={name:"[TOW 3] Paste Unit Profiles & Equipment & Options",hooks:{async paste(Jn,Xn){await $catalogue.manager.loadAll(),$catalogue.manager.getAllLoadedCatalogues().map(Zn=>Zn.processForEditor());const Qn=$store.get_selected();if((Xn.includes("Options:")||Xn.includes("Equipment:")||Xn.includes("WS")&&Xn.includes("Points"))&&Qn){if(Qn.parentKey!=="sharedSelectionEntries"){notify({text:"Select a (top-level) sharedSelectionEntry",type:"error"});return}const Zn=parseUnitText(Xn);Zn.Name=Qn.getName(),console.log(Zn);for(const er of Zn["Special Rules"]||[]){const tr=toSpecialRule(removeSuffix(er.name," (X)"),er.description);updateProfile(Qn.catalogue,tr)}for(const er of Zn.Profiles||[]){parseSpecialRule(er.Name);const tr=toModelProfile(er,Zn.Name);updateProfile(Qn.catalogue,tr)}await modifyUnit(Qn.catalogue,Zn,Qn)}return null}}};function deepTrasverse(Jn,Xn,Qn=null){let Zn=!0;if(Qn!=null&&(Zn=Qn(Jn)),Zn==!0&&(Xn(Jn),Jn.options!=null))for(const er of Jn.options)deepTrasverse(er,Xn,Qn)}function initRef(Jn,Xn,Qn){return{foundInBook:!1,foundInSpecial:!1,ref:Jn,amount:0,option_id:Xn,catalogue:Qn}}function convertRef(Jn){let Xn=Jn;return typeof Xn=="string"&&(Xn={ref:Xn,amount:1}),Xn}function readRefs(Jn,Xn,Qn,Zn){for(let er of Qn.refs||[]){let tr=convertRef(er);Xn[tr.ref]||(Xn[tr.ref]=initRef(tr.ref,Qn.option_id,Jn)),Xn[tr.ref].amount++,Xn[tr.ref][Zn]=!0}}function catalogueAllRefs(Jn,Xn,Qn){const Zn=Xn.army?Xn.army[0]:null,er=Jn.catalogues.find(tr=>tr.name===Xn.name);if(er&&(Zn&&deepTrasverse(Zn,tr=>{readRefs(er,Qn,tr,"foundInBook")}),Xn.dictionnary))for(let tr of Xn.dictionnary)deepTrasverse(tr,nr=>{readRefs(er,Qn,nr,"foundInBook")})}function cost(Jn){if(Jn)return[{name:"pts",typeId:"24fd-8af8-0c78-001c",value:Jn}]}function specialCostType(){return"78d6-b449-3c80-9b2a"}function specialCost(Jn){return{name:"Special Equipment",typeId:"78d6-b449-3c80-9b2a",value:Jn}}function toTitleCaseWords(Jn){return Jn.includes("-")?Jn.split("-").map(Xn=>Xn.charAt(0).toUpperCase()+Xn.slice(1)).join(" "):Jn.includes("_")?Jn.split("_").map(Xn=>Xn.charAt(0).toUpperCase()+Xn.slice(1)).join(" "):Jn.replace(/([A-Z])/g," $1").replace(/^./,Xn=>Xn.toUpperCase())}async function cleanup(Jn,Xn=!1){const Qn=["sharedSelectionEntries","selectionEntries","forceEntries","sharedSelectionEntryGroups","selectionEntryLinks","sharedSelectionEntryLinks","entryLinks","sharedRules"];Xn||Qn.push("categoryEntries");for(let Zn of Qn){const er=Jn[Zn];er&&await $store.remove(er)}}function charac(Jn,Xn,Qn){var tr,nr;let Zn=(tr=Jn.characteristicTypes)==null?void 0:tr.find(rr=>rr.name===Xn);Zn||(Zn=(nr=Jn.attributeTypes)==null?void 0:nr.find(rr=>rr.name===Xn));let er=Qn;return Qn!=null&&Qn.match(/^[-]?[0-9]+$/)?er=parseInt(Qn):(er=Qn,er==null&&(er="")),Zn?{name:Zn.name,typeId:Zn.id||"",$text:er}:null}function insertIdConditions(Jn,Xn,Qn){const Zn={type:"or",conditions:[],conditionGroups:[]};return Zn.conditions&&(Zn.conditions.push({type:"instanceOf",value:Qn,field:"selections",scope:Xn,childId:Jn,shared:!0,includeChildSelections:!0}),Zn.conditions.push({type:"atLeast",value:Qn,field:"selections",scope:Xn,childId:Jn,shared:!0,includeChildSelections:!0})),Zn}function getConditionFromHasOption(Jn,Xn,Qn){var er;const Zn=[];for(let tr of Xn.refs){const nr=Jn.refCatalogue[tr];let rr=(nr==null?void 0:nr.category_id)||(nr==null?void 0:nr.option_id);const sr=(er=Jn.categoryCatalogue.categoryEntries)==null?void 0:er.find(or=>or.comment===tr);if(sr&&(rr=sr.id),rr){const or=insertIdConditions(rr,Qn==="hasOption"?"unit":"roster",1);Zn.push(or)}}return Zn}function addConstraint(Jn,Xn){Xn.id=`${Jn.id}-constraint-${Jn.constraints.length}`,Jn.constraints.push(Xn)}async function hasNotOption(Jn,Xn,Qn,Zn){var tr,nr;let er=!1;if(Qn[Jn]&&Qn[Jn].length){const rr={type:"set",value:!0,field:"hidden",localConditionGroups:[],conditionGroups:[{type:"or",conditions:[],conditionGroups:[]}]};Zn.hidden=!1,Zn.modifiers||(Zn.modifiers=[]);for(let sr of Qn[Jn]){let or=sr;typeof or=="string"&&(or={refs:[or],amount:1});const ir={type:"or",conditions:[],conditionGroups:[]};for(let ar of or.refs){if(Qn.refs&&Qn.refs.map(hr=>convertRef(hr)).find(hr=>hr.ref==ar)){Zn.constraints||(Zn.constraints=[]);const hr={id:generateBattlescribeId(),type:"max",scope:Jn=="armyHasNotOption"?"roster":"unit",field:"selections",value:or.amount,includeChildSelections:!0};Zn.constraints.push(hr);continue}const lr=Xn.refCatalogue[ar];let cr=(lr==null?void 0:lr.category_id)||(lr==null?void 0:lr.option_id);const dr=(tr=Xn.categoryCatalogue.categoryEntries)==null?void 0:tr.find(hr=>hr.comment===ar);if(dr&&(cr=dr.id),cr){const hr=insertIdConditions(cr,Jn==="hasNotOption"?"unit":"roster",or.amount);(nr=ir.conditionGroups)==null||nr.push(hr),er=!0}}rr.conditionGroups&&rr.conditionGroups[0].conditionGroups&&rr.conditionGroups[0].conditionGroups.push(ir)}er&&Zn.modifiers.push(rr)}}async function hasOption(Jn,Xn,Qn,Zn){var er;if(Qn[Jn]&&Qn[Jn].length){const tr={type:"set",value:!1,field:"hidden",localConditionGroups:[],conditionGroups:[{type:"and",conditions:[],conditionGroups:[]}]};Zn.hidden=!0,Zn.modifiers||(Zn.modifiers=[]),Zn.modifiers.push(tr);for(let nr of Qn[Jn]){let rr=nr;typeof rr=="string"&&(rr={refs:[rr],amount:1});const sr={type:"or",conditions:[],conditionGroups:[]},or=getConditionFromHasOption(Xn,rr,Jn);(er=sr.conditionGroups)==null||er.push(...or),tr.conditionGroups&&tr.conditionGroups[0].conditionGroups&&tr.conditionGroups[0].conditionGroups.push(sr)}}}async function initConstraintCategories(Jn){const Xn={weaponEnchantUni:"Weapon Enchant",army_unique:"One of a Kind"},Qn=Jn.catalogues.find(Zn=>Zn.name==="Categories");if(Qn)for(let Zn in Jn.refCatalogue){const er=Jn.refCatalogue[Zn];if(er.amount>1){let nr=(Qn.categoryEntries||[]).find(rr=>rr.comment===Zn);nr==null&&(nr=await $store.add({name:Xn[Zn]||toTitleCaseWords(Zn),comment:Zn},"categoryEntries",Qn),er.category_id=nr==null?void 0:nr.id)}}}function leafMaxCost(Jn,Xn,Qn){const Zn=Xn.leafMaxCost;if(Zn){const er={id:generateBattlescribeId(),field:specialCostType(),value:Zn,scope:"self",includeChildSelections:!0,type:"max",comment:"leafMaxCost"};Qn.constraints.push(er),Qn.comment="leafMaxCost"}Xn.countAsLeaf!=null&&(Qn.comment=`leaf:${Xn.countAsLeaf}`)}function isLeaf(Jn){const Xn=Jn.comment;if(Xn!=null&&Xn.startsWith("leaf:")){const Zn=Xn.split(":")[1];if(Zn==="true")return!0;if(Zn==="false")return!1}let Qn=Jn.parent;for(;Qn;){if(Qn.comment==="leafMaxCost")return!0;Qn=Qn.parent}return!1}async function setSpecialEquipment(Jn){var Xn,Qn;if(isLeaf(Jn)){const Zn=(Qn=(Xn=Jn.target)==null?void 0:Xn.costs)==null?void 0:Qn.find(er=>er.name==="pts");if(Zn){const er=specialCost(Zn.value);await $store.add(er,"costs",Jn)}}}function findRefCategory(Jn,Xn){var Qn;return((Qn=Jn.categoryCatalogue.categoryEntries)==null?void 0:Qn.find(Zn=>Zn.comment==Xn))||null}async function armyConstraints(Jn){const Xn=Jn.book.army[0];if(Xn)for(let Qn of Xn.armyHasNotOption||[]){const Zn=Qn;let er=[];const tr={id:generateBattlescribeId(),type:"max",field:"selections",value:Zn.amount,scope:"roster",includeChildSelections:!0,shared:!0,includeChildForces:!0};if(Zn.perPoints){tr.value=0;const nr={type:"increment",value:Zn.amount,field:tr.id,repeats:[{value:Zn.perPoints,repeats:1,field:"limit::24fd-8af8-0c78-001c",scope:"roster",childId:"any",shared:!0,roundUp:!1,includeChildSelections:!0,includeChildForces:!0}]};er.push(nr)}for(let nr of Zn.refs){const rr=findRefCategory(Jn,nr);rr?(await $store.add(tr,"constraints",rr),await $store.add(er,"modifiers",rr)):console.log("Could not find category for ref: "+nr)}}}function addDictionnaryEntries(Jn,Xn,Qn){var Zn,er,tr;if(Xn.optionsDict)for(let nr of Xn.optionsDict)for(let rr of Jn||[]){const sr=(Zn=rr.comment)==null?void 0:Zn.split(":");if(sr&&sr.length>=2&&sr[0]=="dict"){const or=sr[1];if(or&&or.split("-").includes(nr)){Qn.entryLinks||(Qn.entryLinks=[]);for(let ar of rr.selectionEntries||[])ar.comment!=="shared item"&&Qn.entryLinks.push({name:ar.name,import:!0,hidden:!1,targetId:ar.id,type:"selectionEntry"});for(let ar of rr.entryLinks||[]){const lr={name:ar.name,import:!0,hidden:!1,targetId:ar.targetId,type:"selectionEntry",costs:(er=ar.costs)==null?void 0:er.map(cr=>({typeId:cr.typeId,name:cr.name,value:cr.value}))};((tr=lr.costs)==null?void 0:tr.length)==1&&lr.costs.push(specialCost(lr.costs[0].value)),Qn.entryLinks.push(lr)}}}}}function findProfileType(Jn,Xn){const Qn=Jn[0];for(let Zn of Qn.profileTypes||[])if(Zn.name===Xn)return Zn;return null}const bookNames={se:"Sylvan Elves"};class ProfileImporter{constructor(Xn,Qn){Sr(this,"book");Sr(this,"catalogues");this.book=Qn,this.catalogues=Xn}importProfile(Xn,Qn,Zn){var nr,rr,sr;let er=Xn;Xn.forEach(or=>{or.type==="model"&&(er=or)}),er===Xn&&(Xn.type="model");const tr={global:findProfileType(this.catalogues,"Global"),defensive:findProfileType(this.catalogues,"Defensive"),offensive:findProfileType(this.catalogues,"Offensive")};if(Qn.rarity&&(Xn.comment=`Rarity: ${Qn.rarity}`),tr.global){const or={typeId:tr.global.id,typeName:tr.global.name,name:tr.global.name,id:generateBattlescribeId(),hidden:!1,attributes:[],characteristics:[charac(tr.global,"Cha",Qn.global.Ma),charac(tr.global,"Mob",Qn.global.Ad),charac(tr.global,"Dis",Qn.global.Di),charac(tr.global,"Height",Qn.height),charac(tr.global,"Model Rules",(nr=Qn.globalrules)==null?void 0:nr.map(ir=>ir.name).join(", "))].filter(ir=>ir!=null)};or.characteristics.push(),$store.add(or,"profiles",er);for(let ir of Qn.globalrules||[]){const ar=findRule(this.catalogues,Zn,ir.name);ar&&$store.add(ar,"infoLinks",er)}}if(tr.defensive){const or={typeId:tr.defensive.id,typeName:tr.defensive.name,name:tr.defensive.name,id:generateBattlescribeId(),hidden:!1,attributes:[],characteristics:[charac(tr.defensive,"Arm",Qn.defense.Arm),charac(tr.defensive,"Def",Qn.defense.Df),charac(tr.defensive,"HP",Qn.defense.HP),charac(tr.defensive,"Res",Qn.defense.Re),charac(tr.defensive,"Model Rules",(rr=Qn.defenserules)==null?void 0:rr.map(ir=>ir.name).join(", "))].filter(ir=>ir!=null)};or.characteristics.push(),$store.add(or,"profiles",er);for(let ir of Qn.defenserules||[]){const ar=findRule(this.catalogues,Zn,ir.name);ar&&$store.add(ar,"rules",er)}}if(tr.offensive){const or={typeId:tr.offensive.id,typeName:tr.offensive.name,name:Qn.offensename,id:generateBattlescribeId(),hidden:!1,attributes:[],characteristics:[charac(tr.offensive,"AP",Qn.offense.AP),charac(tr.offensive,"Agi",Qn.offense.Ag),charac(tr.offensive,"Att",Qn.offense.At),charac(tr.offensive,"Off",Qn.offense.Of),charac(tr.offensive,"Str",Qn.offense.St),charac(tr.offensive,"Model Rules",(sr=Qn.offenserules)==null?void 0:sr.map(ir=>ir.name).join(", "))].filter(ir=>ir!=null)};or.characteristics.push(),$store.add(or,"profiles",er);for(let ir of Qn.offenserules||[]){const ar=findRule(this.catalogues,Zn,ir.name);ar&&$store.add(ar,"rules",er)}}}import(){var Xn;for(let Qn in this.book.units){const Zn=bookNames[Qn];if(Zn){const er=this.catalogues.find(tr=>tr.name===Zn);if(er)for(let tr in this.book.units[Qn]){const nr=this.book.units[Qn][tr],rr=(Xn=er.entryLinks)==null?void 0:Xn.find(sr=>{var or;return((or=sr.target)==null?void 0:or.name)===nr.name});if(rr){const sr=rr.target;this.importProfile(sr,nr,Zn)}}}}}}function removeNuxtLinks(Jn){return Jn.replace(/<nuxt-link\b[^>]*>(.*?)<\/nuxt-link>/gs,"$1")}class RulesImporter{constructor(Xn,Qn){Sr(this,"book");Sr(this,"catalogues");this.book=Qn,this.catalogues=Xn}async importRule(Xn,Qn,Zn){var rr;const er=Qn.split("-"),tr=er[0];er[1];let nr=null;if(tr==="rulebook"||tr=="special")nr=Xn[0];else{const sr=bookNames[tr];nr=Xn.find(or=>or.name===sr)||null}if(nr&&(rr=Zn.def)!=null&&rr.length&&Zn!=null&&Zn.title){const sr={description:removeNuxtLinks(Zn.def),name:Zn.title,id:generateBattlescribeId(),hidden:!1},or={id:generateBattlescribeId(),name:Zn.title,hidden:!1,type:"upgrade",infoLinks:[{id:generateBattlescribeId(),targetId:sr.id,name:sr.name,hidden:!1,type:"rule"}]};$store.add(or,"sharedSelectionEntries",nr),$store.add(sr,"sharedRules",nr)}}async import(){for(let Xn in this.book.rules)await this.importRule(this.catalogues,Xn,this.book.rules[Xn])}}function findRule(Jn,Xn,Qn){const Zn=Jn.find(tr=>tr.name===Xn),er=[];Zn&&er.push(Zn),er.push(Jn[0]);for(let tr of er)for(let nr of(tr==null?void 0:tr.sharedSelectionEntries)||[])if(nr.name===Qn)return nr}function override(Jn,Xn,Qn){if(Xn.override)for(let Zn of Xn.override)overrideFromComment(Jn,Zn,Qn,"leafMaxCost"),overrideFromComment(Jn,Zn,Qn,"minSize"),overrideFromComment(Jn,Zn,Qn,"maxSize")}function insertConditions(Jn,Xn,Qn){var Zn,er;for(let tr of Qn.hasOption||[])(Zn=Xn.conditionGroups)==null||Zn.push(...getConditionFromHasOption(Jn,tr,"hasOption"));for(let tr of Qn.armyHasOption||[])(er=Xn.conditionGroups)==null||er.push(...getConditionFromHasOption(Jn,tr,"armyHasOption"))}function overrideFromComment(Jn,Xn,Qn,Zn){var er;if(Xn.options[Zn]){const tr=(er=Qn.constraints)==null?void 0:er.find(nr=>nr.comment===Zn);if(tr&&Xn.options[Zn]){const nr={type:"set",field:tr.id,value:Xn.options[Zn],conditionGroups:[]};insertConditions(Jn,nr,Xn),Qn.modifiers||(Qn.modifiers=[]),Qn.modifiers.push(nr)}}}function sortByAscending(Jn,Xn){return[...Jn].sort((Qn,Zn)=>(Xn(Qn)??"").toString().localeCompare((Xn(Zn)??"").toString(),void 0,{numeric:!0}))}function computeDuration(Jn){return Jn?Jn==2?"Permanent":"One Turn":"Instant"}class SpellsImporter{constructor(Xn,Qn){Sr(this,"book");Sr(this,"catalogues");this.book=Qn,this.catalogues=Xn}async importPath(Xn,Qn){var rr,sr;const er=(rr=Xn[0].profileTypes)==null?void 0:rr.find(or=>or.name==="Spell");if(!er)return;const tr={id:generateBattlescribeId(),name:Qn.name,comment:`path:${Qn.ref}`,hidden:!1,profiles:[]};for(let or of Qn.spells){const ir={comment:`spell:${or.ref}`,id:generateBattlescribeId(),typeId:"03f2-8c24-0df8-7052",name:or.name,typeName:"Spell",hidden:!1,attributes:[charac(er,"ref",or.ref),charac(er,"path",Qn.ref),charac(er,"rep",or.rep?"true":"false")],characteristics:[charac(er,"Num",or.number),charac(er,"Name",or.name),charac(er,"Effect",or.description)]};or.cast&&or.cast[0]&&(ir.characteristics.push(charac(er,"Range",`${or.cast[0].range}`)),ir.characteristics.push(charac(er,"Types",or.cast[0].types.map(ar=>toTitleCaseWords(ar)).filter(ar=>ar.length).join(", "))),ir.characteristics.push(charac(er,"Duration",computeDuration(or.cast[0].duration))),ir.characteristics.push(charac(er,"Cast",`${or.cast[0].value}`))),(sr=tr.profiles)==null||sr.push(ir)}sortByAscending(tr.profiles,or=>{var ir;return((ir=or.characteristics.find(ar=>ar.name==="Num"))==null?void 0:ir.$text)||""});const nr=Xn.find(or=>or.name==="Spells");nr&&await $store.add(tr,"sharedInfoGroups",nr)}async import(){for(let Xn in this.book.paths){const Qn=this.book.paths[Xn];await this.importPath(this.catalogues,Qn)}}}function findPath(Jn,Xn){var Qn;return(Qn=Jn.sharedInfoGroups)==null?void 0:Qn.find(Zn=>Zn.comment===`path:${Xn}`)}function getWizardIds(Jn){var Xn,Qn,Zn,er,tr,nr;return{"Wizard Apprentice":(Qn=(Xn=Jn.catalogues[0].sharedSelectionEntries)==null?void 0:Xn.find(rr=>rr.name==="Wizard Apprentice"))==null?void 0:Qn.id,"Wizard Adept":(er=(Zn=Jn.catalogues[0].sharedSelectionEntries)==null?void 0:Zn.find(rr=>rr.name==="Wizard Adept"))==null?void 0:er.id,"Wizard Master":(nr=(tr=Jn.catalogues[0].sharedSelectionEntries)==null?void 0:tr.find(rr=>rr.name==="Wizard Master"))==null?void 0:nr.id}}function insertSpells(Jn,Xn,Qn,Zn){if(!Xn.refs)return;const er=Jn.catalogues.find(nr=>nr.name==="Spells");if(!er)return;const tr=getWizardIds(Jn);for(let nr of Xn.refs){const rr=convertRef(nr),sr=findPath(er,rr.ref);if(sr){const or={id:generateBattlescribeId(),hidden:!1,name:"Spells",collapsible:!0,selectionEntries:[...(sr.profiles||[]).map(ir=>({type:"upgrade",id:generateBattlescribeId(),name:ir.name,hidden:!1,constraints:[{type:"max",field:"selections",id:generateBattlescribeId(),value:1,scope:"parent"}],infoLinks:[{id:generateBattlescribeId(),name:ir.name,hidden:!1,type:"profile",targetId:ir.id}]}))],constraints:[{type:"exactly",id:generateBattlescribeId(),scope:"parent",field:"selections",value:1}],modifiers:[]};or.modifiers.push({type:"set",field:or.constraints[0].id,value:1,conditions:[{field:"selections",scope:"unit",childId:tr["Wizard Apprentice"],type:"atLeast",value:1,includeChildSelections:!0}]}),or.modifiers.push({type:"set",field:or.constraints[0].id,value:3,conditions:[{field:"selections",scope:"unit",childId:tr["Wizard Adept"],type:"atLeast",value:1,includeChildSelections:!0}]}),or.modifiers.push({type:"set",field:or.constraints[0].id,value:5,conditions:[{field:"selections",scope:"unit",childId:tr["Wizard Master"],type:"atLeast",value:1,includeChildSelections:!0}]}),Qn.selectionEntryGroups||(Qn.selectionEntryGroups=[]),Qn.selectionEntryGroups.push(or)}}}const sortIndex={Models:{index:1,collapsible:!1},Leadership:{index:2,collapsible:!0},"Leadership Skills":{index:3,collapsible:!0},"Specialist Skills":{index:4,collapsible:!0},"Blood Powers":{index:5,collapsible:!0},Honour:{index:6,collapsible:!0},Type:{index:7,collapsible:!0},Command:{index:8,collapsible:!0},Mount:{index:9,collapsible:!0},Magic:{index:10,collapsible:!0},Level:{index:11,collapsible:!0},Path:{index:12,collapsible:!0},Equipment:{index:13,collapsible:!0},Weapons:{index:14,collapsible:!0},"Castellan Weapons":{index:15,collapsible:!0},Manifestations:{index:16,collapsible:!0},Options:{index:13,collapsible:!1},Weapon:{index:1,collapsible:!0},"Melee Weapon":{index:2,collapsible:!0},"Hand Weapon Enchant":{index:3,collapsible:!0},"Ranged Weapon":{index:4,collapsible:!0},Shield:{index:5,collapsible:!0},"Shield Enchant":{index:6,collapsible:!0},Armour:{index:7,collapsible:!0},"Armour Enchant":{index:8,collapsible:!0},Artefact:{index:9,collapsible:!0},"Postions and Scrolls":{index:10,collapsible:!0}};class T9AImporter{constructor(Xn,Qn,Zn){Sr(this,"catalogues");Sr(this,"refCatalogue",{});Sr(this,"book");Sr(this,"specialBook");Sr(this,"gst");Sr(this,"catalogue");Sr(this,"specialCatalogue");Sr(this,"categoryCatalogue");if(this.book=Qn,this.catalogue=Xn.find(er=>er.name===this.book.name),this.specialCatalogue=Xn.find(er=>er.name==="Special Items"),this.categoryCatalogue=Xn.find(er=>er.name==="Categories"),this.gst=Xn[0],this.catalogues=Xn,!this.catalogue)throw"Unable to find catalogue";catalogueAllRefs(this,this.book,this.refCatalogue),Zn&&catalogueAllRefs(this,Zn,this.refCatalogue)}async import(){await cleanup(this.catalogue),await initConstraintCategories(this),await this.insertArmyForceEntry(),await this.addDictionnary(),await this.addUnits(),await armyConstraints(this)}convertOption(Xn,Qn,Zn){var rr,sr,or;const er={name:Xn.name||"",id:Xn.option_id,costs:cost(Xn.cost),selectionEntries:[],selectionEntryGroups:[],constraints:[],modifiers:[],collective:!0,categoryLinks:[],infoLinks:[],type:"upgrade",hidden:!1};Xn.shared&&this.catalogue.name==="Special Items"&&(er.comment="shared item"),(Xn.type==="group"||Xn.type==null)&&(er.name=Xn.optionsLabel||Xn.name||""),Xn.type=="check"&&addConstraint(er,{type:"max",value:1,field:"selections",scope:"parent",shared:!0,includeChildSelections:!1}),Xn.addToUnitSize&&(er.name="Models",er.sortIndex=1),er.name==="Number"&&Zn&&(er.name=Zn.name,er.type="model"),Xn.optionsLabel&&sortIndex[Xn.optionsLabel]&&(er.sortIndex=sortIndex[Xn.optionsLabel].index,er.collapsible=sortIndex[Xn.optionsLabel].collapsible);let tr=er;(Xn.type=="check"||Xn.type=="numeric")&&((rr=Xn.options)!=null&&rr.length||(sr=Xn.optionsDict)!=null&&sr.length)&&(tr={name:Xn.optionsLabel||Xn.name||"",selectionEntries:[],selectionEntryGroups:[],constraints:[]},er.selectionEntryGroups.push(tr)),Xn.minSize&&addConstraint(tr,{type:"min",value:Xn.minSize,field:"selections",scope:"parent",shared:!0,includeChildSelections:!1,comment:"minSize"}),Xn.maxSize&&addConstraint(tr,{type:"max",value:Xn.maxSize,field:"selections",scope:"parent",shared:!0,includeChildSelections:!1,comment:"maxSize"}),addDictionnaryEntries(this.catalogue.sharedSelectionEntryGroups||[],Xn,tr),addDictionnaryEntries(this.specialCatalogue.sharedSelectionEntryGroups||[],Xn,tr),hasOption("hasOption",this,Xn,er),hasOption("armyHasOption",this,Xn,er),hasNotOption("hasNotOption",this,Xn,er),hasNotOption("armyHasNotOption",this,Xn,er),leafMaxCost(this,Xn,er),Xn.rarity&&(er.comment=`Rarity: ${Xn.rarity}`);for(let ir of Xn.refs||[]){let ar=convertRef(ir);const lr=(or=this.categoryCatalogue.categoryEntries)==null?void 0:or.find(cr=>cr.comment===ar.ref);if(lr){const cr={name:"",id:generateBattlescribeId(),targetId:lr.id,hidden:!1};er.categoryLinks.push(cr)}}for(let ir of Xn.options||[]){const ar=this.convertOption(ir,Qn,Zn);if(ir.shared&&ir.cost){for(let lr of this.specialCatalogue.sharedSelectionEntryGroups||[]){for(let cr of lr.selectionEntries||[])if(cr.name===ar.name){ar.targetId=cr.id;break}if(ar.targetId)break}ar.targetId?(tr.entryLinks||(tr.entryLinks=[]),tr.entryLinks.push(ar)):console.log("Could not find target for shared item: "+ar.name)}else ir.type==null||ir.type==="group"?tr.selectionEntryGroups.push(ar):ar.targetId==null?tr.selectionEntries.push(ar):(tr.entryLinks||(tr.entryLinks=[]),tr.entryLinks.push(ar))}const nr=findRule(this.catalogues,this.book.name,er.name);return nr&&(Zn?(er.targetId=nr.id,er.type="selectionEntry"):er.infoLinks.push(...(nr.infoLinks||[]).map(ir=>({hidden:!1,targetId:ir.targetId,name:ir.name,id:ir.id,type:ir.type})))),override(this,Xn,er),Zn&&insertSpells(this,Xn,er),er}async addDictionnary(){const Xn=[this.book.dictionnary];for(let Qn of Xn)for(let Zn of Qn)for(let er of Zn.refs){const tr={...Zn,option_id:generateBattlescribeId(),name:toTitleCaseWords(er),optionsLabel:toTitleCaseWords(er)};let nr=null;for(let rr of this.catalogue.sharedSelectionEntryGroups||[])rr.name===tr.name&&(nr=rr);if(nr==null){const rr=this.convertOption(tr,this.book.army?this.book.army[0]:null);rr.comment=`dict:${Zn.refs.join("-")}`,await $store.add(rr,"sharedSelectionEntryGroups",this.catalogue)}else for(let rr of tr.options||[]){const sr=this.convertOption(rr,this.book.army?this.book.army[0]:null);await $store.add(sr,"selectionEntries",nr)}}}async addUnits(){var Qn,Zn,er;const Xn=this.book.army?this.book.army[0]:null;if(Xn)for(let tr of Xn.options){const nr=tr.refs?tr.refs[0]:"?";let rr=(Qn=this.gst.categoryEntries)==null?void 0:Qn.find(sr=>sr.comment===nr);if(rr||(rr=(Zn=this.catalogue.categoryEntries)==null?void 0:Zn.find(sr=>sr.comment===nr)),!rr&&tr.refs){const sr={comment:tr.refs[0],id:generateBattlescribeId(),name:tr.name,hidden:!1};if(rr=await $store.add(sr,"categoryEntries",this.catalogue),rr){const or={name:rr.name,hidden:!1,id:generateBattlescribeId(),targetId:rr.id},ir=(er=this.catalogue.forceEntries)==null?void 0:er.find(ar=>ar.name==="Army");ir&&await $store.add(or,"categoryLinks",ir)}}for(let sr of tr.options){const or=this.convertOption(sr,Xn,sr);or.type="unit";const ir=await $store.add(or,"sharedSelectionEntries",this.catalogue);if(!tr.invisible){const ar={type:"selectionEntry",costs:[],hidden:!1,name:ir.name,targetId:ir.id,id:generateBattlescribeId(),categoryLinks:[]};ir.forEach(async lr=>{await setSpecialEquipment(lr)}),rr&&ar.categoryLinks.push({name:"",id:generateBattlescribeId(),targetId:rr.id,hidden:!1,primary:!0}),await $store.add(ar,"entryLinks",this.catalogue)}}}}async insertArmyForceEntry(){const Xn={name:"Army",id:generateBattlescribeId(),hidden:!1,categoryLinks:[{name:"Characters",hidden:!1,id:generateBattlescribeId(),targetId:"953d-22cd-7ee1-36dc"},{name:"Core Units",hidden:!1,id:generateBattlescribeId(),targetId:"4bcd-01c8-ce5e-7108"},{name:"Special",hidden:!1,id:generateBattlescribeId(),targetId:"f8f1-3d4f-12bf-73cd"}]};this.catalogue.name!=="Special Items"&&await $store.add(Xn,"forceEntries",this.catalogue)}}const t9a_import={name:"Imports a T9A Json file",arguments:[{name:"catalogues",type:"catalogue[]"},{name:"json",type:"file",optional:!0,description:"Json Book file for t9a"},{name:"special",type:"file",optional:!0,description:"Special.json for t9a"},{name:"cleanup",type:"boolean",description:"Cleanup Only"}],async run(Jn,Xn,Qn,Zn){if(Jn.map(tr=>tr.processForEditor()),Zn){cleanup(Jn[0],!0);for(let tr=1;tr<Jn.length;tr++)cleanup(Jn[tr]);return}const er=JSON.parse((Xn||"").replace(/ /g,""));if(er.name!="Unit Stats"&&er.name!="Rule Definitions"){let tr;Qn&&(tr=JSON.parse((Qn||"").replace(/ /g,""))),new T9AImporter(Jn,er,tr).import()}return er.name==="Unit Stats"&&new ProfileImporter(Jn,er).import(),er.name==="Rule Definitions"&&new RulesImporter(Jn,er).import(),er.name==="Spells"&&new SpellsImporter(Jn,er).import(),"Import done"}};async function insertUnitRarity(Jn){const Xn=(Jn.sharedSelectionEntries||[]).concat(Jn.sharedSelectionEntryGroups||[]),Qn={Regular:{total:0,limit:1,perpoints:500},Common:{total:0,limit:1,perpoints:1e3},Uncommon:{total:0,limit:1,perpoints:1500},Rare:{total:0,limit:1,perpoints:2500},Extraordinary:{total:0,limit:1,perpoints:4e3},Legendary:{total:0,limit:1,perpoints:null}};for(let Zn of Xn)Zn.forEach(er=>{var tr;if((tr=er.comment)!=null&&tr.startsWith("Rarity")){const nr=er.comment.split(":")[1].trim(),rr=Qn[nr],sr={id:generateBattlescribeId(),type:"max",scope:"roster",field:"selections",value:0},or={value:rr.perpoints,repeats:1,field:"limit::24fd-8af8-0c78-001c",scope:"roster",childId:"any",shared:!0,roundUp:!1,includeChildSelections:!0,includeChildForces:!0},ir={type:"increment",field:sr.id,value:1,repeats:[or]};er.modifiers||(er.modifiers=[]),$store.add(sr,"constraints",er),$store.add(ir,"modifiers",er)}})}const t9a_rarity={name:"Set Rarity Constraints for T9A",arguments:[{name:"catalogues",type:"catalogue[]"}],async run(Jn,Xn,Qn){Jn.map(Zn=>Zn.processForEditor());for(let Zn of Jn)insertUnitRarity(Zn)}},findDuplicateIds={name:"Find Duplicates Ids",description:"Returns ids with mrore than one occurrence",arguments:[{name:"catalogues",type:"catalogue[]"}],run(Jn){const Xn=new Map;for(const er of Jn)er.forEachObjectWhitelist(tr=>{const nr=tr.id;nr&&(Xn.has(nr)?Xn.get(nr).push(tr):Xn.set(nr,[tr]))});const Qn=[];for(const[er,tr]of Xn)tr.length>1&&Qn.push([er,tr.length,tr]);Qn.sort((er,tr)=>tr[1]-er[1]);const Zn=[];for(const er of Qn){Zn.push(`${er[0]} (${er[1]})`);for(const tr of er[2])Zn.push(tr)}return Zn.length===0?["No duplicates found"]:['<span style="font-weight: bold">Duplicate IDs (count):</span>',...Zn]}};let count=0;const useScriptsStore=defineStore("scripts",{state:()=>({hooks:{}}),actions:{async get_scripts(Jn){if(!(Jn!=null&&Jn.gameSystem))return[];const Xn=[];["The Ninth Age","The 9th Age"].includes(Jn.gameSystem.name)&&(Xn.push(t9a_import),Xn.push(t9a_rarity));try{const Qn=getDataObject(Jn.gameSystem).fullFilePath;if(!Qn)return[];const Zn=`${dirname(Qn)}/scripts`;for(const er of await getFolderFiles(Zn))try{if(!er.path.endsWith(".js"))continue;const tr=reactive({path:er.path}),nr=async rr=>{try{if(!await readFile(rr))return;const or=await __vitePreload(()=>import(er.path+`?v=${count++}`),[],import.meta.url);for(const ir in or.default)tr[ir]=or.default[ir];delete tr.error}catch(sr){console.error(sr),tr.error=sr}};nr(er.path),watchFile(er.path,nr),Xn.push(tr)}catch(tr){console.error(tr);continue}return Xn}catch{return[]}},get_default_scripts(){const Jn=[];return Jn.push(pasteSpecialRule),Jn.push(pasteWeapons),Jn.push(pasteEquipment),[fixLinkNames,fixProfiles,listRefs,select,findDuplicateIds,listAutomaticRefs,...electron?[]:Jn]},async emit(Jn,...Xn){for(const Qn of Object.values(this.hooks[Jn]||{}))try{await Qn(...Xn)}catch{continue}},async run_hooks(Jn,Xn,Qn){for(const Zn of Object.values(this.hooks[Jn]||{}))try{const er=await Zn(Xn,Qn);if(er)return er;if(er===null)return null}catch{continue}return Qn},add_hook(Jn,Xn,Qn){this.hooks[Jn]||(this.hooks[Jn]={}),this.hooks[Jn][Xn]=Qn},add_script_hooks(Jn){for(const[Xn,Qn]of Object.entries(Jn.hooks||{}))typeof Qn=="function"&&this.add_hook(Xn,Jn.name,Qn)}}}),enableGithubIntegrationWithGitFolder=!1;function get_ctx(Jn){return Jn.vnode}function get_base_from_vue_el(Jn){if(Jn instanceof Base)return Jn;const Xn=Jn.$parent;if(Xn.item)return Xn.item;const Qn=Xn.$parent;return Qn.item?Qn.item:Qn.$parent.item}function markSaving(Jn){Jn.isSaving=!0}function markChangedOnDisk(Jn){if(Jn.isSaving){Jn.isSaving=!1;return}Jn.isChangedOnDisk=!0}function unmarkChangedOnDisk(Jn){Jn.isChangedOnDisk&&(Jn.isChangedOnDisk=!1),Jn.isSaving===void 0&&(Jn.isSaving=!1)}const editorFields=new Set(["select","showInEditor","showChildsInEditor"]),useEditorStore=defineStore("editor",{state:()=>({selections:[],selectedEntries:[],selectedElementGroup:null,selectedElement:null,selectedItem:null,filter:"",filterRegex:RegExp(""),filtered:[],undoStack:[],undoStackPos:-1,historyStack:[],historyStackPos:0,clipboard:[],mode:"edit",clipboardmode:"json",gameSystems:{},gameSystemsLoaded:!1,unsavedChanges:{},unsavedCount:0,scripts:useScriptsStore()}),actions:{async create_system(Jn,Xn,Qn){console.log("Creating system with name:",Jn);const Zn=`sys-${generateBattlescribeId()}`,er=this.get_system(Zn),tr=Xn?`${removeSuffix$1(Xn.replaceAll("\\","/"),"/")}/${Jn}`:"";if(electron){if(!tr)throw new Error("No folder specified");createFolder(tr)}const nr={gameSystem:{id:Zn,name:Jn,battleScribeVersion:"2.03",revision:1,categoryEntries:[{name:"Default Category",id:"default-category"}],forceEntries:[{name:"Default Force",hidden:!1,id:"default-force",categoryLinks:[{name:"Default Category",hidden:!1,id:"default-force-category-link",targetId:"default-category"}]}],selectionEntries:[{type:"upgrade",import:!0,name:"Default Root Entry",hidden:!1,id:"default-entry",categoryLinks:[{targetId:"default-category",id:"default-category-link",primary:!0,name:"Default Category",hidden:!1}]}]}};return tr&&(nr.gameSystem.fullFilePath=`${tr}/${Jn}.${Qn||"gst"}`),er.setSystem(nr),this.get_catalogue_state(nr).incremented=!0,this.saveCatalogue(nr),er},saveCatalogueInDb(Jn){const Xn=rootToJson(Jn);!!!Jn.gameSystemId?db.systems.put({content:JSON.parse(Xn),path:Jn.fullFilePath,id:Jn.id}):db.catalogues.put({content:JSON.parse(Xn),path:Jn.fullFilePath,id:`${Jn.gameSystemId}-${Jn.id}`})},async saveCatalogueInFiles(Jn){const Xn=Jn.fullFilePath;if(!Xn){console.error(`No path included in the catalogue ${Jn.name} to save at`);return}const Qn=getExtension(Xn);if(Xn.endsWith(".json")){const Zn=rootToJson(Jn);await writeFile(Xn,Zn)}else{const Zn=convertToXml(Jn),er=isZipExtension(Qn),nr=filename$1(Xn).replace(".gstz",".gst").replace(".catz",".cat"),rr=er?await zipCompress(nr,Zn,"uint8array"):Zn;await writeFile(Xn,rr)}},saveCatalogue(Jn){const Xn=this.get_catalogue_state(Jn),Qn=getDataObject(Jn);markSaving(Xn),electron?this.saveCatalogueInFiles(Qn):this.saveCatalogueInDb(Qn),unmarkChangedOnDisk(Xn)},async load_systems_from_folder(Jn,Xn){var rr,sr,or,ir;if(!globalThis.electron)throw new Error("Not running in electron");const Qn=await getFolderFiles(Jn,!0,[".git",".github"]);if(!(Qn!=null&&Qn.length))return;console.log("Loading",Qn.length,"files");const Zn=[],er=[],tr=[],nr=Qn.filter(ar=>isAllowedExtension(ar.name));for(const ar of nr)try{Xn&&await Xn(er.length,nr.length,ar.path);const lr=await convertToJson(ar.data,ar.name.endsWith("json")?"json":"xml");if(!lr.catalogue&&!lr.gameSystem)continue;const cr=getDataObject(lr);cr.fullFilePath=ar.path.replaceAll("\\","/");const dr=(rr=lr==null?void 0:lr.gameSystem)==null?void 0:rr.id,hr=(sr=lr==null?void 0:lr.catalogue)==null?void 0:sr.id;if(dr){const pr=this.get_system(dr);pr.setSystem(shallowReactive(lr)),tr.push(pr),Zn.push(dr)}if(hr){const pr=this.get_system(lr.catalogue.gameSystemId);pr.catalogueFiles[hr]=shallowReactive(lr)}er.push(lr)}catch(lr){console.error(`Error loading ${ar.name}`,lr)}Xn&&await Xn(er.length,nr.length);for(const ar of tr){Xn&&await Xn(0,0,"Checking for github integration");try{await this.load_system(ar)}catch(lr){throw Xn&&await Xn(0,0,`An error occured while loading ${((ir=(or=ar.gameSystem)==null?void 0:or.gameSystem)==null?void 0:ir.name)??"this system"}:
${lr}`),lr}}return Zn},async load_systems_from_db(Jn=!1){if(!this.gameSystemsLoaded&&!Jn){this.gameSystemsLoaded=!0;let Xn=await db.systems.offset(0).keys();for(let Qn of Xn)Qn in this.gameSystems||this.load_system_from_db(Qn)}},async load_system_from_db(Jn){const Xn=await db.systems.get(Jn),Qn=Xn==null?void 0:Xn.content;if(!Qn)throw new Error("System not found "+Jn);Qn.gameSystem.fullFilePath||(Qn.gameSystem.fullFilePath=Xn.path);const Zn=await db.catalogues.where({"content.catalogue.gameSystemId":Jn}),er=this.get_system(Qn.gameSystem.id);er.setSystem(Qn);for(let{content:tr,path:nr}of await Zn.toArray()){const rr=tr.catalogue.id;tr.catalogue.fullFilePath||(tr.catalogue.fullFilePath=nr),er.catalogueFiles[rr]=shallowReactive(tr)}this.load_system(er,!0)},async load_system(Jn,Xn=!1){var Qn,Zn;if(Jn.gameSystem){const er=useCataloguesStore();if(await Jn.unloadAll(),!Xn)for(const sr of Jn.getAllCatalogueFiles()){const or=this.get_catalogue_state(sr);or&&(or.changed=!1,or.unsaved=!1,or.isChangedOnDisk=!1),er.updateCatalogue(getDataObject(sr)),er.setEdited(getDataObject(sr).id,!1)}const tr=Jn.gameSystem.gameSystem.publications,nr=tr==null?void 0:tr.find(sr=>{var or;return((or=sr.name)==null?void 0:or.trim().toLowerCase())==="github"}),rr=Jn.gameSystem.gameSystem.fullFilePath;if(rr&&enableGithubIntegrationWithGitFolder)try{const sr=await getFolderRemote(dirname(rr));sr&&sr!=="origin"&&(console.log("remote:",sr),Jn.github={...parseGitHubUrl(sr),discovered:!0})}catch(sr){console.error(sr)}nr&&nr.publisherUrl&&(Jn.github={githubUrl:nr.publisherUrl},nr.shortName&&nr.shortName.includes("/")&&(Jn.github.githubRepo=nr.shortName,Jn.github.githubOwner=(Qn=nr.shortName)==null?void 0:Qn.split("/")[0],Jn.github.githubName=(Zn=nr.shortName)==null?void 0:Zn.split("/")[1]))}for(const er of Jn.getAllCatalogueFiles()){const tr=getDataObject(er);tr.fullFilePath&&watchFile(tr.fullFilePath,()=>{this.on_file_changed(er)})}},on_file_changed(Jn){console.log(getDataObject(Jn).name,"changed"),markChangedOnDisk(this.get_catalogue_state(Jn))},async get_or_load_system(Jn){return Jn in this.gameSystems||(this.gameSystems[Jn]=new GameSystemFiles,await this.load_system_from_db(Jn)),this.gameSystems[Jn]},get_system(Jn){if(!(Jn in this.gameSystems)){const Xn=new GameSystemFiles;Xn.settings=useSettingsStore(),this.gameSystems[Jn]=Xn}return this.gameSystems[Jn]},delete_system(Jn){delete this.gameSystems[Jn]},get_catalogue_state(Jn){const Xn=getDataDbId(Jn);return this.unsavedChanges[Xn]||(this.unsavedChanges[Xn]={changed:!1,unsaved:!1}),this.unsavedChanges[Xn]},set_catalogue_changed(Jn,Xn=!0){const Qn=this.get_catalogue_state(Jn);Xn?(Qn.changed=!0,Qn.unsaved||(this.unsavedCount+=1,Qn.unsaved=Xn)):Qn.unsaved=Xn},changed(Jn){const Xn=Jn.getCatalogue();Xn&&this.set_catalogue_changed(Xn)},removed(Jn){const Xn=Jn.getCatalogue();Xn&&this.set_catalogue_changed(Xn)},async save_catalogue(Jn,Xn,Qn){const Zn=this.get_catalogue_state(Xn),er=Xn.revision;Qn==="github"&&Jn.github&&(Xn.revision=await getNextRevision(Jn.github,Xn)),Qn==="yes"&&!(Zn!=null&&Zn.incremented)&&(Xn.revision=Xn.revision?Xn.revision+1:1,Zn.incremented=!0),Qn==="no"&&(Zn.incremented=!0),this.saveCatalogue(Xn);const tr=useCataloguesStore(),nr=getDataDbId(Xn);return tr.updateCatalogue(Xn),tr.setEdited(nr,!0),Zn!=null&&Zn.unsaved&&(this.unsavedCount--,Zn.unsaved=!1),Xn.revision!==er},async prompt_revision(Jn){const Xn=useSettingsStore(),Qn=Jn instanceof Catalogue?Jn.manager:Jn;for(const Zn of Jn instanceof Catalogue?[Jn]:Qn.getAllLoadedCatalogues()){const er=this.get_catalogue_state(Zn);if(er!=null&&er.unsaved&&!er.incremented)return Qn.github?Xn.githubAutoIncrement&&!navigator.onLine?await(globalThis.customPrompt&&globalThis.customPrompt({html:`<span>Would you like to increase the revision of this catalogue?<span><br/>
  <span class="gray">Note: This is shown because Github cannot be accessed as your are offline</span>`,cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no":Xn.githubAutoIncrement?"github":await(globalThis.customPrompt&&globalThis.customPrompt({html:"<span>Would you like to increase the revision of this catalogue?<span><br/>",cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no":await(globalThis.customPrompt&&globalThis.customPrompt({html:`<span>Would you like to increase the revision of this catalogue?<span><br/>
  <span class="gray">Note: You can enable automatic revision increments by integrating with GitHub.<br/>This can be achieved by adding a publication in the GameSystem named "GitHub" with the repository's GitHub URL as the Publication URL.`,cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no"}},async save_all(Jn){var Zn,er,tr;let Xn=!1,Qn=0;useSettingsStore();try{for(const nr of Object.values(this.gameSystems)){if(Jn&&((er=(Zn=nr.gameSystem)==null?void 0:Zn.gameSystem)==null?void 0:er.id)!==Jn)continue;const rr=await this.prompt_revision(nr);for(const sr of nr.getAllLoadedCatalogues())(tr=this.get_catalogue_state(sr))!=null&&tr.unsaved&&await this.save_catalogue(nr,sr,rr)&&(Qn+=1)}}catch(nr){notify({text:`Failed to save: ${nr.name}: ${nr.message}`,type:"error"}),Xn=!0}return Qn&&notify(`Incremented ${Qn} catalogue's revision`),Xn},set_filter(Jn){this.$state.filter=Jn,this.filterRegex=textSearchRegex(Jn)},init(Jn){this.catalogueComponent=Jn,globalThis.$store=this},rerender_catalogue(){this.catalogueComponent&&(this.catalogueComponent.key+=1)},unselect(Jn){const Xn=[],Qn=[];for(const tr of this.selections)Jn===void 0||toRaw(tr.obj)===toRaw(Jn)?Qn.push(tr):Xn.push(tr);const Zn=[],er=[];for(const tr of this.selectedEntries)Jn===void 0||toRaw(tr.obj)===toRaw(Jn)?er.push(tr):Zn.push(tr);this.selections=Xn,this.selectedEntries=Zn;for(const tr of[...Qn,...er])tr.onunselected&&tr.onunselected(),tr.obj===this.selectedItem&&(this.selectedItem=null)},is_selected(Jn){return Jn instanceof Base?this.selectedEntries.find(Xn=>Xn.obj===Jn)!==void 0:this.selections.find(Xn=>Xn.obj===Jn)!==void 0},select(Jn,Xn,Qn){this.is_selected(Jn)||(Jn instanceof Base?this.selectedEntries.push({obj:Jn,onunselected:Xn,payload:Qn}):this.selections.push({obj:Jn,onunselected:Xn,payload:Qn}))},do_select(Jn,Xn){this.selectedElementGroup;const Qn=this.selectedElement;if(this.selectedElement=Xn,Jn!=null&&Jn.shiftKey){const Zn=Xn.depth,er=Xn.$el.closest(`.collapsible-box.depth-${Zn-1}`),nr=[...(er==null?void 0:er.getElementsByClassName(`collapsible-box depth-${Zn}`))||[]].map(ar=>ar.vnode),rr=nr.findIndex(ar=>ar===toRaw(Qn)),sr=nr.findIndex(ar=>ar===toRaw(this.selectedElement)),or=Math.min(rr,sr),ir=Math.max(rr,sr);for(let ar=or;ar<=ir;ar++)nr[ar].select();return}!(Jn!=null&&Jn.ctrlKey)&&!(Jn!=null&&Jn.metaKey)&&this.unselect(),Jn!=null&&Jn.ctrlKey&&this.is_selected(Xn)?this.unselect(Xn):(Xn.select(),this.selectedItem=Xn,this.mode="edit")},do_rightclick_select(Jn,Xn){this.is_selected(Xn)||this.do_select(Jn,Xn)},clear_selections(){this.unselect()},get_selections(){const Jn=this.selections.map(Xn=>get_base_from_vue_el(Xn.obj));return this.selectedEntries.forEach(Xn=>Jn.push(Xn.obj)),Jn},get_sorted_selections(){const Jn=this.selections.map(Xn=>get_base_from_vue_el(Xn.obj));return this.selectedEntries.forEach(Xn=>Jn.push(Xn.obj)),sortByAscendingInplace(Jn,Xn=>getEntryPath(Xn).map(Qn=>`${Qn.key}[${Qn.index}]`).join("/")),Jn},get_selections_with_payload(){const Jn=this.selections.map(Xn=>({obj:get_base_from_vue_el(Xn.obj),payload:Xn.payload}));return this.selectedEntries.forEach(Xn=>Jn.push({obj:Xn.obj,payload:Xn.payload})),Jn},get_selected(){return this.selectedItem&&get_base_from_vue_el(this.selectedItem)},set_selections(Jn){this.clear_selections();const Xn=Array.isArray(Jn)?Jn:[Jn];this.selectedEntries=Xn.map(Qn=>({obj:Qn,onunselected:()=>null}))},toggle_selections(){const Jn=this.get_selections();if(this.filter&&Jn.find(Xn=>!Xn.showChildsInEditor))Jn.forEach(Xn=>this.show(Xn,!1));else{const Xn=this.selections.map(Qn=>Qn.obj);Xn.find(Qn=>Qn.collapsed===!0)?Xn.filter(Qn=>Qn.collapsed===!0).forEach(Qn=>Qn.open()):Xn.filter(Qn=>Qn.collapsed===!1).forEach(Qn=>Qn.close())}},async do_action(Jn,Xn,Qn){let Zn;try{Zn=await Qn()}catch(er){console.error(er);return}if(this.undoStackPos<this.undoStack.length){const er=this.undoStack.length-this.undoStackPos-1;this.undoStack.splice(this.undoStackPos+1,er,{type:Jn,undo:Xn,redo:Qn})}else this.undoStack.push({type:Jn,undo:Xn,redo:Qn});return this.undoStackPos+=1,Zn},async set_clipboard(Jn,Xn){if(this.clipboardmode==="json"){const Qn=Jn.map(er=>({parentKey:er.parentKey,...er,sortIndex:void 0})),Zn=entriesToJson(Qn,new Set(["parentKey"]),{forceArray:!1,formatted:!0});Xn!=null&&Xn.clipboardData?Xn.clipboardData.setData("text/plain",Zn):await navigator.clipboard.writeText(Zn)}else this.clipboard=Jn},async get_clipboard(Jn){if(this.clipboardmode==="json")if(Jn!=null&&Jn.clipboardData){const Xn=Jn.clipboardData.getData("text/plain");if(!Xn)return[];try{return JSON.parse(Xn)}catch{return Xn}}else{const Xn=await navigator.clipboard.readText();try{return JSON.parse(Xn)}catch{return Xn}}return this.clipboard},can_undo(){return!!this.undoStack[this.undoStackPos]},async undo(){if(!this.can_undo())return;const Jn=this.undoStack[this.undoStackPos];Jn&&(await Jn.undo(),this.undoStackPos--)},can_redo(){return!!this.undoStack[this.undoStackPos+1]},async redo(){if(!this.can_redo())return;const Jn=this.undoStack[this.undoStackPos+1];Jn&&(await Jn.redo(),this.undoStackPos++)},async cut(Jn){await this.set_clipboard(this.get_selections(),Jn),this.remove()},async copy(Jn,Xn){const Qn=Xn?Array.isArray(Xn)?Xn:[Xn]:this.get_selections();await this.set_clipboard(Qn,Jn)},async paste(Jn){const Xn=await this.get_clipboard(Jn),Qn=await this.scripts.run_hooks("paste",{},Xn);Qn&&this.add(Qn)},async pasteLink(){const Jn=await this.get_clipboard();if(!Jn||!Jn.parentKey||Array.isArray(Jn))return;const Qn=this.get_selections()[0];if(!Qn)return;const Zn=Qn.getCatalogue().findOptionById(Jn.id);if(Zn){const er={parentKey:Zn.isGroup()||Zn.isEntry()?"entryLinks":"infoLinks",targetId:Zn.id,id:generateBattlescribeId(),type:Zn.editorTypeName,name:Zn.getName(),hidden:Zn.hidden,select:!0};this.add(er)}},async duplicate(){const Jn=this.get_selections();if(!Jn.length)return;const Xn=Jn[0].getCatalogue(),Qn=Xn.getSystemId();let Zn=[];const er=()=>{Zn=[];for(const nr of Jn){const rr=JSON.parse(entryToJson(nr,editorFields));if(!nr.parent)continue;const sr=nr.parent[nr.parentKey];if(!Array.isArray(sr))throw new Error(`Couldn't duplicate: parent[${nr.parentKey}] is not an array`);setPrototypeRecursive({[nr.parentKey]:rr}),scrambleIds(Xn,rr),sr.push(rr),onAddEntry(rr,Xn,nr.parent,this.get_system(Qn)),Zn.push(rr),this.changed(rr)}},tr=()=>{for(const nr of Zn)popAtEntryPath(Xn,getEntryPath(nr)),this.removed(nr),onRemoveEntry(nr)};await this.do_action("dupe",tr,er)},async remove(Jn){let Xn=[];if(Jn)for(const sr of Array.isArray(Jn)?Jn:[Jn])Xn.push(sr);else{const sr=this.get_selections();if(!sr.length)return;for(const or of sr)Xn.push(or)}const Qn=Xn[0].getCatalogue(),Zn=Qn.getSystemId();let er=[],tr=[];const nr=async()=>{const sr=Xn,or=this.get_system(Zn);tr=[],er=[];for(const ir of sr){const ar=getEntryPath(ir),lr=popAtEntryPath(Qn,ar);tr.push(lr),er.push(ar),this.removed(lr),onRemoveEntry(lr,or)}tr.reverse(),er.reverse()},rr=async()=>{for(const[sr,or]of enumerate_zip(er,tr)){const ir=addAtEntryPath(Qn,sr,or);onAddEntry(or,Qn,ir,this.get_system(Zn)),this.changed(or)}};await this.do_action("remove",rr,nr),this.unselect()},async add(Jn,Xn,Qn){let Zn=[];if(Qn?(Qn=Array.isArray(Qn)?Qn:[Qn],Zn=Qn.map(lr=>({obj:lr}))):Zn=this.get_selections_with_payload(),!Zn.length){console.error("Couldn't add: no selection or parent(s) provided");return}const er=Array.isArray(Jn)?Jn:[Jn];if(!er.length){console.error("Couldn't add: no data provided");return}const tr=Zn[0].obj.getCatalogue(),nr=er.map(lr=>this.fix_object(Xn||lr.parentKey,lr,tr,Qn?Qn[0]:void 0)),rr=tr.getSystemId();let sr=[];const or=async()=>{var lr;sr=[];for(const cr of Zn){const dr=cr.obj,hr=cr.payload;await this.open(dr,!0);const pr=[];for(const fr of nr){const ur=fixKey(dr,Xn||fr.parentKey,hr);if(!ur){const _r=`Couldn't create ${Xn||fr.parentKey} in ${hr}`;notify({type:"error",text:_r}),console.warn(_r);continue}dr[ur]||(dr[ur]=[]);const br=dr[ur];if(!Array.isArray(br))continue;if(!((lr=allowed_children(dr,dr.parentKey))!=null&&lr.has(ur))){const _r=`Couldn't add ${ur} to a ${dr.parentKey}`;notify({type:"error",text:_r}),console.warn(_r);continue}const gr=fr instanceof Base?entryToJson(fr,editorFields):JSON.stringify(fr),mr=JSON.parse(gr);clean(mr,ur),delete mr.parentKey,setPrototypeRecursive({[ur]:mr}),pr.push({key:ur,entry:mr})}scrambleIds(tr,pr.map(fr=>fr.entry));for(const{key:fr,entry:ur}of pr){dr[fr]||(dr[fr]=[]);const br=dr[fr];if(!Array.isArray(br))continue;this.filtered.push(ur),ur.showChildsInEditor=!0;let gr=ur;for(;gr;)gr.showInEditor=!0,gr=gr.parent;br.push(ur),onAddEntry(ur,tr,dr,this.get_system(rr)),this.changed(ur),sr.push(ur)}}return sr[0]},ir=()=>{for(const lr of sr)popAtEntryPath(tr,getEntryPath(lr)),this.removed(lr),onRemoveEntry(lr)};return await this.do_action("add",ir,or)},open_selected(){for(const Jn of this.selections)Jn.obj.open()},get_initial_object(Jn,Xn){var Qn;switch(Jn){case"costTypes":return{name:`New ${getTypeLabel(getTypeName(Jn))}`,id:generateBattlescribeId(),defaultCostLimit:-1};case"repeats":return{value:1,repeats:1,field:"selections",scope:"parent",childId:"any",shared:!0,roundUp:!1};case"constraints":{const tr=(Xn==null?void 0:Xn.parentKey)==="associations",nr={type:"min",value:1,field:Xn!=null&&Xn.isForce()?"forces":"selections",scope:"parent",shared:!0,id:generateBattlescribeId()};return tr&&(nr.childId="any"),nr}case"conditions":return Xn&&((Qn=getModifierOrConditionParent(Xn))==null?void 0:Qn.editorTypeName)==="costType"?{type:"instanceOf",field:"selections",scope:"self",childId:"roster"}:{type:"atLeast",value:1,field:"selections",scope:"parent",childId:"any",shared:!0};case"modifiers":return{type:"set",value:!0,field:"hidden"};case"modifierGroups":case"conditionGroups":return{type:"and"};case"localConditionGroups":return{type:"atLeast",value:1,scope:"parent",field:"selections",includeChildSelections:!0,includeChildForces:!0,repeats:1};case"sharedSelectionEntries":case"selectionEntries":return{type:"upgrade",import:!0,name:`New ${getTypeLabel(getTypeName(Jn))}`,hidden:!1,id:generateBattlescribeId()};case"entryLinks":return{import:!0,name:`New ${getTypeLabel(getTypeName(Jn))}`,hidden:!1,id:generateBattlescribeId()};case"associations":return{min:1,max:1,scope:"parent",childId:"any",ids:[],name:"New Association",id:generateBattlescribeId()};case"sharedProfiles":case"profiles":const Zn=Xn==null?void 0:Xn.getCatalogue().iterateProfileTypes().next().value;return{name:(!Xn||Xn!=null&&Xn.isCatalogue()||Xn==null?void 0:Xn.getName())||"New Profile",typeId:Zn==null?void 0:Zn.id,typeName:Zn==null?void 0:Zn.name,hidden:!1,id:generateBattlescribeId(),characteristics:[],attributes:[]};case"catalogueLinks":return{type:"catalogue",name:`New ${getTypeLabel(getTypeName(Jn))}`,id:generateBattlescribeId()};case"categoryLinks":return{type:"category",name:`New ${getTypeLabel(getTypeName(Jn))}`,hidden:!1,id:generateBattlescribeId()};case"characteristicTypes":case"attributeTypes":return{name:`New ${getTypeLabel(getTypeName(Jn))}`,id:generateBattlescribeId()};case"characteristics":case"attributes":case"costs":return{};default:return{name:`New ${getTypeLabel(getTypeName(Jn))}`,id:generateBattlescribeId(),hidden:!1}}},fix_profile(Jn,Xn){var tr;let Qn=Jn.findOptionById(Xn.typeId);if(Xn.typeName&&!(Qn instanceof ProfileType)){const nr=Jn.findOptionsByText(Xn.typeName,!0).filter(rr=>rr instanceof ProfileType);sortByDescendingInplace(nr,rr=>{var sr,or;return((sr=rr.characteristicTypes)==null?void 0:sr.length)===((or=Xn.characteristics)==null?void 0:or.length)?1:0}),Qn=nr[0]}if(!Qn)return;Xn.typeName=Qn.name,Xn.typeId=Qn.id;for(const nr of Xn.characteristics||[])if(nr.typeId){if(!nr.name&&nr.typeId){const rr=Qn==null?void 0:Qn.characteristicTypes.find(sr=>sr.id===nr.typeId);rr&&(nr.name=rr.name)}}else{const rr=Qn==null?void 0:Qn.characteristicTypes.find(sr=>sr.name===nr.name);rr&&(nr.typeId=rr.id)}const Zn=(tr=Qn.characteristicTypes)==null?void 0:tr.filter(nr=>!Xn.characteristics.find(rr=>rr.typeId===nr.id)),er=Xn.characteristics.find((nr,rr)=>rr!==Qn.characteristicTypes.findIndex(sr=>sr.id===nr.typeId));if(Zn!=null&&Zn.length||er){const nr=[],rr=[...Xn.characteristics];for(const sr of Zn)rr.push({name:sr.name,typeId:sr.id,$text:""});for(const sr of rr){const or=Qn.characteristicTypes.findIndex(ir=>ir.id===sr.typeId);or>=0&&(nr[or]=sr)}Xn.characteristics=nr}},fix_object(Jn,Xn,Qn,Zn){if(Array.isArray(Xn))return Xn.map(tr=>this.fix_object(Jn,tr,Qn));const er={...this.get_initial_object(Jn,Zn),...Xn};Qn&&getTypeName(Jn)==="profile"&&this.fix_profile(Qn,er);for(const tr in er){const nr=er[tr];arrayKeys.has(tr)&&isObject(nr)&&(Array.isArray(nr)?er[tr]=er[tr].map(rr=>this.fix_object(tr,rr,Qn)):er[tr]=[this.fix_object(tr,nr,Qn)])}return er},async create(Jn,Xn){const Qn=await this.add({select:!0,...Xn},Jn,this.get_selections_with_payload().map(Zn=>Zn.obj));return this.open_selected(),Qn},async create_node(Jn,Xn,Qn){const Zn=await this.add({select:!0,...Qn},Jn,Xn);return this.open_selected(),Zn},add_node(Jn,Xn,Qn){var sr;const Zn=fixKey(Xn,Jn);if(!Zn)throw new Error(`Invalid key: ${Jn} in ${Xn.editorTypeName}`);const er=Xn.getCatalogue(),tr=er.getSystemId(),nr={...this.fix_object(Zn,Qn,er),...Qn};if(!((sr=allowed_children(Xn,Xn.parentKey))!=null&&sr.has(Zn))){console.warn("Couldn't add",Zn,"to a",Xn.parentKey,"because it is not allowed");return}Xn[Zn]||(Xn[Zn]=[]);const rr=Xn[Zn];if(Array.isArray(rr))return clean(nr,Zn),delete nr.parentKey,setPrototypeRecursive({[Zn]:nr}),rr.push(nr),onAddEntry(nr,er,Xn,this.get_system(tr)),this.changed(nr),nr},del_node(Jn){try{const Xn=Jn.catalogue,Qn=Xn.manager,Zn=getEntryPath(Jn),er=popAtEntryPath(Xn,Zn);this.removed(er),onRemoveEntry(er,Qn)}catch{console.error("Failed to delete",Jn)}},can_move(Jn){return!Jn.isLink()},edit_node(Jn,Xn){let Qn=!1;for(const Zn in Xn){const er=Xn[Zn];if(Jn[Zn]!==er){if(isObject(er)){const tr=Jn.getCatalogue(),nr=tr.getSystemId(),rr=this.fix_object(Zn,er,tr);setPrototypeRecursive({[Zn]:rr}),Jn[Zn]=rr,onAddEntry(rr,tr,Jn,this.get_system(nr))}else Jn[Zn]=er;Qn=!0}}return Qn&&this.changed(Jn),Qn},get_move_targets(Jn){const Xn=Jn.catalogue;if(!Xn||Jn.isLink())return;const Qn=[];if(!Jn.parentKey.startsWith("shared")&&this.move_to_key(Jn,"shared")?Qn.push({target:Xn,type:"shared"}):Jn.parentKey.startsWith("shared")&&this.move_to_key(Jn,"root")&&Qn.push({target:Xn,type:"root"}),this.move_to_key(Jn,"shared"))for(const Zn of Xn.imports)Qn.push({target:Zn,type:"shared"});if(this.move_to_key(Jn,"root"))for(const Zn of Xn.imports)Qn.push({target:Zn,type:"root"});return Qn},move_to_key(Jn,Xn){if(Xn==="shared")switch(Jn.editorTypeName){case"infoGroup":return"sharedInfoGroups";case"rule":return"sharedRules";case"profile":return"sharedProfiles";case"selectionEntry":return"sharedSelectionEntries";case"selectionEntryGroup":return"sharedSelectionEntryGroups";default:return""}switch(Jn.editorTypeName){case"infoGroup":return"infoGroups";case"rule":return"rules";case"profile":return"";case"categoryEntry":return"categoryEntries";case"profileType":return"profileTypes";case"costType":return"costTypes";case"selectionEntry":return"selectionEntries";case"selectionEntryGroup":return"";default:return Jn.parentKey}},move(Jn,Xn,Qn,Zn){(()=>{const tr=this.move_to_key(Jn,Zn);if(!tr){console.error("Could not find key for move",Jn.editorTypeName,Zn);return}const nr=Jn.parent,rr=getEntryPath(Jn);removeEntry(Jn),this.removed(Jn),onRemoveEntry(Jn);const sr=JSON.parse(entryToJson(Jn,editorFields));setPrototypeRecursive({[tr]:sr}),Qn[tr]||(Qn[tr]=[]),Qn[tr].push(sr),onAddEntry(sr,Qn,Qn,this.get_system(Qn.getSystemId())),this.changed(sr);const ir=["rule","infoGroup","profile","selectionEntry","selectionEntryGroup"].includes(Jn.editorTypeName),ar=!Jn.parentKey.startsWith("shared");if(ir&&ar){const lr={targetId:sr.id,id:Xn.generateNonConflictingId(),type:Jn.editorTypeName,name:Jn.getName(),hidden:Jn.hidden,select:!0};Jn.isEntry()&&(lr.collective=Jn.collective);const cr=Jn.isGroup()||Jn.isEntry()?"entryLinks":"infoLinks";setPrototypeRecursive({[cr]:lr}),rr[rr.length-1].key=cr,addAtEntryPath(Xn,rr,lr),onAddEntry(lr,Xn,nr,this.get_system(Xn.getSystemId())),this.changed(lr)}})()},async open(Jn,Xn,Qn){var or;let Zn=document.getElementById("editor-entries");if(!Zn)return;if(Jn.isCatalogue()){const ir=Zn.getElementsByClassName("head");return ir.length?ir[0].children[0]:void 0}async function er(ir){const ar=get_ctx(ir);get_base_from_vue_el(ar).showInEditor=!0,ar.open(),await ar.$nextTick()}async function tr(ir){const ar=get_ctx(ir);ar.close(),await ar.$nextTick()}const nr=getEntryPath(Jn);if(!(nr!=null&&nr.length))return;if(Zn=Zn.getElementsByClassName(`depth-0 ${nr[0].key}`)[0],!Zn){Qn!==!0&&console.error("Couldn't find root element for",nr[0].key,"in",Jn.catalogue.getName());return}await this.show(Jn,!1),await er(Zn);const rr=[];forEachParent(Jn,ir=>{rr.push(ir)}),rr.pop(),rr.reverse(),rr.push(Jn),rr[0].parentKey==="sharedProfiles"&&rr.unshift({parentKey:`label-${rr[0].typeName??"Untyped"}`});const sr=rr[rr.length-1];for(let ir=0;ir<rr.length;ir++){const ar=rr[ir],lr=Zn.getElementsByClassName(`depth-${ir+1} ${ar.parentKey}`);let cr;if(ar.parentKey.startsWith("label-"))cr=lr[0];else{const dr=[];for(let hr=0;hr<lr.length;hr++)dr.push(lr[hr]);cr=dr.find(hr=>$toRaw(get_base_from_vue_el(get_ctx(hr)))===$toRaw(ar))}cr||Qn!==!0&&console.error("Couldn't find path to",Jn.getName(),Jn,"parent:",(or=Jn.parent)==null?void 0:or.getName()),cr&&(Zn=cr),ar!==sr&&await er(Zn),ar===sr&&(Xn===!1?await tr(Zn):Xn===!0&&await er(Zn))}return Zn},async goto_catalogue(Jn,Xn){var nr,rr,sr;const Qn=this.$router;if(!Qn)throw new Error("Cannot follow link to another catalogue without $router set");const er=((nr=Qn.currentRoute)==null?void 0:nr.query)??((sr=(rr=Qn.currentRoute)==null?void 0:rr.value)==null?void 0:sr.query),tr=(er==null?void 0:er.id)||(er==null?void 0:er.systemId);return Jn!==tr?(Qn.push({name:"catalogue",query:{systemId:Xn||Jn,id:Jn}}),this.$nextTick=new Promise((or,ir)=>{this.$nextTickResolve=or}).then(()=>{delete this.$nextTickResolve}),this.$nextTick):!1},async show(Jn,Xn=!0){this.filtered.includes(Jn)||this.filtered.push(Jn),Jn.showInEditor=!0,Jn.showChildsInEditor=!0,Xn&&(Jn.highlightInEditor=!0),forEachParent(Jn,Qn=>{Qn.showInEditor=!0})},async goto(Jn){if(!Jn)return;const Xn=Jn.getCatalogue();this.put_current_state_in_history();const Qn=useEditorUIState();Qn.get_data(Xn.id).selection=getEntryPath(Jn),await this.goto_catalogue(Xn.id,Xn.gameSystemId),await this.show(Jn,!1),await this.scrollto(Jn)},async scroll_to_el(Jn){Jn.scrollIntoView({block:"center",inline:"start",behavior:"instant"})},async scrollto(Jn){const Xn=await this.open(Jn);if(Xn){const Qn=get_ctx(Xn);this.do_select(null,Qn),this.scroll_to_el(Xn)}else setTimeout(async()=>{const Qn=await this.open(Jn);if(Qn){const Zn=get_ctx(Qn);this.do_select(null,Zn),this.scroll_to_el(Qn)}},50)},can_goto(Jn){return Jn?typeof Jn=="object"&&Jn instanceof Base:!1},can_follow(Jn){return!!(Jn!=null&&Jn.target)},async follow(Jn){Jn!=null&&Jn.target&&await this.goto(Jn.target)},async move_up(Jn){if(Jn.parent){const Xn=Jn.parent[Jn.parentKey],Qn=Xn.indexOf(Jn);if(Qn>0){const Zn=Xn.splice(Qn,1)[0];Xn.splice(Qn-1,0,Zn),this.changed(Jn)}}},async move_down(Jn){if(Jn.parent){const Xn=Jn.parent[Jn.parentKey],Qn=Xn.indexOf(Jn);if(Qn>=0&&Qn<Xn.length-1){const Zn=Xn.splice(Qn,1)[0];Xn.splice(Qn+1,0,Zn),this.changed(Jn)}}},sortable(Jn){return useSettingsStore().sort==="none"?!1:(Jn==null?void 0:Jn.editorTypeName)!=="forceEntry"},get_leftpanel_open_collapsible_boxes(){function Jn(Qn,Zn,er=0){const tr=`depth-${er} collapsible-box opened`,nr=Qn.getElementsByClassName(tr);if(nr!=null&&nr.length)for(var rr=0;rr<nr.length;rr++){const sr=nr[rr],or=get_base_from_vue_el(get_ctx(sr)),ir=or.parentKey,ar=or.parent;if(ar){const lr=ar[ir];if(!lr||!Array.isArray(lr))continue;const cr=lr.indexOf(or);ir in Zn||(Zn[ir]={}),cr in Zn[ir]||(Zn[ir][cr]={}),Jn(sr,Zn[ir][cr],er+1)}else{const lr=[];for(var rr=0;rr<sr.classList.length;rr++){const hr=sr.classList[rr];lr.push(hr)}const cr=lr.filter(dr=>arrayKeys.has(dr)||dr.startsWith("label-"));for(const dr of cr)Zn[dr]={},Zn[dr][0]={};Jn(sr,Zn[cr[0]][0],er+1)}}}const Xn={};return Jn(document.documentElement,Xn),Xn},get_leftpanel_state(){if(!this.catalogueComponent)return{};const Jn={},Xn=this.catalogueComponent.$refs.leftpanel;for(const Qn of Object.keys(LeftPanelDefaults))Jn[Qn]=Xn[Qn];return Jn},get_current_state(){var Qn;const Jn=this.get_selected(),Xn=(Qn=this.catalogueComponent)==null?void 0:Qn.cat;return{...this.get_leftpanel_state(),mode:this.mode,open:this.get_leftpanel_open_collapsible_boxes(),selection:Jn?getEntryPath(Jn):void 0,catalogueId:Xn==null?void 0:Xn.id,systemId:Xn==null?void 0:Xn.gameSystemId}},save_state(){if(this.catalogueComponent&&this.catalogueComponent.cat){const Jn=this.catalogueComponent.cat.id,Xn=useEditorUIState(),Qn=this.get_current_state();Xn.set_state(Jn,Qn)}},async load_state(Jn){this.catalogueComponent&&(useEditorUIState().set_state(Jn.catalogueId,Jn),this.mode=Jn.mode||"edit",await this.goto_catalogue(Jn.catalogueId,Jn.systemId)||(this.catalogueComponent.load_state(Jn),this.rerender_catalogue()))},put_state_in_history(Jn){if(this.historyStackPos<this.historyStack.length){const Xn=this.historyStack.length-this.historyStackPos;this.historyStack.splice(this.historyStackPos,Xn,Jn)}else this.historyStack.push(Jn);this.historyStackPos=this.historyStack.length},put_current_state_in_history(){if(this.catalogueComponent&&this.catalogueComponent.cat){const Jn=this.get_current_state();this.put_state_in_history(Jn),history.replaceState({data:Jn,index:this.historyStackPos},"",location.href),history.pushState({index:this.historyStackPos+1},"",null)}},can_back(){return this.historyStackPos>0},async back(){this.can_back()&&(this.historyStack[this.historyStackPos]=this.get_current_state(),this.historyStackPos-=1,this.load_state(this.historyStack[this.historyStackPos]))},can_forward(){if(this.historyStack[this.historyStack.length-1])return this.historyStackPos<this.historyStack.length-1},async forward(){this.can_forward()&&(this.historyStackPos+=1,this.load_state(this.historyStack[this.historyStackPos]))},async update_catalogue_search(Jn,Xn){const{filter:Qn,ignoreProfilesRules:Zn}=Xn,er=this.filtered;for(const tr of er)delete tr.showInEditor,delete tr.showChildsInEditor,delete tr.highlightInEditor,forEachParent(tr,nr=>{delete nr.showInEditor,delete tr.showChildsInEditor});if(Qn.length>1){this.set_filter(Qn),this.filtered=Jn.findOptionsByText(Qn),Zn&&(this.filtered=this.filtered.filter(tr=>!tr.isProfile()&&!tr.isRule()&&!tr.isInfoGroup()));for(const tr of this.filtered)this.show(tr);if(await(globalThis.$nextTick&&globalThis.$nextTick()),this.filtered.length<300){for(const tr of this.filtered)if(tr.parent)try{await this.open(tr,!1,!0)}catch{continue}}}else this.set_filter(""),this.filtered=[];return this.filtered},async system_search(Jn,Xn,Qn=1e3){const Zn=[],{filter:er}=Xn;if(!er)return null;const tr=textSearchRegex(er);let nr=!1;await Jn.loadAll();function rr(or,ir){var ar;try{if(Zn.length>=Qn||or.targetId&&or.target&&or.target.isCategory()&&!(ir!=null&&ir.isForce()))return;const lr=(ar=or.getName)==null?void 0:ar.call(or),cr=or.$text,dr=or.description,hr=or.id;(hr===er||lr&&String(lr).match(tr)||hr===er||cr&&String(cr).match(tr)||dr&&String(dr).match(tr))&&Zn.push(or)}catch(lr){console.error("Error while searching:",lr)}}for(const or of Jn.getAllLoadedCatalogues())if(rr(or),or.forEachObjectWhitelist(rr),Zn.length>=Qn){nr=!0;break}console.log("Search for",`"${er}"`,"found",Zn.length,"results");const sr={};for(const or of Zn){const ir=or.getCatalogue().name;addObj(sr,ir,or)}return{grouped:sr,all:Zn,more:nr}},async open_catalogue(Jn,Xn){const Qn=await this.get_or_load_system(Jn);let Zn=Qn.getLoadedCatalogue({targetId:Xn||Jn});Zn||(Zn=await Qn.loadCatalogue({targetId:Xn||Jn})),globalThis.$catalogue=Zn,Zn.processForEditor();for(const er of Zn.imports)er.processForEditor();return{system:Qn,catalogue:Zn}},add_child(...Jn){return this.add_node(...Jn)},del_child(...Jn){return this.del_node(...Jn)},edit_child(...Jn){return this.edit_node(...Jn)},create_child(...Jn){return this.create_node(...Jn)},label(Jn,Xn=!1){return Xn?[getName(Jn),getNameExtra(Jn)].filter(Qn=>Qn).join(" "):getName(Jn)}}}),_sfc_main$1=defineComponent({data(){return{val:"",titleSize:50}},methods:{update(){this.titleSize=this.$refs.title.clientHeight}},setup(){const Jn=useEditorStore();return Jn.init(this),{settings:useSettingsStore(),store:Jn}},mounted(){addEventListener("resize",this.update)},unmounted(){removeEventListener("resize",this.update)},async created(){this.settings.refreshAppearance()},watch:{"settings.theme"(){this.settings.refreshAppearance()}},components:{TitleBar:__nuxt_component_0}}),app_vue_vue_type_style_index_0_lang="",_hoisted_1=createBaseVNode("div",{id:"popups"},null,-1),_hoisted_2=createBaseVNode("div",{id:"dialogs"},null,-1),_hoisted_3={id:"app"};function _sfc_render(Jn,Xn,Qn,Zn,er,tr){const nr=resolveComponent("Notifications"),rr=__nuxt_component_0,sr=__nuxt_component_1,or=__nuxt_component_2;return openBlock(),createElementBlock(Fragment,null,[_hoisted_1,_hoisted_2,createBaseVNode("div",_hoisted_3,[createVNode(nr,{style:normalizeStyle({"margin-top":`${Jn.titleSize+5}px`}),position:"top center"},null,8,["style"]),createVNode(or,null,{default:withCtx(()=>[createBaseVNode("div",{class:"title",ref:"title",onResize:Xn[0]||(Xn[0]=(...ir)=>Jn.update&&Jn.update(...ir))},[createVNode(rr)],544),createBaseVNode("div",{class:"content",style:normalizeStyle({height:`calc(100vh - ${Jn.titleSize}px)`})},[createVNode(sr,{keepalive:!0})],4)]),_:1})])],64)}const AppComponent=_export_sfc(_sfc_main$1,[["render",_sfc_render]]),_sfc_main={__name:"nuxt-root",setup(Jn){const Xn=defineAsyncComponent(()=>__vitePreload(()=>import("./error-component.1a02e5db.js"),[],import.meta.url).then(sr=>sr.default||sr)),Qn=()=>null,Zn=useNuxtApp(),er=Zn.deferHydration(),tr=!1;provide("_route",useRoute()),Zn.hooks.callHookWith(sr=>sr.map(or=>or()),"vue:setup");const nr=useError();onErrorCaptured((sr,or,ir)=>{if(Zn.hooks.callHook("vue:error",sr,or,ir).catch(ar=>console.error("[nuxt] Error in `vue:error` hook",ar)),isNuxtError(sr)&&(sr.fatal||sr.unhandled))return Zn.runWithContext(()=>showError(sr)),!1});const{islandContext:rr}=!1;return(sr,or)=>(openBlock(),createBlock(Suspense,{onResolve:unref(er)},{default:withCtx(()=>[unref(nr)?(openBlock(),createBlock(unref(Xn),{key:0,error:unref(nr)},null,8,["error"])):unref(rr)?(openBlock(),createBlock(unref(Qn),{key:1,context:unref(rr)},null,8,["context"])):unref(tr)?(openBlock(),createBlock(resolveDynamicComponent(unref(tr)),{key:2})):(openBlock(),createBlock(unref(AppComponent),{key:3}))]),_:1},8,["onResolve"]))}};globalThis.$fetch||(globalThis.$fetch=$fetch$1.create({baseURL:baseURL()}));let entry;const plugins=normalizePlugins(_plugins);{let Jn;entry=async function(){var tr,nr;if(Jn)return Jn;const Zn=!!((tr=window.__NUXT__)!=null&&tr.serverRendered||((nr=document.getElementById("__NUXT_DATA__"))==null?void 0:nr.dataset.ssr)==="true")?createSSRApp(_sfc_main):createApp(_sfc_main),er=createNuxtApp({vueApp:Zn});try{await applyPlugins(er,plugins)}catch(rr){await er.callHook("app:error",rr),er.payload.error=er.payload.error||rr}try{await er.hooks.callHook("app:created",Zn),await er.hooks.callHook("app:beforeMount",Zn),Zn.mount("#"+appRootId),await er.hooks.callHook("app:mounted",Zn),await nextTick()}catch(rr){await er.callHook("app:error",rr),er.payload.error=er.payload.error||rr}return Zn},Jn=entry().catch(Xn=>{console.error("Error while mounting app:",Xn)})}export{findSelfOrParentWhere as $,_imports_0 as A,withModifiers as B,vModelSelect as C,renderList as D,normalizeClass as E,Fragment as F,__nuxt_component_0$1 as G,pushScopeId as H,popScopeId as I,useEditorStore as J,getNameExtra as K,getName as L,createStaticVNode as M,inBounds as N,resolveDirective as O,vShow as P,withKeys as Q,normalizeStyle as R,setPrototype as S,Teleport as T,sortByDescending as U,mergeProps as V,first as W,getModifierOrConditionParent as X,deconstruct_affects_query as Y,getDataObject as Z,__vitePreload as _,_export_sfc as a,getAllPossibleParents as a0,filterByItems as a1,construct_affects_query as a2,findParentWhere as a3,getEntryPathInfo as a4,ProfileType as a5,getAtEntryPath as a6,get_base_from_vue_el as a7,get_ctx as a8,useEditorUIState as a9,convertToXml as aA,removeExtension as aB,filename$1 as aC,deleteFile as aD,getDataDbId as aE,dirname as aF,db as aG,__nuxt_component_0$2 as aH,stripHtml as aI,defineStore as aJ,Transition as aK,GameSystemFiles as aL,Base as aM,resolveDynamicComponent as aN,showOpenDialog as aO,getFolderFolders as aP,getPath as aQ,getFolderFiles as aR,removeSuffix$1 as aS,getDefaultExportFromCjs as aT,commonjsGlobal as aU,toRaw as aa,escapeXml as ab,getTypeName as ac,getTypeLabel as ad,groupBy as ae,getEntryPath as af,getModifiedField as ag,reactive as ah,allowed_children as ai,systemCategories as aj,catalogueCategories as ak,LeftPanelDefaults as al,useCataloguesStore as am,getNextRevision as an,showMessageBox as ao,closeWindow as ap,ref as aq,isAllowedExtension as ar,isZipExtension as as,convertToJson as at,getExtension as au,isRef as av,normalizeGithubRepoUrl as aw,unzipFolder as ax,addOne as ay,capitalize as az,createElementBlock as b,createBlock as c,defineAsyncComponent as d,defineComponent as e,useHead as f,guardReactiveProps as g,createVNode as h,createBaseVNode as i,toValue as j,generateBattlescribeId as k,createCommentVNode as l,vModelCheckbox as m,normalizeProps as n,openBlock as o,renderSlot as p,withCtx as q,resolveComponent as r,createTextVNode as s,toDisplayString as t,unref as u,vModelText as v,withDirectives as w,sortByAscending$2 as x,sortByAscendingInplace as y,useSettingsStore as z};
//# sourceMappingURL=entry.1e690e50.js.map
