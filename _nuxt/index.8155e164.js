import{_ as K,a as re}from"./CreateSystem.bb8f0161.js";import{e as R,an as z,o as r,b as c,i as s,u as C,F as w,s as b,ao as ee,ap as ue,aq as te,ar as M,Y as m,a as B,w as k,v as F,as as ce,t as h,at as T,au as de,aj as q,J as Y,av as J,aw as me,x as X,D as j,E as G,B as ge,l as g,h as S,H as W,I as L,ax as he,ay as O,az as pe,aA as _e,aB as fe,aC as v,c as E,q as $,C as ye,m as se,G as be,z as ve,al as Ce,am as ke,k as we,aD as Se,aE as x,r as Q,T as Ie,aF as xe}from"./entry.ba5987ef.js";import{a as ae,b as Ae,_ as Ue,c as oe}from"./warning_sign.6cdf6312.js";import{_ as Fe}from"./right2.91afc9dd.js";const Ee=["disabled"],$e=R({__name:"UploadJson",emits:["uploaded"],setup(e,{emit:t}){const o=z(null),l=z(!1);async function i(n){var d;try{l.value=!0;const u=[...((d=n.target)==null?void 0:d.files)||[]];if(!u){l.value=!1;return}const _=[];for(const f of u.filter(I=>ee(I.name))){const I=ue(f.name)?await f.arrayBuffer():await f.text(),A=await te(I,M(f.name));m(A).fullFilePath=f.name,_.push(A)}_.length&&t("uploaded",_),l.value=!1}catch(u){console.error(u),l.value=!1}}async function a(){o.value.click()}return(n,d)=>(r(),c(w,null,[s("input",{type:"file",accept:".gst, .gstz, .xml, .zip, .cat, .catz, .json",multiple:"",onChange:i,class:"invisible",ref_key:"fileinput",ref:o},null,544),s("button",{onClick:a,class:"bouton",disabled:C(l)},[C(l)?(r(),c(w,{key:1},[b(" ... ")],64)):(r(),c(w,{key:0},[b(" Import Catalogues ")],64))],8,Ee)],64))}});const le=B($e,[["__scopeId","data-v-959d97f5"]]),De=["disabled"],ne=R({__name:"ImportFromGithub",emits:["uploaded"],setup(e,{emit:t}){const o=z(""),l=z(!1);async function i(a){if(!a||T(a)!==a){console.log("bad url",a);return}try{l.value=!0;const n=a.split("/").slice(-2).join("/"),d=n.split("/")[1],u=`https://api.github.com/repos/${n}`,_=(await $fetch(u)).default_branch,f=`https://codeload.github.com/${n}/zip/refs/heads/${_}`,I=await $fetch(`https://corsproxy.io/?${f}`),A=await de(I,`${d}-${_}`),N=[];for(const[V,y]of Object.entries(A)){const P=M(V);if(ee(P))try{const U=await te(y,P);m(U).fullFilePath=V,N.push(U)}catch{continue}}N.length&&t("uploaded",N),o.value=""}catch(n){console.error(n)}finally{l.value=!1}}return(a,n)=>(r(),c(w,null,[k(s("input",{type:"text",class:"bouton !font-normal","onUpdate:modelValue":n[0]||(n[0]=d=>ce(o)?o.value=d:null),placeholder:'repo eg: "BSData/wh40k"'},null,512),[[F,C(o)]]),s("button",{onClick:n[1]||(n[1]=d=>i(C(T)(C(o)))),class:"bouton",disabled:C(T)(C(o))==null||C(l)},h(C(l)?"...":"Import from github"),9,De)],64))}}),Ne={emits:["new","itemClicked","itemDoubleClicked"],setup(){return{cataloguesStore:q(),store:Y()}},props:{items:{type:Array,required:!0},modelValue:{required:!0}},methods:{debug(e){console.log(e)},getDataObject:m,getType(e){var t;return e.gameSystem?{icon:"assets/icons/system1.png",order:1}:(t=e.catalogue)!=null&&t.library?{icon:"assets/icons/library.png",order:2}:{icon:"assets/icons/book.png",order:3}},elementDoubleClicked(e){this.$emit("itemDoubleClicked",e)},elementClicked(e){this.$emit("itemClicked",e)},changed(e){return this.store.get_catalogue_state(e).isChangedOnDisk},errors(e){var l;const t=[];(l=this.store.get_catalogue_state(e))!=null&&l.unsaved&&t.push({severity:"info",msg:"Unsaved"});const o=m(e).errors;if(o!=null&&o.length){const i={};for(const n of o)n.severity?J(i,n.severity):J(i,"error");let a=[];for(const n in i)a.push(`${i[n]} ${me(n)}${i[n]===1?"":"s"}`);o.find(n=>n.severity==="error")?t.push({severity:"error",msg:`Has ${a.join(", ")}`}):o.find(n=>n.severity==="warning")&&t.push({severity:"warning",msg:`Has ${a.join(", ")}`})}return t},opened(e){return m(e).opened},name(e){return m(e).name},add(){this.$emit("new")}},computed:{sortedItems(){return X(X(this.items,e=>this.name(e)),e=>this.getType(e).order)}},components:{ErrorIcon:ae}};const Z=e=>(W("data-v-72c66826"),e=e(),L(),e),Pe={class:"items"},Be=["onClick","onDblclick","onMouseup"],Ve=["src"],ze={class:"error flex flex-row"},je={key:0,class:"my-auto",title:`This file was changed by another program.
You may want to reload the system through the Systems tab`},Te=Z(()=>s("img",{class:"my-auto align-text-bottom",src:Ae},null,-1)),Oe=[Te],Je=Z(()=>s("img",{class:"w-40px h-40px",src:Ue},null,-1)),Ge=Z(()=>s("div",{class:"bold text-blue"},"New",-1)),Re=[Je,Ge];function Me(e,t,o,l,i,a){const n=ae;return r(),c("div",Pe,[(r(!0),c(w,null,j(a.sortedItems,d=>(r(),c("div",{class:G(["relative item unselectable",{highlight:a.opened(d),selected:d===o.modelValue}]),onClick:u=>a.elementClicked(d),onDblclick:u=>a.elementDoubleClicked(d),onMouseup:ge(u=>a.debug(d),["middle"])},[s("img",{class:"icon",src:a.getType(d).icon},null,8,Ve),s("div",null,h(a.name(d)),1),s("div",ze,[a.changed(d)?(r(),c("span",je,Oe)):g("",!0),S(n,{errors:a.errors(d)},null,8,["errors"])])],42,Be))),256)),s("div",{class:"relative item add unselectable",onClick:t[0]||(t[0]=(...d)=>a.add&&a.add(...d))},Re)])}const ie=B(Ne,[["render",Me],["__scopeId","data-v-72c66826"]]),qe={emits:["edit","delete"],props:{catalogue:{type:Object,required:!0}},setup(){return{catalogueStore:q(),store:Y()}},data(){return{deletePopup:!1,changeFormatPopup:!1,format:"gst",deleteExistingFiles:!1}},methods:{download_file(){const e=m(this.catalogue),t=this.store.get_system(e.gameSystemId||e.id).getLoadedCatalogue({targetId:e.id}),o=he(t||e),l=e.fullFilePath?O(pe(e.fullFilePath)):e.name,i=e.gameSystemId?"cat":"gst";_e(`${l}.${i}`,"application/xml",o)},popup_change_format(){this.changeFormatPopup=!0},async change_format(e,t){const o=m(this.catalogue),i=this.store.get_system(o.gameSystemId||o.id).getAllCatalogueFiles();for(const a of i){const n=m(a),d=n.fullFilePath;if(d){t&&await fe(d);const u=!!a.gameSystem;let _;const f=O(d);switch(e){case"gstz":_=u?"gstz":"catz";break;case"gst":_=u?"gst":"cat";break;case"json":_="json";break}n.fullFilePath=`${f}.${_}`,console.log(n.fullFilePath),this.store.saveCatalogue(a)}}}},computed:{has_duplicate_filename(){const e=m(this.catalogue),o=this.store.get_system(e.gameSystemId||e.id).getAllCatalogueFiles(),l={};for(const i of o){const n=m(i).fullFilePath;n&&J(l,O(n))}return Object.values(l).find(i=>i>1)},is_catalogue(){return!!this.catalogue.catalogue},electron(){return!!globalThis.electron},imports(){return this.cataloguedata.catalogueLinks||[]},refs(){return this.catalogueStore.getDependents(v(this.catalogue))||[]},cataloguedata(){return m(this.catalogue)},isSystem(){return!this.cataloguedata.gameSystemId}}};const p=e=>(W("data-v-f5705f13"),e=e(),L(),e),Ye={class:"details"},We={key:0},Le=p(()=>s("span",{class:"grey hastooltip",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."}," Library: ",-1)),Ze=p(()=>s("span",{class:"grey"},"Id:",-1)),He=p(()=>s("span",{class:"grey"},"path:",-1)),Xe={style:{"word-break":"break-all"}},Qe={key:1},Ke=p(()=>s("span",{class:"grey"},"authorUrl:",-1)),et=p(()=>s("span",{class:"grey"},"authorContact:",-1)),tt=p(()=>s("span",{class:"grey"},"authorName:",-1)),st={key:2},at=p(()=>s("span",{class:"bold"},"imports:",-1)),ot={class:"ml-10px"},lt={key:3},nt=p(()=>s("span",{class:"bold"},"imported by:",-1)),it={class:"ml-10px"},rt={class:"section boutons"},ut=p(()=>s("p",{class:"info"}," To quickly edit a catalogue, you can double-click on it. ",-1)),ct=p(()=>s("label",{for:"newFormat"},"New Format:",-1)),dt=p(()=>s("option",{value:"gstz"},".gstz/.catz (Zipped XML)",-1)),mt=p(()=>s("option",{value:"gst"},".gst/.cat (XML)",-1)),gt={key:0,value:"json"},ht={key:0},pt=p(()=>s("span",{class:"gray"},"Note: Cannot convert to json because a catalogue has the same filename as the gst",-1)),_t=[pt],ft=p(()=>s("label",{for:"deleteExisting"},"Delete existing files:",-1));function yt(e,t,o,l,i,a){var d;const n=be;return r(),c("fieldset",Ye,[s("div",null,[s("legend",null,h(a.cataloguedata.name),1),a.is_catalogue?(r(),c("div",We,[Le,b(" "+h(a.cataloguedata.library),1)])):g("",!0),s("div",null,[Ze,b(" "+h(a.cataloguedata.id),1)]),s("div",null,[He,b(),s("span",Xe,h(a.cataloguedata.fullFilePath),1)]),a.electron?(r(),c("div",Qe,[Ke,b(" "+h(a.cataloguedata.authorUrl),1)])):g("",!0),s("div",null,[et,b(" "+h(a.cataloguedata.authorContact),1)]),s("div",null,[tt,b(" "+h(a.cataloguedata.authorName),1)]),(d=a.cataloguedata.catalogueLinks)!=null&&d.length?(r(),c("div",st,[at,s("div",ot,[(r(!0),c(w,null,j(a.cataloguedata.catalogueLinks,u=>(r(),c("div",null,[s("span",{class:G({grey:!u.importRootEntries})},h(u.name),3)]))),256))])])):g("",!0),a.refs.length&&!a.isSystem?(r(),c("div",lt,[nt,s("div",it,[(r(!0),c(w,null,j(a.refs,u=>(r(),c("div",null,[s("span",{class:G({grey:!u.importRootEntries})},h(u.sourceName),3)]))),256))])])):g("",!0)]),s("div",rt,[s("button",{class:"bouton",onClick:t[0]||(t[0]=u=>e.$emit("edit",o.catalogue))},"Edit"),s("button",{class:"bouton",onClick:t[1]||(t[1]=u=>i.deletePopup=!0)},"Delete"),s("button",{class:"bouton",onClick:t[2]||(t[2]=(...u)=>a.download_file&&a.download_file(...u))},"Download"),a.isSystem?(r(),c("button",{key:0,class:"bouton",onClick:t[3]||(t[3]=(...u)=>a.popup_change_format&&a.popup_change_format(...u))},"Change File Format")):g("",!0),ut]),i.deletePopup?(r(),E(n,{key:0,button:"Confirm",text:"Cancel",onButton:t[4]||(t[4]=u=>e.$emit("delete",o.catalogue)),modelValue:i.deletePopup,"onUpdate:modelValue":t[5]||(t[5]=u=>i.deletePopup=u)},{default:$(()=>[s("div",null,"Are you sure you want to delete this "+h(a.is_catalogue?"catalogue":"Game System")+"?",1)]),_:1},8,["modelValue"])):g("",!0),i.changeFormatPopup?(r(),E(n,{key:1,button:"Confirm",text:"Cancel",onButton:t[8]||(t[8]=u=>a.change_format(i.format,i.deleteExistingFiles)),modelValue:i.changeFormatPopup,"onUpdate:modelValue":t[9]||(t[9]=u=>i.changeFormatPopup=u)},{default:$(()=>[s("div",null,[ct,k(s("select",{id:"newFormat","onUpdate:modelValue":t[6]||(t[6]=u=>i.format=u)},[dt,mt,a.has_duplicate_filename?g("",!0):(r(),c("option",gt,".json (JSON)"))],512),[[ye,i.format]])]),a.has_duplicate_filename?(r(),c("div",ht,_t)):g("",!0),s("div",null,[ft,k(s("input",{type:"checkbox",id:"deleteExisting","onUpdate:modelValue":t[7]||(t[7]=u=>i.deleteExistingFiles=u)},null,512),[[se,i.deleteExistingFiles]])])]),_:1},8,["modelValue"])):g("",!0)])}const bt=B(qe,[["render",yt],["__scopeId","data-v-f5705f13"]]),vt={emits:["create"],props:{catalogue:{type:Object,required:!0}},computed:{cataloguedata(){return m(this.catalogue)}}};const D=e=>(W("data-v-3d1f2a25"),e=e(),L(),e),Ct={class:"details"},kt={class:"editorTable"},wt=D(()=>s("td",null,[s("label",{for:"name"}," name: ")],-1)),St=D(()=>s("td",null,[s("label",{for:"authorUrl"}," authorUrl: ")],-1)),It=D(()=>s("td",null,[s("label",{for:"authorContact"}," authorContact: ")],-1)),xt=D(()=>s("td",null,[s("label",{for:"authorName"}," authorName: ")],-1)),At=D(()=>s("td",null,"id:",-1)),Ut=D(()=>s("td",null,[s("label",{for:"library",class:"hastooltip",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."}," library: ")],-1));function Ft(e,t,o,l,i,a){return r(),c("fieldset",Ct,[s("legend",null,h(a.cataloguedata.name),1),s("table",kt,[s("tr",null,[wt,s("td",null,[k(s("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=n=>a.cataloguedata.name=n)},null,512),[[F,a.cataloguedata.name]])])]),s("tr",null,[St,s("td",null,[k(s("input",{type:"text",id:"authorUrl","onUpdate:modelValue":t[1]||(t[1]=n=>a.cataloguedata.authorUrl=n)},null,512),[[F,a.cataloguedata.authorUrl]])])]),s("tr",null,[It,s("td",null,[k(s("input",{type:"text",id:"authorContact","onUpdate:modelValue":t[2]||(t[2]=n=>a.cataloguedata.authorContact=n)},null,512),[[F,a.cataloguedata.authorContact]])])]),s("tr",null,[xt,s("td",null,[k(s("input",{type:"text",id:"authorName","onUpdate:modelValue":t[3]||(t[3]=n=>a.cataloguedata.authorName=n)},null,512),[[F,a.cataloguedata.authorName]])])]),s("tr",null,[At,s("td",null,[k(s("input",{type:"text",class:"gray",id:"id","onUpdate:modelValue":t[4]||(t[4]=n=>a.cataloguedata.id=n)},null,512),[[F,a.cataloguedata.id]])])]),s("tr",null,[Ut,s("td",null,[k(s("input",{type:"checkbox",id:"library","onUpdate:modelValue":t[5]||(t[5]=n=>a.cataloguedata.library=n)},null,512),[[se,a.cataloguedata.library]])])])]),s("button",{class:"bouton",onClick:t[6]||(t[6]=n=>e.$emit("create",o.catalogue))}," Create Catalogue ")])}const Et=B(vt,[["render",Ft],["__scopeId","data-v-3d1f2a25"]]),$t=R({components:{UploadJson:le,CataloguesDetail:bt,ImportFromGithub:ne,CataloguesCreate:Et,SelectFile:K,IconContainer:ie,SplitView:oe},head(){return{title:"New Recruit - Editor"}},data(){return{msg:"",selectedItem:null,mode:"edit",editingItem:null,failed:!1}},setup(){return{cataloguesStore:q(),store:Y(),settings:ve()}},created(){this.store.init(this.$router),electron||this.store.load_systems_from_db()},activated(){window.addEventListener("beforeunload",this.beforeUnload)},deactivated(){window.removeEventListener("beforeunload",this.beforeUnload)},computed:{has_unsaved_changes(){const e=this.store.unsavedChanges;for(const t in e)if(e[t].unsaved)return!0;return!1},electron(){return!!globalThis.electron},filter(){var t;const e=(t=this.$route.query)==null?void 0:t.id;if(e)return e.split(",")},systems(){if(this.filter){const e={};for(const t of this.filter){const o=this.store.gameSystems[t];return o&&(e[t]=o),e}}return this.store.gameSystems}},methods:{githubHoverTitle(e){return e.discovered?`using discovered .git repo at ${e.githubUrl}
use a publication name="Github", url="https://github.com/{owner}/{repo}" in the gameSystem to overwrite.`:`using repo at ${e.githubUrl}`},async saveAll(){var t;let e=!1;try{for(const o of Object.values(this.systems)){const l=await this.store.prompt_revision(o);for(const i of o.getAllLoadedCatalogues())(t=this.store.get_catalogue_state(i))!=null&&t.unsaved&&this.store.save_catalogue(o,i,l)}}catch{e=!0}this.failed=e},async beforeUnload(e){if(!globalThis._closeWindow){if(this.store.unsavedCount){const t="You have unsaved changes that will be lost";e.returnValue=t,electron&&setTimeout(async()=>{await Ce({message:"You have unsaved changes that will be lost?",buttons:["Cancel","Leave"],defaultId:0,cancelId:0,type:"question"})===1&&(globalThis._closeWindow=!0,ke())})}return!1}},systemAndCatalogues(e){let t=[];return e.gameSystem&&t.push(e.gameSystem),e.catalogueFiles&&t.push(...Object.values(e.catalogueFiles)),t},itemClicked(e){this.selectedItem=e,this.mode="edit"},itemDoubleClicked(e){const t=m(e).id,o=m(e).gameSystemId||t;this.$router.push({name:"catalogue",query:{systemId:o,id:t}})},newCatalogue(e){if(!e.gameSystem)return;const t=e.gameSystem.gameSystem;this.mode="create",this.selectedItem={catalogue:{library:!1,id:we(),name:"New Catalogue",gameSystemId:t.id,gameSystemRevision:t.revision,revision:1}}},getCatExtension(e){switch(M(e)){case"json":return"json";case"gstz":return"catz";default:case"gst":return"cat"}},createCatalogue(e){const t=this.store.get_system(e.catalogue.gameSystemId),o=JSON.parse(JSON.stringify(e));if(o.catalogue.battleScribeVersion="2.03",electron){if(!t.gameSystem)throw new Error("Cannot create catalogue: no game system");const l=m(t.gameSystem).fullFilePath;if(!l)throw new Error("Cannot create catalogue: game system has no path set");const i=o.catalogue.name;if(!i)throw new Error("Cannot create catalogue: no name provided");const a=Se(l);m(o).fullFilePath=`${a}/${i}.${this.getCatExtension(l)}`}t.setCatalogue(o),this.cataloguesStore.setEdited(v(o),!0),this.store.set_catalogue_changed(o,!0),this.store.get_catalogue_state(o).incremented=!0,this.selectedItem=o,electron||x.catalogues.put({content:o,id:v(e)}),this.mode="edit"},deleteCatalogue(e){console.log("Deleted catalogue",e);const t=m(e),o=t.gameSystemId||t.id;if(e.catalogue)this.store.get_system(o).removeCatalogue(e),electron||x.catalogues.delete(v(e));else if(e.gameSystem){const l=this.store.get_system(o);for(const i of Object.values(l.catalogueFiles)){const a=v(i);x.catalogues.delete(a)}x.catalogues.delete(v(l.gameSystem)),x.systems.delete(v(l.gameSystem)),this.store.delete_system(o)}this.selectedItem=null},filesUploaded(e){console.log("Uploaded",e.length,"files",e);const t=e.filter(l=>l.gameSystem);for(const l of t){const i=l.gameSystem.id,a=v(l);this.store.get_system(i).setSystem(l),electron||x.systems.put({content:l,id:a}),this.cataloguesStore.updateCatalogue(l.gameSystem),this.cataloguesStore.setEdited(a,!1)}const o=e.filter(l=>l.catalogue);for(const l of o){const i=l.catalogue.gameSystemId;this.store.get_system(i).setCatalogue(l),electron||x.catalogues.put({content:l,id:v(l)}),this.cataloguesStore.updateCatalogue(l.catalogue),this.cataloguesStore.setEdited(v(l),!1)}delete this.$route.query.id},async editCatalogue(e){const t=m(e).id,o=m(e).gameSystemId||t;this.$router.push({name:"catalogue",query:{systemId:o,id:t}})}}}),Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAKa8AACmvAUYJFJkAAAJdSURBVFhHvddNiE1hHMfxy1yS8VYMm1mwklhYoBRqrLCgWCkvCysxXiIrS4tZmVkrCyWZTF6WSEo2SMhLFt6KsuAOMUNJ+P6cc29//55z7/Oce8evPp1zp3me+z/Pec5znltpkW7sxDk8xzh+ooY7GMRaTEJHMw3HMYrfER5gAzqSJXiK0Be1choqvnRW4BNCnce6Ad26qNh7twh3Me/vp3/zBJehkdE8WIDV2Io58LmEbVBBUZmM2/BX8xabUZSZGIAmpm+7F9HZDt/BI+hKY7IFP2Db60kJjU4wD+Eb9yIl+2D7kKNomWXwDfcjNZpP92D70ePZMgdgG33FdJTJLti+fmEuCqPJpxGw0WT8lp0m53p+rEejsjQ7DUcFzM9OG3mZH8vkPXzxTSeyCvDRsLUT377pe0IFfMxOG1mYH8tEi9iM7LSRD/kxGBWg1c1mDaZmp8lZnx9tnuXHwiyHnbmyG2VyE7Yff3GFUZW24Ts0fXwCCa2meqVHZQ9841vQWh8T3bYx2PZfEHqxBdOF+7AdyGOsRFGqOIjv8G2PISnaiHyG70iP1TXo7bYO2jNswgm8hv//urPQhSWlD34o26G9pEYpKavwBqEOyziP5CJm4SS0rIY69V7hlPubNYzkIpQeaJJdhVa0eofaAb3AGWgzUu/8COwXWxcwBW1FO97ZaHY1hxEqQEbQdhExOQQ9PaEiLuK/FKGNTlER2jWXfd8kpR9FRVxBNXmhSIx+Z2iDuxF+X7AYtYkuQFEReoK0evoi/F5kQqOl3N+OpB8vncgO6NeW3pRDlUql6w9PQiGMhlvIAAAAAABJRU5ErkJggg==";const Nt={key:0,class:"p-10px"},Pt={class:"box"},Bt=s("h3",null,"My Catalogues",-1),Vt={class:"boutons"},zt={key:0},jt=s("p",{class:"info"},[b(" To return to this page, simply click on the 'New Recruit' icon located in the top-left corner of the screen. "),s("br"),b(" Returning to this page will not cause you to lose your changes. ")],-1),Tt={class:"mx-10px box h-full pb-200px"},Ot={class:"scrollable"},Jt=s("img",{class:"w-24px h-24px",src:Dt,title:"Search"},null,-1),Gt=["href"],Rt=["src","title"],Mt=s("img",{class:"w-24px h-24px",src:Fe,title:"Scripts"},null,-1),qt={key:0,class:"scrollable"},Yt={key:1,class:"status mx-2 text-red"},Wt={key:2,class:"status mx-2"};function Lt(e,t,o,l,i,a){const n=K,d=le,u=ne,_=re,f=xe,I=ie,A=Q("CataloguesCreate"),N=Q("CataloguesDetail"),V=oe;return r(),c(w,null,[e.electron?g("",!0):(r(),c("div",Nt,[s("div",Pt,[Bt,s("div",Vt,[e.electron?(r(),E(n,{key:0,onUploaded:e.filesUploaded},null,8,["onUploaded"])):g("",!0),S(d,{onUploaded:e.filesUploaded},null,8,["onUploaded"]),S(u,{onUploaded:e.filesUploaded},null,8,["onUploaded"]),S(_)]),e.electron?(r(),c("div",zt," Note: if you modify an already imported file in another program, you will need to import it again ")):g("",!0)])])),jt,s("div",Tt,[S(V,{showMiddle:"",showRight:"",rightWidth:400,id:"systemView"},{middle:$(()=>[s("div",Ot,[(r(!0),c(w,null,j(e.systems,y=>{var P,U;return r(),c("fieldset",null,[s("legend",null,[b(h(((P=y.gameSystem)==null?void 0:P.gameSystem.name)||"Unknown GameSystem")+" ",1),S(f,{to:`/search/${y.getId()}`,class:"align-bottom imgBt inline-block"},{default:$(()=>[Jt]),_:2},1032,["to"]),(U=y.github)!=null&&U.githubUrl?(r(),c("a",{key:0,href:y.github.githubUrl,target:"_blank",class:"ml-5px align-bottom imgBt inline-block"},[s("img",{class:"w-24px h-24px",src:e.settings.theme==="dark"?"assets/icons/github-dark.png":"assets/icons/github-light.png",title:e.githubHoverTitle(y.github)},null,8,Rt)],8,Gt)):g("",!0),S(f,{to:`/scripts/${y.getId()}`,class:"align-bottom imgBt inline-block"},{default:$(()=>[Mt]),_:2},1032,["to"])]),S(I,{items:e.systemAndCatalogues(y),onItemClicked:e.itemClicked,onItemDoubleClicked:e.itemDoubleClicked,onNew:H=>e.newCatalogue(y),modelValue:e.selectedItem,"onUpdate:modelValue":t[0]||(t[0]=H=>e.selectedItem=H)},null,8,["items","onItemClicked","onItemDoubleClicked","onNew","modelValue"])])}),256))])]),right:$(()=>[e.selectedItem?(r(),c("div",qt,[e.mode==="create"?(r(),E(A,{key:0,onCreate:e.createCatalogue,catalogue:e.selectedItem},null,8,["onCreate","catalogue"])):(r(),E(N,{key:1,onDelete:e.deleteCatalogue,onEdit:e.editCatalogue,catalogue:e.selectedItem},null,8,["onDelete","onEdit","catalogue"]))])):g("",!0)]),_:1}),e.has_unsaved_changes&&e.$route.name=="index"?(r(),E(Ie,{key:0,to:"#titlebar-content"},[e.has_unsaved_changes?(r(),c("button",{key:0,class:"bouton save ml-10px !w-100px",onClick:t[1]||(t[1]=(...y)=>e.saveAll&&e.saveAll(...y))},"Save All")):e.failed?(r(),c("span",Yt,"failed to save")):(r(),c("span",Wt,"saved"))])):g("",!0)])],64)}const Kt=B($t,[["render",Lt]]);export{Kt as default};
//# sourceMappingURL=index.8155e164.js.map
