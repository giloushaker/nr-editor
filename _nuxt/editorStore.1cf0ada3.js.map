{"version":3,"file":"editorStore.1cf0ada3.js","sources":["../../../../assets/shared/battlescribe/exactly_constraints.ts","../../../../assets/shared/battlescribe/bs_main.ts","../../../../assets/shared/battlescribe/bs_condition.ts","../../../../assets/shared/battlescribe/bs_modifiers.ts","../../../../assets/shared/battlescribe/bs_main_catalogue.ts","../../../../node_modules/unzipit/dist/unzipit.module.js","../../../../node_modules/fast-xml-parser/src/util.js","../../../../node_modules/fast-xml-parser/src/validator.js","../../../../node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js","../../../../node_modules/fast-xml-parser/src/xmlparser/xmlNode.js","../../../../node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js","../../../../node_modules/strnum/strnum.js","../../../../node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js","../../../../node_modules/fast-xml-parser/src/xmlparser/node2json.js","../../../../node_modules/fast-xml-parser/src/xmlparser/XMLParser.js","../../../../node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js","../../../../node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js","../../../../node_modules/fast-xml-parser/src/fxp.js","../../../../assets/shared/battlescribe/entries.ts","../../../../assets/shared/battlescribe/bs_convert.ts","../../../../assets/shared/battlescribe/bs_editor.ts","../../../../assets/shared/battlescribe/bs_main_types.ts","../../../../stores/cataloguesState.ts","../../../../electron/node_helpers.ts","../../../../stores/editorUIState.ts","../../../../components/catalogue/left_panel/LeftPanel.vue","../../../../node_modules/dexie/dist/modern/dexie.min.mjs","../../../../assets/shared/battlescribe/cataloguesdexie.ts","../../../../assets/shared/battlescribe/github.ts","../../../../assets/shared/battlescribe/bs_versioning.ts","../../../../assets/shared/battlescribe/bs_load_data.ts","../../../../assets/shared/battlescribe/bs_system.ts","../../../../assets/shared/battlescribe/local_game_system.ts","../../../../stores/editorStore.ts"],"sourcesContent":["import { copy } from \"./bs_helpers\";\nimport { BSIConstraint, BSIModifier, BSIModifierGroup } from \"./bs_types\";\n\nexport function splitExactlyConstraints(obj: { constraints?: BSIConstraint[] }) {\n  if (!obj.constraints) return obj;\n  const constraints = [];\n  for (const constraint of obj.constraints) {\n    if (constraint.type === \"exactly\") {\n      const min = { ...constraint, id: constraint.id + \"-min\", type: \"min\" } as BSIConstraint;\n      const max = { ...constraint, id: constraint.id + \"-max\", type: \"max\" } as BSIConstraint;\n      constraints.push(min, max);\n    } else {\n      constraints.push(constraint);\n    }\n  }\n  const result = copy(obj);\n  result.constraints = constraints;\n  return result;\n}\n// recursively Split all modifiers wich affected an `exactly` constraint to affect its generated min & max constraints.\nexport function splitExactlyConstraintsModifiers<T>(\n  obj: T & {\n    modifiers?: BSIModifier[];\n    modifierGroups?: BSIModifierGroup[];\n    constraintsIterator(): Iterable<BSIConstraint>;\n  }\n): T {\n  if (!obj.modifiers && !obj.modifierGroups) return obj;\n  if (!obj.constraintsIterator) return obj;\n  // Find all exactly constraints wich we need to find modifiers for\n  const constraints = {} as Record<string, BSIConstraint>;\n  for (const constraint of obj.constraintsIterator()) {\n    if (constraint.type === \"exactly\") {\n      constraints[constraint.id] = constraint;\n    }\n  }\n\n  // Return a new modifiers array with the modifiers split\n  function splitModifiers(modifiers: BSIModifier[]) {\n    // if modifier points to exactly constraint, split it\n    // and set the cloned modifiers to be returned as copy\n\n    const out_modifiers = [] as BSIModifier[];\n    for (const modifier of modifiers) {\n      if (modifier.field in constraints) {\n        const min = { ...modifier, field: modifier.field + \"-min\" } as BSIModifier;\n        const max = { ...modifier, field: modifier.field + \"-max\" } as BSIModifier;\n        out_modifiers.push(min, max);\n      } else {\n        out_modifiers.push(modifier);\n      }\n    }\n    return out_modifiers;\n  }\n\n  function splitModifierGroups(modifierGroups: BSIModifierGroup[]) {\n    const out_group = [] as BSIModifierGroup[];\n    for (const group of modifierGroups) {\n      const split = { ...group } as BSIModifierGroup;\n      if (split.modifiers) {\n        split.modifiers = splitModifiers(split.modifiers);\n      }\n      if (split.modifierGroups) {\n        split.modifierGroups = splitModifierGroups(split.modifierGroups);\n      }\n      out_group.push(split);\n    }\n    return out_group;\n  }\n\n  const result = copy(obj);\n\n  if (result.modifiers) {\n    result.modifiers = splitModifiers(result.modifiers);\n  }\n  if (result.modifierGroups) {\n    result.modifierGroups = splitModifierGroups(result.modifierGroups);\n  }\n  return result;\n}\n","import type {\n  BSIModifier,\n  BSIModifierGroup,\n  BSIConstraint,\n  BSIProfile,\n  BSIRule,\n  BSICost,\n  BSIPublication,\n  BSINamed,\n  BSIProfileType,\n  BSICatalogue,\n  BSICharacteristic,\n  BSICondition,\n  BSIConditionGroup,\n  BSIRepeat,\n  BSICharacteristicType,\n  BSIData,\n  BSIGameSystem,\n  NRAssociation,\n  AssociationConstraint,\n  BSIModifierType,\n} from \"./bs_types\";\nimport type { EditorBase, Catalogue } from \"./bs_main_catalogue\";\nimport { clone, isObject } from \"./bs_helpers\";\nimport { splitExactlyConstraints } from \"./exactly_constraints\";\nimport { splitExactlyConstraintsModifiers } from \"./exactly_constraints\";\n\nconst isNonEmptyIfHasOneOf = [\n  \"modifiers\",\n  \"modifierGroups\",\n  \"constraints\",\n\n  \"entryLinks\",\n  \"categoryLinks\",\n  \"selectionEntries\",\n  \"selectionEntryGroups\",\n\n  \"infoLinks\",\n  \"infoGroups\",\n  \"rules\",\n  \"profiles\",\n];\nexport interface BSModifierBase {\n  modifiers?: BSIModifier[];\n  modifierGroups?: BSIModifierGroup[];\n}\n\nconst arrayKeys = [\n  \"profile\",\n  \"rule\",\n  \"infoLink\",\n  \"infoGroup\",\n  \"selectionEntry\",\n  \"selectionEntryGroup\",\n  \"entryLink\",\n\n  \"profiles\",\n  \"rules\",\n  \"infoLinks\",\n  \"infoGroups\",\n  \"entryLinks\",\n  \"selectionEntries\",\n  \"selectionEntryLinks\",\n  \"selectionEntryGroups\",\n\n  \"categoryLinks\",\n  \"costTypes\",\n  \"profileTypes\",\n  \"characteristicTypes\",\n  \"categoryEntries\",\n  \"categories\",\n  \"forceEntries\",\n  \"forces\",\n  \"sharedSelectionEntries\",\n  \"sharedSelectionEntryGroups\",\n  \"sharedProfiles\",\n  \"sharedRules\",\n  \"sharedInfoGroups\",\n  \"rules\",\n  \"rootRules\",\n\n  \"publications\",\n  \"catalogueLinks\",\n  \"constraints\",\n\n  \"characteristics\",\n  \"costs\",\n];\n\nconst arrayKeysWithoutId = [\"conditions\", \"conditionGroups\", \"modifiers\", \"modifierGroups\", \"repeats\"];\nexport const goodKeys = new Set([...arrayKeys, ...arrayKeysWithoutId]);\nexport const goodKeysWiki = new Set(arrayKeys);\nexport function getDataObject(data: BSIData | Catalogue): BSIGameSystem | BSICatalogue {\n  if ((data as Catalogue).isCatalogue && (data as Catalogue).isCatalogue()) {\n    return data as BSICatalogue;\n  }\n  if ((data as BSIData).gameSystem) return (data as BSIData).gameSystem!;\n  if ((data as BSIData).catalogue) return (data as BSIData).catalogue!;\n  throw Error(\"getDataObject data argument is not a valid system or catalogue\");\n}\n\nexport function getDataDbId(data: BSIData | Catalogue): string {\n  if ((data as Catalogue).isCatalogue && (data as Catalogue).isCatalogue()) {\n    if (data.id && data.gameSystemId) {\n      return `${data.gameSystemId}-${data.id}`;\n    }\n    if (data.id) {\n      return `${data.id}`;\n    }\n  }\n  if (data.catalogue) {\n    return `${data.catalogue.gameSystemId}-${data.catalogue.id}`;\n  }\n  if (data.gameSystem) {\n    return data.gameSystem.id;\n  }\n  throw Error(\"getDataId data argument is not a valid system or catalogue\");\n}\n/**\n * This is a base class with generic functions for all nodes in the BSData xml/json\n * Usage: Add it as a prototype on the json to use the functions with Object.setPrototypeOf\n */\nexport class Base implements BSModifierBase {\n  // Data\n  id!: string;\n  type?: string;\n  subType?: \"mount\" | \"crew\";\n  shared?: boolean;\n  import?: boolean;\n  collective?: boolean;\n  comment?: string;\n  publicationId!: string;\n  typeName?: string;\n  typeId?: string;\n  categoryEntryId?: string; // Legacy categories\n  \n  // Data - Modifiable\n  name!: string;\n  hidden!: boolean;\n  value?: number | string | boolean;\n  page?: string;\n  defaultAmount?: number;\n  \n  profiles?: Profile[];\n  rules?: Rule[];\n  infoLinks?: InfoLink[];\n  infoGroups?: InfoGroup[];\n  publications?: BSIPublication[];\n  costs?: BSICost[];\n  \n  // Childs\n  selectionEntries?: Entry[];\n  selectionEntryGroups?: Group[];\n  entryLinks?: Link[];\n  profileTypes?: BSIProfileType[];\n  categoryEntries?: Category[];\n  categoryLinks?: CategoryLink[];\n  forceEntries?: Force[];\n  sharedSelectionEntryGroups?: Group[];\n  sharedSelectionEntries?: Entry[];\n  sharedProfiles?: Profile[];\n  sharedRules?: Rule[];\n  sharedInfoGroups?: InfoGroup[];\n  target?: Base;\n\n  // Modifiers\n  modifiers?: BSIModifier[];\n  modifierGroups?: BSIModifierGroup[];\n  constraints?: BSIConstraint[];\n  repeats?: BSIRepeat[];\n  conditions?: BSICondition[];\n  conditionGroups?: BSIConditionGroup[];\n\n  // Processed (Catalogue)\n  catalogue!: Catalogue; // Parent Catalogue\n  extra_constraints?: BSIExtraConstraint[];\n  childs!: Base[];\n\n  // Processed (self)\n  loaded?: boolean;\n  collective_recursive?: boolean;\n  limited_to_one?: boolean;\n\n  // NR Only\n  associations?: NRAssociation[];\n  associationConstraints?: AssociationConstraint[];\n  flatten?: boolean;\n  sortIndex?: number;\n\n  constructor(json: any) {\n    return Object.setPrototypeOf(json, Object.getPrototypeOf(this));\n  }\n  get url(): string {\n    return \"%{main_catalogue|catalogue}/%{id}/%{getName}\";\n  }\n\n  process() {\n    if (this.loaded) return;\n    this.collective_recursive = this.isCollectiveRecursive();\n    this.limited_to_one = !this.canAmountBeAbove1();\n    this.loaded = true;\n  }\n  toJson() {\n    return entryToJson(this);\n  }\n  getCatalogue() {\n    return this.catalogue;\n  }\n  getGameSystem() {\n    return this.getCatalogue().getGameSystem();\n  }\n  // Prevent Vue Observers\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return (globalThis as any).isEditor ? \"Object\" : \"ObjectNoObserve\";\n  }\n  isGroup(): this is Group | Link<Group> {\n    return false;\n  }\n  isForce(): this is Force {\n    return false;\n  }\n  isCatalogue(): this is Catalogue {\n    return false;\n  }\n  isLink(): this is Link {\n    return false;\n  }\n  isCategory(): this is Category {\n    return false;\n  }\n  isRoster(): boolean {\n    return false;\n  }\n  isQuantifiable(): boolean {\n    return false;\n  }\n  isEntry(): this is Entry {\n    return false;\n  }\n  isIdUnique() {\n    return false;\n  }\n  isRule(): this is Rule | InfoLink<Rule> {\n    return false;\n  }\n  isProfile(): this is Profile | InfoLink<Profile> {\n    return false;\n  }\n  isInfoGroup(): this is InfoGroup | InfoLink<InfoGroup> {\n    return false;\n  }\n  isUnit(): boolean {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return true;\n    }\n    return false;\n  }\n  getId(): string {\n    return this.id;\n  }\n  getType(): string | undefined {\n    return this.subType ?? this.type;\n  }\n  getTypeName(): string | undefined {\n    return this.typeName;\n  }\n  getCategoryEntryId(): string | undefined {\n    return this.categoryEntryId;\n  }\n  getHidden(): boolean | undefined {\n    return this.hidden;\n  }\n  getPage(): string | undefined {\n    return this.page;\n  }\n  getName(): string {\n    return this.name;\n  }\n  getDefaultAmount(): number | undefined {\n    return this.defaultAmount;\n  }\n  isCollective(): boolean | undefined {\n    return this.collective;\n  }\n  isCollectiveRecursive() {\n    const stack = [...this.selectionsIterator()];\n    while (stack.length) {\n      const current = stack.pop()!;\n      if (!current.isCollective() && !current.isGroup()) return false;\n      stack.push(...current.selectionsIterator());\n    }\n    return true;\n  }\n  isEmptyNode(): boolean {\n    for (const key of isNonEmptyIfHasOneOf) {\n      if ((this as any)[key] !== undefined) return false;\n    }\n    return true;\n  }\n  *forcesIterator(): Iterable<Force> {\n    return;\n  }\n  *associationsIterator(): Iterable<NRAssociation> {\n    if (this.associations) {\n      yield* this.associations;\n    }\n  }\n  *profilesIterator(): Iterable<Profile> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.profiles) {\n        yield* group.profiles;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"profile\").map((o) => o.target as Profile);\n      }\n    }\n  }\n  *rulesIterator(): Iterable<Rule> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.rules) {\n        yield* group.rules;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"rule\").map((o) => o.target as Rule);\n      }\n    }\n  }\n  *constraintsIterator(): Iterable<BSIConstraint> {\n    if (this.constraints) yield* this.constraints;\n  }\n  *extraConstraintsIterator(): Iterable<BSIExtraConstraint> {\n    if (this.extra_constraints) yield* this.extra_constraints;\n  }\n  *modifierGroupsIterator(): Iterable<BSIModifierGroup> {\n    if (this.modifierGroups) yield* this.modifierGroups;\n  }\n  *modifiersIterator(): Iterable<BSIModifier> {\n    if (this.modifiers) yield* this.modifiers;\n  }\n  *modifierGroupsIteratorRecursive(): Iterable<BSIModifierGroup> {\n    yield this;\n    if (this.isLink()) yield this.target;\n    for (const group of this.modifierGroupsIterator()) {\n      yield group;\n      yield* iterateModifierGroupsRecursive(group.modifierGroups);\n    }\n  }\n  *selectionsIterator(): Iterable<Base | Link> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *localSelectionsIterator(): Iterable<Base | Link> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *nodesIterator(): Iterable<Base | Link> {\n    if (this.isLink()) yield* this.target.nodesIterator();\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n  *entriesIterator(): Iterable<Base | Link> {\n    if (this.isLink()) yield* this.target.entriesIterator();\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.childs) yield* this.childs;\n  }\n\n  *iterateSelectionEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n  }\n\n  *iterateSelectionEntriesWithRoot(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n  }\n\n  *iterateRootEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n\n  *iterateAllRootEntries(): Iterable<Base> {\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n\n  *categoryLinksIterator(): Iterable<CategoryLink> {\n    if (this.categoryLinks) yield* this.categoryLinks;\n  }\n  *infoLinksIterator(): Iterable<InfoLink> {\n    if (this.infoLinks) yield* this.infoLinks;\n  }\n  *infoGroupsIterator(): Iterable<InfoGroup> {\n    if (this.infoGroups) yield* this.infoGroups;\n  }\n  *infoRulesIterator(): Iterable<Rule> {\n    if (this.isForce()) {\n      const gst = this.getGameSystem();\n      if (gst.rules) {\n        yield* gst.rules;\n      }\n      const cat = this.main_catalogue;\n      if (cat.rules) {\n        yield* cat.rules;\n      }\n    }\n    if (this.rules) yield* this.rules;\n  }\n  *infoProfilesIterator(): Iterable<Profile> {\n    if (this.profiles) yield* this.profiles;\n  }\n\n  /**\n   *If callback returns something other than `undefined`, callback will not be called for the childs of this node\n   */\n  forEachCond(callbackfn: (value: Base | Link, depth: number) => any, _depth = 0): void {\n    if (callbackfn(this, 0) === undefined)\n      for (const instance of this.selectionsIterator()) instance.forEachCond(callbackfn, _depth + 1);\n  }\n  forEach(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    for (const instance of this.selectionsIterator()) instance.forEach(callbackfn);\n  }\n  forEachNode(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    for (const instance of this.nodesIterator()) instance.forEachNode(callbackfn);\n  }\n  forEachNodeCb(callbackfn: (value: Base | Link) => unknown): void {\n    const stack = [this as Base | Link];\n    const blacklist = new Set<string>();\n    while (stack.length) {\n      const cur = stack.pop()!;\n      if (blacklist.has(cur.id)) {\n        continue;\n      } else {\n        blacklist.add(cur.id);\n      }\n      callbackfn(cur);\n      if (cur.childs) {\n        stack.push(...cur.childs);\n        continue;\n      }\n\n      if (cur.target) {\n        const target = cur.target;\n\n        if (target.selectionEntries) stack.push(...target.selectionEntries);\n\n        if (target.selectionEntryGroups) stack.push(...target.selectionEntryGroups);\n\n        if (target.entryLinks) stack.push(...target.entryLinks);\n      }\n      if (cur.selectionEntries) stack.push(...cur.selectionEntries);\n\n      if (cur.selectionEntryGroups) stack.push(...cur.selectionEntryGroups);\n\n      if (cur.entryLinks) stack.push(...cur.entryLinks);\n    }\n  }\n\n  // console.log(\"foreachobjectwhitelist\", keys);\n\n  forEachObjectWhitelist<T extends Base>(callbackfn: (value: T, parent: T) => unknown, whiteList = goodKeys) {\n    const stack = [this as any];\n    // const keys = {} as any;\n\n    while (stack.length) {\n      const current = stack.pop()!;\n      for (const key in current) {\n        const value = current[key];\n        if (!whiteList.has(key)) {\n          // addOne(keys, key);\n          continue;\n        }\n        //  If Array: add each object inside array if (Array.isArray(value)) {\n\n        if (isObject(value)) {\n          if (Array.isArray(value)) {\n            if (value.length && isObject(value[0])) {\n              for (let i = 0; i < value.length; i++) {\n                const cur = value[i];\n                callbackfn(cur, current);\n                stack.push(cur);\n              }\n            }\n          } else {\n            callbackfn(value, current);\n            stack.push(value);\n          }\n        }\n      }\n    }\n\n    // console.log(\"foreachobjectwhitelist\", keys);\n  }\n  forEachObject(callbackfn: (value: Base | Link, parent: Base) => unknown, badKeys = new Set()) {\n    const stack = [this as any];\n    // const keys = {} as any;\n    while (stack.length) {\n      const current = stack.pop()!;\n      for (const key of Object.keys(current)) {\n        const value = current[key];\n        if (badKeys.has(key)) continue;\n        //  If Array: add each object inside array if (Array.isArray(value)) {\n\n        if (isObject(value)) {\n          if (Array.isArray(value)) {\n            if (value.length && isObject(value[0])) {\n              for (let i = value.length; i--; ) {\n                const cur = value[i];\n                callbackfn(cur, current);\n                stack.push(cur);\n              }\n            }\n          } else {\n            callbackfn(value, current);\n            stack.push(value);\n          }\n        }\n      }\n    }\n  }\n  findOption(cb: (opt: Base | Link) => boolean): Base | Link | undefined {\n    for (const s of this.selectionsIterator()) {\n      if (cb(s)) return s;\n    }\n  }\n  findOptionRecursive(cb: (opt: Base | Link) => boolean): Base | Link | undefined {\n    const stack = [...this.selectionsIterator()];\n    while (stack.length) {\n      const current = stack.pop()!;\n      if (cb(current)) return current;\n    }\n  }\n  getCosts(): BSICost[] {\n    return this.costs || [];\n  }\n\n  getPrimaryCategory(): string {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    return this.getCategoryEntryId() ?? UNCATEGORIZED_ID;\n  }\n  getPrimaryCategoryLink(): CategoryLink | undefined {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n  }\n\n  // Modifiers a constraints query to have the same effect when checked from a roster/force.\n  // packs modifiers & modifiers groups inside it\n  getBoundConstraint(constraint: BSIConstraint): BSIExtraConstraint {\n    const result = Object.assign({}, constraint) as BSIExtraConstraint;\n    result.name = this.getName();\n    result.parent = this;\n    const useTarget = constraint.shared || this instanceof CategoryLink;\n    result.childId = this.isLink() && useTarget ? this.targetId : this.id;\n    result.scope = \"self\";\n\n    result.modifiers = [];\n    for (const modifier of this.modifiersIterator()) {\n      if (modifier.field === constraint.id || modifier.field === \"hidden\") result.modifiers.push(modifier);\n    }\n    result.modifierGroups = [];\n    for (const group of this.modifierGroupsIterator()) {\n      current: for (const sub_grp of iterateModifierGroupsRecursive([group])) {\n        for (const modifier of sub_grp.modifiers || []) {\n          if (modifier.field === constraint.id || modifier.field === \"hidden\") {\n            result.modifierGroups.push(group);\n            break current;\n          }\n        }\n      }\n    }\n    return result;\n  }\n  // checks if extra constraints are null before adding them to prevent duplicates\n  // because of this, this must be called before setting roster/force constraints\n  getChildBoundConstraints(skipGroup?: boolean): BSIExtraConstraint[] {\n    const result = [];\n    for (const child of this.selectionsIterator()) {\n      if (skipGroup && child.isGroup()) continue;\n      for (const constraint of child.constraintsIterator()) {\n        if (constraint.type === \"min\" || constraint.type === \"exactly\") {\n          if (constraint.scope === \"parent\") result.push(child.getBoundConstraint(constraint));\n        }\n      }\n\n      if (child.isGroup()) result.push(...child.getChildBoundConstraints());\n    }\n    return result;\n  }\n  canAmountBeAbove1(): boolean {\n    const maxes = getTheoreticalMaxes(this.constraintsIterator(), [\n      ...this.modifierGroupsIterator(),\n      { modifiers: [...this.modifiersIterator()] },\n    ]);\n    if (!maxes.length || maxes.includes(-1)) return true;\n    return Math.min(...maxes) > 1;\n  }\n  hasOption(name: string) {\n    let found: undefined | true = undefined;\n    this.forEachCond((o) => {\n      if (o.getName() === name) found = true;\n      return found;\n    });\n    return found ? true : false;\n  }\n}\n\nexport class Entry extends Base {\n  isEntry() {\n    return true;\n  }\n  isQuantifiable(): boolean {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Group extends Base {\n  declare defaultSelectionEntryId?: string;\n  getDefaultSelectionEntryId() {\n    return this.defaultSelectionEntryId;\n  }\n  isGroup() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Link<T extends Base = Group | Entry> extends Base {\n  targetId!: string;\n  declare target: T;\n  isLink() {\n    return true;\n  }\n  isGroup() {\n    return this.target?.isGroup();\n  }\n  isCategory() {\n    return this.target?.isCategory();\n  }\n  isQuantifiable(): boolean {\n    return this.target?.isQuantifiable();\n  }\n  isEntry() {\n    return this.target?.isEntry();\n  }\n  isIdUnique() {\n    return false;\n  }\n  isProfile(): this is Profile | InfoLink<Profile> {\n    return this.target?.isProfile() || false;\n  }\n  isRule(): this is Rule | InfoLink<Rule> {\n    return this.target?.isRule() || false;\n  }\n  isInfoGroup(): this is InfoGroup | InfoLink<InfoGroup> {\n    return this.target?.isInfoGroup() || false;\n  }\n  isUnit(): boolean {\n    if (this.target.isUnit()) return true;\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return true;\n    }\n    return false;\n  }\n  getId(): string {\n    return this.targetId;\n  }\n  getType(): string | undefined {\n    return this.target?.getType();\n  }\n  getPage(): string | undefined {\n    return this.page || this.target?.page;\n  }\n  getHidden(): boolean | undefined {\n    return this.target.hidden || this.hidden;\n  }\n  getDefaultSelectionEntryId() {\n    return (\n      (this as any as Group).defaultSelectionEntryId || (this.target as any as Group)?.getDefaultSelectionEntryId()\n    );\n  }\n  getCategoryEntryId(): string | undefined {\n    return this.categoryEntryId ?? this.target?.categoryEntryId;\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore: TS2611\n  get associationConstraints(): AssociationConstraint[] | undefined {\n    return this.target.associationConstraints;\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore: TS2611\n  get associations(): NRAssociation[] | undefined {\n    return this.target?.associations;\n  }\n  isCollective(): boolean | undefined {\n    return super.isCollective() || this.target?.isCollective();\n  }\n  *extraConstraintsIterator(): Iterable<BSIExtraConstraint> {\n    yield* this.target.extraConstraintsIterator();\n    yield* super.extraConstraintsIterator();\n  }\n  *associationsIterator(): Iterable<NRAssociation> {\n    yield* this.target.associationsIterator();\n    yield* super.associationsIterator();\n  }\n  *rulesIterator(): Iterable<Rule> {\n    yield* this.target.rulesIterator();\n    yield* super.rulesIterator();\n  }\n  *profilesIterator(): Iterable<Profile> {\n    yield* this.target.profilesIterator();\n    yield* super.profilesIterator();\n  }\n  *constraintsIterator(): Iterable<BSIConstraint> {\n    if (this.target) yield* this.target.constraintsIterator();\n    yield* super.constraintsIterator();\n  }\n  *modifierGroupsIterator(): Iterable<BSIModifierGroup> {\n    yield* this.target.modifierGroupsIterator();\n    yield* super.modifierGroupsIterator();\n  }\n  *modifiersIterator(): Iterable<BSIModifier> {\n    yield* this.target.modifiersIterator();\n    yield* super.modifiersIterator();\n  }\n  *selectionsIterator(): Iterable<Base | Link> {\n    yield* this.target.selectionsIterator();\n    yield* super.selectionsIterator();\n  }\n  *categoryLinksIterator(): Iterable<CategoryLink> {\n    yield* this.target.categoryLinksIterator();\n    yield* super.categoryLinksIterator();\n  }\n  *infoLinksIterator(): Iterable<InfoLink> {\n    yield* this.target.infoLinksIterator();\n    yield* super.infoLinksIterator();\n  }\n  *infoGroupsIterator(): Iterable<InfoGroup> {\n    yield* this.target.infoGroupsIterator();\n    yield* super.infoGroupsIterator();\n  }\n  *infoRulesIterator(): Iterable<Rule> {\n    yield* this.target.infoRulesIterator();\n    yield* super.infoRulesIterator();\n  }\n  *infoProfilesIterator(): Iterable<Profile> {\n    yield* this.target.infoProfilesIterator();\n    yield* super.infoProfilesIterator();\n  }\n  getDefaultAmount(): number | undefined {\n    return this.defaultAmount === undefined ? this.target.defaultAmount : this.defaultAmount;\n  }\n  getName(): string {\n    return this.target?.name || this.name;\n  }\n  getParent(): Base | undefined {\n    return (this as any as EditorBase).parent;\n  }\n  getPrimaryCategory(): string {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    for (const categoryLink of this.target.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink.targetId;\n    }\n    return this.getCategoryEntryId() ?? UNCATEGORIZED_ID;\n  }\n  getPrimaryCategoryLink(): CategoryLink | undefined {\n    for (const categoryLink of this.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n    for (const categoryLink of this.target.categoryLinks || []) {\n      if (categoryLink.primary) return categoryLink;\n    }\n  }\n  getCosts(): BSICost[] {\n    const d = {} as Record<string, BSICost>;\n    if (this.target?.costs) {\n      for (const cost of this.target.costs) d[cost.typeId] = cost;\n    }\n    if (this.costs) {\n      for (const cost of this.costs) d[cost.typeId] = cost;\n    }\n    return Object.values(d);\n  }\n}\n(Link.prototype as any).keyInfoCache = {};\n\nexport class InfoLink<T extends Rule | InfoGroup | Profile = Rule | InfoGroup | Profile> extends Link {\n  declare target: T;\n  declare type: \"infoGroup\" | \"profile\" | \"rule\";\n  getTypeName() {\n    return (this.target as Profile)?.typeName;\n  }\n}\nexport class CategoryLink extends Link {\n  declare targetId: string;\n  declare target: Category;\n  primary?: boolean;\n  main_catalogue!: Catalogue;\n\n  get units() {\n    return this.target.units;\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.target.units;\n  }\n  isEmpty(): boolean {\n    return this.target.isEmpty();\n  }\n}\n\nexport const UNCATEGORIZED_ID = \"(No Category)\";\nexport const ILLEGAL_ID = \"(Illegal Units)\";\nexport class Category extends Base {\n  declare id: string;\n  units!: Array<Base | Link>;\n  main_catalogue!: Catalogue;\n  isCategory(): this is Category {\n    return true;\n  }\n\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.units;\n  }\n  isEmpty(): boolean {\n    return !Boolean(this.units.length);\n  }\n  isIdUnique() {\n    return !this.isEmptyNode();\n  }\n}\nexport class Force extends Base {\n  declare name: string;\n  declare id: string;\n  categories!: Array<Category | CategoryLink>;\n  forces?: Force[];\n  main_catalogue!: Catalogue;\n  isForce(): this is Force {\n    return true;\n  }\n  isEntry() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.categories;\n    if (this.forces) yield* this.forces;\n  }\n  *rulesIterator(): Iterable<Rule> {\n    for (const group of getAllInfoGroups(this)) {\n      if (group.rules) {\n        yield* group.rules;\n      }\n      if (group.infoLinks) {\n        yield* group.infoLinks?.filter((o) => o.type === \"rule\").map((o) => o.target as Rule);\n      }\n    }\n    if (this.main_catalogue) yield* this.main_catalogue.rulesIterator();\n  }\n  generateForces(categories: Record<string, Category>): Force[] {\n    const result = [];\n    for (const force of this.forceEntries || []) {\n      const copied = clone(force);\n      copied.main_catalogue = this.main_catalogue;\n      const forceCategories = [];\n      for (const link of force.categoryLinks || []) {\n        if (link.targetId in categories) {\n          forceCategories.push(categories[link.targetId]);\n        }\n      }\n      copied.categories = forceCategories;\n      this.main_catalogue.index[copied.id] = copied;\n      result.push(copied);\n    }\n    this.forces = result;\n    return result;\n  }\n  isEmpty(): boolean {\n    for (const category of this.categories) {\n      if (!category.isEmpty()) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  *forcesIterator(): Iterable<Force> {\n    if (this.forceEntries) {\n      yield* this.forceEntries;\n    }\n  }\n\n  *forcesIteratorRecursive(): Iterable<Force> {\n    if (this.forces) {\n      for (const force of this.forces) {\n        yield force;\n        yield* force.forcesIteratorRecursive();\n      }\n    }\n  }\n}\n\nconst maxValue = Infinity;\nexport function getTheoreticalMaxes(\n  constraints: Iterable<BSIConstraint>,\n  modifierGroups: Iterable<BSIModifierGroup>\n): number[] {\n  const maxConstraints = [] as number[];\n  function push(n: number) {\n    maxConstraints.push(n);\n  }\n  for (const constraint of constraints) {\n    const beginLength = maxConstraints.length;\n    if (constraint.field !== \"selections\" || constraint.type !== \"max\") continue;\n    if (constraint.value > 1) {\n      push(constraint.value);\n      continue;\n    }\n    let constraintValue = constraint.value;\n    for (const modifier_group of iterateModifierGroupsRecursive(modifierGroups)) {\n      for (const modifier of modifier_group.modifiers || []) {\n        if (modifier.field !== constraint.id) continue;\n        if (modifier.type === \"increment\") {\n          if (modifier_group.repeats?.length || modifier.repeats?.length) {\n            push(maxValue);\n            continue;\n          }\n          constraintValue += modifier.value as number;\n          if (constraintValue > 1) {\n            push(constraintValue);\n            continue;\n          }\n        }\n        if (modifier.type === \"decrement\" && (modifier.value as any) < 0) {\n          if (modifier_group.repeats?.length || modifier.repeats?.length) {\n            push(maxValue);\n            continue;\n          }\n          constraintValue -= modifier.value as number;\n          if (constraintValue > 1) {\n            push(constraintValue);\n            continue;\n          }\n        }\n        if (modifier.type === \"set\" && (modifier.value as any) > 1) {\n          if (modifier.value === -1) {\n            push(maxValue);\n            continue;\n          }\n          push(modifier.value as number);\n        }\n      }\n    }\n\n    if (beginLength === maxConstraints.length) push(constraintValue);\n  }\n\n  return maxConstraints;\n}\n\nexport interface BSIExtraConstraint extends BSIConstraint, BSINamed {\n  parent: Base;\n  modifiers: BSIModifier[];\n  modifierGroups: BSIModifierGroup[];\n}\n\nexport class ProfileType extends Base implements BSIProfileType {\n  declare characteristicTypes: BSICharacteristicType[];\n  declare sortIndex?: number;\n}\n// const debugKeys = new Set();\nexport class Profile extends Base implements BSIProfile {\n  declare characteristics: BSICharacteristic[];\n  declare typeId: string;\n  declare typeName: string;\n  declare publication?: BSIPublication | undefined;\n  isProfile() {\n    return true;\n  }\n  getTypeName() {\n    return this.typeName;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\nexport class Characteristic extends Base implements BSICharacteristic {\n  declare typeId: string;\n  declare $text: string | number;\n  originalValue?: string | number | boolean | undefined;\n  getLabel() {\n    if (this.catalogue) {\n      return this.catalogue.findOptionById(this.typeId)?.getName() ?? this.typeId;\n    }\n    return this.typeId;\n  }\n  getTypeName() {\n    return this.getLabel();\n  }\n  getName() {\n    return `${this.getLabel()} = ${this.$text}`;\n  }\n}\n\nexport class InfoGroup extends Base {\n  declare characteristics: BSICharacteristic[];\n  declare typeId: string;\n  declare typeName: string;\n  declare publication?: BSIPublication | undefined;\n  isInfoGroup() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\n\nexport const basicQueryFields = new Set([\"any\", \"model\", \"unit\", \"upgrade\", \"mount\", \"crew\"]);\nexport class Condition extends Base {\n  declare childId: string;\n  declare scope: string;\n  declare type: string;\n  declare includeChildSelections: boolean;\n  declare includeChildForces: boolean;\n  declare percentValue?: boolean;\n}\nexport class Constraint extends Condition {\n  declare type: \"min\" | \"max\" | \"exactly\";\n}\nexport class Modifier extends Base implements BSIModifier {\n  declare type: BSIModifierType;\n  declare field: \"category\" | \"name\" | \"hidden\" | string; //costId\n  declare value: number | string | boolean;\n}\nexport class ModifierGroup extends Base implements BSIModifierGroup {}\n\nexport class Rule extends Base implements BSIRule {\n  declare id: string;\n  declare name: string;\n  declare description: string;\n  declare hidden: boolean;\n  declare page?: string;\n  declare modifiers?: BSIModifier[] | undefined;\n  declare modifierGroups?: BSIModifierGroup[] | undefined;\n  getDescription(): string {\n    return Array.isArray(this.description) ? this.description.join(\"\\n\") : this.description;\n  }\n  isRule() {\n    return true;\n  }\n  isIdUnique() {\n    return true;\n  }\n}\n\nexport function getStaticFilters(source: Base): string[] {\n  const ids = [\"any\", source.id];\n  if (source.isLink()) ids.push(source.targetId);\n  const type = source.getType();\n  if (type) ids.push(type);\n  return ids;\n}\n\nexport function getIds(source: Base): string[] {\n  return source.isLink() ? [source.id, source.targetId] : [source.id];\n}\nexport function* getAllInfoGroups(group: Base): Iterable<InfoGroup> {\n  yield group as InfoGroup;\n  for (const grp of group.infoGroups || []) {\n    yield* getAllInfoGroups(grp);\n  }\n  for (const link of group.infoLinks || []) {\n    if (link.type === \"infoGroup\") yield* getAllInfoGroups(link.target as InfoGroup);\n  }\n}\nexport function* iterateModifierGroupsRecursive(\n  groups?: Iterable<BSIModifierGroup>\n): Generator<BSIModifierGroup, void, undefined> {\n  if (groups) {\n    for (const group of groups) {\n      yield group;\n      yield* iterateModifierGroupsRecursive(group.modifierGroups);\n    }\n  }\n}\n\nexport const goodJsonArrayKeys = new Set([\n  \"costTypes\",\n  \"costs\",\n\n  \"categoryEntries\",\n\n  \"forceEntries\",\n\n  \"sharedSelectionEntries\",\n  \"selectionEntries\",\n\n  \"sharedSelectionEntryGroups\",\n  \"selectionEntryGroups\",\n\n  \"entryLinks\",\n  \"infoLinks\",\n  \"categoryLinks\",\n  \"catalogueLinks\",\n\n  \"sharedProfiles\",\n  \"profiles\",\n  \"profileTypes\",\n  \"characteristics\",\n  \"characteristicTypes\",\n\n  \"sharedInfoGroups\",\n  \"infoGroups\",\n\n  \"sharedRules\",\n  \"rules\",\n\n  \"publications\",\n  \"associations\",\n\n  \"modifierGroups\",\n  \"modifiers\",\n  \"constraints\",\n  \"conditionGroups\",\n  \"conditions\",\n  \"repeats\",\n]);\nexport const goodJsonKeys = new Set([\n  ...goodJsonArrayKeys,\n\n  \"defaultAmount\",\n  \"id\",\n  \"import\",\n  \"importRootEntries\",\n  \"name\",\n  \"hidden\",\n  \"field\",\n  \"scope\",\n  \"value\",\n  \"percentValue\",\n  \"shared\",\n  \"includeChildSelections\",\n  \"includeChildForces\",\n  \"childId\",\n  \"type\",\n  \"targetId\",\n  \"primary\",\n  \"typeId\",\n  \"collective\",\n  \"$text\",\n  \"page\",\n  \"typeName\",\n  \"defaultSelectionEntryId\",\n  \"revision\",\n  \"battleScribeVersion\",\n  \"authorName\",\n  \"authorContact\",\n  \"authorUrl\",\n  \"library\",\n  \"gameSystemId\",\n  \"gameSystemRevision\",\n  \"xmlns\",\n  \"readme\",\n  \"description\",\n  \"comment\",\n  \"publicationDate\",\n  \"publisher\",\n  \"publisherId\",\n  \"publisherUrl\",\n  \"shortName\",\n  \"repeats\",\n  \"roundUp\",\n  \"defaultCostLimit\",\n  \"publicationId\",\n\n  // NR SPECIFIC\n  \"label\",\n  \"labelMembers\",\n  \"maxAssociationsPerMember\",\n  \"ids\",\n  \"min\",\n  \"max\",\n  \"of\",\n  \"flatten\",\n  \"sortIndex\",\n  \"subType\",\n  // \"includeChildSelections\",\n  // \"scope\",\n  // \"type\",\n  // \"conditions\",\n  // \"conditionGroups\",\n\n  //Legacy\n  \"costTypeId\",\n  \"profileTypeId\",\n  \"characteristicTypeId\",\n  \"value\",\n]);\nexport function rootToJson(data: Catalogue | BSICatalogue | Record<string, any>, fixRoot = false): string {\n  const root: any = {\n    catalogue: undefined,\n    gameSystem: undefined,\n  };\n  const copy = { ...data }; // ensure there is no recursivity by making sure only this copy is put in the json\n  if (!data.gameSystemId) {\n    root.gameSystem = copy;\n    root.gameSystem.type = \"gameSystem\";\n    delete root.catalogue;\n  } else {\n    root.catalogue = copy;\n    root.catalogue.type = \"catalogue\";\n    delete root.gameSystem;\n  }\n\n  const obj = fixRoot ? getDataObject(root) : root;\n  const stringed = JSON.stringify(obj, (k, v) => {\n    if (Array.isArray(v) && v.length === 0) return undefined;\n    if (v === copy || goodJsonKeys.has(k) || isFinite(Number(k))) {\n      if (isObject(v)) {\n        return splitExactlyConstraints(splitExactlyConstraintsModifiers(v));\n      }\n      return v;\n    }\n    return undefined;\n  });\n  return stringed;\n}\nexport function entryToJson(data: Base | Record<string, any>, extraFields?: Set<string>): string {\n  const stringed = JSON.stringify(data, function (k, v) {\n    if (Array.isArray(v) && v.length === 0) return undefined;\n    if (goodJsonKeys.has(k) || isFinite(Number(k)) || extraFields?.has(k)) return v;\n    return undefined;\n  });\n  return stringed;\n}\n\ninterface EntriesToJsonOptions {\n  formatted?: boolean;\n  forceArray?: boolean; // default is true\n}\nexport function entriesToJson(\n  data: Array<Base | Record<string, any>> | Base | Record<string, any>,\n  extraFields?: Set<string>,\n  options?: EntriesToJsonOptions\n): string {\n  const takeOutOfArray = options?.forceArray === false;\n  data = Array.isArray(data) && data?.length === 1 && takeOutOfArray ? data[0] : data;\n  const stringed = JSON.stringify(\n    data,\n    function (k, v) {\n      if (goodJsonKeys.has(k) || isFinite(Number(k)) || extraFields?.has(k)) return v;\n      return undefined;\n    },\n    options?.formatted === true ? 2 : undefined\n  );\n  return stringed;\n}\n\nexport function forEachObjectWhitelist2<T extends Base>(\n  current: Base,\n  callbackfn: (value: T, parent: T) => unknown,\n  whiteList = goodKeys\n) {\n  for (const key in current) {\n    if (whiteList.has(key)) {\n      const value = current[key as keyof typeof current];\n      if (Array.isArray(value)) {\n        if (value.length && isObject(value[0])) {\n          for (let i = 0; i < value.length; i++) {\n            const cur = value[i] as T;\n            callbackfn(cur, current as T);\n            forEachObjectWhitelist2(cur, callbackfn, whiteList);\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function convertRuleToProfile(rule: BSIRule): BSIProfile {\n  return {\n    characteristics: [\n      {\n        name: \"Descrption\",\n        typeId: \"description\",\n        $text: Array.isArray(rule.description) ? rule.description[0] : rule.description,\n      },\n    ],\n    id: rule.id,\n    name: rule.name,\n    hidden: rule.hidden,\n    typeId: \"rules\",\n    typeName: \"Rules\",\n  };\n}\n","import type { EditorBase } from \"./bs_main_catalogue\";\n\nexport const validScopes = new Set([\n  \"force\",\n  \"roster\",\n  \"self\",\n  \"parent\",\n  \"ancestor\",\n  \"primary-category\",\n  \"force\",\n  \"roster\",\n  \"primary-catalogue\",\n]);\nexport const validChildIds = new Set([\"any\", \"unit\", \"model\", \"upgrade\", \"mount\", \"crew\"]);\nexport function isScopeValid(parent: EditorBase, scope: string) {\n  if (validScopes.has(scope)) return true;\n  const catalogue = parent.catalogue;\n  const found = catalogue.findOptionById(scope);\n  if (found) {\n    if (found.isForce()) return true;\n    if (found.isCategory()) return true;\n    if (found.isCatalogue()) return true;\n  }\n  const stack = [parent];\n  while (stack.length) {\n    const current = stack.pop()!;\n    if (current.id === scope) return true;\n\n    // check links\n    // if (current.links) {\n    //   for (const link of current.links) {\n    //     stack.push(link);\n    //   }\n    // }\n\n    if (current.parent) [stack.push(current.parent)];\n  }\n  return false;\n}\n","import type {\n  BSIConstraint,\n  BSIModifier,\n  BSIModifierGroup,\n  BSIQuery,\n  SupportedQueries,\n  BSIConditionGroup,\n  BSICondition,\n  BSIRepeat,\n} from \"./bs_types\";\nimport { Condition, Modifier, ModifierGroup, type Base, type InfoGroup, type Link } from \"./bs_main\";\nimport type { Catalogue, EditorBase } from \"./bs_main_catalogue\";\nimport { findSelfOrParentWhere, has, removePrefix } from \"./bs_helpers\";\n\nexport function getModifierOrConditionParent(obj: EditorBase) {\n  const parent = findSelfOrParentWhere(obj, (o) => {\n    if (o instanceof Modifier) return false;\n    if (o instanceof Condition) return false;\n    if (o instanceof ModifierGroup) return false;\n    return true;\n  });\n  return parent;\n}\n\nexport function* getAllQueries(queries: SupportedQueries): Iterable<BSIQuery> {\n  for (const condition of queries.conditions || []) yield condition;\n  for (const repeat of queries.repeats || []) yield repeat;\n\n  for (const conditionGroup of queries.conditionGroups || []) {\n    for (const condition of getAllQueries(conditionGroup)) yield condition;\n  }\n  for (const modifier of queries.modifiers || []) {\n    for (const condition of getAllQueries(modifier)) yield condition;\n  }\n}\n\nexport function getModifiedField(base: Base | Link | undefined, field: string) {\n  if (!base) return;\n  if (!field) return;\n  const catalogue = base.getCatalogue();\n  if ((base as EditorBase).parent) {\n    const parent = getModifierOrConditionParent(base as EditorBase);\n    if (parent) {\n      for (const constraint of parent.constraintsIterator()) {\n        if (constraint.id === field) return constraint as any as Base;\n      }\n    }\n  }\n  const target = catalogue?.findOptionById(field);\n  return target;\n}\nexport function fieldToText(base: Base | Link | undefined, field: string): string {\n  if (field === undefined) {\n    return \"\";\n  }\n  if (base) {\n    if (field.startsWith(\"limit::\")) {\n      return `limit::${fieldToText(base, removePrefix(field, \"limit::\"))}`;\n    }\n    const catalogue = base.catalogue || (base as Catalogue);\n    const target = getModifiedField(base, field);\n    if (target) {\n      const type = (target as any).type;\n      if (type && [\"min\", \"max\", \"exactly\"].includes(type)) {\n        return constraintToText(base, target as any);\n      }\n      if (target.name) {\n        if (target.isCategory && target.isCategory()) {\n          return `${target.name}`;\n        }\n        if (target.url) {\n          return `${target.name}`;\n        }\n        return target.name;\n      }\n    }\n    const manager = catalogue.manager;\n    if (manager) {\n      const found = catalogue.manager.findOptionById(field) || manager.getCatalogueInfo({ targetId: field });\n      return found?.name || field;\n    }\n  }\n  return field;\n}\n\nexport function rawConditionToString(base: Base | Link, condition: BSIQuery & { value?: number }): string {\n  const type = condition.type || \"none\";\n  const value = condition.value === undefined ? 1 : condition.value;\n  const ofWhat = fieldToText(base, condition.childId || \"any\");\n  const rawField = fieldToText(base, condition.field);\n  const field = [\"selections\", \"forces\"].includes(rawField) ? \"\" : ` ${rawField} of`;\n  const rawScope = fieldToText(base, condition.scope);\n  const scope = rawScope === base.getName() ? \"\" : `${rawScope}`;\n  const recursive = condition.includeChildSelections ? \" (recursive)\" : \"\";\n  const inScope = scope ? ` in ${scope}${recursive}` : \"\";\n  return `${type} ${value}${field} ${ofWhat}${inScope}`;\n}\nexport function conditionToString(\n  base: Base | Link | undefined,\n  condition: BSIQuery & { value?: number },\n  includeId = false,\n  fieldToString = fieldToText\n): string {\n  const type = condition.type || \"none\";\n  const value = condition.value === undefined ? 1 : condition.percentValue ? `${condition.value}%` : condition.value;\n\n  const rawField = fieldToString(base, condition.field);\n  const field = [\"selections\", \"forces\"].includes(rawField) ? ` ${rawField}` : ` ${fieldToString(base, rawField)}`;\n\n  const what = fieldToString(base, condition.childId || \"\") + (includeId ? `(${condition.childId || \"any\"})` : \"\");\n  const of = what && field ? `of ` : \"\";\n\n  const rawScope = fieldToString(base, condition.scope);\n  const scope = rawScope === base?.getName() ? \"\" : `${rawScope}`;\n  const recursive = condition.includeChildSelections ? \" (recursive)\" : \"\";\n  const inScope = scope ? ` in ${scope}${recursive}` : \"\";\n\n  switch (type) {\n    case \"instanceOf\":\n      return `${scope} is ${what}`;\n    case \"notInstanceOf\":\n      return `${scope} is not ${what}`;\n\n    case \"atLeast\":\n      return `${value}+${field} ${of}${what}${inScope}`;\n    case \"greaterThan\":\n      return `${Number(value) + 1}+${field} ${of}${what}${inScope}`;\n\n    case \"atMost\":\n      return `${value}${value === 0 ? \"\" : \"-\"}${field} ${of}${what}${inScope}`;\n    case \"lessThan\":\n      return `${Number(value) - 1}${Number(value) - 1 === 0 ? \"\" : \"-\"}${field} ${of}${what}${inScope}`;\n\n    case \"equalTo\":\n      return `${value}${field} ${of}${what}${inScope}`;\n    case \"notEqualTo\":\n      return `not ${value}${field} ${of}${what}${inScope}`;\n\n    case \"none\":\n      return `${field} ${of}${what}${inScope}`;\n\n    default:\n      return `${type} ${value}${field} ${of}${what}${inScope}`;\n  }\n}\n\nexport function constraintToText(base: Base | Link, constraint: BSIConstraint, fieldToString = fieldToText) {\n  // check if the constraint is in the parent, its better to show id than a constraint that wouldn't work\n  if (!has(base.constraintsIterator(), constraint)) {\n    return constraint.id;\n  }\n\n  const field = constraint.field === \"selections\" ? \"\" : ` ${fieldToString(base, constraint.field)}`;\n  const scope = constraint.scope === \"parent\" ? \"\" : `(${fieldToString(base, constraint.scope)})`;\n  const ofWhat = constraint.childId ? ` ${fieldToString(base, constraint.childId)}` : \"\";\n  return `${constraint.type}${field}${ofWhat}${scope}`;\n}\nexport function constraintToString(base: Base | Link, constraint: BSIConstraint, fieldToString = fieldToText) {\n  const field = constraint.field === \"selections\" ? \"\" : ` ${fieldToString(base, constraint.field)}`;\n  const scope =\n    constraint.scope === \"parent\" ? \"\" : `<span class=grey>(${fieldToString(base, constraint.scope)})</span>`;\n  return `${constraint.type}${field}${scope}`;\n}\nexport function modifierToString(\n  base: Base | Link | undefined,\n  modifier: BSIModifier,\n  fieldToString = fieldToText\n): string {\n  return `${modifier.type} ${fieldToString(base, modifier.field)} ${fieldToString(base, modifier.value?.toString())}`;\n}\n\nexport function conditionGroupToString(\n  base: Base | Link,\n  group: BSIConditionGroup,\n  fieldToString = fieldToText\n): string {\n  const result = [] as string[];\n  for (const condition of group.conditions || []) {\n    result.push(conditionToString(base, condition, false, fieldToString));\n  }\n  for (const condition of group.conditionGroups || []) {\n    result.push(`(${conditionGroupToString(base, condition, fieldToString)})`);\n  }\n  const type = group.type || \"and\";\n  return result.join(` ${type} `);\n}\n\n/**\n * Converts modifiers to a better format for displaying\n * {effect, groups: Recursive<ConditionGroups>}\n */\nexport function prepareModifiers(\n  base: Base | Link,\n  modifiers: BSIModifier[],\n  modifierGroups: BSIModifierGroup[],\n  fieldToString = fieldToText\n): PrintableModifier[] {\n  const result = [] as PrintableModifier[];\n  const root = { modifiers: modifiers, modifierGroups: modifierGroups };\n  const stack = [root] as BSIModifierGroup[];\n  const depthCounts = [] as number[];\n  const parents = [] as BSIModifierGroup[];\n\n  while (stack.length) {\n    const current = stack.pop()!;\n\n    if (current.modifiers) {\n      const conditions = [] as BSICondition[];\n      const conditionGroups = [] as BSIConditionGroup[];\n\n      for (const parent of parents) {\n        if (parent.conditions) conditions.push(...parent.conditions);\n        if (parent.conditionGroups) conditionGroups.push(...parent.conditionGroups);\n      }\n\n      if (current.conditions) conditions.push(...current.conditions);\n      if (current.conditionGroups) conditionGroups.push(...current.conditionGroups);\n\n      for (const modifier of current.modifiers) {\n        const resultConditionGroups = [...conditionGroups, ...(modifier.conditionGroups || [])];\n        if (conditions.length || modifier.conditions?.length) {\n          resultConditionGroups.push({\n            type: \"and\",\n            conditions: [...conditions, ...(modifier.conditions || [])],\n          });\n        }\n\n        const prepared: PrintableModifier = {\n          type: modifier.type,\n          value: modifier.value,\n          field: modifier.field,\n          html: modifierToString(base, modifier, fieldToString),\n        };\n\n        if (resultConditionGroups.length) {\n          prepared.conditionGroups = resultConditionGroups.map((o) => setConditionsText(base, o, fieldToString));\n        }\n        if (modifier.repeats) {\n          prepared.repeats = modifier.repeats.map((o) => setRepeatText(base, o, fieldToString));\n        }\n        result.push(prepared);\n      }\n    }\n\n    const childs = current.modifierGroups;\n    if (childs?.length) {\n      parents.push(current);\n      depthCounts.push(childs.length);\n      stack.push(...childs);\n    } else {\n      while (depthCounts.length) {\n        const count = depthCounts[depthCounts.length - 1];\n        if (count === 1) {\n          depthCounts.pop();\n          parents.pop();\n        } else {\n          depthCounts[depthCounts.length - 1] = count - 1;\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * Converts modifiers to a better format for parsing\n * {effect, groups: Recursive<ConditionGroups>}\n */\nexport function prepareModifiers2(\n  base: Base | Link,\n  modifiers: BSIModifier[],\n  modifierGroups: BSIModifierGroup[]\n): ParsableModifier[] {\n  const result = [] as ParsableModifier[];\n  const root = { modifiers: modifiers, modifierGroups: modifierGroups };\n  const stack = [root] as BSIModifierGroup[];\n  const depthCounts = [] as number[];\n  const parents = [] as BSIModifierGroup[];\n\n  while (stack.length) {\n    const current = stack.pop()!;\n\n    if (current.modifiers) {\n      const conditions = [] as BSICondition[];\n      const conditionGroups = [] as BSIConditionGroup[];\n\n      for (const parent of parents) {\n        if (parent.conditions) conditions.push(...parent.conditions);\n        if (parent.conditionGroups) conditionGroups.push(...parent.conditionGroups);\n      }\n\n      if (current.conditions) conditions.push(...current.conditions);\n      if (current.conditionGroups) conditionGroups.push(...current.conditionGroups);\n\n      for (const modifier of current.modifiers) {\n        const resultConditionGroups = [...conditionGroups, ...(modifier.conditionGroups || [])];\n        if (conditions.length || modifier.conditions?.length) {\n          resultConditionGroups.push({\n            type: \"and\",\n            conditions: [...conditions, ...(modifier.conditions || [])],\n          });\n        }\n\n        const prepared: ParsableModifier = {\n          modifier: modifier,\n        };\n\n        if (resultConditionGroups.length) {\n          prepared.conditionGroups = resultConditionGroups.map((o) => setConditionsText(base, o));\n        }\n        if (modifier.repeats) {\n          prepared.repeats = modifier.repeats.map((o) => setRepeatText(base, o));\n        }\n        result.push(prepared);\n      }\n    }\n\n    const childs = current.modifierGroups;\n    if (childs?.length) {\n      parents.push(current);\n      depthCounts.push(childs.length);\n      stack.push(...childs);\n    } else {\n      while (depthCounts.length) {\n        const count = depthCounts[depthCounts.length - 1];\n        if (count === 1) {\n          depthCounts.pop();\n          parents.pop();\n        } else {\n          depthCounts[depthCounts.length - 1] = count - 1;\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n}\n\nexport interface ParsableModifier {\n  modifier: BSIModifier;\n  conditionGroups?: BSIConditionGroup[];\n  repeats?: BSIRepeat[];\n}\n\nexport interface PrintableModifier {\n  type: string;\n  field: string;\n  value: number | boolean | string;\n  html: string;\n  conditionGroups?: PrintableConditionGroup[];\n  repeats?: PrintableRepeat[];\n}\nexport interface PrintableCondition extends BSICondition {\n  html: string;\n}\nexport interface PrintableRepeat extends BSIRepeat {\n  html: string;\n}\nexport interface PrintableConditionGroup {\n  type?: \"and\" | \"or\";\n  conditions?: PrintableCondition[];\n  conditionGroups?: PrintableConditionGroup[];\n}\nexport function setConditionsText(\n  base: Base | Link,\n  group: BSIConditionGroup,\n  fieldToString = fieldToText\n): PrintableConditionGroup {\n  if (group.conditions) {\n    for (const condition of group.conditions) {\n      const printable = condition as PrintableCondition;\n      if (printable.html) continue;\n      printable.html = conditionToString(base, condition, false, fieldToString);\n    }\n  }\n  if (group.conditionGroups) {\n    for (const nested of group.conditionGroups) {\n      setConditionsText(base, nested, fieldToString);\n    }\n  }\n  return group as PrintableConditionGroup;\n}\n\nexport function setRepeatText(base: Base | Link, repeat: BSIRepeat, fieldToString = fieldToText): PrintableRepeat {\n  const result = repeat as PrintableRepeat;\n  result.html = conditionToString(base, repeat, false, fieldToString);\n  return result;\n}\n","import { isScopeValid, validScopes } from \"./bs_condition\";\nimport type { ItemTypeNames } from \"./bs_editor\";\nimport {\n  addObj,\n  addObjIfMissing,\n  addObjUnique,\n  clone,\n  generateBattlescribeId,\n  groupBy,\n  popObj,\n  sortBy,\n  textSearchRegex,\n} from \"./bs_helpers\";\nimport {\n  BSIExtraConstraint,\n  Base,\n  Category,\n  Condition,\n  Constraint,\n  Force,\n  ILLEGAL_ID,\n  Link,\n  Profile,\n  Rule,\n  UNCATEGORIZED_ID,\n  basicQueryFields,\n  forEachObjectWhitelist2,\n  goodJsonArrayKeys,\n  goodKeys,\n  goodKeysWiki,\n} from \"./bs_main\";\nimport { getModifierOrConditionParent } from \"./bs_modifiers\";\nimport type { BSCatalogueManager } from \"./bs_system\";\nimport type {\n  BSICatalogue,\n  BSICondition,\n  BSIConstraint,\n  BSICostType,\n  BSIGameSystem,\n  BSIInfoLink,\n  BSIProfile,\n  BSIProfileType,\n  BSIPublication,\n  BSIReference,\n  BSIRule,\n} from \"./bs_types\";\n\nif (typeof $toRaw === \"undefined\") {\n  globalThis.$toRaw = function (o){ return o}\n}\nexport interface IErrorMessage {\n  msg: string;\n  severity?: \"error\" | \"warning\" | \"info\" | \"debug\";\n  source?: any;\n  id?: string;\n  other?: any;\n  extra?: string;\n}\n\nexport interface WikiLink extends Link {\n  parent: WikiBase;\n  links?: WikiLink[];\n}\nexport interface WikiBase extends Base {\n  parent?: WikiBase;\n  links?: WikiLink[];\n}\nexport interface EditorBase extends Base {\n  parent?: EditorBase;\n  links?: EditorBase[];\n  other_links?: EditorBase[];\n  catalogue: Catalogue;\n\n  parentKey: string & keyof EditorBase;\n  editorTypeName: ItemTypeNames;\n\n  showInEditor?: boolean;\n  showChildsInEditor?: boolean;\n  highlight?: boolean;\n\n  errors?: IErrorMessage[];\n}\nexport class CatalogueLink extends Base {\n  targetId!: string;\n  declare target: Catalogue;\n  importRootEntries?: boolean;\n  /** Most code that checks for links expects entryLinks or categoryLinks, catalogueLinks are specially handled */\n  isLink() {\n    return false;\n  }\n}\nexport class Publication extends Base implements BSIPublication {\n  shortName?: string;\n  publisher?: string;\n  publicationDate?: string | number;\n  publisherUrl?: string;\n}\n\nexport class Catalogue extends Base {\n  declare name: string;\n  declare id: string;\n  library?: boolean;\n  revision?: number;\n\n  gameSystemId?: string;\n  gameSystemRevision?: number;\n\n  authorContact?: string;\n  authorName?: string;\n  authorUrl?: string;\n\n  battleScribeVersion?: string;\n\n  costTypes?: BSICostType[];\n  catalogueLinks?: CatalogueLink[];\n\n  // Processed\n  gameSystem!: Catalogue;\n  initialized?: boolean;\n  declare loaded?: boolean;\n  loaded_wiki?: boolean;\n  loaded_editor?: boolean;\n\n  imports!: Catalogue[];\n  importsWithEntries!: Catalogue[];\n  index!: Record<string, Base>;\n  unresolvedLinks: Record<string, Array<(Condition | Link) & EditorBase>> = {};\n\n  forces!: Force[];\n  categories!: Category[];\n  units!: Array<Base | Link>;\n  roster_constraints!: BSIExtraConstraint[];\n\n  manager!: BSCatalogueManager;\n  book!: any;\n  short!: string;\n  version!: string;\n  nrversion!: string;\n  lastUpdated: string | undefined;\n  costIndex!: Record<string, BSICostType>;\n\n  fullFilePath?: string;\n\n  errors?: IErrorMessage[];\n\n  init(deleteBadLinks = true) {\n    if (this.initialized) return;\n    this.initialized = true;\n    this.generateImports(deleteBadLinks);\n    this.resolveAllLinks(deleteBadLinks);\n    this.generateCostIndex();\n  }\n\n  process() {\n    if (this.loaded) return;\n    this.loaded = true;\n    this.init();\n    const units = this.generateUnits();\n    const categories = this.generateCategories(units);\n    this.categories = Object.values(categories);\n    this.generateForces(categories);\n    this.generateExtraConstraints();\n  }\n  processForWiki(system: Record<string, any>) {\n    if (this.loaded_wiki) return;\n    this.loaded_wiki = true;\n    this.process();\n    const rulesObj: Record<string, any> = system.rules || {};\n    (system as any).rules = rulesObj;\n\n    this.imports.forEach((imported) => {\n      addObjUnique(imported as any, \"links\", this);\n    });\n    function proc(cur: WikiBase, parent: WikiBase) {\n      (cur as WikiBase).parent = parent as WikiBase;\n      if (cur.target) addObjUnique(cur.target as any, \"links\", parent as WikiBase);\n      if (cur instanceof Rule) {\n        rulesObj[cur.id] = cur;\n      }\n    }\n    forEachObjectWhitelist2(this, proc, goodKeysWiki);\n\n    for (const force of this.forces || []) {\n      (force as any).parent = this;\n      for (const category of force.categories) {\n        (category as any).parent = force;\n      }\n    }\n  }\n  processForEditor() {\n    if (this.loaded_editor) return;\n    this.loaded_editor = true;\n    this.init(false);\n\n    if (this.gameSystem) {\n      addObjUnique(this.gameSystem as any, \"links\", this);\n    }\n\n    forEachObjectWhitelist2<EditorBase>(\n      this,\n      (cur, parent) => {\n        cur.parent = parent;\n        cur.catalogue = this;\n        if (!cur.links) {\n          cur.links = [];\n        }\n        if (!cur.other_links) {\n          cur.other_links = [];\n        }\n        if (cur.target) {\n          addObjUnique(cur.target as EditorBase, \"links\", cur);\n        }\n        if (cur.isProfile() && !cur.isLink()) {\n          const target = this.findOptionById(cur.typeId) as EditorBase;\n          if (target) {\n            addObjUnique(target, \"links\", cur);\n          }\n        }\n        const value = (cur as any).value;\n        if (value) {\n          const target = this.findOptionById(value) as EditorBase;\n          if (target) {\n            addObjUnique(target, \"other_links\", cur);\n          }\n        }\n        this.refreshErrors(cur);\n      },\n      goodJsonArrayKeys\n    );\n  }\n  get url(): string {\n    return \"%{book}\";\n  }\n  isCatalogue(): this is Catalogue {\n    return true;\n  }\n  isGameSystem(): boolean {\n    return this.gameSystemId === this.id || !this.gameSystemId;\n  }\n  isIdUnique() {\n    return true;\n  }\n  getCatalogue() {\n    return this;\n  }\n  getGameSystem() {\n    if (this.isGameSystem()) return this;\n    return this.gameSystem;\n  }\n  getSystemId(): string {\n    return this.isGameSystem() ? this.id : this.gameSystemId!;\n  }\n  addError(obj: EditorBase, newError: IErrorMessage & { id: string }) {\n    this.removeError(obj, newError.id);\n    if (!obj.errors) {\n      obj.errors = [];\n    }\n    if (!this.errors) {\n      this.errors = [];\n    }\n    obj.errors.push(newError);\n    this.errors.push(newError);\n  }\n  onRemoveError(error: IErrorMessage, recurse = true) {\n    if (this.errors) {\n      const idx = this.errors.indexOf(error);\n      if (idx >= 0) {\n        this.errors.splice(idx, 1);\n      }\n    }\n\n    if (error.other && recurse) {\n      const other = error.other as EditorBase;\n      other.getCatalogue().removeError(other, \"duplicate-id-1\", false);\n      other.getCatalogue().removeError(other, \"duplicate-id-2\", false);\n    }\n  }\n  removeErrors(obj: EditorBase) {\n    obj.errors?.forEach((o) => this.onRemoveError(o));\n    if (obj instanceof Constraint) {\n      obj.catalogue.updateConstraint(obj as Constraint & EditorBase, true);\n    }\n    delete obj.errors;\n  }\n  removeError(obj: EditorBase, id: string, event = true) {\n    if (obj.errors?.length) {\n      obj.errors = obj.errors.filter((error) => {\n        if (error.id === id) {\n          this.onRemoveError(error, event);\n        }\n        return error.id !== id;\n      });\n    }\n  }\n  *iterateCategoryEntries(): Iterable<Category> {\n    for (const catalogue of this.imports) {\n      for (const category of catalogue.categoryEntries || []) {\n        yield category;\n      }\n    }\n    if (this.categoryEntries) yield* this.categoryEntries;\n  }\n  *iterateCostTypes(): Iterable<BSICostType> {\n    for (const catalogue of this.imports) {\n      for (const costType of catalogue.costTypes || []) {\n        yield costType;\n      }\n    }\n    if (this.costTypes) yield* this.costTypes;\n  }\n\n  *forcesIterator(): Iterable<Force> {\n    for (const catalogue of this.imports) {\n      for (const force of catalogue.forceEntries || []) {\n        yield force;\n      }\n    }\n    if (this.forceEntries) yield* this.forceEntries;\n  }\n  *forcesIteratorRecursive(): Iterable<Force> {\n    if (this.forces) {\n      for (const force of this.forces) {\n        yield force;\n        yield* force.forcesIteratorRecursive();\n      }\n    }\n  }\n\n  *iterateProfileTypes(): Iterable<BSIProfileType> {\n    for (const catalogue of this.importsWithEntries) {\n      if (catalogue.profileTypes) {\n        yield* catalogue.profileTypes;\n      }\n    }\n\n    if (this.profileTypes) {\n      yield* this.profileTypes;\n    }\n  }\n  *iteratePublications(): Iterable<BSIPublication> {\n    for (const catalogue of this.imports) {\n      for (const publication of catalogue.publications || []) {\n        yield publication;\n      }\n    }\n    for (const publication of this.publications || []) {\n      yield publication;\n    }\n  }\n  *iterateSelectionEntries(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.sharedSelectionEntries || []) {\n        yield entry;\n      }\n      for (const entry of catalogue.sharedSelectionEntryGroups || []) {\n        yield entry;\n      }\n    }\n\n    //if (this.selectionEntries) yield* this.selectionEntries;\n    //if (this.entryLinks) yield* this.entryLinks;\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n  }\n  *iterateAllImported(): Iterable<Base> {\n    const shared = [\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"categoryEntries\",\n    ];\n    const root = [\"rules\", \"entryLinks\", \"profiles\", \"infoGroups\", \"selectionEntries\", \"selectionEntryGroups\"];\n    for (const catalogue of this.importsWithEntries) {\n      for (const key of root) {\n        for (const entry of catalogue[key as keyof Catalogue] || []) {\n          if (entry.import !== false) yield entry;\n        }\n      }\n    }\n    for (const catalogue of this.imports) {\n      for (const key of shared) {\n        for (const entry of catalogue[key as keyof Catalogue] || []) {\n          yield entry;\n        }\n      }\n    }\n    for (const key of root) {\n      for (const entry of this[key as keyof Catalogue] || []) {\n        yield entry;\n      }\n    }\n    for (const key of shared) {\n      for (const entry of this[key as keyof Catalogue] || []) {\n        yield entry;\n      }\n    }\n  }\n\n  *iterateSelectionEntriesWithRoot(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.selectionEntries || []) {\n        if (entry.import !== false) yield entry;\n      }\n      for (const entry of catalogue.entryLinks || []) {\n        if (entry.import !== false) yield entry;\n      }\n\n      for (const entry of catalogue.sharedSelectionEntries || []) {\n        yield entry;\n      }\n      for (const entry of catalogue.sharedSelectionEntryGroups || []) {\n        yield entry;\n      }\n    }\n\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n  }\n\n  *iterateAllRootEntries(): Iterable<Base> {\n    for (const catalogue of this.importsWithEntries) {\n      for (const entry of catalogue.selectionEntries || []) {\n        if (entry.import !== false) yield entry;\n      }\n      for (const entry of catalogue.entryLinks || []) {\n        if (entry.import !== false) yield entry;\n      }\n    }\n\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n\n  *entriesIterator(): Iterable<Base | Link> {\n    if (this.sharedSelectionEntries) yield* this.sharedSelectionEntries;\n    if (this.selectionEntries) yield* this.selectionEntries;\n    if (this.sharedSelectionEntryGroups) yield* this.sharedSelectionEntryGroups;\n    if (this.selectionEntryGroups) yield* this.selectionEntryGroups;\n    if (this.entryLinks) yield* this.entryLinks;\n  }\n\n  forEachNode(callbackfn: (value: Base | Link) => unknown): void {\n    callbackfn(this);\n    if (this.childs) for (const e of this.childs) e.forEachNode(callbackfn);\n  }\n  *selectionsIterator(): Iterable<Base> {\n    yield* this.forces;\n  }\n  findOptionById(id: string): Base | undefined {\n    const found = this.index[id];\n    if (found) return found;\n    const found_import = this.imports.find((o) => id in o.index)?.index[id];\n    if (found_import) return found_import;\n    if (this.manager && id) {\n      return this.manager.getLoadedCatalogue(id) ?? (this.manager.getCatalogueInfo({ targetId: id }) as any);\n    }\n    return;\n  }\n  findOptionByIdGlobal(id: string): Base | undefined | BSICatalogue | BSIGameSystem {\n    const found = this.index[id];\n    if (found) return found;\n    const found_import = this.imports.find((o) => id in o.index)?.index[id];\n    if (found_import) return found_import;\n    if (this.manager) {\n      const globalOption = this.manager.findOptionById(id);\n      if (globalOption) return globalOption;\n      return this.manager.getCatalogueInfo({ targetId: id });\n    }\n\n    return;\n  }\n  findOptionsById(id: string): Base[] {\n    const result = [];\n    for (const imported of [this, ...this.imports]) {\n      for (const val of Object.values(imported.index)) {\n        if (val.id && val.id === id) result.push(val);\n      }\n    }\n    return result;\n  }\n  findOptionsByText(text?: string): Base[] {\n    if (!text || !text.trim()) {\n      const result = [];\n      for (const imported of [this, ...this.imports]) {\n        for (const val of Object.values(imported.index) as EditorBase[]) {\n          if ((val as any).getName) {\n            if (val.isLink()) {\n              if (val.target && val.isCategory() && !val.parent?.isForce()) {\n                continue;\n              }\n            }\n            result.push(val);\n          } else {\n            console.log(val);\n          }\n        }\n      }\n      return result;\n    }\n    const result = [];\n    const regx = textSearchRegex(text);\n    for (const imported of [this, ...this.imports]) {\n      for (const val of Object.values(imported.index) as EditorBase[]) {\n        const name = val.getName?.call(val);\n        const id = val.id;\n        if ((name && String(name).match(regx)) || id === text) {\n          if (val.isLink()) {\n            if (val.target && val.isCategory() && !val.parent?.isForce()) {\n              continue;\n            }\n          }\n          result.push(val);\n        }\n      }\n    }\n    return result;\n  }\n  generateNonConflictingId(): string {\n    while (true) {\n      const id = generateBattlescribeId();\n      if (this.findOptionById(id) === undefined) return id;\n    }\n  }\n  generateCostIndex(): Record<string, BSICostType> {\n    const result = {} as Record<string, BSICostType>;\n    for (const imported of this.imports) {\n      for (const costType of imported.costTypes || []) {\n        result[costType.id] = costType;\n        this.index[costType.id] = costType as any;\n      }\n    }\n    for (const costType of this.costTypes || []) {\n      result[costType.id] = costType;\n      this.index[costType.id] = costType as any;\n    }\n\n    this.costIndex = result;\n    return result;\n  }\n  generateImports(deleteBadLinks = true) {\n    const importsWithEntries: Record<string, Catalogue> = {};\n    const imports: Record<string, Catalogue> = {};\n    if (this.gameSystem) {\n      this.gameSystem.init(deleteBadLinks);\n      importsWithEntries[this.gameSystem.id] = this.gameSystem;\n      imports[this.gameSystem.id] = this.gameSystem;\n      if (!this.gameSystem.import) this.gameSystem.imports = [];\n    }\n\n    for (const link of this.catalogueLinks || []) {\n      const catalogue = link.target;\n      if (!catalogue) continue;\n      catalogue.init(deleteBadLinks);\n\n      for (const imported of catalogue.imports) {\n        imports[imported.id] = imported;\n      }\n      for (const imported of catalogue.importsWithEntries) {\n        importsWithEntries[imported.id] = imported;\n      }\n\n      if (link.importRootEntries) importsWithEntries[catalogue.id] = catalogue;\n      imports[catalogue.id] = catalogue;\n    }\n\n    this.imports = Object.values(imports);\n    this.importsWithEntries = Object.values(importsWithEntries);\n    return this.imports;\n  }\n  generateForces(categories: Record<string, Category>): Force[] {\n    const result = [];\n    for (const force of this.forcesIterator()) {\n      const copiedForce = clone(force);\n      copiedForce.main_catalogue = this;\n      const forceCategories = [];\n      if (categories[UNCATEGORIZED_ID]?.units?.length) {\n        forceCategories.push(categories[UNCATEGORIZED_ID]);\n      }\n\n      const hasUnits = new Set<string>();\n      for (const link of force.categoryLinks || []) {\n        if (link.targetId in categories) {\n          const copied = clone(link);\n          copied.main_catalogue = this;\n\n          const category = categories[copied.targetId];\n          copied.target = category;\n          copied.childs = category.childs;\n          for (const child of copied.childs) {\n            hasUnits.add(child.id);\n          }\n          forceCategories.push(copied);\n        }\n      }\n      for (const categoryEntry of force.categoryEntries || []) {\n        if (categoryEntry.id in categories) {\n          const category = categories[categoryEntry.id]\n          const copied = clone(category);\n          copied.main_catalogue = this;\n          for (const child of copied.childs) {\n            hasUnits.add(child.id);\n          }\n          forceCategories.push(copied);\n        }\n      }\n      \n      const missingUnits = this.units.filter((o) => !hasUnits.has(o.id));\n      if (missingUnits.length) {\n        const illegal_clone = clone(categories[ILLEGAL_ID]);\n        illegal_clone.childs = missingUnits;\n        illegal_clone.units = missingUnits;\n        forceCategories.push(illegal_clone);\n      }\n\n      copiedForce.childs = forceCategories;\n      copiedForce.categories = forceCategories;\n      this.index[copiedForce.id] = copiedForce;\n      if (copiedForce.forceEntries) {\n        copiedForce.generateForces(categories);\n      }\n\n      result.push(copiedForce);\n    }\n    this.forces = result;\n    this.childs = result;\n    return result;\n  }\n  generateCategories(units: Record<string, Base[]>): Record<string, Category> {\n    const result = {} as Record<string, Category>;\n    const set = new Set<string>();\n    for (const category of this.iterateCategoryEntries()) {\n      const copied = clone(category);\n      copied.main_catalogue = this;\n      const foundUnits = units[copied.id] || [];\n      copied.units = foundUnits;\n      copied.childs = foundUnits;\n      this.index[category.id] = category;\n      result[copied.id] = copied;\n      set.add(copied.id)\n    }\n     for(const key in units){\n      if (!set.has(key)){\n        const category = this.findOptionById(key) as Category\n        if (category){\n          const copied = clone(category);\n          copied.main_catalogue = this;\n          const foundUnits = units[copied.id] || [];\n          copied.units = foundUnits;\n          copied.childs = foundUnits;\n          this.index[category.id] = category;\n          result[copied.id] = copied;\n        }\n      }\n     }\n    const uncategorizedUnits = units[UNCATEGORIZED_ID] || [];\n    const uncategorized = {\n      name: \"Uncategorized\",\n      id: UNCATEGORIZED_ID,\n      hidden: false,\n      units: uncategorizedUnits,\n      childs: uncategorizedUnits,\n      catalogue: this,\n    };\n    result[UNCATEGORIZED_ID] = Object.setPrototypeOf(uncategorized, Category.prototype);\n    const illegal = {\n      name: \"Illegal Units\",\n      id: ILLEGAL_ID,\n      hidden: true,\n      units: [],\n      childs: [],\n      catalogue: this,\n    };\n    result[ILLEGAL_ID] = Object.setPrototypeOf(illegal, Category.prototype);\n    return result;\n  }\n  generateUnits(): Record<string, Base[]> {\n    const units = [];\n    for (const imported of this.importsWithEntries) {\n      const system = imported.isGameSystem();\n      for (const unit of imported.selectionEntries || []) {\n        if (system || unit.import !== false) units.push(unit);\n      }\n      for (const unit of imported.entryLinks || []) {\n        if (system || unit.import !== false) units.push(unit);\n      }\n    }\n    for (const unit of this.selectionEntries || []) {\n      units.push(unit);\n    }\n    for (const unit of this.entryLinks || []) {\n      units.push(unit);\n    }\n    const sortedUnits = sortBy(units, (o) => o.getName()!);\n    this.units = sortedUnits;\n    const result = groupBy(sortedUnits, (o) => o.getPrimaryCategory());\n    return result;\n  }\n  generateExtraConstraints() {\n    const roster_constraints = {} as Record<string, BSIExtraConstraint>;\n    const force_constraints = [] as Array<BSIExtraConstraint>;\n    const by_id_constraints = {} as Record<string, Array<BSIExtraConstraint>>;\n    const force_or_category_ids = new Set<string>();\n    const by_category_force_constraints = {} as Record<string, Array<BSIExtraConstraint>>;\n\n    function localAddBoundCategoryConstraints(\n      catalogue: Catalogue,\n      category: Category,\n      constraints: Iterable<BSIConstraint>\n    ) {\n      const target = category.target || category;\n      for (const constraint of constraints) {\n        const hash = `${constraint.id}::${category.id}`;\n\n        switch (constraint.scope) {\n          case \"parent\":\n            break;\n          case \"roster\":\n            roster_constraints[hash] = category.getBoundConstraint(constraint);\n            break;\n          case \"force\":\n            force_constraints.push(category.getBoundConstraint(constraint));\n            break;\n          case \"primary-category\":\n          case \"primary-catalogue\":\n            /*             console.warn(\n              `unsupported scope:${constraint.scope} from category ${category.getName()} ${category.getId()}`\n            ); */\n            break;\n          default:\n            if (force_or_category_ids.has(constraint.scope)) {\n              addObj(by_id_constraints, constraint.scope, target.getBoundConstraint(constraint));\n              break;\n            }\n            const fromIndex = catalogue.index[constraint.scope];\n            if (fromIndex) {\n              const from_id_extra_constraints = fromIndex.extra_constraints || [];\n              from_id_extra_constraints.push(category.getBoundConstraint(constraint));\n              fromIndex.extra_constraints = from_id_extra_constraints;\n              break;\n            }\n            /*             console.warn(\n              `unsupported scope:${constraint.scope} from category ${category.getName()} ${category.getId()}`\n            ); */\n\n            break;\n        }\n      }\n    }\n    for (const force of this.forcesIteratorRecursive()) {\n      force_or_category_ids.add(force.id);\n      // Add constraints wich are on categoryLinks\n      // for (const category of force.categories) {\n      //   if (category.constraints) {\n      //     localAddBoundCategoryConstraints(\n      //       this,\n      //       category,\n      //       category.constraints.filter((o) => o.scope === \"roster\")\n      //     );\n      //   }\n      // }\n    }\n    for (const category of this.categories) {\n      force_or_category_ids.add(category.id);\n    }\n    for (const category of this.categories) {\n      localAddBoundCategoryConstraints(this, category, category.constraintsIterator());\n      const force_extra_constraints = {} as Record<string, BSIExtraConstraint>;\n      category.forEachNodeCb((node) => {\n        if (!node) return;\n        if (node.isForce()) return;\n        // Categories & Units are always initialized within forces so there is no need to make them extra\n\n        // Add scope:'parent' constrainst to parent entries\n        if (!node.isGroup() && !node.extra_constraints) {\n          node.extra_constraints = node.getChildBoundConstraints(true);\n        }\n        if (node.isCategory() && node.isLink()) return;\n        if (!node.constraints && !node.target?.constraints) return;\n\n        for (const constraint of node.constraintsIterator()) {\n          if (constraint.type === \"min\" || constraint.type === \"exactly\") {\n            const hash = `${constraint.id}::${node.id}`;\n            switch (constraint.scope) {\n              case \"parent\":\n                break;\n              case \"roster\":\n                roster_constraints[hash] = node.getBoundConstraint(constraint);\n                break;\n              case \"force\":\n                force_extra_constraints[hash] = node.getBoundConstraint(constraint);\n                break;\n              case \"primary-category\":\n              case \"primary-catalogue\":\n                // console.warn(`unsupported scope:${constraint.scope} from ${node.getName()} ${node.id}`);\n                break;\n              default:\n                if (force_or_category_ids.has(constraint.scope)) {\n                  addObj(by_id_constraints, constraint.scope, node.getBoundConstraint(constraint));\n                  break;\n                }\n                const fromIndex = this.index[constraint.scope];\n                if (fromIndex) {\n                  const from_id_extra_constraints = fromIndex.extra_constraints || [];\n                  from_id_extra_constraints.push(node.getBoundConstraint(constraint));\n                  fromIndex.extra_constraints = from_id_extra_constraints;\n                  break;\n                }\n                // console.warn(`unsupported scope:${constraint.scope} from ${node.getName()}${node.id}`);\n                break;\n            }\n          }\n        }\n      });\n      by_category_force_constraints[category.getId()] = Object.values(force_extra_constraints);\n    }\n\n    for (const force of this.forcesIteratorRecursive()) {\n      const force_extra_constraints = force.extra_constraints || [];\n      force_extra_constraints.push(...force_constraints);\n      if (force.id in by_id_constraints) {\n        force_extra_constraints.push(...by_id_constraints[force.id]);\n      }\n      if (force_extra_constraints.length) {\n        force.extra_constraints = force_extra_constraints;\n      }\n      for (const category of force.categories) {\n        if (category.getId() in by_category_force_constraints) {\n          force_extra_constraints.push(...by_category_force_constraints[category.getId()]);\n        }\n      }\n      if (force_extra_constraints.length) {\n        force.extra_constraints = force_extra_constraints;\n      }\n    }\n\n    for (const category of this.categories) {\n      const category_extra_constraints = category.extra_constraints || [];\n      if (category.id in by_id_constraints) {\n        category_extra_constraints.push(...by_id_constraints[category.id]);\n      }\n      if (category_extra_constraints.length) {\n        category.extra_constraints = category_extra_constraints;\n      }\n    }\n\n    this.roster_constraints = Object.values(roster_constraints);\n  }\n  async reload(manager: BSCatalogueManager = this.manager) {\n    delete this.initialized;\n    delete this.loaded;\n    delete this.loaded_editor;\n    delete (this as Partial<typeof this>).index;\n    const key = this.isGameSystem() ? \"gameSystem\" : \"catalogue\";\n    const loaded = await manager.loadData({ [key]: this } as any);\n    this.processForEditor();\n    return loaded;\n  }\n  refreshErrors(cur: EditorBase, deleted = false) {\n    if (cur.isLink()) {\n      if (!cur.target) {\n        this.addError(cur, {\n          source: cur,\n          severity: \"error\",\n          msg: `(${cur.editorTypeName}) ${cur.name} has no target`,\n          id: \"no-target\",\n        });\n        if (!this.unresolvedLinks[cur.targetId]?.includes($toRaw(cur)) && !deleted) {\n          addObj(this.unresolvedLinks, cur.targetId, $toRaw(cur));\n        }\n        if (!this.manager.unresolvedLinks![cur.targetId]?.includes($toRaw(cur))) {\n          addObj(this.manager.unresolvedLinks!, cur.targetId, $toRaw(cur));\n        }\n      } else {\n        this.removeError(cur, \"no-target\");\n        popObj(this.unresolvedLinks!, cur.targetId, $toRaw(cur));\n        popObj(this.manager.unresolvedLinks!, cur.targetId, $toRaw(cur));\n      }\n    } else if (cur.isProfile()) {\n      if (!(cur as Profile).typeId) {\n        this.addError(cur, { source: cur, severity: \"error\", msg: \"Profile has no type\", id: \"no-profile-type\" });\n      } else {\n        this.removeError(cur, \"no-profile-type\");\n      }\n    } else if (cur instanceof Condition) {\n      this.updateCondition(cur);\n    }\n  }\n  addToIndex(cur: Base) {\n    if (cur.id) {\n      cur.catalogue = this;\n\n      if (this.manager?.settings?.globalDuplicateIdError) {\n        // /**   Cross catalogue duplicate id check\n        const index = (this.manager as any).index!;\n        if (index[cur.id] && index[cur.id] !== cur) {\n          if (cur.isIdUnique() || index[cur.id].isIdUnique()) {\n            const existing = index[cur.id];\n            const existingCatalogue = existing.getCatalogue();\n            const isCatalogueDifferent = this !== existingCatalogue;\n            if (existingCatalogue && isCatalogueDifferent) {\n              existingCatalogue.addError(existing as EditorBase, {\n                source: existing,\n                severity: \"error\",\n                msg: `Duplicate id ${cur.id} ${cur.getName()}`,\n                id: \"duplicate-id-1\",\n                other: cur,\n                extra: existingCatalogue.name,\n              });\n              existingCatalogue.addError(cur as EditorBase, {\n                source: cur,\n                severity: \"error\",\n                msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n                id: \"duplicate-id-2\",\n                other: existing,\n                extra: this.name,\n              });\n            }\n            this.addError(existing as EditorBase, {\n              source: existing,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id}  ${cur.getName()}`,\n              id: \"duplicate-id-1\",\n              other: cur,\n              extra: isCatalogueDifferent ? existingCatalogue.name : undefined,\n            });\n            this.addError(cur as EditorBase, {\n              source: cur,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n              id: \"duplicate-id-2\",\n              other: existing,\n              extra: isCatalogueDifferent ? this.name : undefined,\n            });\n          }\n        }\n        index[cur.id] = cur;\n      } else {\n        if (this.index[cur.id] && this.index[cur.id] !== cur) {\n          const existing = this.index[cur.id];\n          if (cur.isIdUnique() || existing.isIdUnique() || cur.getName() !== existing.getName()) {\n            this.addError(existing as EditorBase, {\n              source: existing,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${cur.getName()}`,\n              id: \"duplicate-id-1\",\n              other: cur,\n            });\n            this.addError(cur as EditorBase, {\n              source: cur,\n              severity: \"error\",\n              msg: `Duplicate id ${cur.id} ${existing.getName()}`,\n              id: \"duplicate-id-2\",\n              other: existing,\n            });\n          }\n        }\n      }\n\n      this.index[cur.id] = cur;\n      if (this.unresolvedLinks && this.unresolvedLinks[cur.id]) {\n        for (const lnk of [...this.unresolvedLinks[cur.id]]) {\n          if (lnk.isLink()) {\n            this.updateLink(lnk as Link & EditorBase);\n          } else {\n            this.refreshErrors(lnk);\n          }\n        }\n      }\n      if (this.manager?.unresolvedLinks && this.manager.unresolvedLinks[cur.id]?.length) {\n        for (const lnk of [...this.manager.unresolvedLinks[cur.id]]) {\n          if (lnk.isLink()) {\n            lnk.catalogue?.updateLink(lnk as Link & EditorBase);\n          } else {\n            lnk.catalogue?.refreshErrors(lnk as EditorBase);\n          }\n        }\n      }\n    }\n  }\n  removeFromIndex(cur: EditorBase) {\n    if (cur.id && $toRaw(this.index[cur.id]) === $toRaw(cur)) {\n      delete this.index[cur.id];\n    }\n    this.removeErrors(cur);\n    for (const ref of cur.links || []) {\n      delete ref.target;\n      ref.catalogue.refreshErrors(ref);\n    }\n    for (const ref of cur.other_links || []) {\n      ref.catalogue.refreshErrors(ref, true);\n    }\n  }\n  getIndexes(): Record<string, Base>[] {\n    const indexes = [];\n    indexes.push(this.index);\n    for (const importedCatalogue of this.imports) {\n      indexes.push(importedCatalogue.index);\n    }\n    return indexes;\n  }\n  resolveAllLinks(deleteBadLinks = true) {\n    const unresolvedLinks: Array<Link> = [];\n    const unresolvedPublications: Array<BSIInfoLink | BSIRule | BSIProfile> = [];\n    const unresolvedChildIds: Array<BSICondition> = [];\n    const parents: Array<Base> = [];\n    if (!this.index) {\n      this.index = noObserve() as Record<string, Base>;\n      forEachObjectWhitelist2(\n        this,\n        (cur, parent) => {\n          this.addToIndex(cur);\n          if ((cur as BSIReference).publicationId) {\n            unresolvedPublications.push(cur as any);\n          }\n          if (cur.isLink()) {\n            unresolvedLinks.push(cur);\n            parents.push(parent);\n          }\n          if (hasSharedChildId(cur)) {\n            unresolvedChildIds.push(cur);\n          }\n        },\n        goodKeys\n      );\n    }\n    const indexes = this.getIndexes();\n    const unresolved = resolveLinks(unresolvedLinks, indexes, parents, deleteBadLinks);\n    resolvePublications(unresolvedPublications, indexes);\n    if (!deleteBadLinks) {\n      this.unresolvedLinks = {};\n      for (const lnk of unresolved) {\n        addObj(this.unresolvedLinks, lnk.targetId, $toRaw(lnk) as Link & EditorBase);\n        delete (lnk as Partial<typeof lnk>).target;\n      }\n    }\n  }\n  removeRef(from: EditorBase, to: EditorBase) {\n    if (!to.links) to.links = [];\n    const idx = to.links.indexOf(from);\n    if (idx >= 0) to.links.splice(idx, 1);\n  }\n  addRef(from: EditorBase, to: EditorBase) {\n    if (!to.links) to.links = [];\n    if (to.links.indexOf(from) === -1) {\n      to.links.push(from);\n    }\n  }\n  hasOtherRef(from: EditorBase, to: EditorBase) {\n    return to.other_links && to.other_links.includes(from);\n  }\n\n  removeOtherRef(from: EditorBase, to: EditorBase) {\n    if (!to.other_links) to.other_links = [];\n    const idx = to.other_links.indexOf(from);\n    if (idx >= 0) to.other_links.splice(idx, 1);\n  }\n  addOtherRef(from: EditorBase, to: EditorBase) {\n    if (!to.other_links) to.other_links = [];\n    if (to.other_links.indexOf(from) === -1) {\n      to.other_links.push(from);\n    }\n  }\n  updateLink(link: Link & EditorBase) {\n    if (link.target) {\n      this.removeRef(link, link.target as EditorBase);\n    }\n    link.target = resolveLink(link.targetId, this.getIndexes()) as EditorBase;\n\n    if (link.target) {\n      this.addRef(link, link.target as EditorBase);\n      const targetType = (link.target as EditorBase).editorTypeName;\n      if (targetType == \"category\") {\n        delete link.type;\n      } else {\n        link.type = targetType;\n      }\n    }\n    this.refreshErrors(link);\n    return link.target !== undefined;\n  }\n  updateConstraint(constraint: Constraint & EditorBase, deleted = false) {\n    const ids = new Set();\n    const duplicate = new Set();\n    for (const found of constraint.parent?.constraintsIterator() || ([] as Array<Constraint & EditorBase>)) {\n      if (deleted && constraint === found) continue;\n      if (ids.has(found.id)) duplicate.add(found.id);\n      else ids.add(found.id);\n    }\n    for (const found of (constraint.parent?.constraintsIterator() || []) as Array<Constraint & EditorBase>) {\n      if (deleted && constraint === found) continue;\n      if (duplicate.has(found.id)) {\n        found.catalogue?.addError(found, {\n          id: \"duplicate-constraint-id\",\n          msg: \"Duplicate constraints id\",\n          source: constraint,\n        });\n      } else {\n        found.catalogue?.removeError(found, \"duplicate-constraint-id\");\n      }\n    }\n  }\n  updateCondition(condition: (Constraint | Condition) & EditorBase, previousField?: string) {\n    if (condition.scope) {\n      const parent = getModifierOrConditionParent(condition);\n      if (parent && !isScopeValid(parent, condition.scope)) {\n        this.addError(condition, { source: condition, id: \"invalid-scope\", msg: `Invalid scope ${condition.scope}` });\n      } else {\n        this.removeError(condition, \"invalid-scope\");\n      }\n      if (condition.scope && !validScopes.has(condition.scope)) {\n        const scope = this.findOptionById(condition.scope);\n        if (scope) {\n          scope.getCatalogue().addOtherRef(condition, scope as EditorBase);\n        }\n      }\n    }\n    if (condition instanceof Constraint) {\n      return this.updateConstraint(condition as Constraint & EditorBase);\n    }\n    const isInstanceOf = [\"instanceOf\", \"notInstanceOf\"].includes(condition.type);\n    if (previousField && !basicQueryFields.has(previousField)) {\n      const found = isInstanceOf ? this.findOptionByIdGlobal(previousField) : this.findOptionById(previousField);\n      if (found) this.removeOtherRef(condition, found as EditorBase);\n    }\n    if (condition.childId) {\n      if (basicQueryFields.has(condition.childId)) {\n        this.removeError(condition, \"id-not-exist\");\n        return;\n      }\n      const target = isInstanceOf\n        ? this.findOptionByIdGlobal(condition.childId)\n        : this.findOptionById(condition.childId);\n      if (target) {\n        if (!this.hasOtherRef(condition, target as EditorBase)) {\n          this.addOtherRef(condition, target as EditorBase);\n        }\n        this.removeError(condition, \"id-not-exist\");\n        // popObj(this.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n        popObj(this.manager.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n        return;\n      }\n    }\n    this.addError(condition, {\n      source: condition,\n      severity: \"warning\",\n      msg: \"child id does not exist\",\n      id: \"id-not-exist\",\n    });\n    // if (!this.unresolvedLinks![condition.childId]?.includes(condition)) {\n    //   addObj(this.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n    // }\n    addObjIfMissing(this.manager.unresolvedLinks!, condition.childId, $toRaw(condition) as Condition & EditorBase);\n    return;\n  }\n\n  unlinkLink(link: Link & EditorBase) {\n    if (link.target) {\n      this.removeRef(link, link.target as EditorBase);\n    }\n  }\n}\n\nexport function resolveLink(id: string, indexes: Record<string, Base>[]) {\n  for (const index of indexes) {\n    if (id in index) {\n      return index[id];\n    }\n  }\n}\n/**\n * Fills in the `.target` field with the value of the first matching key inside indexes\n * Example: indexes: [{A: 1}, {A: 2}] targetId `A` target would result in `1`\n * @param unresolved The links to resolve\n * @param indexes Array of indexes which match an id to a node\n */\nexport function resolveLinks(\n  unresolved: Link[] = [],\n  indexes: Record<string, Base>[],\n  parents: Base[],\n  deleteBadLinks = true\n) {\n  const length = unresolved.length;\n  const resolved = [];\n\n  // Loops while unresolvedLinks.length\n  // If the length is the same as the start of last iteration, stops.\n  let previousLength = 0;\n  while (unresolved.length !== previousLength) {\n    const currentUnresolved = unresolved;\n    const currentParents = parents;\n    previousLength = currentUnresolved.length;\n    unresolved = [];\n    parents = [];\n\n    for (let i = 0; i < currentUnresolved.length; i++) {\n      const current = currentUnresolved[i];\n      const currentParent = currentParents[i];\n\n      // Find the target, stopping at first found\n      const id = current.targetId;\n      const target = resolveLink(id, indexes);\n\n      if (target) {\n        current.target = target;\n        resolved.push(current);\n        continue;\n      }\n\n      // Resolve again later if unresolved\n      unresolved.push(current);\n      parents.push(currentParent);\n    }\n  }\n\n  // Delete unresolved links\n  if (unresolved.length && deleteBadLinks) {\n    // console.warn(`${length - unresolved.length}/${length} links resolved in ${unresolved[0].catalogue.name}`);\n    // console.log(`unresolved links: ${unresolved.map((o) => `${o.id} -> ${o.targetId}`)}`);\n    for (let i = 0; i < unresolved.length; i++) {\n      const link = unresolved[i];\n      const parent = parents[i];\n      for (const [k, v] of Object.entries(parent)) {\n        if (v === link) delete parent[k as keyof typeof parent];\n\n        if (Array.isArray(v)) {\n          for (const i in v) {\n            const val = v[i];\n            if (val === link) {\n              v.splice(i as any, 1);\n            }\n          }\n        }\n      }\n    }\n  }\n  return unresolved;\n}\n/**\n * Fills in the `.publication` field with the value of the first matching key inside indexes\n * Example: indexes: [{A: 1}, {A: 2}] targetId `A` target would result in `1`\n * @param unresolvedPublications The publications to resolve\n * @param indexes Array of indexes which match an id to a node\n */\nexport function resolvePublications(\n  unresolved: Array<BSIInfoLink | BSIRule | BSIProfile> = [],\n  indexes: Record<string, Base>[]\n) {\n  const nextUnresolved = [];\n  for (const current of unresolved) {\n    for (const index of indexes) {\n      if (current.publicationId! in index) {\n        current.publication = index[current.publicationId!];\n        break;\n      }\n    }\n    nextUnresolved.push(current);\n  }\n}\n\nfunction hasSharedChildId(obj: any): obj is BSICondition {\n  return obj.shared !== false && obj.childId !== undefined;\n}\n\nexport class NoObserve {\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return \"ObjectNoObserve\";\n  }\n}\nexport function noObserve(): object {\n  return new NoObserve();\n}\n","/* unzipit@1.4.3, license MIT */\n/* global SharedArrayBuffer, process */\n\nfunction readBlobAsArrayBuffer(blob) {\n  if (blob.arrayBuffer) {\n    return blob.arrayBuffer();\n  }\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.addEventListener('loadend', () => {\n      resolve(reader.result);\n    });\n    reader.addEventListener('error', reject);\n    reader.readAsArrayBuffer(blob);\n  });\n}\n\nasync function readBlobAsUint8Array(blob) {\n  const arrayBuffer = await readBlobAsArrayBuffer(blob);\n  return new Uint8Array(arrayBuffer);\n}\n\nfunction isBlob(v) {\n  return typeof Blob !== 'undefined' && v instanceof Blob;\n}\n\nfunction isSharedArrayBuffer(b) {\n  return typeof SharedArrayBuffer !== 'undefined' && b instanceof SharedArrayBuffer;\n}\n\nconst isNode =\n    (typeof process !== 'undefined') &&\n    process.versions &&\n    (typeof process.versions.node !== 'undefined') &&\n    (typeof process.versions.electron === 'undefined');\n\nfunction isTypedArraySameAsArrayBuffer(typedArray) {\n  return typedArray.byteOffset === 0 && typedArray.byteLength === typedArray.buffer.byteLength;\n}\n\nclass ArrayBufferReader {\n  constructor(arrayBufferOrView) {\n    this.typedArray = (arrayBufferOrView instanceof ArrayBuffer || isSharedArrayBuffer(arrayBufferOrView))\n       ? new Uint8Array(arrayBufferOrView)\n       : new Uint8Array(arrayBufferOrView.buffer, arrayBufferOrView.byteOffset, arrayBufferOrView.byteLength);\n  }\n  async getLength() {\n    return this.typedArray.byteLength;\n  }\n  async read(offset, length) {\n    return new Uint8Array(this.typedArray.buffer, this.typedArray.byteOffset + offset, length);\n  }\n}\n\nclass BlobReader {\n  constructor(blob) {\n    this.blob = blob;\n  }\n  async getLength() {\n    return this.blob.size;\n  }\n  async read(offset, length) {\n    const blob = this.blob.slice(offset, offset + length);\n    const arrayBuffer = await readBlobAsArrayBuffer(blob);\n    return new Uint8Array(arrayBuffer);\n  }\n  async sliceAsBlob(offset, length, type = '') {\n    return this.blob.slice(offset, offset + length, type);\n  }\n}\n\nclass HTTPRangeReader {\n  constructor(url) {\n    this.url = url;\n  }\n  async getLength() {\n    if (this.length === undefined) {\n      const req = await fetch(this.url, { method: 'HEAD' });\n      if (!req.ok) {\n        throw new Error(`failed http request ${this.url}, status: ${req.status}: ${req.statusText}`);\n      }\n      this.length = parseInt(req.headers.get('content-length'));\n      if (Number.isNaN(this.length)) {\n        throw Error('could not get length');\n      }\n    }\n    return this.length;\n  }\n  async read(offset, size) {\n    if (size === 0) {\n      return new Uint8Array(0);\n    }\n    const req = await fetch(this.url, {\n      headers: {\n        Range: `bytes=${offset}-${offset + size - 1}`,\n      },\n    });\n    if (!req.ok) {\n      throw new Error(`failed http request ${this.url}, status: ${req.status} offset: ${offset} size: ${size}: ${req.statusText}`);\n    }\n    const buffer = await req.arrayBuffer();\n    return new Uint8Array(buffer);\n  }\n}\n\nfunction inflate(data, buf) {\n\tvar u8=Uint8Array;\n\tif(data[0]==3 && data[1]==0) return (buf ? buf : new u8(0));\n\tvar bitsF = _bitsF, bitsE = _bitsE, decodeTiny = _decodeTiny, get17 = _get17;\n\t\n\tvar noBuf = (buf==null);\n\tif(noBuf) buf = new u8((data.length>>>2)<<3);\n\t\n\tvar BFINAL=0, BTYPE=0, HLIT=0, HDIST=0, HCLEN=0, ML=0, MD=0; \t\n\tvar off = 0, pos = 0;\n\tvar lmap, dmap;\n\t\n\twhile(BFINAL==0) {\t\t\n\t\tBFINAL = bitsF(data, pos  , 1);\n\t\tBTYPE  = bitsF(data, pos+1, 2);  pos+=3;\n\t\t//console.log(BFINAL, BTYPE);\n\t\t\n\t\tif(BTYPE==0) {\n\t\t\tif((pos&7)!=0) pos+=8-(pos&7);\n\t\t\tvar p8 = (pos>>>3)+4, len = data[p8-4]|(data[p8-3]<<8);  //console.log(len);//bitsF(data, pos, 16), \n\t\t\tif(noBuf) buf=_check(buf, off+len);\n\t\t\tbuf.set(new u8(data.buffer, data.byteOffset+p8, len), off);\n\t\t\t//for(var i=0; i<len; i++) buf[off+i] = data[p8+i];\n\t\t\t//for(var i=0; i<len; i++) if(buf[off+i] != data[p8+i]) throw \"e\";\n\t\t\tpos = ((p8+len)<<3);  off+=len;  continue;\n\t\t}\n\t\tif(noBuf) buf=_check(buf, off+(1<<17));  // really not enough in many cases (but PNG and ZIP provide buffer in advance)\n\t\tif(BTYPE==1) {  lmap = U.flmap;  dmap = U.fdmap;  ML = (1<<9)-1;  MD = (1<<5)-1;   }\n\t\tif(BTYPE==2) {\n\t\t\tHLIT  = bitsE(data, pos   , 5)+257;  \n\t\t\tHDIST = bitsE(data, pos+ 5, 5)+  1;  \n\t\t\tHCLEN = bitsE(data, pos+10, 4)+  4;  pos+=14;\n\t\t\tfor(var i=0; i<38; i+=2) {  U.itree[i]=0;  U.itree[i+1]=0;  }\n\t\t\tvar tl = 1;\n\t\t\tfor(var i=0; i<HCLEN; i++) {  var l=bitsE(data, pos+i*3, 3);  U.itree[(U.ordr[i]<<1)+1] = l;  if(l>tl)tl=l;  }     pos+=3*HCLEN;  //console.log(itree);\n\t\t\tmakeCodes(U.itree, tl);\n\t\t\tcodes2map(U.itree, tl, U.imap);\n\t\t\t\n\t\t\tlmap = U.lmap;  dmap = U.dmap;\n\t\t\t\n\t\t\tpos = decodeTiny(U.imap, (1<<tl)-1, HLIT+HDIST, data, pos, U.ttree);\n\t\t\tvar mx0 = _copyOut(U.ttree,    0, HLIT , U.ltree);  ML = (1<<mx0)-1;\n\t\t\tvar mx1 = _copyOut(U.ttree, HLIT, HDIST, U.dtree);  MD = (1<<mx1)-1;\n\t\t\t\n\t\t\t//var ml = decodeTiny(U.imap, (1<<tl)-1, HLIT , data, pos, U.ltree); ML = (1<<(ml>>>24))-1;  pos+=(ml&0xffffff);\n\t\t\tmakeCodes(U.ltree, mx0);\n\t\t\tcodes2map(U.ltree, mx0, lmap);\n\t\t\t\n\t\t\t//var md = decodeTiny(U.imap, (1<<tl)-1, HDIST, data, pos, U.dtree); MD = (1<<(md>>>24))-1;  pos+=(md&0xffffff);\n\t\t\tmakeCodes(U.dtree, mx1);\n\t\t\tcodes2map(U.dtree, mx1, dmap);\n\t\t}\n\t\t//var ooff=off, opos=pos;\n\t\twhile(true) {\n\t\t\tvar code = lmap[get17(data, pos) & ML];  pos += code&15;\n\t\t\tvar lit = code>>>4;  //U.lhst[lit]++;  \n\t\t\tif((lit>>>8)==0) {  buf[off++] = lit;  }\n\t\t\telse if(lit==256) {  break;  }\n\t\t\telse {\n\t\t\t\tvar end = off+lit-254;\n\t\t\t\tif(lit>264) { var ebs = U.ldef[lit-257];  end = off + (ebs>>>3) + bitsE(data, pos, ebs&7);  pos += ebs&7;  }\n\t\t\t\t//dst[end-off]++;\n\t\t\t\t\n\t\t\t\tvar dcode = dmap[get17(data, pos) & MD];  pos += dcode&15;\n\t\t\t\tvar dlit = dcode>>>4;\n\t\t\t\tvar dbs = U.ddef[dlit], dst = (dbs>>>4) + bitsF(data, pos, dbs&15);  pos += dbs&15;\n\t\t\t\t\n\t\t\t\t//var o0 = off-dst, stp = Math.min(end-off, dst);\n\t\t\t\t//if(stp>20) while(off<end) {  buf.copyWithin(off, o0, o0+stp);  off+=stp;  }  else\n\t\t\t\t//if(end-dst<=off) buf.copyWithin(off, off-dst, end-dst);  else\n\t\t\t\t//if(dst==1) buf.fill(buf[off-1], off, end);  else\n\t\t\t\tif(noBuf) buf=_check(buf, off+(1<<17));\n\t\t\t\twhile(off<end) {  buf[off]=buf[off++-dst];    buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  buf[off]=buf[off++-dst];  }   \n\t\t\t\toff=end;\n\t\t\t\t//while(off!=end) {  buf[off]=buf[off++-dst];  }\n\t\t\t}\n\t\t}\n\t\t//console.log(off-ooff, (pos-opos)>>>3);\n\t}\n\t//console.log(dst);\n\t//console.log(tlen, dlen, off-tlen+tcnt);\n\treturn buf.length==off ? buf : buf.slice(0,off);\n}\nfunction _check(buf, len) {\n\tvar bl=buf.length;  if(len<=bl) return buf;\n\tvar nbuf = new Uint8Array(Math.max(bl<<1,len));  nbuf.set(buf,0);\n\t//for(var i=0; i<bl; i+=4) {  nbuf[i]=buf[i];  nbuf[i+1]=buf[i+1];  nbuf[i+2]=buf[i+2];  nbuf[i+3]=buf[i+3];  }\n\treturn nbuf;\n}\n\nfunction _decodeTiny(lmap, LL, len, data, pos, tree) {\n\tvar bitsE = _bitsE, get17 = _get17;\n\tvar i = 0;\n\twhile(i<len) {\n\t\tvar code = lmap[get17(data, pos)&LL];  pos+=code&15;\n\t\tvar lit = code>>>4; \n\t\tif(lit<=15) {  tree[i]=lit;  i++;  }\n\t\telse {\n\t\t\tvar ll = 0, n = 0;\n\t\t\tif(lit==16) {\n\t\t\t\tn = (3  + bitsE(data, pos, 2));  pos += 2;  ll = tree[i-1];\n\t\t\t}\n\t\t\telse if(lit==17) {\n\t\t\t\tn = (3  + bitsE(data, pos, 3));  pos += 3;\n\t\t\t}\n\t\t\telse if(lit==18) {\n\t\t\t\tn = (11 + bitsE(data, pos, 7));  pos += 7;\n\t\t\t}\n\t\t\tvar ni = i+n;\n\t\t\twhile(i<ni) {  tree[i]=ll;  i++; }\n\t\t}\n\t}\n\treturn pos;\n}\nfunction _copyOut(src, off, len, tree) {\n\tvar mx=0, i=0, tl=tree.length>>>1;\n\twhile(i<len) {  var v=src[i+off];  tree[(i<<1)]=0;  tree[(i<<1)+1]=v;  if(v>mx)mx=v;  i++;  }\n\twhile(i<tl ) {  tree[(i<<1)]=0;  tree[(i<<1)+1]=0;  i++;  }\n\treturn mx;\n}\n\nfunction makeCodes(tree, MAX_BITS) {  // code, length\n\tvar max_code = tree.length;\n\tvar code, bits, n, i, len;\n\t\n\tvar bl_count = U.bl_count;  for(var i=0; i<=MAX_BITS; i++) bl_count[i]=0;\n\tfor(i=1; i<max_code; i+=2) bl_count[tree[i]]++;\n\t\n\tvar next_code = U.next_code;\t// smallest code for each length\n\t\n\tcode = 0;\n\tbl_count[0] = 0;\n\tfor (bits = 1; bits <= MAX_BITS; bits++) {\n\t\tcode = (code + bl_count[bits-1]) << 1;\n\t\tnext_code[bits] = code;\n\t}\n\t\n\tfor (n = 0; n < max_code; n+=2) {\n\t\tlen = tree[n+1];\n\t\tif (len != 0) {\n\t\t\ttree[n] = next_code[len];\n\t\t\tnext_code[len]++;\n\t\t}\n\t}\n}\nfunction codes2map(tree, MAX_BITS, map) {\n\tvar max_code = tree.length;\n\tvar r15 = U.rev15;\n\tfor(var i=0; i<max_code; i+=2) if(tree[i+1]!=0)  {\n\t\tvar lit = i>>1;\n\t\tvar cl = tree[i+1], val = (lit<<4)|cl; // :  (0x8000 | (U.of0[lit-257]<<7) | (U.exb[lit-257]<<4) | cl);\n\t\tvar rest = (MAX_BITS-cl), i0 = tree[i]<<rest, i1 = i0 + (1<<rest);\n\t\t//tree[i]=r15[i0]>>>(15-MAX_BITS);\n\t\twhile(i0!=i1) {\n\t\t\tvar p0 = r15[i0]>>>(15-MAX_BITS);\n\t\t\tmap[p0]=val;  i0++;\n\t\t}\n\t}\n}\nfunction revCodes(tree, MAX_BITS) {\n\tvar r15 = U.rev15, imb = 15-MAX_BITS;\n\tfor(var i=0; i<tree.length; i+=2) {  var i0 = (tree[i]<<(MAX_BITS-tree[i+1]));  tree[i] = r15[i0]>>>imb;  }\n}\n\nfunction _bitsE(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8)                        )>>>(pos&7))&((1<<length)-1);  }\nfunction _bitsF(dt, pos, length) {  return ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16))>>>(pos&7))&((1<<length)-1);  }\n/*\nfunction _get9(dt, pos) {\n\treturn ((dt[pos>>>3] | (dt[(pos>>>3)+1]<<8))>>>(pos&7))&511;\n} */\nfunction _get17(dt, pos) {\t// return at least 17 meaningful bytes\n\treturn (dt[pos>>>3] | (dt[(pos>>>3)+1]<<8) | (dt[(pos>>>3)+2]<<16) )>>>(pos&7);\n}\nconst U = function(){\n\tvar u16=Uint16Array, u32=Uint32Array;\n\treturn {\n\t\tnext_code : new u16(16),\n\t\tbl_count  : new u16(16),\n\t\tordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n\t\tof0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n\t\texb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n\t\tldef : new u16(32),\n\t\tdf0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n\t\tdxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n\t\tddef : new u32(32),\n\t\tflmap: new u16(  512),  fltree: [],\n\t\tfdmap: new u16(   32),  fdtree: [],\n\t\tlmap : new u16(32768),  ltree : [],  ttree:[],\n\t\tdmap : new u16(32768),  dtree : [],\n\t\timap : new u16(  512),  itree : [],\n\t\t//rev9 : new u16(  512)\n\t\trev15: new u16(1<<15),\n\t\tlhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n\t\tlits : new u32(15000),\n\t\tstrt : new u16(1<<16),\n\t\tprev : new u16(1<<15)\n\t};  \n} ();\n\n(function(){\t\n\tvar len = 1<<15;\n\tfor(var i=0; i<len; i++) {\n\t\tvar x = i;\n\t\tx = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n\t\tx = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n\t\tx = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n\t\tx = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n\t\tU.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n\t}\n\t\n\tfunction pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n\t\n\tfor(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n\t\n\tpushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n\t/*\n\tvar i = 0;\n\tfor(; i<=143; i++) U.fltree.push(0,8);\n\tfor(; i<=255; i++) U.fltree.push(0,9);\n\tfor(; i<=279; i++) U.fltree.push(0,7);\n\tfor(; i<=287; i++) U.fltree.push(0,8);\n\t*/\n\tmakeCodes(U.fltree, 9);\n\tcodes2map(U.fltree, 9, U.flmap);\n\trevCodes (U.fltree, 9);\n\t\n\tpushV(U.fdtree,32,5);\n\t//for(i=0;i<32; i++) U.fdtree.push(0,5);\n\tmakeCodes(U.fdtree, 5);\n\tcodes2map(U.fdtree, 5, U.fdmap);\n\trevCodes (U.fdtree, 5);\n\t\n\tpushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n\t/*\n\tfor(var i=0; i< 19; i++) U.itree.push(0,0);\n\tfor(var i=0; i<286; i++) U.ltree.push(0,0);\n\tfor(var i=0; i< 30; i++) U.dtree.push(0,0);\n\tfor(var i=0; i<320; i++) U.ttree.push(0,0);\n\t*/\n})();\n\nconst crc = {\r\n\ttable : ( function() {\r\n\t   var tab = new Uint32Array(256);\r\n\t   for (var n=0; n<256; n++) {\r\n\t\t\tvar c = n;\r\n\t\t\tfor (var k=0; k<8; k++) {\r\n\t\t\t\tif (c & 1)  c = 0xedb88320 ^ (c >>> 1);\r\n\t\t\t\telse        c = c >>> 1;\r\n\t\t\t}\r\n\t\t\ttab[n] = c;  }    \r\n\t\treturn tab;  })(),\r\n\tupdate : function(c, buf, off, len) {\r\n\t\tfor (var i=0; i<len; i++)  c = crc.table[(c ^ buf[off+i]) & 0xff] ^ (c >>> 8);\r\n\t\treturn c;\r\n\t},\r\n\tcrc : function(b,o,l)  {  return crc.update(0xffffffff,b,o,l) ^ 0xffffffff;  }\r\n};\r\n\r\nfunction inflateRaw(file, buf) {  return inflate(file, buf);  }\n\n/* global module */\n\nconst config = {\n  numWorkers: 1,\n  workerURL: '',\n  useWorkers: false,\n};\n\nlet nextId = 0;\n\n// Requests are put on a queue.\n// We don't send the request to the worker until the worker\n// is finished. This probably adds a small amount of latency\n// but the issue is imagine you have 2 workers. You give worker\n// A x seconds of work to do and worker B y seconds of work to\n// do. You don't know which will finish first. If you give\n// the worker with more work to do the request then you'll\n// waste time.\n\n// note: we can't check `workers.length` for deciding if\n// we've reached `config.numWorkers` because creation the worker\n// is async which means other requests to make workers might\n// come in before a worker gets added to `workers`\nlet numWorkers = 0;\nlet canUseWorkers = true;   // gets set to false if we can't start a worker\nconst workers = [];\nconst availableWorkers = [];\nconst waitingForWorkerQueue = [];\nconst currentlyProcessingIdToRequestMap = new Map();\n\nfunction handleResult(e) {\n  makeWorkerAvailable(e.target);\n  const {id, error, data} = e.data;\n  const request = currentlyProcessingIdToRequestMap.get(id);\n  currentlyProcessingIdToRequestMap.delete(id);\n  if (error) {\n    request.reject(error);\n  } else {\n    request.resolve(data);\n  }\n}\n\n// Because Firefox uses non-standard onerror to signal an error.\nfunction startWorker(url) {\n  return new Promise((resolve, reject) => {\n    const worker = new Worker(url);\n    worker.onmessage = (e) => {\n      if (e.data === 'start') {\n        worker.onerror = undefined;\n        worker.onmessage = undefined;\n        resolve(worker);\n      } else {\n        reject(new Error(`unexpected message: ${e.data}`));\n      }\n    };\n    worker.onerror = reject;\n  });\n}\n\nfunction dynamicRequire(mod, request) {\n  return mod.require ? mod.require(request) : {};\n}\n\nconst workerHelper = (function() {\n  if (isNode) {\n    // We need to use `dynamicRequire` because `require` on it's own will be optimized by webpack.\n    const {Worker} = dynamicRequire(module, 'worker_threads');\n    return {\n      async createWorker(url) {\n        return new Worker(url);\n      },\n      addEventListener(worker, fn) {\n        worker.on('message', (data) => {\n          fn({target: worker, data});\n        });\n      },\n      async terminate(worker) {\n        await worker.terminate();\n      },\n    };\n  } else {\n    return {\n      async createWorker(url) {\n        // I don't understand this security issue\n        // Apparently there is some iframe setting or http header\n        // that prevents cross domain workers. But, I can manually\n        // download the text and do it. I reported this to Chrome\n        // and they said it was fine so \\_()_/\n        try {\n          const worker = await startWorker(url);\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker:', url);\n        }\n\n        let text;\n        try {\n          const req = await fetch(url, {mode: 'cors'});\n          if (!req.ok) {\n            throw new Error(`could not load: ${url}`);\n          }\n          text = await req.text();\n          url = URL.createObjectURL(new Blob([text], {type: 'application/javascript'}));\n          const worker = await startWorker(url);\n          config.workerURL = url;  // this is a hack. What's a better way to structure this code?\n          return worker;\n        } catch (e) {\n          console.warn('could not load worker via fetch:', url);\n        }\n\n        if (text !== undefined) {\n          try {\n            url = `data:application/javascript;base64,${btoa(text)}`;\n            const worker = await startWorker(url);\n            config.workerURL = url;\n            return worker;\n          } catch (e) {\n            console.warn('could not load worker via dataURI');\n          }\n        }\n\n        console.warn('workers will not be used');\n        throw new Error('can not start workers');\n      },\n      addEventListener(worker, fn) {\n        worker.addEventListener('message', fn);\n      },\n      async terminate(worker) {\n        worker.terminate();\n      },\n    };\n  }\n}());\n\nfunction makeWorkerAvailable(worker) {\n  availableWorkers.push(worker);\n  processWaitingForWorkerQueue();\n}\n\nasync function getAvailableWorker() {\n  if (availableWorkers.length === 0 && numWorkers < config.numWorkers) {\n    ++numWorkers;  // see comment at numWorkers declaration\n    try {\n      const worker = await workerHelper.createWorker(config.workerURL);\n      workers.push(worker);\n      availableWorkers.push(worker);\n      workerHelper.addEventListener(worker, handleResult);\n    } catch (e) {\n      // set this global out-of-band (needs refactor)\n      canUseWorkers = false;\n    }\n  }\n  return availableWorkers.pop();\n}\n\n// @param {Uint8Array} src\n// @param {number} uncompressedSize\n// @param {string} [type] mime-type\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawLocal(src, uncompressedSize, type, resolve) {\n  const dst = new Uint8Array(uncompressedSize);\n  inflateRaw(src, dst);\n  resolve(type\n     ? new Blob([dst], {type})\n     : dst.buffer);\n}\n\nasync function processWaitingForWorkerQueue() {\n  if (waitingForWorkerQueue.length === 0) {\n    return;\n  }\n\n  if (config.useWorkers && canUseWorkers) {\n    const worker = await getAvailableWorker();\n    // canUseWorkers might have been set out-of-band (need refactor)\n    if (canUseWorkers) {\n      if (worker) {\n        if (waitingForWorkerQueue.length === 0) {\n          // the queue might be empty while we awaited for a worker.\n          makeWorkerAvailable(worker);\n          return;\n        }\n        const {id, src, uncompressedSize, type, resolve, reject} = waitingForWorkerQueue.shift();\n        currentlyProcessingIdToRequestMap.set(id, {id, resolve, reject});\n        const transferables = [];\n        // NOTE: Originally I thought you could transfer an ArrayBuffer.\n        // The code on this side is often using views into the entire file\n        // which means if we transferred we'd lose the entire file. That sucks\n        // because it means there's an expensive copy to send the uncompressed\n        // data to the worker.\n        //\n        // Also originally I thought we could send a Blob but we'd need to refactor\n        // the code in unzipit/readEntryData as currently it reads the uncompressed\n        // bytes.\n        //\n        //if (!isBlob(src) && !isSharedArrayBuffer(src)) {\n        //  transferables.push(src);\n        //}\n        worker.postMessage({\n          type: 'inflate',\n          data: {\n            id,\n            type,\n            src,\n            uncompressedSize,\n          },\n        }, transferables);\n      }\n      return;\n    }\n  }\n\n  // inflate locally\n  // We loop here because what happens if many requests happen at once\n  // the first N requests will try to async make a worker. Other requests\n  // will then be on the queue. But if we fail to make workers then there\n  // are pending requests.\n  while (waitingForWorkerQueue.length) {\n    const {src, uncompressedSize, type, resolve} = waitingForWorkerQueue.shift();\n    let data = src;\n    if (isBlob(src)) {\n      data = await readBlobAsUint8Array(src);\n    }\n    inflateRawLocal(data, uncompressedSize, type, resolve);\n  }\n}\n\nfunction setOptions(options) {\n  config.workerURL = options.workerURL || config.workerURL;\n  // there's no reason to set the workerURL if you're not going to use workers\n  if (options.workerURL) {\n    config.useWorkers = true;\n  }\n  config.useWorkers = options.useWorkers !== undefined ? options.useWorkers : config.useWorkers;\n  config.numWorkers = options.numWorkers || config.numWorkers;\n}\n\n// It has to take non-zero time to put a large typed array in a Blob since the very\n// next instruction you could change the contents of the array. So, if you're reading\n// the zip file for images/video/audio then all you want is a Blob on which to get a URL.\n// so that operation of putting the data in a Blob should happen in the worker.\n//\n// Conversely if you want the data itself then you want an ArrayBuffer immediately\n// since the worker can transfer its ArrayBuffer zero copy.\n//\n// @param {Uint8Array|Blob} src\n// @param {number} uncompressedSize\n// @param {string} [type] falsy or mimeType string (eg: 'image/png')\n// @returns {ArrayBuffer|Blob} ArrayBuffer if type is falsy or Blob otherwise.\nfunction inflateRawAsync(src, uncompressedSize, type) {\n  return new Promise((resolve, reject) => {\n    // note: there is potential an expensive copy here. In order for the data\n    // to make it into the worker we need to copy the data to the worker unless\n    // it's a Blob or a SharedArrayBuffer.\n    //\n    // Solutions:\n    //\n    // 1. A minor enhancement, if `uncompressedSize` is small don't call the worker.\n    //\n    //    might be a win period as their is overhead calling the worker\n    //\n    // 2. Move the entire library to the worker\n    //\n    //    Good, Maybe faster if you pass a URL, Blob, or SharedArrayBuffer? Not sure about that\n    //    as those are also easy to transfer. Still slow if you pass an ArrayBuffer\n    //    as the ArrayBuffer has to be copied to the worker.\n    //\n    // I guess benchmarking is really the only thing to try.\n    waitingForWorkerQueue.push({src, uncompressedSize, type, resolve, reject, id: nextId++});\n    processWaitingForWorkerQueue();\n  });\n}\n\nfunction clearArray(arr) {\n  arr.splice(0, arr.length);\n}\n\nasync function cleanup() {\n  for (const worker of workers) {\n    await workerHelper.terminate(worker);\n  }\n  clearArray(workers);\n  clearArray(availableWorkers);\n  clearArray(waitingForWorkerQueue);\n  currentlyProcessingIdToRequestMap.clear();\n  numWorkers = 0;\n  canUseWorkers = true;\n}\n\n/*\nclass Zip {\n  constructor(reader) {\n    comment,  // the comment for this entry\n    commentBytes, // the raw comment for this entry\n  }\n}\n*/\n\nfunction dosDateTimeToDate(date, time) {\n  const day = date & 0x1f; // 1-31\n  const month = (date >> 5 & 0xf) - 1; // 1-12, 0-11\n  const year = (date >> 9 & 0x7f) + 1980; // 0-128, 1980-2108\n\n  const millisecond = 0;\n  const second = (time & 0x1f) * 2; // 0-29, 0-58 (even numbers)\n  const minute = time >> 5 & 0x3f; // 0-59\n  const hour = time >> 11 & 0x1f; // 0-23\n\n  return new Date(year, month, day, hour, minute, second, millisecond);\n}\n\nclass ZipEntry {\n  constructor(reader, rawEntry) {\n    this._reader = reader;\n    this._rawEntry = rawEntry;\n    this.name = rawEntry.name;\n    this.nameBytes = rawEntry.nameBytes;\n    this.size = rawEntry.uncompressedSize;\n    this.compressedSize = rawEntry.compressedSize;\n    this.comment = rawEntry.comment;\n    this.commentBytes = rawEntry.commentBytes;\n    this.compressionMethod = rawEntry.compressionMethod;\n    this.lastModDate = dosDateTimeToDate(rawEntry.lastModFileDate, rawEntry.lastModFileTime);\n    this.isDirectory = rawEntry.uncompressedSize === 0 && rawEntry.name.endsWith('/');\n    this.encrypted = !!(rawEntry.generalPurposeBitFlag & 0x1);\n    this.externalFileAttributes = rawEntry.externalFileAttributes;\n    this.versionMadeBy = rawEntry.versionMadeBy;\n  }\n  // returns a promise that returns a Blob for this entry\n  async blob(type = 'application/octet-stream') {\n    return await readEntryDataAsBlob(this._reader, this._rawEntry, type);\n  }\n  // returns a promise that returns an ArrayBuffer for this entry\n  async arrayBuffer() {\n    return await readEntryDataAsArrayBuffer(this._reader, this._rawEntry);\n  }\n  // returns text, assumes the text is valid utf8. If you want more options decode arrayBuffer yourself\n  async text() {\n    const buffer = await this.arrayBuffer();\n    return decodeBuffer(new Uint8Array(buffer));\n  }\n  // returns text with JSON.parse called on it. If you want more options decode arrayBuffer yourself\n  async json() {\n    const text = await this.text();\n    return JSON.parse(text);\n  }\n}\n\nconst EOCDR_WITHOUT_COMMENT_SIZE = 22;\nconst MAX_COMMENT_SIZE = 0xffff; // 2-byte size\nconst EOCDR_SIGNATURE = 0x06054b50;\nconst ZIP64_EOCDR_SIGNATURE = 0x06064b50;\n\nasync function readAs(reader, offset, length) {\n  return await reader.read(offset, length);\n}\n\n// The point of this function is we want to be able to pass the data\n// to a worker as fast as possible so when decompressing if the data\n// is already a blob and we can get a blob then get a blob.\n//\n// I'm not sure what a better way to refactor this is. We've got examples\n// of multiple readers. Ideally, for every type of reader we could ask\n// it, \"give me a type that is zero copy both locally and when sent to a worker\".\n//\n// The problem is the worker would also have to know the how to handle this\n// opaque type. I suppose the correct solution is to register different\n// reader handlers in the worker so BlobReader would register some\n// `handleZeroCopyType<BlobReader>`. At the moment I don't feel like\n// refactoring. As it is you just pass in an instance of the reader\n// but instead you'd have to register the reader and some how get the\n// source for the `handleZeroCopyType` handler function into the worker.\n// That sounds like a huge PITA, requiring you to put the implementation\n// in a separate file so the worker can load it or some other workaround\n// hack.\n//\n// For now this hack works even if it's not generic.\nasync function readAsBlobOrTypedArray(reader, offset, length, type) {\n  if (reader.sliceAsBlob) {\n    return await reader.sliceAsBlob(offset, length, type);\n  }\n  return await reader.read(offset, length);\n}\n\nconst crc$1 = {\n  unsigned() {\n    return 0;\n  },\n};\n\nfunction getUint16LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100;\n}\n\nfunction getUint32LE(uint8View, offset) {\n  return uint8View[offset    ] +\n         uint8View[offset + 1] * 0x100 +\n         uint8View[offset + 2] * 0x10000 +\n         uint8View[offset + 3] * 0x1000000;\n}\n\nfunction getUint64LE(uint8View, offset) {\n  return getUint32LE(uint8View, offset) +\n         getUint32LE(uint8View, offset + 4) * 0x100000000;\n}\n\n/* eslint-disable no-irregular-whitespace */\n// const decodeCP437 = (function() {\n//   const cp437 = '\\u0000 !\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n//\n//   return function(uint8view) {\n//     return Array.from(uint8view).map(v => cp437[v]).join('');\n//   };\n// }());\n/* eslint-enable no-irregular-whitespace */\n\nconst utf8Decoder = new TextDecoder();\nfunction decodeBuffer(uint8View, isUTF8) {  /* eslint-disable-line no-unused-vars */ /* lgtm [js/superfluous-trailing-arguments] */\n  if (isSharedArrayBuffer(uint8View.buffer)) {\n    uint8View = new Uint8Array(uint8View);\n  }\n  return utf8Decoder.decode(uint8View);\n  /*\n  AFAICT the UTF8 flat is not set so it's 100% up to the user\n  to self decode if their file is not utf8 filenames\n  return isUTF8\n      ? utf8Decoder.decode(uint8View)\n      : decodeCP437(uint8View);\n  */\n}\n\nasync function findEndOfCentralDirector(reader, totalLength) {\n  const size = Math.min(EOCDR_WITHOUT_COMMENT_SIZE + MAX_COMMENT_SIZE, totalLength);\n  const readStart = totalLength - size;\n  const data = await readAs(reader, readStart, size);\n  for (let i = size - EOCDR_WITHOUT_COMMENT_SIZE; i >= 0; --i) {\n    if (getUint32LE(data, i) !== EOCDR_SIGNATURE) {\n      continue;\n    }\n\n    // 0 - End of central directory signature\n    const eocdr = new Uint8Array(data.buffer, data.byteOffset + i, data.byteLength - i);\n    // 4 - Number of this disk\n    const diskNumber = getUint16LE(eocdr, 4);\n    if (diskNumber !== 0) {\n      throw new Error(`multi-volume zip files are not supported. This is volume: ${diskNumber}`);\n    }\n\n    // 6 - Disk where central directory starts\n    // 8 - Number of central directory records on this disk\n    // 10 - Total number of central directory records\n    const entryCount = getUint16LE(eocdr, 10);\n    // 12 - Size of central directory (bytes)\n    const centralDirectorySize = getUint32LE(eocdr, 12);\n    // 16 - Offset of start of central directory, relative to start of archive\n    const centralDirectoryOffset = getUint32LE(eocdr, 16);\n    // 20 - Comment length\n    const commentLength = getUint16LE(eocdr, 20);\n    const expectedCommentLength = eocdr.length - EOCDR_WITHOUT_COMMENT_SIZE;\n    if (commentLength !== expectedCommentLength) {\n      throw new Error(`invalid comment length. expected: ${expectedCommentLength}, actual: ${commentLength}`);\n    }\n\n    // 22 - Comment\n    // the encoding is always cp437.\n    const commentBytes = new Uint8Array(eocdr.buffer, eocdr.byteOffset + 22, commentLength);\n    const comment = decodeBuffer(commentBytes);\n\n    if (entryCount === 0xffff || centralDirectoryOffset === 0xffffffff) {\n      return await readZip64CentralDirectory(reader, readStart + i, comment, commentBytes);\n    } else {\n      return await readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n    }\n  }\n\n  throw new Error('could not find end of central directory. maybe not zip file');\n}\n\nconst END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE = 0x07064b50;\n\nasync function readZip64CentralDirectory(reader, offset, comment, commentBytes) {\n  // ZIP64 Zip64 end of central directory locator\n  const zip64EocdlOffset = offset - 20;\n  const eocdl = await readAs(reader, zip64EocdlOffset, 20);\n\n  // 0 - zip64 end of central dir locator signature\n  if (getUint32LE(eocdl, 0) !== END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory locator signature');\n  }\n\n  // 4 - number of the disk with the start of the zip64 end of central directory\n  // 8 - relative offset of the zip64 end of central directory record\n  const zip64EocdrOffset = getUint64LE(eocdl, 8);\n  // 16 - total number of disks\n\n  // ZIP64 end of central directory record\n  const zip64Eocdr = await readAs(reader, zip64EocdrOffset, 56);\n\n  // 0 - zip64 end of central dir signature                           4 bytes  (0x06064b50)\n  if (getUint32LE(zip64Eocdr, 0) !== ZIP64_EOCDR_SIGNATURE) {\n    throw new Error('invalid zip64 end of central directory record signature');\n  }\n  // 4 - size of zip64 end of central directory record                8 bytes\n  // 12 - version made by                                             2 bytes\n  // 14 - version needed to extract                                   2 bytes\n  // 16 - number of this disk                                         4 bytes\n  // 20 - number of the disk with the start of the central directory  4 bytes\n  // 24 - total number of entries in the central directory on this disk         8 bytes\n  // 32 - total number of entries in the central directory            8 bytes\n  const entryCount = getUint64LE(zip64Eocdr, 32);\n  // 40 - size of the central directory                               8 bytes\n  const centralDirectorySize = getUint64LE(zip64Eocdr, 40);\n  // 48 - offset of start of central directory with respect to the starting disk number     8 bytes\n  const centralDirectoryOffset = getUint64LE(zip64Eocdr, 48);\n  // 56 - zip64 extensible data sector                                (variable size)\n  return readEntries(reader, centralDirectoryOffset, centralDirectorySize, entryCount, comment, commentBytes);\n}\n\nconst CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE = 0x02014b50;\n\nasync function readEntries(reader, centralDirectoryOffset, centralDirectorySize, rawEntryCount, comment, commentBytes) {\n  let readEntryCursor = 0;\n  const allEntriesBuffer = await readAs(reader, centralDirectoryOffset, centralDirectorySize);\n  const rawEntries = [];\n\n  for (let e = 0; e < rawEntryCount; ++e) {\n    const buffer = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + 46);\n    // 0 - Central directory file header signature\n    const signature = getUint32LE(buffer, 0);\n    if (signature !== CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE) {\n      throw new Error(`invalid central directory file header signature: 0x${signature.toString(16)}`);\n    }\n    const rawEntry = {\n      // 4 - Version made by\n      versionMadeBy: getUint16LE(buffer, 4),\n      // 6 - Version needed to extract (minimum)\n      versionNeededToExtract: getUint16LE(buffer, 6),\n      // 8 - General purpose bit flag\n      generalPurposeBitFlag: getUint16LE(buffer, 8),\n      // 10 - Compression method\n      compressionMethod: getUint16LE(buffer, 10),\n      // 12 - File last modification time\n      lastModFileTime: getUint16LE(buffer, 12),\n      // 14 - File last modification date\n      lastModFileDate: getUint16LE(buffer, 14),\n      // 16 - CRC-32\n      crc32: getUint32LE(buffer, 16),\n      // 20 - Compressed size\n      compressedSize: getUint32LE(buffer, 20),\n      // 24 - Uncompressed size\n      uncompressedSize: getUint32LE(buffer, 24),\n      // 28 - File name length (n)\n      fileNameLength: getUint16LE(buffer, 28),\n      // 30 - Extra field length (m)\n      extraFieldLength: getUint16LE(buffer, 30),\n      // 32 - File comment length (k)\n      fileCommentLength: getUint16LE(buffer, 32),\n      // 34 - Disk number where file starts\n      // 36 - Internal file attributes\n      internalFileAttributes: getUint16LE(buffer, 36),\n      // 38 - External file attributes\n      externalFileAttributes: getUint32LE(buffer, 38),\n      // 42 - Relative offset of local file header\n      relativeOffsetOfLocalHeader: getUint32LE(buffer, 42),\n    };\n\n    if (rawEntry.generalPurposeBitFlag & 0x40) {\n      throw new Error('strong encryption is not supported');\n    }\n\n    readEntryCursor += 46;\n\n    const data = allEntriesBuffer.subarray(readEntryCursor, readEntryCursor + rawEntry.fileNameLength + rawEntry.extraFieldLength + rawEntry.fileCommentLength);\n    rawEntry.nameBytes = data.slice(0, rawEntry.fileNameLength);\n    rawEntry.name = decodeBuffer(rawEntry.nameBytes);\n\n    // 46+n - Extra field\n    const fileCommentStart = rawEntry.fileNameLength + rawEntry.extraFieldLength;\n    const extraFieldBuffer = data.slice(rawEntry.fileNameLength, fileCommentStart);\n    rawEntry.extraFields = [];\n    let i = 0;\n    while (i < extraFieldBuffer.length - 3) {\n      const headerId = getUint16LE(extraFieldBuffer, i + 0);\n      const dataSize = getUint16LE(extraFieldBuffer, i + 2);\n      const dataStart = i + 4;\n      const dataEnd = dataStart + dataSize;\n      if (dataEnd > extraFieldBuffer.length) {\n        throw new Error('extra field length exceeds extra field buffer size');\n      }\n      rawEntry.extraFields.push({\n        id: headerId,\n        data: extraFieldBuffer.slice(dataStart, dataEnd),\n      });\n      i = dataEnd;\n    }\n\n    // 46+n+m - File comment\n    rawEntry.commentBytes = data.slice(fileCommentStart, fileCommentStart + rawEntry.fileCommentLength);\n    rawEntry.comment = decodeBuffer(rawEntry.commentBytes);\n\n    readEntryCursor += data.length;\n\n    if (rawEntry.uncompressedSize            === 0xffffffff ||\n        rawEntry.compressedSize              === 0xffffffff ||\n        rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n      // ZIP64 format\n      // find the Zip64 Extended Information Extra Field\n      const zip64ExtraField = rawEntry.extraFields.find(e => e.id === 0x0001);\n      if (!zip64ExtraField) {\n        throw new Error('expected zip64 extended information extra field');\n      }\n      const zip64EiefBuffer = zip64ExtraField.data;\n      let index = 0;\n      // 0 - Original Size          8 bytes\n      if (rawEntry.uncompressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include uncompressed size');\n        }\n        rawEntry.uncompressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 8 - Compressed Size        8 bytes\n      if (rawEntry.compressedSize === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include compressed size');\n        }\n        rawEntry.compressedSize = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 16 - Relative Header Offset 8 bytes\n      if (rawEntry.relativeOffsetOfLocalHeader === 0xffffffff) {\n        if (index + 8 > zip64EiefBuffer.length) {\n          throw new Error('zip64 extended information extra field does not include relative header offset');\n        }\n        rawEntry.relativeOffsetOfLocalHeader = getUint64LE(zip64EiefBuffer, index);\n        index += 8;\n      }\n      // 24 - Disk Start Number      4 bytes\n    }\n\n    // check for Info-ZIP Unicode Path Extra Field (0x7075)\n    // see https://github.com/thejoshwolfe/yauzl/issues/33\n    const nameField = rawEntry.extraFields.find(e =>\n        e.id === 0x7075 &&\n        e.data.length >= 6 && // too short to be meaningful\n        e.data[0] === 1 &&    // Version       1 byte      version of this extra field, currently 1\n        getUint32LE(e.data, 1), crc$1.unsigned(rawEntry.nameBytes)); // NameCRC32     4 bytes     File Name Field CRC32 Checksum\n                                                                   // > If the CRC check fails, this UTF-8 Path Extra Field should be\n                                                                   // > ignored and the File Name field in the header should be used instead.\n    if (nameField) {\n        // UnicodeName Variable UTF-8 version of the entry File Name\n        rawEntry.fileName = decodeBuffer(nameField.data.slice(5));\n    }\n\n    // validate file size\n    if (rawEntry.compressionMethod === 0) {\n      let expectedCompressedSize = rawEntry.uncompressedSize;\n      if ((rawEntry.generalPurposeBitFlag & 0x1) !== 0) {\n        // traditional encryption prefixes the file data with a header\n        expectedCompressedSize += 12;\n      }\n      if (rawEntry.compressedSize !== expectedCompressedSize) {\n        throw new Error(`compressed size mismatch for stored file: ${rawEntry.compressedSize} != ${expectedCompressedSize}`);\n      }\n    }\n    rawEntries.push(rawEntry);\n  }\n  const zip = {\n    comment,\n    commentBytes,\n  };\n  return {\n    zip,\n    entries: rawEntries.map(e => new ZipEntry(reader, e)),\n  };\n}\n\nasync function readEntryDataHeader(reader, rawEntry) {\n  if (rawEntry.generalPurposeBitFlag & 0x1) {\n    throw new Error('encrypted entries not supported');\n  }\n  const buffer = await readAs(reader, rawEntry.relativeOffsetOfLocalHeader, 30);\n  // note: maybe this should be passed in or cached on entry\n  // as it's async so there will be at least one tick (not sure about that)\n  const totalLength = await reader.getLength();\n\n  // 0 - Local file header signature = 0x04034b50\n  const signature = getUint32LE(buffer, 0);\n  if (signature !== 0x04034b50) {\n    throw new Error(`invalid local file header signature: 0x${signature.toString(16)}`);\n  }\n\n  // all this should be redundant\n  // 4 - Version needed to extract (minimum)\n  // 6 - General purpose bit flag\n  // 8 - Compression method\n  // 10 - File last modification time\n  // 12 - File last modification date\n  // 14 - CRC-32\n  // 18 - Compressed size\n  // 22 - Uncompressed size\n  // 26 - File name length (n)\n  const fileNameLength = getUint16LE(buffer, 26);\n  // 28 - Extra field length (m)\n  const extraFieldLength = getUint16LE(buffer, 28);\n  // 30 - File name\n  // 30+n - Extra field\n  const localFileHeaderEnd = rawEntry.relativeOffsetOfLocalHeader + buffer.length + fileNameLength + extraFieldLength;\n  let decompress;\n  if (rawEntry.compressionMethod === 0) {\n    // 0 - The file is stored (no compression)\n    decompress = false;\n  } else if (rawEntry.compressionMethod === 8) {\n    // 8 - The file is Deflated\n    decompress = true;\n  } else {\n    throw new Error(`unsupported compression method: ${rawEntry.compressionMethod}`);\n  }\n  const fileDataStart = localFileHeaderEnd;\n  const fileDataEnd = fileDataStart + rawEntry.compressedSize;\n  if (rawEntry.compressedSize !== 0) {\n    // bounds check now, because the read streams will probably not complain loud enough.\n    // since we're dealing with an unsigned offset plus an unsigned size,\n    // we only have 1 thing to check for.\n    if (fileDataEnd > totalLength) {\n      throw new Error(`file data overflows file bounds: ${fileDataStart} +  ${rawEntry.compressedSize}  > ${totalLength}`);\n    }\n  }\n  return {\n    decompress,\n    fileDataStart,\n  };\n}\n\nasync function readEntryDataAsArrayBuffer(reader, rawEntry) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const dataView = await readAs(reader, fileDataStart, rawEntry.compressedSize);\n    // make copy?\n    //\n    // 1. The source is a Blob/file. In this case we'll get back TypedArray we can just hand to the user\n    // 2. The source is a TypedArray. In this case we'll get back TypedArray that is a view into a larger buffer\n    //    but because ultimately this is used to return an ArrayBuffer to `someEntry.arrayBuffer()`\n    //    we need to return copy since we need the `ArrayBuffer`, not the TypedArray to exactly match the data.\n    //    Note: We could add another API function `bytes()` or something that returned a `Uint8Array`\n    //    instead of an `ArrayBuffer`. This would let us skip a copy here. But this case only happens for uncompressed\n    //    data. That seems like a rare enough case that adding a new API is not worth it? Or is it? A zip of jpegs or mp3s\n    //    might not be compressed. For now that's a TBD.\n    return isTypedArraySameAsArrayBuffer(dataView) ? dataView.buffer : dataView.slice().buffer;\n  }\n  // see comment in readEntryDateAsBlob\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize);\n  return result;\n}\n\nasync function readEntryDataAsBlob(reader, rawEntry, type) {\n  const {decompress, fileDataStart} = await readEntryDataHeader(reader, rawEntry);\n  if (!decompress) {\n    const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize, type);\n    if (isBlob(typedArrayOrBlob)) {\n      return typedArrayOrBlob;\n    }\n    return new Blob([isSharedArrayBuffer(typedArrayOrBlob.buffer) ? new Uint8Array(typedArrayOrBlob) : typedArrayOrBlob], {type});\n  }\n  // Here's the issue with this mess (should refactor?)\n  // if the source is a blob then we really want to pass a blob to inflateRawAsync to avoid a large\n  // copy if we're going to a worker.\n  const typedArrayOrBlob = await readAsBlobOrTypedArray(reader, fileDataStart, rawEntry.compressedSize);\n  const result = await inflateRawAsync(typedArrayOrBlob, rawEntry.uncompressedSize, type);\n  return result;\n}\n\nfunction setOptions$1(options) {\n  setOptions(options);\n}\n\nasync function unzipRaw(source) {\n  let reader;\n  if (typeof Blob !== 'undefined' && source instanceof Blob) {\n    reader = new BlobReader(source);\n  } else if (source instanceof ArrayBuffer || (source && source.buffer && source.buffer instanceof ArrayBuffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (isSharedArrayBuffer(source) || isSharedArrayBuffer(source.buffer)) {\n    reader = new ArrayBufferReader(source);\n  } else if (typeof source === 'string') {\n    const req = await fetch(source);\n    if (!req.ok) {\n      throw new Error(`failed http request ${source}, status: ${req.status}: ${req.statusText}`);\n    }\n    const blob = await req.blob();\n    reader = new BlobReader(blob);\n  } else if (typeof source.getLength === 'function' && typeof source.read === 'function') {\n    reader = source;\n  } else {\n    throw new Error('unsupported source type');\n  }\n\n  const totalLength = await reader.getLength();\n\n  if (totalLength > Number.MAX_SAFE_INTEGER) {\n    throw new Error(`file too large. size: ${totalLength}. Only file sizes up 4503599627370496 bytes are supported`);\n  }\n\n  return await findEndOfCentralDirector(reader, totalLength);\n}\n\n// If the names are not utf8 you should use unzipitRaw\nasync function unzip(source) {\n  const {zip, entries} = await unzipRaw(source);\n  return {\n    zip,\n    entries: Object.fromEntries(entries.map(v => [v.name, v])),\n  };\n}\n\nfunction cleanup$1() {\n  cleanup();\n}\n\nexport { HTTPRangeReader, cleanup$1 as cleanup, setOptions$1 as setOptions, unzip, unzipRaw };\n","'use strict';\n\nconst nameStartChar = ':A-Za-z_\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD';\nconst nameChar = nameStartChar + '\\\\-.\\\\d\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040';\nconst nameRegexp = '[' + nameStartChar + '][' + nameChar + ']*'\nconst regexName = new RegExp('^' + nameRegexp + '$');\n\nconst getAllMatches = function(string, regex) {\n  const matches = [];\n  let match = regex.exec(string);\n  while (match) {\n    const allmatches = [];\n    allmatches.startIndex = regex.lastIndex - match[0].length;\n    const len = match.length;\n    for (let index = 0; index < len; index++) {\n      allmatches.push(match[index]);\n    }\n    matches.push(allmatches);\n    match = regex.exec(string);\n  }\n  return matches;\n};\n\nconst isName = function(string) {\n  const match = regexName.exec(string);\n  return !(match === null || typeof match === 'undefined');\n};\n\nexports.isExist = function(v) {\n  return typeof v !== 'undefined';\n};\n\nexports.isEmptyObject = function(obj) {\n  return Object.keys(obj).length === 0;\n};\n\n/**\n * Copy all the properties of a into b.\n * @param {*} target\n * @param {*} a\n */\nexports.merge = function(target, a, arrayMode) {\n  if (a) {\n    const keys = Object.keys(a); // will return an array of own properties\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      if (arrayMode === 'strict') {\n        target[keys[i]] = [ a[keys[i]] ];\n      } else {\n        target[keys[i]] = a[keys[i]];\n      }\n    }\n  }\n};\n/* exports.merge =function (b,a){\n  return Object.assign(b,a);\n} */\n\nexports.getValue = function(v) {\n  if (exports.isExist(v)) {\n    return v;\n  } else {\n    return '';\n  }\n};\n\n// const fakeCall = function(a) {return a;};\n// const fakeCallNoReturn = function() {};\n\nexports.isName = isName;\nexports.getAllMatches = getAllMatches;\nexports.nameRegexp = nameRegexp;\n","'use strict';\n\nconst util = require('./util');\n\nconst defaultOptions = {\n  allowBooleanAttributes: false, //A tag can have attributes without any value\n  unpairedTags: []\n};\n\n//const tagsPattern = new RegExp(\"<\\\\/?([\\\\w:\\\\-_\\.]+)\\\\s*\\/?>\",\"g\");\nexports.validate = function (xmlData, options) {\n  options = Object.assign({}, defaultOptions, options);\n\n  //xmlData = xmlData.replace(/(\\r\\n|\\n|\\r)/gm,\"\");//make it single line\n  //xmlData = xmlData.replace(/(^\\s*<\\?xml.*?\\?>)/g,\"\");//Remove XML starting tag\n  //xmlData = xmlData.replace(/(<!DOCTYPE[\\s\\w\\\"\\.\\/\\-\\:]+(\\[.*\\])*\\s*>)/g,\"\");//Remove DOCTYPE\n  const tags = [];\n  let tagFound = false;\n\n  //indicates that the root tag has been closed (aka. depth 0 has been reached)\n  let reachedRoot = false;\n\n  if (xmlData[0] === '\\ufeff') {\n    // check for byte order mark (BOM)\n    xmlData = xmlData.substr(1);\n  }\n  \n  for (let i = 0; i < xmlData.length; i++) {\n\n    if (xmlData[i] === '<' && xmlData[i+1] === '?') {\n      i+=2;\n      i = readPI(xmlData,i);\n      if (i.err) return i;\n    }else if (xmlData[i] === '<') {\n      //starting of tag\n      //read until you reach to '>' avoiding any '>' in attribute value\n      let tagStartPos = i;\n      i++;\n      \n      if (xmlData[i] === '!') {\n        i = readCommentAndCDATA(xmlData, i);\n        continue;\n      } else {\n        let closingTag = false;\n        if (xmlData[i] === '/') {\n          //closing tag\n          closingTag = true;\n          i++;\n        }\n        //read tagname\n        let tagName = '';\n        for (; i < xmlData.length &&\n          xmlData[i] !== '>' &&\n          xmlData[i] !== ' ' &&\n          xmlData[i] !== '\\t' &&\n          xmlData[i] !== '\\n' &&\n          xmlData[i] !== '\\r'; i++\n        ) {\n          tagName += xmlData[i];\n        }\n        tagName = tagName.trim();\n        //console.log(tagName);\n\n        if (tagName[tagName.length - 1] === '/') {\n          //self closing tag without attributes\n          tagName = tagName.substring(0, tagName.length - 1);\n          //continue;\n          i--;\n        }\n        if (!validateTagName(tagName)) {\n          let msg;\n          if (tagName.trim().length === 0) {\n            msg = \"Invalid space after '<'.\";\n          } else {\n            msg = \"Tag '\"+tagName+\"' is an invalid name.\";\n          }\n          return getErrorObject('InvalidTag', msg, getLineNumberForPosition(xmlData, i));\n        }\n\n        const result = readAttributeStr(xmlData, i);\n        if (result === false) {\n          return getErrorObject('InvalidAttr', \"Attributes for '\"+tagName+\"' have open quote.\", getLineNumberForPosition(xmlData, i));\n        }\n        let attrStr = result.value;\n        i = result.index;\n\n        if (attrStr[attrStr.length - 1] === '/') {\n          //self closing tag\n          const attrStrStart = i - attrStr.length;\n          attrStr = attrStr.substring(0, attrStr.length - 1);\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid === true) {\n            tagFound = true;\n            //continue; //text may presents after self closing tag\n          } else {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, attrStrStart + isValid.err.line));\n          }\n        } else if (closingTag) {\n          if (!result.tagClosed) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' doesn't have proper closing.\", getLineNumberForPosition(xmlData, i));\n          } else if (attrStr.trim().length > 0) {\n            return getErrorObject('InvalidTag', \"Closing tag '\"+tagName+\"' can't have attributes or invalid starting.\", getLineNumberForPosition(xmlData, tagStartPos));\n          } else {\n            const otg = tags.pop();\n            if (tagName !== otg.tagName) {\n              let openPos = getLineNumberForPosition(xmlData, otg.tagStartPos);\n              return getErrorObject('InvalidTag',\n                \"Expected closing tag '\"+otg.tagName+\"' (opened in line \"+openPos.line+\", col \"+openPos.col+\") instead of closing tag '\"+tagName+\"'.\",\n                getLineNumberForPosition(xmlData, tagStartPos));\n            }\n\n            //when there are no more tags, we reached the root level.\n            if (tags.length == 0) {\n              reachedRoot = true;\n            }\n          }\n        } else {\n          const isValid = validateAttributeString(attrStr, options);\n          if (isValid !== true) {\n            //the result from the nested function returns the position of the error within the attribute\n            //in order to get the 'true' error line, we need to calculate the position where the attribute begins (i - attrStr.length) and then add the position within the attribute\n            //this gives us the absolute index in the entire xml, which we can use to find the line at last\n            return getErrorObject(isValid.err.code, isValid.err.msg, getLineNumberForPosition(xmlData, i - attrStr.length + isValid.err.line));\n          }\n\n          //if the root level has been reached before ...\n          if (reachedRoot === true) {\n            return getErrorObject('InvalidXml', 'Multiple possible root nodes found.', getLineNumberForPosition(xmlData, i));\n          } else if(options.unpairedTags.indexOf(tagName) !== -1){\n            //don't push into stack\n          } else {\n            tags.push({tagName, tagStartPos});\n          }\n          tagFound = true;\n        }\n\n        //skip tag text value\n        //It may include comments and CDATA value\n        for (i++; i < xmlData.length; i++) {\n          if (xmlData[i] === '<') {\n            if (xmlData[i + 1] === '!') {\n              //comment or CADATA\n              i++;\n              i = readCommentAndCDATA(xmlData, i);\n              continue;\n            } else if (xmlData[i+1] === '?') {\n              i = readPI(xmlData, ++i);\n              if (i.err) return i;\n            } else{\n              break;\n            }\n          } else if (xmlData[i] === '&') {\n            const afterAmp = validateAmpersand(xmlData, i);\n            if (afterAmp == -1)\n              return getErrorObject('InvalidChar', \"char '&' is not expected.\", getLineNumberForPosition(xmlData, i));\n            i = afterAmp;\n          }else{\n            if (reachedRoot === true && !isWhiteSpace(xmlData[i])) {\n              return getErrorObject('InvalidXml', \"Extra text at the end\", getLineNumberForPosition(xmlData, i));\n            }\n          }\n        } //end of reading tag text value\n        if (xmlData[i] === '<') {\n          i--;\n        }\n      }\n    } else {\n      if ( isWhiteSpace(xmlData[i])) {\n        continue;\n      }\n      return getErrorObject('InvalidChar', \"char '\"+xmlData[i]+\"' is not expected.\", getLineNumberForPosition(xmlData, i));\n    }\n  }\n\n  if (!tagFound) {\n    return getErrorObject('InvalidXml', 'Start tag expected.', 1);\n  }else if (tags.length == 1) {\n      return getErrorObject('InvalidTag', \"Unclosed tag '\"+tags[0].tagName+\"'.\", getLineNumberForPosition(xmlData, tags[0].tagStartPos));\n  }else if (tags.length > 0) {\n      return getErrorObject('InvalidXml', \"Invalid '\"+\n          JSON.stringify(tags.map(t => t.tagName), null, 4).replace(/\\r?\\n/g, '')+\n          \"' found.\", {line: 1, col: 1});\n  }\n\n  return true;\n};\n\nfunction isWhiteSpace(char){\n  return char === ' ' || char === '\\t' || char === '\\n'  || char === '\\r';\n}\n/**\n * Read Processing insstructions and skip\n * @param {*} xmlData\n * @param {*} i\n */\nfunction readPI(xmlData, i) {\n  const start = i;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] == '?' || xmlData[i] == ' ') {\n      //tagname\n      const tagname = xmlData.substr(start, i - start);\n      if (i > 5 && tagname === 'xml') {\n        return getErrorObject('InvalidXml', 'XML declaration allowed only at the start of the document.', getLineNumberForPosition(xmlData, i));\n      } else if (xmlData[i] == '?' && xmlData[i + 1] == '>') {\n        //check if valid attribut string\n        i++;\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n  return i;\n}\n\nfunction readCommentAndCDATA(xmlData, i) {\n  if (xmlData.length > i + 5 && xmlData[i + 1] === '-' && xmlData[i + 2] === '-') {\n    //comment\n    for (i += 3; i < xmlData.length; i++) {\n      if (xmlData[i] === '-' && xmlData[i + 1] === '-' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  } else if (\n    xmlData.length > i + 8 &&\n    xmlData[i + 1] === 'D' &&\n    xmlData[i + 2] === 'O' &&\n    xmlData[i + 3] === 'C' &&\n    xmlData[i + 4] === 'T' &&\n    xmlData[i + 5] === 'Y' &&\n    xmlData[i + 6] === 'P' &&\n    xmlData[i + 7] === 'E'\n  ) {\n    let angleBracketsCount = 1;\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === '<') {\n        angleBracketsCount++;\n      } else if (xmlData[i] === '>') {\n        angleBracketsCount--;\n        if (angleBracketsCount === 0) {\n          break;\n        }\n      }\n    }\n  } else if (\n    xmlData.length > i + 9 &&\n    xmlData[i + 1] === '[' &&\n    xmlData[i + 2] === 'C' &&\n    xmlData[i + 3] === 'D' &&\n    xmlData[i + 4] === 'A' &&\n    xmlData[i + 5] === 'T' &&\n    xmlData[i + 6] === 'A' &&\n    xmlData[i + 7] === '['\n  ) {\n    for (i += 8; i < xmlData.length; i++) {\n      if (xmlData[i] === ']' && xmlData[i + 1] === ']' && xmlData[i + 2] === '>') {\n        i += 2;\n        break;\n      }\n    }\n  }\n\n  return i;\n}\n\nconst doubleQuote = '\"';\nconst singleQuote = \"'\";\n\n/**\n * Keep reading xmlData until '<' is found outside the attribute value.\n * @param {string} xmlData\n * @param {number} i\n */\nfunction readAttributeStr(xmlData, i) {\n  let attrStr = '';\n  let startChar = '';\n  let tagClosed = false;\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === doubleQuote || xmlData[i] === singleQuote) {\n      if (startChar === '') {\n        startChar = xmlData[i];\n      } else if (startChar !== xmlData[i]) {\n        //if vaue is enclosed with double quote then single quotes are allowed inside the value and vice versa\n      } else {\n        startChar = '';\n      }\n    } else if (xmlData[i] === '>') {\n      if (startChar === '') {\n        tagClosed = true;\n        break;\n      }\n    }\n    attrStr += xmlData[i];\n  }\n  if (startChar !== '') {\n    return false;\n  }\n\n  return {\n    value: attrStr,\n    index: i,\n    tagClosed: tagClosed\n  };\n}\n\n/**\n * Select all the attributes whether valid or invalid.\n */\nconst validAttrStrRegxp = new RegExp('(\\\\s*)([^\\\\s=]+)(\\\\s*=)?(\\\\s*([\\'\"])(([\\\\s\\\\S])*?)\\\\5)?', 'g');\n\n//attr, =\"sd\", a=\"amit's\", a=\"sd\"b=\"saf\", ab  cd=\"\"\n\nfunction validateAttributeString(attrStr, options) {\n  //console.log(\"start:\"+attrStr+\":end\");\n\n  //if(attrStr.trim().length === 0) return true; //empty string\n\n  const matches = util.getAllMatches(attrStr, validAttrStrRegxp);\n  const attrNames = {};\n\n  for (let i = 0; i < matches.length; i++) {\n    if (matches[i][1].length === 0) {\n      //nospace before attribute name: a=\"sd\"b=\"saf\"\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' has no space in starting.\", getPositionFromMatch(matches[i]))\n    } else if (matches[i][3] !== undefined && matches[i][4] === undefined) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+matches[i][2]+\"' is without value.\", getPositionFromMatch(matches[i]));\n    } else if (matches[i][3] === undefined && !options.allowBooleanAttributes) {\n      //independent attribute: ab\n      return getErrorObject('InvalidAttr', \"boolean attribute '\"+matches[i][2]+\"' is not allowed.\", getPositionFromMatch(matches[i]));\n    }\n    /* else if(matches[i][6] === undefined){//attribute without value: ab=\n                    return { err: { code:\"InvalidAttr\",msg:\"attribute \" + matches[i][2] + \" has no value assigned.\"}};\n                } */\n    const attrName = matches[i][2];\n    if (!validateAttrName(attrName)) {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is an invalid name.\", getPositionFromMatch(matches[i]));\n    }\n    if (!attrNames.hasOwnProperty(attrName)) {\n      //check for duplicate attribute.\n      attrNames[attrName] = 1;\n    } else {\n      return getErrorObject('InvalidAttr', \"Attribute '\"+attrName+\"' is repeated.\", getPositionFromMatch(matches[i]));\n    }\n  }\n\n  return true;\n}\n\nfunction validateNumberAmpersand(xmlData, i) {\n  let re = /\\d/;\n  if (xmlData[i] === 'x') {\n    i++;\n    re = /[\\da-fA-F]/;\n  }\n  for (; i < xmlData.length; i++) {\n    if (xmlData[i] === ';')\n      return i;\n    if (!xmlData[i].match(re))\n      break;\n  }\n  return -1;\n}\n\nfunction validateAmpersand(xmlData, i) {\n  // https://www.w3.org/TR/xml/#dt-charref\n  i++;\n  if (xmlData[i] === ';')\n    return -1;\n  if (xmlData[i] === '#') {\n    i++;\n    return validateNumberAmpersand(xmlData, i);\n  }\n  let count = 0;\n  for (; i < xmlData.length; i++, count++) {\n    if (xmlData[i].match(/\\w/) && count < 20)\n      continue;\n    if (xmlData[i] === ';')\n      break;\n    return -1;\n  }\n  return i;\n}\n\nfunction getErrorObject(code, message, lineNumber) {\n  return {\n    err: {\n      code: code,\n      msg: message,\n      line: lineNumber.line || lineNumber,\n      col: lineNumber.col,\n    },\n  };\n}\n\nfunction validateAttrName(attrName) {\n  return util.isName(attrName);\n}\n\n// const startsWithXML = /^xml/i;\n\nfunction validateTagName(tagname) {\n  return util.isName(tagname) /* && !tagname.match(startsWithXML) */;\n}\n\n//this function returns the line number for the character at the given index\nfunction getLineNumberForPosition(xmlData, index) {\n  const lines = xmlData.substring(0, index).split(/\\r?\\n/);\n  return {\n    line: lines.length,\n\n    // column number is last line's length + 1, because column numbering starts at 1:\n    col: lines[lines.length - 1].length + 1\n  };\n}\n\n//this function returns the position of the first character of match within attrStr\nfunction getPositionFromMatch(match) {\n  return match.startIndex + match[1].length;\n}\n","\nconst defaultOptions = {\n    preserveOrder: false,\n    attributeNamePrefix: '@_',\n    attributesGroupName: false,\n    textNodeName: '#text',\n    ignoreAttributes: true,\n    removeNSPrefix: false, // remove NS from tag name or attribute name if true\n    allowBooleanAttributes: false, //a tag can have attributes without any value\n    //ignoreRootElement : false,\n    parseTagValue: true,\n    parseAttributeValue: false,\n    trimValues: true, //Trim string values of tag and attributes\n    cdataPropName: false,\n    numberParseOptions: {\n      hex: true,\n      leadingZeros: true,\n      eNotation: true\n    },\n    tagValueProcessor: function(tagName, val) {\n      return val;\n    },\n    attributeValueProcessor: function(attrName, val) {\n      return val;\n    },\n    stopNodes: [], //nested tags will not be parsed even for errors\n    alwaysCreateTextNode: false,\n    isArray: () => false,\n    commentPropName: false,\n    unpairedTags: [],\n    processEntities: true,\n    htmlEntities: false,\n    ignoreDeclaration: false,\n    ignorePiTags: false,\n    transformTagName: false,\n    transformAttributeName: false,\n    updateTag: function(tagName, jPath, attrs){\n      return tagName\n    },\n    // skipEmptyListItem: false\n};\n   \nconst buildOptions = function(options) {\n    return Object.assign({}, defaultOptions, options);\n};\n\nexports.buildOptions = buildOptions;\nexports.defaultOptions = defaultOptions;","'use strict';\n\nclass XmlNode{\n  constructor(tagname) {\n    this.tagname = tagname;\n    this.child = []; //nested tags, text, cdata, comments in order\n    this[\":@\"] = {}; //attributes map\n  }\n  add(key,val){\n    // this.child.push( {name : key, val: val, isCdata: isCdata });\n    if(key === \"__proto__\") key = \"#__proto__\";\n    this.child.push( {[key]: val });\n  }\n  addChild(node) {\n    if(node.tagname === \"__proto__\") node.tagname = \"#__proto__\";\n    if(node[\":@\"] && Object.keys(node[\":@\"]).length > 0){\n      this.child.push( { [node.tagname]: node.child, [\":@\"]: node[\":@\"] });\n    }else{\n      this.child.push( { [node.tagname]: node.child });\n    }\n  };\n};\n\n\nmodule.exports = XmlNode;","//TODO: handle comments\nfunction readDocType(xmlData, i){\n    \n    const entities = {};\n    if( xmlData[i + 3] === 'O' &&\n         xmlData[i + 4] === 'C' &&\n         xmlData[i + 5] === 'T' &&\n         xmlData[i + 6] === 'Y' &&\n         xmlData[i + 7] === 'P' &&\n         xmlData[i + 8] === 'E')\n    {    \n        i = i+9;\n        let angleBracketsCount = 1;\n        let hasBody = false, comment = false;\n        let exp = \"\";\n        for(;i<xmlData.length;i++){\n            if (xmlData[i] === '<' && !comment) { //Determine the tag type\n                if( hasBody && isEntity(xmlData, i)){\n                    i += 7; \n                    [entityName, val,i] = readEntityExp(xmlData,i+1);\n                    if(val.indexOf(\"&\") === -1) //Parameter entities are not supported\n                        entities[ entityName ] = {\n                            regx : RegExp( `&${entityName};`,\"g\"),\n                            val: val\n                        };\n                }\n                else if( hasBody && isElement(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isAttlist(xmlData, i))  i += 8;//Not supported\n                else if( hasBody && isNotation(xmlData, i)) i += 9;//Not supported\n                else if( isComment)                         comment = true;\n                else                                        throw new Error(\"Invalid DOCTYPE\");\n\n                angleBracketsCount++;\n                exp = \"\";\n            } else if (xmlData[i] === '>') { //Read tag content\n                if(comment){\n                    if( xmlData[i - 1] === \"-\" && xmlData[i - 2] === \"-\"){\n                        comment = false;\n                        angleBracketsCount--;\n                    }\n                }else{\n                    angleBracketsCount--;\n                }\n                if (angleBracketsCount === 0) {\n                  break;\n                }\n            }else if( xmlData[i] === '['){\n                hasBody = true;\n            }else{\n                exp += xmlData[i];\n            }\n        }\n        if(angleBracketsCount !== 0){\n            throw new Error(`Unclosed DOCTYPE`);\n        }\n    }else{\n        throw new Error(`Invalid Tag instead of DOCTYPE`);\n    }\n    return {entities, i};\n}\n\nfunction readEntityExp(xmlData,i){\n    //External entities are not supported\n    //    <!ENTITY ext SYSTEM \"http://normal-website.com\" >\n\n    //Parameter entities are not supported\n    //    <!ENTITY entityname \"&anotherElement;\">\n\n    //Internal entities are supported\n    //    <!ENTITY entityname \"replacement text\">\n    \n    //read EntityName\n    let entityName = \"\";\n    for (; i < xmlData.length && (xmlData[i] !== \"'\" && xmlData[i] !== '\"' ); i++) {\n        // if(xmlData[i] === \" \") continue;\n        // else \n        entityName += xmlData[i];\n    }\n    entityName = entityName.trim();\n    if(entityName.indexOf(\" \") !== -1) throw new Error(\"External entites are not supported\");\n\n    //read Entity Value\n    const startChar = xmlData[i++];\n    let val = \"\"\n    for (; i < xmlData.length && xmlData[i] !== startChar ; i++) {\n        val += xmlData[i];\n    }\n    return [entityName, val, i];\n}\n\nfunction isComment(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === '-' &&\n    xmlData[i+3] === '-') return true\n    return false\n}\nfunction isEntity(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'N' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'I' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'Y') return true\n    return false\n}\nfunction isElement(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'E' &&\n    xmlData[i+3] === 'L' &&\n    xmlData[i+4] === 'E' &&\n    xmlData[i+5] === 'M' &&\n    xmlData[i+6] === 'E' &&\n    xmlData[i+7] === 'N' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\n\nfunction isAttlist(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'A' &&\n    xmlData[i+3] === 'T' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'L' &&\n    xmlData[i+6] === 'I' &&\n    xmlData[i+7] === 'S' &&\n    xmlData[i+8] === 'T') return true\n    return false\n}\nfunction isNotation(xmlData, i){\n    if(xmlData[i+1] === '!' &&\n    xmlData[i+2] === 'N' &&\n    xmlData[i+3] === 'O' &&\n    xmlData[i+4] === 'T' &&\n    xmlData[i+5] === 'A' &&\n    xmlData[i+6] === 'T' &&\n    xmlData[i+7] === 'I' &&\n    xmlData[i+8] === 'O' &&\n    xmlData[i+9] === 'N') return true\n    return false\n}\n\nmodule.exports = readDocType;","const hexRegex = /^[-+]?0x[a-fA-F0-9]+$/;\nconst numRegex = /^([\\-\\+])?(0*)(\\.[0-9]+([eE]\\-?[0-9]+)?|[0-9]+(\\.[0-9]+([eE]\\-?[0-9]+)?)?)$/;\n// const octRegex = /0x[a-z0-9]+/;\n// const binRegex = /0x[a-z0-9]+/;\n\n\n//polyfill\nif (!Number.parseInt && window.parseInt) {\n    Number.parseInt = window.parseInt;\n}\nif (!Number.parseFloat && window.parseFloat) {\n    Number.parseFloat = window.parseFloat;\n}\n\n  \nconst consider = {\n    hex :  true,\n    leadingZeros: true,\n    decimalPoint: \"\\.\",\n    eNotation: true\n    //skipLike: /regex/\n};\n\nfunction toNumber(str, options = {}){\n    // const options = Object.assign({}, consider);\n    // if(opt.leadingZeros === false){\n    //     options.leadingZeros = false;\n    // }else if(opt.hex === false){\n    //     options.hex = false;\n    // }\n\n    options = Object.assign({}, consider, options );\n    if(!str || typeof str !== \"string\" ) return str;\n    \n    let trimmedStr  = str.trim();\n    // if(trimmedStr === \"0.0\") return 0;\n    // else if(trimmedStr === \"+0.0\") return 0;\n    // else if(trimmedStr === \"-0.0\") return -0;\n\n    if(options.skipLike !== undefined && options.skipLike.test(trimmedStr)) return str;\n    else if (options.hex && hexRegex.test(trimmedStr)) {\n        return Number.parseInt(trimmedStr, 16);\n    // } else if (options.parseOct && octRegex.test(str)) {\n    //     return Number.parseInt(val, 8);\n    // }else if (options.parseBin && binRegex.test(str)) {\n    //     return Number.parseInt(val, 2);\n    }else{\n        //separate negative sign, leading zeros, and rest number\n        const match = numRegex.exec(trimmedStr);\n        if(match){\n            const sign = match[1];\n            const leadingZeros = match[2];\n            let numTrimmedByZeros = trimZeros(match[3]); //complete num without leading zeros\n            //trim ending zeros for floating number\n            \n            const eNotation = match[4] || match[6];\n            if(!options.leadingZeros && leadingZeros.length > 0 && sign && trimmedStr[2] !== \".\") return str; //-0123\n            else if(!options.leadingZeros && leadingZeros.length > 0 && !sign && trimmedStr[1] !== \".\") return str; //0123\n            else{//no leading zeros or leading zeros are allowed\n                const num = Number(trimmedStr);\n                const numStr = \"\" + num;\n                if(numStr.search(/[eE]/) !== -1){ //given number is long and parsed to eNotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(eNotation){ //given number has enotation\n                    if(options.eNotation) return num;\n                    else return str;\n                }else if(trimmedStr.indexOf(\".\") !== -1){ //floating number\n                    // const decimalPart = match[5].substr(1);\n                    // const intPart = trimmedStr.substr(0,trimmedStr.indexOf(\".\"));\n\n                    \n                    // const p = numStr.indexOf(\".\");\n                    // const givenIntPart = numStr.substr(0,p);\n                    // const givenDecPart = numStr.substr(p+1);\n                    if(numStr === \"0\" && (numTrimmedByZeros === \"\") ) return num; //0.0\n                    else if(numStr === numTrimmedByZeros) return num; //0.456. 0.79000\n                    else if( sign && numStr === \"-\"+numTrimmedByZeros) return num;\n                    else return str;\n                }\n                \n                if(leadingZeros){\n                    // if(numTrimmedByZeros === numStr){\n                    //     if(options.leadingZeros) return num;\n                    //     else return str;\n                    // }else return str;\n                    if(numTrimmedByZeros === numStr) return num;\n                    else if(sign+numTrimmedByZeros === numStr) return num;\n                    else return str;\n                }\n\n                if(trimmedStr === numStr) return num;\n                else if(trimmedStr === sign+numStr) return num;\n                // else{\n                //     //number with +/- sign\n                //     trimmedStr.test(/[-+][0-9]);\n\n                // }\n                return str;\n            }\n            // else if(!eNotation && trimmedStr && trimmedStr !== Number(trimmedStr) ) return str;\n            \n        }else{ //non-numeric string\n            return str;\n        }\n    }\n}\n\n/**\n * \n * @param {string} numStr without leading zeros\n * @returns \n */\nfunction trimZeros(numStr){\n    if(numStr && numStr.indexOf(\".\") !== -1){//float\n        numStr = numStr.replace(/0+$/, \"\"); //remove ending zeros\n        if(numStr === \".\")  numStr = \"0\";\n        else if(numStr[0] === \".\")  numStr = \"0\"+numStr;\n        else if(numStr[numStr.length-1] === \".\")  numStr = numStr.substr(0,numStr.length-1);\n        return numStr;\n    }\n    return numStr;\n}\nmodule.exports = toNumber\n","'use strict';\n///@ts-check\n\nconst util = require('../util');\nconst xmlNode = require('./xmlNode');\nconst readDocType = require(\"./DocTypeReader\");\nconst toNumber = require(\"strnum\");\n\nconst regx =\n  '<((!\\\\[CDATA\\\\[([\\\\s\\\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\\\/)(NAME)\\\\s*>))([^<]*)'\n  .replace(/NAME/g, util.nameRegexp);\n\n//const tagsRegx = new RegExp(\"<(\\\\/?[\\\\w:\\\\-\\._]+)([^>]*)>(\\\\s*\"+cdataRegx+\")*([^<]+)?\",\"g\");\n//const tagsRegx = new RegExp(\"<(\\\\/?)((\\\\w*:)?([\\\\w:\\\\-\\._]+))([^>]*)>([^<]*)(\"+cdataRegx+\"([^<]*))*([^<]+)?\",\"g\");\n\nclass OrderedObjParser{\n  constructor(options){\n    this.options = options;\n    this.currentNode = null;\n    this.tagsNodeStack = [];\n    this.docTypeEntities = {};\n    this.lastEntities = {\n      \"apos\" : { regex: /&(apos|#39|#x27);/g, val : \"'\"},\n      \"gt\" : { regex: /&(gt|#62|#x3E);/g, val : \">\"},\n      \"lt\" : { regex: /&(lt|#60|#x3C);/g, val : \"<\"},\n      \"quot\" : { regex: /&(quot|#34|#x22);/g, val : \"\\\"\"},\n    };\n    this.ampEntity = { regex: /&(amp|#38|#x26);/g, val : \"&\"};\n    this.htmlEntities = {\n      \"space\": { regex: /&(nbsp|#160);/g, val: \" \" },\n      // \"lt\" : { regex: /&(lt|#60);/g, val: \"<\" },\n      // \"gt\" : { regex: /&(gt|#62);/g, val: \">\" },\n      // \"amp\" : { regex: /&(amp|#38);/g, val: \"&\" },\n      // \"quot\" : { regex: /&(quot|#34);/g, val: \"\\\"\" },\n      // \"apos\" : { regex: /&(apos|#39);/g, val: \"'\" },\n      \"cent\" : { regex: /&(cent|#162);/g, val: \"\" },\n      \"pound\" : { regex: /&(pound|#163);/g, val: \"\" },\n      \"yen\" : { regex: /&(yen|#165);/g, val: \"\" },\n      \"euro\" : { regex: /&(euro|#8364);/g, val: \"\" },\n      \"copyright\" : { regex: /&(copy|#169);/g, val: \"\" },\n      \"reg\" : { regex: /&(reg|#174);/g, val: \"\" },\n      \"inr\" : { regex: /&(inr|#8377);/g, val: \"\" },\n    };\n    this.addExternalEntities = addExternalEntities;\n    this.parseXml = parseXml;\n    this.parseTextData = parseTextData;\n    this.resolveNameSpace = resolveNameSpace;\n    this.buildAttributesMap = buildAttributesMap;\n    this.isItStopNode = isItStopNode;\n    this.replaceEntitiesValue = replaceEntitiesValue;\n    this.readStopNodeData = readStopNodeData;\n    this.saveTextToParentTag = saveTextToParentTag;\n    this.addChild = addChild;\n  }\n\n}\n\nfunction addExternalEntities(externalEntities){\n  const entKeys = Object.keys(externalEntities);\n  for (let i = 0; i < entKeys.length; i++) {\n    const ent = entKeys[i];\n    this.lastEntities[ent] = {\n       regex: new RegExp(\"&\"+ent+\";\",\"g\"),\n       val : externalEntities[ent]\n    }\n  }\n}\n\n/**\n * @param {string} val\n * @param {string} tagName\n * @param {string} jPath\n * @param {boolean} dontTrim\n * @param {boolean} hasAttributes\n * @param {boolean} isLeafNode\n * @param {boolean} escapeEntities\n */\nfunction parseTextData(val, tagName, jPath, dontTrim, hasAttributes, isLeafNode, escapeEntities) {\n  if (val !== undefined) {\n    if (this.options.trimValues && !dontTrim) {\n      val = val.trim();\n    }\n    if(val.length > 0){\n      if(!escapeEntities) val = this.replaceEntitiesValue(val);\n      \n      const newval = this.options.tagValueProcessor(tagName, val, jPath, hasAttributes, isLeafNode);\n      if(newval === null || newval === undefined){\n        //don't parse\n        return val;\n      }else if(typeof newval !== typeof val || newval !== val){\n        //overwrite\n        return newval;\n      }else if(this.options.trimValues){\n        return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n      }else{\n        const trimmedVal = val.trim();\n        if(trimmedVal === val){\n          return parseValue(val, this.options.parseTagValue, this.options.numberParseOptions);\n        }else{\n          return val;\n        }\n      }\n    }\n  }\n}\n\nfunction resolveNameSpace(tagname) {\n  if (this.options.removeNSPrefix) {\n    const tags = tagname.split(':');\n    const prefix = tagname.charAt(0) === '/' ? '/' : '';\n    if (tags[0] === 'xmlns') {\n      return '';\n    }\n    if (tags.length === 2) {\n      tagname = prefix + tags[1];\n    }\n  }\n  return tagname;\n}\n\n//TODO: change regex to capture NS\n//const attrsRegx = new RegExp(\"([\\\\w\\\\-\\\\.\\\\:]+)\\\\s*=\\\\s*(['\\\"])((.|\\n)*?)\\\\2\",\"gm\");\nconst attrsRegx = new RegExp('([^\\\\s=]+)\\\\s*(=\\\\s*([\\'\"])([\\\\s\\\\S]*?)\\\\3)?', 'gm');\n\nfunction buildAttributesMap(attrStr, jPath, tagName) {\n  if (!this.options.ignoreAttributes && typeof attrStr === 'string') {\n    // attrStr = attrStr.replace(/\\r?\\n/g, ' ');\n    //attrStr = attrStr || attrStr.trim();\n\n    const matches = util.getAllMatches(attrStr, attrsRegx);\n    const len = matches.length; //don't make it inline\n    const attrs = {};\n    for (let i = 0; i < len; i++) {\n      const attrName = this.resolveNameSpace(matches[i][1]);\n      let oldVal = matches[i][4];\n      let aName = this.options.attributeNamePrefix + attrName;\n      if (attrName.length) {\n        if (this.options.transformAttributeName) {\n          aName = this.options.transformAttributeName(aName);\n        }\n        if(aName === \"__proto__\") aName  = \"#__proto__\";\n        if (oldVal !== undefined) {\n          if (this.options.trimValues) {\n            oldVal = oldVal.trim();\n          }\n          oldVal = this.replaceEntitiesValue(oldVal);\n          const newVal = this.options.attributeValueProcessor(attrName, oldVal, jPath);\n          if(newVal === null || newVal === undefined){\n            //don't parse\n            attrs[aName] = oldVal;\n          }else if(typeof newVal !== typeof oldVal || newVal !== oldVal){\n            //overwrite\n            attrs[aName] = newVal;\n          }else{\n            //parse\n            attrs[aName] = parseValue(\n              oldVal,\n              this.options.parseAttributeValue,\n              this.options.numberParseOptions\n            );\n          }\n        } else if (this.options.allowBooleanAttributes) {\n          attrs[aName] = true;\n        }\n      }\n    }\n    if (!Object.keys(attrs).length) {\n      return;\n    }\n    if (this.options.attributesGroupName) {\n      const attrCollection = {};\n      attrCollection[this.options.attributesGroupName] = attrs;\n      return attrCollection;\n    }\n    return attrs\n  }\n}\n\nconst parseXml = function(xmlData) {\n  xmlData = xmlData.replace(/\\r\\n?/g, \"\\n\"); //TODO: remove this line\n  const xmlObj = new xmlNode('!xml');\n  let currentNode = xmlObj;\n  let textData = \"\";\n  let jPath = \"\";\n  for(let i=0; i< xmlData.length; i++){//for each char in XML data\n    const ch = xmlData[i];\n    if(ch === '<'){\n      // const nextIndex = i+1;\n      // const _2ndChar = xmlData[nextIndex];\n      if( xmlData[i+1] === '/') {//Closing Tag\n        const closeIndex = findClosingIndex(xmlData, \">\", i, \"Closing Tag is not closed.\")\n        let tagName = xmlData.substring(i+2,closeIndex).trim();\n\n        if(this.options.removeNSPrefix){\n          const colonIndex = tagName.indexOf(\":\");\n          if(colonIndex !== -1){\n            tagName = tagName.substr(colonIndex+1);\n          }\n        }\n\n        if(this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n\n        if(currentNode){\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        }\n\n        //check if last tag of nested tag was unpaired tag\n        const lastTagName = jPath.substring(jPath.lastIndexOf(\".\")+1);\n        if(tagName && this.options.unpairedTags.indexOf(tagName) !== -1 ){\n          throw new Error(`Unpaired tag can not be used as closing tag: </${tagName}>`);\n        }\n        let propIndex = 0\n        if(lastTagName && this.options.unpairedTags.indexOf(lastTagName) !== -1 ){\n          propIndex = jPath.lastIndexOf('.', jPath.lastIndexOf('.')-1)\n          this.tagsNodeStack.pop();\n        }else{\n          propIndex = jPath.lastIndexOf(\".\");\n        }\n        jPath = jPath.substring(0, propIndex);\n\n        currentNode = this.tagsNodeStack.pop();//avoid recursion, set the parent tag scope\n        textData = \"\";\n        i = closeIndex;\n      } else if( xmlData[i+1] === '?') {\n\n        let tagData = readTagExp(xmlData,i, false, \"?>\");\n        if(!tagData) throw new Error(\"Pi Tag is not closed.\");\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n        if( (this.options.ignoreDeclaration && tagData.tagName === \"?xml\") || this.options.ignorePiTags){\n\n        }else{\n  \n          const childNode = new xmlNode(tagData.tagName);\n          childNode.add(this.options.textNodeName, \"\");\n          \n          if(tagData.tagName !== tagData.tagExp && tagData.attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagData.tagExp, jPath, tagData.tagName);\n          }\n          this.addChild(currentNode, childNode, jPath)\n\n        }\n\n\n        i = tagData.closeIndex + 1;\n      } else if(xmlData.substr(i + 1, 3) === '!--') {\n        const endIndex = findClosingIndex(xmlData, \"-->\", i+4, \"Comment is not closed.\")\n        if(this.options.commentPropName){\n          const comment = xmlData.substring(i + 4, endIndex - 2);\n\n          textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n          currentNode.add(this.options.commentPropName, [ { [this.options.textNodeName] : comment } ]);\n        }\n        i = endIndex;\n      } else if( xmlData.substr(i + 1, 2) === '!D') {\n        const result = readDocType(xmlData, i);\n        this.docTypeEntities = result.entities;\n        i = result.i;\n      }else if(xmlData.substr(i + 1, 2) === '![') {\n        const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"CDATA is not closed.\") - 2;\n        const tagExp = xmlData.substring(i + 9,closeIndex);\n\n        textData = this.saveTextToParentTag(textData, currentNode, jPath);\n\n        //cdata should be set even if it is 0 length string\n        if(this.options.cdataPropName){\n          // let val = this.parseTextData(tagExp, this.options.cdataPropName, jPath + \".\" + this.options.cdataPropName, true, false, true);\n          // if(!val) val = \"\";\n          currentNode.add(this.options.cdataPropName, [ { [this.options.textNodeName] : tagExp } ]);\n        }else{\n          let val = this.parseTextData(tagExp, currentNode.tagname, jPath, true, false, true);\n          if(val == undefined) val = \"\";\n          currentNode.add(this.options.textNodeName, val);\n        }\n        \n        i = closeIndex + 2;\n      }else {//Opening tag\n        let result = readTagExp(xmlData,i, this.options.removeNSPrefix);\n        let tagName= result.tagName;\n        let tagExp = result.tagExp;\n        let attrExpPresent = result.attrExpPresent;\n        let closeIndex = result.closeIndex;\n\n        if (this.options.transformTagName) {\n          tagName = this.options.transformTagName(tagName);\n        }\n        \n        //save text as child node\n        if (currentNode && textData) {\n          if(currentNode.tagname !== '!xml'){\n            //when nested tag is found\n            textData = this.saveTextToParentTag(textData, currentNode, jPath, false);\n          }\n        }\n\n        //check if last tag was unpaired tag\n        const lastTag = currentNode;\n        if(lastTag && this.options.unpairedTags.indexOf(lastTag.tagname) !== -1 ){\n          currentNode = this.tagsNodeStack.pop();\n          jPath = jPath.substring(0, jPath.lastIndexOf(\".\"));\n        }\n        if(tagName !== xmlObj.tagname){\n          jPath += jPath ? \".\" + tagName : tagName;\n        }\n        if (this.isItStopNode(this.options.stopNodes, jPath, tagName)) { //TODO: namespace\n          let tagContent = \"\";\n          //self-closing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            i = result.closeIndex;\n          }\n          //unpaired tag\n          else if(this.options.unpairedTags.indexOf(tagName) !== -1){\n            i = result.closeIndex;\n          }\n          //normal tag\n          else{\n            //read until closing tag is found\n            const result = this.readStopNodeData(xmlData, tagName, closeIndex + 1);\n            if(!result) throw new Error(`Unexpected end of ${tagName}`);\n            i = result.i;\n            tagContent = result.tagContent;\n          }\n\n          const childNode = new xmlNode(tagName);\n          if(tagName !== tagExp && attrExpPresent){\n            childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n          }\n          if(tagContent) {\n            tagContent = this.parseTextData(tagContent, tagName, jPath, true, attrExpPresent, true, true);\n          }\n          \n          jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          childNode.add(this.options.textNodeName, tagContent);\n          \n          this.addChild(currentNode, childNode, jPath)\n        }else{\n  //selfClosing tag\n          if(tagExp.length > 0 && tagExp.lastIndexOf(\"/\") === tagExp.length - 1){\n            if(tagName[tagName.length - 1] === \"/\"){ //remove trailing '/'\n              tagName = tagName.substr(0, tagName.length - 1);\n              tagExp = tagName;\n            }else{\n              tagExp = tagExp.substr(0, tagExp.length - 1);\n            }\n            \n            if(this.options.transformTagName) {\n              tagName = this.options.transformTagName(tagName);\n            }\n\n            const childNode = new xmlNode(tagName);\n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            jPath = jPath.substr(0, jPath.lastIndexOf(\".\"));\n          }\n    //opening tag\n          else{\n            const childNode = new xmlNode( tagName);\n            this.tagsNodeStack.push(currentNode);\n            \n            if(tagName !== tagExp && attrExpPresent){\n              childNode[\":@\"] = this.buildAttributesMap(tagExp, jPath, tagName);\n            }\n            this.addChild(currentNode, childNode, jPath)\n            currentNode = childNode;\n          }\n          textData = \"\";\n          i = closeIndex;\n        }\n      }\n    }else{\n      textData += xmlData[i];\n    }\n  }\n  return xmlObj.child;\n}\n\nfunction addChild(currentNode, childNode, jPath){\n  const result = this.options.updateTag(childNode.tagname, jPath, childNode[\":@\"])\n  if(result === false){\n  }else if(typeof result === \"string\"){\n    childNode.tagname = result\n    currentNode.addChild(childNode);\n  }else{\n    currentNode.addChild(childNode);\n  }\n}\n\nconst replaceEntitiesValue = function(val){\n\n  if(this.options.processEntities){\n    for(let entityName in this.docTypeEntities){\n      const entity = this.docTypeEntities[entityName];\n      val = val.replace( entity.regx, entity.val);\n    }\n    for(let entityName in this.lastEntities){\n      const entity = this.lastEntities[entityName];\n      val = val.replace( entity.regex, entity.val);\n    }\n    if(this.options.htmlEntities){\n      for(let entityName in this.htmlEntities){\n        const entity = this.htmlEntities[entityName];\n        val = val.replace( entity.regex, entity.val);\n      }\n    }\n    val = val.replace( this.ampEntity.regex, this.ampEntity.val);\n  }\n  return val;\n}\nfunction saveTextToParentTag(textData, currentNode, jPath, isLeafNode) {\n  if (textData) { //store previously collected data as textNode\n    if(isLeafNode === undefined) isLeafNode = Object.keys(currentNode.child).length === 0\n    \n    textData = this.parseTextData(textData,\n      currentNode.tagname,\n      jPath,\n      false,\n      currentNode[\":@\"] ? Object.keys(currentNode[\":@\"]).length !== 0 : false,\n      isLeafNode);\n\n    if (textData !== undefined && textData !== \"\")\n      currentNode.add(this.options.textNodeName, textData);\n    textData = \"\";\n  }\n  return textData;\n}\n\n//TODO: use jPath to simplify the logic\n/**\n * \n * @param {string[]} stopNodes \n * @param {string} jPath\n * @param {string} currentTagName \n */\nfunction isItStopNode(stopNodes, jPath, currentTagName){\n  const allNodesExp = \"*.\" + currentTagName;\n  for (const stopNodePath in stopNodes) {\n    const stopNodeExp = stopNodes[stopNodePath];\n    if( allNodesExp === stopNodeExp || jPath === stopNodeExp  ) return true;\n  }\n  return false;\n}\n\n/**\n * Returns the tag Expression and where it is ending handling single-double quotes situation\n * @param {string} xmlData \n * @param {number} i starting index\n * @returns \n */\nfunction tagExpWithClosingIndex(xmlData, i, closingChar = \">\"){\n  let attrBoundary;\n  let tagExp = \"\";\n  for (let index = i; index < xmlData.length; index++) {\n    let ch = xmlData[index];\n    if (attrBoundary) {\n        if (ch === attrBoundary) attrBoundary = \"\";//reset\n    } else if (ch === '\"' || ch === \"'\") {\n        attrBoundary = ch;\n    } else if (ch === closingChar[0]) {\n      if(closingChar[1]){\n        if(xmlData[index + 1] === closingChar[1]){\n          return {\n            data: tagExp,\n            index: index\n          }\n        }\n      }else{\n        return {\n          data: tagExp,\n          index: index\n        }\n      }\n    } else if (ch === '\\t') {\n      ch = \" \"\n    }\n    tagExp += ch;\n  }\n}\n\nfunction findClosingIndex(xmlData, str, i, errMsg){\n  const closingIndex = xmlData.indexOf(str, i);\n  if(closingIndex === -1){\n    throw new Error(errMsg)\n  }else{\n    return closingIndex + str.length - 1;\n  }\n}\n\nfunction readTagExp(xmlData,i, removeNSPrefix, closingChar = \">\"){\n  const result = tagExpWithClosingIndex(xmlData, i+1, closingChar);\n  if(!result) return;\n  let tagExp = result.data;\n  const closeIndex = result.index;\n  const separatorIndex = tagExp.search(/\\s/);\n  let tagName = tagExp;\n  let attrExpPresent = true;\n  if(separatorIndex !== -1){//separate tag name and attributes expression\n    tagName = tagExp.substr(0, separatorIndex).replace(/\\s\\s*$/, '');\n    tagExp = tagExp.substr(separatorIndex + 1);\n  }\n\n  if(removeNSPrefix){\n    const colonIndex = tagName.indexOf(\":\");\n    if(colonIndex !== -1){\n      tagName = tagName.substr(colonIndex+1);\n      attrExpPresent = tagName !== result.data.substr(colonIndex + 1);\n    }\n  }\n\n  return {\n    tagName: tagName,\n    tagExp: tagExp,\n    closeIndex: closeIndex,\n    attrExpPresent: attrExpPresent,\n  }\n}\n/**\n * find paired tag for a stop node\n * @param {string} xmlData \n * @param {string} tagName \n * @param {number} i \n */\nfunction readStopNodeData(xmlData, tagName, i){\n  const startIndex = i;\n  // Starting at 1 since we already have an open tag\n  let openTagCount = 1;\n\n  for (; i < xmlData.length; i++) {\n    if( xmlData[i] === \"<\"){ \n      if (xmlData[i+1] === \"/\") {//close tag\n          const closeIndex = findClosingIndex(xmlData, \">\", i, `${tagName} is not closed`);\n          let closeTagName = xmlData.substring(i+2,closeIndex).trim();\n          if(closeTagName === tagName){\n            openTagCount--;\n            if (openTagCount === 0) {\n              return {\n                tagContent: xmlData.substring(startIndex, i),\n                i : closeIndex\n              }\n            }\n          }\n          i=closeIndex;\n        } else if(xmlData[i+1] === '?') { \n          const closeIndex = findClosingIndex(xmlData, \"?>\", i+1, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 3) === '!--') { \n          const closeIndex = findClosingIndex(xmlData, \"-->\", i+3, \"StopNode is not closed.\")\n          i=closeIndex;\n        } else if(xmlData.substr(i + 1, 2) === '![') { \n          const closeIndex = findClosingIndex(xmlData, \"]]>\", i, \"StopNode is not closed.\") - 2;\n          i=closeIndex;\n        } else {\n          const tagData = readTagExp(xmlData, i, '>')\n\n          if (tagData) {\n            const openTagName = tagData && tagData.tagName;\n            if (openTagName === tagName && tagData.tagExp[tagData.tagExp.length-1] !== \"/\") {\n              openTagCount++;\n            }\n            i=tagData.closeIndex;\n          }\n        }\n      }\n  }//end for loop\n}\n\nfunction parseValue(val, shouldParse, options) {\n  if (shouldParse && typeof val === 'string') {\n    //console.log(options)\n    const newval = val.trim();\n    if(newval === 'true' ) return true;\n    else if(newval === 'false' ) return false;\n    else return toNumber(val, options);\n  } else {\n    if (util.isExist(val)) {\n      return val;\n    } else {\n      return '';\n    }\n  }\n}\n\n\nmodule.exports = OrderedObjParser;\n","'use strict';\n\n/**\n * \n * @param {array} node \n * @param {any} options \n * @returns \n */\nfunction prettify(node, options){\n  return compress( node, options);\n}\n\n/**\n * \n * @param {array} arr \n * @param {object} options \n * @param {string} jPath \n * @returns object\n */\nfunction compress(arr, options, jPath){\n  let text;\n  const compressedObj = {};\n  for (let i = 0; i < arr.length; i++) {\n    const tagObj = arr[i];\n    const property = propName(tagObj);\n    let newJpath = \"\";\n    if(jPath === undefined) newJpath = property;\n    else newJpath = jPath + \".\" + property;\n\n    if(property === options.textNodeName){\n      if(text === undefined) text = tagObj[property];\n      else text += \"\" + tagObj[property];\n    }else if(property === undefined){\n      continue;\n    }else if(tagObj[property]){\n      \n      let val = compress(tagObj[property], options, newJpath);\n      const isLeaf = isLeafTag(val, options);\n\n      if(tagObj[\":@\"]){\n        assignAttributes( val, tagObj[\":@\"], newJpath, options);\n      }else if(Object.keys(val).length === 1 && val[options.textNodeName] !== undefined && !options.alwaysCreateTextNode){\n        val = val[options.textNodeName];\n      }else if(Object.keys(val).length === 0){\n        if(options.alwaysCreateTextNode) val[options.textNodeName] = \"\";\n        else val = \"\";\n      }\n\n      if(compressedObj[property] !== undefined && compressedObj.hasOwnProperty(property)) {\n        if(!Array.isArray(compressedObj[property])) {\n            compressedObj[property] = [ compressedObj[property] ];\n        }\n        compressedObj[property].push(val);\n      }else{\n        //TODO: if a node is not an array, then check if it should be an array\n        //also determine if it is a leaf node\n        if (options.isArray(property, newJpath, isLeaf )) {\n          compressedObj[property] = [val];\n        }else{\n          compressedObj[property] = val;\n        }\n      }\n    }\n    \n  }\n  // if(text && text.length > 0) compressedObj[options.textNodeName] = text;\n  if(typeof text === \"string\"){\n    if(text.length > 0) compressedObj[options.textNodeName] = text;\n  }else if(text !== undefined) compressedObj[options.textNodeName] = text;\n  return compressedObj;\n}\n\nfunction propName(obj){\n  const keys = Object.keys(obj);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    if(key !== \":@\") return key;\n  }\n}\n\nfunction assignAttributes(obj, attrMap, jpath, options){\n  if (attrMap) {\n    const keys = Object.keys(attrMap);\n    const len = keys.length; //don't make it inline\n    for (let i = 0; i < len; i++) {\n      const atrrName = keys[i];\n      if (options.isArray(atrrName, jpath + \".\" + atrrName, true, true)) {\n        obj[atrrName] = [ attrMap[atrrName] ];\n      } else {\n        obj[atrrName] = attrMap[atrrName];\n      }\n    }\n  }\n}\n\nfunction isLeafTag(obj, options){\n  const { textNodeName } = options;\n  const propCount = Object.keys(obj).length;\n  \n  if (propCount === 0) {\n    return true;\n  }\n\n  if (\n    propCount === 1 &&\n    (obj[textNodeName] || typeof obj[textNodeName] === \"boolean\" || obj[textNodeName] === 0)\n  ) {\n    return true;\n  }\n\n  return false;\n}\nexports.prettify = prettify;\n","const { buildOptions} = require(\"./OptionsBuilder\");\nconst OrderedObjParser = require(\"./OrderedObjParser\");\nconst { prettify} = require(\"./node2json\");\nconst validator = require('../validator');\n\nclass XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validator.validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n}\n\nmodule.exports = XMLParser;","const EOL = \"\\n\";\n\n/**\n * \n * @param {array} jArray \n * @param {any} options \n * @returns \n */\nfunction toXml(jArray, options) {\n    let indentation = \"\";\n    if (options.format && options.indentBy.length > 0) {\n        indentation = EOL;\n    }\n    return arrToStr(jArray, options, \"\", indentation);\n}\n\nfunction arrToStr(arr, options, jPath, indentation) {\n    let xmlStr = \"\";\n    let isPreviousElementTag = false;\n\n    for (let i = 0; i < arr.length; i++) {\n        const tagObj = arr[i];\n        const tagName = propName(tagObj);\n        let newJPath = \"\";\n        if (jPath.length === 0) newJPath = tagName\n        else newJPath = `${jPath}.${tagName}`;\n\n        if (tagName === options.textNodeName) {\n            let tagText = tagObj[tagName];\n            if (!isStopNode(newJPath, options)) {\n                tagText = options.tagValueProcessor(tagName, tagText);\n                tagText = replaceEntitiesValue(tagText, options);\n            }\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += tagText;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.cdataPropName) {\n            if (isPreviousElementTag) {\n                xmlStr += indentation;\n            }\n            xmlStr += `<![CDATA[${tagObj[tagName][0][options.textNodeName]}]]>`;\n            isPreviousElementTag = false;\n            continue;\n        } else if (tagName === options.commentPropName) {\n            xmlStr += indentation + `<!--${tagObj[tagName][0][options.textNodeName]}-->`;\n            isPreviousElementTag = true;\n            continue;\n        } else if (tagName[0] === \"?\") {\n            const attStr = attr_to_str(tagObj[\":@\"], options);\n            const tempInd = tagName === \"?xml\" ? \"\" : indentation;\n            let piTextNodeName = tagObj[tagName][0][options.textNodeName];\n            piTextNodeName = piTextNodeName.length !== 0 ? \" \" + piTextNodeName : \"\"; //remove extra spacing\n            xmlStr += tempInd + `<${tagName}${piTextNodeName}${attStr}?>`;\n            isPreviousElementTag = true;\n            continue;\n        }\n        let newIdentation = indentation;\n        if (newIdentation !== \"\") {\n            newIdentation += options.indentBy;\n        }\n        const attStr = attr_to_str(tagObj[\":@\"], options);\n        const tagStart = indentation + `<${tagName}${attStr}`;\n        const tagValue = arrToStr(tagObj[tagName], options, newJPath, newIdentation);\n        if (options.unpairedTags.indexOf(tagName) !== -1) {\n            if (options.suppressUnpairedNode) xmlStr += tagStart + \">\";\n            else xmlStr += tagStart + \"/>\";\n        } else if ((!tagValue || tagValue.length === 0) && options.suppressEmptyNode) {\n            xmlStr += tagStart + \"/>\";\n        } else if (tagValue && tagValue.endsWith(\">\")) {\n            xmlStr += tagStart + `>${tagValue}${indentation}</${tagName}>`;\n        } else {\n            xmlStr += tagStart + \">\";\n            if (tagValue && indentation !== \"\" && (tagValue.includes(\"/>\") || tagValue.includes(\"</\"))) {\n                xmlStr += indentation + options.indentBy + tagValue + indentation;\n            } else {\n                xmlStr += tagValue;\n            }\n            xmlStr += `</${tagName}>`;\n        }\n        isPreviousElementTag = true;\n    }\n\n    return xmlStr;\n}\n\nfunction propName(obj) {\n    const keys = Object.keys(obj);\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i];\n        if (key !== \":@\") return key;\n    }\n}\n\nfunction attr_to_str(attrMap, options) {\n    let attrStr = \"\";\n    if (attrMap && !options.ignoreAttributes) {\n        for (let attr in attrMap) {\n            let attrVal = options.attributeValueProcessor(attr, attrMap[attr]);\n            attrVal = replaceEntitiesValue(attrVal, options);\n            if (attrVal === true && options.suppressBooleanAttributes) {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}`;\n            } else {\n                attrStr += ` ${attr.substr(options.attributeNamePrefix.length)}=\"${attrVal}\"`;\n            }\n        }\n    }\n    return attrStr;\n}\n\nfunction isStopNode(jPath, options) {\n    jPath = jPath.substr(0, jPath.length - options.textNodeName.length - 1);\n    let tagName = jPath.substr(jPath.lastIndexOf(\".\") + 1);\n    for (let index in options.stopNodes) {\n        if (options.stopNodes[index] === jPath || options.stopNodes[index] === \"*.\" + tagName) return true;\n    }\n    return false;\n}\n\nfunction replaceEntitiesValue(textValue, options) {\n    if (textValue && textValue.length > 0 && options.processEntities) {\n        for (let i = 0; i < options.entities.length; i++) {\n            const entity = options.entities[i];\n            textValue = textValue.replace(entity.regex, entity.val);\n        }\n    }\n    return textValue;\n}\nmodule.exports = toXml;\n","'use strict';\n//parse Empty Node as self closing node\nconst buildFromOrderedJs = require('./orderedJs2Xml');\n\nconst defaultOptions = {\n  attributeNamePrefix: '@_',\n  attributesGroupName: false,\n  textNodeName: '#text',\n  ignoreAttributes: true,\n  cdataPropName: false,\n  format: false,\n  indentBy: '  ',\n  suppressEmptyNode: false,\n  suppressUnpairedNode: true,\n  suppressBooleanAttributes: true,\n  tagValueProcessor: function(key, a) {\n    return a;\n  },\n  attributeValueProcessor: function(attrName, a) {\n    return a;\n  },\n  preserveOrder: false,\n  commentPropName: false,\n  unpairedTags: [],\n  entities: [\n    { regex: new RegExp(\"&\", \"g\"), val: \"&amp;\" },//it must be on top\n    { regex: new RegExp(\">\", \"g\"), val: \"&gt;\" },\n    { regex: new RegExp(\"<\", \"g\"), val: \"&lt;\" },\n    { regex: new RegExp(\"\\'\", \"g\"), val: \"&apos;\" },\n    { regex: new RegExp(\"\\\"\", \"g\"), val: \"&quot;\" }\n  ],\n  processEntities: true,\n  stopNodes: [],\n  // transformTagName: false,\n  // transformAttributeName: false,\n  oneListGroup: false\n};\n\nfunction Builder(options) {\n  this.options = Object.assign({}, defaultOptions, options);\n  if (this.options.ignoreAttributes || this.options.attributesGroupName) {\n    this.isAttribute = function(/*a*/) {\n      return false;\n    };\n  } else {\n    this.attrPrefixLen = this.options.attributeNamePrefix.length;\n    this.isAttribute = isAttribute;\n  }\n\n  this.processTextOrObjNode = processTextOrObjNode\n\n  if (this.options.format) {\n    this.indentate = indentate;\n    this.tagEndChar = '>\\n';\n    this.newLine = '\\n';\n  } else {\n    this.indentate = function() {\n      return '';\n    };\n    this.tagEndChar = '>';\n    this.newLine = '';\n  }\n}\n\nBuilder.prototype.build = function(jObj) {\n  if(this.options.preserveOrder){\n    return buildFromOrderedJs(jObj, this.options);\n  }else {\n    if(Array.isArray(jObj) && this.options.arrayNodeName && this.options.arrayNodeName.length > 1){\n      jObj = {\n        [this.options.arrayNodeName] : jObj\n      }\n    }\n    return this.j2x(jObj, 0).val;\n  }\n};\n\nBuilder.prototype.j2x = function(jObj, level) {\n  let attrStr = '';\n  let val = '';\n  for (let key in jObj) {\n    if (typeof jObj[key] === 'undefined') {\n      // supress undefined node\n    } else if (jObj[key] === null) {\n      if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n      else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n      // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n    } else if (jObj[key] instanceof Date) {\n      val += this.buildTextValNode(jObj[key], key, '', level);\n    } else if (typeof jObj[key] !== 'object') {\n      //premitive type\n      const attr = this.isAttribute(key);\n      if (attr) {\n        attrStr += this.buildAttrPairStr(attr, '' + jObj[key]);\n      }else {\n        //tag value\n        if (key === this.options.textNodeName) {\n          let newval = this.options.tagValueProcessor(key, '' + jObj[key]);\n          val += this.replaceEntitiesValue(newval);\n        } else {\n          val += this.buildTextValNode(jObj[key], key, '', level);\n        }\n      }\n    } else if (Array.isArray(jObj[key])) {\n      //repeated nodes\n      const arrLen = jObj[key].length;\n      let listTagVal = \"\";\n      for (let j = 0; j < arrLen; j++) {\n        const item = jObj[key][j];\n        if (typeof item === 'undefined') {\n          // supress undefined node\n        } else if (item === null) {\n          if(key[0] === \"?\") val += this.indentate(level) + '<' + key + '?' + this.tagEndChar;\n          else val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n          // val += this.indentate(level) + '<' + key + '/' + this.tagEndChar;\n        } else if (typeof item === 'object') {\n          if(this.options.oneListGroup ){\n            listTagVal += this.j2x(item, level + 1).val;\n          }else{\n            listTagVal += this.processTextOrObjNode(item, key, level)\n          }\n        } else {\n          listTagVal += this.buildTextValNode(item, key, '', level);\n        }\n      }\n      if(this.options.oneListGroup){\n        listTagVal = this.buildObjectNode(listTagVal, key, '', level);\n      }\n      val += listTagVal;\n    } else {\n      //nested node\n      if (this.options.attributesGroupName && key === this.options.attributesGroupName) {\n        const Ks = Object.keys(jObj[key]);\n        const L = Ks.length;\n        for (let j = 0; j < L; j++) {\n          attrStr += this.buildAttrPairStr(Ks[j], '' + jObj[key][Ks[j]]);\n        }\n      } else {\n        val += this.processTextOrObjNode(jObj[key], key, level)\n      }\n    }\n  }\n  return {attrStr: attrStr, val: val};\n};\n\nBuilder.prototype.buildAttrPairStr = function(attrName, val){\n  val = this.options.attributeValueProcessor(attrName, '' + val);\n  val = this.replaceEntitiesValue(val);\n  if (this.options.suppressBooleanAttributes && val === \"true\") {\n    return ' ' + attrName;\n  } else return ' ' + attrName + '=\"' + val + '\"';\n}\n\nfunction processTextOrObjNode (object, key, level) {\n  const result = this.j2x(object, level + 1);\n  if (object[this.options.textNodeName] !== undefined && Object.keys(object).length === 1) {\n    return this.buildTextValNode(object[this.options.textNodeName], key, result.attrStr, level);\n  } else {\n    return this.buildObjectNode(result.val, key, result.attrStr, level);\n  }\n}\n\nBuilder.prototype.buildObjectNode = function(val, key, attrStr, level) {\n  if(val === \"\"){\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }\n  }else{\n\n    let tagEndExp = '</' + key + this.tagEndChar;\n    let piClosingChar = \"\";\n    \n    if(key[0] === \"?\") {\n      piClosingChar = \"?\";\n      tagEndExp = \"\";\n    }\n  \n    if (attrStr && val.indexOf('<') === -1) {\n      return ( this.indentate(level) + '<' +  key + attrStr + piClosingChar + '>' + val + tagEndExp );\n    } else if (this.options.commentPropName !== false && key === this.options.commentPropName && piClosingChar.length === 0) {\n      return this.indentate(level) + `<!--${val}-->` + this.newLine;\n    }else {\n      return (\n        this.indentate(level) + '<' + key + attrStr + piClosingChar + this.tagEndChar +\n        val +\n        this.indentate(level) + tagEndExp    );\n    }\n  }\n}\n\nBuilder.prototype.closeTag = function(key){\n  let closeTag = \"\";\n  if(this.options.unpairedTags.indexOf(key) !== -1){ //unpaired\n    if(!this.options.suppressUnpairedNode) closeTag = \"/\"\n  }else if(this.options.suppressEmptyNode){ //empty\n    closeTag = \"/\";\n  }else{\n    closeTag = `></${key}`\n  }\n  return closeTag;\n}\n\nfunction buildEmptyObjNode(val, key, attrStr, level) {\n  if (val !== '') {\n    return this.buildObjectNode(val, key, attrStr, level);\n  } else {\n    if(key[0] === \"?\") return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar;\n    else {\n      return  this.indentate(level) + '<' + key + attrStr + '/' + this.tagEndChar;\n      // return this.buildTagStr(level,key, attrStr);\n    }\n  }\n}\n\nBuilder.prototype.buildTextValNode = function(val, key, attrStr, level) {\n  if (this.options.cdataPropName !== false && key === this.options.cdataPropName) {\n    return this.indentate(level) + `<![CDATA[${val}]]>` +  this.newLine;\n  }else if (this.options.commentPropName !== false && key === this.options.commentPropName) {\n    return this.indentate(level) + `<!--${val}-->` +  this.newLine;\n  }else if(key[0] === \"?\") {//PI tag\n    return  this.indentate(level) + '<' + key + attrStr+ '?' + this.tagEndChar; \n  }else{\n    let textValue = this.options.tagValueProcessor(key, val);\n    textValue = this.replaceEntitiesValue(textValue);\n  \n    if( textValue === ''){\n      return this.indentate(level) + '<' + key + attrStr + this.closeTag(key) + this.tagEndChar;\n    }else{\n      return this.indentate(level) + '<' + key + attrStr + '>' +\n         textValue +\n        '</' + key + this.tagEndChar;\n    }\n  }\n}\n\nBuilder.prototype.replaceEntitiesValue = function(textValue){\n  if(textValue && textValue.length > 0 && this.options.processEntities){\n    for (let i=0; i<this.options.entities.length; i++) {\n      const entity = this.options.entities[i];\n      textValue = textValue.replace(entity.regex, entity.val);\n    }\n  }\n  return textValue;\n}\n\nfunction indentate(level) {\n  return this.options.indentBy.repeat(level);\n}\n\nfunction isAttribute(name /*, options*/) {\n  if (name.startsWith(this.options.attributeNamePrefix)) {\n    return name.substr(this.attrPrefixLen);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = Builder;\n","'use strict';\n\nconst validator = require('./validator');\nconst XMLParser = require('./xmlparser/XMLParser');\nconst XMLBuilder = require('./xmlbuilder/json2xml');\n\nmodule.exports = {\n  XMLParser: XMLParser,\n  XMLValidator: validator,\n  XMLBuilder: XMLBuilder\n}","export const entries = {\n  catalogueLinks: {\n    allowedChildrens: [],\n  },\n  publications: {\n    allowedChildrens: [],\n  },\n  costTypes: {\n    allowedChildrens: [],\n  },\n  profileTypes: {\n    allowedChildrens: [\"characteristicTypes\"],\n  },\n  categoryEntries: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"constraints\", \"modifiers\", \"modifierGroups\"],\n  },\n  categoryLinks: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"constraints\", \"modifiers\", \"modifierGroups\"],\n  },\n  forceEntries: {\n    allowedChildrens: [\n      \"forceEntries\",\n      \"categoryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"costs\",\n    ],\n  },\n  entryLinks: {\n    allowedChildrens: \"type\",\n  },\n  selectionEntryGroups: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  sharedSelectionEntryGroups: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  selectionEntries: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"associations\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  sharedSelectionEntries: {\n    allowedChildrens: [\n      \"selectionEntries\",\n      \"selectionEntryGroups\",\n      \"entryLinks\",\n      \"profiles\",\n      \"rules\",\n      \"infoGroups\",\n      \"infoLinks\",\n      \"associations\",\n      \"constraints\",\n      \"modifiers\",\n      \"modifierGroups\",\n      \"categoryLinks\",\n      \"costs\",\n    ],\n  },\n  associations: {\n    allowedChildrens: [\"constraints\", \"modifiers\", \"modifierGroups\"],\n  },\n  sharedRules: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  rule: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  rules: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\"],\n  },\n  profile: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  profiles: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  sharedProfiles: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"characteristics\"],\n  },\n  infoGroup: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  infoGroups: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  sharedInfoGroups: {\n    allowedChildrens: [\"profiles\", \"rules\", \"infoGroups\", \"infoLinks\", \"modifiers\", \"modifierGroups\"],\n  },\n  infoLinks: {\n    allowedChildrens: \"type\", //get from type\n  },\n  modifiers: {\n    allowedChildrens: [\"conditions\", \"conditionGroups\", \"repeats\"],\n  },\n  modifierGroups: {\n    allowedChildrens: [\"modifiers\", \"modifierGroups\", \"conditions\", \"conditionGroups\", \"repeats\"],\n  },\n  conditions: {\n    allowedChildrens: [],\n  },\n  conditionGroups: {\n    allowedChildrens: [\"conditions\", \"conditionGroups\"],\n  },\n  catalogue: {\n    allowedChildrens: [\n      \"catalogueLinks\",\n      \"publications\",\n      \"costTypes\",\n      \"profileTypes\",\n      \"categoryEntries\",\n      \"forceEntries\",\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"selectionEntries\",\n      \"entryLinks\",\n      \"infoLinks\",\n      \"infoGroups\",\n      \"rules\",\n    ],\n  },\n\n  gameSystem: {\n    allowedChildrens: [\n      \"publications\",\n      \"costTypes\",\n      \"profileTypes\",\n      \"categoryEntries\",\n      \"forceEntries\",\n      \"sharedSelectionEntries\",\n      \"sharedSelectionEntryGroups\",\n      \"sharedProfiles\",\n      \"sharedRules\",\n      \"sharedInfoGroups\",\n      \"selectionEntries\",\n      \"entryLinks\",\n      \"infoLinks\",\n      \"infoGroups\",\n      \"rules\",\n    ],\n  },\n};\n","import { unzip } from \"unzipit\";\nimport { X2jOptionsOptional, XMLParser, XMLBuilder, XmlBuilderOptionsOptional } from \"fast-xml-parser\";\nimport { forEachValueRecursive, hashFnv32a, isObject, removePrefix, to_snake_case } from \"./bs_helpers\";\nimport { rootToJson, getDataObject, goodJsonArrayKeys } from \"./bs_main\";\nimport type { BSICatalogue, BSIGameSystem } from \"./bs_types\";\nimport type { Catalogue } from \"./bs_main_catalogue\";\nexport const containerTags = {\n  categories: \"category\",\n  catalogueLinks: \"catalogueLink\",\n  categoryEntries: \"categoryEntry\",\n  categoryLinks: \"categoryLink\",\n  characteristics: \"characteristic\",\n  characteristicTypes: \"characteristicType\",\n  conditions: \"condition\",\n  conditionGroups: \"conditionGroup\",\n  constraints: \"constraint\",\n  costs: \"cost\",\n  costLimits: \"costLimit\",\n  costTypes: \"costType\",\n  entryLinks: \"entryLink\",\n  forceEntries: \"forceEntry\",\n  infoGroups: \"infoGroup\",\n  infoLinks: \"infoLink\",\n  forces: \"force\",\n  modifiers: \"modifier\",\n  modifierGroups: \"modifierGroup\",\n  profiles: \"profile\",\n  profileTypes: \"profileType\",\n  publications: \"publication\",\n  repeats: \"repeat\",\n  rules: \"rule\",\n  selections: \"selection\",\n  selectionEntries: \"selectionEntry\",\n  selectionEntryGroups: \"selectionEntryGroup\",\n  sharedInfoGroups: \"infoGroup\",\n  sharedProfiles: \"profile\",\n  sharedRules: \"rule\",\n  sharedSelectionEntries: \"selectionEntry\",\n  sharedSelectionEntryGroups: \"selectionEntryGroup\",\n\n  associations: \"association\",\n} as Record<string, string | undefined>;\nexport const textNodeTags = new Set([\"description\", \"readme\", \"comment\"]);\nimport { entries } from \"./entries\";\n\nconst escapedHtml = /&(?:amp|lt|gt|quot|#39|apos);/g;\nconst htmlUnescapes = {\n  \"&amp;\": \"&\",\n  \"&apos;\": \"'\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&quot;\": '\"',\n  \"&#39;\": \"'\",\n} as Record<string, string | undefined>;\n\nconst unescape = (string: string) =>\n  escapedHtml.test(string) ? string.replace(escapedHtml, (match) => htmlUnescapes[match]!) : string;\n\nconst containers = {} as Record<string, string>;\nfor (const key in containerTags) {\n  containers[containerTags[key]!] = key;\n}\nconst allowed = {} as Record<string, Set<string> | string>;\nfor (const [key, value] of Object.entries(entries)) {\n  if (typeof value.allowedChildrens === \"string\") {\n    allowed[key] = value.allowedChildrens;\n  } else {\n    allowed[key] = new Set(value.allowedChildrens);\n  }\n}\n\nexport function xmlToJson(data: string) {\n  const options: X2jOptionsOptional = {\n    allowBooleanAttributes: true,\n    ignoreAttributes: false,\n    attributeNamePrefix: \"\",\n    textNodeName: \"$text\",\n    parseAttributeValue: true,\n    processEntities: false,\n    parseTagValue: false,\n    ignoreDeclaration: true,\n    alwaysCreateTextNode: true,\n\n    isArray: (tagName: string, jPath: string, isLeafNode: boolean, isAttribute: boolean) => {\n      \n      return !isAttribute && tagName in containers;\n    },\n    attributeValueProcessor: (name, val) => unescape(val),\n    tagValueProcessor: (name, val) => unescape(val),\n  };\n  return new XMLParser(options).parse(data);\n}\n\nexport async function unzipFolder(file: string | ArrayBuffer | Blob, path: string) {\n  const unzipped = await unzip(file);\n  const result = {} as Record<string, ArrayBuffer | string>;\n  console.log(\"unzipping folder\", unzipped, \"path\", path);\n  for (const entry in unzipped.entries) {\n    const value = unzipped.entries[entry];\n    if (value.isDirectory) {\n      // folder\n      continue;\n    }\n    const file = removePrefix(removePrefix(entry, path), \"/\");\n    if (file.startsWith(\".\")) {\n      // git file\n      continue;\n    }\n    const data = isZipExtension(file) ? await value.arrayBuffer() : await value.text();\n    result[file] = data;\n  }\n  return result;\n}\n\nexport async function unzipFile(file: string | ArrayBuffer | Blob): Promise<string> {\n  if (typeof file === \"string\") {\n    var enc = new TextEncoder();\n    file = enc.encode(file);\n  }\n  const unzipped = await unzip(file);\n  for (const entry of Object.values(unzipped.entries)) {\n    const data = await entry.text();\n    return data;\n  }\n  throw \"unzipFile failed: No Entries\";\n}\n\nconst zipExtensions = [\"gstz\", \"zip\", \"catz\"];\nconst allowedExtensions = [\"gst\", \"gstz\", \"xml\", \"zip\", \"cat\", \"catz\", \"json\"];\nexport function removeExtension(extension_or_file: string) {\n  const idx = extension_or_file.lastIndexOf(\".\");\n  if (idx === -1) return extension_or_file;\n  return extension_or_file.substring(0, idx);\n}\nexport function getExtension(extension_or_file: string) {\n  const extension = extension_or_file.split(\".\").pop()!.toLowerCase();\n  return extension;\n}\nexport function isZipExtension(extension_or_file: string) {\n  const extension = getExtension(extension_or_file);\n  return zipExtensions.includes(extension);\n}\nexport function isAllowedExtension(file: string) {\n  const fileExtension = getExtension(file);\n  if (!allowedExtensions.includes(fileExtension)) {\n    return false;\n  }\n  return true;\n}\nconst oldBuggedTypes = {\n  sharedRules: \"shareRule\",\n  sharedProfiles: \"sharedProfile\",\n  sharedInfoGroups: \"sharedInfoGroup\",\n  sharedSelectionEntries: \"sharedSelectionEntry\",\n  sharedSelectionEntryGroups: \"sharedSelectionEntryGroup\",\n} as Record<string, string>;\n/**\n * Converts a {profiles: [{profile: {}}]} to {profiles: [{}]}\n * From https://github.com/BlueWinds/bsd-schema/blob/main/index.js\n */\n\nexport function normalize(x: any) {\n  for (let attr in x) {\n    if (x[attr] === \"\") {\n      delete x[attr];\n    } else if (containerTags[attr] && x[attr]) {\n\n      if (attr in oldBuggedTypes) {\n        const normal = x[attr][containerTags[attr] as string];\n        const old = x[attr][oldBuggedTypes[attr]];\n        x[attr] = [...(Array.isArray(normal) ? normal : []), ...(Array.isArray(old) ? old : [])];\n        x[attr]?.forEach(normalize);\n      } else {\n        const val = x[attr][containerTags[attr] as string];\n\n      // Remove empty arrays that become an incorrect element\n        if (Array.isArray(val)){\n          x[attr] = val;\n          x[attr]?.forEach(normalize);\n        }\n        else if (isObject(x[attr])) {\n          delete x[attr]\n        } \n      }\n    } else if (textNodeTags.has(attr)) {\n      x[attr] = x[attr][\"$text\"] ?? \"\";\n    }\n  }\n  return x;\n}\nexport function is_allowed(x: any, parentKey: string, k: string) {\n  const lookedUp = allowed[k];\n  if (typeof lookedUp === \"string\") {\n    return x.target[lookedUp] === parentKey;\n  }\n  return lookedUp?.has(parentKey);\n}\nexport function clean(x: any, k: string) {\n  const lookedUp = allowed[k];\n  const allowedChilds = (typeof lookedUp === \"string\" ? allowed[x[lookedUp]] : lookedUp) as Set<string>;\n  for (let attr in x) {\n    if (attr in containerTags && Array.isArray(x[attr])) {\n      if (allowedChilds && !allowedChilds.has(attr)) {\n        delete x[attr];\n      } else {\n        x[attr].forEach((o: any) => clean(o, attr));\n      }\n    }\n  }\n}\nconst empty = new Set<string>();\nexport function allowed_children(obj: any, key: string): Set<string> {\n  let result = allowed[key];\n  if (typeof result === \"string\") {\n    const val = obj[result];\n    if (val) {\n      const new_key = toPlural(val);\n      if (typeof new_key !== \"string\" || new_key === result) {\n        return empty;\n      }\n      result = allowed[new_key];\n    }\n  }\n  if (!result) {\n    return empty;\n  }\n  return result as Set<string>;\n}\nexport function BSXmlToJson(data: string) {\n  const result = xmlToJson(data);\n  normalize(getDataObject(result));\n  const type = result.catalogue ? \"catalogue\" : \"gameSystem\";\n  if (!result.catalogue) {\n    result.playable = 0;\n    result.id = 1000;\n  } else {\n    result.playable = 1;\n    result.id = hashFnv32a(result.catalogue.id);\n    result.include = [1000];\n  }\n\n  const content = result[type];\n  result.name = content.name;\n  result.short = to_snake_case(content.name);\n  result.playable = !Boolean(content.library);\n  result.version = content.battleScribeVersion;\n  result.nrversion = content.revision;\n  return result;\n}\n\nexport async function convertToJson(data: any, extension: string) {\n  extension = getExtension(extension);\n  switch (extension) {\n    case \"xml\":\n    case \"cat\":\n    case \"gst\":\n      return BSXmlToJson(data);\n    case \"zip\":\n    case \"catz\":\n    case \"gstz\":\n      return BSXmlToJson(await unzipFile(data));\n    case \"json\":\n      return JSON.parse(data);\n    default:\n      throw new Error(\"Extension not supported \" + extension);\n  }\n}\n\nexport function toSingle(key: string) {\n  return containerTags[key];\n}\n\nexport function toPlural(key: string) {\n  return containers[key];\n}\nconst skipKeys = new Set([\"?xml\", \"$text\", \"_\"]);\nfunction renestChilds(obj: any) {\n  for (const [key, value] of Object.entries(obj)) {\n    if (textNodeTags.has(key)) {\n      obj[key] = Array.isArray(value) ? value : [value];\n    } else if (Array.isArray(value) && !skipKeys.has(key)) {\n      obj[key] = [{ [toSingle(key)!]: value }];\n    }\n  }\n}\nfunction putAttributesIn$(first: any) {\n  forEachValueRecursive(first, (current) => {\n    if (typeof current === \"object\") {\n      renestChilds(current);\n    }\n  });\n  forEachValueRecursive(first, (current) => {\n    if (typeof current === \"object\") {\n      for (const [key, value] of Object.entries(current)) {\n        if (Array.isArray(value)) continue;\n        if (skipKeys.has(key) || textNodeTags.has(key)) continue;\n        if (isObject(value)) continue;\n        current[`_${key}`] = value;\n        delete current[key];\n      }\n    }\n  });\n  return first;\n}\n\nexport function convertToXml(data: BSICatalogue | Catalogue | BSIGameSystem) {\n  const json = JSON.parse(rootToJson(data));\n  putAttributesIn$(json);\n  const options: XmlBuilderOptionsOptional = {\n    textNodeName: \"$text\",\n    format: true,\n    attributeNamePrefix: \"_\",\n    ignoreAttributes: false,\n    suppressBooleanAttributes: false,\n    suppressEmptyNode: true,\n  };\n  if (json.gameSystem) {\n    json.gameSystem._xmlns = \"http://www.battlescribe.net/schema/gameSystemSchema\";\n  }\n  if (json.catalogue) {\n    json.catalogue._xmlns = \"http://www.battlescribe.net/schema/catalogueSchema\";\n  }\n  const builder = new XMLBuilder(options);\n  const xml = builder.build(json);\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\n` + xml;\n}\n","import { Base, Condition, Constraint, Link, Modifier, ModifierGroup, Profile, goodJsonKeys } from \"./bs_main\";\nimport { Catalogue, CatalogueLink, EditorBase } from \"./bs_main_catalogue\";\nimport { conditionToString, fieldToText, getModifierOrConditionParent, modifierToString } from \"./bs_modifiers\";\nimport {\n  BSICondition,\n  BSIConditionGroup,\n  BSIConstraint,\n  BSIModifier,\n  BSIModifierGroup,\n  BSIProfile,\n  BSIRepeat,\n} from \"./bs_types\";\nimport { BSCatalogueManager } from \"./bs_system\";\nimport { isObject } from \"./bs_helpers\";\nimport { textNodeTags } from \"./bs_convert\";\nimport { validChildIds, validScopes } from \"./bs_condition\";\n\nexport interface CategoryEntry {\n  name: string;\n  type: ItemKeys;\n  links?: ItemKeys;\n  icon: string;\n}\n\nexport type ItemTypes = (\n  | Base\n  | Link\n  | Catalogue\n  | BSIModifier\n  | BSIModifierGroup\n  | BSICondition\n  | BSIConditionGroup\n  | BSIConstraint\n) & {\n  parentKey: ItemKeys;\n  editorTypeName: ItemTypeNames;\n};\nexport const possibleChildren: ItemKeys[] = [\n  // Catalogue stuff\n  \"publications\",\n  \"costTypes\",\n  \"profileTypes\",\n  \"sharedProfiles\",\n  \"sharedRules\",\n\n  // Modifiable\n  \"infoLinks\",\n  \"profiles\",\n  \"rules\",\n  \"infoGroups\",\n  \"sharedInfoGroups\",\n\n  // Children\n  \"categoryEntries\",\n  // \"categoryLinks\", BS does not show category links\n  \"forceEntries\",\n  \"selectionEntries\",\n  \"selectionEntryGroups\",\n  \"entryLinks\",\n\n  // Constraints and modifiers\n  \"constraints\",\n  \"conditions\",\n  \"modifiers\",\n  \"modifierGroups\",\n  \"repeats\",\n  \"conditionGroups\",\n];\nexport const systemCategories: CategoryEntry[] = [\n  {\n    type: \"publications\",\n    name: \"Publications\",\n    icon: \"publication.png\",\n  },\n  {\n    type: \"costTypes\",\n    name: \"Cost Types\",\n    icon: \"cost.png\",\n  },\n  {\n    type: \"profileTypes\",\n    name: \"Profile Types\",\n    icon: \"profileType.png\",\n  },\n  {\n    type: \"categoryEntries\",\n    name: \"Category Entries\",\n    icon: \"category.png\",\n  },\n  {\n    type: \"forceEntries\",\n    name: \"Force Entries\",\n    icon: \"force.png\",\n  },\n  {\n    type: \"sharedSelectionEntries\",\n    name: \"Shared Selection Entries\",\n    icon: \"selectionEntryLink.png\",\n  },\n  {\n    type: \"sharedSelectionEntryGroups\",\n    name: \"Shared Selection Entry Groups\",\n    icon: \"shared_groups.png\",\n  },\n  {\n    type: \"sharedProfiles\",\n    name: \"Shared Profiles\",\n    icon: \"shared_profiles.png\",\n  },\n  {\n    type: \"sharedRules\",\n    name: \"Shared Rules\",\n    icon: \"shared_rules.png\",\n  },\n  {\n    type: \"sharedInfoGroups\",\n    name: \"Shared Info Groups\",\n    icon: \"infoGroup.png\",\n  },\n  {\n    type: \"rules\",\n    links: \"infoLinks\",\n    name: \"Root Rules\",\n    icon: \"rule.png\",\n  },\n  {\n    type: \"selectionEntries\",\n    links: \"entryLinks\",\n    name: \"Root Selection Entries\",\n    icon: \"selectionEntry.png\",\n  },\n];\nexport const catalogueCategories: CategoryEntry[] = [\n  {\n    type: \"catalogueLinks\",\n    name: \"Catalogue Links\",\n    icon: \"catalogueLink.png\",\n  },\n  ...systemCategories,\n];\nexport type ItemTypeNames =\n  | \"catalogue\"\n  | \"gameSystem\"\n  | \"selectionEntry\"\n  | \"selectionEntryGroup\"\n  | \"category\"\n  | \"force\"\n  | \"selectionEntryLink\"\n  | \"selectionEntryGroupLink\"\n  | \"categoryLink\"\n  | \"catalogueLink\"\n  | \"profile\"\n  | \"rule\"\n  | \"profileType\"\n  | \"characteristic\"\n  | \"characteristicType\"\n  | \"publication\"\n  | \"infoGroup\"\n  | \"infoLink\"\n  | \"association\"\n  | \"constraint\"\n  | \"condition\"\n  | \"modifier\"\n  | \"modifierGroup\"\n  | \"repeat\"\n  | \"conditionGroup\"\n  | \"cost\"\n  | \"costType\"\n  | \"link\"\n  | \"profileLink\"\n  | \"ruleLink\"\n  | \"infoGroupLink\";\n\nexport type ItemKeys =\n  // Entries\n  | \"selectionEntries\"\n  | \"sharedSelectionEntries\"\n  | \"selectionEntryGroups\"\n  | \"sharedSelectionEntryGroups\"\n  | \"entryLinks\"\n  | \"forceEntries\"\n  | \"categoryEntries\"\n  | \"categoryLinks\"\n\n  //\n  | \"catalogueLinks\"\n  | \"publications\"\n  | \"costTypes\"\n  | \"profileTypes\"\n  | \"sharedProfiles\"\n  | \"sharedRules\"\n  | \"sharedInfoGroups\"\n\n  // Modifiable\n  | \"infoLinks\"\n  | \"profiles\"\n  | \"rules\"\n  | \"infoGroups\"\n\n  // Constraints and modifiers\n  | \"constraints\"\n  | \"conditions\"\n  | \"modifiers\"\n  | \"modifierGroups\"\n  | \"repeats\"\n  | \"conditionGroups\";\n\nexport function getTypeLabel(key: string, obj?: any): string {\n  switch (key) {\n    case \"selectionEntry\":\n      return \"Entry\";\n    case \"selectionEntryGroup\":\n      return \"Group\";\n    case \"selectionEntryLink\":\n      return \"Entry (link)\";\n    case \"selectionEntryGroupLink\":\n      return \"Group (link)\";\n\n    case \"force\":\n      return \"Force\";\n    case \"category\":\n      return \"Category\";\n    case \"categoryLink\":\n      return \"Category (link)\";\n\n    case \"catalogueLink\":\n      return \"Catalogue (link)\";\n    case \"publication\":\n      return \"Publication\";\n    case \"costType\":\n      return \"Cost Type\";\n    case \"costs\":\n      return \"Cost\";\n\n    case \"link\":\n      return \"Link\";\n    case \"profileType\":\n      return \"Profile Type\";\n    case \"profile\":\n      return \"Profile\";\n    case \"rule\":\n      return \"Rule\";\n    case \"infoLink\":\n      return \"Info (link)\";\n    case \"infoGroup\":\n      return \"Info Group\";\n    case \"profileLink\":\n      return \"Profile\";\n    case \"ruleLink\":\n      return \"Rule (link)\";\n    case \"infoGroupLink\":\n      return \"Info Group (link)\";\n    case \"characteristic\":\n      return \"Characteristic\";\n    case \"characteristicType\":\n      return \"Characteristic Type\";\n\n    case \"constraint\":\n      return \"Constraint\";\n    case \"condition\":\n      return \"Condition\";\n    case \"modifier\":\n      return \"Modifier\";\n    case \"modifierGroup\":\n      return \"Modifier Group\";\n    case \"repeat\":\n      return \"Repeat\";\n    case \"conditionGroup\":\n      return \"Condition Group\";\n    case \"catalogue\":\n      return \"Catalogue\";\n    case \"gameSystem\":\n      return \"Game System\";\n    default:\n      console.warn(\"unknown getTypeLabel key\", key);\n      return key as any;\n  }\n}\nexport function getTypeName(key: string, obj?: any): ItemTypeNames {\n  switch (key) {\n    case \"selectionEntries\":\n      return \"selectionEntry\";\n    case \"selectionEntryGroups\":\n      return \"selectionEntryGroup\";\n\n    case \"sharedSelectionEntries\":\n      return obj?.targetId ? \"selectionEntryLink\" : \"selectionEntry\";\n    case \"sharedSelectionEntryGroups\":\n      return obj?.targetId ? \"selectionEntryLink\" : \"selectionEntryGroup\";\n\n    case \"entryLinks\":\n      return obj?.target ? ((obj.target.editorTypeName + \"Link\") as any) : \"link\";\n    case \"forceEntries\":\n      return \"force\";\n    case \"categoryEntries\":\n      return \"category\";\n    case \"categoryLinks\":\n      return \"categoryLink\";\n\n    case \"catalogueLinks\":\n      return \"catalogueLink\";\n    case \"publications\":\n      return \"publication\";\n    case \"costTypes\":\n      return \"costType\";\n    case \"costs\":\n      return \"cost\";\n\n    case \"profileTypes\":\n      return \"profileType\";\n    case \"profiles\":\n      return \"profile\";\n    case \"rules\":\n      return \"rule\";\n    case \"characteristics\":\n      return \"characteristic\";\n    case \"characteristicTypes\":\n      return \"characteristicType\";\n    case \"sharedProfiles\":\n      return \"profile\";\n    case \"sharedRules\":\n      return \"rule\";\n    case \"sharedInfoGroups\":\n      return \"infoGroup\";\n\n    case \"infoLinks\":\n      return obj ? (`${obj.type || \"info\"}Link` as ItemTypeNames) : \"infoLink\";\n    case \"infoGroups\":\n      return \"infoGroup\";\n\n    case \"associations\":\n      return \"association\";\n    case \"constraints\":\n      return \"constraint\";\n    case \"conditions\":\n      return \"condition\";\n    case \"modifiers\":\n      return \"modifier\";\n    case \"modifierGroups\":\n      return \"modifierGroup\";\n    case \"repeats\":\n      return \"repeat\";\n    case \"conditionGroups\":\n      return \"conditionGroup\";\n    case \"catalogue\":\n    case \"gameSystem\":\n      return key;\n    default:\n      console.warn(\"unknown getTypeName key\", key);\n      return key as any;\n  }\n}\n\nexport function getNameExtra(obj: EditorBase, _refs = true, _type = true): string {\n  const type = obj.parentKey;\n  const pieces = [];\n  switch (type) {\n    case \"infoLinks\":\n      if ([\"profiles\", \"sharedProfiles\"].includes((obj.target as EditorBase)?.parentKey) && _type) {\n        pieces.push((obj.target as unknown as BSIProfile).typeName);\n      }\n      break;\n    case \"sharedProfiles\":\n    case \"profiles\":\n      if (_type){\n        pieces.push((obj as unknown as BSIProfile).typeName);\n      }\n      break;\n    case \"selectionEntries\":\n    case \"sharedSelectionEntries\":\n      if (obj.isEntry() && obj.getType() !== \"upgrade\" && _type) {\n        pieces.push(obj.getType());\n      }\n      break;\n    case \"entryLinks\":\n      if (obj.target && obj.isEntry() && obj.getType() !== \"upgrade\" && _type) {\n        pieces.push(obj.getType());\n      }\n      break;\n    case \"modifierGroups\":\n      pieces.push(`(${(obj.modifiers?.length || 0) + (obj.modifierGroups?.length || 0)})`);\n      break;\n    default:\n      break;\n  }\n  const refcount = (obj.links?.length ?? 0) + (obj.other_links?.length ?? 0);\n  if (refcount) {\n    const s = refcount === 1 ? \"\" : \"s\";\n    pieces.push(`(${refcount || 0} ref${s})`);\n  }\n  if (obj.comment && obj.comment[0]) {\n    pieces.push(\"# \" + obj.comment);\n  }\n  if (obj.isCollective && obj.isCollective()) {\n    pieces.push(\"(collective)\");\n  }\n  return pieces.join(\" \");\n}\n\nexport function getName(obj: any): string {\n  const type = obj.parentKey;\n  switch (type) {\n    case \"selectionEntries\":\n    case \"sharedSelectionEntries\":\n    case \"selectionEntryGroups\":\n    case \"sharedSelectionEntryGroups\":\n    case \"entryLinks\":\n    case \"forceEntries\":\n    case \"categoryLinks\":\n    case \"categoryEntries\":\n    case \"sharedInfoGroups\":\n    case \"infoGroups\":\n    case \"catalogueLinks\":\n    case \"publications\":\n    case \"profileTypes\":\n    case \"catalogue\":\n    case \"gameSystem\":\n    case \"rules\":\n    case \"sharedRules\":\n    case \"costs\":\n    case \"costTypes\":\n    case \"sharedProfiles\":\n    case \"profiles\":\n    case \"characteristics\":\n    case \"characteristicTypes\":\n      return obj.getName();\n    case \"modifiers\":\n      return modifierToString(getModifierOrConditionParent(obj), obj);\n    case \"repeats\": {\n      const repeat = obj as BSIRepeat;\n      const parent = getModifierOrConditionParent(obj);\n      if (!parent) {\n        console.error(\"no parent for repeat\", obj);\n      }\n      return `Repeat ${repeat.repeats} times for every ${repeat.value} ${fieldToText(\n        parent,\n        repeat.field\n      )} in ${fieldToText(parent, repeat.scope)} of ${repeat.childId ? fieldToText(parent, repeat.childId) : \" any\"}`;\n    }\n    case \"conditions\":\n      return conditionToString(getModifierOrConditionParent(obj), obj);\n    case \"constraints\":\n      return conditionToString(getModifierOrConditionParent(obj), obj);\n\n    case \"modifierGroups\":\n      return `Modify...`;\n    case \"conditionGroups\":\n      return `${obj.type.toUpperCase()}`;\n\n    case \"infoLinks\":\n      return obj.target ? getName(obj.target) : obj.getName();\n    case \"associations\":\n      return `${obj.label}`;\n    default:\n      console.log(type, obj);\n      return type;\n  }\n}\n\nexport function forEachEntryRecursive(\n  entry: EditorBase,\n  callback: (entry: EditorBase, key?: string, parent?: EditorBase) => unknown\n) {\n  callback(entry);\n  const stack = [entry];\n  while (stack.length) {\n    const cur = stack.pop()!;\n    for (const key of Object.keys(cur)) {\n      if (!goodJsonKeys.has(key) || textNodeTags.has(key)) continue;\n      const val = (cur as any)[key] as EditorBase[] | undefined;\n      if (val && Array.isArray(val)) {\n        for (const e of val) {\n          stack.push(e);\n          callback(e, key, cur);\n        }\n      }\n    }\n  }\n}\n\nexport function removeEntry(entry: EditorBase) {\n  const parent = entry.parent;\n  if (parent) {\n    const arr = parent[entry.parentKey] as EditorBase[];\n    const index = arr.indexOf(entry);\n    if (index !== -1) {\n      arr.splice(index, 1);\n    }\n  }\n}\n\n/**\n * Removes an entry and fixes up the index\n * Returns all the removed data for undoing\n */\nexport async function onRemoveEntry(removed: EditorBase, manager?: BSCatalogueManager) {\n  const catalogue = removed.catalogue;\n  forEachEntryRecursive(removed, (entry, key, parent) => {\n    catalogue.removeFromIndex(entry);\n    if (entry.isLink && entry.isLink()) {\n      catalogue.unlinkLink(entry);\n      delete (entry as any).target;\n    }\n    if (entry instanceof Profile && entry.typeId) {\n      const found = entry.catalogue.findOptionById(entry.typeId);\n      if (found) {\n        entry.catalogue.removeRef(entry, found as EditorBase);\n      }\n    }\n    if (entry instanceof Condition) {\n      const scope = entry.scope;\n      const childId = entry.childId;\n      if (!validScopes.has(scope)) {\n        const found = entry.catalogue.findOptionById(entry.scope);\n        if (found) {\n          entry.catalogue.removeOtherRef(entry, found as EditorBase);\n        }\n      }\n      if (!validChildIds.has(childId)) {\n        const found = entry.catalogue.findOptionById(entry.childId);\n        if (found) {\n          entry.catalogue.removeOtherRef(entry, found as EditorBase);\n        }\n      }\n    }\n    delete (entry as any).parent;\n    delete (entry as any).catalogue;\n  });\n  if (manager && removed instanceof CatalogueLink) {\n    await catalogue.reload(manager);\n  }\n}\n\nexport async function onAddEntry(\n  entries: EditorBase[] | EditorBase,\n  catalogue: Catalogue,\n  parent: EditorBase | Catalogue,\n  manager: BSCatalogueManager\n) {\n  let reload = false;\n  for (const entry of Array.isArray(entries) ? entries : [entries]) {\n    forEachEntryRecursive(entry, (entry, key, _parent) => {\n      if (isObject(entry)) {\n        entry.parent = _parent || (parent as any);\n\n        entry.catalogue = catalogue;\n        catalogue.addToIndex(entry);\n        if (entry instanceof Link) {\n          catalogue.updateLink(entry);\n        }\n        if (entry instanceof Profile && entry.typeId) {\n          const found = entry.catalogue.findOptionById(entry.typeId);\n          if (found) {\n            entry.catalogue.addRef(entry, found as EditorBase);\n          }\n        }\n        if (entry instanceof CatalogueLink && entry.targetId) {\n          reload = true;\n        }\n        catalogue.refreshErrors(entry);\n      }\n    });\n  }\n  if (reload && parent) {\n    const catalogue = parent.catalogue || parent;\n    await catalogue.reload(manager);\n  }\n}\nexport interface EntryPathEntry {\n  key: string;\n  index: number;\n  id?: string;\n}\nexport interface EntryPathEntryExtended extends EntryPathEntry {\n  type: string;\n  display: string;\n  label?: string;\n  name?: string;\n}\n\nexport function getEntryPath(entry: EditorBase): EntryPathEntry[] {\n  if (!entry.parent && !entry.isCatalogue()) {\n    return [{ id: entry.id, key: entry.parentKey, index: 0 }];\n  }\n  const result = [] as EntryPathEntry[];\n  while (entry.parent) {\n    const parent = (entry.parent || entry.catalogue) as any;\n    result.push({\n      key: entry.parentKey,\n      index: parent[(entry as any).parentKey].indexOf(entry),\n      id: entry.id,\n    });\n    entry = entry.parent;\n  }\n  result.reverse();\n  return result;\n}\nexport function getEntryPathInfo(entry: EditorBase): EntryPathEntry[] {\n  if (!entry.parent && !entry.isCatalogue()) {\n    return [{ id: entry.id, key: entry.parentKey, index: 0 }];\n  }\n  const result = [] as EntryPathEntryExtended[];\n  do {\n    const parent = (entry.parent || entry.catalogue) as any;\n    if (parent) {\n      result.push({\n        name: entry.getName(),\n        type: entry.editorTypeName,\n        label: entry.getTypeName(),\n        display: getName(entry),\n        key: entry.parentKey,\n        index: parent[(entry as any).parentKey].indexOf(entry),\n        id: entry.id,\n      });\n    } else {\n      result.push({\n        name: entry.getName(),\n        display: getName(entry),\n        type: \"catalogue\",\n        key: \"catalogue\",\n        id: entry.id,\n        index: 0\n      });\n    }\n    entry = entry.parent as typeof entry;\n  } while (entry);\n  result.reverse();\n  return result as any;\n}\n/**\n *  Adds an entry at the specified path\n *  returns the parent\n */\nexport function addAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[], entry: EditorBase) {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  for (let i = 0; i < path.length - 1; i++) {\n    const node = path[i];\n    current = current[node.key][node.index];\n  }\n  const lastNode = path[path.length - 1];\n  if (!current[lastNode.key]) {\n    current[lastNode.key] = [];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  arr.splice(lastNode.index, 0, entry);\n  return current;\n}\nexport function getAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[]): EditorBase | undefined {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  for (const node of path) {\n    current = current[node.key];\n    if (!current) return undefined;\n    current = current[node.index];\n  }\n  return current;\n}\nexport function popAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[]): EditorBase {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  const lastNode = path[path.length - 1];\n  for (const node of path) {\n    if (node === lastNode) continue;\n    current = current[node.key][node.index];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  const result = arr.splice(lastNode.index, 1)[0];\n  if (!result) throw new Error(\"popAtEntryPath failed\");\n\n  return result;\n}\nexport function replaceAtEntryPath(catalogue: Catalogue, path: EntryPathEntry[], value: EditorBase): EditorBase {\n  let current = catalogue as any;\n  // resolve path up until the last node\n  const lastNode = path[path.length - 1];\n  for (const node of path) {\n    if (node === lastNode) continue;\n    current = current[node.key][node.index];\n  }\n  const arr = current[lastNode.key] as EditorBase[];\n  const result = arr.splice(lastNode.index, 1, value)[0];\n  if (!result) throw new Error(\"replaceAtEntryPath failed\");\n  return result;\n}\nexport function scrambleIds(catalogue: Catalogue, entry: EditorBase) {\n  const scrambled = {} as Record<string, string>;\n  forEachEntryRecursive(entry, (node, key, parentNode) => {\n    if (node.id) {\n      // if (node instanceof Constraint && !(entry instanceof Constraint)) return;\n      const currentId = node.id;\n      const newId = catalogue.generateNonConflictingId();\n      node.id = newId;\n      scrambled[currentId] = newId;\n    }\n  });\n  forEachEntryRecursive(entry, (node, key, parentNode) => {\n    if (node instanceof Condition) {\n      if (node.scope in scrambled) {\n        node.scope = scrambled[node.scope];\n      }\n      if (node.childId in scrambled) {\n        node.childId = scrambled[node.childId];\n      }\n    }\n    if (node instanceof Modifier) {\n      if (node.field in scrambled) {\n        node.field = scrambled[node.field];\n      }\n    }\n  });\n}\n\nexport function fixKey(parent: EditorBase | Catalogue, key: keyof Base, catalogueKey?: string) {\n  if (!parent.isCatalogue()) {\n    switch (key) {\n      case \"sharedRules\":\n        return \"rules\";\n      case \"sharedProfiles\":\n        return \"profiles\";\n      case \"sharedInfoGroups\":\n        return \"infoGroups\";\n      case \"sharedSelectionEntries\":\n        return \"selectionEntries\";\n      case \"sharedSelectionEntryGroups\":\n        return \"selectionEntryGroups\";\n      default:\n        return key;\n    }\n  } else if (catalogueKey) {\n    switch (key) {\n      case \"sharedRules\":\n      case \"rules\":\n        if ([\"sharedRules\", \"rules\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedProfiles\":\n      case \"profiles\":\n        if ([\"sharedProfiles\", \"profiles\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedInfoGroups\":\n      case \"infoGroups\":\n        if ([\"sharedInfoGroups\", \"infoGroups\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedSelectionEntries\":\n      case \"selectionEntries\":\n        if ([\"sharedSelectionEntries\", \"selectionEntries\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      case \"sharedSelectionEntryGroups\":\n      case \"selectionEntryGroups\":\n        if ([\"sharedSelectionEntryGroups\", \"selectionEntryGroups\"].includes(catalogueKey)) {\n          return catalogueKey as keyof Base;\n        }\n        return \"\";\n      default:\n        return key;\n    }\n  }\n  return key;\n}\n","import {\n  Category,\n  Force,\n  Link,\n  Base,\n  Group,\n  CategoryLink,\n  Rule,\n  Entry,\n  Profile,\n  InfoLink,\n  InfoGroup,\n  Condition,\n  Modifier,\n  ModifierGroup,\n  ProfileType,\n  Constraint,\n  Characteristic,\n} from \"./bs_main\";\nimport { Catalogue, CatalogueLink, Publication } from \"./bs_main_catalogue\";\nimport { isObject, isDefaultObject } from \"./bs_helpers\";\nimport { getTypeName } from \"./bs_editor\";\n\nexport class NoObserve {\n  get [Symbol.toStringTag](): string {\n    // Anything can go here really as long as it's not 'Object'\n    return \"ObjectNoObserve\";\n  }\n}\nexport function noObserve(): object {\n  return new NoObserve();\n}\n\nconst keyInfoCache = {} as Record<string, any>;\nfunction getKeyInfoClass(cache: Record<string, any>, parentKey: string, obj: any): any {\n  if (parentKey in cache) {\n    return cache[parentKey];\n  }\n  const _key = class extends Base {\n    get parentKey(): string {\n      return parentKey;\n    }\n    get editorTypeName(): string {\n      return getTypeName(parentKey, this);\n    }\n    toString(): string {\n      return `${this.editorTypeName} - ${this.getName()}`;\n    }\n  };\n  _key.prototype.parentKey;\n  Object.setPrototypeOf(_key.prototype, Object.getPrototypeOf(obj));\n  cache[parentKey] = _key.prototype;\n  return _key.prototype;\n}\nfunction setKeyInfo(cache: Record<string, any>, key: string, obj: any): void {\n  Object.setPrototypeOf(obj, getKeyInfoClass(cache, key, obj));\n}\nexport const protoMap = {\n  \"*\": Base.prototype,\n  // \"*\": Base.prototype,\n  catalogue: Catalogue.prototype,\n  catalogueLinks: CatalogueLink.prototype,\n  gameSystem: Catalogue.prototype,\n\n  forceEntries: Force.prototype,\n  forces: Force.prototype,\n  force: Force.prototype,\n\n  categoryEntries: Category.prototype,\n  category: Category.prototype,\n  categories: Category.prototype,\n\n  link: Link.prototype,\n  infoLinks: InfoLink.prototype,\n  categoryLinks: CategoryLink.prototype,\n\n  entry: Entry.prototype,\n  selectionEntries: Entry.prototype,\n  entryLinks: Link.prototype,\n  sharedSelectionEntries: Entry.prototype,\n\n  group: Group.prototype,\n  selectionEntryGroups: Group.prototype,\n  sharedSelectionEntryGroups: Group.prototype,\n\n  sharedRules: Rule.prototype,\n  rules: Rule.prototype,\n  rule: Rule.prototype,\n\n  profileTypes: ProfileType.prototype,\n  sharedProfiles: Profile.prototype,\n  profiles: Profile.prototype,\n  profile: Profile.prototype,\n  characteristics: Characteristic.prototype,\n  characteristic: Characteristic.prototype,\n  characteristicTypes: Base.prototype,\n  characteristicType: Base.prototype,\n\n  sharedInfoGroups: InfoGroup.prototype,\n  infoGroups: InfoGroup.prototype,\n  infoGroup: InfoGroup.prototype,\n\n  publications: Publication.prototype,\n  publication: Publication.prototype,\n\n  repeats: Condition.prototype,\n  conditions: Condition.prototype,\n  constraints: Constraint.prototype,\n  modifiers: Modifier.prototype,\n  modifierGroups: ModifierGroup.prototype,\n};\nexport const protoMapValues = Object.values(protoMap);\nexport type ProtoMap = typeof protoMap;\nexport function getPrototypeFromKey(key: string) {\n  if (key in protoMap) {\n    return protoMap[key as keyof typeof protoMap]!;\n  } else {\n    return protoMap[\"*\"];\n  }\n}\n\nexport function setPrototype<Key extends string>(\n  obj: any,\n  key: Key\n): Key extends keyof ProtoMap ? ProtoMap[Key] : ProtoMap[keyof ProtoMap] {\n  const newProto = getPrototypeFromKey(key);\n  if (newProto) {\n    Object.setPrototypeOf(obj, newProto);\n    if ((obj as any).post_init) obj.post_init();\n    if ((globalThis as any).isEditor) {\n      setKeyInfo(obj.keyInfoCache || keyInfoCache, key, obj);\n    }\n  }\n  return obj;\n}\n\nexport function setPrototypeRecursive(obj: any): void {\n  const stack = [obj];\n  while (stack.length) {\n    const current = stack.pop();\n    for (const key of Object.keys(current)) {\n      const value = current[key];\n\n      if (isObject(value)) {\n        //  If Array: Set Prototypes on each object inside array (assumes all objects if first is)\n        if (Array.isArray(value)) {\n          if (value.length && isObject(value[0])) {\n            for (let i = value.length; i--; ) {\n              const cur = value[i];\n              if (isDefaultObject(cur)) {\n                setPrototype(cur, key);\n                stack.push(cur);\n              }\n            }\n          }\n        }\n        //  If Object: Set Prototype on object\n        else {\n          if (isDefaultObject(value)) {\n            setPrototype(value, key);\n            stack.push(value);\n          }\n        }\n      }\n    }\n  }\n\n  // return result;\n}\n","import { defineStore } from \"pinia\";\nimport { Catalogue } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { BSICatalogue, BSIDataCatalogue, BSIGameSystem } from \"~/assets/shared/battlescribe/bs_types\";\nexport interface ICatalogueState {\n  edited?: boolean;\n  errors?: string[];\n  dependencies?: Dependency[];\n  dependents?: Dependency[];\n}\n\nexport interface Dependency {\n  targetId: string;\n  sourceId: string;\n  sourceName?: string;\n  importRootEntries?: boolean;\n}\n/**\n * Stores info about catalogues, wich will be persisted to disk.\n */\nexport const useCataloguesStore = defineStore(\"catalogues\", {\n  state: () => ({\n    dict: {} as Record<string, ICatalogueState>,\n    version: 1,\n  }),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    get(id: string) {\n      if (!(id in this.dict)) {\n        this.dict[id] = {};\n      }\n      return this.dict[id];\n    },\n    setEdited(id: string, bool: boolean) {\n      this.get(id).edited = bool;\n    },\n    getEdited(id: string) {\n      return this.get(id).edited;\n    },\n    setErrors(id: string, msg: string[]) {\n      this.get(id).errors = msg;\n    },\n    getErrors(id: string) {\n      return this.get(id).errors;\n    },\n    getDependents(id: string) {\n      return this.get(id).dependents;\n    },\n    updateCatalogue(catalogue: Catalogue | BSICatalogue | BSIGameSystem) {\n      const id = catalogue.id;\n      const gstId = catalogue.gameSystemId || catalogue.id;\n      const dependencies = catalogue.catalogueLinks?.map((o) => ({\n        targetId: o.targetId === gstId ? gstId : `${gstId}-${o.targetId}`,\n        sourceId: id === gstId ? gstId : `${gstId}-${id}`,\n        importRootEntries: o.importRootEntries,\n        sourceName: catalogue.name,\n      }));\n      if (catalogue.gameSystemId) {\n        dependencies?.push({\n          targetId: catalogue.gameSystemId,\n          sourceId: id,\n          importRootEntries: true,\n          sourceName: catalogue.name,\n        });\n      }\n      this.setDependencies(id, dependencies);\n    },\n    setDependencies(id: string, dependencies?: Dependency[]) {\n      const previousDependencies = this.get(id)?.dependencies;\n      if (previousDependencies) {\n        for (const dependency of previousDependencies) {\n          this.removeDependent(dependency.targetId, dependency);\n        }\n      }\n      if (dependencies) {\n        for (const dependency of dependencies) {\n          this.addDependent(dependency.targetId, dependency);\n        }\n      }\n      this.get(id).dependencies = dependencies || [];\n    },\n    setDependents(id: string, dependents: Dependency[]) {\n      this.get(id).dependents = dependents;\n    },\n    addDependent(id: string, dependency: Dependency) {\n      const state = this.get(id);\n      if (!state.dependents) state.dependents = [];\n      state.dependents.push(dependency);\n    },\n    removeDependent(id: string, dependency: Dependency) {\n      const dependents = this.get(id)?.dependents;\n      if (dependents) {\n        const idx = dependents.findIndex((o) => o.sourceId === dependency.sourceId);\n        if (idx >= 0) dependents.splice(idx, 1);\n      }\n    },\n  },\n});\n","import type { Stats } from \"fs\";\nimport type { OpenDialogOptions, OpenDialogReturnValue, MessageBoxSyncOptions } from \"electron\";\nexport function dirname(path: string) {\n  return path.replaceAll(\"\\\\\", \"/\").split(\"/\").slice(0, -1).join(\"/\");\n}\nexport function filename(path: string) {\n  const split = path.replaceAll(\"\\\\\", \"/\").split(\"/\");\n  return split[split.length - 1];\n}\nexport async function getFolderFiles(folderPath: string) {\n  if (!electron) return [];\n  return (await electron.invoke(\"getFolderFiles\", folderPath)) as Array<{\n    name: string;\n    path: string;\n    data: string;\n  }>;\n}\n// export async function getFolderFiles(folderPath: string) {\n//   if (!electron) return;\n//   try {\n//     const fileObjects = [];\n//     const isPathFile = (await electron.invoke(\"isFile\", folderPath)) as boolean;\n//     if (isPathFile) {\n//       folderPath = dirname(folderPath);\n//     }\n\n//     const entries = (await electron.invoke(\"readdirSync\", folderPath)) as string[];\n\n//     for (const entry of entries) {\n//       const filePath = `${folderPath}/${entry}`;\n\n//       try {\n//         const isFile = (await electron.invoke(\"isFile\", filePath)) as boolean;\n//         if (isFile) {\n//           const data = await electron.invoke(\"readFileSync\", filePath, isZipExtension(entry) ? undefined : \"utf-8\");\n//           const fileObject = {\n//             name: entry,\n//             data: data,\n//             path: filePath,\n//           };\n//           fileObjects.push(fileObject);\n//         }\n//       } catch (error) {\n//         console.error(\"Error reading file:\", filePath, error);\n//         continue;\n//       }\n//     }\n\n//     return fileObjects;\n//   } catch (error) {\n//     console.error(\"Error:\", error);\n//     throw error;\n//   }\n// }\nexport async function getFolderFolders(folderPath: string) {\n  if (!electron) return;\n  try {\n    const fileObjects = [];\n    const pathIsDir = (await electron.invoke(\"isDirectory\", folderPath)) as boolean;\n    if (!pathIsDir) return [];\n\n    const entries = (await electron.invoke(\"readdirSync\", folderPath)) as string[];\n\n    for (const entry of entries) {\n      const filePath = `${folderPath}/${entry}`;\n\n      try {\n        const isDir = (await electron.invoke(\"isDirectory\", filePath)) as boolean;\n        if (isDir) {\n          const fileObject = {\n            name: entry,\n            path: filePath,\n          };\n          fileObjects.push(fileObject);\n        }\n      } catch (error) {\n        console.error(\"Error reading dir:\", filePath, error);\n        continue;\n      }\n    }\n\n    return fileObjects;\n  } catch (error) {\n    console.error(\"Error:\", error);\n    throw error;\n  }\n}\n\nexport async function writeFile(filePath: string, data: string | Blob | Buffer | Uint8Array) {\n  if (!electron) return;\n  const dirPath = dirname(filePath);\n  await electron.invoke(\"mkdirSync\", dirPath, { recursive: true });\n  await electron.invoke(\"writeFileSync\", filePath, data);\n}\nexport async function deleteFile(filePath: string) {\n  if (!electron) return;\n  return await electron.invoke(\"unlinkSync\", filePath);\n}\n\nexport async function showOpenDialog(options: OpenDialogOptions) {\n  if (!electron) return;\n  return electron.invoke(\"showOpenDialog\", options) as OpenDialogReturnValue;\n}\nexport async function showMessageBox(options: MessageBoxSyncOptions) {\n  if (!electron) return;\n  return electron.invoke(\"showMessageBoxSync\", options) as number;\n}\nexport async function closeWindow() {\n  if (!electron) return;\n  return electron.invoke(\"closeWindow\");\n}\nexport async function getPath(\n  name:\n    | \"home\"\n    | \"appData\"\n    | \"userData\"\n    | \"sessionData\"\n    | \"temp\"\n    | \"exe\"\n    | \"module\"\n    | \"desktop\"\n    | \"documents\"\n    | \"downloads\"\n    | \"music\"\n    | \"pictures\"\n    | \"videos\"\n    | \"recent\"\n    | \"logs\"\n    | \"crashDumps\"\n) {\n  if (!electron) return;\n  return (await electron.invoke(\"getPath\", name)) as string;\n}\nexport async function createFolder(dirPath: string) {\n  if (!electron) return;\n  await electron.invoke(\"mkdirSync\", dirPath, { recursive: true });\n}\nlet initialized = false;\nconst watchers = {} as Record<string, (path: string, stats: Stats) => unknown>;\nexport async function watchFile(path: string, callback: (path: string, stats: Stats) => unknown) {\n  if (!electron) return;\n  if (!initialized) {\n    initialized = true;\n    electron.on(\"fileChanged\", (_: any, _path: string, _stats: Stats) => {\n      const cb = watchers[_path];\n      cb && cb(_path, _stats);\n    });\n  }\n  await electron.invoke(\"chokidarWatchFile\", path);\n  watchers[path] = callback;\n}\nexport async function unwatchFile(path: string) {\n  if (!electron) return;\n  delete watchers[path];\n  await electron.invoke(\"chokidarUnwatchFile\", path);\n}\n\nexport async function getFolderRemote(path: string): Promise<string | null> {\n  if (!electron) return null;\n  return (await electron.invoke(\"getFolderRemote\", path)) as string | null;\n}\n","import { defineStore } from \"pinia\";\nimport { getEntryPath, type EntryPathEntry, getAtEntryPath } from \"~/assets/shared/battlescribe/bs_editor\";\nimport { goodJsonKeys } from \"~/assets/shared/battlescribe/bs_main\";\nimport type { EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { get_base_from_vue_el, get_ctx } from \"./editorStore\";\n\n/**\n * This class represents a snapsnot of the editor's current state, in order to reload it for navigating around\n */\nexport interface EditorUIState {\n  selection?: EntryPathEntry[];\n  scroll?: number;\n  open: Record<string, any>;\n  catalogueId?: string;\n  systemId?: string;\n  mode?: \"edit\" | \"references\";\n}\n\nexport const useEditorUIState = defineStore(\"editor-ui\", {\n  state: () => ({\n    catalogues: {} as Record<string, EditorUIState>,\n  }),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    collapse_level(depth: number) {\n      if (depth >= 0) {\n        const deepestCls = `depth-${depth} collapsible-box opened`;\n        const results = document.documentElement.getElementsByClassName(deepestCls);\n        if (results?.length) {\n          for (const cur of results) {\n            get_ctx(cur)?.close();\n          }\n        }\n      }\n    },\n    collapse_all() {\n      this.collapse_level(1);\n      this.collapse_level(0);\n    },\n    collapse_deepest() {\n      const cls = `collapsible-box opened`;\n      const results = document.documentElement.getElementsByClassName(cls);\n      let maxDepth = -1;\n      if (results?.length) {\n        for (const cur of results) {\n          cur.classList.forEach((val) => {\n            if (val.startsWith(\"depth-\")) {\n              maxDepth = Math.max(maxDepth, parseInt(val.split(\"-\")[1]));\n            }\n          });\n        }\n      }\n      this.collapse_level(maxDepth);\n    },\n    set_state(id: string, data: Partial<EditorUIState>) {\n      // Get all open collapsible boxes and save their state\n      function find_open_recursive(elt: Element, obj: Record<string, any>, depth = 0) {\n        const cls = `depth-${depth} collapsible-box opened`;\n        const results = elt.getElementsByClassName(cls);\n        if (results?.length) {\n          for (const cur of results) {\n            const item = get_base_from_vue_el(get_ctx(cur));\n            const key = item.parentKey;\n            const parent = item.parent;\n\n            let next = obj;\n            if (parent) {\n              const arr = parent[key] as EditorBase[];\n              if (!arr || !Array.isArray(arr)) continue;\n              const index = arr.indexOf(item);\n              if (!(key in obj)) obj[key] = {};\n              const obj_arr = obj[key];\n              if (!(index in obj_arr)) obj_arr[index] = {};\n              next = obj_arr[index];\n            } else {\n              const keys = [...cur.classList].filter((o) => goodJsonKeys.has(o));\n              for (const key of keys) {\n                obj[key] = {};\n                obj[key][0] = {};\n                next = obj[key][0];\n              }\n            }\n\n            find_open_recursive(cur, next, depth + 1);\n          }\n        }\n      }\n      const open = {};\n      find_open_recursive(document.documentElement, open);\n      const result = { ...data, open: open };\n      this.$state.catalogues[id] = result;\n      return open;\n    },\n\n    get_data(id: string): Record<string, any> {\n      const current = this.$state.catalogues[id];\n      if (!current) return {};\n      return current;\n    },\n    get_root(id: string, key: string): boolean {\n      let current = this.$state.catalogues[id];\n      if (!current) return false;\n      current = current.open[key];\n      if (!current) return false;\n      return true;\n    },\n    get(id: string, path: EntryPathEntry[]): boolean {\n      if (!path.length) return false;\n      let current = this.$state.catalogues[id];\n      if (!current) return false;\n      let current_node = current.open[path[0].key];\n      if (!current_node) return false;\n      current_node = current_node[0];\n      if (!current_node) return false;\n      for (const node of path) {\n        const arr = current_node[node.key];\n        if (!arr) return false;\n        const entry = arr[node.index];\n        if (!entry) return false;\n        current_node = entry;\n      }\n      return true;\n    },\n  },\n});\n","<template>\n  <div class=\"leftPanel\">\n    <div class=\"static sticky flex items-center h-28px z-1\">\n      <span :class=\"{ grey: !store.can_back(), 'cursor-pointer': store.can_back(), 'hover-darken': store.can_back() }\"\n        class=\"bold p-4px unselectable icon\" @click=\"store.back\" title=\"Back\">\n        \n      </span>\n      <span :class=\"{\n        grey: !store.can_forward(),\n        'cursor-pointer': store.can_forward(),\n        'hover-darken': store.can_forward(),\n      }\" class=\"bold p-4px unselectable ml-4px icon\" @click=\"store.forward\" title=\"Forward\">\n        \n      </span>\n      <img :class=\"{ grey: !store.can_undo(), 'cursor-pointer': store.can_undo(), 'hover-darken': store.can_undo() }\"\n        class=\"bold p-4px unselectable ml-5px w-24px h-24px icon\" @click=\"store.undo\" title=\"Undo\"\n        src=\"/assets/icons/undo.svg\" />\n      <img :class=\"{ grey: !store.can_redo(), 'cursor-pointer': store.can_redo(), 'hover-darken': store.can_redo() }\"\n        class=\"bold p-4px unselectable ml-4px w-24px h-24px icon\" @click=\"store.redo\" title=\"Redo\"\n        src=\"/assets/icons/redo.svg\" />\n\n      <div class=\"absolute right-30px\">\n        Sort\n        <select class=\"h-24px p-2px !text-sm\" v-model=\"settings.sort\">\n          <option value=\"none\">No Sorting </option>\n          <option value=\"asc\">Ascending </option>\n          <option value=\"desc\">Descending </option>\n          <option value=\"type\">Type</option>\n        </select>\n      </div>\n      <img @click=\"uistate.collapse_all\" class=\"align-middle absolute right-0 p-2px hover-darken cursor-pointer icon\"\n        title=\"Collapse All\" src=\"/assets/icons/collapse-all.svg\" />\n      <ErrorIcon :errors=\"catalogue.errors\" showNumber clickable class=\"z-1\" />\n      <!-- <img\n        @click=\"uistate.collapse_deepest\"\n        class=\"align-middle absolute right-0 p-2px hover-darken cursor-pointer\"\n        title=\"Collapse Last Open Level\"\n        src=\"/assets/icons/collapse-all.svg\"\n      /> -->\n    </div>\n    <div class=\"top rightborder scrollable\" ref=\"scrollable\" @scroll=\"onscroll\" @keydown.capture=\"keydown\">\n      <CatalogueLeftPanelComponentsCatalogueEntry class=\"mb-40px\" :item=\"catalogue\" grouped id=\"editor-entries\"\n        :showImported=\"showImported\" />\n    </div>\n    <div class=\"bottom static\">\n      <span v-if=\"!catalogue.isGameSystem()\">\n        <input class=\"cursor-pointer\" v-model=\"showImported\" type=\"checkbox\" id=\"showimport\" />\n        <label class=\"unselectable cursor-pointer\" for=\"showimport\">Show Imported</label>\n      </span>\n      <span> &nbsp;</span>\n      <span class=\"absolute right-5px\">\n        <input class=\"cursor-pointer\" v-model=\"ignoreProfilesRules\" type=\"checkbox\" id=\"ignoreProfilesRules\" />\n        <label class=\"unselectable cursor-pointer\" for=\"ignoreProfilesRules\">Ignore Profiles/Rules</label>\n      </span>\n      <input v-model=\"filter\" ref=\"editor-searchbox\" type=\"search\" placeholder=\"search... ctrl+f\" class=\"w-full\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { EntryPathEntry, getAtEntryPath } from \"~/assets/shared/battlescribe/bs_editor\";\nimport type { Catalogue, EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { get_ctx, useEditorStore } from \"~/stores/editorStore\";\nimport { useEditorUIState } from \"~/stores/editorUIState\";\nimport { useSettingsStore } from \"~/stores/settingsState\";\nimport { forEachParent } from \"~/assets/shared/battlescribe/bs_helpers\";\n\nexport const LeftPanelDefaults = {\n  showImported: false,\n  ignoreProfilesRules: false,\n  filter: \"\",\n  scroll: 0,\n  selection: undefined as EntryPathEntry[] | undefined,\n  mode: \"edit\",\n};\n\nexport default defineComponent({\n  emits: [\"scrolltop\"],\n  setup() {\n    return { store: useEditorStore(), uistate: useEditorUIState(), settings: useSettingsStore() };\n  },\n  data() {\n    return {\n      ...LeftPanelDefaults,\n      ...this.defaults,\n      shouldScrollTo: undefined as number | undefined,\n      shouldScrollToElement: undefined as Element | undefined,\n    };\n  },\n  async mounted() {\n    this.load();\n    addEventListener(\"keydown\", this.keydown);\n    addEventListener(\"copy\", this.copy);\n    addEventListener(\"paste\", this.paste);\n    addEventListener(\"cut\", this.cut);\n  },\n  unmounted() {\n    removeEventListener(\"keydown\", this.keydown);\n    removeEventListener(\"copy\", this.copy);\n    removeEventListener(\"paste\", this.paste);\n    removeEventListener(\"cut\", this.cut);\n  },\n  props: {\n    catalogue: {\n      type: Object as PropType<Catalogue>,\n      required: true,\n    },\n    defaults: {\n      type: Object as PropType<{ showImported?: boolean }>,\n      default: {},\n    },\n  },\n  methods: {\n    onscroll(event: Event) {\n      this.scroll = (event.target as HTMLDivElement).scrollTop;\n    },\n    load() {\n      this.$nextTick(async () => {\n        this.shouldScrollTo = this.scroll;\n        if (this.selection) {\n          try {\n            let obj = getAtEntryPath(this.catalogue, this.selection);\n            const last = this.selection[this.selection.length - 1];\n            if (!obj && last.id) {\n              obj = this.catalogue.findOptionById(last.id) as EditorBase | undefined;\n            }\n            if (obj) {\n              const el = await this.store.open(obj);\n              if (el) {\n                const ctx = get_ctx(el);\n                await ctx.do_select();\n                this.store.mode = this.defaults.mode;\n                this.shouldScrollToElement = el;\n              }\n            }\n          } catch (e) {\n            console.error(e);\n          }\n        }\n      });\n    },\n    async set_scroll(scroll: number) {\n      const scrollable_el = this.$refs.scrollable as HTMLDivElement | undefined;\n      if (scrollable_el) scrollable_el.scrollTop = scroll;\n      this.$nextTick(async () => {\n        const scrollable_el = this.$refs.scrollable as HTMLDivElement | undefined;\n        if (scrollable_el) scrollable_el.scrollTop = scroll;\n      });\n      // setTimeout(() => {\n      //   const scrollable_el = this.$refs.scrollable as HTMLDivElement | undefined;\n      //   if (scrollable_el) scrollable_el.scrollTop = scroll;\n      // }, 50);\n    },\n    async scroll_to(elt: Element) {\n      elt.scrollIntoView({ block: \"nearest\", inline: \"center\" });\n\n      this.$nextTick(async () => {\n        elt.scrollIntoView({ block: \"nearest\", inline: \"center\" });\n      });\n      // setTimeout(() => {\n      //   elt.scrollIntoView({ block: \"nearest\", inline: \"center\" });\n      // }, 50);\n    },\n    should_capture_copy(e: Event) {\n      if (getSelection()?.toString()) return false;\n      return true;\n    },\n    should_capture_paste(e: Event) {\n      const TAGNAME = ((e.target as HTMLDivElement)?.tagName || \"\").toLowerCase();\n      if ([\"input\"].includes(TAGNAME)) return false;\n      if ((e.target as HTMLSpanElement)?.isContentEditable) return false;\n      if (this.$route.name !== \"catalogue\") return false;\n      return true;\n    },\n    async cut(e: ClipboardEvent) {\n      if (this.should_capture_copy(e)) {\n        e.preventDefault();\n        await this.store.cut(e);\n      }\n    },\n    async copy(e: ClipboardEvent) {\n      if (this.should_capture_copy(e)) {\n        e.preventDefault();\n        await this.store.copy(e);\n      }\n    },\n    async paste(e: ClipboardEvent) {\n      if (this.should_capture_paste(e)) {\n        e.preventDefault();\n        await this.store.paste(e);\n      }\n    },\n    async keydown(e: KeyboardEvent) {\n      if (this.$route.name !== \"catalogue\") return;\n      if (!e.target) return;\n      const tagName = (e.target as HTMLSelectElement)?.tagName?.toLowerCase();\n      const key = e.key.toLowerCase();\n      if (e.ctrlKey && key === \"f\") {\n        e.preventDefault();\n        (this.$refs[\"editor-searchbox\"] as HTMLInputElement).focus();\n      }\n      if (key === \"escape\") {\n        (this.$refs[\"editor-searchbox\"] as HTMLInputElement).blur();\n        this.store.filter = \"\";\n        this.store.update_catalogue_search(this.catalogue, this.filterData);\n      }\n      if (tagName === \"body\") {\n        if (e.ctrlKey && key === \"z\") {\n          e.preventDefault();\n          await this.store.undo();\n        }\n        if (e.ctrlKey && key === \"y\") {\n          e.preventDefault();\n          await this.store.redo();\n        }\n        // if (e.ctrlKey && key === \"x\") {\n        //   e.preventDefault();\n        //   await this.store.cut(e as any as ClipboardEvent);\n        // }\n        // if (e.ctrlKey && key === \"c\") {\n        //   e.preventDefault();\n        //   await this.store.copy(e as any as ClipboardEvent);\n        // }\n        // if (e.ctrlKey && key === \"v\") {\n        //   e.preventDefault();\n        //   await this.store.paste(e as any as ClipboardEvent);\n        // }\n        if (e.ctrlKey && key === \"d\") {\n          e.preventDefault();\n          await this.store.duplicate();\n        }\n        if (e.ctrlKey && key === \"l\") {\n          e.preventDefault();\n          await this.store.pasteLink();\n        }\n        if (key === \"delete\") {\n          e.preventDefault();\n          await this.store.remove();\n        }\n      }\n    },\n    async update(data: { filter: string; ignoreProfilesRules: boolean }) {\n      const { filter, ignoreProfilesRules } = data;\n      const prev = this.store.filtered as EditorBase[];\n      for (const p of prev) {\n        delete p.showInEditor;\n        delete p.showChildsInEditor;\n        delete p.highlight;\n        forEachParent(p as EditorBase, (parent) => {\n          delete parent.showInEditor;\n          delete p.showChildsInEditor;\n        });\n      }\n      if (filter.length > 1) {\n        this.store.set_filter(filter);\n        // let t1 = Date.now();\n        this.store.filtered = this.catalogue.findOptionsByText(filter) as EditorBase[];\n        if (ignoreProfilesRules) {\n          this.store.filtered = this.store.filtered.filter((o) => !o.isProfile() && !o.isRule() && !o.isInfoGroup());\n        }\n        // let t2 = Date.now();\n        for (const p of this.store.filtered) {\n          this.store.show(p);\n        }\n        // let t3 = Date.now();\n        await nextTick();\n        // let t4 = Date.now();\n\n        if (this.store.filtered.length < 300) {\n          for (const p of this.store.filtered) {\n            if (!p.parent) continue;\n            try {\n              await this.store.open(p as EditorBase, false, true);\n            } catch (e) {\n              continue;\n            }\n          }\n        }\n        // let t5 = Date.now();\n        // this.$nextTick(() => {\n        //   let t6 = Date.now();\n        //   console.log(\"search\", t2 - t1);\n        //   console.log(\"set display status\", t3 - t2);\n        //   console.log(\"render1\", t4 - t3);\n        //   console.log(\"open\", t5 - t4);\n        //   console.log(\"render2\", t6 - t5);\n        // });\n      } else {\n        this.store.set_filter(\"\");\n        this.store.filtered = [];\n      }\n    },\n  },\n  computed: {\n    filterData() {\n      return {\n        filter: this.filter.trim(),\n        ignoreProfilesRules: this.ignoreProfilesRules,\n      };\n    },\n  },\n  watch: {\n    filterData: {\n      handler(data) {\n        this.update(data);\n      },\n      immediate: true,\n    },\n    showImported: {\n      immediate: true,\n      handler(v) {\n        if (v) {\n          this.catalogue.imports.map((o) => o.processForEditor());\n        }\n      },\n    },\n    shouldScrollTo(val) {\n      if (val !== undefined) {\n        this.$nextTick(() => {\n          delete this.shouldScrollTo;\n          this.set_scroll(val);\n        });\n      }\n    },\n    shouldScrollToElement(val) {\n      if (val !== undefined) {\n        this.$nextTick(() => {\n          delete this.shouldScrollTo;\n          this.scroll_to(val);\n        });\n      }\n    },\n  },\n});\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.leftPanel {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n}\n\n.top {\n  position: relative;\n}\n\n.bottom {\n  position: sticky;\n  margin-top: auto;\n  bottom: 0;\n}\n\ninput:focus::placeholder {\n  color: transparent;\n}\n\n.static {\n  background-color: rgba(0, 0, 0, 0.1);\n  border: 1px solid $box_border;\n}\n\n.rightborder {\n  border-right: 1px solid $box_border;\n}\n\n.enabled {\n  cursor: pointer;\n}\n\n.grey {\n  filter: invert(50%) hue-rotate(90deg);\n}\n</style>\n","const e=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:global,t=Object.keys,n=Array.isArray;function r(e,n){return\"object\"!=typeof n||t(n).forEach((function(t){e[t]=n[t]})),e}\"undefined\"==typeof Promise||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(e,t){return i.call(e,t)}function a(e,n){\"function\"==typeof n&&(n=n(s(e))),(\"undefined\"==typeof Reflect?t:Reflect.ownKeys)(n).forEach((t=>{l(e,t,n[t])}))}const u=Object.defineProperty;function l(e,t,n,s){u(e,t,r(n&&o(n,\"get\")&&\"function\"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},s))}function c(e){return{from:function(t){return e.prototype=Object.create(t.prototype),l(e.prototype,\"constructor\",e),{extend:a.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(e,t){let n;return h(e,t)||(n=s(e))&&d(n,t)}const f=[].slice;function p(e,t,n){return f.call(e,t,n)}function y(e,t){return t(e)}function m(e){if(!e)throw new Error(\"Assertion Failed\")}function v(t){e.setImmediate?setImmediate(t):setTimeout(t,0)}function g(e,t){return e.reduce(((e,n,r)=>{var s=t(n,r);return s&&(e[s[0]]=s[1]),e}),{})}function b(e,t){if(o(e,t))return e[t];if(!t)return e;if(\"string\"!=typeof t){for(var n=[],r=0,s=t.length;r<s;++r){var i=b(e,t[r]);n.push(i)}return n}var a=t.indexOf(\".\");if(-1!==a){var u=e[t.substr(0,a)];return void 0===u?void 0:b(u,t.substr(a+1))}}function _(e,t,r){if(e&&void 0!==t&&(!(\"isFrozen\"in Object)||!Object.isFrozen(e)))if(\"string\"!=typeof t&&\"length\"in t){m(\"string\"!=typeof r&&\"length\"in r);for(var s=0,i=t.length;s<i;++s)_(e,t[s],r[s])}else{var a=t.indexOf(\".\");if(-1!==a){var u=t.substr(0,a),l=t.substr(a+1);if(\"\"===l)void 0===r?n(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=r;else{var c=e[u];c&&o(e,u)||(c=e[u]={}),_(c,l,r)}}else void 0===r?n(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function w(e){var t={};for(var n in e)o(e,n)&&(t[n]=e[n]);return t}const x=[].concat;function k(e){return x.apply([],e)}const E=\"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\".split(\",\").concat(k([8,16,32,64].map((e=>[\"Int\",\"Uint\",\"Float\"].map((t=>t+e+\"Array\")))))).filter((t=>e[t])),P=E.map((t=>e[t]));g(E,(e=>[e,!0]));let K=null;function O(e){K=\"undefined\"!=typeof WeakMap&&new WeakMap;const t=S(e);return K=null,t}function S(e){if(!e||\"object\"!=typeof e)return e;let t=K&&K.get(e);if(t)return t;if(n(e)){t=[],K&&K.set(e,t);for(var r=0,i=e.length;r<i;++r)t.push(S(e[r]))}else if(P.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var a in t=n===Object.prototype?{}:Object.create(n),K&&K.set(e,t),e)o(e,a)&&(t[a]=S(e[a]))}return t}const{toString:A}={};function C(e){return A.call(e).slice(8,-1)}const j=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\",D=\"symbol\"==typeof j?function(e){var t;return null!=e&&(t=e[j])&&t.apply(e)}:function(){return null},I={};function B(e){var t,r,s,i;if(1===arguments.length){if(n(e))return e.slice();if(this===I&&\"string\"==typeof e)return[e];if(i=D(e)){for(r=[];!(s=i.next()).done;)r.push(s.value);return r}if(null==e)return[e];if(\"number\"==typeof(t=e.length)){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const T=\"undefined\"!=typeof Symbol?e=>\"AsyncFunction\"===e[Symbol.toStringTag]:()=>!1;var R=\"undefined\"!=typeof location&&/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);function F(e,t){R=e,M=t}var M=()=>!0;const N=!new Error(\"\").stack;function q(){if(N)try{throw q.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split(\"\\n\").length),n.split(\"\\n\").slice(t).filter(M).map((e=>\"\\n\"+e)).join(\"\")):\"\"}var U=[\"Unknown\",\"Constraint\",\"Data\",\"TransactionInactive\",\"ReadOnly\",\"Version\",\"NotFound\",\"InvalidState\",\"InvalidAccess\",\"Abort\",\"Timeout\",\"QuotaExceeded\",\"Syntax\",\"DataClone\"],L=[\"Modify\",\"Bulk\",\"OpenFailed\",\"VersionChange\",\"Schema\",\"Upgrade\",\"InvalidTable\",\"MissingAPI\",\"NoSuchDatabase\",\"InvalidArgument\",\"SubTransaction\",\"Unsupported\",\"Internal\",\"DatabaseClosed\",\"PrematureCommit\",\"ForeignAwait\"].concat(U),V={VersionChanged:\"Database version changed by other database connection\",DatabaseClosed:\"Database has been closed\",Abort:\"Transaction aborted\",TransactionInactive:\"Transaction has already completed or failed\",MissingAPI:\"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"};function W(e,t){this._e=q(),this.name=e,this.message=t}function Y(e,t){return e+\". Errors: \"+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join(\"\\n\")}function z(e,t,n,r){this._e=q(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Y(e,t)}function G(e,t){this._e=q(),this.name=\"BulkError\",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Y(e,t)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+\": \"+this.message+$(this._e,2))}},toString:function(){return this.name+\": \"+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce(((e,t)=>(e[t]=t+\"Error\",e)),{});const Q=W;var X=L.reduce(((e,t)=>{var n=t+\"Error\";function r(e,r){this._e=q(),this.name=n,e?\"string\"==typeof e?(this.message=`${e}${r?\"\\n \"+r:\"\"}`,this.inner=r||null):\"object\"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=V[t]||n,this.inner=null)}return c(r).from(Q),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce(((e,t)=>(e[t+\"Error\"]=X[t],e)),{});var Z=L.reduce(((e,t)=>(-1===[\"Syntax\",\"Type\",\"Range\"].indexOf(t)&&(e[t+\"Error\"]=X[t]),e)),{});function ee(){}function te(e){return e}function ne(e,t){return null==e||e===te?t:function(n){return t(e(n))}}function re(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?re(r,this.onsuccess):r),s&&(this.onerror=this.onerror?re(s,this.onerror):s),void 0!==i?i:n}}function ie(e,t){return e===ee?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?re(n,this.onsuccess):n),r&&(this.onerror=this.onerror?re(r,this.onerror):r)}}function oe(e,t){return e===ee?t:function(n){var s=e.apply(this,arguments);r(n,s);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?re(i,this.onsuccess):i),o&&(this.onerror=this.onerror?re(o,this.onerror):o),void 0===s?void 0===a?void 0:a:r(s,a)}}function ae(e,t){return e===ee?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ue(e,t){return e===ee?t:function(){var n=e.apply(this,arguments);if(n&&\"function\"==typeof n.then){for(var r=this,s=arguments.length,i=new Array(s);s--;)i[s]=arguments[s];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=\"undefined\"==typeof Promise?[]:(()=>{let e=Promise.resolve();if(\"undefined\"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest(\"SHA-512\",new Uint8Array([0]));return[t,s(t),e]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var e=document.createElement(\"div\");new MutationObserver((()=>{qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute(\"i\",\"1\")}:()=>{setTimeout(qe,0)},ge=function(e,t){Oe.push([e,t]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:\"global\",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ct(e[0],e[1])}catch(e){}}))}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(e){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");this._listeners=[],this.onuncatched=ee,this._lib=!1;var t=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),\"function\"!=typeof e){if(e!==le)throw new TypeError(\"Not a function\");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,Ie(this,e)}const je={get:function(){var e=Ke,t=Qe;function n(n,r){var s=!e.global&&(e!==Ke||t!==Qe);const i=s&&!et();var o=new Ce(((t,o)=>{Re(this,new De(ut(n,e,s,i),ut(r,e,s,i),t,o,e))}));return R&&Ne(o,this),o}return n.prototype=le,n},set:function(e){l(this,\"then\",e&&e.prototype===le?je:{get:function(){return e},set:je.set})}};function De(e,t,n,r,s){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=s}function Ie(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError(\"A promise cannot be resolved with itself.\");var n=e._lib&&$e();t&&\"function\"==typeof t.then?Ie(e,((e,n)=>{t instanceof Ce?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Te(e)),n&&Ue()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(xe.push(t),null===e._state){var n=e._lib&&$e();t=Ee(t),e._state=!1,e._value=t,R&&null!==t&&\"object\"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=d(t,\"stack\");t._promise=e,l(t,\"stack\",{get:()=>me?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){we.some((t=>t._value===e._value))||we.push(e)}(e),Te(e),n&&Ue()}}function Te(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Re(e,t[n]);var s=e._PSD;--s.ref||s.finalize(),0===Se&&(++Se,ge((()=>{0==--Se&&Le()}),[]))}function Re(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Se,ge(Fe,[n,e,t])}else e._listeners.push(t)}function Fe(e,t,n){try{ke=t;var r,s=t._value;t._state?r=e(s):(xe.length&&(xe=[]),r=e(s),-1===xe.indexOf(s)&&function(e){var t=we.length;for(;t;)if(we[--t]._value===e._value)return void we.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{ke=null,0==--Se&&Le(),--n.psd.ref||n.psd.finalize()}}function Me(e,t,n){if(t.length===n)return t;var r=\"\";if(!1===e._state){var s,i,o=e._value;null!=o?(s=o.name||\"Error\",i=o.message||o,r=$(o,0)):(s=o,i=\"\"),t.push(s+(i?\": \"+i:\"\")+r)}return R&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Me(e._prev,t,n)),t}function Ne(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function qe(){$e()&&Ue()}function $e(){var e=be;return be=!1,_e=!1,e}function Ue(){var e,t,n;do{for(;Oe.length>0;)for(e=Oe,Oe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Oe.length>0);be=!0,_e=!0}function Le(){var e=we;we=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Ve(e){return new Ce(le,!1,e)}function We(e,t){var n=Ke;return function(){var r=$e(),s=Ke;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(s,!1),r&&Ue()}}}a(Ce.prototype,{then:je,_then:function(e,t){Re(this,new De(null,null,e,t,Ke))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return\"function\"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ve(e))):this.then(null,(e=>e&&e.name===t?n(e):Ve(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ve(t))))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var e=Me(this,[],20).join(\"\\nFrom previous: \");return null!==this._state&&(this._stack=e),e}finally{me=!1}}},timeout:function(e,t){return e<1/0?new Ce(((n,r)=>{var s=setTimeout((()=>r(new X.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,s))})):this}}),\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,\"Dexie.Promise\"),Pe.env=it(),a(Ce,{all:function(){var e=B.apply(null,arguments).map(tt);return new Ce((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((s,i)=>Ce.resolve(s).then((n=>{e[i]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Ce)return e;if(e&&\"function\"==typeof e.then)return new Ce(((t,n)=>{e.then(t,n)}));var t=new Ce(le,!0,e);return Ne(t,ke),t},reject:Ve,race:function(){var e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{e.map((e=>Ce.resolve(e).then(t,n)))}))},PSD:{get:()=>Ke,set:e=>Ke=e},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:e=>{ge=e}},rejectionMapper:{get:()=>Ee,set:e=>{Ee=e}},follow:(e,t)=>new Ce(((n,r)=>Je(((t,n)=>{var r=Ke;r.unhandleds=[],r.onunhandled=n,r.finalize=re((function(){!function(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++Se,ge((()=>{0==--Se&&Le()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),pe&&(pe.allSettled&&l(Ce,\"allSettled\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,s)=>Ce.resolve(e).then((e=>r[s]={status:\"fulfilled\",value:e}),(e=>r[s]={status:\"rejected\",reason:e})).then((()=>--n||t(r)))))}))})),pe.any&&\"undefined\"!=typeof AggregateError&&l(Ce,\"any\",(function(){const e=B.apply(null,arguments).map(tt);return new Ce(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const s=new Array(r);e.forEach(((e,i)=>Ce.resolve(e).then((e=>t(e)),(e=>{s[i]=e,--r||n(new AggregateError(s))}))))}))})));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(e,t,n,s){var i=Ke,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xe;var a=Pe.env;o.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(a.nthen,o),gthen:lt(a.gthen,o)}:{},t&&r(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ot(o,e,n,s);return 0===o.ref&&o.finalize(),u}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(0==--Ye.awaits&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(e){return Ye.echoes&&e&&e.constructor===pe?(Ze(),e.then((e=>(et(),e)),(e=>(et(),ht(e))))):e}function nt(e){++Qe,Ye.echoes&&0!=--Ye.echoes||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(e,!0)}function rt(){var e=Ge[Ge.length-1];Ge.pop(),st(e,!1)}function st(t,n){var r=Ke;if((n?!Ye.echoes||He++&&t===Ke:!He||--He&&t===Ke)||at(n?nt.bind(null,t):rt),t!==Ke&&(Ke=t,r===Pe&&(Pe.env=it()),ye)){var s=Pe.env.Promise,i=t.env;he.then=i.nthen,s.prototype.then=i.gthen,(r.global||t.global)&&(Object.defineProperty(e,\"Promise\",i.PromiseProp),s.all=i.all,s.race=i.race,s.resolve=i.resolve,s.reject=i.reject,i.allSettled&&(s.allSettled=i.allSettled),i.any&&(s.any=i.any))}}function it(){var t=e.Promise;return ye?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(e,\"Promise\"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:he.then,gthen:t.prototype.then}:{}}function ot(e,t,n,r,s){var i=Ke;try{return st(e,!0),t(n,r,s)}finally{st(i,!1)}}function at(e){fe.call(ce,e)}function ut(e,t,n,r){return\"function\"!=typeof e?e:function(){var s=Ke;n&&Ze(),st(t,!0);try{return e.apply(this,arguments)}finally{st(s,!1),r&&at(et)}}}function lt(e,t){return function(n,r){return e.call(this,ut(n,t),ut(r,t))}}-1===(\"\"+fe).indexOf(\"[native code]\")&&(Ze=et=ee);function ct(t,n){var s;try{s=n.onuncatched(t)}catch(e){}if(!1!==s)try{var i,o={promise:n,reason:t};if(e.document&&document.createEvent?((i=document.createEvent(\"Event\")).initEvent(\"unhandledrejection\",!0,!0),r(i,o)):e.CustomEvent&&r(i=new CustomEvent(\"unhandledrejection\",{detail:o}),o),i&&e.dispatchEvent&&(dispatchEvent(i),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(i)}catch(e){}R&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch(e){}}var ht=Ce.reject;function dt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Ke.letThrough||e._vip)){var s=e._createTransaction(t,n,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(s){return s.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>dt(e,t,n,r)))):ht(s)}return s._promise(t,((e,t)=>Je((()=>(Ke.trans=s,r(e,t,s)))))).then((e=>s._completion.then((()=>e))))}if(e._state.openComplete)return ht(new X.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new X.DatabaseClosed);e.open().catch(ee)}return e._state.dbReadyPromise.then((()=>dt(e,t,n,r)))}const ft=String.fromCharCode(65535),pt=\"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\",yt=[],mt=\"undefined\"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=e=>!/(dexie\\.js|dexie\\.min\\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return\"string\"!=typeof e||/\\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=O(t))[e],t)}class kt{_trans(e,t,n){const r=this._tx||Ke.trans,s=this.name;function i(e,n,r){if(!r.schema[s])throw new X.NotFound(\"Table \"+s+\" not part of transaction\");return t(r.idbtrans,r)}const o=$e();try{return r&&r.db===this.db?r===Ke.trans?r._promise(e,i,n):Je((()=>r._promise(e,i,n)),{trans:r,transless:Ke.transless||Ke}):dt(this.db,e,[this.name],i)}finally{o&&Ue()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans(\"readonly\",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if(\"string\"==typeof e)return new this.db.WhereClause(this,e);if(n(e))return new this.db.WhereClause(this,`[${e.join(\"+\")}]`);const r=t(e);if(1===r.length)return this.where(r[0]).equals(e[r[0]]);const s=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&r.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>r.indexOf(e)>=0))))[0];if(s&&this.db._maxKey!==ft)return this.where(s.name).equals(s.keyPath.map((t=>e[t])));!s&&R&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${r.join(\"+\")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}}const[u,l]=r.reduce((([t,r],s)=>{const o=i[s],u=e[s];return[t||o,t||!o?_t(r,o&&o.multi?e=>{const t=b(e,s);return n(t)&&t.some((e=>a(u,e)))}:e=>a(u,b(e,s))):r]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):s?this.filter(l):this.where(r).equals(\"\")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,n(e)?`[${e.join(\"+\")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(o(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook(\"reading\",t),e}defineClass(){return this.mapToClass((function(e){r(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"add\",keys:null!=t?[t]:null,values:[s]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,r){if(\"object\"!=typeof e||n(e))return this.where(\":id\").equals(e).modify(r);{const n=b(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new X.InvalidArgument(\"Given object does not contain its primary key\"));try{\"function\"!=typeof r?t(r).forEach((t=>{_(e,t,r[t])})):r(e,{value:e,primKey:n})}catch(e){}return this.where(\":id\").equals(n).modify(r)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let s=e;return r&&n&&(s=xt(r)(e)),this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"put\",values:[s],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:[e]}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}clear(){return this._trans(\"readwrite\",(e=>this.core.mutate({trans:e,type:\"deleteRange\",range:wt}))).then((e=>e.numFailures?Ce.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans(\"readonly\",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"add\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkAdd(): ${e} of ${o} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,s=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans(\"readwrite\",(t=>{const{auto:n,keyPath:i}=this.schema.primKey;if(i&&r)throw new X.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");if(r&&r.length!==e.length)throw new X.InvalidArgument(\"Arguments objects and keys must have the same length\");const o=e.length;let a=i&&n?e.map(xt(i)):e;return this.core.mutate({trans:t,type:\"put\",keys:r,values:a,wantResults:s}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return s?t:n;throw new G(`${this.name}.bulkPut(): ${e} of ${o} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans(\"readwrite\",(t=>this.core.mutate({trans:t,type:\"delete\",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new G(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Et(e){var r={},s=function(t,n){if(n){for(var s=arguments.length,i=new Array(s-1);--s;)i[s-1]=arguments[s];return r[t].subscribe.apply(null,i),e}if(\"string\"==typeof t)return r[t]};s.addEventType=a;for(var i=1,o=arguments.length;i<o;++i)a(arguments[i]);return s;function a(e,t,n){if(\"object\"==typeof e)return u(e);t||(t=ae),n||(n=ee);var i={subscribers:[],fire:n,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=t(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(t,n)}};return r[e]=s[e]=i,i}function u(e){t(e).forEach((function(t){var r=e[t];if(n(r))a(t,e[t][0],e[t][1]);else{if(\"asap\"!==r)throw new X.InvalidArgument(\"Invalid event config\");var s=a(t,te,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];s.subscribers.forEach((function(e){v((function(){e.apply(null,t)}))}))}))}}))}}function Pt(e,t){return c(t).from({prototype:e}),t}function Kt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ot(e,t){e.filter=_t(e.filter,t)}function St(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function At(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema(\"KeyPath \"+e.index+\" on object store \"+t.name+\" is not indexed\");return n}function Ct(e,t,n){const r=At(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:\"prev\"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){const s=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const i={},a=(e,n,r)=>{if(!s||s(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var a=n.primaryKey,u=\"\"+a;\"[object ArrayBuffer]\"===u&&(u=\"\"+new Uint8Array(a)),o(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(a,n),Dt(Ct(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Dt(Ct(e,r,n),_t(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Dt(e,t,n,r){var s=We(r?(e,t,s)=>n(r(e),t,s):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=ee}),(t=>{e.fail(t),n=ee}))||s(e.value,e,(e=>n=e)),n()}))}))}function It(e,t){try{const n=Bt(e),r=Bt(t);if(n!==r)return\"Array\"===n?1:\"Array\"===r?-1:\"binary\"===n?1:\"binary\"===r?-1:\"string\"===n?1:\"string\"===r?-1:\"Date\"===n?1:\"Date\"!==r?NaN:-1;switch(n){case\"number\":case\"Date\":case\"string\":return e>t?1:e<t?-1:0;case\"binary\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(Tt(e),Tt(t));case\"Array\":return function(e,t){const n=e.length,r=t.length,s=n<r?n:r;for(let n=0;n<s;++n){const r=It(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Bt(e){const t=typeof e;if(\"object\"!==t)return t;if(ArrayBuffer.isView(e))return\"binary\";const n=C(e);return\"ArrayBuffer\"===n?\"binary\":n}function Tt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Rt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans(\"readonly\",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans(\"readwrite\",e,\"locked\")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return jt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&r(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>jt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Kt(t,!0))return n.count({trans:e,query:{index:At(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return jt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(\".\").reverse(),r=n[0],s=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o=\"next\"===this._ctx.dir?1:-1;function a(e,t){var n=i(e,s),r=i(t,s);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=At(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return jt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Kt(t)?St(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):St(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),St(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Ot(this._ctx,(function(n,r,s){return!e(n.value)||(r(s),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Ot(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=\"prev\"===this._ctx.dir?\"next\":\"prev\",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique=\"unique\",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if(\"next\"===t.dir&&Kt(t,!0)&&t.limit>0)return this._read((e=>{var n=At(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique=\"unique\",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ot(this._ctx,(function(e){var t=e.primaryKey.toString(),r=o(n,t);return n[t]=!0,!r})),this}modify(e){var n=this._ctx;return this._write((r=>{var s;if(\"function\"==typeof e)s=e;else{var i=t(e),o=i.length;s=function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s];b(t,s)!==a&&(_(t,s,a),n=!0)}return n}}const a=n.table.core,{outbound:u,extractKey:l}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,h=[];let d=0;const f=[],p=(e,n)=>{const{failures:r,numFailures:s}=n;d+=e-s;for(let e of t(r))h.push(r[e])};return this.clone().primaryKeys().then((t=>{const i=o=>{const h=Math.min(c,t.length-o);return a.getMany({trans:r,keys:t.slice(o,o+h),cache:\"immutable\"}).then((d=>{const f=[],y=[],m=u?[]:null,v=[];for(let e=0;e<h;++e){const n=d[e],r={value:O(n),primKey:t[o+e]};!1!==s.call(r,r.value,r)&&(null==r.value?v.push(t[o+e]):u||0===It(l(n),l(r.value))?(y.push(r.value),u&&m.push(t[o+e])):(v.push(t[o+e]),f.push(r.value)))}const g=Kt(n)&&n.limit===1/0&&(\"function\"!=typeof e||e===Ft)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&a.mutate({trans:r,type:\"add\",values:f}).then((e=>{for(let t in e.failures)v.splice(parseInt(t),1);p(f.length,e)}))).then((()=>(y.length>0||g&&\"object\"==typeof e)&&a.mutate({trans:r,type:\"put\",keys:m,values:y,criteria:g,changeSpec:\"function\"!=typeof e&&e}).then((e=>p(y.length,e))))).then((()=>(v.length>0||g&&e===Ft)&&a.mutate({trans:r,type:\"delete\",keys:v,criteria:g}).then((e=>p(v.length,e))))).then((()=>t.length>o+h&&i(o+c)))}))};return i(0).then((()=>{if(h.length>0)throw new z(\"Error modifying one or more objects\",h,d,f);return t.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Kt(e)&&(e.isPrimKey&&!gt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:n,query:{index:r,range:s}}).then((t=>e.table.core.mutate({trans:n,type:\"deleteRange\",range:s}).then((({failures:e,lastResult:n,results:r,numFailures:s})=>{if(s)throw new z(\"Could not delete some values\",Object.keys(e).map((t=>e[t])),t-s);return t-s}))))})):this.modify(Ft)}}const Ft=(e,t)=>t.value=null;function Mt(e,t){return e<t?-1:e===t?0:1}function Nt(e,t){return e>t?-1:e===t?0:1}function qt(e,t,n){var r=e instanceof Yt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function $t(e){return new e.Collection(e,(()=>Wt(\"\"))).limit(0)}function Ut(e,t,n,r,s,i){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var l=t[u];if(l!==r[u])return s(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):s(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;s(e[u],l)<0&&(a=u)}return o<r.length&&\"next\"===i?e+n.substr(e.length):o<e.length&&\"prev\"===i?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function Lt(e,t,n,r){var s,i,o,a,u,l,c,h=n.length;if(!n.every((e=>\"string\"==typeof e)))return qt(e,\"String expected.\");function d(e){s=function(e){return\"next\"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),i=function(e){return\"next\"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),o=\"next\"===e?Mt:Nt;var t=n.map((function(e){return{lower:i(e),upper:s(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c=\"next\"===e?\"\":r}d(\"next\");var f=new e.Collection(e,(()=>Vt(a[0],u[h-1]+r)));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,r){var s=e.key;if(\"string\"!=typeof s)return!1;var d=i(s);if(t(d,u,p))return!0;for(var f=null,y=p;y<h;++y){var m=Ut(s,d,a[y],u[y],o,l);null===m&&null===f?p=y+1:(null===f||o(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Vt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Wt(e){return{type:1,lower:e,upper:e}}class Yt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?$t(this):new this.Collection(this,(()=>Vt(e,t,!n,!r)))}catch(e){return qt(this,pt)}}equals(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Wt(e)))}above(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!0)))}aboveOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(e,void 0,!1)))}below(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?qt(this,pt):new this.Collection(this,(()=>Vt(void 0,e)))}startsWith(e){return\"string\"!=typeof e?qt(this,\"String expected.\"):this.between(e,e+ft,!0,!0)}startsWithIgnoreCase(e){return\"\"===e?this.startsWith(e):Lt(this,((e,t)=>0===e.indexOf(t[0])),[e],ft)}equalsIgnoreCase(e){return Lt(this,((e,t)=>e===t[0]),[e],\"\")}anyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>-1!==t.indexOf(e)),e,\"\")}startsWithAnyOfIgnoreCase(){var e=B.apply(I,arguments);return 0===e.length?$t(this):Lt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,ft)}anyOf(){const e=B.apply(I,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return qt(this,pt)}if(0===e.length)return $t(this);const n=new this.Collection(this,(()=>Vt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t=\"next\"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,s,i)=>{const o=n.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return s(i),!1;return 0===t(o,e[r])||(s((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-(1/0),e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return qt(this,pt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-(1/0),t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,s=this._descending,i=this._min,o=this._max;if(0===e.length)return $t(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return qt(this,\"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\",X.InvalidArgument);const a=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function h(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,s=e.length;for(;r<s;++r){const s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=i(s[0],t[0]),s[1]=o(s[1],t[1]);break}}return r===s&&e.push(t),e}),[]),l.sort(h)}catch(e){return qt(this,pt)}let d=0;const f=u?e=>r(e,l[d][1])>0:e=>r(e,l[d][1])>=0,p=a?e=>s(e,l[d][0])>0:e=>s(e,l[d][0])>=0;let y=f;const m=new this.Collection(this,(()=>Vt(l[0][0],l[l.length-1][1],!a,!u)));return m._ondirectionchange=e=>{\"next\"===e?(y=f,c=r):(y=p,c=s),l.sort(h)},m._addAlgorithm(((e,t,n)=>{for(var s=e.key;y(s);)if(++d,d===l.length)return t(n),!1;return!!function(e){return!f(e)&&!p(e)}(s)||(0===this._cmp(s,l[d][1])||0===this._cmp(s,l[d][0])||t((()=>{c===r?e.continue(l[d][0]):e.continue(l[d][1])})),!1)})),m}startsWithAnyOf(){const e=B.apply(I,arguments);return e.every((e=>\"string\"==typeof e))?0===e.length?$t(this):this.inAnyRange(e.map((e=>[e,e+ft]))):qt(this,\"startsWithAnyOf() only works with strings\")}}function zt(e){return We((function(t){return Gt(t),e(t.target.error),!1}))}function Gt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Ht=Et(null,\"storagemutated\");class Qt{_lock(){return m(!Ke.global),++this._reculock,1!==this._reculock||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),0==--this._reculock)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ot(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(m(!this.idbtrans),!e&&!t)switch(n&&n.name){case\"DatabaseClosedError\":throw new X.DatabaseClosed(n);case\"MissingAPIError\":throw new X.MissingAPI(n.message,n);default:throw new X.OpenFailed(n)}if(!this.active)throw new X.TransactionInactive;return m(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We((t=>{Gt(t),this._reject(e.error)})),e.onabort=We((t=>{Gt(t),this.active&&this._reject(new X.Abort(e.error)),this.active=!1,this.on(\"abort\").fire(t)})),e.oncomplete=We((()=>{this.active=!1,this._resolve(),\"mutatedParts\"in e&&Ht.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if(\"readwrite\"===e&&\"readwrite\"!==this.mode)return ht(new X.ReadOnly(\"Transaction is readonly\"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce(((r,s)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,s)},Ke])}));if(n)return Je((()=>{var e=new Ce(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Ce(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Ce.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var s=t._waitingFor;return new Ce(((e,r)=>{n.then((n=>t._waitingQueue.push(We(e.bind(null,n)))),(e=>t._waitingQueue.push(We(r.bind(null,e))))).finally((()=>{t._waitingFor===s&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(o(t,e))return t[e];const n=this.schema[e];if(!n)throw new X.NotFound(\"Table \"+e+\" not part of transaction\");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function Xt(e,t,n,r,s,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:s,compound:i,src:(n&&!o?\"&\":\"\")+(r?\"*\":\"\")+(s?\"++\":\"\")+Jt(t)}}function Jt(e){return\"string\"==typeof e?e:e?\"[\"+[].join.call(e,\"+\")+\"]\":\"\"}function Zt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:g(n,(e=>[e.name,e]))}}let en=e=>{try{return e.only([[]]),en=()=>[[]],[[]]}catch(e){return en=()=>ft,ft}};function tn(e){return null==e?()=>{}:\"string\"==typeof e?function(e){return 1===e.split(\".\").length?t=>t[e]:t=>b(t,e)}(e):t=>b(t,e)}function nn(e){return[].slice.call(e)}let rn=0;function sn(e){return null==e?\":id\":\"string\"==typeof e?e:`[${e.join(\"+\")}]`}function on(e,t,r){function s(e){if(3===e.type)return null;if(4===e.type)throw new Error(\"Cannot convert never type to IDBKeyRange\");const{lower:n,upper:r,lowerOpen:s,upperOpen:i}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!i):void 0===r?t.lowerBound(n,!!s):t.bound(n,r,!!s,!!i)}const{schema:i,hasGetAll:o}=function(e,t){const r=nn(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:r}=e,s=n(t),i=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:s,keyPath:t,autoIncrement:r,unique:!0,extractKey:tn(t)},indexes:nn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:r,multiEntry:s,keyPath:i}=e,a={name:t,compound:n(i),keyPath:i,unique:r,multiEntry:s,extractKey:tn(i)};return o[sn(i)]=a,a})),getIndexByKeyPath:e=>o[sn(e)]};return o[\":id\"]=a.primaryKey,null!=t&&(o[sn(t)]=a.primaryKey),a}))},hasGetAll:r.length>0&&\"getAll\"in t.objectStore(r[0])&&!(\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604)}}(e,r),a=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:r,values:i,range:o}){return new Promise(((a,u)=>{a=We(a);const l=e.objectStore(t),c=null==l.keyPath,h=\"put\"===n||\"add\"===n;if(!h&&\"delete\"!==n&&\"deleteRange\"!==n)throw new Error(\"Invalid operation type: \"+n);const{length:d}=r||i||{length:1};if(r&&i&&r.length!==i.length)throw new Error(\"Given keys array must have same length as given values array.\");if(0===d)return a({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const p=[],y=[];let m=0;const v=e=>{++m,Gt(e)};if(\"deleteRange\"===n){if(4===o.type)return a({numFailures:m,failures:y,results:[],lastResult:void 0});3===o.type?p.push(f=l.clear()):p.push(f=l.delete(s(o)))}else{const[e,t]=h?c?[i,r]:[i,null]:[r,null];if(h)for(let r=0;r<d;++r)p.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=v;else for(let t=0;t<d;++t)p.push(f=l[n](e[t])),f.onerror=v}const g=e=>{const t=e.target.result;p.forEach(((e,t)=>null!=e.error&&(y[t]=e.error))),a({numFailures:m,failures:y,results:\"delete\"===n?r:p.map((e=>e.result)),lastResult:t})};f.onerror=e=>{v(e),g(e)},f.onsuccess=g}))},getMany:({trans:e,keys:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t),o=n.length,a=new Array(o);let u,l=0,c=0;const h=e=>{const t=e.target;a[t._pos]=t.result,++c===l&&r(a)},d=zt(s);for(let e=0;e<o;++e)null!=n[e]&&(u=i.get(n[e]),u._pos=e,u.onsuccess=h,u.onerror=d,++l);0===l&&r(a)})),get:({trans:e,key:n})=>new Promise(((r,s)=>{r=We(r);const i=e.objectStore(t).get(n);i.onsuccess=e=>r(e.target.result),i.onerror=zt(s)})),query:function(e){return n=>new Promise(((r,i)=>{r=We(r);const{trans:o,values:a,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:h,range:d}=l,f=o.objectStore(t),p=h.isPrimaryKey?f:f.index(h.name),y=s(d);if(0===u)return r({result:[]});if(e){const e=a?p.getAll(y,c):p.getAllKeys(y,c);e.onsuccess=e=>r({result:e.target.result}),e.onerror=zt(i)}else{let e=0;const t=a||!(\"openKeyCursor\"in p)?p.openCursor(y):p.openKeyCursor(y),n=[];t.onsuccess=s=>{const i=t.result;return i?(n.push(a?i.value:i.primaryKey),++e===u?r({result:n}):void i.continue()):r({result:n})},t.onerror=zt(i)}}))}(o),openCursor:function({trans:e,values:n,query:r,reverse:i,unique:o}){return new Promise(((a,u)=>{a=We(a);const{index:l,range:c}=r,h=e.objectStore(t),d=l.isPrimaryKey?h:h.index(l.name),f=i?o?\"prevunique\":\"prev\":o?\"nextunique\":\"next\",p=n||!(\"openKeyCursor\"in d)?d.openCursor(s(c),f):d.openKeyCursor(s(c),f);p.onerror=zt(u),p.onsuccess=We((t=>{const n=p.result;if(!n)return void a(null);n.___id=++rn,n.done=!1;const r=n.continue.bind(n);let s=n.continuePrimaryKey;s&&(s=s.bind(n));const i=n.advance.bind(n),o=()=>{throw new Error(\"Cursor not stopped\")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error(\"Cursor not started\")},n.fail=We(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=We(e),p.onerror=zt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=o,e(t)}})),a=()=>{if(p.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error(\"Cursor behind last entry\")},n.stop()};return p.onsuccess=We((e=>{p.onsuccess=a,a()})),n.continue=r,n.continuePrimaryKey=s,n.advance=i,a(),t},a(n)}),u)}))},count({query:e,trans:n}){const{index:r,range:i}=e;return new Promise(((e,o)=>{const a=n.objectStore(t),u=r.isPrimaryKey?a:a.index(r.name),l=s(i),c=l?u.count(l):u.count();c.onsuccess=We((t=>e(t.target.result))),c.onerror=zt(o)}))}}}(e))),u={};return a.forEach((e=>u[e.name]=e)),{stack:\"dbcore\",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:en(t),schema:i}}function an({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},s){const i=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(on(t,n,s),e.dbcore);return{dbcore:i}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function un({_novip:e},t,n,r){n.forEach((n=>{const s=r[n];t.forEach((t=>{const r=d(t,n);(!r||\"value\"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?l(t,n,{get(){return this.table(n)},set(e){u(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,s))}))}))}function ln({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function cn(e,t){return e._cfg.version-t._cfg.version}function hn(e,n,r,s){const i=e._dbSchema,o=e._createTransaction(\"readwrite\",e._storeNames,i);o.create(r),o._completion.catch(s);const a=o._reject.bind(o),u=Ke.transless||Ke;Je((()=>{Ke.trans=o,Ke.transless=u,0===n?(t(i).forEach((e=>{fn(r,e,i[e].primKey,i[e].indexes)})),an(e,r),Ce.follow((()=>e.on.populate.fire(o))).catch(a)):function({_novip:e},n,r,s){const i=[],o=e._versions;let a=e._dbSchema=yn(e,e.idbdb,s),u=!1;function l(){return i.length?Ce.resolve(i.shift()(r.idbtrans)).then(l):Ce.resolve()}return o.filter((e=>e._cfg.version>=n)).forEach((o=>{i.push((()=>{const i=a,l=o._cfg.dbschema;mn(e,i,s),mn(e,l,s),a=e._dbSchema=l;const c=dn(i,l);c.add.forEach((e=>{fn(s,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new X.Upgrade(\"Not yet support for changing primary key\");{const t=s.objectStore(e.name);e.add.forEach((e=>pn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),pn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const h=o._cfg.contentUpgrade;if(h&&o._cfg.version>n){an(e,s),r._memoizedTables={},u=!0;let n=w(l);c.del.forEach((e=>{n[e]=i[e]})),ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],t(n),n),r.schema=n;const o=T(h);let a;o&&Ze();const d=Ce.follow((()=>{if(a=h(r),a&&o){var e=et.bind(null,null);a.then(e,e)}}));return a&&\"function\"==typeof a.then?Ce.resolve(a):d.then((()=>a))}})),i.push((t=>{if(!u||!vt){!function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(o._cfg.dbschema,t)}ln(e,[e.Transaction.prototype]),un(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),r.schema=e._dbSchema}))})),l().then((()=>{var e,n;n=s,t(e=a).forEach((t=>{n.db.objectStoreNames.contains(t)||fn(n,t,e[t].primKey,e[t].indexes)}))}))}(e,n,o,r).catch(a)}))}function dn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const s=e[r],i=t[r];if(s){const e={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(\"\"+(s.primKey.keyPath||\"\")!=\"\"+(i.primKey.keyPath||\"\")||s.primKey.auto!==i.primKey.auto&&!mt)e.recreate=!0,n.change.push(e);else{const t=s.idxByName,r=i.idxByName;let o;for(o in t)r[o]||e.del.push(o);for(o in r){const n=t[o],s=r[o];n?n.src!==s.src&&e.change.push(s):e.add.push(s)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,i])}return n}function fn(e,t,n,r){const s=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>pn(s,e))),s}function pn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function yn(e,t,n){const r={};return p(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let s=t.keyPath;const i=Xt(Jt(s),s||\"\",!1,!1,!!t.autoIncrement,s&&\"string\"!=typeof s,!0),o=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);s=n.keyPath;var a=Xt(n.name,s,!!n.unique,!!n.multiEntry,!1,s&&\"string\"!=typeof s,!1);o.push(a)}r[e]=Zt(e,i,o)})),r}function mn({_novip:t},n,r){const s=r.db.objectStoreNames;for(let e=0;e<s.length;++e){const i=s[e],o=r.objectStore(i);t._hasGetAll=\"getAll\"in o;for(let e=0;e<o.indexNames.length;++e){const t=o.indexNames[e],r=o.index(t).keyPath,s=\"string\"==typeof r?r:\"[\"+p(r).join(\"+\")+\"]\";if(n[i]){const e=n[i].idxByName[s];e&&(e.name=t,delete n[i].idxByName[s],n[i].idxByName[t]=e)}}}\"undefined\"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1]<604&&(t._hasGetAll=!1)}class vn{_parseStoresSpec(e,r){t(e).forEach((t=>{if(null!==e[t]){var s=e[t].split(\",\").map(((e,t)=>{const r=(e=e.trim()).replace(/([&*]|\\+\\+)/g,\"\"),s=/^\\[/.test(r)?r.match(/^\\[(.*)\\]$/)[1].split(\"+\"):r;return Xt(r,s||null,/\\&/.test(e),/\\*/.test(e),/\\+\\+/.test(e),n(s),0===t)})),i=s.shift();if(i.multi)throw new X.Schema(\"Primary key cannot be multi-valued\");s.forEach((e=>{if(e.auto)throw new X.Schema(\"Only primary key can be marked as autoIncrement (++)\");if(!e.keyPath)throw new X.Schema(\"Index must have a name and cannot be an empty string\")})),r[t]=Zt(t,i,s)}}))}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;const s=n._versions,i={};let o={};return s.forEach((e=>{r(i,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(i,o)})),n._dbSchema=o,ln(n,[n._allTables,n,n.Transaction.prototype]),un(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],t(o),o),n._storeNames=t(o),this}upgrade(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,e),this}}function gn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new $n(\"__dbnames\",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:\"name\"})),n.table(\"dbnames\")}function bn(e){return e&&\"function\"==typeof e.databases}function _n(e){return Je((function(){return Ke.letThrough=!0,e()}))}function wn(){var e;return!navigator.userAgentData&&/Safari\\//.test(navigator.userAgent)&&!/Chrom(e|ium)\\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function xn(e){const n=e._state,{indexedDB:r}=e._deps;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((()=>n.dbOpenError?ht(n.dbOpenError):e));R&&(n.openCanceller._stackHolder=q()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;const s=n.openCanceller;function i(){if(n.openCanceller!==s)throw new X.DatabaseClosed(\"db.open() was cancelled\")}let o=n.dbReadyResolve,a=null,u=!1;return Ce.race([s,(\"undefined\"==typeof navigator?Ce.resolve():wn()).then((()=>new Ce(((s,o)=>{if(i(),!r)throw new X.MissingAPI;const l=e.name,c=n.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!c)throw new X.MissingAPI;c.onerror=zt(o),c.onblocked=We(e._fireOnBlocked),c.onupgradeneeded=We((t=>{if(a=c.transaction,n.autoSchema&&!e._options.allowEmptyDB){c.onerror=Gt,a.abort(),c.result.close();const e=r.deleteDatabase(l);e.onsuccess=e.onerror=We((()=>{o(new X.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{a.onerror=zt(o);var s=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;u=s<1,e._novip.idbdb=c.result,hn(e,s/10,a,o)}}),o),c.onsuccess=We((()=>{a=null;const r=e._novip.idbdb=c.result,i=p(r.objectStoreNames);if(i.length>0)try{const s=r.transaction(1===(o=i).length?o[0]:o,\"readonly\");n.autoSchema?function({_novip:e},n,r){e.verno=n.version/10;const s=e._dbSchema=yn(0,n,r);e._storeNames=p(n.objectStoreNames,0),un(e,[e._allTables],t(s),s)}(e,r,s):(mn(e,e._dbSchema,s),function(e,t){const n=dn(yn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,s)||console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\")),an(e,s)}catch(e){}var o;yt.push(e),r.onversionchange=We((t=>{n.vcFired=!0,e.on(\"versionchange\").fire(t)})),r.onclose=We((t=>{e.on(\"close\").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).put({name:n}).catch(ee)}(e._deps,l),s()}),o)}))))]).then((()=>(i(),n.onReadyBeingFired=[],Ce.resolve(_n((()=>e.on.ready.fire(e.vip)))).then((function t(){if(n.onReadyBeingFired.length>0){let r=n.onReadyBeingFired.reduce(ue,ee);return n.onReadyBeingFired=[],Ce.resolve(_n((()=>r(e.vip)))).then(t)}}))))).finally((()=>{n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((()=>e)).catch((t=>{n.dbOpenError=t;try{a&&a.abort()}catch(e){}return s===n.openCanceller&&e._close(),ht(t)})).finally((()=>{n.openComplete=!0,o()}))}function kn(e){var t=t=>e.next(t),r=i(t),s=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),o=i.value;return i.done?o:o&&\"function\"==typeof o.then?o.then(r,s):n(o)?Promise.all(o).then(r,s):r(o)}}return i(t)()}function En(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument(\"Too few arguments\");for(var s=new Array(r-1);--r;)s[r-1]=arguments[r];n=s.pop();var i=k(s);return[e,i,n]}function Pn(e,t,n,r,s){return Ce.resolve().then((()=>{const i=Ke.transless||Ke,o=e._createTransaction(t,n,e._dbSchema,r),a={trans:o,transless:i};if(r)o.idbtrans=r.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===H.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn(\"Dexie: Need to reopen db\"),e._close(),e.open().then((()=>Pn(e,t,n,null,s)))):ht(r)}const u=T(s);let l;u&&Ze();const c=Ce.follow((()=>{if(l=s.call(o,o),l)if(u){var e=et.bind(null,null);l.then(e,e)}else\"function\"==typeof l.next&&\"function\"==typeof l.throw&&(l=kn(l))}),a);return(l&&\"function\"==typeof l.then?Ce.resolve(l).then((e=>o.active?e:ht(new X.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))):c.then((()=>l))).then((e=>(r&&o._resolve(),o._completion.then((()=>e))))).catch((e=>(o._reject(e),ht(e))))}))}function Kn(e,t,r){const s=n(e)?e.slice():[e];for(let e=0;e<r;++e)s.push(t);return s}const On={stack:\"dbcore\",name:\"VirtualIndexMiddleware\",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,s={},i=[];function o(e,t,n){const r=sn(e),a=s[r]=s[r]||[],u=null==e?0:\"string\"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:tn(e),unique:!l&&n.unique};if(a.push(c),c.isPrimaryKey||i.push(c),u>1){o(2===u?e[0]:e.slice(0,u-1),t+1,n)}return a.sort(((e,t)=>e.keyTail-t.keyTail)),c}const a=o(r.primaryKey.keyPath,0,r.primaryKey);s[\":id\"]=[a];for(const e of r.indexes)o(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,s=n.keyTail,{type:1===r.type?2:r.type,lower:Kn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,s),lowerOpen:!0,upper:Kn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,s),upperOpen:!0})}}:t;var r,s}const l={...n,schema:{...r,primaryKey:a,indexes:i,getIndexByKeyPath:function(e){const t=s[sn(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:s,keyLength:i}=t.query.index;if(!s)return n.openCursor(t);return n.openCursor(u(t)).then((n=>n&&function(n){const s=Object.create(n,{continue:{value:function(s){null!=s?n.continue(Kn(s,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,s){n.continuePrimaryKey(Kn(t,e.MAX_KEY,r),s)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===i?e[0]:e.slice(0,i)}},value:{get:()=>n.value}});return s}(n)))}};return l}}}};function Sn(e,n,r,s){return r=r||{},s=s||\"\",t(e).forEach((t=>{if(o(n,t)){var i=e[t],a=n[t];if(\"object\"==typeof i&&\"object\"==typeof a&&i&&a){const e=C(i);e!==C(a)?r[s+t]=n[t]:\"Object\"===e?Sn(i,a,r,s+t+\".\"):i!==a&&(r[s+t]=n[t])}else i!==a&&(r[s+t]=n[t])}else r[s+t]=void 0})),t(n).forEach((t=>{o(e,t)||(r[s+t]=n[t])})),r}const An={stack:\"dbcore\",name:\"HooksMiddleware\",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,s={...n,mutate(e){const s=Ke.trans,{deleting:i,creating:a,updating:u}=s.table(t).hook;switch(e.type){case\"add\":if(a.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"put\":if(a.fire===ee&&u.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"delete\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>l(e)),!0);case\"deleteRange\":if(i.fire===ee)break;return s._promise(\"readwrite\",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function l(e){const t=Ke.trans,s=e.keys||function(e,t){return\"delete\"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!s)throw new Error(\"Keys missing\");return\"delete\"!==(e=\"add\"===e.type||\"put\"===e.type?{...e,keys:s}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return\"add\"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:\"immutable\"})}(n,e,s).then((l=>{const c=s.map(((n,s)=>{const c=l[s],h={onerror:null,onsuccess:null};if(\"delete\"===e.type)i.fire.call(h,n,c,t);else if(\"add\"===e.type||void 0===c){const i=a.fire.call(h,n,e.values[s],t);null==n&&null!=i&&(n=i,e.keys[s]=n,r.outbound||_(e.values[s],r.keyPath,n))}else{const r=Sn(c,e.values[s]),i=u.fire.call(h,r,n,c,t);if(i){const t=e.values[s];Object.keys(i).forEach((e=>{o(t,e)?t[e]=i[e]:_(t,e,i[e])}))}}return h}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:i})=>{for(let r=0;r<s.length;++r){const i=n?n[r]:s[r],o=c[r];null==i?o.onerror&&o.onerror(t[r]):o.onsuccess&&o.onsuccess(\"put\"===e.type&&l[r]?e.values[r]:i)}return{failures:t,results:n,numFailures:r,lastResult:i}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,s){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:s}).then((({result:n})=>l({type:\"delete\",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<s?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},s)))))}}};return s}})};function Cn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let s=0,i=0;s<t.keys.length&&i<e.length;++s)0===It(t.keys[s],e[i])&&(r.push(n?O(t.values[s]):t.values[s]),++i);return r.length===e.length?r:null}catch(e){return null}}const jn={stack:\"dbcore\",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=Cn(e.keys,e.trans._cache,\"clone\"===e.cache);return t?Ce.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:\"clone\"===e.cache?O(t):t},t)))},mutate:e=>(\"add\"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Dn(e){return!(\"from\"in e)}const In=function(e,t){if(!this){const t=new In;return e&&\"d\"in e&&r(t,e),t}r(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Bn(e,t,n){const s=It(t,n);if(isNaN(s))return;if(s>0)throw RangeError();if(Dn(e))return r(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(It(n,e.from)<0)return i?Bn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Mn(e);if(It(t,e.to)>0)return o?Bn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Mn(e);It(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),It(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Tn(e,i),o&&a&&Tn(e,o)}function Tn(e,t){Dn(t)||function e(t,{from:n,to:r,l:s,r:i}){Bn(t,n,r),s&&e(t,s),i&&e(t,i)}(e,t)}function Rn(e,t){const n=Fn(t);let r=n.next();if(r.done)return!1;let s=r.value;const i=Fn(e);let o=i.next(s.from),a=o.value;for(;!r.done&&!o.done;){if(It(a.from,s.to)<=0&&It(a.to,s.from)>=0)return!0;It(s.from,a.from)<0?s=(r=n.next(a.from)).value:a=(o=i.next(s.from)).value}return!1}function Fn(e){let t=Dn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&It(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||It(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Mn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=r>1?\"r\":r<-1?\"l\":\"\";if(s){const t=\"r\"===s?\"l\":\"r\",n={...e},r=e[s];e.from=r.from,e.to=r.to,e[s]=r[s],n[s]=r[t],e[t]=n,n.d=Nn(n)}e.d=Nn(e)}function Nn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}a(In.prototype,{add(e){return Tn(this,e),this},addKey(e){return Bn(this,e,e),this},addKeys(e){return e.forEach((e=>Bn(this,e,e))),this},[j](){return Fn(this)}});const qn={stack:\"dbcore\",level:0,create:e=>{const r=e.schema.name,s=new In(e.MIN_KEY,e.MAX_KEY);return{...e,table:i=>{const o=e.table(i),{schema:a}=o,{primaryKey:u}=a,{extractKey:l,outbound:c}=u,h={...o,mutate:e=>{const t=e.trans,u=t.mutatedParts||(t.mutatedParts={}),l=e=>{const t=`idb://${r}/${i}/${e}`;return u[t]||(u[t]=new In)},c=l(\"\"),h=l(\":dels\"),{type:d}=e;let[f,p]=\"deleteRange\"===e.type?[e.range]:\"delete\"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const y=e.trans._cache;return o.mutate(e).then((e=>{if(n(f)){\"delete\"!==d&&(f=e.results),c.addKeys(f);const t=Cn(f,y);t||\"add\"===d||h.addKeys(f),(t||p)&&function(e,t,r,s){function i(t){const i=e(t.name||\"\");function o(e){return null!=e?t.extractKey(e):null}const a=e=>t.multiEntry&&n(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(r||s).forEach(((e,t)=>{const n=r&&o(r[t]),i=s&&o(s[t]);0!==It(n,i)&&(null!=n&&a(n),null!=i&&a(i))}))}t.indexes.forEach(i)}(l,a,t,p)}else if(f){const e={from:f.lower,to:f.upper};h.add(e),c.add(e)}else c.add(s),h.add(s),a.indexes.forEach((e=>l(e.name).add(s)));return e}))}},d=({query:{index:t,range:n}})=>{var r,s;return[t,new In(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(s=n.upper)&&void 0!==s?s:e.MAX_KEY)]},f={get:e=>[u,new In(e.key)],getMany:e=>[u,(new In).addKeys(e.keys)],count:d,query:d,openCursor:d};return t(f).forEach((e=>{h[e]=function(t){const{subscr:n}=Ke;if(n){const a=e=>{const t=`idb://${r}/${i}/${e}`;return n[t]||(n[t]=new In)},u=a(\"\"),h=a(\":dels\"),[d,p]=f[e](t);if(a(d.name||\"\").add(p),!d.isPrimaryKey){if(\"count\"!==e){const n=\"query\"===e&&c&&t.values&&o.query({...t,values:!1});return o[e].apply(this,arguments).then((r=>{if(\"query\"===e){if(c&&t.values)return n.then((({result:e})=>(u.addKeys(e),r)));const e=t.values?r.result.map(l):r.result;t.values?u.addKeys(e):h.addKeys(e)}else if(\"openCursor\"===e){const e=r,n=t.values;return e&&Object.create(e,{key:{get:()=>(h.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return h.addKey(t),t}},value:{get:()=>(n&&u.addKey(e.primaryKey),e.value)}})}return r}))}h.add(s)}}return o[e].apply(this,arguments)}})),h}}}};class $n{constructor(e,t){this._middlewares={},this.verno=0;const n=$n.dependencies;this._options=t={addons:$n.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new Ce((e=>{s.dbReadyResolve=e})),s.openCanceller=new Ce(((e,t)=>{s.cancelOpen=t})),this._state=s,this.name=e,this.on=Et(this,\"populate\",\"blocked\",\"versionchange\",\"close\",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{$n.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Ce.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(i=this,Pt(Rt.prototype,(function(e,t){this.db=i;let n=wt,r=null;if(t)try{n=t()}catch(e){r=e}const s=e._ctx,o=s.table,a=o.hook.reading.fire;this._ctx={table:o,index:s.index,isPrimKey:!s.index||o.schema.primKey.keyPath&&s.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:\"next\",unique:\"\",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:s.or,valueMapper:a!==te?a:null}}))),this.Table=function(e){return Pt(kt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Et(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})}))}(this),this.Transaction=function(e){return Pt(Qt.prototype,(function(t,n,r,s,i){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=Et(this,\"complete\",\"error\",\"abort\"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return Pt(vn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Pt(Yt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:\":id\"===n?null:n,or:r};const s=e._deps.indexedDB;if(!s)throw new X.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(e,t)=>s.cmp(t,e),this._max=(e,t)=>s.cmp(e,t)>0?e:t,this._min=(e,t)=>s.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on(\"versionchange\",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on(\"blocked\",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=en(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on(\"blocked\").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on(\"versionchange\").fire(e)))},this.use(On),this.use(An),this.use(qn),this.use(jn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new X.Type(\"Given version is not a positive number\");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema(\"Cannot add version when database is open\");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(cn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?e():new Ce(((e,t)=>{if(this._state.openComplete)return t(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:null==n?10:n,name:r}),s.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return xn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Ce((t=>{e.dbReadyResolve=t})),e.openCanceller=new Ce(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Ce(((n,r)=>{const s=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=We((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!bn(e)&&\"__dbnames\"!==n&&gn(e,t).delete(n).catch(ee)}(this._deps,this.name),n()})),e.onerror=zt(r),e.onblocked=this._fireOnBlocked};if(e)throw new X.InvalidArgument(\"Arguments not allowed in db.delete()\");t.isBeingOpened?t.dbReadyPromise.then(s):s()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&\"DatabaseClosed\"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=En.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Ke.trans;r&&r.db===this&&-1===e.indexOf(\"!\")||(r=null);const s=-1!==e.indexOf(\"?\");let i,o;e=e.replace(\"!\",\"\").replace(\"?\",\"\");try{if(o=t.map((e=>{var t=e instanceof this.Table?e.name:e;if(\"string\"!=typeof t)throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");return t})),\"r\"==e||\"readonly\"===e)i=\"readonly\";else{if(\"rw\"!=e&&\"readwrite\"!=e)throw new X.InvalidArgument(\"Invalid transaction mode: \"+e);i=\"readwrite\"}if(r){if(\"readonly\"===r.mode&&\"readwrite\"===i){if(!s)throw new X.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");r=null}r&&o.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction(\"Table \"+e+\" not included in parent transaction.\");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const a=Pn.bind(null,this,i,o,r,n);return r?r._promise(i,a,\"lock\"):Ke.trans?ot(Ke.transless,(()=>this._whenReady(a))):this._whenReady(a)}table(e){if(!o(this._allTables,e))throw new X.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Un=\"undefined\"!=typeof Symbol&&\"observable\"in Symbol?Symbol.observable:\"@@observable\";class Ln{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&\"function\"!=typeof e?e:{next:e,error:t,complete:n})}[Un](){return this}}function Vn(e,n){return t(n).forEach((t=>{Tn(e[t]||(e[t]=new In),n[t])})),e}function Wn(e){return new Ln((n=>{const r=T(e);let s=!1,i={},o={};const a={get closed(){return s},unsubscribe:()=>{s=!0,Ht.storagemutated.unsubscribe(h)}};n.start&&n.start(a);let u=!1,l=!1;function c(){return t(o).some((e=>i[e]&&Rn(i[e],o[e])))}const h=e=>{Vn(i,e),c()&&d()},d=()=>{if(u||s)return;i={};const t={},f=function(t){r&&Ze();const n=()=>Je(e,{subscr:t,trans:null}),s=Ke.trans?ot(Ke.transless,n):n();return r&&s.then(et,et),s}(t);l||(Ht(\"storagemutated\",h),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,s||(c()?d():(i={},o=t,n.next&&n.next(e)))}),(e=>{u=!1,n.error&&n.error(e),a.unsubscribe()}))};return d(),a}))}let Yn;try{Yn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(e){Yn={indexedDB:null,IDBKeyRange:null}}const zn=$n;function Gn(e){let t=Hn;try{Hn=!0,Ht.storagemutated.fire(e)}finally{Hn=t}}a(zn,{...Z,delete:e=>new zn(e,{addons:[]}).delete(),exists:e=>new zn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch(\"NoSuchDatabaseError\",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return bn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>\"__dbnames\"!==e)))):gn(e,t).toCollection().primaryKeys()}(zn.dependencies).then(e)}catch(e){return ht(new X.MissingAPI)}},defineClass:()=>function(e){r(this,e)},ignoreTransaction:e=>Ke.trans?ot(Ke.transless,e):e(),vip:_n,async:function(e){return function(){try{var t=kn(e.apply(this,arguments));return t&&\"function\"==typeof t.then?t:Ce.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=kn(e.apply(n,t||[]));return r&&\"function\"==typeof r.then?r:Ce.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(e,t){const n=Ce.resolve(\"function\"==typeof e?zn.ignoreTransaction(e):e).timeout(t||6e4);return Ke.trans?Ke.trans.waitFor(n):n},Promise:Ce,debug:{get:()=>R,set:e=>{F(e,\"dexie\"===e?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Et,on:Ht,liveQuery:Wn,extendObservabilitySet:Vn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(e,t){\"string\"==typeof t?_(e,t,void 0):\"length\"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:w,deepClone:O,getObjectDiff:Sn,cmp:It,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:Yn,semVer:\"3.2.3\",version:\"3.2.3\".split(\".\").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),zn.maxKey=en(zn.dependencies.IDBKeyRange),\"undefined\"!=typeof dispatchEvent&&\"undefined\"!=typeof addEventListener&&(Ht(\"storagemutated\",(e=>{if(!Hn){let t;mt?(t=document.createEvent(\"CustomEvent\"),t.initCustomEvent(\"x-storagemutated-1\",!0,!0,e)):t=new CustomEvent(\"x-storagemutated-1\",{detail:e}),Hn=!0,dispatchEvent(t),Hn=!1}})),addEventListener(\"x-storagemutated-1\",(({detail:e})=>{Hn||Gn(e)})));let Hn=!1;if(\"undefined\"!=typeof BroadcastChannel){const e=new BroadcastChannel(\"x-storagemutated-1\");\"function\"==typeof e.unref&&e.unref(),Ht(\"storagemutated\",(t=>{Hn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Gn(e.data)}}else if(\"undefined\"!=typeof self&&\"undefined\"!=typeof navigator){Ht(\"storagemutated\",(e=>{try{Hn||(\"undefined\"!=typeof localStorage&&localStorage.setItem(\"x-storagemutated-1\",JSON.stringify({trig:Math.random(),changedParts:e})),\"object\"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:\"x-storagemutated-1\",changedParts:e}))))}catch(e){}})),\"undefined\"!=typeof addEventListener&&addEventListener(\"storage\",(e=>{if(\"x-storagemutated-1\"===e.key){const t=JSON.parse(e.newValue);t&&Gn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener(\"message\",(function({data:e}){e&&\"x-storagemutated-1\"===e.type&&Gn(e.changedParts)}))}Ce.rejectionMapper=function(e,t){if(!e||e instanceof W||e instanceof TypeError||e instanceof SyntaxError||!e.name||!J[e.name])return e;var n=new J[e.name](t||e.message,e);return\"stack\"in e&&l(n,\"stack\",{get:function(){return this.inner.stack}}),n},F(R,bt);export{$n as Dexie,In as RangeSet,$n as default,Wn as liveQuery,Tn as mergeRanges,Rn as rangesOverlap};","// db.ts\nimport Dexie, { Table } from \"dexie\";\nimport { BSIDataCatalogue, BSIDataSystem } from \"./bs_types\";\n\nexport class MySubClassedDexie extends Dexie {\n  catalogues!: Table<{ id: string; content: BSIDataCatalogue; path?: string }>;\n  systems!: Table<{ id: string; content: BSIDataSystem; path?: string }>;\n\n  constructor() {\n    super(\"nr-editor\");\n    this.version(5).stores({\n      catalogues: \"id, content.catalogue.id, content.catalogue.gameSystemId\",\n      systems: \"id\",\n    });\n  }\n}\n\nexport const db = new MySubClassedDexie();\n","import type { Catalogue } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { filename } from \"~/electron/node_helpers\";\nimport type { BattleScribeRepoData } from \"~/assets/shared/battlescribe/bs_import_data\";\nimport { removeSuffix } from \"~/assets/shared/battlescribe/bs_helpers\";\nexport interface GithubIntegration {\n  githubUrl: string;\n  githubRepo?: string;\n  githubOwner?: string;\n  githubName?: string;\n  repoData?: BattleScribeRepoData;\n  discovered?: boolean;\n}\n\nexport function normalizeGithubRepoUrl(input: string): string | null {\n  const githubUrlRegex = /^(?:(http(s?)?:\\/\\/)?github.com\\/)?([^\\/]+)\\/([^\\/]+)$/;\n  const match = input.match(githubUrlRegex);\n\n  if (!match) {\n    return null;\n  }\n\n  const [, protocol = \"https://\", _, user, repo] = match;\n\n  if (!user || !repo) {\n    return null;\n  }\n  return `https://github.com/${user}/${repo}`;\n}\nexport function parseGitHubUrl(githubUrl: string) {\n  // Regular expression to match GitHub URLs\n  const githubUrlRegex = /^(?:https?:\\/\\/)?(?:www\\.)?github\\.com\\/([^/]+)\\/([^/]+)(?:\\/)?$/;\n\n  // Check if the input URL matches the GitHub URL format\n  const match = githubUrl.match(githubUrlRegex);\n\n  if (!match) {\n    throw new Error(\"Invalid GitHub URL format: \" + githubUrl);\n  }\n\n  const [, repoOwner, repoName] = match;\n\n  return {\n    githubUrl: githubUrl,\n    githubRepo: `${repoOwner}/${repoName}`,\n    githubOwner: repoOwner,\n    githubName: repoName,\n  };\n}\n\nasync function getFileContentFromRepo(githubUrl: string, filePath: string) {\n  try {\n    const urlParts = githubUrl.split(\"/\");\n    const owner = urlParts[urlParts.length - 2];\n    const repo = urlParts[urlParts.length - 1].replace(\".git\", \"\");\n    const url = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(filePath)}`;\n\n    console.log(`Querying github api at ${url}`);\n    const response = await $fetch<{ download_url?: string }>(url, {\n      headers: {\n        \"User-Agent\": \"New Recruit Data Editor (Electron)\",\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n\n    if (!response || !response?.download_url) {\n      throw new Error(\"No download_url found\");\n    }\n    console.log(`Downloading file at ${response?.download_url}`);\n\n    const content = await $fetch<string>(response.download_url, {\n      headers: {\n        \"User-Agent\": \"New Recruit Data Editor (Electron)\",\n        Accept: \"application/vnd.github.v3+json\",\n      },\n    });\n    console.log(`Downloaded file, length: ${content.length}`);\n    return content;\n  } catch (error) {\n    throw error;\n  }\n}\nasync function getFileContentFromRepoWithFallback(githubUrl: string, filePath: string, fallBackPath?: string) {\n  try {\n    return await getFileContentFromRepo(githubUrl, filePath);\n  } catch (error) {\n    if (!fallBackPath) {\n      throw error;\n    }\n    return await getFileContentFromRepo(githubUrl, fallBackPath);\n  }\n}\n\nexport async function getNextRevision(github: GithubIntegration, catalogue: Catalogue) {\n  if (catalogue.fullFilePath) {\n    try {\n      const fileName = filename(catalogue.fullFilePath);\n      const fallBack = fileName.endsWith(\"z\") ? removeSuffix(fileName, \"z\") : undefined;\n      const content = await getFileContentFromRepoWithFallback(github.githubUrl, fileName, fallBack);\n      const regex = /revision=\"(\\d+)\"/;\n      const match = content.match(regex);\n      if (match) {\n        const resultRevision = (Number(match[1]) || 0) + 1;\n        console.log(`Revision of ${catalogue.name}: ${catalogue.revision} -> ${resultRevision}`);\n        return resultRevision;\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  return catalogue.revision || 1;\n}\n","export type BooksDate = {\n  [id in keyof any]: string | null;\n};\nexport function getBookDate(booksDate: BooksDate | undefined, id: number | string): string | null | undefined {\n  if (!booksDate) return undefined;\n  return booksDate[id] || booksDate[\"*\"];\n}\n","import type { Catalogue } from \"./bs_main_catalogue\";\nimport { setPrototypeRecursive, setPrototype } from \"./bs_main_types\";\nimport type { BSCatalogueManager } from \"./bs_system\";\nimport type { BSIData } from \"./bs_types\";\nimport type { BooksDate } from \"./bs_versioning\";\n\nexport interface loadDataOptions {\n  deleteBadLinks: boolean;\n}\nexport async function loadData(\n  system: BSCatalogueManager,\n  data: BSIData,\n  booksDate?: BooksDate,\n  options?: loadDataOptions\n): Promise<Catalogue> {\n  if (!data.catalogue && !data.gameSystem) {\n    throw Error(`invalid loadBsData argument: no .catalogue or .gameSystem in data`);\n  }\n\n  const key = data.catalogue ? \"catalogue\" : \"gameSystem\";\n  const isSystem = key === \"gameSystem\";\n  const isCatalogue = key === \"catalogue\";\n  const obj = data[key]!;\n  const asCatalogue = obj as unknown as Catalogue;\n  if (asCatalogue.loaded || asCatalogue.loaded_editor) {\n    return asCatalogue;\n  }\n  // Prevent infinite loops by checking if prototype is already set\n  setPrototypeRecursive(obj);\n  const content = setPrototype(obj, key);\n  content.manager = system;\n\n  // Resolve gameSystem\n  if (isCatalogue) {\n    const link = { targetId: content.gameSystemId! };\n    const alreadyLoadedGameSystem = system.getLoadedCatalogue(link, booksDate);\n    if (alreadyLoadedGameSystem) {\n      content.gameSystem = alreadyLoadedGameSystem;\n    } //\n    else {\n      const data = await system.getData(link, booksDate);\n      const loadedGameSystem = system.getLoadedCatalogue(link, booksDate);\n      if (loadedGameSystem) {\n        content.gameSystem = loadedGameSystem;\n      } //\n      else {\n        content.gameSystem = await loadData(system, data, booksDate, options);\n      }\n    }\n  }\n\n  // Resolve catalogue Links\n  const promises = [];\n  for (const link of content?.catalogueLinks || []) {\n    if (!link.targetId) {\n      console.warn(`invalid link: no targetId in link: ${link}, found in ${obj.name}`);\n      continue;\n    }\n\n    if (link.targetId === content.id) {\n      link.target = content;\n      continue;\n    }\n    const alreadyLoadedCatalogue = system.getLoadedCatalogue(link, booksDate);\n    if (alreadyLoadedCatalogue) {\n      link.target = alreadyLoadedCatalogue;\n      continue;\n    } //\n\n    const promise = system.getData(link, booksDate).then((data) => {\n      const loadedCatalogue = system.getLoadedCatalogue(link, booksDate);\n      if (loadedCatalogue) {\n        link.target = loadedCatalogue;\n        return;\n      }\n      return loadData(system, data, booksDate, options).then((data) => (link.target = data));\n    });\n    promises.push(promise);\n  }\n  await Promise.all(promises);\n\n  // Add loaded catalogue to Manager\n  if (isSystem) {\n    system.addLoadedSystem(content);\n  }\n  if (isCatalogue) {\n    system.addLoadedCatalogue(content);\n  }\n\n  return content;\n}\n","import type { BSICatalogue, BSICatalogueLink, BSIData, BSIGameSystem } from \"./bs_types\";\nimport type { Catalogue } from \"./bs_main_catalogue\";\nimport { getBookDate, BooksDate } from \"./bs_versioning\";\nimport { loadData } from \"./bs_load_data\";\nimport type { Base } from \"./bs_main\";\n\nexport class BSCatalogueManager {\n  catalogues = {} as Record<string, Record<string, Catalogue>>;\n  unresolvedLinks?: Record<string, Array<Base>>;\n  settings?: Record<string, string | number | boolean | undefined>;\n  // Must implement\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async getData(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Promise<BSIData> {\n    throw new Error(\"Method not implemented.\");\n  }\n  getCatalogueInfo(catalogueLink: BSICatalogueLink): BSICatalogue | BSIGameSystem | undefined {\n    return undefined;\n  }\n  findOptionById(id: string): Base | undefined {\n    return undefined;\n  }\n  getLoadedCatalogue(catalogueLink: BSICatalogueLink | string, booksDate?: BooksDate): Catalogue | undefined {\n    const key = typeof catalogueLink === \"string\" ? catalogueLink : catalogueLink.targetId || catalogueLink.name!;\n    const date = getBookDate(booksDate, key) || \"default\";\n\n    const dateIndex = this.catalogues[key];\n    return dateIndex ? dateIndex[date] : undefined;\n  }\n  addLoadedCatalogue(catalogue: Catalogue, booksDate?: BooksDate): void {\n    const date = getBookDate(booksDate, catalogue.id) || \"default\";\n    if (!this.catalogues[catalogue.name]) this.catalogues[catalogue.name] = {};\n    if (!this.catalogues[catalogue.id]) this.catalogues[catalogue.id] = {};\n    this.catalogues[catalogue.name][date] = catalogue;\n    this.catalogues[catalogue.id][date] = catalogue;\n  }\n  addLoadedSystem(system: Catalogue, booksDate?: BooksDate) {\n    return this.addLoadedCatalogue(system, booksDate);\n  }\n  unloadAll() {\n    this.catalogues = {};\n  }\n\n  async loadData(data: BSIData, booksDate?: BooksDate): Promise<Catalogue> {\n    const loaded = await loadData(this, data, booksDate);\n    loaded.process();\n    return loaded;\n  }\n  async loadCatalogue(catalogueLink: BSICatalogueLink, booksDate?: BooksDate, forceLoad?: boolean): Promise<Catalogue> {\n    const loaded = this.getLoadedCatalogue(catalogueLink, booksDate);\n    if (loaded && !forceLoad) return loaded;\n    const data = await this.getData(catalogueLink, booksDate);\n    if (data) {\n      const result = await this.loadData(data, booksDate);\n      return result;\n    }\n    throw Error(`Couldn't load catalogue: couldn't getData ${catalogueLink}`);\n  }\n}\n","import { BSCatalogueManager } from \"./bs_system\";\nimport { BSIDataSystem, BSIDataCatalogue, BSICatalogueLink, BSIData, BSICatalogue, BSIGameSystem } from \"./bs_types\";\nimport { BooksDate } from \"./bs_versioning\";\nimport { Catalogue } from \"./bs_main_catalogue\";\nimport { loadData } from \"./bs_load_data\";\nimport type { GithubIntegration } from \"./github\";\nimport { db } from \"./cataloguesdexie\";\nimport { Base, getDataObject } from \"./bs_main\";\nimport { noObserve } from \"./bs_main_types\";\n\nexport class GameSystemFiles extends BSCatalogueManager {\n  gameSystem: BSIDataSystem | null = null;\n  catalogueFiles: Record<string, BSIDataCatalogue> = noObserve() as {};\n  allLoaded?: boolean;\n  loadedCatalogues: Record<string, Catalogue> = {};\n  github?: GithubIntegration;\n  unresolvedLinks: Record<string, Array<Base>> = {};\n  index: Record<string, Base> = {};\n  async loadData(data: BSIData, booksDate?: BooksDate): Promise<Catalogue> {\n    const loaded = await loadData(this, data, booksDate, { deleteBadLinks: false });\n    return loaded;\n  }\n  findOptionById(id: string): Base | undefined {\n    for (const catalogue of Object.values(this.loadedCatalogues)) {\n      if (catalogue.index && catalogue.index[id]) return catalogue.index[id];\n    }\n  }\n  unloadAll() {\n    super.unloadAll();\n    this.loadedCatalogues = {};\n    for (const file of this.getAllCatalogueFiles()) {\n      const obj = getDataObject(file) as any as Catalogue;\n      delete obj.loaded;\n      delete obj.loaded_editor;\n    }\n    delete this.allLoaded;\n  }\n  async loadAll(progress_cb?: (current: number, max: number, msg?: string) => void | Promise<void>) {\n    let max = Object.values(this.catalogueFiles).length + 1;\n    let current = 0;\n    if (!this.allLoaded) {\n      console.log(\"Loading all catalogues in\", this.gameSystem?.gameSystem?.name);\n    }\n    if (this.gameSystem) {\n      progress_cb && (await progress_cb(current, max, `Loading ${this.gameSystem.gameSystem.name}`));\n      const loadedSys = await this.loadCatalogue({ targetId: this.gameSystem.gameSystem.id });\n\n      loadedSys.processForEditor();\n      current++;\n\n      for (const catalogue of Object.values(this.catalogueFiles)) {\n        progress_cb && (await progress_cb(current, max, `Loading ${catalogue.catalogue.name}`));\n        const loaded = await this.loadCatalogue({ targetId: catalogue.catalogue.id });\n        loaded.processForEditor();\n        current++;\n        progress_cb && (await progress_cb(current, max, `Loading ${catalogue.catalogue.name}`));\n      }\n    }\n    this.allLoaded = true;\n  }\n  getLoadedCatalogue(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Catalogue | undefined {\n    const key = catalogueLink.targetId || catalogueLink.name!;\n    return this.loadedCatalogues[key] as Catalogue | undefined;\n  }\n  addLoadedCatalogue(catalogue: Catalogue, booksDate?: BooksDate): void {\n    this.loadedCatalogues[catalogue.id] = catalogue;\n  }\n  getAllLoadedCatalogues() {\n    const id = this.gameSystem?.gameSystem.id;\n    if (id) {\n      return Object.values(this.loadedCatalogues);\n    }\n    return [];\n  }\n  getId() {\n    return this.gameSystem?.gameSystem.id;\n  }\n  getCatalogueInfo(catalogueLink: BSICatalogueLink) {\n    if (this.gameSystem?.gameSystem.id === catalogueLink.targetId) {\n      return this.gameSystem?.gameSystem;\n    }\n    for (const catalogue of Object.values(this.catalogueFiles)) {\n      if (catalogue.catalogue.id === catalogueLink.targetId) {\n        return catalogue.catalogue;\n      }\n    }\n  }\n\n  getAllCatalogueFiles() {\n    return [...(this.gameSystem ? [this.gameSystem] : []), ...Object.values(this.catalogueFiles)];\n  }\n  setSystem(system: BSIDataSystem) {\n    this.gameSystem = system;\n  }\n  setCatalogue(catalogue: BSIDataCatalogue) {\n    const catalogueId = catalogue.catalogue.id;\n    this.catalogueFiles[catalogueId] = catalogue;\n  }\n  removeCatalogue(catalogue: BSIDataCatalogue) {\n    for (const [key, value] of Object.entries(this.catalogueFiles)) {\n      if (value.catalogue.id === catalogue.catalogue.id) {\n        delete this.catalogueFiles[key];\n      }\n    }\n  }\n\n  async getData(catalogueLink: BSICatalogueLink, booksDate?: BooksDate): Promise<BSIData> {\n    if (catalogueLink.targetId == this.gameSystem?.gameSystem.id) {\n      return this.gameSystem;\n    }\n    if (catalogueLink.targetId in this.catalogueFiles) {\n      return this.catalogueFiles[catalogueLink.targetId];\n    }\n\n    const catalogue = await db.catalogues.get({\n      \"content.catalogue.id\": catalogueLink.targetId,\n    });\n    if (catalogue) {\n      return catalogue.content;\n    }\n\n    const system = await db.systems.get(catalogueLink.targetId);\n    if (system) {\n      return system.content;\n    }\n\n    const errorPart = catalogueLink.name ? `name ${catalogueLink.name}` : `id ${catalogueLink.targetId}`;\n    throw Error(`Couldn't import catalogue with ${errorPart}, perhaps it wasnt uploaded?`);\n  }\n}\n","import { defineStore } from \"pinia\";\nimport {\n  ItemKeys,\n  ItemTypes,\n  EntryPathEntry,\n  getEntryPath,\n  onAddEntry,\n  onRemoveEntry,\n  popAtEntryPath,\n  addAtEntryPath,\n  scrambleIds,\n  getTypeName,\n  getTypeLabel,\n  fixKey,\n  removeEntry,\n} from \"~/assets/shared/battlescribe/bs_editor\";\nimport {\n  enumerate_zip,\n  generateBattlescribeId,\n  removeSuffix,\n  textSearchRegex,\n  zipCompress,\n  forEachParent,\n  addObj,\n} from \"~/assets/shared/battlescribe/bs_helpers\";\nimport { Catalogue, EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport {\n  Base,\n  Link,\n  entriesToJson,\n  entryToJson,\n  goodJsonKeys,\n  rootToJson,\n  Characteristic,\n  Rule,\n  getDataObject,\n  getDataDbId,\n} from \"~/assets/shared/battlescribe/bs_main\";\nimport { setPrototypeRecursive } from \"~/assets/shared/battlescribe/bs_main_types\";\nimport { useCataloguesStore } from \"./cataloguesState\";\nimport type {\n  BSICatalogue,\n  BSIConstraint,\n  BSIData,\n  BSIDataCatalogue,\n  BSIDataSystem,\n  BSIGameSystem,\n  BSIProfile,\n} from \"~/assets/shared/battlescribe/bs_types\";\nimport {\n  createFolder,\n  dirname,\n  filename,\n  getFolderFiles,\n  getFolderRemote,\n  unwatchFile,\n  watchFile,\n  writeFile,\n} from \"~/electron/node_helpers\";\nimport {\n  allowed_children,\n  clean,\n  convertToJson,\n  convertToXml,\n  getExtension,\n  isAllowedExtension,\n  isZipExtension,\n} from \"~/assets/shared/battlescribe/bs_convert\";\nimport CatalogueVue from \"~/pages/catalogue.vue\";\nimport { LeftPanelDefaults } from \"~/components/catalogue/left_panel/LeftPanel.vue\";\nimport { EditorUIState, useEditorUIState } from \"./editorUIState\";\nimport { db } from \"~/assets/shared/battlescribe/cataloguesdexie\";\nimport { getNextRevision, parseGitHubUrl } from \"~/assets/shared/battlescribe/github\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport { toRaw } from \"vue\";\nimport { Router } from \"vue-router\";\nimport { useSettingsStore } from \"./settingsState\";\nimport { RouteLocationNormalizedLoaded } from \"~/.nuxt/vue-router\";\ntype CatalogueComponentT = InstanceType<typeof CatalogueVue>;\nconst enableGithubIntegrationWithGitFolder = false;\nexport interface IEditorStore {\n  selectionsParent?: Object | null;\n  selections: { obj: any; onunselected: () => unknown; payload?: any }[];\n  selectedElementGroup: VueComponent[] | null;\n  selectedElement: VueComponent | null;\n  selectedItem: VueComponent | null;\n\n  filter: string;\n  filterRegex: RegExp;\n  filtered: EditorBase[];\n\n  historyStack: Array<EditorUIState | null>;\n  historyStackPos: number;\n\n  undoStack: { type: string; undo: () => unknown; redo: () => unknown }[];\n  undoStackPos: number;\n  clipboard: Array<EditorBase | Record<string, any> | string>;\n\n  mode: \"edit\" | \"references\";\n  clipboardmode: \"json\" | \"none\";\n  gameSystemsLoaded: boolean;\n  gameSystems: Record<string, GameSystemFiles>;\n\n  unsavedCount: number;\n  unsavedChanges: Record<string, CatalogueState>;\n\n  catalogueComponent?: CatalogueComponentT;\n  $nextTick?: Promise<any>;\n  $nextTickResolve?: (...args: any[]) => unknown;\n}\nexport type MaybeArray<T> = T | Array<T>;\nexport interface CatalogueEntryItem {\n  item: ItemTypes & EditorBase;\n  type: ItemKeys;\n  imported?: boolean;\n}\nexport interface CatalogueState {\n  changed: boolean;\n  unsaved: boolean;\n  incremented?: boolean;\n  savingPromise?: Promise<any>;\n  isChangedOnDisk?: boolean;\n  isSaving?: boolean;\n}\n\nexport function get_ctx(el: any): any {\n  return el.vnode;\n}\n/**\n * Get the {@link EditorBase} (from bs_main.ts) out of a Vue component instance (assumed to be an EditorCollapsibleBox.vue).\n *\n * @param {Vue} vue_el - The Vue component instance.\n * @returns {EditorBase}\n */\nexport function get_base_from_vue_el(vue_el: VueComponent): EditorBase {\n  const p1 = vue_el.$parent;\n  if (p1.item) return p1.item;\n  const p2 = p1.$parent;\n  if (p2.item) return p2.item;\n  const p3 = p2.$parent;\n  return p3.item;\n}\n\nfunction markSaving(file: CatalogueState) {\n  file.isSaving = true;\n}\nfunction markChangedOnDisk(file: CatalogueState) {\n  if (file.isSaving) {\n    file.isSaving = false;\n    return;\n  }\n  file.isChangedOnDisk = true;\n}\nfunction unmarkChangedOnDisk(file: CatalogueState) {\n  if (file.isChangedOnDisk) {\n    file.isChangedOnDisk = false;\n  }\n  if (file.isSaving === undefined) {\n    file.isSaving = false;\n  }\n}\ntype VueComponent = any;\nconst editorFields = new Set<string>([\"select\", \"showInEditor\", \"showChildsInEditor\"]);\nexport const useEditorStore = defineStore(\"editor\", {\n  state: (): IEditorStore => ({\n    selections: [],\n    selectedElementGroup: null,\n    selectedElement: null,\n    selectedItem: null,\n\n    filter: \"\",\n    filterRegex: RegExp(\"\"),\n    filtered: [],\n\n    undoStack: [],\n    undoStackPos: -1,\n\n    historyStack: [],\n    historyStackPos: 0,\n\n    clipboard: [],\n\n    mode: \"edit\",\n    clipboardmode: \"json\",\n\n    gameSystems: {},\n    gameSystemsLoaded: false,\n    unsavedChanges: {} as Record<string, CatalogueState>,\n\n    unsavedCount: 0,\n  }),\n\n  actions: {\n    async create_system(name: string, path?: string, extension?: string) {\n      console.log(\"Creating system with name:\", name);\n      const id = `sys-${generateBattlescribeId()}`;\n      const files = this.get_system(id);\n      const folder = path ? `${removeSuffix(path.replaceAll(\"\\\\\", \"/\"), \"/\")}/${name}` : \"\";\n\n      if (electron) {\n        if (!folder) {\n          throw new Error(\"No folder specified\");\n        }\n        createFolder(folder);\n      }\n      const data: BSIDataSystem = {\n        gameSystem: {\n          id: id,\n          name: name,\n          battleScribeVersion: \"2.03\",\n          revision: 1,\n          categoryEntries: [\n            {\n              name: \"Default Category\",\n              id: \"default-category\",\n            },\n          ],\n          forceEntries: [\n            {\n              name: \"Default Force\",\n              hidden: false,\n              id: \"default-force\",\n              categoryLinks: [\n                {\n                  name: \"Default Category\",\n                  hidden: false,\n                  id: \"default-force-category-link\",\n                  targetId: \"default-category\",\n                },\n              ],\n            },\n          ],\n          selectionEntries: [\n            {\n              type: \"upgrade\",\n              import: true,\n              name: \"Default Root Entry\",\n              hidden: false,\n              id: \"default-entry\",\n              categoryLinks: [\n                {\n                  targetId: \"default-category\",\n                  id: \"default-category-link\",\n                  primary: true,\n                  name: \"Default Category\",\n                  hidden: false,\n                },\n              ],\n            },\n          ],\n        },\n      };\n\n      if (folder) {\n        data.gameSystem.fullFilePath = `${folder}/${name}.${extension || \"gst\"}`;\n      }\n      files.setSystem(data);\n      this.get_catalogue_state(data).incremented = true;\n      this.saveCatalogue(data);\n      return files;\n    },\n    saveCatalogueInDb(data: Catalogue | BSICatalogue | BSIGameSystem) {\n      const stringed = rootToJson(data);\n      const isCatalogue = Boolean(data.gameSystemId);\n      const isSystem = !isCatalogue;\n      if (isSystem) {\n        db.systems.put({\n          content: JSON.parse(stringed),\n          path: data.fullFilePath,\n          id: data.id,\n        });\n      } else {\n        db.catalogues.put({\n          content: JSON.parse(stringed),\n          path: data.fullFilePath,\n          id: `${data.gameSystemId}-${data.id}`,\n        });\n      }\n    },\n\n    async saveCatalogueInFiles(data: Catalogue | BSICatalogue | BSIGameSystem) {\n      const path = data.fullFilePath;\n      if (!path) {\n        console.error(`No path included in the catalogue ${data.name} to save at`);\n        return;\n      }\n\n      const extension = getExtension(path);\n      if (path.endsWith(\".json\")) {\n        const content = rootToJson(data);\n        await writeFile(path, content);\n      } else {\n        const xml = convertToXml(data);\n        const shouldZip = isZipExtension(extension);\n        const name = filename(path);\n        const nameInZip = name.replace(\".gstz\", \".gst\").replace(\".catz\", \".cat\");\n        const content = shouldZip ? await zipCompress(nameInZip, xml, \"uint8array\") : xml;\n        await writeFile(path, content);\n      }\n    },\n\n    saveCatalogue(data: Catalogue | BSIData) {\n      const state = this.get_catalogue_state(data);\n      const obj = getDataObject(data);\n      markSaving(state);\n      if (electron) {\n        this.saveCatalogueInFiles(obj);\n      } else {\n        this.saveCatalogueInDb(obj);\n      }\n      unmarkChangedOnDisk(state);\n    },\n    async load_systems_from_folder(\n      folder: string,\n      progress?: (current: number, max: number, msg?: string) => Promise<unknown>\n    ) {\n      if (!globalThis.electron) {\n        throw new Error(\"Not running in electron\");\n      }\n      const files = await getFolderFiles(folder);\n      if (!files?.length) return;\n\n      console.log(\"Loading\", files.length, \"files\", files);\n      const result_system_ids = [] as string[];\n      const result_files = [];\n      const systems = [] as GameSystemFiles[];\n\n      const allowed = files.filter((o) => isAllowedExtension(o.name));\n      for (const file of allowed) {\n        progress && (await progress(result_files.length, allowed.length, file.path));\n        const json = await convertToJson(file.data, file.name.endsWith(\"json\") ? \"json\" : \"xml\");\n        const systemId = json?.gameSystem?.id;\n        const catalogueId = json?.catalogue?.id;\n        const obj = getDataObject(json);\n        obj.fullFilePath = file.path.replaceAll(\"\\\\\", \"/\");\n        if (systemId) {\n          const systemFiles = this.get_system(systemId);\n          systemFiles.setSystem(markRaw(json));\n          systems.push(systemFiles);\n          result_system_ids.push(systemId);\n        }\n        if (catalogueId) {\n          const systemFiles = this.get_system(json.catalogue.gameSystemId);\n          systemFiles.catalogueFiles[catalogueId] = markRaw(json);\n        }\n        result_files.push(json);\n      }\n      progress && (await progress(result_files.length, allowed.length));\n\n      for (const system of systems) {\n        progress && (await progress(0, 0, \"Checking for github integration\"));\n        await this.load_system(system);\n      }\n\n      return result_system_ids;\n    },\n    async load_systems_from_db(force = false) {\n      if (!this.gameSystemsLoaded && !force) {\n        this.gameSystemsLoaded = true;\n        let systems = (await db.systems.offset(0).keys()) as string[];\n        for (let system of systems) {\n          if (system in this.gameSystems) continue;\n          this.load_system_from_db(system);\n        }\n      }\n    },\n    async load_system_from_db(id: string) {\n      const dbsystem = await db.systems.get(id);\n      const system = dbsystem?.content;\n      if (!system) {\n        throw new Error(\"System not found \" + id);\n      }\n      if (!system.gameSystem.fullFilePath) {\n        system.gameSystem.fullFilePath = dbsystem.path;\n      }\n\n      const dbcatalogues = await db.catalogues.where({ \"content.catalogue.gameSystemId\": id });\n      const systemFiles = this.get_system(system.gameSystem.id);\n      systemFiles.setSystem(system);\n      for (let { content, path } of await dbcatalogues.toArray()) {\n        const catalogueId = content.catalogue.id;\n        if (!content.catalogue.fullFilePath) {\n          content.catalogue.fullFilePath = path;\n        }\n        systemFiles.catalogueFiles[catalogueId] = shallowReactive(content);\n      }\n      this.load_system(systemFiles, true);\n    },\n    async load_system(system: GameSystemFiles, keepState = false) {\n      if (system.gameSystem) {\n        const cataloguesStore = useCataloguesStore();\n        await system.unloadAll();\n        if (!keepState) {\n          for (const catalogue of system.getAllCatalogueFiles()) {\n            const state = this.get_catalogue_state(catalogue);\n            if (state) {\n              state.changed = false;\n              state.unsaved = false;\n              state.isChangedOnDisk = false;\n            }\n            cataloguesStore.updateCatalogue(getDataObject(catalogue));\n            cataloguesStore.setEdited(getDataObject(catalogue).id, false);\n          }\n        }\n        const publications = system.gameSystem.gameSystem.publications;\n        const github = publications?.find((o) => o.name?.trim().toLowerCase() === \"github\");\n        const path = system.gameSystem.gameSystem.fullFilePath;\n\n        if (path && enableGithubIntegrationWithGitFolder) {\n          try {\n            const remote = await getFolderRemote(dirname(path));\n            if (remote && remote !== \"origin\") {\n              console.log(\"remote:\", remote);\n              system.github = { ...parseGitHubUrl(remote), discovered: true };\n            }\n          } catch (e) {\n            console.error(e);\n          }\n        }\n        if (github && github.publisherUrl) {\n          system.github = {\n            githubUrl: github.publisherUrl,\n          };\n          if (github.shortName && github.shortName.includes(\"/\")) {\n            system.github.githubRepo = github.shortName;\n            system.github.githubOwner = github.shortName?.split(\"/\")[0];\n            system.github.githubName = github.shortName?.split(\"/\")[1];\n          }\n        }\n      }\n      for (const catalogue of system.getAllCatalogueFiles()) {\n        const obj = getDataObject(catalogue);\n        if (!obj.fullFilePath) {\n          continue;\n        }\n        watchFile(obj.fullFilePath, () => {\n          this.on_file_changed(catalogue);\n        });\n      }\n    },\n    on_file_changed(file: BSIDataCatalogue | BSIDataSystem) {\n      console.log(getDataObject(file).name, \"changed\");\n      markChangedOnDisk(this.get_catalogue_state(file));\n    },\n    async get_or_load_system(id: string) {\n      if (!(id in this.gameSystems)) {\n        this.gameSystems[id] = new GameSystemFiles();\n        await this.load_system_from_db(id);\n      }\n      return this.gameSystems[id];\n    },\n    get_system(id: string) {\n      if (!(id in this.gameSystems)) {\n        const system = new GameSystemFiles();\n        system.settings = useSettingsStore() as Record<string, any>;\n        this.gameSystems[id] = system;\n      }\n      return this.gameSystems[id];\n    },\n    delete_system(id: string) {\n      delete this.gameSystems[id];\n    },\n    get_catalogue_state(catalogue: BSIData | Catalogue) {\n      const id = getDataDbId(catalogue);\n      if (!this.unsavedChanges[id]) {\n        this.unsavedChanges[id] = {\n          changed: false,\n          unsaved: false,\n        };\n      }\n      return this.unsavedChanges[id];\n    },\n    set_catalogue_changed(catalogue: Catalogue | BSIDataCatalogue | BSIDataSystem, changedState: boolean = true) {\n      const state = this.get_catalogue_state(catalogue);\n      if (changedState) {\n        state.changed = true;\n        if (!state.unsaved) {\n          this.unsavedCount += 1;\n          state.unsaved = changedState;\n        }\n      } else {\n        state.unsaved = changedState;\n      }\n    },\n    /**\n     * Returns true if the revision was incremented\n     */\n\n    async save_catalogue(\n      system: GameSystemFiles,\n      catalogue: Catalogue,\n      incrementRevision?: \"github\" | \"yes\" | \"no\"\n    ): Promise<boolean> {\n      const state = this.get_catalogue_state(catalogue);\n      const revision = catalogue.revision;\n      if (incrementRevision === \"github\" && system.github) {\n        catalogue.revision = await getNextRevision(system.github, catalogue);\n      }\n      if (incrementRevision === \"yes\" && !state?.incremented) {\n        catalogue.revision = catalogue.revision ? catalogue.revision + 1 : 1;\n        state.incremented = true;\n      }\n      if (incrementRevision === \"no\") {\n        state.incremented = true;\n      }\n      this.saveCatalogue(catalogue);\n      const cataloguesStore = useCataloguesStore();\n      const id = getDataDbId(catalogue);\n      cataloguesStore.updateCatalogue(catalogue);\n      cataloguesStore.setEdited(id, true);\n      if (state?.unsaved) {\n        this.unsavedCount--;\n        state.unsaved = false;\n      }\n      return catalogue.revision !== revision;\n    },\n    async prompt_revision(catalogue: Catalogue | GameSystemFiles) {\n      const settings = useSettingsStore();\n\n      const sys = (catalogue instanceof Catalogue ? catalogue.manager : catalogue) as GameSystemFiles;\n      for (const cat of catalogue instanceof Catalogue ? [catalogue] : sys.getAllLoadedCatalogues()) {\n        const state = this.get_catalogue_state(cat);\n        if (state?.unsaved && !state.incremented) {\n          if (sys.github && settings.githubAutoIncrement && !navigator.onLine) {\n            if (\n              await (globalThis.customPrompt &&\n                globalThis.customPrompt({\n                  html: `<span>Would you like to increase the revision of this catalogue?<span><br/>\n    <span class=\"gray\">Note: This is shown because Github cannot be accessed as your are offline</span>`,\n                  cancel: \"No\",\n                  accept: \"Yes\",\n                  id: \"revision\",\n                }))\n            ) {\n              return \"yes\";\n            }\n            return \"no\";\n          } else if (sys.github && settings.githubAutoIncrement) {\n            return \"github\";\n          } else if (sys.github) {\n            if (\n              await (globalThis.customPrompt &&\n                globalThis.customPrompt({\n                  html: `<span>Would you like to increase the revision of this catalogue?<span><br/>`,\n                  cancel: \"No\",\n                  accept: \"Yes\",\n                  id: \"revision\",\n                }))\n            ) {\n              return \"yes\";\n            }\n            return \"no\";\n          } else {\n            if (\n              await (globalThis.customPrompt &&\n                globalThis.customPrompt({\n                  html: `<span>Would you like to increase the revision of this catalogue?<span><br/>\n    <span class=\"gray\">Note: You can enable automatic revision increments by integrating with GitHub.<br/>This can be achieved by adding a publication in the GameSystem named \"GitHub\" with the repository's GitHub URL as the Publication URL.`,\n                  cancel: \"No\",\n                  accept: \"Yes\",\n                  id: \"revision\",\n                }))\n            ) {\n              return \"yes\";\n            }\n            return \"no\";\n          }\n        }\n      }\n    },\n    async save_all(system?: string) {\n      let failed = false;\n      let incremented = 0;\n\n      const settings = useSettingsStore();\n      try {\n        for (const sys of Object.values(this.gameSystems)) {\n          if (system && sys.gameSystem?.gameSystem?.id !== system) {\n            continue;\n          }\n          const increment = await this.prompt_revision(sys);\n          for (const cat of sys.getAllLoadedCatalogues()) {\n            if (this.get_catalogue_state(cat)?.unsaved) {\n              if (await this.save_catalogue(sys, cat, increment)) {\n                incremented += 1;\n              }\n            }\n          }\n        }\n      } catch (e) {\n        notify({ text: `Failed to save: ${(e as Error).name}: ${(e as Error).message}`, type: \"error\" });\n        failed = true;\n      }\n      if (incremented) {\n        notify(`Incremented ${incremented} catalogue's revision`);\n      }\n      return failed;\n    },\n    set_filter(filter: string) {\n      this.$state.filter = filter;\n      this.filterRegex = textSearchRegex(filter);\n    },\n    /**\n     * Sets the active `catalogueComponent` so it can be used by functions in the store\n     * Its typed as `any` to prevent recursive type\n     */\n    init(component: any) {\n      this.catalogueComponent = component as CatalogueComponentT;\n      (globalThis as any).$store = this;\n      (globalThis as any).$search = (q: string) =>\n        this.system_search(this.catalogueComponent?.systemFiles!, { filter: q });\n    },\n    /**\n     * Force the left panel to re-render, used for setting its state by having it reload the saved state\n     */\n    rerender_catalogue() {\n      if (this.catalogueComponent) {\n        this.catalogueComponent.key += 1;\n      }\n    },\n    unselect(obj?: VueComponent) {\n      const next_selected = [];\n      const next_unselected = [];\n      for (const selection of this.selections) {\n        if (obj === undefined || toRaw(selection.obj) === toRaw(obj)) {\n          next_unselected.push(selection);\n        } else {\n          next_selected.push(selection);\n        }\n      }\n      this.selections = next_selected;\n      for (const unselected of next_unselected) {\n        if (unselected.onunselected) {\n          unselected.onunselected();\n        }\n        if (unselected.obj === this.selectedItem) {\n          this.selectedItem = null;\n        }\n      }\n    },\n    is_selected(obj: VueComponent) {\n      return this.selections.find((o) => o.obj === obj) !== undefined;\n    },\n    select(obj: VueComponent, onunselected: () => unknown, payload?: any) {\n      if (!this.is_selected(obj)) {\n        this.selections.push({ obj, onunselected, payload });\n      }\n    },\n    do_select(e: MouseEvent | null, el: VueComponent, group: VueComponent | VueComponent[]) {\n      const entries = Array.isArray(group) ? group : [group];\n      const last = this.selectedElementGroup;\n      const last_element = this.selectedElement;\n      this.selectedElement = el;\n      this.selectedElementGroup = group;\n\n      if (e?.shiftKey && toRaw(group) === toRaw(last)) {\n        const a = entries.findIndex((o) => o === toRaw(last_element));\n        const b = entries.findIndex((o) => o === toRaw(this.selectedElement));\n        const low = Math.min(a, b);\n        const high = Math.max(a, b);\n        for (let i = low; i <= high; i++) {\n          const entry: any = entries[i];\n          entry.select();\n        }\n        return;\n      }\n      if (!e?.ctrlKey && !e?.metaKey) {\n        this.unselect();\n      }\n      if (e?.ctrlKey && this.is_selected(el)) {\n        this.unselect(el);\n      } else {\n        el.select();\n        this.selectedItem = el;\n        this.mode = \"edit\";\n      }\n    },\n    do_rightclick_select(e: MouseEvent, el: VueComponent, group: VueComponent | VueComponent[]) {\n      if (this.is_selected(el)) return;\n      this.do_select(e, el, group);\n    },\n\n    get_selections(): EditorBase[] {\n      return this.selections.map((o) => get_base_from_vue_el(o.obj));\n    },\n    get_selections_with_payload(): Array<{ obj: EditorBase; payload: any }> {\n      return this.selections.map((o) => ({ obj: get_base_from_vue_el(o.obj), payload: o.payload }));\n    },\n    get_selected(): EditorBase | undefined {\n      return this.selectedItem && get_base_from_vue_el(this.selectedItem);\n    },\n    async do_action(type: string, undo: () => void | Promise<void>, redo: () => any | Promise<any>) {\n      let result;\n      try {\n        result = await redo();\n      } catch (e) {\n        console.error(e);\n        return;\n      }\n\n      if (this.undoStackPos < this.undoStack.length) {\n        const n_to_remove = this.undoStack.length - this.undoStackPos - 1;\n        this.undoStack.splice(this.undoStackPos + 1, n_to_remove, { type, undo, redo });\n      } else {\n        this.undoStack.push({ type, undo, redo });\n      }\n      this.undoStackPos += 1;\n      return result;\n    },\n    /**\n     * Set the content of the clipboard, accepts an event to better conform with browser security/permissions stuff\n     * @param data the entries to set in the clipboard, do not use for copying text\n     * @param event the event to use, if not provided a valid ClipboardEvent, will use the navigator.clipboard.writeText()\n     */\n    async set_clipboard(data: EditorBase[], event?: ClipboardEvent) {\n      if (this.clipboardmode === \"json\") {\n        //@ts-ignore\n        const shallowCopies = data.map((o) => ({ parentKey: o.parentKey, ...o })) as EditorBase[];\n        const json = entriesToJson(shallowCopies, new Set([\"parentKey\"]), { forceArray: false, formatted: true });\n        if (event?.clipboardData) {\n          event.clipboardData.setData(\"text/plain\", json);\n        } else {\n          await navigator.clipboard.writeText(json);\n        }\n      } else {\n        this.clipboard = data;\n      }\n    },\n    /**\n     * Get the content of the clipboard, accepts an event to better conform with browser security/permissions stuff\n     * @param event the event to use, if not provided a valid ClipboardEvent, will use the navigator.clipboard.readText()\n     */\n    async get_clipboard(event?: ClipboardEvent) {\n      if (this.clipboardmode === \"json\") {\n        if (event?.clipboardData) {\n          const text = event.clipboardData.getData(\"text/plain\");\n          if (!text) return [];\n          return JSON.parse(text);\n        } else {\n          const text = await navigator.clipboard.readText();\n          return JSON.parse(text);\n        }\n      }\n      return this.clipboard;\n    },\n    can_undo() {\n      return Boolean(this.undoStack[this.undoStackPos]);\n    },\n    async undo() {\n      if (!this.can_undo()) return;\n      const action = this.undoStack[this.undoStackPos];\n      if (action) {\n        await action.undo();\n        this.undoStackPos--;\n      }\n    },\n    can_redo() {\n      return Boolean(this.undoStack[this.undoStackPos + 1]);\n    },\n    async redo() {\n      if (!this.can_redo()) return;\n      const action = this.undoStack[this.undoStackPos + 1];\n      if (action) {\n        await action.redo();\n        this.undoStackPos++;\n      }\n    },\n    async cut(event: ClipboardEvent) {\n      await this.set_clipboard(this.get_selections(), event);\n      this.remove();\n    },\n    async copy(event: ClipboardEvent) {\n      await this.set_clipboard(this.get_selections(), event);\n    },\n    async paste(event: ClipboardEvent) {\n      this.add(await this.get_clipboard(event));\n    },\n    async pasteLink() {\n      const obj = await this.get_clipboard();\n      if (!obj || !obj.parentKey || Array.isArray(obj)) {\n        return;\n      }\n      const selections = this.get_selections();\n      const first = selections[0];\n      if (!first) {\n        return;\n      }\n      const actual = first.getCatalogue().findOptionById(obj.id) as EditorBase | undefined\n      if (actual) {\n        const link = {\n          parentKey: actual.isGroup() || actual.isEntry() ? \"entryLinks\" : \"infoLinks\",\n          targetId: actual.id,\n          id: generateBattlescribeId(),\n          type: actual.editorTypeName,\n          name: actual.getName(),\n          hidden: actual.hidden,\n          select: true,\n        } ;\n        this.add(link);\n      }\n    },\n    /**\n     * Duplicate the current selections\n     */\n    async duplicate() {\n      const selections = this.get_selections();\n      if (!selections.length) return;\n      const catalogue = selections[0].getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      let addeds = [] as EditorBase[];\n\n      const redo = async () => {\n        addeds = [];\n        for (const item of selections) {\n          const copy = JSON.parse(entryToJson(item, editorFields));\n          if (!item.parent) continue;\n          const arr = item.parent[item.parentKey as keyof EditorBase];\n          if (!Array.isArray(arr)) {\n            throw new Error(`Couldn't duplicate: parent[${item.parentKey}] is not an array`);\n          }\n          setPrototypeRecursive({ [item.parentKey]: copy });\n          scrambleIds(catalogue, copy);\n          arr.push(copy);\n          await onAddEntry(copy, catalogue, item.parent, this.get_system(sysId));\n          addeds.push(copy);\n        }\n      };\n      const undo = () => {\n        for (const entry of addeds) {\n          popAtEntryPath(catalogue, getEntryPath(entry));\n          onRemoveEntry(entry);\n        }\n      };\n      await this.do_action(\"dupe\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n    },\n    /**\n     * Remove the current selections.\n     */\n    async remove() {\n      const selections = this.get_selections();\n      if (!selections.length) return;\n      const catalogue = selections[0].getCatalogue();\n      const sysId = catalogue.getSystemId();\n      let entries = [] as EditorBase[];\n      for (const selected of selections) {\n        if (selected.catalogue !== catalogue) continue;\n        entries.push(selected);\n      }\n\n      let paths = [] as EntryPathEntry[][];\n      let removeds = [] as EditorBase[];\n      const redo = async () => {\n        const temp = entries;\n        const manager = this.get_system(sysId);\n        removeds = [];\n        paths = [];\n        for (const entry of temp) {\n          const path = getEntryPath(entry);\n          const removed = popAtEntryPath(catalogue, path);\n          removeds.push(removed);\n          paths.push(path);\n          await onRemoveEntry(removed, manager);\n        }\n        removeds.reverse();\n        paths.reverse();\n      };\n      const undo = async () => {\n        for (const [path, entry] of enumerate_zip(paths, removeds)) {\n          const parent = addAtEntryPath(catalogue, path, entry);\n          await onAddEntry(entry, catalogue, parent, this.get_system(sysId));\n        }\n      };\n      await this.do_action(\"remove\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n      this.unselect();\n    },\n    /**\n     *  Adds entries to the current selections, or provided parents.\n     * @param data the entries to add. Can be an array of entries, or a single entry.\n     * @param childKey the key to use when adding the childs. If not provided, the entries will be added to the parentKey of the first entry.\n     * @param parents the parents to use instead of the current selections. If not provided, the current selections will be used.\n     */\n    async add(\n      data: MaybeArray<EditorBase | Record<string, any>>,\n      childKey?: keyof Base,\n      parents?: EditorBase | EditorBase[]\n    ) {\n      let parentsWithPayload = [] as Array<{ obj: EditorBase; payload?: string }>;\n      if (!parents) {\n        parentsWithPayload = this.get_selections_with_payload();\n      } else {\n        parents = Array.isArray(parents) ? parents : [parents];\n        parentsWithPayload = parents.map((o) => ({ obj: o }));\n      }\n      if (!parentsWithPayload.length) {\n        console.error(\"Couldn't add: no selection or parent(s) provided\");\n        return;\n      }\n      const entries = (Array.isArray(data) ? data : [data]) as Array<EditorBase | Record<string, any> | string>;\n      if (!entries.length) {\n        console.error(\"Couldn't add: no data provided\");\n        return;\n      }\n\n      const catalogue = parentsWithPayload[0].obj.getCatalogue();\n      const sysId = catalogue.getSystemId();\n\n      let addeds = [] as EditorBase[];\n      const redo = async () => {\n        addeds = [];\n        for (const selection of parentsWithPayload) {\n          const item = selection.obj;\n          const selectedCatalogueKey = selection.payload;\n          await this.open(item, true);\n          for (const entry of entries as Record<string, any>[]) {\n            // Ensure there is array to put the childs in\n            const key = fixKey(item, childKey || entry.parentKey, selectedCatalogueKey);\n            if (!key) {\n              console.warn(\"Couldn't create\", childKey || entry.parentKey, \"in\", selectedCatalogueKey);\n              continue;\n            }\n            if (!item[key as keyof Base]) (item as any)[key] = [];\n            const arr = item[key as keyof Base];\n            if (!Array.isArray(arr)) continue;\n\n            if (!allowed_children(item, item.parentKey)?.has(key as string)) {\n              console.warn(\"Couldn't add\", key, \"to a\", item.parentKey, \"because it is not allowed\");\n              continue;\n            }\n            // Copy to not affect existing\n            const json = entry instanceof Base ? entryToJson(entry, editorFields) : JSON.stringify(entry);\n            const copy = JSON.parse(json);\n            clean(copy, key as string);\n            delete copy.parentKey;\n\n            // Initialize classes from the json\n            setPrototypeRecursive({ [key]: copy });\n            scrambleIds(catalogue, copy);\n\n            // Show added entry even if there is a search\n            this.filtered.push(copy);\n            copy.showChildsInEditor = true;\n            let cur = copy;\n            while (cur) {\n              cur.showInEditor = true;\n              cur = cur.parent;\n            }\n\n            // Add it to its parent\n            arr.push(copy);\n            await onAddEntry(copy, catalogue, item, this.get_system(sysId));\n            addeds.push(copy);\n          }\n        }\n        return addeds[0];\n      };\n      const undo = () => {\n        for (const entry of addeds) {\n          popAtEntryPath(catalogue, getEntryPath(entry));\n          onRemoveEntry(entry);\n        }\n      };\n      const initial = await this.do_action(\"add\", undo, redo);\n      this.set_catalogue_changed(catalogue, true);\n      return initial;\n    },\n    open_selected() {\n      for (const el of this.selections as any[]) {\n        el.obj.open();\n      }\n    },\n    /**\n     * Returns the default object when creating a given type\n     * @param key the key of the given type (eg: `selectionEntries`)\n     * @param parent (optional) the parent, used to modify the initial object conditionally\n     */\n    get_initial_object(key: string, parent?: EditorBase): any {\n      switch (key) {\n        case \"costTypes\":\n          return {\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            defaultCostLimit: -1,\n          };\n        case \"repeats\":\n          return {\n            value: 1,\n            repeats: 1,\n            field: \"selections\",\n            scope: \"parent\",\n            childId: \"any\",\n            shared: true,\n            roundUp: false,\n          };\n        case \"constraints\": {\n          const isAssociation = parent?.parentKey === \"associations\";\n          const result = {\n            type: \"min\",\n            value: 1,\n            field: parent?.isForce() ? \"forces\" : \"selections\",\n            scope: \"parent\",\n            shared: true,\n          } as BSIConstraint;\n          if (isAssociation) {\n            result.childId = \"any\";\n          }\n          return result;\n        }\n        case \"conditions\":\n          return {\n            type: \"atLeast\",\n            value: 1,\n            field: \"selections\",\n            scope: \"parent\",\n            childId: \"any\",\n            shared: true,\n          };\n        case \"modifiers\":\n          return {\n            type: \"set\",\n            value: true,\n            field: \"hidden\",\n          };\n        case \"modifierGroups\":\n        case \"conditionGroups\":\n          return { type: \"and\" };\n        case \"sharedSelectionEntries\":\n        case \"selectionEntries\":\n          return {\n            type: \"upgrade\",\n            import: true,\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n          };\n        case \"entryLinks\":\n          return {\n            import: true,\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n          };\n        case \"associations\":\n          return {\n            min: 1,\n            max: 1,\n            scope: \"roster\",\n            includeChildSelections: false,\n            of: \"any\",\n            ids: [],\n            label: \"Association\",\n            labelMembers: \"Unit\",\n            hidden: false,\n          };\n        case \"sharedProfiles\":\n        case \"profiles\":\n          const profileType = parent?.getCatalogue().iterateProfileTypes().next().value;\n          const name = !parent || parent?.isCatalogue() ? undefined : parent?.getName();\n          return {\n            name: name || \"New Profile\",\n            typeId: profileType?.id,\n            typeName: profileType?.name,\n            hidden: false,\n          } as BSIProfile;\n        case \"catalogueLinks\":\n          return {\n            type: \"catalogue\",\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n          };\n\n        case \"categoryLinks\":\n          return {\n            type: \"category\",\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n          };\n\n        default:\n          return {\n            name: `New ${getTypeLabel(getTypeName(key))}`,\n            hidden: false,\n          };\n      }\n    },\n    /**\n     * Creates child entries in the current selection\n     * @param key the key of the child (eg: `selectionEntries`)\n     * @param data data to use when creating the child entry\n     */\n    async create(key: string & keyof Base, data?: any) {\n      const obj = {\n        ...this.get_initial_object(key),\n        select: true,\n        ...data,\n      };\n      if (![\"modifiers\", \"conditions\", \"modifierGroups\", \"conditionGroups\"].includes(key)) {\n        obj.id = generateBattlescribeId();\n      }\n      const added = await this.add(obj, key);\n      this.open_selected();\n    },\n    /**\n     * Creates child entries in the provided parent\n     * @param key the key of the child (eg: `selectionEntries`)\n     * @param parent the parent to add the child in\n     * @param data data to use when creating the child entry\n     */\n    async create_child(key: string & keyof Base, parent: EditorBase, data?: any) {\n      const obj = {\n        ...this.get_initial_object(key, parent),\n        id: generateBattlescribeId(),\n        select: true,\n        ...data,\n      };\n      await this.add(obj, key, parent);\n      this.open_selected();\n    },\n    can_move(obj: EditorBase) {\n      if (obj.isLink()) return false;\n      return true;\n    },\n    get_move_targets(obj: EditorBase): Array<{ target: Catalogue; type: \"root\" | \"shared\" }> | undefined {\n      const catalogue = obj.catalogue;\n      if (!catalogue) return;\n      if (obj.isLink()) return;\n      const result = [] as Array<{ target: Catalogue; type: \"root\" | \"shared\" }>;\n      if (!obj.parentKey.startsWith(\"shared\") && this.move_to_key(obj, \"shared\")) {\n        result.push({ target: catalogue, type: \"shared\" });\n      } else if (obj.parentKey.startsWith(\"shared\") && this.move_to_key(obj, \"root\")) {\n        result.push({ target: catalogue, type: \"root\" });\n      }\n      if (this.move_to_key(obj, \"shared\")) {\n        for (const imported of catalogue.imports) {\n          result.push({ target: imported, type: \"shared\" });\n        }\n      }\n      if (this.move_to_key(obj, \"root\")) {\n        for (const imported of catalogue.imports) {\n          result.push({ target: imported, type: \"root\" });\n        }\n      }\n      return result;\n    },\n    move_to_key(obj: EditorBase, type: string) {\n      if (type === \"shared\") {\n        switch (obj.editorTypeName) {\n          case \"infoGroup\":\n            return \"sharedInfoGroups\";\n          case \"rule\":\n            return \"sharedRules\";\n          case \"profile\":\n            return \"sharedProfiles\";\n          case \"selectionEntry\":\n            return \"sharedSelectionEntries\";\n          case \"selectionEntryGroup\":\n            return \"sharedSelectionEntryGroups\";\n          default:\n            return \"\";\n        }\n      }\n      switch (obj.editorTypeName) {\n        case \"infoGroup\":\n          return \"infoGroups\";\n        case \"rule\":\n          return \"rules\";\n        case \"profile\":\n          return \"profiles\";\n        case \"selectionEntry\":\n          return \"selectionEntries\";\n        case \"selectionEntryGroup\":\n          return \"\";\n        default:\n          return obj.parentKey;\n      }\n    },\n    async move(obj: EditorBase, from: Catalogue, to: Catalogue, type: \"root\" | \"shared\") {\n      const redo = async () => {\n        // Get key the object will end up in\n        const catalogueKey = this.move_to_key(obj, type) as ItemKeys;\n        if (!catalogueKey) {\n          console.error(\"Could not find key for move\", obj.editorTypeName, type);\n          return;\n        }\n\n        // move obj to target\n        const parent = obj.parent!;\n        const path = getEntryPath(obj);\n\n        removeEntry(obj);\n        onRemoveEntry(obj);\n        const copy = JSON.parse(entryToJson(obj, editorFields));\n\n        setPrototypeRecursive({ [catalogueKey]: copy });\n        if (!to[catalogueKey]) to[catalogueKey] = [];\n\n        to[catalogueKey]!.push(copy);\n        await onAddEntry(copy, to, to, this.get_system(to.getSystemId()));\n\n        const linkableTypes = [\"rule\", \"infoGroup\", \"profile\", \"selectionEntry\", \"selectionEntryGroup\"];\n        const canBeLinked = linkableTypes.includes(obj.editorTypeName);\n        const shouldMakeLink = !obj.parentKey.startsWith(\"shared\");\n\n        // replace previous obj with link to moved obj\n        if (canBeLinked && shouldMakeLink) {\n          const link = {\n            targetId: copy.id,\n            id: from.generateNonConflictingId(),\n            type: obj.editorTypeName,\n            name: obj.getName(),\n            hidden: obj.hidden,\n            select: true,\n          } as any;\n          if (obj.isEntry()) {\n            link.collective = obj.collective;\n          }\n          const linkKey = obj.isGroup() || obj.isEntry() ? \"entryLinks\" : \"infoLinks\";\n          setPrototypeRecursive({ [linkKey]: link });\n          path[path.length - 1].key = linkKey;\n          addAtEntryPath(from, path, link);\n          await onAddEntry(link, from, parent, this.get_system(from.getSystemId()));\n        }\n      };\n      function undo() {\n        // undo\n        // replace obj path with obj\n        // delete obj from target\n        // update obj\n      }\n\n      // Undo is not done at this feature stills needs some iteration\n      // await this.do_action(\"move\", undo, redo);\n      await redo();\n\n      this.set_catalogue_changed(from, true);\n      this.set_catalogue_changed(to, true);\n    },\n    async open(obj: EditorBase, last?: boolean, noLog?: boolean) {\n      let current = document.getElementById(\"editor-entries\") as Element;\n      if (!current) {\n        return;\n      }\n\n      async function open_el(el: any) {\n        const context = get_ctx(el);\n        context.open();\n        await context.$nextTick();\n      }\n      async function close_el(el: any) {\n        const context = get_ctx(el);\n        context.close();\n        await context.$nextTick();\n      }\n\n      const path = getEntryPath(obj);\n      if (!path?.length) {\n        return;\n      }\n      current = current.getElementsByClassName(`depth-0 ${path[0].key}`)[0];\n      if (!current) {\n        if (noLog !== true) {\n          console.error(\"Couldn't find root element for\", path[0].key, \"in\", obj.catalogue.getName());\n        }\n        return;\n      }\n      await open_el(current);\n      const nodes = [] as EditorBase[];\n      forEachParent(obj, (parent) => {\n        nodes.push(parent);\n      });\n      nodes.pop(); // pop catalogue\n      nodes.reverse();\n      nodes.push(obj);\n\n      // hack so that the correct label for sharedProfiles is opened\n      if (nodes[0].parentKey === 'sharedProfiles'){\n        nodes.unshift({\n          parentKey: (`label-${nodes[0].typeName ?? \"Untyped\"}`)\n        } as any)\n      }\n      const lastNode = nodes[nodes.length - 1];\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        const childs = current.getElementsByClassName(`depth-${i + 1} ${node.parentKey}`);\n\n        const child = node.parentKey.startsWith('label-') ? childs[0] : [...childs].find((o) => get_base_from_vue_el(get_ctx(o)) === node);\n        if (!child) {\n          if (noLog !== true) {\n            console.error(\"Couldn't find path to\", obj.getName(), obj, \"parent:\", obj.parent?.getName());\n          }\n          // throw new Error(\"Invalid path\");\n        }\n        if (child) {\n          current = child;\n        }\n        \n\n        if (node !== lastNode) {\n          await open_el(current);\n        }\n        if (node === lastNode) {\n          if (last === false) {\n            await close_el(current);\n          } else if (last === true) {\n            await open_el(current);\n          }\n        }\n      }\n\n      return current;\n    },\n    /**\n     *  Changes the current route to be the catalogue provided\n     *  Returns true if the route changed\n     */\n    async goto_catalogue(id: string, systemId?: string) {\n      const $router = (this as any as { $router: Router }).$router;\n      if (!$router) {\n        throw new Error(\"Cannot follow link to another catalogue without $router set\");\n      }\n      const rawQuery = ($router.currentRoute as any as RouteLocationNormalizedLoaded)?.query;\n      const query = rawQuery ?? $router.currentRoute?.value?.query;\n      const curId = query?.id || query?.systemId;\n      if (id !== curId) {\n        $router.push({\n          name: \"catalogue\",\n          query: { systemId: systemId || id, id: id },\n        });\n\n        this.$nextTick = new Promise((resolve, reject) => {\n          this.$nextTickResolve = resolve;\n        });\n        await this.$nextTick;\n        return true;\n      }\n      return false;\n    },\n\n    async show(obj: EditorBase, highlight = true) {\n      if (!this.filtered.includes(obj)) {\n        this.filtered.push(obj);\n      }\n      obj.showInEditor = true;\n      obj.showChildsInEditor = true;\n      if (highlight) {\n        obj.highlight = true;\n      }\n      forEachParent(obj as EditorBase, (parent) => {\n        parent.showInEditor = true;\n      });\n    },\n    async goto(obj: EditorBase) {\n      const targetCatalogue = obj.getCatalogue();\n      this.put_current_state_in_history();\n      const uistate = useEditorUIState();\n      uistate.get_data(targetCatalogue.id).selection = getEntryPath(obj);\n\n      await this.goto_catalogue(targetCatalogue.id, targetCatalogue.gameSystemId);\n      this.show(obj, false);\n      await this.scrollto(obj);\n    },\n    async scrollto(obj: EditorBase) {\n      const el = await this.open(obj as EditorBase);\n      if (el) {\n        const context = get_ctx(el);\n        this.do_select(null, context, context);\n        el.scrollIntoView({\n          behavior: \"instant\",\n          block: \"center\",\n          inline: \"center\",\n        });\n      } else {\n        setTimeout(async () => {\n          const el = await this.open(obj as EditorBase);\n          if (el) {\n            const context = get_ctx(el);\n            this.do_select(null, context, context);\n            el.scrollIntoView({\n              behavior: \"instant\",\n              block: \"center\",\n              inline: \"center\",\n            });\n          }\n        }, 50);\n      }\n    },\n    can_goto(obj?: EditorBase | string): boolean {\n      if (!obj) return false;\n      return typeof obj === \"object\" && obj instanceof Base;\n    },\n    can_follow(obj?: EditorBase): boolean {\n      return Boolean(obj?.target);\n    },\n    async follow(obj?: EditorBase & Link) {\n      if (obj?.target) {\n        await this.goto(obj.target as EditorBase);\n      }\n    },\n    async move_up(obj: EditorBase) {\n      if (obj.parent) {\n        const arr = obj.parent[obj.parentKey] as EditorBase[];\n        const index = arr.indexOf(obj);\n        if (index > 0) {\n          const temp = arr.splice(index, 1)[0];\n          arr.splice(index - 1, 0, temp);\n        }\n      }\n    },\n    async move_down(obj: EditorBase) {\n      if (obj.parent) {\n        const arr = obj.parent[obj.parentKey] as EditorBase[];\n        const index = arr.indexOf(obj);\n        if (index >= 0 && index < arr.length - 1) {\n          const temp = arr.splice(index, 1)[0];\n          arr.splice(index + 1, 0, temp);\n        }\n      }\n    },\n    get_leftpanel_open_collapsible_boxes() {\n      function find_open_recursive(elt: Element, obj: Record<string, any>, depth = 0) {\n        const cls = `depth-${depth} collapsible-box opened`;\n        const results = elt.getElementsByClassName(cls);\n        if (!results?.length) return;\n        for (const cur of results) {\n          const item = get_base_from_vue_el(get_ctx(cur));\n          const key = item.parentKey;\n          const parent = item.parent;\n\n          if (parent) {\n            const val = parent[key];\n            if (!val || !Array.isArray(val)) continue;\n            const index = val.indexOf(item as any);\n            if (!(key in obj)) obj[key] = {};\n            if (!(index in obj[key])) obj[key][index] = {};\n            find_open_recursive(cur, obj[key][index], depth + 1);\n          } else {\n            const keys = [...cur.classList].filter((o) => goodJsonKeys.has(o) || o.startsWith('label-'));\n            for (const key of keys) {\n              obj[key] = {};\n              obj[key][0] = {};\n            }\n            find_open_recursive(cur, obj[keys[0]][0], depth + 1);\n          }\n        }\n      }\n      const result = {};\n      find_open_recursive(document.documentElement, result);\n      return result;\n    },\n    get_leftpanel_state() {\n      if (!this.catalogueComponent) return {};\n      const leftpanelstate = {} as Record<string, any>;\n      const leftpanel = this.catalogueComponent.$refs.leftpanel as typeof LeftPanelDefaults;\n      for (const key of Object.keys(LeftPanelDefaults) as (keyof typeof LeftPanelDefaults)[]) {\n        leftpanelstate[key] = leftpanel[key];\n      }\n      return leftpanelstate as typeof LeftPanelDefaults;\n    },\n    get_current_state(): EditorUIState {\n      const selected = this.get_selected();\n      const catalogue = this.catalogueComponent?.cat;\n      return {\n        ...this.get_leftpanel_state(),\n        mode: this.mode,\n        open: this.get_leftpanel_open_collapsible_boxes(),\n        selection: selected ? getEntryPath(selected) : undefined,\n        catalogueId: catalogue?.id,\n        systemId: catalogue?.gameSystemId,\n      };\n    },\n    save_state() {\n      if (this.catalogueComponent && this.catalogueComponent.cat) {\n        const id = this.catalogueComponent.cat.id;\n        const uistate = useEditorUIState();\n        const state = this.get_current_state();\n        uistate.set_state(id, state);\n      }\n    },\n    async load_state(state: EditorUIState) {\n      if (this.catalogueComponent) {\n        useEditorUIState().set_state(state.catalogueId!, state);\n        this.mode = state.mode || \"edit\";\n        const changedCatalogue = await this.goto_catalogue(state.catalogueId!, state.systemId);\n        if (!changedCatalogue) {\n          this.catalogueComponent.load_state(state);\n          this.rerender_catalogue();\n        }\n      }\n    },\n    put_state_in_history(state: EditorUIState) {\n      if (this.historyStackPos < this.historyStack.length) {\n        const n_to_remove = this.historyStack.length - this.historyStackPos;\n        this.historyStack.splice(this.historyStackPos, n_to_remove, state);\n      } else {\n        this.historyStack.push(state);\n      }\n      this.historyStackPos = this.historyStack.length;\n    },\n    put_current_state_in_history() {\n      if (this.catalogueComponent && this.catalogueComponent.cat) {\n        this.put_state_in_history(this.get_current_state());\n      }\n    },\n    can_back() {\n      return this.historyStackPos > 0;\n    },\n    async back() {\n      if (this.can_back()) {\n        this.historyStack[this.historyStackPos] = this.get_current_state();\n        this.historyStackPos -= 1;\n        this.load_state(this.historyStack[this.historyStackPos]!);\n      }\n    },\n    can_forward() {\n      if (this.historyStack[this.historyStack.length - 1]) {\n        return this.historyStackPos < this.historyStack.length - 1;\n      }\n    },\n    async forward() {\n      if (this.can_forward()) {\n        this.historyStackPos += 1;\n        this.load_state(this.historyStack[this.historyStackPos]!);\n      }\n    },\n    async update_catalogue_search(catalogue: Catalogue, data: { filter: string; ignoreProfilesRules: boolean }) {\n      const { filter, ignoreProfilesRules } = data;\n      const prev = this.filtered as EditorBase[];\n      for (const p of prev) {\n        delete p.showInEditor;\n        delete p.showChildsInEditor;\n        delete p.highlight;\n        forEachParent(p as EditorBase, (parent) => {\n          delete parent.showInEditor;\n          delete p.showChildsInEditor;\n        });\n      }\n      if (this.filter.length <= 1) {\n        this.set_filter(\"\");\n        this.filtered = [];\n        return;\n      }\n\n      this.set_filter(filter);\n      this.filtered = catalogue.findOptionsByText(filter) as EditorBase[];\n      if (ignoreProfilesRules) {\n        this.filtered = this.filtered.filter((o) => !o.isProfile() && !o.isRule() && !o.isInfoGroup());\n      }\n      for (const p of this.filtered) {\n        this.show(p);\n      }\n      await nextTick();\n\n      if (this.filtered.length < 300) {\n        for (const p of this.filtered) {\n          if (!p.parent) continue;\n          try {\n            await this.open(p as EditorBase, false, true);\n          } catch (e) {\n            continue;\n          }\n        }\n      }\n    },\n    async system_search(system: GameSystemFiles, query: { filter: string }, max = 1000) {\n      const result = [] as EditorBase[];\n\n      const { filter } = query;\n      if (!filter) return null;\n      const regx = textSearchRegex(filter);\n      let more = false;\n\n      await system.loadAll();\n      for (const file of system.getAllLoadedCatalogues()) {\n        file.forEachObjectWhitelist((val: EditorBase, parent) => {\n          if (result.length >= max) return;\n          if (val.isLink()) {\n            if (val.target && val.isCategory() && !parent?.isForce()) {\n              return;\n            }\n          }\n\n          const name = val.getName?.call(val);\n          const text = (val as any as Characteristic).$text;\n          const desc = (val as any as Rule).description;\n          const id = val.id;\n          if (id === filter) {\n            result.push(val);\n          } else if ((name && String(name).match(regx)) || id === filter) {\n            result.push(val);\n          } else if (text && String(text).match(regx)) {\n            result.push(val);\n          } else if (desc && String(desc).match(regx)) {\n            result.push(val);\n          }\n        });\n        if (result.length >= max) {\n          more = true;\n          break;\n        }\n      }\n      console.log(\"Search for\", `\"${filter}\"`, \"found\", result.length, \"results\");\n      const grouped = {} as Record<string, EditorBase[]>;\n      for (const found of result) {\n        addObj(grouped, found.catalogue.name, found);\n      }\n      return { grouped, all: result, more };\n    },\n  },\n});\n"],"names":["splitExactlyConstraints","obj","constraints","constraint","min","max","result","copy","splitExactlyConstraintsModifiers","splitModifiers","modifiers","out_modifiers","modifier","splitModifierGroups","modifierGroups","out_group","group","split","isNonEmptyIfHasOneOf","arrayKeys","arrayKeysWithoutId","goodKeys","goodKeysWiki","getDataObject","data","getDataDbId","Base","json","__publicField","entryToJson","categoryLink","stack","current","key","getAllInfoGroups","_a","o","iterateModifierGroupsRecursive","gst","cat","callbackfn","_depth","instance","blacklist","cur","target","whiteList","value","isObject","i","badKeys","cb","s","UNCATEGORIZED_ID","useTarget","CategoryLink","sub_grp","skipGroup","child","maxes","getTheoreticalMaxes","name","found","Entry","Group","Link","d","cost","InfoLink","ILLEGAL_ID","Category","Force","categories","force","copied","clone","forceCategories","link","category","maxValue","maxConstraints","push","n","beginLength","constraintValue","modifier_group","_b","_c","_d","ProfileType","Profile","Characteristic","InfoGroup","basicQueryFields","Condition","Constraint","Modifier","ModifierGroup","Rule","grp","groups","goodJsonArrayKeys","goodJsonKeys","rootToJson","fixRoot","root","k","v","extraFields","entriesToJson","options","takeOutOfArray","forEachObjectWhitelist2","validScopes","validChildIds","isScopeValid","parent","scope","getModifierOrConditionParent","findSelfOrParentWhere","getModifiedField","base","field","catalogue","fieldToText","removePrefix","type","constraintToText","manager","conditionToString","condition","includeId","fieldToString","rawField","what","of","rawScope","recursive","inScope","has","ofWhat","modifierToString","CatalogueLink","Publication","Catalogue","deleteBadLinks","units","system","rulesObj","imported","addObjUnique","proc","newError","error","recurse","idx","other","id","event","costType","publication","entry","shared","e","found_import","globalOption","val","text","regx","textSearchRegex","generateBattlescribeId","importsWithEntries","imports","copiedForce","hasUnits","categoryEntry","missingUnits","illegal_clone","set","foundUnits","uncategorizedUnits","uncategorized","illegal","unit","sortedUnits","sortBy","groupBy","roster_constraints","force_constraints","by_id_constraints","force_or_category_ids","by_category_force_constraints","localAddBoundCategoryConstraints","hash","addObj","fromIndex","from_id_extra_constraints","force_extra_constraints","node","category_extra_constraints","loaded","deleted","popObj","index","existing","existingCatalogue","isCatalogueDifferent","lnk","_e","_f","ref","indexes","importedCatalogue","unresolvedLinks","unresolvedPublications","parents","noObserve","hasSharedChildId","unresolved","resolveLinks","resolvePublications","from","to","resolveLink","targetType","ids","duplicate","previousField","isInstanceOf","addObjIfMissing","previousLength","currentUnresolved","currentParents","currentParent","NoObserve$1","NoObserve","readBlobAsArrayBuffer","blob","resolve","reject","reader","readBlobAsUint8Array","arrayBuffer","isBlob","isSharedArrayBuffer","b","isNode","isTypedArraySameAsArrayBuffer","typedArray","ArrayBufferReader","arrayBufferOrView","offset","length","BlobReader","inflate","buf","u8","bitsF","_bitsF","bitsE","_bitsE","decodeTiny","_decodeTiny","get17","_get17","noBuf","BFINAL","BTYPE","HLIT","HDIST","HCLEN","ML","MD","off","pos","lmap","dmap","p8","len","_check","U","tl","l","makeCodes","codes2map","mx0","_copyOut","mx1","code","lit","end","ebs","dcode","dlit","dbs","dst","bl","nbuf","LL","tree","ll","ni","src","mx","MAX_BITS","max_code","bits","bl_count","next_code","map","r15","cl","rest","i0","i1","p0","revCodes","imb","dt","u16","u32","x","pushV","tgt","sv","crc","tab","c","inflateRaw","file","config","nextId","waitingForWorkerQueue","startWorker","url","worker","dynamicRequire","mod","request","Worker","fn","req","inflateRawLocal","uncompressedSize","processWaitingForWorkerQueue","inflateRawAsync","dosDateTimeToDate","date","time","day","month","year","millisecond","second","minute","hour","ZipEntry","rawEntry","readEntryDataAsBlob","readEntryDataAsArrayBuffer","buffer","decodeBuffer","EOCDR_WITHOUT_COMMENT_SIZE","MAX_COMMENT_SIZE","EOCDR_SIGNATURE","ZIP64_EOCDR_SIGNATURE","readAs","readAsBlobOrTypedArray","crc$1","getUint16LE","uint8View","getUint32LE","getUint64LE","utf8Decoder","isUTF8","findEndOfCentralDirector","totalLength","size","readStart","eocdr","diskNumber","entryCount","centralDirectorySize","centralDirectoryOffset","commentLength","expectedCommentLength","commentBytes","comment","readZip64CentralDirectory","readEntries","END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE","zip64EocdlOffset","eocdl","zip64EocdrOffset","zip64Eocdr","CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE","rawEntryCount","readEntryCursor","allEntriesBuffer","rawEntries","signature","fileCommentStart","extraFieldBuffer","headerId","dataSize","dataStart","dataEnd","zip64ExtraField","zip64EiefBuffer","nameField","expectedCompressedSize","readEntryDataHeader","fileNameLength","extraFieldLength","localFileHeaderEnd","decompress","fileDataStart","fileDataEnd","dataView","typedArrayOrBlob","unzipRaw","source","unzip","zip","entries","nameStartChar","nameChar","nameRegexp","regexName","getAllMatches","string","regex","matches","match","allmatches","isName","exports","arrayMode","keys","util","require$$0","defaultOptions","validator","xmlData","tags","tagFound","reachedRoot","readPI","tagStartPos","readCommentAndCDATA","closingTag","tagName","validateTagName","msg","getErrorObject","getLineNumberForPosition","readAttributeStr","attrStr","attrStrStart","isValid","validateAttributeString","otg","openPos","afterAmp","validateAmpersand","isWhiteSpace","t","char","start","tagname","angleBracketsCount","doubleQuote","singleQuote","startChar","tagClosed","validAttrStrRegxp","attrNames","getPositionFromMatch","attrName","validateAttrName","validateNumberAmpersand","re","count","message","lineNumber","lines","jPath","attrs","buildOptions","OptionsBuilder","XmlNode","xmlNode","readDocType","entities","hasBody","exp","isEntity","readEntityExp","isElement","isAttlist","isNotation","isComment","entityName","DocTypeReader","hexRegex","numRegex","consider","toNumber","str","trimmedStr","sign","leadingZeros","numTrimmedByZeros","trimZeros","eNotation","num","numStr","strnum","require$$1","require$$2","require$$3","OrderedObjParser$1","addExternalEntities","parseXml","parseTextData","resolveNameSpace","buildAttributesMap","isItStopNode","replaceEntitiesValue","readStopNodeData","saveTextToParentTag","addChild","externalEntities","entKeys","ent","dontTrim","hasAttributes","isLeafNode","escapeEntities","newval","parseValue","prefix","attrsRegx","oldVal","aName","newVal","attrCollection","xmlObj","currentNode","textData","closeIndex","findClosingIndex","colonIndex","lastTagName","propIndex","tagData","readTagExp","childNode","endIndex","tagExp","attrExpPresent","lastTag","tagContent","entity","stopNodes","currentTagName","allNodesExp","stopNodePath","stopNodeExp","tagExpWithClosingIndex","closingChar","attrBoundary","ch","errMsg","closingIndex","removeNSPrefix","separatorIndex","startIndex","openTagCount","shouldParse","OrderedObjParser_1","OrderedObjParser","prettify","compress","arr","compressedObj","tagObj","property","propName","newJpath","isLeaf","isLeafTag","assignAttributes","attrMap","jpath","atrrName","textNodeName","propCount","node2json","XMLParser$1","validationOption","orderedObjParser","orderedResult","XMLParser_1","XMLParser","EOL","toXml","jArray","indentation","arrToStr","xmlStr","isPreviousElementTag","newJPath","tagText","isStopNode","attStr","attr_to_str","tempInd","piTextNodeName","newIdentation","tagStart","tagValue","attr","attrVal","textValue","orderedJs2Xml","buildFromOrderedJs","a","Builder","isAttribute","processTextOrObjNode","indentate","jObj","level","arrLen","listTagVal","j","item","Ks","L","object","tagEndExp","piClosingChar","closeTag","json2xml","XMLBuilder","fxp","containerTags","textNodeTags","escapedHtml","htmlUnescapes","unescape","containers","allowed","xmlToJson","unzipFolder","path","unzipped","isZipExtension","unzipFile","enc","zipExtensions","allowedExtensions","removeExtension","extension_or_file","getExtension","extension","isAllowedExtension","fileExtension","oldBuggedTypes","normalize","normal","old","clean","lookedUp","allowedChilds","empty","allowed_children","new_key","toPlural","BSXmlToJson","hashFnv32a","content","to_snake_case","convertToJson","toSingle","skipKeys","renestChilds","putAttributesIn$","first","forEachValueRecursive","convertToXml","systemCategories","catalogueCategories","getTypeLabel","getTypeName","getNameExtra","_refs","_type","pieces","refcount","getName","repeat","forEachEntryRecursive","callback","removeEntry","onRemoveEntry","removed","childId","onAddEntry","reload","_parent","getEntryPath","getEntryPathInfo","addAtEntryPath","lastNode","getAtEntryPath","popAtEntryPath","scrambleIds","scrambled","parentNode","currentId","newId","fixKey","catalogueKey","keyInfoCache","getKeyInfoClass","cache","parentKey","_key","setKeyInfo","protoMap","getPrototypeFromKey","setPrototype","newProto","setPrototypeRecursive","isDefaultObject","useCataloguesStore","defineStore","bool","gstId","dependencies","previousDependencies","dependency","dependents","state","dirname","filename","getFolderFiles","folderPath","getFolderFolders","fileObjects","filePath","fileObject","writeFile","dirPath","deleteFile","showOpenDialog","showMessageBox","closeWindow","getPath","createFolder","initialized","watchers","watchFile","_","_path","_stats","getFolderRemote","useEditorUIState","depth","deepestCls","results","get_ctx","cls","maxDepth","find_open_recursive","elt","get_base_from_vue_el","next","obj_arr","open","current_node","LeftPanelDefaults","_sfc_main","useEditorStore","useSettingsStore","last","el","scroll","scrollable_el","TAGNAME","filter","ignoreProfilesRules","prev","p","forEachParent","nextTick","r","u","h","f","y","m","g","w","E","P","K","O","S","A","C","D","I","B","T","R","F","M","N","q","$","V","W","Y","z","G","H","Q","X","J","Z","ee","te","ne","se","ie","oe","ae","ue","le","ce","he","de","fe","pe","ye","me","ve","qe","ge","Oe","be","we","xe","ke","Ee","Pe","ct","Ke","Se","Ae","Ce","Be","Ie","je","Qe","et","Re","De","ut","Ne","$e","Te","Ue","Le","Fe","Me","Ve","We","st","it","tt","Je","ot","Ye","ze","Ge","He","Xe","lt","Ze","ht","nt","rt","at","ft","pt","yt","mt","vt","gt","bt","_t","wt","xt","kt","Et","Pt","Kt","Ot","St","At","Ct","jt","Dt","It","Bt","Tt","Rt","Ft","Mt","Nt","qt","Yt","$t","Wt","Ut","Lt","Vt","zt","Gt","Ht","Qt","Xt","Jt","Zt","en","tn","nn","rn","sn","on","an","un","ln","cn","hn","yn","mn","dn","pn","vn","gn","$n","bn","_n","wn","xn","kn","En","Pn","Kn","On","Sn","An","Cn","jn","Dn","In","Bn","Mn","Tn","Rn","Fn","Nn","qn","Un","Ln","Vn","Wn","Yn","zn","Gn","Hn","MySubClassedDexie","Dexie","db","normalizeGithubRepoUrl","input","githubUrlRegex","protocol","user","repo","parseGitHubUrl","githubUrl","repoOwner","repoName","getFileContentFromRepo","urlParts","owner","response","getFileContentFromRepoWithFallback","fallBackPath","getNextRevision","github","fileName","fallBack","removeSuffix","resultRevision","getBookDate","booksDate","loadData","isSystem","isCatalogue","asCatalogue","alreadyLoadedGameSystem","loadedGameSystem","promises","alreadyLoadedCatalogue","promise","loadedCatalogue","BSCatalogueManager","catalogueLink","dateIndex","forceLoad","GameSystemFiles","progress_cb","catalogueId","errorPart","enableGithubIntegrationWithGitFolder","vue_el","p1","p2","markSaving","markChangedOnDisk","unmarkChangedOnDisk","editorFields","files","folder","stringed","xml","shouldZip","nameInZip","zipCompress","progress","result_system_ids","result_files","systems","systemId","systemFiles","markRaw","dbsystem","dbcatalogues","shallowReactive","keepState","cataloguesStore","publications","remote","changedState","incrementRevision","revision","settings","sys","failed","incremented","increment","component","next_selected","next_unselected","selection","toRaw","unselected","onunselected","payload","last_element","low","high","undo","redo","n_to_remove","shallowCopies","action","actual","selections","sysId","addeds","selected","paths","removeds","temp","enumerate_zip","childKey","parentsWithPayload","selectedCatalogueKey","initial","isAssociation","profileType","canBeLinked","shouldMakeLink","linkKey","noLog","open_el","context","close_el","nodes","childs","$router","query","curId","highlight","targetCatalogue","uistate","leftpanelstate","leftpanel","more","desc","grouped"],"mappings":"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EACA,iBAAkB,CAChB,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,eACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,uBAAwB,CACtB,iBAAkB,CAChB,mBACA,uBACA,aACA,WACA,QACA,aACA,YACA,eACA,cACA,YACA,iBACA,gBACA,OACF,CACF,EACA,aAAc,CACZ,iBAAkB,CAAC,cAAe,YAAa,gBAAgB,CACjE,EACA,YAAa,CACX,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,KAAM,CACJ,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,MAAO,CACL,iBAAkB,CAAC,YAAa,gBAAgB,CAClD,EACA,QAAS,CACP,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,SAAU,CACR,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,eAAgB,CACd,iBAAkB,CAAC,YAAa,iBAAkB,iBAAiB,CACrE,EACA,UAAW,CACT,iBAAkB,CAAC,WAAY,QAAS,aAAc,YAAa,YAAa,gBAAgB,CAClG,EACA,WAAY,CACV,iBAAkB,CAAC,WAAY,QAAS,aAAc,YAAa,YAAa,gBAAgB,CAClG,EACA,iBAAkB,CAChB,iBAAkB,CAAC,WAAY,QAAS,aAAc,YAAa,YAAa,gBAAgB,CAClG,EACA,UAAW,CACT,iBAAkB,MACpB,EACA,UAAW,CACT,iBAAkB,CAAC,aAAc,kBAAmB,SAAS,CAC/D,EACA,eAAgB,CACd,iBAAkB,CAAC,YAAa,iBAAkB,aAAc,kBAAmB,SAAS,CAC9F,EACA,WAAY,CACV,iBAAkB,CAAC,CACrB,EACA,gBAAiB,CACf,iBAAkB,CAAC,aAAc,iBAAiB,CACpD,EACA,UAAW,CACT,iBAAkB,CAChB,iBACA,eACA,YACA,eACA,kBACA,eACA,yBACA,6BACA,iBACA,cACA,mBACA,mBACA,aACA,YACA,aACA,OACF,CACF,EAEA,WAAY,CACV,iBAAkB,CAChB,eACA,YACA,eACA,kBACA,eACA,yBACA,6BACA,iBACA,cACA,mBACA,mBACA,aACA,YACA,aACA,OACF,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M,WACR,EACA,CACE,KAAM,yBACN,KAAM,2BACN,KAAM,wBACR,EACA,CACE,KAAM,6BACN,KAAM,gCACN,KAAM,mBACR,EACA,CACE,KAAM,iBACN,KAAM,kBACN,KAAM,qBACR,EACA,CACE,KAAM,cACN,KAAM,eACN,KAAM,kBACR,EACA,CACE,KAAM,mBACN,KAAM,qBACN,KAAM,eACR,EACA,CACE,KAAM,QACN,MAAO,YACP,KAAM,aACN,KAAM,UACR,EACA,CACE,KAAM,mBACN,MAAO,aACP,KAAM,yBACN,KAAM,oBACR,CACF,EACaC,GAAuC,CAClD,CACE,KAAM,iBACN,KAAM,kBACN,KAAM,mBACR,EACA,GAAGD,EACL,EAoEgB,SAAAE,GAAarpB,EAAahC,EAAmB,CAC3D,OAAQgC,EAAK,CACX,IAAK,iBACI,MAAA,QACT,IAAK,sBACI,MAAA,QACT,IAAK,qBACI,MAAA,eACT,IAAK,0BACI,MAAA,eAET,IAAK,QACI,MAAA,QACT,IAAK,WACI,MAAA,WACT,IAAK,eACI,MAAA,kBAET,IAAK,gBACI,MAAA,mBACT,IAAK,cACI,MAAA,cACT,IAAK,WACI,MAAA,YACT,IAAK,QACI,MAAA,OAET,IAAK,OACI,MAAA,OACT,IAAK,cACI,MAAA,eACT,IAAK,UACI,MAAA,UACT,IAAK,OACI,MAAA,OACT,IAAK,WACI,MAAA,cACT,IAAK,YACI,MAAA,aACT,IAAK,cACI,MAAA,UACT,IAAK,WACI,MAAA,cACT,IAAK,gBACI,MAAA,oBACT,IAAK,iBACI,MAAA,iBACT,IAAK,qBACI,MAAA,sBAET,IAAK,aACI,MAAA,aACT,IAAK,YACI,MAAA,YACT,IAAK,WACI,MAAA,WACT,IAAK,gBACI,MAAA,iBACT,IAAK,SACI,MAAA,SACT,IAAK,iBACI,MAAA,kBACT,IAAK,YACI,MAAA,YACT,IAAK,aACI,MAAA,cACT,QACU,eAAA,KAAK,2BAA4BA,CAAG,EACrCA,CACX,CACF,CACgB,SAAAspB,GAAYtpB,EAAahC,EAA0B,CACjE,OAAQgC,EAAK,CACX,IAAK,mBACI,MAAA,iBACT,IA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","x_google_ignoreList":[5,6,7,8,9,10,11,12,13,14,15,16,17,26]}