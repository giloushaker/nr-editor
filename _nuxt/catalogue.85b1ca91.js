import{e as $,f as At,a as _,o,b as u,h,i,j as pe,w as b,v as I,F as v,r as Q,k as q,l as x,m as p,p as de,s as Se,t as C,q as m,x as V,y as he,c as A,z as je,T as Ze,A as N,B,C as U,D as P,E as bt,G as vt,H as M,I as kt,J as xt,K as T,L as j,n as J,g as se,M as wt,N as Re,O as Me,P as Ye,Q as qe,R as re,S as It,U as Et}from"./entry.7aa9d8c6.js";import{_ as Tt}from"./Loading.b48040b7.js";import{g as Z,a as Y,u as G,b as Ft,c as Ge,d as Ne,e as St,f as Rt,h as Nt,i as Vt,j as Bt,s as Ut,k as Pt,_ as Ot,l as Xe,m as oe,n as Lt,o as De,P as Qt,p as qt,q as Gt,r as Dt,t as Kt}from"./editorStore.1cf0ada3.js";import{_ as fe,a as S,b as jt,c as Zt}from"./warning_sign.c65dd7b4.js";import{N as Mt}from"./NodePath.ffd81b0c.js";const Yt=e=>Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0)),Xt=(e,t)=>(n,s)=>(At(()=>e({...Yt(n),...s.attrs},s)),()=>{var r,a;return t?(a=(r=s.slots).default)==null?void 0:a.call(r):null}),Wt=$({name:"Title",inheritAttrs:!1,setup:Xt((e,{slots:t})=>{var s,r,a;return{title:((a=(r=(s=t.default)==null?void 0:s.call(t))==null?void 0:r[0])==null?void 0:a.children)||null}})}),zt=$({name:"Head",inheritAttrs:!1,setup:(e,t)=>()=>{var n,s;return(s=(n=t.slots).default)==null?void 0:s.call(n)}}),Ht={emits:["change","update:modelValue"],props:{modelValue:{type:[String,Number,Array]},placeholder:{type:String,default:""}},methods:{change(e){e.target&&(this.$emit("update:modelValue",e.target.outerText),this.$emit("change"))},get(){return this.$refs.div},toHtml(e){return e.replace(/\n/g,"<br />")},decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},onpaste(e){var n;e.preventDefault();var t=this.decodeHtml(((n=e.clipboardData)==null?void 0:n.getData("text/plain"))??"");document.execCommand("insertText",!1,t),this.$emit("update:modelValue",this.get().innerText),this.$emit("change")}},mounted(){this.get().innerText=`${this.modelValue??""}`},watch:{modelValue(){this.get().innerText!=this.modelValue&&(this.get().innerText=`${this.modelValue??""}`)}}};const Jt=["placeholder"];function $t(e,t,n,s,r,a){return o(),u("div",{placeholder:n.placeholder,class:"editableDiv",onInput:t[0]||(t[0]=(...d)=>a.change&&a.change(...d)),onPaste:t[1]||(t[1]=(...d)=>a.onpaste&&a.onpaste(...d)),contenteditable:"true",ref:"div"},null,40,Jt)}const Ce=_(Ht,[["render",$t],["__scopeId","data-v-53ecedcd"]]),en={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},computed:{comment:{get(){return(Array.isArray(this.item.comment)?this.item.comment[0]:this.item.comment)||""},set(e){this.item.comment=e||void 0}}},methods:{changed(){this.$emit("catalogueChanged")}}},tn=i("legend",null,"Comment",-1);function nn(e,t,n,s,r,a){const d=Ce;return o(),u("fieldset",null,[tn,h(d,{modelValue:a.comment,"onUpdate:modelValue":t[0]||(t[0]=l=>a.comment=l),onChange:a.changed},null,8,["modelValue","onChange"])])}const O=_(en,[["render",nn]]),an={emits:["catalogueChanged","namechanged","idchanged"],props:{item:{type:Object,required:!0}},methods:{idchanged(){this.$emit("idchanged"),this.$emit("catalogueChanged")},namechanged(){this.$emit("namechanged"),this.$emit("catalogueChanged")},refresh(){this.id=pe(),this.idchanged()}},computed:{id:{get(){return this.item.id},set(e){const t=this.item,n=t.getCatalogue();n.removeFromIndex(t),t.id=e,n.addToIndex(t)}}}},sn=""+new URL("back.33e845c9.png",import.meta.url).href;const on=i("legend",null,"Basics",-1),ln={class:"editorTable"},rn=i("td",null,"Unique ID:",-1),dn={class:"flex gap-2px"},un=i("span",null,[i("img",{class:"h-20px w-20px icon",src:sn,title:"Generate Id"})],-1),cn=[un],gn=i("td",null,"Name:",-1);function mn(e,t,n,s,r,a){return o(),u("fieldset",null,[on,i("table",ln,[i("tr",null,[rn,i("td",dn,[b(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>a.id=d),onChange:t[1]||(t[1]=(...d)=>a.idchanged&&a.idchanged(...d)),class:"flex flex-shrink"},null,544),[[I,a.id]]),i("button",{class:"btn !w-34px flex items-center mr-8px",onClick:t[2]||(t[2]=(...d)=>a.refresh&&a.refresh(...d))},cn)])]),i("tr",null,[gn,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=d=>n.item.name=d),onChange:t[4]||(t[4]=(...d)=>a.namechanged&&a.namechanged(...d))},null,544),[[I,n.item.name]])])])])])}const D=_(an,[["render",mn]]),hn={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},pn=i("legend",null,"Publication",-1),fn={class:"editorTable"},Cn=i("td",null,"Short Name",-1),yn=i("td",null,"Publication:",-1),_n=i("td",null,"Publication Date:",-1),An=i("td",null,"Publication URL:",-1);function bn(e,t,n,s,r,a){return o(),u("fieldset",null,[pn,i("table",fn,[i("tr",null,[Cn,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>n.item.shortName=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d))},null,544),[[I,n.item.shortName]])])]),i("tr",null,[yn,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=d=>n.item.publisher=d),onChange:t[3]||(t[3]=(...d)=>a.changed&&a.changed(...d))},null,544),[[I,n.item.publisher]])])]),i("tr",null,[_n,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=d=>n.item.publicationDate=d),onChange:t[5]||(t[5]=(...d)=>a.changed&&a.changed(...d))},null,544),[[I,n.item.publicationDate]])])]),i("tr",null,[An,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=d=>n.item.publisherUrl=d),onChange:t[7]||(t[7]=(...d)=>a.changed&&a.changed(...d))},null,544),[[I,n.item.publisherUrl]])])])])])}const vn=_(hn,[["render",bn]]),kn={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function xn(e,t,n,s,r,a){const d=O,l=D,g=vn;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{class:"section",item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])],64)}const wn=_(kn,[["render",xn]]),In={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},En=i("label",{for:"hidden"},"Hidden",-1);function Tn(e,t,n,s,r,a){return o(),u("fieldset",null,[i("legend",null,[Q(e.$slots,"default")]),b(i("input",{id:"hidden",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=d=>n.item.hidden=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d))},null,544),[[q,n.item.hidden]]),En])}const te=_(In,[["render",Tn]]),Fn={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Sn={class:"section"},Rn=i("legend",null,"Limit",-1),Nn={class:"editorTable"},Vn=i("td",null,"Default Cost Limit: ",-1),Bn=i("span",{class:"gray ml-10px"},"-1 = No limit",-1);function Un(e,t,n,s,r,a){const d=O,l=D,g=te;return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Cost Types ")]),_:1},8,["item","onCatalogueChanged"]),i("div",Sn,[i("fieldset",null,[Rn,i("table",Nn,[i("tr",null,[Vn,i("td",null,[b(i("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=c=>n.item.defaultCostLimit=c),onChange:t[1]||(t[1]=(...c)=>a.changed&&a.changed(...c))},null,544),[[I,n.item.defaultCostLimit]]),Bn])])])])])])}const Pn=_(Fn,[["render",Un]]);function On(e){return Math.round(e*100)/100}function Ln(e){let t="";e=Se(e,n=>n.name);for(const n of e)if(n.value!=0){let s="";n.name.length!=0&&(s=" "+n.name),t=`${t}<span class='cost'>${On(n.value)}${s}</span>`}return t.length==0?t:`<span class="costList">${t}</span>`}const Qn=$({props:{item:{type:Object,required:!0},noSortIndex:Boolean,imported:Boolean},setup(){return{settings:de()}},methods:{getNameExtra:Z,getName:Y},computed:{costs(){var s;const e=[],t=this.item.getCatalogue(),n=this.item.getCosts();for(const r of n){const a=((s=t.findOptionById(r.typeId))==null?void 0:s.name)||r.name||r.typeId;a&&e.push({name:a,value:r.value,typeId:r.typeId})}return Ln(e)}}}),qn={class:"typeIcon-wrapper"},Gn=["src"],Dn={key:0,class:"gray"},Kn={key:1,class:"gray"},jn=["innerHTML"];function Zn(e,t,n,s,r,a){const d=fe;return o(),u("span",null,[i("span",qn,[i("img",{class:"typeIcon",src:`assets/bsicons/${e.item.editorTypeName}.png`},null,8,Gn)]),h(d,{errors:e.item.errors},null,8,["errors"]),e.item.sortIndex&&!e.noSortIndex?(o(),u("span",Dn," ["+C(e.item.sortIndex)+"] ",1)):m("",!0),i("span",{class:V({imported:e.imported,filtered:e.item.highlight})},C(e.getName(e.item)),3),e.getNameExtra(e.item)?(o(),u("span",Kn,"  "+C(e.getNameExtra(e.item)),1)):m("",!0),e.costs?(o(),u("span",{key:2,class:"ml-10px",innerHTML:e.costs},null,8,jn)):m("",!0)])}const We=_(Qn,[["render",Zn],["__scopeId","data-v-44970d2f"]]),Mn={},Yn={style:{width:"100%",height:"0px","text-align":"left",margin:"0",padding:"0"}};function Xn(e,t){return o(),u("hr",Yn)}const ze=_(Mn,[["render",Xn],["__scopeId","data-v-43dd2251"]]),Wn={name:"ContextMenu",data(){return{left:100,top:100,bottom:100,right:100,width:200,height:200,visible:!1,isDown:!1,isRight:!1,payload:void 0}},props:{modelValue:{type:Boolean,default:!0}},methods:{do_update(e){var n,s;if(this.width=((n=this.el)==null?void 0:n.clientWidth)||this.width,this.height=((s=this.el)==null?void 0:s.clientHeight)||this.height,this.top=e.clientY,this.left=e.clientX,this.avoid){const r=this.avoid,a=r.offsetLeft;this.left=a+r.offsetWidth;var t=e.target.getBoundingClientRect();this.top=t.top-1}this.left=Math.min(this.left,window.innerWidth-this.width)+2,this.top=Math.min(this.top,window.innerHeight-7-this.height),this.bottom=window.innerHeight-this.top,this.right=window.innerWidth-this.left},update(e){e.preventDefault(),this.do_update(e),this.$nextTick(()=>{this.do_update(e)})},show(e,t){this.payload=t,this.visible=!0,this.update(e),this.$emit("update:modelValue",!0)},close(){this.visible=!1,this.$emit("update:modelValue",!1)}},mounted(){addEventListener("click",this.close,{capture:!0}),addEventListener("contextmenu",this.close,{capture:!0}),addEventListener("scroll",this.close,{capture:!0})},unmounted(){addEventListener("click",this.close,{capture:!0}),removeEventListener("contextmenu",this.close,{capture:!0}),removeEventListener("scroll",this.close,{capture:!0})},computed:{el(){return this.$refs["context-menu"]},style(){const e={};return e.top=`${this.top}px`,e.left=`${this.left}px`,e},avoid(){var e;return(e=this.$el.parentElement)==null?void 0:e.closest(".context-menu")}}};function zn(e,t,n,s,r,a){return b((o(),A(Ze,{to:"#dialogs"},[b(i("li",{ref:"context-menu",class:"context-menu",style:je(a.style)},[Q(e.$slots,"default",{payload:r.payload})],4),[[he,r.visible]])],512)),[[he,r.visible]])}const ye=_(Wn,[["render",zn]]),Hn={name:"EditorCollapsibleBox",props:{payload:{},collapsible:{type:Boolean,default:!0},nobox:{type:Boolean,default:!1},defcollapsed:{type:Boolean,default:!0},notitle:{type:Boolean,default:!1},title:{type:String,required:!1,default:"titreCategory"},titleCollapse:{type:Boolean,default:!0},group:{type:Array,required:!0},modelValue:{default:!0},altclickable:{default:!1},vshow:{default:!1,type:Boolean}},data(){return{collapsed:!0,initiated:this.vshow,selected:!1,alt:!1}},created(){this.defcollapsed==!1&&this.collapseSwitch()},setup(){return{store:G()}},mounted(){var e;addEventListener("keydown",this.handleKeyDown),addEventListener("keyup",this.handleKeyUp),this.$el.vnode=this,(e=this.group)==null||e.push(this),this.init(this.payload)},updated(){this.$el.vnode=this},unmounted(){var e;if(removeEventListener("keydown",this.handleKeyDown),removeEventListener("keyup",this.handleKeyUp),this.group&&Array.isArray(this.group)){const t=this.group.indexOf(this);t!==-1&&((e=this.group)==null||e.splice(t,1))}},watch:{payload(e){this.init(e)},collapsed(e){e!==this.modelValue&&this.$emit("update:modelValue",e)},modelValue(e){e!=this.collapsed&&(this.collapsed=e)}},computed:{dropdownSrc(){let e=2,t=[`assets/icons/right${e}.png`,`assets/icons/down${e}.png`],n=this.collapsed?0:1;return t[n]},hide(){return!this.collapsible},nocollapse(){return!this.collapsible},box(){return!this.nobox},opened(){return this.collapsible&&!this.collapsed}},methods:{cut(){console.log("cut")},copy(){console.log("copy")},paste(){console.log("paste")},init(e){var t;if((e==null?void 0:e.select)!==void 0){if(e.select){const n=(t=this.$parent)==null?void 0:t.$parent;n.open&&n.open(),this.store.do_select(null,this,this.group),this.store.scrollto(Ft(this))}e==null||delete e.select}},select(){this.selected=!0,this.store.select(this,()=>this.unselect(),this.payload)},unselect(){this.selected=!1},open(){this.initiated=!0,this.collapsed&&(this.collapsed=!1,this.$emit("open"))},async open_recursive(){var t;this.open(),await this.$nextTick();const e=this.$el;if(e)for(const n of e.getElementsByClassName("collapsible-box"))await((t=Ge(n))==null?void 0:t.open_recursive())},close(){this.initiated=!0,this.collapsed||(this.collapsed=!0,this.$emit("close"))},async close_recursive(){var t;const e=this.$el;if(e)for(const n of e.getElementsByClassName("collapsible-box"))(t=Ge(n))==null||t.close_recursive();await this.$nextTick(),this.close()},do_select(e){this.store.do_select(e,this,this.group),this.$el.focus()},do_rightcllick_select(e){this.store.do_rightclick_select(e,this,this.group)},async collapseSwitch(e){this.collapsed=!this.collapsed,this.initiated=!0,this.collapsed==!1?e?await this.open_recursive():this.open():e?await this.close_recursive():this.close()},handleKeyDown(e){e.key==="Alt"&&(this.alt=!0,e.preventDefault())},handleKeyUp(e){e.key==="Alt"&&(this.alt=!1,e.preventDefault())}}},Jn=["src"],$n={key:1,class:"content"};function ea(e,t,n,s,r,a){return o(),u("div",{class:V([{box:a.box,nobox:n.nobox,nocollapse:a.nocollapse,collapsed:r.collapsed,opened:a.opened},"collapsible-box"]),onContextmenu:t[8]||(t[8]=(...d)=>a.do_rightcllick_select&&a.do_rightcllick_select(...d))},[n.notitle?m("",!0):(o(),u("h3",{key:0,class:V(["title hover-darken",{selected:r.selected,arrowTitle:n.collapsible,normalTitle:!n.collapsible,collapsed:n.collapsible&&r.collapsed,alt:r.alt&&n.altclickable}]),onClick:[t[1]||(t[1]=N((...d)=>a.do_select&&a.do_select(...d),["stop"])),t[2]||(t[2]=N(d=>e.$emit("ctrlclick"),["ctrl","stop"])),t[3]||(t[3]=N(d=>e.$emit("altclick"),["alt","stop"]))],onDblclick:t[4]||(t[4]=d=>a.collapseSwitch(d.shiftKey)),onPaste:t[5]||(t[5]=(...d)=>a.paste&&a.paste(...d)),onCopy:t[6]||(t[6]=(...d)=>a.paste&&a.paste(...d)),onCut:t[7]||(t[7]=(...d)=>a.paste&&a.paste(...d))},[i("div",{class:"arrow-wrap",onClick:t[0]||(t[0]=N(d=>a.collapseSwitch(d.shiftKey),["stop"]))},[i("img",{class:V([{hide:a.hide},"arrow icon"]),src:a.dropdownSrc},null,10,Jn)]),Q(e.$slots,"title",{},void 0,!0)],34)),r.initiated?b((o(),u("div",$n,[Q(e.$slots,"content",{},void 0,!0)],512)),[[he,!r.collapsed||!n.collapsible]]):m("",!0)],34)}const He=_(Hn,[["render",ea],["__scopeId","data-v-af097471"]]),ta={name:"CatalogueEntry",components:{ContextMenu:ye,EditorCollapsibleBox:He},setup(){return{store:G(),state:Ne(),settings:de()}},props:{depth:{type:Number,default:0},label:{type:String,required:!0},catalogue:{type:Object,required:!0},path:{type:Array},item:{type:Object}},data(){return{groups:{},contextmenuopen:!1,open:!1,open_categories:void 0,name:""}},mounted(){if(this.catalogue){this.catalogue.processForEditor();const e=[...this.path||[],{key:`label-${this.label}`,index:0}];this.open=this.state.get(this.catalogue.id,e)}},methods:{menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var s;(s=this.$refs[e])==null||s.show(t,n)})},close:(t,n)=>{var s;(s=this.$refs[e])==null||s.close(t,n),this.contextmenuopen=!1}}}},computed:{contextmenu(){return this.menu("contextmenu")},nestedcontextmenu(){return this.menu("nestedcontextmenu")}}},na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhT8TRRFFJClELLZQGw2IilhqFESIEKKCV+HuxsRAdg27ERtLwVaw8Gi8ChtrbS1sBUHwALG1sVK0kbD+sxEShAgODPPxZt5j5g0EDrOm5Vb3gGXnncRYVJuZndNqX6ihnma6COmmmxuOx2NUHJ93VKn1NqKy+N9oTC65JlRpwkNmzskLLwoPrOVzineFw+aynhQ+E+525ILCD0o3ivyqOO1zQGWGnanEiHBYWEuXsVHG5rJjCfcLtyctW/IDM0VOKl5XbGVXzZ97qhc2LNnTk0qX2cYY40wQR8NglQxZ8kRktUVxSch+tIK/1ffHxWWIK4MpjlFWsNB9P+oPfnfrpvp6i0kNUah59rz3DqjdhsKW530deV7hGIJPcGmX/CuHMPgh+lZJaz+Apg04vyppxg5cbELLY053dF8KygykUvB2Kt80C6EbqJ8v9vazz8k9TElXsWvY24fOtGQvVHh3XXlvf57x+yP6DVyYcp4hKAl2AAAA5FBMVEVVWVszNTY1NzdKSktaWlpJTE5HSEhTU1NVVVVUVFRSUlIpKitRUVFNTU1PT08kJSY9PT1HR0fu7u7ExMRGRkZNUFI8PD1JSUlzc3N0dHSurq7q6uptbW02OTpMTEygoKDS0tJcXFw0NDV5eXnf399wcHAzMzQcHh5WVlbc3Ny3t7caGxxHS0wdHh/n5+fFxcUjJCUsLS1KSkrDw8OxsbE7OztBQUFQUFBDQ0M8PDzH0NMKCgpeXl5dXV1ZWVlCQkKnrrJSVlcBAQEICAkSExMcHR0bHBwREhLL1Nizu7+vt7oAAABxoPDUAAAATHRSTlP///////////////////////////////////////////////////////////////////////////////////////////////////8Ano3kzAAAAAlwSFlzAAAuIgAALiIBquLdkgAAALlJREFUKFNNyGkXgUAAheGhiJqpRLLvlCXGUJItspT+//9xmuS4H+55zwMiOpDJpEU/y7Ask6VJIZfnCkU+n/uBAJEoIiikIMklRVHKFVn6glrVavVGs1VVvxC1OxB2e/123BSiARyOxhOaCejGdFbQaSYwNzrImNOMYWFyaLlCvLlIAK8JQZst0sgax4AtyyY7xxE1e2/hCLgH2yEcezydeeJcDi7wrjf//pAEAT9f/u3qgSB8/y0MPiLnM6aRQB6+AAAAAElFTkSuQmCC",Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8ziBhJZiFZ3AVKUUKyZCgpahqjxmPh3jtmqLl3pntHNpbKVll4bLwWNtZsLWyVUh4lWxsrYiNd/3NHzaRGOXU6v75zvq9zvgPBg4xpuZU9YNl5JzYW0RIzs1r1M1XU0Ugtnbrp5oaj0QnKjo9bAmq96VZZ/G/UJxddEwKa8JCZc/LCC8IDq/mc4h3hsLmkJ4VPhbscuaDwvdKNAr8oTvscVJlhJx4bEQ4La+kSNkrYXHIs4X7htqRlS34wUeCk4jXFVmbF/LmnemFo0Z6eUrrMVsYYZ5IoGgYrLJMhT7estiguMdmPlPG3+P6ouAxxLWOKY5QsFrrvR/3B727dVF9vISkUgaonz3trh+ot+Nr0vM9Dz/s6gopHuLCL/uwBDL6LvlnU2vahYR3OLouasQ3nG9D8kNMd3ZcqZAZTKXg9kW+agaZrqJ0r9Pazz/EdxKWriSvY3YOOtGTPl3l3TWlvf57x+yPyDUN6cpTX8RfMAAAAmVBMVEVAQUE9PT1YWFg9Pj5VVVVUVFQrKytZWVkpKSpERERRUVFQUFBDQ0NYWVo+Pz9TU1NSUlI4OTlXV1cgISFdXV04ODk4ODhRUlMhIiInJycuLi5KSkpJSUkoKCk7OztBQUE8PDzj5ugLCwtaWlpeXl5CQkK/wcNdX18BAQEJCQkUFRUfICAuLy8fHx8TFBTn6uzNz9HIyswAAABWGAQaAAAAM3RSTlP//////////////////////////////////////////////////////////////////wBxnr2OAAAACXBIWXMAAC4hAAAuIQEHW/z/AAAAmUlEQVQoU03MyRKCMBBF0RDSBBUICMgQAUFlUBTM/3+clbRF+TZ96yyaKBzZAo9FqYWFYDMGYJtEcDgD6pg04O72DA6eu4GP4G+gAsEgDEwiqOgIEdYP4gRiLITU4nBKTWrIcqGfhnmGUJRSajjLstBQ1XWD0FzqSpG2azwprreEh9K7dy3ph3F6PN15rl7vaRx6sqyfv63LF52MIsEsSTP4AAAAAElFTkSuQmCC",$e=e=>(U("data-v-b0486e6d"),e=e(),P(),e),aa=$e(()=>i("img",{src:na},null,-1)),ia={class:"gray"},sa=$e(()=>i("img",{class:"pr-4px",src:Je},null,-1)),oa={class:"gray"},la={key:1};function ra(e,t,n,s,r,a){const d=B("EditorCollapsibleBox"),l=ze,g=B("ContextMenu");return o(),u("div",{class:"item unselectable",onContextmenu:t[3]||(t[3]=N((...c)=>a.contextmenu.show&&a.contextmenu.show(...c),["stop"]))},[h(d,{nobox:"",group:[],collapsible:!0,class:V([`depth-${n.depth}`,`label-${n.label}`]),vshow:""},{title:x(()=>[aa,i("span",ia,C(n.label),1)]),content:x(()=>[Q(e.$slots,"default",{},void 0,!0)]),_:3},8,["class"]),r.contextmenuopen?(o(),A(g,{key:0,modelValue:r.contextmenuopen,"onUpdate:modelValue":t[2]||(t[2]=c=>r.contextmenuopen=c),ref:"contextmenu"},{default:x(({payload:c})=>{var f;return[n.item?(o(),u(v,{key:0},[n.item?(o(),u("div",{key:0,onClick:t[0]||(t[0]=k=>s.store.goto(n.item))}," Goto ("+C(n.item.getName()),1)):m("",!0),h(l),i("div",{onClick:t[1]||(t[1]=k=>{var y,E;return s.store.create_child("sharedProfiles",n.catalogue,{typeName:(y=n.item)==null?void 0:y.getName(),typeId:(E=n.item)==null?void 0:E.getId()})})},[sa,p(" Profile "),i("span",oa," ("+C((f=n.item)==null?void 0:f.getName())+")",1)])],64)):(o(),u("div",la," Nothing "))]}),_:1},8,["modelValue"])):m("",!0)],32)}const da=_(ta,[["render",ra],["__scopeId","data-v-b0486e6d"]]);function ua(e){return Math.round(e*100)/100}function ca(e){let t="";e=Se(e,n=>n.name);for(const n of e)if(n.value!=0){let s="";n.name.length!=0&&(s=" "+n.name),t=`${t}<span class='cost'>${ua(n.value)}${s}</span>`}return t.length==0?t:`<span class="costList">${t}</span>`}const Ke={link:1,selectionEntry:1,entryLink:1,selectionEntryGroup:2,entryGroupLink:2,constraint:3,forceEntry:4,profile:5,rule:6,infoGroup:7,infoLink:8,modifier:9,modifierGroup:10,categoryLink:11,association:12},ga=new Set(["force"]),ma=new Set(["modifierGroups","conditionGroups"]),ha=new Set(["characteristicTypes","characteristics","costs"]),pa={name:"CatalogueEntry",components:{ContextMenu:ye,EditorCollapsibleBox:He,CatalogueLabel:da},setup(){return{store:G(),state:Ne(),settings:de()}},props:{item:{type:Object,required:!0},group:{type:Array},forceShowRecursive:{type:Boolean,default:!1},showImported:{type:Boolean},imported:{type:Boolean},depth:{type:Number,default:0},noType:{type:Boolean,default:!1}},data(){return{groups:{},contextmenuopen:!1,open:!1,open_categories:void 0,name:""}},mounted(){if(this.catalogue&&(this.catalogue.processForEditor(),!this.imported&&(this.open=ma.has(this.item.parentKey)||this.state.get(this.catalogue.id,St(this.item)),this.item.isCatalogue()))){const e=new Set;for(const t of this.categories)this.state.get_root(this.catalogue.id,t.type)&&e.add(t.type);this.open_categories=e}},watch:{"scope.name"(e){this.name=Y(this.item)},_name:{immediate:!0,handler(e){this.name=e}}},methods:{escapeXml:bt,getTypeName:Rt,getTypeLabel:Nt,getName:Y,getNameExtra:Z,key(e){return e.id?e.id:(e.$id||(e.$id=`temp-${pe()}`),e.$id)},should_be_grouped(e){return e==="sharedProfiles"},should_be_open(e){var t;return(t=this.open_categories)==null?void 0:t.has(e)},sortable(e){return this.settings.sort==="none"?!1:e?ga.has(e.editorTypeName)===!1:!0},get_group(e){return e in this.groups||(this.groups[e]=[]),this.groups[e]},ref_count(e){var t;switch(e.editorTypeName){case"category":default:return(t=e.links)==null?void 0:t.length}},async onctrlclick(){this.store.can_follow(this.item)?await this.store.follow(this.item):this.imported?await this.store.goto(this.item):(this.item.links||this.item.other_links)&&(this.store.mode="references")},debug(){console.log(this.item.name,this.item.editorTypeName,vt(this.item)),globalThis.$debugOption=this.item,globalThis.$debugElement=this},hasRootLink(e,t){var n;return(n=e.entryLinks)==null?void 0:n.find(s=>s.targetId===t.id)},getTypedArray(e,t,n){if(!t)return;const s=t,r=e[s];if(r&&Array.isArray(r))for(const a of r)this.filter_child(a)&&n.push({item:a,type:t});if(this.showImported){const d=["selectionEntries","selectionEntryLinks","rules"].includes(t)?e.importsWithEntries:e.imports;for(const l of d){const g=l[s],c=l.isGameSystem();if(g&&Array.isArray(g))for(const f of g)this.filter_child(f)&&(!c&&f.import===!1||n.push({item:f,type:t,imported:!0}))}}},allowed(e){if(Array.isArray(e)){for(const t of e)if(this.allowedChildren.has(t))return!0;return!1}return this.allowedChildren.has(e)},filter_child(e){return!(!this.forceShow&&this.store.filter&&e.showInEditor!==!0)},sorted(e){if(!this.sortable(this.item))return e;switch(this.settings.sort){default:case"asc":return M(e,r=>r.item.getName()||"");case"desc":return Se(e,r=>r.item.getName()||"");case"type":return M(e,r=>(r.item.isProfile()?r.item.getTypeName():r.item.getType())||"")}},grouped(e){return M(this.sorted(e),t=>{var n,s;return Ke[((s=(n=t.item)==null?void 0:n.target)==null?void 0:s.editorTypeName)??t.item.editorTypeName]??1e3})},groupBy:kt,menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var s;(s=this.$refs[e])==null||s.show(t,n)})},close:(t,n)=>{var s;(s=this.$refs[e])==null||s.close(t,n),this.contextmenuopen=!1}}},get_field(e){return this.item[e]},get_target_field(e){if(this.item.target)return this.item.target[e]},hideType(e){if(e==="categoryLinks"&&!this.item.isForce()||ha.has(e))return!0}},computed:{order(){return Ke},_name(){return Y(this.item)},scope(){const e=this.item;if(e.scope){const t=Vt(e,e.scope);if(t)return xt(t)}},costs(){var s;const e=[],t=this.item.getCatalogue(),n=this.item.getCosts();for(const r of n){const a=((s=t.findOptionById(r.typeId))==null?void 0:s.name)||r.name||r.typeId;a&&e.push({name:a,value:r.value,typeId:r.typeId})}return ca(e)},childId(){return this.item.childId},child(){if(this.childId)return this.item.getCatalogue().findOptionById(this.childId)},link(){return this.item},iscollapsible(){return this.mixedChildren.length>0},contextmenu(){return this.menu("contextmenu")},nestedcontextmenu(){return this.menu("nestedcontextmenu")},catalogue(){return this.item.getCatalogue()},catalogues(){return this.catalogue.imports},allowedChildren(){return Bt(this.item,this.item.parentKey)},forceShow(){return this.item.showChildsInEditor||this.forceShowRecursive},mixedChildren(){const e=[];for(const t of this.allowedChildren){if(this.hideType(t))continue;const n=this.get_field(t);if(n!=null&&n.length)for(const s of n)this.filter_child(s)&&e.push({type:t,item:s})}if(this.item.isLink()&&this.item.target){const t=[];for(const n of this.allowedChildren){if(this.hideType(n))continue;const s=this.get_target_field(n);if(s!=null&&s.length)for(const r of s)this.filter_child(r)&&t.push({type:n,item:r,imported:!0})}return[...this.grouped(t),...this.grouped(e)]}return this.grouped(e)},categories(){return this.item.isCatalogue()?this.item.isGameSystem()?Ut:Pt:[]},groupedCategories(){return this.categories.map(e=>{const t=[];return e.type&&this.getTypedArray(this.item,e.type,t),e.links&&this.getTypedArray(this.item,e.links,t),{...e,items:this.grouped(t)}})}}},fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TiyIVBzOICGaoThbEijhqFYpQIdQKrTqYXD+hSUOS4uIouBYc/FisOrg46+rgKgiCHyCuLk6KLlLi/5JCixgPjvvx7t7j7h0gNCpMs7omAE23zVQiLmWyq1L3K0IYgYgYJIVZxpwsJ+E7vu4R4OtdlGf5n/tz9OXyFgMCEvEsM0ybeIN4etM2OO8Ti6yk5IjPicdNuiDxI9dVj984F10WeKZoplPzxCKxVOxgtYNZydSIp4gjOU2nfCHjcY7zFmetUmOte/IXhvP6yjLXaQ4jgUUsQYYEFTWUUYGNKK06KRZStB/38Q+5fplcKrnKYORYQBUaFNcP/ge/u7UKsUkvKRwHQi+O8zEKdO8CzbrjfB87TvMECD4DV3rbX20AM5+k19ta5Ajo3wYurtuaugdc7gCDT4ZiKq4UpCkUCsD7GX1TFhi4BXrXvN5a+zh9ANLUVfIGODgExoqUve7z7p7O3v490+rvB80rcsuoyXg3AAAABmJLR0QA6AAAAADh5zdhAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5wUfFDQeXQWMGwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAG9SURBVCjPhdO/a1NRFMDx7733PfOiFcGhErUoBm1DwFH8DwQnR90KLiI4aAbd/DNsQVCHLh0EqyA4uPofBDMphaRU0FgiLcm75xyH9xrNj9IzHt6Xz708rqOch62nttvrMrh2j+PmwpmEV09uueRwsdvrcvf+Kpc3NljY3iZ4jy0vo60Wp6pVTlYqZFlGlqY8X3sJwDje6XXZXF/n9qWbrNbrALz+XeXLp58z8vcfS5OxqdFsNjmx72A4BCB1VWq12kSYpinfujtTsSmqihfBYix2oyHtdnsibjQamNpkrFrEQeM4rjhYWVkZh51Op/jOdDYWEZKYY5YD4OOIwWAwjr33iAgmc+QYI0Fy1Ao5iZFYnuJwYoyoynw5xBxzhRw0R0TGoXOukHX62CLEGEmiw1wpaz5flqNkdYTElXKckAFEBJ2WpZSDOh5n13HOcWf4da5sEmdjEWHt7A1k8SIhBF74KpX/ZDMr5HLn/8URVWXhapMkSQghkC7Vx/9fVTGz4np5eefNj5/t4GCfZ48eoKok3pNl2ZEvynvP8M+AN28/WDIaDdnr9zlXO8+7rfcs/rpy7JOsnY7s9fv8Bc0zE6+cxDjNAAAAAElFTkSuQmCC",Ca="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bi1IqIu0g4pChumhBVMRRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsH+BsVpppd44CqWUY6mRCyuVWh+xVBhNCPUUQkZupzopiC5/i6h4+vd3Ge5X3uz9Gr5E0G+ATiWaYbFvEG8fSmpXPeJ46ykqQQnxOPGXRB4keuyy6/cS467OeZUSOTnieOEgvFDpY7mJUMlXiKOKaoGuX7sy4rnLc4q5Uaa92TvzCc11aWuU5zCEksYgkiBMiooYwKLMRp1Ugxkab9hId/0PGL5JLJVQYjxwKqUCE5fvA/+N2tWZiccJPCCSD4Ytsfw0D3LtCs2/b3sW03T4DAM3Cltf3VBjDzSXq9rcWOgL5t4OK6rcl7wOUOMPCkS4bkSAGa/kIBeD+jb8oBkVsgtOb21trH6QOQoa5SN8DBITBSpOx1j3f3dPb275lWfz9cmHKeGGO3IgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFChE0NOeyIIsAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAB2klEQVQoz43SP2gUURDH8e+83WVFOa5USKF1QMiZaGfAExH/9dYKIlZ2gkGtDATstBEEqzT2kkJDRNBCJVxOzUEakzvRkCLNbS532Z0Zi1tP04gDw6vefH4MIy8W33jW3+VfdezwEepTNQGIu70drl44z54quSq5GeqOuwPQaDT49vMHix+X/ezJExLcHTND8xzNc/b6fXZ3dsiyjG63S5ZlXLt8cfQpNjMECCIkUfQnR1FQmLG9vc2T+XkAltbXic2cIMK5l8d5dekzH1ZWqFarHB0bg6KgXq/j7lQqFRZeLxGrGyLC0pWvmDunJycxd3LVfRKAuhF7Galx9w4Ts3N8arVI05Rer0eappgZaZpSqVRwM2JTJYgwNfcIM+PU+DjmPupclX6eE4lgqoRCh8Lt5wkhBN43m7TabVobG3zf3CSJIg4kCUkUUWgpiAiPryvuwnSthpntU5IoIgphKJgpAtyfmUFEeNdsstrpsLy2NpKCyDCSKbGWwsPZWRyYnpjAf0//SxJAVQmqQ+HWs4AAbxsNvrTbrHY6dLa2CCKjVlXiwWAAwNMb4C6cqdVwwMp7MncoVz8YDIizLBtdg5ST3B0p3wBYCEgIZFlGnDjcvPeA/6nqwUP8AtTWMEb6wHGvAAAAAElFTkSuQmCC",ya="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bS0UqIlYQ6ZChOlkQFXHUKhShQqgVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4B/kaFqWbXOKBqlpFOJoRsblUIvSKIMPoRxaDETH1OFFPwHF/38PH1Ls6zvM/9OXqVvMkAn0A8y3TDIt4gnt60dM77xBFWkhTic+Ixgy5I/Mh12eU3zkWH/TwzYmTS88QRYqHYwXIHs5KhEk8RxxRVo3x/1mWF8xZntVJjrXvyF4bz2soy12lGkcQiliBCgIwayqjAQpxWjRQTadpPePiHHb9ILplcZTByLKAKFZLjB/+D392ahckJNymcAIIvtv0xAoR2gWbdtr+Pbbt5AgSegSut7a82gJlP0uttLXYE9G0DF9dtTd4DLneAoSddMiRHCtD0FwrA+xl9Uw4YuAV61tzeWvs4fQAy1FXqBjg4BEaLlL3u8e7uzt7+PdPq7wdBJ3KT7BaVSwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFDBEdBk5IsTwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACx0lEQVQ4y42O309TBxiGn3N6qKZGNLqwhUSIFhDMUFwXb2pxJoyIAv7elmXJdsHlZvA/8G7ZrpbMu91oYtAbo0QzhSYGGtivokB7Ss85LS1VxFFKtRBSjrbn88rGxbjwJe/N9+R58yps8OLpjJhPnvznt22LZ2PyTGpObo2ExBGpRETk1khIXBuR448z9B5pZ2xigsFgkJelEnW1tcQzGdT/k2OzaYnNpek90k65XGapUOCbk6dZKhQAcBzn/QV6MiV6OsXJo59h2zaOCC1eLw8tg30NDZWC98oDw0FZF5H5+XkJDQ7Ks4UFKb56JXapJCURGRgOip5MyTsLoolZmUomOP15BwuZDLGxMYrFIpFQiHK5jOpycWNomNbde/i4YY+ivS1HrKRMWiZnj3fxOJlEHx2tMF9HB+5Nm7j++z3aGptobfQqAJWCaSshE0acL3q6SZsmU8FgRT7U1cVH9fVcu3MXX3Mz+5salDdMBZg0LQnHYpzr6WY2HufR0BCO4+A4Dr7OTnZ5vVy7Pcgne/dyoKlReXu1MmmYEtZ1vjx7hjnDID4yUoH1Ph+pTIbR8T/w1tUR8PuJRiLYtk11dTWHAwFcbYH2S1+dP0c2myUVCuF2u3G73TQHAkzrOtUeD2e6T2AZJuPj43g2b6a35wTlUonpqWl4OBOXywM35IWIRE1THty8KbFEQlZE5Ou+PjGMhFzovyiRqCX5fFEiUUsu9F8Uw0jIjz/9LErueUHST+cZDYfp++5bstksH9bU8NuVqzydmeF45ym2bt3C/ft3yb/IsWP7Bxw71s3q6hp//vUAZTGXl7W1NXTD4JFp0P/D9/zy62Uaa2sprqwS/udvFEXB4/HQdvAg0UiE4vo6iqLg9/tRnmVzsri4SH55mX9zS0xaFp+2tLBz23bslzaqqlKlVaFpGlXuKjSXhqZpuDQNVVV5DQyKeoiSxZAyAAAAAElFTkSuQmCC",_a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgjN9BzCj0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABnElEQVQoz42SsWoiURSGv5m5OIVplsQBky67ICisi6QQ3GreQRBsrHwEn8GHEMTCQiufIFVIsQRcd8Bml7XJFuvsIJoE1Lkzs8XEYSaaxB9ucbn3+8899/wKwM3d92Dh2Pi+j+/7vCVVVVFVlQ+nGb5efVEEgGP/5ar4GSNzxjGa2/+4m/wIDQGklEfDAEbmDCllzMB1o0NN0xBC7C3P8wDodDrEGQFEfSuKEl2Ma7vdkkql6Pf7zOdz4kzCIAgCgISJlBJd1xkMBiwWC8rlcsJADYFw0263GY1GaJrGZrNhvV6j6zrD4ZDlckk+n8c0TeKMiFcsFAqMx2Nc16VarQLQ7XZxHIdSqUSlUoletmNCAz/cmKaJ4zhMp1N6vR6r1QrbthOVI4NnJmzheSTpdJpGo0E2m8WyLGazGblcjlqttvexXnyML9PXbDYxDINisUi9Xj+YhcQUdr8fV6vVejNMO0YFCICJZR2dxIllsSupXN9+C37/+smf+3s8T0YRfU1CCDRNkL045/LjJ5TbsRU8PT5woIt3lT454T+zOsZSlUjWPwAAAABJRU5ErkJggg==",Aa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgiC+YHR/sAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABwUlEQVQoz42TT4vaQBjGfzHBSw6rt+2lhLL04lFY+h1aevPup/CqIH4D2YJ4Fbsbqv1Da6nXYi+ibL3YdruoZHXXSzaVVMgkmR7SFcU27A/eyzDPM8+8844CcDmZyevrBUEQEAYhcSTUBKqqcnj4gEfGQ0UDmM+veHx0RDqd4j7Y9i3fLy4iQwAhxL3FAOl0CiHErsEdqqqiadpeBUEAQL1eZ1ujAYRhdG9FUTYbt/E8j2QySaPRYLlcsq3ZMZBSAmxMbNvGsizCMKTf77NarTAMg8FgwGI+53IyiwTv3n+QQghZLpelaZpSCCEdx5G9Xk/G8bn3RWrbJ2YyGYbDIUIIcrkcQRDQ7XY5OXlBu92iWq2iaRphGJLNZlmv1ygAr9qv5fNnT3FdF9M0mU6nGIaBZVkUi8X/vsbHT92oB77vA6DrOvl8nlqtxmg0wvO82ASbhjdPz6QQYqcqlYoslUqxPWi/eRv14F8UCgU6nU5sgs38NE/P5Pn5170UrVYrNkGj+VIq3378lOPxmOl0gu/7+H9dXdflZnmDc+vsTGoiEX2mg9QBx8dPUGZXC7la/doM0R3r32tc191b30bXdf4AswSDFyrGAhMAAAAASUVORK5CYII=",_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9Tix9UOlhBikOG6mRBVMRRq1CECqFWaNXB5PoJTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdXFSdJES/5cUWsR4cNyPd/ced+8AoVFhqtk1DqiaZaQScTGTXRW7XxHAIHoRQkRmpj4nSUl4jq97+Ph6F+NZ3uf+HP25vMkAn0g8y3TDIt4gnt60dM77xGFWknPE58RjBl2Q+JHristvnIsOCzwzbKRT88RhYrHYwUoHs5KhEk8RR3OqRvlCxuUc5y3OaqXGWvfkLwzmtZVlrtMcRgKLWIIEEQpqKKMCCzFaNVJMpGg/7uGPOH6JXAq5ymDkWEAVKmTHD/4Hv7s1C5MTblIwDgRebPtjBOjeBZp12/4+tu3mCeB/Bq60tr/aAGY+Sa+3tegRENoGLq7bmrIHXO4AQ0+6bMiO5KcpFArA+xl9UxYYuAX61tzeWvs4fQDS1FXyBjg4BEaLlL3u8e6ezt7+PdPq7wcvuHKMRIsU1QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFFQkWEGZMN3sAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABVElEQVQoz93Ry0oCARjF8f/kpC0mZYoupJZWWhSouUopy0fQxxF9kagXKNpEtLZVQajdFl28kVp2mRFGiS4zTLsiqkXLOtvf4nx8B/58BID84bHZaNTRX/V3ELtFnE4XAD9ZOBQQhINcwaxUyng9Y/TJMlarFcMweFAUcvkCAOG50BcrV6p4veMI6xubptvt5PjoiPOLS3TDYGR4CFmWP53aarW4bt4iWixM+X0EgkFqtQZdWltDkiQUVSWVzgAQjUZYXFwgkUiQTCaJx+PEYjEAUukMiqoiSRJaW0NYWV0zPaPj1Os17pU7NE1Df3n+9mGi1YbdbmegfxCXy031qoywtb1j7u/tMTsTwuPx4XDIPD52KJXOODnNA/xo85EIwmW5au5ms1ycn/H0/NHcY7MxMTkJQKlY/GL+qWmWlpcR6jdNs9PuoBv6r/YXLSJSr8Q/yBspXJbfdFchHAAAAABJRU5ErkJggg==",ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgeFvbyUt0AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABKElEQVQoz6XPMUtCcRSG8eeCqR8ktKEaJYMw/QYtFUQQFFREUIM4GEEYRAkN0dQSQQWFIBQ4lSlKBA1SLQ2B9BlsuH/v9ZwGtYQIC9/5HH48VuX1TQGMbbORiLO9m8bn9wOwvrKEiqIoIoKK0B8IshZPYLUfy8UCL89PDA4NMzYepds8ba2YvyW5lSK1mSQ0Esbn97O6uICKoKqIKiqCiHB0ctoUS4U7spnL1hFMTE4Rica6i4X8DdMzs4TCozzcl8ldXxGJxlien/tSRAWVZuvx+cV343/nAZot7YaOlk5FWq2NRoOzTLZH8beWtiIiOI5D3RiMMeTyxR7Ej1qN/b0d3qvVH4rruhjbxhhDvV7HdR0CwQHSB4dYpceKGmMj8jfYsqDP6+UTS3LlTs6Kx84AAAAASUVORK5CYII=",va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAABuElEQVQ4T32Tu04CQRSGf9gLEKQgYmQN2qACNhpNCBSAPoKXRHoqtcWeh6A0EtGChMZoY7QwitGEgpcwoBJvhSD3cWcYUbKjXzKZ//xz2TNnZ/AfyysrhDYeCjHz3kAkEiHu8XHQRjW3DZh4P0QkGmWLKYT01z5VqyhcXxvmCzN4fXmBLMs8AtPUE2HYIBCYI5qmodFocAdMu91uNsatAYYN5hcWuDIiGhPWIBqLkTGXCxaLBTabjXm1Wh1b2ztMfzM5NcWVgFA4TBKJhF7Dv7m5vSMSn29AVpTUzPQ0rFYrksldxOObSKfTKJVKKBaL6PV6qNU/xUcIhcJEUWR4vV5kMhnuGjk7v8BQBqtr66TZbKZ8s7Ps7JIkweFw/JNB/ScDn89HaNE8Hg+LqVZVFblcjsUijk9O+xn4/QHico2yRXptoCgKuzxUO53OPzN4e3+H6b7ySPwzXgSDQZjN5sGvo32r1UI+n2dfE3GQPYTp8qpA9vf3cJTNsorbR0Zgt9uhKiq7Jb1uF+1OB512m21IW0ePF5eWsLa+AdND9ZlUymW09Qm/odf3o/ZBXxN3hpH0I2raBL4ARzrLEHEzjREAAAAASUVORK5CYII=",et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAABgmlDQ1BJQ0MgUHJvZmlsZQAAKM+VkU0oRFEcxX9miDSizEKyeAusTIRkyVCToqZBGSy898YMNe+Z3hvZWCrbKQsfG18LG2u2FrZKKR8lWxsrYiM9//tGzaRGuXW7v86953TvuRA4yJqWW90Dlp13ErGoNpOc1WqfqSFEE90EddPNDcfj41QcH7dUqfUmorL432hILbomVGnCQ2bOyQsvCA+s5XOKd4TD5pKeEj4V7nLkgsL3SjeK/KI443NAZYadqcSIcFhYy5SxUcbmkmMJ9wu3pyxb8gMzRU4pXldsZVfNn3uqF4YW7elJpctsI8YYE8TRMFhlmSx5IrLaorgkZD9awd/q++PiMsS1jCmOUVaw0H0/6g9+d+um+3qLSaEo1Dx53lsH1G7BV8HzPg897+sIgo9wYZf8Kwcw+C56oaS170PjBpxdljRjG843oeUhpzu6LwVlBtJpeD2Rb0pC8zXUzxV7+9nn+A6mpKvxK9jdg86MZM9XeHddeW9/nvH7I/oNQUlyk6fcG6sAAAAJcEhZcwAALiIAAC4iAari3ZIAAAH9SURBVDhPnZJPaBNBFMa//ZPNpgHT0HartRD/IKJSRIoFLd5VPEmPBgQtXgqCnooIohRE8CBe9CZCTx48evGioKlKpCGiFUWxNmnS3eomNNnN7mafM2NZXNKTD37L8L3ve7MzjIQt6vrDdbIaJNaDGQm3Lg30+GLC5bsrdPRgGsfG0hgZUoVWNQMUyi28+9jCvaujvRtN31yirz/bFAQB+b4fg2u8xz2b9r81deUNff7eJNd1yXEcmsy/iLGwWBc97uFenpH5Z+JQGqOGAjYdbDryZ3YIThzZhmaziYXSmuhxDz8KL+Xk9DO6OLUPmbQEIhLsz2nIGSF+VBoolH4hNxxie38btt3AQDaFmnzqhrxccbFrpA9hGMLzPJimhWq1huevV/HgSRUTYwYunN0NWVbZUGA4q4BnZFXtA5jgOB1Ylo1OJ4CiJHDnsQ1JSmFuZg9c14OqagJip+MZeW9uEF+W22i1PBbQkEjogsL8cYHndSONs2oBPCM/vT8uvSz60PUUNC0ZcXqmIvhXSybZwDLAM+JWi0syzAYPpqLJup4RxHZbT6L8TRO3GlV+9je9/+BQve5QrebQxkYg4GuuvS216RzzbNrjT443xg9omDycwE6D/QyzrZhdvFr0UfzkY/52NvL3vj1W56+ZtGYrYm30d/FobmhL338U8AdLygpqJt/tXAAAAABJRU5ErkJggg==",ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABgmlDQ1BJQ0MgUHJvZmlsZQAAKM+VkU0oRFEcxX9miDSizEKyeAusTIRkyVCToqZBGSy898YMNe+Z3hvZWCrbKQsfG18LG2u2FrZKKR8lWxsrYiM9//tGzaRGuXW7v86953TvuRA4yJqWW90Dlp13ErGoNpOc1WqfqSFEE90EddPNDcfj41QcH7dUqfUmorL432hILbomVGnCQ2bOyQsvCA+s5XOKd4TD5pKeEj4V7nLkgsL3SjeK/KI443NAZYadqcSIcFhYy5SxUcbmkmMJ9wu3pyxb8gMzRU4pXldsZVfNn3uqF4YW7elJpctsI8YYE8TRMFhlmSx5IrLaorgkZD9awd/q++PiMsS1jCmOUVaw0H0/6g9+d+um+3qLSaEo1Dx53lsH1G7BV8HzPg897+sIgo9wYZf8Kwcw+C56oaS170PjBpxdljRjG843oeUhpzu6LwVlBtJpeD2Rb0pC8zXUzxV7+9nn+A6mpKvxK9jdg86MZM9XeHddeW9/nvH7I/oNQUlyk6fcG6sAAAAJcEhZcwAALiIAAC4iAari3ZIAAAIwSURBVDhPdVNLaBNRFD3jTJs0iQnWtqC2uLEWUlxIUBBxWQjqRigoaNxoEQSRKiIuKqILQRA/hIiCCwviDxoURLGCiJLGT6AhUGvTJjYfpTGdNGknE83n+uZlNASTA3eYuee8e+57746ABhi5vUjpLPH3DpuAS8fWNtTVJU9eTdA2uxk7tpixvlPiue8/S5gIKfg0peDG6e6GRTB0cZpm43kqlUpULBbrQstpnKbR5TUMnvpAX6M5KhQKpKoq7XS9rQv/5ALnNI2m1ZdhlfbY3m9Gd5cI5gLmAtfedTx2bbUil8vBH0xxTtNo27p8Z5IXEJ1DL+joYC9sZgFExKNvYyva27KIz89BTi/AZpCh5uKIRqMwSSvwB+bgfXTzAuy7vbSYWSFZlimVSlE4PEvBYIiue56wOs3x3jdBkiSZANaEqv5CNruMSqUCUWzB83dLsG8ah8dzC17vGNxuN5iY8w6Hg+lVCPtOBOjskR60m1Te8l9EIjNwOgf0r//x8tV49Z6v3E3SgYEWlMtlTmg4fv4Nhl0dTZ3TcqYq3H/mBwVCy5RMLlEikeGx5/Dj6uaawPv0Gf2bGNe5DA0fNGJDJzsC1r3P9xoWi6GpcyyR1FfqOMQKXBtV6GPwN90bHdM9GuP+g4c159DUF4p8S+PztBEzcQti82EUlRiMrQrWtMno6SrBZjVitdUKSRTRu7mv9mNEYwk2mnnelppXoShK3ekLggCD0QCTycyuUhtM4A+OzZgJPZUHrgAAAABJRU5ErkJggg==",xa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS1WqInYQcchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdXFSdJES/9cUWsR4cNyPd/ced+8AoVZimtUxDmi6bSbjMTGdWRWDrwigF13oR0hmljEnSQl4jq97+Ph6F+VZ3uf+HD1q1mKATySeZYZpE28QT2/aBud94jAryCrxOfGYSRckfuS64vIb53yDBZ4ZNlPJeeIwsZhvY6WNWcHUiKeII6qmU76QdlnlvMVZK1VY8578haGsvrLMdZrDiGMRS5AgQkEFRZRgI0qrToqFJO3HPPxDDb9ELoVcRTByLKAMDXLDD/4Hv7u1cpMTblIoBgReHOdjBAjuAvWq43wfO079BPA/A1d6y1+uATOfpFdbWuQI6NsGLq5bmrIHXO4Ag0+GbMoNyU9TyOWA9zP6pgwwcAt0r7m9Nfdx+gCkqKvEDXBwCIzmKXvd492d7b39e6bZ3w8AS3J5R6xfBwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFDgkROnWuuPQAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABPUlEQVQY023OzUsCQQBA8TcqfpSwa7uQYKXmpbAuJVT7j0fBnvtgK0LFArVod2mDNF0EYWZgupR06Hd6xyf4MXp9M9PJJ8vlEoBSqcSG49Jq7AgAAdDtD8x89kVrt4njOABMJhNG4xcsu8Jhe1+I4fjVxFFI5/iIfD7PX1JKgrt7alvb5JLknUa9TjabZTgcEgQBAJ1Oh2azSaNeJ4xjMuk8xbYtpJT4vk8YhoRhiO/7SCmxbYt0npLTWqO1BmA6nTKbzQDQWqOUWnWmUCySJB8opfA8b/XneR5KKZLkg0KxiOgPnk2/1+Xs9AQhBMYYgFVfXd/QPjgks1mt4rgu5xeXRFGMMWAMRFHM+cUljuuyWa2ScyuWuHt4NI7jchsELBYLAMrlMrXaFmvr67gVS4jfp97gyfCPg/09AfANwseSxMxvrXsAAAAASUVORK5CYII=",tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAAzElEQVQ4T2NkwAIWLFiw6+hzX1col8FacvPuhIQENyiXMAAZENfw9D+IhgpRF6A4O7/r2n9DsVO7V5zSc40wu4RBn39l5jqxTAurV8FOhTKxAgx5ZAGjkO3/oUysAFkerE/Tez08UIi1GUSD9DEou67+D8IgQRiNCyCrA2Gm//8ZGWqjv+4GCcJoXABZHUgfilNV3DbhtRlZHsOLxPoZBpigNBisPsDhClKgH3gCHIjoNEgeqpSGAGSTbfwD0tM2SINj8sv/MIzdAAYGAB1Xk+VGE8P2AAAAAElFTkSuQmCC",nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkTlIA0EYhb9EJeKBhQFFLLZQKwOiIpYaBREUQlTwKtzdmChkN2E3wcZSsA1YeDRehY21tha2giB4gNjaWCnaiKz/bIQEIYIDw3y8mfeYeQPBg7RpudU9YNk5Jz4W1Wbn5rXQMzXUE6KNFt10s8Ox2AQVx8ctAbXeRFQW/xuNiWXXhIAmPGRmnZzwkvDAWi6reEc4bK7oCeFT4W5HLih8r3SjyC+KUz4HVWbYmY6PCIeFtVQZG2VsrjiWcL9wR8KyJT84W+SE4nXFVjpv/txTvbBh2Z6ZUrrMdsYYZ5IYGgZ5VkmTIyKrLYpLXPajFfxtvj8mLkNcq5jiGCWDhe77UX/wu1s32ddbTGqIQs2T5711QmgLvgqe93noeV9HUPUIF3bJnzmAwXfRCyWtYx+aNuDssqQZ23C+Ca0PWd3RfalKZjCZhNcT+aY5aL6GuoVibz/7HN/BtHQ1cQW7e9CVkuzFCu+uLe/tzzN+f0S/ASWWcoi7xtRwAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB+UlEQVQ4T5WTz2sTQRTHv7M/6iH4m7aXTTZnqY1E1JBSsChW1KJSYijiwZN4Lo1/giZetHhWiaHaH9aoNbEHtb8sCagtChWTNNAt9eaWellpDs+ZaSwGbZJ+4PFm38z77O7sDkOdTM68p59ra3LcdfZMRZ9SzlUZe5WmHboG/yEfrCWrXN0GbycmaWp6inK5bxSNxahcrqDmk9g/bOzetROp9DhuRCKbr/F4cIhGk8+ltKbE+eVgfb2EtmAAN29FZVP8UYLa24JwHEeuqSkplUoyVldtnDzRgTt3+ylw7AgWFr5ifm5Orqn6dVKvx+n7ygpMjwGXy4WGBp1XGZasZWQyWdyORWX/lpKxVJosy0JrywFMz8zCtu3yzAZ/BIL/SpIvXtKyEBxswfznL/B6vTjfdW7LG/6zJyOjz6hYLMLX6sOHj59gGEZVgaBCMjj8lIqLiwgcDWI2k4Hh9qD74oWqAsGmZODJEBUKeXQcP413E29gmibCoe6aAoGUxBMDlM/l+ZkI8Z8qCQ8X9IRDdQkEysN4ggr5AsKXrmJ4JAGTb+KVyz11CwSst6+Prl+L4P6De2hubsSpzk4oigLGQ+S/Q1V5nW2MGWMyN+7bw5g4A9lsFm63G37/YSiqCk3joWo8a1B56PwEy2tdlzUxrygql6po2r+X/QZc4Kt8vjU1QAAAAABJRU5ErkJggg==",wa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABg2lDQ1BJQ0MgUHJvZmlsZQAAKM+VkUsoRFEcxn8zyKORhVGSxV0MK0pIlgwlRU1j1AwW7r1jhpp7TfeObCyVrbLw2HgtbKzZWtgqpTxKtjZWxEa6/ueOmkmNcup0fn3nfF/nfAeCBznTcqt7wLILTnwsqiVTM1rtMzW0UE8Tbbrp5odjsQkqjo9bAmq96VZZ/G80phdcEwKa8JCZdwrC88IDq4W84h3hsLmop4VPhbscuaDwvdKNIr8ozvocVJlhJxEfEQ4La9kyNsrYXHQs4X7hSNqyJT+YLHJa8ZpiK7di/txTvTC0YE9PKV1mO2OMM0kMDYMVlshRoFtWWxSXuOxHK/jbfH9MXIa4ljDFMcoyFrrvR/3B727dTF9vMSkUhZonz3vrgNot+Nr0vM9Dz/s6gqpHuLBL/uUDGHwXfbOkRfahaR3OLkuasQ3nG9D6kNcd3ZeqZAYzGXg9kW9KQfM1NMwWe/vZ5/gOEtLVxBXs7kFnVrLnKry7rry3P8/4/RH9Bi+4coweluJpAAAACXBIWXMAAC4iAAAuIgGq4t2SAAAB7klEQVQ4T5WSS0xTQRSG/zu33fFYGdJF17BS08tGE3YGFuICmgrojkCIC8FECjtIWAnIrilNMGgAeRRtCyVo7A6Npg12oeHVEjHlsS4p5XVJjzPDhZRAbuo3i3PmzPyTf+aMggJxd3WTkWJwoP9Sx4xoihA7nfV40dFuVP4DIV76ukSJxAblu7jAYkRTSkuKMfJm9Ir1i8MKusLpqY7HLuelSMSO9udyrSAHuq7j4CAjD+FQa0szVlfX5JppFwKhOcpm9mX+6/eKjPk0PXlqZDewsPiJXg8NkRnfvv+gGx2E5sO0nUqhpLgINpsNXu8wgsEAPB4PLBYLcrkcNE1DJnt4/QofAkFKcXGlQ0N4IYyB/lfGynU+f4lANXLJzOxH+rv1B/fvVWFuPmRUCZ2dbjQ2NkgH8XgcsVhMusge5jmYnPbTFhdXP6iFf3YcDq0S8Z/Lpg74Vc//wdjEJCUTSTx66JLi23fuoqnBJQ+PRCKoq6sXqXTg8/n4m3gRjUZle/FubIJ6evtofX1PflUxl7s5Ym7G+6lpUl663fSsrQujbz0oK7uF6poaMMaQTqexuZnE7s4Ojk9OoCiKrIsohqC8ogLK1IyfhB273Q4Hf3mmqrxVKs70MxwdH0FlKqxWK68zGcVc5a1U+T7GGP4BgBQJdqV6GiMAAAAASUVORK5CYII=",Ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TSkWqDhYp4hCwOlkQFXHUKhShQqgVWnUwufRDaNKQtLg4Cq4FBz8Wqw4uzro6uAqC4AeIo5OToouU+L+k0CLGg+N+vLv3uHsHCPUS06zAGKDpFTOViIuZ7IoYfEUAEfSgH0Mys4xZSUrCc3zdw8fXuxjP8j735+hWcxYDfCLxDDPMCvE68dRmxeC8TxxmRVklPiceNemCxI9cV1x+41xwWOCZYTOdmiMOE4uFNlbamBVNjXiSOKpqOuULGZdVzluctVKVNe/JXxjK6ctLXKc5iAQWsAgJIhRUsYESKojRqpNiIUX7cQ//gOOXyKWQawOMHPMoQ4Ps+MH/4He3Vn5i3E0KxYGOF9v+GAaCu0CjZtvfx7bdOAH8z8CV3vKX68D0J+m1lhY9Anq3gYvrlqbsAZc7QOTJkE3Zkfw0hXweeD+jb8oCfbdA16rbW3Mfpw9AmrpK3gAHh8BIgbLXPN7d2d7bv2ea/f0AZphyovX12KAAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfmBBgOKgbgcs+YAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAzFJREFUOMuVlWtMFGcUht8Ztt1lZmFwZlmWXXZZkF0tEW1TI02s2kvU/miJicaUeMFoURtquDRYTdqGhhAjRkNL0ia9gReIrRVawRQjmqz+MsbourUlbUkI7sLOfLNovKS2Ro+/WGbKboBJ5s98532+c857cgZEhBv7D9rivuA+vXKNSESYyxtp2WFVg4FGdV25nYiA29uarJri7mQQY0xReu9vXGWfLexiS5NVz8n9RocYZRbpl/tvrsiG6vSsZxBuMwhRBiGqyfKZeytfE2aC/bl/3/MJr+u7SR2DEE14Cutw7dtfOSbP22s80CSpj214PSsd7LeP662ay9Vh1MRF5xeRtnYLiAgNoS2cruR+qBsCmJTdx8pXTCv/yieNNt1b0KkZYlV3YfuNjs4MIkIyEKFD0HIdDcZb9eyc/sSqsmSmQ427bczpOmqMUeX8tqHWpowkx3h79NjbmHDk1Zqgotz/6K2XskZ2VlrVIv8JU5kF8z+/2laXYWRM68/aB+dxx6Hs0Q1GMUk6q3r93UbYmE0+3Nt9iv+/PmXTK4+v5nRBqTH2VIc4lVm+70i4d4BPpU07FruadnFqib/OZBSEaNzhODxyqJ9Pp+OR5ql5LGdydx++QgBn/P6c/m+pZeADKZ0uJfCPvR+JzpOnjkJ/+CoAIgAcOA4AnuJJWWaIdccWlsmptBwRmWH1taLSdfL7DPZgOQEgAOSe18U/fTSM+D+fTsZZeD7yX6m4yRmJT5gAxvqHq6oEtaj4tMnN0iWtPw528USEiSLvexqEWNIoi3ROe7lYTmnK37U1dtVd8JMRNu4qaPk6HE4agOvt0Is91cwAZYI0OFoWVEzAa9XvZ2l5bhNsbOGiAz9Ebk5z82LPu5zqd29nEKcyzcwZHF0WyCUi4NZnrXZVVnpMo1Hob/750vW0o9HXcZNTS/K3GzPVefuFkaWL8hAv9lUktwyE6FjJC80N2h1+xn0IAgt4qiZ7qkGIxRYE6rF56BYSLs8ODUJ0fPGLzV9duszPemP/fpxjQe9WDWJszOc7WD16jAcR4Z3QAW68fEn5l3+p/Fx/AYGWIEbeWLa8gsIcEeEZsTM0Y8K17+YAAAAASUVORK5CYII=",F=e=>(U("data-v-44e98781"),e=e(),P(),e),Ea={class:"head"},Ta=F(()=>i("img",{src:fa},null,-1)),Fa={key:0,class:"gray"},Sa={class:"typeIcon-wrapper"},Ra=["src"],Na={key:0,class:"gray"},Va={class:"gray"},Ba={class:"gray"},Ua={key:0,class:"gray"},Pa=["onClick"],Oa=["src"],La=["src"],Qa=["src"],qa=F(()=>i("img",{class:"pr-4px",src:Ca},null,-1)),Ga=F(()=>i("img",{class:"pr-4px",src:ya},null,-1)),Da=F(()=>i("img",{class:"pr-4px",src:_a},null,-1)),Ka=F(()=>i("img",{class:"pr-4px",src:Aa},null,-1)),ja=F(()=>i("img",{class:"pr-4px",src:_e},null,-1)),Za=F(()=>i("img",{class:"pr-4px",src:Je},null,-1)),Ma=F(()=>i("img",{class:"pr-4px",src:ba},null,-1)),Ya=F(()=>i("img",{class:"pr-4px",src:va},null,-1)),Xa=F(()=>i("img",{class:"pr-4px",src:_e},null,-1)),Wa=F(()=>i("img",{class:"pr-4px",src:et},null,-1)),za=F(()=>i("img",{class:"pr-4px",src:ka},null,-1)),Ha=F(()=>i("img",{class:"pr-4px",src:xa},null,-1)),Ja=F(()=>i("img",{class:"pr-4px",src:tt},null,-1)),$a=F(()=>i("img",{class:"pr-4px",src:nt},null,-1)),ei=F(()=>i("img",{class:"pr-4px",src:wa},null,-1)),ti=F(()=>i("span",{class:"gray absolute right-5px"},"Ctrl+X",-1)),ni=F(()=>i("span",{class:"gray absolute right-5px"},"Ctrl+C",-1)),ai=F(()=>i("span",{class:"gray absolute right-5px"},"Ctrl+V",-1)),ii=F(()=>i("span",{class:"gray absolute right-5px"},"Ctrl+D",-1)),si=F(()=>i("span",null," Move Up ",-1)),oi=[si],li=F(()=>i("span",null," Move Down ",-1)),ri=[li],di=F(()=>i("span",null," Move To ",-1)),ui=F(()=>i("span",{class:"absolute right-5px"},"❯",-1)),ci=[di,ui],gi=["onClick"],mi={key:0,class:"gray"},hi=F(()=>i("img",{class:"w-12px pr-4px",src:Ia},null,-1)),pi=F(()=>i("span",{class:"gray absolute right-5px"},"Del",-1));function fi(e,t,n,s,r,a){const d=B("EditorCollapsibleBox"),l=B("CatalogueEntry",!0),g=B("CatalogueLabel"),c=We,f=ze,k=B("ContextMenu");return o(),u("div",{class:"item unselectable",onMouseup:t[32]||(t[32]=N((...y)=>a.debug&&a.debug(...y),["middle","stop"])),onContextmenu:t[33]||(t[33]=N((...y)=>a.contextmenu.show&&a.contextmenu.show(...y),["stop"]))},[n.item.editorTypeName==="catalogue"||n.item.editorTypeName==="gameSystem"?(o(),u(v,{key:0},[i("div",Ea,[h(d,{payload:a.catalogue,nobox:"",group:[],collapsible:!1},{title:x(()=>[Ta,p(" "+C(a.catalogue.name)+" ",1),a.getNameExtra(a.catalogue)?(o(),u("span",Fa," "+C(a.getNameExtra(a.catalogue)),1)):m("",!0)]),content:x(()=>[]),_:1},8,["payload"])]),(o(!0),u(v,null,T(a.groupedCategories,y=>(o(),A(d,{key:y.type,altclickable:s.store.can_follow(n.item)||n.imported,onAltclick:a.onctrlclick,collapsible:y.items.length>0,group:a.get_group("entries"),payload:y.type,onContextmenu:N(E=>a.contextmenu.show(E,y.type),["stop"]),class:V([y.type,y.links,`depth-${n.depth}`]),nobox:"",defcollapsed:!a.should_be_open(y.type)},{title:x(()=>[i("span",null,[i("span",Sa,[i("img",{class:"typeIcon",src:`assets/bsicons/${y.icon}`},null,8,Ra)]),p(" "+C(y.name),1)])]),content:x(()=>[a.should_be_grouped(y.type)?(o(!0),u(v,{key:0},T(a.groupBy(y.items,E=>E.item.typeName||"Untyped"),E=>(o(),A(g,{label:E[0].item.typeName??"Untyped",depth:n.depth+1,catalogue:a.catalogue,item:a.catalogue.findOptionById(E[0].item.typeId)},{default:x(()=>[(o(!0),u(v,null,T(E,L=>(o(),A(l,{key:a.key(L.item),item:L.item,group:a.get_group(y.type),forceShowRecursive:a.forceShow,imported:L.imported,depth:n.depth+2,noType:""},null,8,["item","group","forceShowRecursive","imported","depth"]))),128))]),_:2},1032,["label","depth","catalogue","item"]))),256)):(o(!0),u(v,{key:1},T(y.items,E=>(o(),A(l,{key:a.key(E.item),item:E.item,group:a.get_group(y.type),forceShowRecursive:a.forceShow,imported:E.imported,depth:n.depth+1},null,8,["item","group","forceShowRecursive","imported","depth"]))),128))]),_:2},1032,["altclickable","onAltclick","collapsible","group","payload","onContextmenu","class","defcollapsed"]))),128))],64)):(o(),A(d,{key:1,altclickable:s.store.can_follow(n.item)||n.imported,onAltclick:a.onctrlclick,collapsible:a.mixedChildren&&a.mixedChildren.length>0,empty:!a.mixedChildren||a.mixedChildren.length==0,group:n.group||[],payload:n.item,class:V([n.item.parentKey,`depth-${n.depth}`]),defcollapsed:!r.open,nobox:""},{title:x(()=>[h(c,{item:n.item,imported:n.imported},null,8,["item","imported"])]),content:x(()=>[(o(!0),u(v,null,T(a.mixedChildren,y=>(o(),A(l,{key:a.key(y.item),item:y.item,group:a.get_group("default"),forceShowRecursive:a.forceShow,imported:n.imported||y.imported,depth:n.depth+1},null,8,["item","group","forceShowRecursive","imported","depth"]))),128))]),_:1},8,["altclickable","onAltclick","collapsible","empty","group","payload","class","defcollapsed"])),r.contextmenuopen?(o(),A(k,{key:2,modelValue:r.contextmenuopen,"onUpdate:modelValue":t[31]||(t[31]=y=>r.contextmenuopen=y),ref:"contextmenu"},{default:x(({payload:y})=>{var E,L,H,ge,me;return[!y&&n.item?(o(),u(v,{key:0},[s.store.can_follow(n.item)?(o(),u("div",{key:0,onClick:t[0]||(t[0]=w=>s.store.follow(a.link))},[p(" Follow "),a.link.target.getCatalogue()!==n.item.getCatalogue()?(o(),u("span",Na,"  ["+C(((E=a.link.target.getCatalogue())==null?void 0:E.getName())||a.link.target.getName())+"] ",1)):m("",!0)])):m("",!0),n.imported?(o(),u("div",{key:1,onClick:t[1]||(t[1]=w=>s.store.goto(n.item))},[p(" Goto "),i("span",Va,"  ("+C((L=n.item.getCatalogue())==null?void 0:L.getName())+") ",1)])):m("",!0),n.item.isProfile()&&n.item.typeId&&n.item.getCatalogue().findOptionById(n.item.typeId)?(o(),u("div",{key:2,onClick:t[2]||(t[2]=w=>s.store.goto(n.item.getCatalogue().findOptionById(n.item.typeId)))},[p(" Goto "+C(n.item.typeName)+" ",1),i("span",Ba,"  ["+C(n.item.getCatalogue().findOptionById(n.item.typeId).getCatalogue().getName())+"] ",1)])):m("",!0),a.child&&s.store.can_goto(a.child)?(o(),u("div",{key:3,onClick:t[3]||(t[3]=w=>s.store.goto(a.child))},[p(" Goto "+C(a.child.getName())+" ",1),n.item.getCatalogue()!==a.child.getCatalogue()?(o(),u("span",Ua,"  ["+C(a.child.getCatalogue().getName())+"] ",1)):m("",!0)])):m("",!0),(H=n.item.links)!=null&&H.length||(ge=n.item.other_links)!=null&&ge.length?(o(),u("div",{key:4,onClick:t[4]||(t[4]=w=>s.store.mode="references")}," References ("+C(n.item.links?n.item.links.length:0)+") ",1)):m("",!0),n.item.isLink()||n.item.links||n.imported?(o(),A(f,{key:5})):m("",!0)],64)):m("",!0),y?(o(),u(v,{key:1},[i("div",{onClick:w=>s.store.create(y)},[i("img",{class:"pr-4px",src:`assets/bsicons/${a.getTypeName(y)}.png`},null,8,Oa),p(" "+C(a.getTypeLabel(a.getTypeName(y))),1)],8,Pa),y==="selectionEntries"?(o(),u("div",{key:0,onClick:t[5]||(t[5]=w=>s.store.create("entryLinks",{type:"selectionEntry"}))},[i("img",{class:"pr-4px",src:"assets/bsicons/link.png"},null,8,La),p(" Link ")])):m("",!0),y==="rules"?(o(),u("div",{key:1,onClick:t[6]||(t[6]=w=>s.store.create("infoLinks",{type:"profile"}))},[i("img",{class:"pr-4px",src:"assets/bsicons/link.png"},null,8,Qa),p(" Link ")])):m("",!0),h(f)],64)):(o(),u(v,{key:2},[a.allowed("forceEntries")?(o(),u("div",{key:0,onClick:t[7]||(t[7]=w=>s.store.create("forceEntries"))},[qa,p(" Force ")])):m("",!0),a.allowed("categoryLinks")&&n.item.isForce()?(o(),u("div",{key:1,onClick:t[8]||(t[8]=w=>s.store.create("categoryLinks"))},[Ga,p(" Category ")])):m("",!0),a.allowed(["forces","categoryLinks"])?(o(),A(f,{key:2})):m("",!0),a.allowed("selectionEntries")?(o(),u("div",{key:3,onClick:t[9]||(t[9]=w=>s.store.create("selectionEntries"))},[Da,p(" Entry ")])):m("",!0),a.allowed("selectionEntryGroups")?(o(),u("div",{key:4,onClick:t[10]||(t[10]=w=>s.store.create("selectionEntryGroups"))},[Ka,p(" Group ")])):m("",!0),a.allowed("entryLinks")?(o(),u("div",{key:5,onClick:t[11]||(t[11]=w=>s.store.create("entryLinks",{type:"selectionEntry"}))},[ja,p(" Link ")])):m("",!0),a.allowed(["selectionEntries","selectionEntryGroups","entryLinks"])?(o(),A(f,{key:6})):m("",!0),a.allowed("profiles")?(o(),u("div",{key:7,onClick:t[12]||(t[12]=w=>s.store.create_child("profiles",n.item))},[Za,p(" Profile ")])):m("",!0),a.allowed("rules")?(o(),u("div",{key:8,onClick:t[13]||(t[13]=w=>s.store.create("rules"))},[Ma,p(" Rule ")])):m("",!0),a.allowed("infoGroups")?(o(),u("div",{key:9,onClick:t[14]||(t[14]=w=>s.store.create("infoGroups"))},[Ya,p(" Info Group ")])):m("",!0),a.allowed("infoLinks")?(o(),u("div",{key:10,onClick:t[15]||(t[15]=w=>s.store.create("infoLinks",{type:"profile"}))},[Xa,p(" Info Link ")])):m("",!0),a.allowed(["profiles","rules","infoGroups","infoLinks"])?(o(),A(f,{key:11})):m("",!0),a.allowed("conditions")?(o(),u("div",{key:12,onClick:t[16]||(t[16]=w=>s.store.create("conditions"))},[Wa,p(" Condition ")])):m("",!0),a.allowed("conditionGroups")?(o(),u("div",{key:13,onClick:t[17]||(t[17]=w=>s.store.create("conditionGroups"))},[za,p(" Condition Group ")])):m("",!0),a.allowed("repeats")?(o(),u("div",{key:14,onClick:t[18]||(t[18]=w=>s.store.create("repeats"))},[Ha,p(" Repeat ")])):m("",!0),a.allowed(["conditions","conditionGroups","repeats"])?(o(),A(f,{key:15})):m("",!0),a.allowed("constraints")?(o(),u("div",{key:16,onClick:t[19]||(t[19]=w=>s.store.create_child("constraints",n.item))},[Ja,p(" Constraint ")])):m("",!0),a.allowed("modifiers")?(o(),u("div",{key:17,onClick:t[20]||(t[20]=w=>s.store.create("modifiers"))},[$a,p(" Modifier ")])):m("",!0),a.allowed("modifierGroups")?(o(),u("div",{key:18,onClick:t[21]||(t[21]=w=>s.store.create("modifierGroups"))},[ei,p(" Modifier Group ")])):m("",!0),a.allowed(["constraints","modifiers","modifierGroups"])?(o(),A(f,{key:19})):m("",!0)],64)),y?m("",!0):(o(),u("div",{key:3,onClick:t[22]||(t[22]=(...w)=>s.store.cut&&s.store.cut(...w))},[p("Cut"),ti])),y?m("",!0):(o(),u("div",{key:4,onClick:t[23]||(t[23]=(...w)=>s.store.copy&&s.store.copy(...w))},[p("Copy"),ni])),i("div",{onClick:t[24]||(t[24]=(...w)=>s.store.paste&&s.store.paste(...w))},[p("Paste"),ai]),y?m("",!0):(o(),u("div",{key:5,onClick:t[25]||(t[25]=(...w)=>s.store.duplicate&&s.store.duplicate(...w))},[p("Duplicate"),ii])),a.sortable(n.item.parent)?m("",!0):(o(),u("div",{key:6,onClick:t[26]||(t[26]=w=>s.store.move_up(n.item))},oi)),a.sortable(n.item.parent)?m("",!0):(o(),u("div",{key:7,onClick:t[27]||(t[27]=w=>s.store.move_down(n.item))},ri)),!y&&((me=s.store.get_move_targets(n.item))!=null&&me.length)?(o(),u(v,{key:8},[i("div",{onMouseover:t[28]||(t[28]=(...w)=>a.nestedcontextmenu.show&&a.nestedcontextmenu.show(...w))},ci,32),h(k,{ref:"nestedcontextmenu"},{default:x(()=>[(o(!0),u(v,null,T(s.store.get_move_targets(n.item),w=>(o(),u("div",{onClick:Qe=>s.store.move(n.item,a.catalogue,w.target,w.type)},C(w.target.name)+" - "+C(w.type),9,gi))),256))]),_:1},512)],64)):m("",!0),n.item.parentKey==="sharedSelectionEntries"?(o(),u("div",{key:9,onClick:t[29]||(t[29]=w=>s.store.create_child("entryLinks",a.catalogue,{targetId:n.item.id,type:"selectionEntry",name:n.item.getName()}))},[p(" Add Root Link"),a.hasRootLink(a.catalogue,n.item)?(o(),u("span",mi," (already has one)")):m("",!0)])):m("",!0),y?m("",!0):(o(),A(f,{key:10})),y?m("",!0):(o(),u("div",{key:11,onClick:t[30]||(t[30]=w=>s.store.remove())},[hi,p("Remove"),pi]))]}),_:1},8,["modelValue"])):m("",!0)],32)}const Ci=_(pa,[["render",fi],["__scopeId","data-v-44e98781"]]),yi=""+globalThis.__publicAssetsURL("assets/icons/undo.svg"),_i=""+globalThis.__publicAssetsURL("assets/icons/redo.svg"),Ai=""+new URL("collapse-all.40557dca.svg",import.meta.url).href,ne=e=>(U("data-v-3797b917"),e=e(),P(),e),bi={class:"leftPanel"},vi={class:"static sticky flex items-center h-28px z-1"},ki={class:"absolute right-30px"},xi=ne(()=>i("option",{value:"none"},"No Sorting ",-1)),wi=ne(()=>i("option",{value:"asc"},"Ascending ",-1)),Ii=ne(()=>i("option",{value:"desc"},"Descending ",-1)),Ei=ne(()=>i("option",{value:"type"},"Type",-1)),Ti=[xi,wi,Ii,Ei],Fi={class:"bottom static"},Si={key:0},Ri=ne(()=>i("label",{class:"unselectable cursor-pointer",for:"showimport"},"Show Imported",-1)),Ni=ne(()=>i("span",null,"  ",-1)),Vi={class:"absolute right-5px"},Bi=ne(()=>i("label",{class:"unselectable cursor-pointer",for:"ignoreProfilesRules"},"Ignore Profiles/Rules",-1));function Ui(e,t,n,s,r,a){const d=fe,l=Ci;return o(),u("div",bi,[i("div",vi,[i("span",{class:V([{grey:!e.store.can_back(),"cursor-pointer":e.store.can_back(),"hover-darken":e.store.can_back()},"bold p-4px unselectable icon"]),onClick:t[0]||(t[0]=(...g)=>e.store.back&&e.store.back(...g)),title:"Back"}," 🡰 ",2),i("span",{class:V([{grey:!e.store.can_forward(),"cursor-pointer":e.store.can_forward(),"hover-darken":e.store.can_forward()},"bold p-4px unselectable ml-4px icon"]),onClick:t[1]||(t[1]=(...g)=>e.store.forward&&e.store.forward(...g)),title:"Forward"}," 🡲 ",2),i("img",{class:V([{grey:!e.store.can_undo(),"cursor-pointer":e.store.can_undo(),"hover-darken":e.store.can_undo()},"bold p-4px unselectable ml-5px w-24px h-24px icon"]),onClick:t[2]||(t[2]=(...g)=>e.store.undo&&e.store.undo(...g)),title:"Undo",src:yi},null,2),i("img",{class:V([{grey:!e.store.can_redo(),"cursor-pointer":e.store.can_redo(),"hover-darken":e.store.can_redo()},"bold p-4px unselectable ml-4px w-24px h-24px icon"]),onClick:t[3]||(t[3]=(...g)=>e.store.redo&&e.store.redo(...g)),title:"Redo",src:_i},null,2),i("div",ki,[p(" Sort "),b(i("select",{class:"h-24px p-2px !text-sm","onUpdate:modelValue":t[4]||(t[4]=g=>e.settings.sort=g)},Ti,512),[[j,e.settings.sort]])]),i("img",{onClick:t[5]||(t[5]=(...g)=>e.uistate.collapse_all&&e.uistate.collapse_all(...g)),class:"align-middle absolute right-0 p-2px hover-darken cursor-pointer icon",title:"Collapse All",src:Ai}),h(d,{errors:e.catalogue.errors,showNumber:"",clickable:"",class:"z-1"},null,8,["errors"])]),i("div",{class:"top rightborder scrollable",ref:"scrollable",onScroll:t[6]||(t[6]=(...g)=>e.onscroll&&e.onscroll(...g)),onKeydownCapture:t[7]||(t[7]=(...g)=>e.keydown&&e.keydown(...g))},[h(l,{class:"mb-40px",item:e.catalogue,grouped:"",id:"editor-entries",showImported:e.showImported},null,8,["item","showImported"])],544),i("div",Fi,[e.catalogue.isGameSystem()?m("",!0):(o(),u("span",Si,[b(i("input",{class:"cursor-pointer","onUpdate:modelValue":t[8]||(t[8]=g=>e.showImported=g),type:"checkbox",id:"showimport"},null,512),[[q,e.showImported]]),Ri])),Ni,i("span",Vi,[b(i("input",{class:"cursor-pointer","onUpdate:modelValue":t[9]||(t[9]=g=>e.ignoreProfilesRules=g),type:"checkbox",id:"ignoreProfilesRules"},null,512),[[q,e.ignoreProfilesRules]]),Bi]),b(i("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>e.filter=g),ref:"editor-searchbox",type:"search",placeholder:"search... ctrl+f",class:"w-full"},null,512),[[I,e.filter]])])])}const Pi=_(Ot,[["render",Ui],["__scopeId","data-v-3797b917"]]),Oi=$({props:{items:{type:Array,required:!0},get:{type:Function,required:!0},set:{type:Function,required:!0},del:{type:Function,required:!0}},data(){return{dragging:null,dropIndex:null}},computed:{sorted(){return M(this.items,e=>this.get(e)??1e4)},realDropIndex(){return this.dropIndex===null?null:Math.min(this.sorted.filter(e=>this.get(e)!==void 0).length,this.dropIndex)}},methods:{dragStart(e){this.dragging=e},dragEnter(e){this.dragging!==e&&(this.dropIndex=e)},drop(e){if(e===null)return;const t=e+1;if(this.dropIndex=null,this.dragging!==null){const n=[];for(const s of this.sorted){const r=this.get(s);r!==void 0&&n.push({item:s,idx:r})}if(n.find(s=>s.idx===t))for(const{item:s,idx:r}of n)r>=t&&this.set(s,r+1);this.set(this.dragging,t),this.fixup(),this.dragging=null}},fixup(){let e=1;for(const t of this.sorted)this.get(t)!==void 0&&(this.set(t,e),e++)}}});const Li={class:"scrollable max-h-60vh p-10px"},Qi=["onDragstart","onDragenter"],qi={key:1},Gi=["onClick"];function Di(e,t,n,s,r,a){return o(),u("div",Li,[(o(!0),u(v,null,T(e.sorted,(d,l)=>(o(),u("div",{class:V(["p-4px border-solid -mt-1px border-1px hover-darken unselectable 0px",{"drop-target":e.realDropIndex===l}]),draggable:"true",onDragstart:g=>e.dragStart(d),onDragover:t[0]||(t[0]=N(()=>{},["prevent"])),onDrop:t[1]||(t[1]=g=>e.drop(e.realDropIndex)),onDragenter:g=>e.dragEnter(l)},[e.get(d)===void 0?(o(),u("span",{key:0,class:V({gray:e.get(d)===void 0}),title:"Will not be ordered specifically (but will be after anything with an index set)"}," [?] ",2)):(o(),u("span",qi," ["+C(e.get(d))+"] ",1)),Q(e.$slots,"item",J(se({item:d})),void 0,!0),e.get(d)!==void 0?(o(),u("span",{key:2,class:"px-4px py-1px hover-brighten cursor-pointer unselectable float-right",onClick:N(g=>e.del(d),["stop"])},"x",8,Gi)):m("",!0)],42,Qi))),256))])}const at=_(Oi,[["render",Di],["__scopeId","data-v-3ac5b90f"]]),Ki={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},data(){return{selectedType:null,orderPopup:!1}},setup(){return{store:G()}},computed:{selected:{set(e){this.selectedType=this.item.characteristicTypes.find(t=>t.id===e)||null},get(){var e;return((e=this.selectedType)==null?void 0:e.id)||null}}},methods:{get(e){return e.sortIndex},set(e,t){e.sortIndex=t,this.store.set_catalogue_changed(e.catalogue,!0)},del_sort(e){delete e.sortIndex,this.store.set_catalogue_changed(e.catalogue,!0)},get_profile_types(){const e=this.item.catalogue.manager.getAllLoadedCatalogues(),t=[];for(const n of e)for(const s of n.profileTypes||[])t.push(s);return t},add(){this.item.characteristicTypes||(this.item.characteristicTypes=[]);const e={id:pe(),name:"New Characteristic Type"};this.item.characteristicTypes.push(e);const t=this.item.links||[];for(const n of t)for(const s of n.profilesIterator())s.typeId===this.item.id&&(s.characteristics||(s.characteristics=[]),s.characteristics.push({typeId:e.id,name:e.name,$text:""}));this.$emit("catalogueChanged")},del(){let e;if(this.selectedType&&this.item.characteristicTypes){const n=this.item.characteristicTypes.indexOf(this.selectedType);n!=-1&&(e=this.item.characteristicTypes.splice(n,1)[0],this.selectedType=this.item.characteristicTypes[0])}const t=this.item.links||[];for(const n of t)for(const s of n.profilesIterator())s.typeId===this.item.id&&s.characteristics&&(s.characteristics=s.characteristics.filter(r=>r.typeId!==e.id));this.$emit("catalogueChanged")},characteristicIdChanged(e){const t=this.item.links||[];for(const n of t)if(n.typeId===this.item.id)for(const s of n.characteristics||[])s.name==e.name&&(s.typeId=e.id,this.store.set_catalogue_changed(n.catalogue));this.$emit("catalogueChanged")},characteristicNameChanged(e){const t=this.item.links||[];for(const n of t)if(n.typeId===this.item.id)for(const s of n.characteristics||[])s.typeId==e.id&&(s.name=e.name,this.store.set_catalogue_changed(n.catalogue));this.$emit("catalogueChanged")},init(){var e;(e=this.item.characteristicTypes)!=null&&e.length&&(this.selectedType=this.item.characteristicTypes[0])}},created(){this.init()},watch:{item(){this.init()}},components:{SortOrder:at}},ji="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV8/RCkVB4uIOASsTlZERRy1CkWoEGqFVh1MLv2CJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoA4OjkpukiJ/0sKLWI8OO7Hu3uPu3eAv15mqhkcB1TNMlKJuJDJrgqdrwiiDyGMYUhipj4nikl4jq97+Ph6F+NZ3uf+HN1KzmSATyCeZbphEW8QT29aOud94ggrSgrxOfGoQRckfuS67PIb54LDfp4ZMdKpeeIIsVBoY7mNWdFQiaeIo4qqUb4/47LCeYuzWq6y5j35C8M5bWWZ6zQHkcAiliBCgIwqSijDQoxWjRQTKdqPe/gHHL9ILplcJTByLKACFZLjB/+D392a+ckJNykcBzpebPtjGOjcBRo12/4+tu3GCRB4Bq60lr9SB2Y+Sa+1tOgR0LMNXFy3NHkPuNwB+p90yZAcKUDTn88D72f0TVmg9xYIrbm9Nfdx+gCkqavkDXBwCIwUKHvd491d7b39e6bZ3w+TdnK04tslPQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+YEFgsEBONvEkAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAfklEQVQ4y+2VOw7AMAhDTdVj5nbknnTpkCIMapqt8YYELx9LRlDLXC34IAOgQ63BAelpvrmTucY4EoD6xEvayDOsk533jVZC6f9NzR6kwbupzm3vPipgK8zpgdMpcFobuIG/AGoSoixglQHFB2UhGeC0v9wZxc4JyW9z8cG4AK8CG5AjF625AAAAAElFTkSuQmCC";const X=e=>(U("data-v-1188997b"),e=e(),P(),e),Zi=X(()=>i("legend",null," Order ",-1)),Mi=X(()=>i("legend",null,"Profil Type",-1)),Yi=X(()=>i("h3",null,"Characteristic Types",-1)),Xi=["value"],Wi={class:"section add"},zi=X(()=>i("img",{src:S},null,-1)),Hi=X(()=>i("img",{src:ji},null,-1)),Ji=X(()=>i("h3",{class:"section"},"Selected Characteristic Type",-1)),$i={class:"editorTable"},es=X(()=>i("td",null,"Unique Id:",-1)),ts=X(()=>i("td",null,"Name:",-1)),ns=X(()=>i("div",{class:"text-center"},"Drag & Drop to change profileTypes order",-1));function as(e,t,n,s,r,a){const d=B("SortOrder"),l=wt;return o(),u("span",null,[i("fieldset",null,[Zi,i("button",{class:"bouton inline",onClick:t[0]||(t[0]=g=>r.orderPopup=!0)},"Change")]),i("fieldset",null,[Mi,Yi,i("div",null,[b(i("select",{size:"2","onUpdate:modelValue":t[1]||(t[1]=g=>a.selected=g)},[(o(!0),u(v,null,T(n.item.characteristicTypes,g=>(o(),u("option",{value:g.id},C(g.name),9,Xi))),256))],512),[[j,a.selected]]),i("div",Wi,[i("button",{class:"bouton",onClick:t[2]||(t[2]=(...g)=>a.add&&a.add(...g))},[zi,p(" Add ")]),i("button",{class:"bouton",onClick:t[3]||(t[3]=(...g)=>a.del&&a.del(...g))},[Hi,p(" Delete ")])]),r.selectedType?(o(),u(v,{key:0},[Ji,i("table",$i,[i("tr",null,[es,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=g=>r.selectedType.id=g),onChange:t[5]||(t[5]=g=>a.characteristicIdChanged(r.selectedType))},null,544),[[I,r.selectedType.id]])])]),i("tr",null,[ts,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=g=>r.selectedType.name=g),onChange:t[7]||(t[7]=g=>a.characteristicNameChanged(r.selectedType))},null,544),[[I,r.selectedType.name]])])])])],64)):m("",!0)])]),r.orderPopup?(o(),A(l,{key:0,modelValue:r.orderPopup,"onUpdate:modelValue":t[8]||(t[8]=g=>r.orderPopup=g)},{default:x(()=>[ns,h(d,{items:a.get_profile_types(),get:a.get,set:a.set,del:a.del_sort},{item:x(({item:g})=>[p(C(g.name),1)]),_:1},8,["items","get","set","del"])]),_:1},8,["modelValue"])):m("",!0)])}const is=_(Ki,[["render",as],["__scopeId","data-v-1188997b"]]),ss={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},setup(){return{store:G()}},methods:{changed(){this.$emit("catalogueChanged")},profileNameChanged(){const e=this.item.links||[];for(const t of e)t.typeId===this.item.id&&(t.typeName=this.item.name,this.store.set_catalogue_changed(t.catalogue));this.$emit("catalogueChanged")},profileIdChanged(){const e=this.item.links||[];for(const t of e)t.typeName===this.item.name&&(t.typeId=this.item.id,this.store.set_catalogue_changed(t.catalogue));this.$emit("catalogueChanged")}}};function os(e,t,n,s,r,a){const d=O,l=D,g=is;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section",onNamechanged:a.profileNameChanged,onIdchanged:a.profileIdChanged},null,8,["item","onCatalogueChanged","onNamechanged","onIdchanged"]),h(g,{class:"section",item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])],64)}const ls=_(ss,[["render",os]]),rs={props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},valueField:{type:String,default:""},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},default:{type:Object},nullable:{type:Boolean,default:!1}},created(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,sleeping:this.lazy}},computed:{computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const e=this.textSearchRegex(this.searchPattern),t=[];this.nullable&&t.push({option:void 0});const n=this.computedOptions,s=this.max||n.length;for(let r=0;r<n.length;r++){const a=n[r];let d=this.getField(a);if(d&&d.match&&d.match(e)&&(t.push({option:a}),t.length>=s-1))break}return t}},methods:{getField(e){return this.filterField?this.filterField instanceof Function?this.filterField(e):e[this.filterField]:e},escapeRegex(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(e){const n=`^(?=.*\\b${this.escapeRegex(e).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(n,"i")},targetSelected(e){var s;let t=e.option;this.valueField.length&&(this.nullable&&!e.option?t=void 0:t=e.option[this.valueField]);const n=(s=this.selectedOption)==null?void 0:s.option;this.selectedOption={option:e.option,selected:!0},this.$emit("update:modelValue",t),this.$emit("change",e.option,n)},reset(){if(this.searchPattern="",this.selectedOption=null,this.modelValue){let e=this.computedOptions.find(t=>{let n=t;return this.valueField&&(n=t[this.valueField]),n===this.modelValue});e?this.selectedOption={option:e,selected:!0}:this.selectedOption=null}},onClickOutside(){this.editing=!1},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},clicked(){this.editing=!1},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},watch:{options(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},modelValue(){this.editing||(this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset())},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const ds={class:"autocomplete container"},us=["placeholder"],cs={key:0,class:"gray"},gs=["onClickCapture"];function ms(e,t,n,s,r,a){const d=Re("click-outside");return o(),u("div",ds,[r.editing?b((o(),u("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",onInput:t[0]||(t[0]=(...l)=>a.suggest&&a.suggest(...l)),onClick:t[1]||(t[1]=(...l)=>a.maySuggest&&a.maySuggest(...l)),"onUpdate:modelValue":t[2]||(t[2]=l=>r.searchPattern=l),placeholder:n.placeholder},null,40,us)),[[I,r.searchPattern],[d,a.onClickOutside]]):(o(),u("div",{key:1,onClick:t[3]||(t[3]=(...l)=>a.startEditing&&a.startEditing(...l)),class:"autocomplete-input"},[r.selectedOption?Q(e.$slots,"option",J(Me({key:1},r.selectedOption)),void 0,!0):(o(),u("span",cs,C(n.placeholder),1))])),i("div",{class:V(["suggestions",{hidden:!r.editing}])},[(o(!0),u(v,null,T(a.foundOptions,l=>(o(),u("div",{onClickCapture:g=>a.targetSelected(l)},[Q(e.$slots,"option",J(se(l)),void 0,!0)],40,gs))),256))],2)])}const ae=_(rs,[["render",ms],["__scopeId","data-v-8bb20fe3"]]),hs={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{publications(){return M([...this.catalogue.iteratePublications()],e=>(e==null?void 0:e.name)||"")}},methods:{getNameExtra:Z,getName:Y,changed(){this.$emit("catalogueChanged")}}},ps="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS0UrDhaU4pChOlkQFXHUKhShQqkVWnUwufQLmjQkKS6OgmvBwY/FqoOLs64OroIg+AHi6uKk6CIl/i8ptIjx4Lgf7+497t4BQqPCVLNrHFA1y0gn4mI2tyoGXxFAL4KIYFBipj6XSiXhOb7u4ePrXYxneZ/7c/QpeZMBPpF4lumGRbxBPL1p6Zz3icOsJCnE58RjBl2Q+JHrsstvnIsOCzwzbGTS88RhYrHYwXIHs5KhEk8RRxVVo3wh67LCeYuzWqmx1j35C0N5bWWZ6zSHkcAilpCCCBk1lFGBhRitGikm0rQf9/BHHH+KXDK5ymDkWEAVKiTHD/4Hv7s1C5MTblIoDgRebPtjBAjuAs26bX8f23bzBPA/A1da219tADOfpNfbWvQI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YuAV61tzeWvs4fQAy1FXyBjg4BEaLlL3u8e7uzt7+PdPq7wcllnKI7QJDVQAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFCwgaM9maQ54AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACEElEQVQ4y52RzWsTQRiHn9luvsBCFpomtISSBFRICAgeApUeipcWT176n/Tc/yPneggI3rwJfkCwhnoTP+LuyWw8JBnS2DXszoyHdbcJXtT3NHP4PfO8vxEAz1+8ND+Da/5mSuUKD+7fE8ndBrj+seD44SFaa4wxaK2JogilFEoptNYADIdDvvsj3gzemwRiARhj0mASMMaglCIMQ5bLJUEQsFgsePzomPHoG6/fXZrUQCuFZVn0+33y+TytVovBYEA2myWXyzGZTGi1WkynU87PzwHof3VvVtBaI4Sg0+mkNsk5sQjDkP39fbTWFAoFXvXfrgMAut0u5XKZdrvN2dkZhUKBer2O4zicnJzQ6/UolUo0m800YwMoFRscHR1hjKFara6FXdclk8lweBgXvbu7y4cv8QpWDFAIIfB9HyklQoi18Gg0YmNjg/F4jJQSy7JQSq0Y6Biws7MTUy2L09PTtI/kh6rVKkopbNtG6VVAFAHgeR7FYpG9vT0uLi7I5XIATKdTDg4O8DyPWq0WA35n7NUV6vU6QGqTvF4sFhFC0Gg0MMasrWABRFGEEAIpJb7vr/WxXC7TXjzPS8/RqkEYhgghcBwHx3HWDADy+fwfhmEY3gDm8zmu6yKlZDabpX1UKhWCICAIAgCklCl0Pp/HsCdPn5nPnz6yuLriX+bW5ia379zF3ipts1Xa5n/nF4VfO8AW+/8fAAAAAElFTkSuQmCC",fs=i("legend",null,[i("img",{src:ps}),p(" Reference")],-1),Cs={class:"editorTable"},ys=i("td",null,"Publication:",-1),_s={class:"flex align-items flex-row"},As=["src"],bs={class:"inline"},vs={class:"grey"},ks=["src"],xs=i("span",{class:"inline"},"None",-1),ws=i("td",null,"Page:",-1);function Is(e,t,n,s,r,a){const d=ae;return o(),u("fieldset",null,[fs,i("table",Cs,[i("tr",null,[ys,i("td",null,[h(d,{options:a.publications,filterField:l=>l.getName(),valueField:"id",modelValue:n.item.publicationId,"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.publicationId=l),onChange:a.changed,nullable:""},{option:x(({option:l})=>[i("div",_s,[l?(o(),u(v,{key:0},[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${l.editorTypeName}.png`},null,8,As),i("span",bs,[p(C(a.getName(l))+" ",1),i("span",vs,C(a.getNameExtra(l)),1)])],64)):(o(),u(v,{key:1},[i("img",{class:"mr-1 my-auto",src:"assets/bsicons/bullet.png"},null,8,ks),xs],64))])]),_:1},8,["options","filterField","modelValue","onChange"])])]),i("tr",null,[ws,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>n.item.page=l),onChange:t[2]||(t[2]=(...l)=>a.changed&&a.changed(...l))},null,544),[[I,n.item.page]])])])])])}const W=_(hs,[["render",Is]]),Es={emits:["catalogueChanged"],setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},methods:{changed(){this.$emit("catalogueChanged")},add(e,t){this.store.create_child("constraints",this.item,{type:e,scope:t,value:1,select:!1})}}};const R=e=>(U("data-v-07f16148"),e=e(),P(),e),Ts=R(()=>i("legend",null,[i("img",{src:tt}),p(" Quick Constraints")],-1)),Fs={class:"columns"},Ss={class:"column"},Rs=R(()=>i("img",{src:S},null,-1)),Ns=R(()=>i("span",{class:"text"},"MIN 1 IN PARENT",-1)),Vs=[Rs,Ns],Bs=R(()=>i("img",{src:S},null,-1)),Us=R(()=>i("span",{class:"text"},"MIN 1 IN CATEGORY",-1)),Ps=[Bs,Us],Os=R(()=>i("img",{src:S},null,-1)),Ls=R(()=>i("span",{class:"text"},"MIN 1 IN FORCE",-1)),Qs=[Os,Ls],qs=R(()=>i("img",{src:S},null,-1)),Gs=R(()=>i("span",{class:"text"},"MIN 1 IN ROSTER",-1)),Ds=[qs,Gs],Ks={class:"column"},js=R(()=>i("img",{src:S},null,-1)),Zs=R(()=>i("span",{class:"text"},"MAX 1 IN PARENT",-1)),Ms=[js,Zs],Ys=R(()=>i("img",{src:S},null,-1)),Xs=R(()=>i("span",{class:"text"},"MAX 1 IN CATEGORY",-1)),Ws=[Ys,Xs],zs=R(()=>i("img",{src:S},null,-1)),Hs=R(()=>i("span",{class:"text"},"MAX 1 IN FORCE",-1)),Js=[zs,Hs],$s=R(()=>i("img",{src:S},null,-1)),eo=R(()=>i("span",{class:"text"},"MAX 1 IN ROSTER",-1)),to=[$s,eo],no={class:"column"},ao=R(()=>i("img",{src:S},null,-1)),io=R(()=>i("span",{class:"text"},"EXACTLY 1 IN PARENT",-1)),so=[ao,io],oo=R(()=>i("img",{src:S},null,-1)),lo=R(()=>i("span",{class:"text"},"EXACTLY 1 IN CATEGORY",-1)),ro=[oo,lo],uo=R(()=>i("img",{src:S},null,-1)),co=R(()=>i("span",{class:"text"},"EXACTLY 1 IN FORCE",-1)),go=[uo,co],mo=R(()=>i("img",{src:S},null,-1)),ho=R(()=>i("span",{class:"text"},"EXACTLY 1 IN ROSTER",-1)),po=[mo,ho];function fo(e,t,n,s,r,a){return o(),u("fieldset",null,[Ts,i("div",Fs,[i("div",Ss,[i("button",{class:"bouton",onClick:t[0]||(t[0]=d=>a.add("min","parent"))},Vs),n.withCategory?(o(),u("button",{key:0,class:"bouton",onClick:t[1]||(t[1]=d=>a.add("min","parent"))},Ps)):m("",!0),i("button",{class:"bouton",onClick:t[2]||(t[2]=d=>a.add("min","force"))},Qs),i("button",{class:"bouton",onClick:t[3]||(t[3]=d=>a.add("min","roster"))},Ds)]),i("div",Ks,[i("button",{class:"bouton",onClick:t[4]||(t[4]=d=>a.add("max","parent"))},Ms),n.withCategory?(o(),u("button",{key:0,class:"bouton",onClick:t[5]||(t[5]=d=>a.add("max","parent"))},Ws)):m("",!0),i("button",{class:"bouton",onClick:t[6]||(t[6]=d=>a.add("max","force"))},Js),i("button",{class:"bouton",onClick:t[7]||(t[7]=d=>a.add("max","roster"))},to)]),i("div",no,[i("button",{class:"bouton",onClick:t[8]||(t[8]=d=>a.add("exactly","parent"))},so),n.withCategory?(o(),u("button",{key:0,class:"bouton",onClick:t[9]||(t[9]=d=>a.add("exactly","parent"))},ro)):m("",!0),i("button",{class:"bouton",onClick:t[10]||(t[10]=d=>a.add("exactly","force"))},go),i("button",{class:"bouton",onClick:t[11]||(t[11]=d=>a.add("exactly","roster"))},po)])])])}const ue=_(Es,[["render",fo],["__scopeId","data-v-07f16148"]]),Co={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function yo(e,t,n,s,r,a){const d=O,l=D,g=W,c=te,f=ue;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const _o=_(Co,[["render",yo]]),Ao={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function bo(e,t,n,s,r,a){const d=O,l=D,g=W,c=te,f=ue;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{item:n.item,onCatalogueChanged:a.changed,withCategory:!0,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const vo=_(Ao,[["render",bo]]),ko={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{getName:Y,getNameExtra:Z,changedType(e,t){this.item.getCatalogue().refreshErrors(this.item),t&&this.catalogue.removeRef(this.item,t),e&&this.catalogue.addRef(this.item,e),this.$emit("catalogueChanged")},changed(){this.$emit("catalogueChanged")}},computed:{profileTypes(){return[...this.catalogue.iterateProfileTypes()]},charactacteristics(){var s;const e={};for(const r of this.item.characteristics||[])e[r.name]=r.$text;if(!this.item.typeId)return[];const t=this.catalogue.findOptionById(this.item.typeId);this.item.isLink()||(this.item.typeName=t==null?void 0:t.name);const n=(s=t==null?void 0:t.characteristicTypes)==null?void 0:s.map(r=>({name:r.name,typeId:r.id,$text:e[r.name]||""}));return this.item.characteristics=n,n}}},xo=i("legend",null,"Characteristics",-1),wo={class:"editorTable"},Io=i("td",null,"Profile Type: ",-1),Eo={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},To=["src"],Fo={class:"inline"},So={class:"grey"},Ro={class:"editorTable"};function No(e,t,n,s,r,a){const d=ae,l=Ce;return o(),u("fieldset",null,[xo,i("table",wo,[i("tr",null,[Io,i("td",null,[h(d,{options:a.profileTypes,filterField:g=>g.getName(),valueField:"id",modelValue:n.item.typeId,"onUpdate:modelValue":t[0]||(t[0]=g=>n.item.typeId=g),onChange:a.changedType},{option:x(({option:g})=>[i("div",Eo,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${g.editorTypeName}.png`},null,8,To),i("span",Fo,[p(C(a.getName(g))+" ",1),i("span",So,C(a.getNameExtra(g)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])])])]),i("table",Ro,[(o(!0),u(v,null,T(a.charactacteristics,g=>(o(),u("tr",null,[i("td",null,C(g.name)+": ",1),i("td",null,[h(l,{modelValue:g.$text,"onUpdate:modelValue":c=>g.$text=c,onChange:a.changed},null,8,["modelValue","onUpdate:modelValue","onChange"])])]))),256))])])}const Vo=_(ko,[["render",No]]),Bo={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Uo(e,t,n,s,r,a){const d=O,l=D,g=W,c=te,f=Vo;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{class:"section",item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const Po=_(Bo,[["render",Uo]]),Oo={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Lo=i("legend",null,"Description",-1);function Qo(e,t,n,s,r,a){const d=Ce;return o(),u("fieldset",null,[Lo,h(d,{modelValue:n.item.description,"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.description=l),onChange:a.changed},null,8,["modelValue","onChange"])])}const qo=_(Oo,[["render",Qo]]),Go={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Do(e,t,n,s,r,a){const d=O,l=D,g=W,c=te,f=qo;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{class:"section",item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const Ko=_(Go,[["render",Do]]),jo={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{type:{get(){return this.item.subType??this.item.type},set(e){switch(e){case"model":case"upgrade":case"unit":default:this.item.type=e,delete this.item.subType;break;case"mount":case"crew":this.item.type="model",this.item.subType=e;break}}}}},Zo={class:"editorTable"},Mo=i("td",null,"Type:",-1),Yo=Ye('<option value="model">Model</option><option value="upgrade">Upgrade</option><option value="unit">Unit</option><option value="mount">Mount</option><option value="crew">Crew</option>',5),Xo=[Yo];function Wo(e,t,n,s,r,a){return o(),u("fieldset",null,[i("legend",null,[Q(e.$slots,"default")]),i("table",Zo,[i("tr",null,[Mo,i("td",null,[b(i("select",{"onUpdate:modelValue":t[0]||(t[0]=d=>a.type=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d))},Xo,544),[[j,a.type]])])])])])}const zo=_(jo,[["render",Wo]]),Ho={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{placeholder(){return`${this.item.isLink()&&this.item.getDefaultAmount()||"unset"}`}}};const it=e=>(U("data-v-202b280a"),e=e(),P(),e),Jo=it(()=>i("legend",null,"Creation",-1)),$o={class:"editorTable"},el=it(()=>i("td",null,"Default Amount:",-1)),tl=["placeholder"];function nl(e,t,n,s,r,a){return o(),u("fieldset",null,[Jo,i("table",$o,[i("tr",null,[el,i("td",null,[b(i("input",{class:"input",type:"number","onUpdate:modelValue":t[0]||(t[0]=d=>n.item.defaultAmount=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d)),placeholder:a.placeholder},null,40,tl),[[I,n.item.defaultAmount]])])])])])}const st=_(Ho,[["render",nl],["__scopeId","data-v-202b280a"]]),al={props:{modelValue:{type:[Number,String]},required:{type:Boolean,required:!1},min:{type:Number,required:!1},max:{type:Number,required:!1}},data(){return{stringValue:null,intValue:0}},watch:{modelValue(){this.refresh()}},created(){this.refresh()},methods:{refresh(){this.intValue=this.modelValue||0,this.stringValue=""+this.modelValue},update(){this.stringValue!=null&&(this.intValue=parseFloat(this.stringValue),this.$emit("update:modelValue",this.intValue),this.$emit("change"))}}},il=["required","min","max"];function sl(e,t,n,s,r,a){return b((o(),u("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>r.stringValue=d),type:"number",onChange:t[1]||(t[1]=(...d)=>a.update&&a.update(...d)),required:n.required,min:n.min,max:n.max},null,40,il)),[[I,r.stringValue]])}const ie=_(al,[["render",sl]]),ol={emits:["catalogueChanged"],data(){return{selectedCosts:{}}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{costTypes(){let e=[];for(let t of this.catalogue.iterateCostTypes())e.push(t);return e}},methods:{changed(){this.item.costs=Object.values(this.selectedCosts).filter(e=>isFinite(e.value)),this.$emit("catalogueChanged")},update(){this.selectedCosts={};const e=this.item.isLink()?void 0:0;for(let t of Object.values(this.costTypes))this.selectedCosts[t.id]={name:t.name,typeId:t.id,value:e};if(this.item.costs)for(let t of this.item.costs)this.selectedCosts[t.typeId]={name:t.name,typeId:t.typeId,value:t.value}}},watch:{item(){this.update()}}},ll="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9bi1IqIu0g4pChumhBVMRRq1CECqFWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIq4uToouU+L+k0CLGg+N+vLv3uHsH+BsVpppd44CqWUY6mRCyuVWh+xVBhNCPUUQkZupzopiC5/i6h4+vd3Ge5X3uz9Gr5E0G+ATiWaYbFvEG8fSmpXPeJ46ykqQQnxOPGXRB4keuyy6/cS467OeZUSOTnieOEgvFDpY7mJUMlXiKOKaoGuX7sy4rnLc4q5Uaa92TvzCc11aWuU5zCEksYgkiBMiooYwKLMRp1Ugxkab9hId/0PGL5JLJVQYjxwKqUCE5fvA/+N2tWZiccJPCCSD4Ytsfw0D3LtCs2/b3sW03T4DAM3Cltf3VBjDzSXq9rcWOgL5t4OK6rcl7wOUOMPCkS4bkSAGa/kIBeD+jb8oBkVsgtOb21trH6QOQoa5SN8DBITBSpOx1j3f3dPb275lWfz9cmHKeGGO3IgAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFChEuDQiaUlgAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACRElEQVQoz52Sz0tUURiGn3vvuTqNdU3noiiYZYQgSgYGhiFCRAYWUYFGf0GL/A9atwnaVBtrmWZllouSJAlqEVmLcuGi0JiZmh+W5jRzdeacc2+LscGplX1wFud7z/vwfh/HePpkLNjI/OB/KuREEOs/lzlzbgjty22ZLdPm8cQ9hO8HSJVnavzutgCnBy/i+wHC9zVaKVpaWqipqys9WE6liC4t4TgO+1tbMS2rpK2m02il8H2NqbVCaYXWGqe2tnRezs4ipSQcDjMzPV2maa03PQpTa42SEqUU6WSSZ48mSSeTmIZJc3MzpmmS/ZUt05RSKCnRWiOULCaQUrKrupq+k/3FJdkCz/OIRqNkc9kybTkeR2mFkgqhtUKpIm05kSjN2dvXR3J+lAP1Idr21vJ1fhxUhgojQ/67gVIH0Voh/sRfXFykauE+DU0u2tiBl8tTyMQ4OjhMIZcjGVvADgq47k6mJj6WxhCe52GaBscGBoi/jdPTf6JkyK34zM/Nkc8XSCdiVAqIuA772nswTQPP8xAFM8zIjVsAVHifqNzdhNY+2TWPencPHYc7ikC3EjtYwXUFd26/IPVqjXCkEdF76gKpxDeklHx+fp2u7rbNBBvElqK8e2OVgJZhE0/bhBqPcKjjPPUNjRhbf9fNa1eCiBXFDoURlk3sS5xLw2e37KCYYGR0lctXJw0AsRXQdXyITGaNICje88mHPBibwQ5VISyB2jCQ6ymMmk5gEqA8wd/1+v2HwMvl/uk7jkN3Z7sB8BurPj/243CaIgAAAABJRU5ErkJggg==";const rl=e=>(U("data-v-e81b0337"),e=e(),P(),e),dl=rl(()=>i("legend",null,[i("img",{src:ll}),p(" Costs")],-1)),ul={class:"costs"};function cl(e,t,n,s,r,a){const d=ie;return o(),u("fieldset",null,[dl,i("div",ul,[(o(!0),u(v,null,T(a.costTypes,l=>(o(),u("div",null,[i("label",null,C(l.name)+": ",1),r.selectedCosts[l.id]!=null?(o(),A(d,{key:0,modelValue:r.selectedCosts[l.id].value,"onUpdate:modelValue":g=>r.selectedCosts[l.id].value=g,class:"input",onChange:a.changed,placeholder:"unset"},null,8,["modelValue","onUpdate:modelValue","onChange"])):m("",!0)]))),256))])])}const ot=_(ol,[["render",cl],["__scopeId","data-v-e81b0337"]]),gl={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{fields(){return[{name:"Hidden",status:this.hidden,field:"hidden"},{name:"Collective",status:this.collective,field:"collective",title:"indicates that multiple instances of this entry may be combined into one entry with an amount"},{name:"Import",status:this.eimport,field:"import",title:"Indicates that this entry may be imported by other catalogues"},{name:"Flatten",status:this.alphasort,field:"flatten",title:"If this is checked, the group box for this entry/group will not be visible in the New Recruit UI."}]},hidden(){return!0},alphasort(){return this.item.editorTypeName==="selectionEntry"||this.item.editorTypeName==="selectionEntryLink"||this.item.editorTypeName==="selectionEntryGroup"||this.item.editorTypeName==="selectionEntryGroupLink"?1:0},collective(){var e;if((e=this.item.parent)!=null&&e.isCatalogue()){const t=this.item.parentKey;if(t==="selectionEntries"||t==="entryLinks")return 0}switch(this.item.editorTypeName){case"selectionEntryLink":return 1;case"selectionEntryGroupLink":return 1;case"selectionEntry":return 1;case"selectionEntryGroup":return 1;case"categoryLink":return-1;case"infoLink":return-1;case"profileLink":return-1;case"ruleLink":return-1;case"infoGroupLink":return-1}return 1},eimport(){var e;if((e=this.item.parent)!=null&&e.isCatalogue())return 1;switch(this.item.editorTypeName){case"selectionEntryLink":return 0;case"selectionEntryGroupLink":return 0;case"selectionEntry":return 0;case"selectionEntryGroup":return 0;case"categoryLink":return-1;case"infoLink":return-1;case"profileLink":return-1;case"ruleLink":return-1;case"infoGroupLink":return-1}return 0}}};const ml={class:"booleans"},hl=["id","onUpdate:modelValue","disabled"],pl=["for","title"];function fl(e,t,n,s,r,a){return o(),u("fieldset",null,[i("legend",null,[Q(e.$slots,"default",{},void 0,!0)]),i("div",ml,[(o(!0),u(v,null,T(a.fields.filter(d=>d.status!=-1),d=>(o(),u("div",null,[b(i("input",{class:V({"cursor-pointer":d.status!==0}),id:d.field,type:"checkbox","onUpdate:modelValue":l=>n.item[d.field]=l,onChange:t[0]||(t[0]=(...l)=>a.changed&&a.changed(...l)),disabled:d.status==0},null,42,hl),[[q,n.item[d.field]]]),i("label",{class:V({"cursor-pointer":d.status!==0,gray:d.status==0,hastooltip:!!d.title}),for:d.field,title:d.title},C(d.name),11,pl)]))),256))])])}const Ve=_(gl,[["render",fl],["__scopeId","data-v-c4b0fd89"]]),Cl={},yl={"aria-hidden":"true",height:"16",viewBox:"0 0 16 16",version:"1.1",width:"16","data-view-component":"true",class:"octicon octicon-tag"},_l=i("path",{d:"M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"},null,-1),Al=[_l];function bl(e,t){return o(),u("svg",yl,Al)}const lt=_(Cl,[["render",bl]]),vl={props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},focus:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},always:{type:Boolean,default:!1}},created(){this.lazy||this.reset()},data(){return{searchPattern:"",selected:0,lastSearch:null,editing:!1,sleeping:this.lazy,bounce:!1}},computed:{boundedSelected(){return qe(this.selected,0,this.always?this.foundOptions.length:this.foundOptions.length-1)},computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const e=this.textSearchRegex(this.searchPattern),t=[];this.nullable&&t.push({option:void 0});const n=this.computedOptions,s=this.max||n.length;for(let r=0;r<n.length;r++){const a=n[r];let d=this.getField(a);if(d&&d.match&&d.match(e)&&(t.push({option:a}),t.length>=s-1))break}return t}},methods:{fix(e){return qe(e,0,this.always?this.foundOptions.length:this.foundOptions.length-1)},blur(){this.editing=!1,this.$emit("blur")},onUp(){this.selected=this.fix(this.selected-1),this.$nextTick(()=>{const e=this.$refs.suggestions.getElementsByClassName("selected")[0];e==null||e.scrollIntoView({block:"nearest",inline:"center"})})},onDown(){this.selected=this.fix(this.selected+1),this.$nextTick(()=>{const e=this.$refs.suggestions.getElementsByClassName("selected")[0];e==null||e.scrollIntoView({block:"nearest",inline:"center"})})},onEnter(){this.bounce||(this.bounce=!0,this.always&&this.selected===this.foundOptions.length?this.$emit("always",this.searchPattern):this.targetSelected(this.foundOptions[this.boundedSelected]),this.reset())},onEnterUp(){this.bounce=!1},getField(e){return this.filterField?this.filterField instanceof Function?this.filterField(e):e[this.filterField]:e},escapeRegex(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(e){const n=`^(?=.*\\b${this.escapeRegex(e).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(n,"i")},targetSelected(e){console.log("selected",e),this.$emit("add",e.option)},targetSelectedRightClick(e,t){e.preventDefault(),e.stopPropagation(),console.log("selected (right click)",t),this.$emit("add-special",t.option)},reset(){this.searchPattern=""},onClickOutside(){this.blur()},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},mounted(){this.focus&&setTimeout(()=>{var e;(e=this.$refs.edit)==null||e.focus(),this.startEditing()},0)},watch:{options(){this.lazy||this.reset()},searchPattern(e,t){(e??"")!==(t??"")&&(this.selected=0,this.$emit("update:modelValue",e),this.$emit("change"))},modelValue:{immediate:!0,handler(e){this.searchPattern=e??""}},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const kl=e=>(U("data-v-e16f99ab"),e=e(),P(),e),xl=["placeholder"],wl={class:"gray"},Il=kl(()=>i("span",{class:"float-right bold"},"+",-1)),El=["onClickCapture","onContextmenuCapture"],Tl=["onClick","onContextmenu"];function Fl(e,t,n,s,r,a){const d=Re("click-outside");return o(),u("div",{class:"autocomplete relative",onKeydown:[t[7]||(t[7]=re(N((...l)=>a.onDown&&a.onDown(...l),["prevent"]),["down"])),t[8]||(t[8]=re(N((...l)=>a.onUp&&a.onUp(...l),["prevent"]),["up"])),t[9]||(t[9]=re(N((...l)=>a.onEnter&&a.onEnter(...l),["prevent"]),["enter"])),t[11]||(t[11]=re(l=>a.blur(),["escape"]))],onKeyup:t[10]||(t[10]=re(N((...l)=>a.onEnterUp&&a.onEnterUp(...l),["prevent"]),["enter"]))},[r.editing?b((o(),u("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",autofocus:"",onInput:t[0]||(t[0]=(...l)=>a.suggest&&a.suggest(...l)),onClick:t[1]||(t[1]=(...l)=>a.maySuggest&&a.maySuggest(...l)),onFocus:t[2]||(t[2]=(...l)=>a.startEditing&&a.startEditing(...l)),"onUpdate:modelValue":t[3]||(t[3]=l=>r.searchPattern=l),placeholder:n.placeholder},null,40,xl)),[[I,r.searchPattern],[d,a.onClickOutside]]):(o(),u("div",{key:1,onClick:t[4]||(t[4]=(...l)=>a.startEditing&&a.startEditing(...l)),class:"autocomplete-input"},[i("span",wl,C(n.placeholder),1),Il])),b(i("div",{class:V(["suggestions",{hidden:!r.editing}]),ref:"suggestions"},[(o(!0),u(v,null,T(a.foundOptions,(l,g)=>(o(),u(v,null,[g===a.boundedSelected?(o(),u("div",{key:0,class:"suggestion selected",onClickCapture:N(c=>a.targetSelected(l),["stop"]),onContextmenuCapture:c=>a.targetSelectedRightClick(c,l)},[Q(e.$slots,"option",J(se({...l,selected:!0})),void 0,!0)],40,El)):(o(),u("div",{key:1,class:"suggestion",onClick:N(c=>a.targetSelected(l),["stop"]),onContextmenu:N(c=>a.targetSelectedRightClick(c,l),["prevent"])},[Q(e.$slots,"option",J(se(l)),void 0,!0)],40,Tl))],64))),256)),n.always?(o(),u("div",{key:0,class:V(["suggestion",{selected:r.selected===a.foundOptions.length}]),onClick:t[5]||(t[5]=l=>e.$emit("always",r.searchPattern)),onContextmenu:t[6]||(t[6]=N(l=>e.$emit("always-special",r.searchPattern),["prevent"]))},[Q(e.$slots,"always",J(se({input:r.searchPattern})),void 0,!0)],34)):m("",!0)],2),[[he,r.editing]])],32)}const Sl=_(vl,[["render",Fl],["__scopeId","data-v-e16f99ab"]]),Rl=$({components:{AutocompleteTags:Sl,Tag:lt,ContextMenu:ye},props:{item:{type:Object,required:!0}},data(){return{input:"",adding:!1,contextmenuopen:!1,selectedCategory:null,selectedCategoryParent:null}},setup(){return{store:G(),settings:de()}},computed:{catalogue(){return this.item.catalogue},targetCategories(){var e;return(((e=this.item.target)==null?void 0:e.categoryLinks)||[]).filter(t=>!t.primary)},ownCategories(){return(this.item.categoryLinks||[]).filter(e=>!e.primary)},targetPrimaryCategories(){var e;return(((e=this.item.target)==null?void 0:e.categoryLinks)||[]).filter(t=>t.primary)},ownPrimaryCategories(){return(this.item.categoryLinks||[]).filter(e=>e.primary)}},methods:{getNameExtra:Z,makePrimary(e,t){var n;(n=t.categoryLinks)==null||n.forEach(s=>s.primary=!1),e.primary=!0},makeSecondary(e){e.primary=!1},context(e,t){this.contextmenuopen=!0,this.selectedCategory=t,this.selectedCategoryParent=this.item,this.$nextTick(()=>{var n;(n=this.$refs.contextmenu)==null||n.show(e)})},linked_context(e,t){if(!this.item.target){console.error("Cant open context menu for a category on the target: Couldn't find target");return}this.contextmenuopen=!0,this.selectedCategory=t,this.selectedCategoryParent=this.item.target,this.$nextTick(()=>{var n;(n=this.$refs.contextmenu)==null||n.show(e)})},refreshCategories(e,t,n){e.categoryLinks||(e.categoryLinks=[]);const s=e.categoryLinks;if(n&&s.forEach(r=>r.primary=!1),t){const r=s.find(a=>a.targetId===(t==null?void 0:t.id));r&&n?r.primary=!0:r?this.removeLink(s,r):this.addLink(s,t,n)}},removeLink(e,t){const n=e.findIndex(s=>s===t);if(n!==-1){const[s]=e.splice(n,1);this.catalogue.removeFromIndex(s);const r=s.target.links;if(r){const a=r==null?void 0:r.findIndex(d=>d===s);a!==-1&&(r==null||r.splice(a,1))}}},addLink(e,t,n=!1){var a;if(!t.isCategory())throw Error("Invalid argument, target must be a category");const s=Xe({targetId:t.id,target:t,id:this.item.catalogue.generateNonConflictingId(),primary:n,catalogue:this.item.catalogue,name:t.name},"categoryLinks");e.push(s),this.catalogue.addToIndex(s);const r=t;return r.links||(r.links=[]),(a=r.links)==null||a.push(s),s},allCategories(){const e=new Set;for(const n of this.item.categoryLinks||[])e.add(n.getId());const t=[];for(const n of this.item.catalogue.iterateCategoryEntries())e.has(n.getId())||t.push(n);return t},addCategory(e){this.item.categoryLinks||(this.item.categoryLinks=[]);const t=this.item.categoryLinks,n=t.find(s=>s.targetId===e.getId());return n||this.addLink(t,e,!1)},addCategoryAndMakePrimary(e){const t=this.addCategory(e);this.makePrimary(t,this.item)},removeCategory(e){this.item.categoryLinks||(this.item.categoryLinks=[]);const t=this.item.categoryLinks,n=t.find(s=>s.targetId===e.getId());n&&this.removeLink(t,n)},async createCategory(e,t=!1){var d;const n=this.item.catalogue,s="categoryEntries",r={...this.store.get_initial_object(s,n),name:e,id:pe()};await this.store.add(r,s,n);const a=(d=this.item.catalogue.categoryEntries)==null?void 0:d.find(l=>l.name===e);if(a)return t?this.addCategoryAndMakePrimary(a):this.addCategory(a)},async createPrimaryCategory(e){await this.createCategory(e,!0)},gotoCategory(e){const t=this.catalogue.findOptionById(e.id);t&&this.store.goto(t)}}});const Ae=e=>(U("data-v-5b8b2533"),e=e(),P(),e),Nl=["onContextmenu"],Vl=Ae(()=>i("span",{class:"primary bold"}," Primary ",-1)),Bl={class:"name"},Ul=["onClick"],Pl=["onContextmenu"],Ol={class:"name"},Ll=["onClick"],Ql={key:1,class:"gray"},ql={class:"py-1px rounded-8px bg-lime-400"},Gl={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},Dl={class:"gray"},Kl={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},jl=Ae(()=>i("span",null,"Create: ",-1)),Zl={key:0,class:"align-top mt-4px"},Ml=Ae(()=>i("img",{src:_e},null,-1)),Yl=["onContextmenu"],Xl=Ae(()=>i("span",{class:"primary bold"}," Primary ",-1)),Wl={class:"name"},zl=["onClick"],Hl=["onContextmenu"],Jl={class:"name"},$l=["onClick"],er={class:"gray"};function tr(e,t,n,s,r,a){var c,f;const d=B("Tag"),l=B("AutocompleteTags"),g=B("ContextMenu");return o(),u("div",{class:V({dark:e.settings.isDarkTheme})},[i("div",null,[(c=e.ownCategories)!=null&&c.length||(f=e.ownPrimaryCategories)!=null&&f.length?(o(),u(v,{key:0},[(o(!0),u(v,null,T(e.ownPrimaryCategories,k=>(o(),u("div",{class:"label hover-brighten",onContextmenu:N(y=>e.context(y,k),["stop"])},[Vl,i("span",Bl,C(k.getName()),1),i("span",{class:"cursor-pointer hover-darken px-5px rounded-8px",onClick:y=>e.removeCategory(k)},"×",8,Ul)],40,Nl))),256)),(o(!0),u(v,null,T(e.ownCategories,k=>(o(),u("div",{class:"label",onContextmenu:N(y=>e.context(y,k),["stop"])},[i("span",Ol,C(k.getName()),1),i("span",{class:"cursor-pointer hover-darken px-5px rounded-8px",onClick:y=>e.removeCategory(k)},"×",8,Ll)],40,Pl))),256))],64)):(o(),u("span",Ql," None ")),i("span",ql,[e.adding?m("",!0):(o(),u("span",{key:0,class:"px-5px py-1px rounded-8px cursor-pointer hover-darken",onClick:t[0]||(t[0]=k=>e.adding=!0),style:je({color:e.settings.isDarkTheme?"black":"white"})},"+",4))]),e.adding?(o(),A(l,{key:2,modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=k=>e.input=k),onBlur:t[2]||(t[2]=k=>e.adding=!1),focus:"",class:"inline-block",lazy:"",always:!!e.input.trim()&&!e.allCategories().find(k=>k.name===e.input),options:e.allCategories,dark:e.settings.isDarkTheme,placeholder:"Search... (Right click = Primary)",filterField:k=>k.getName(),onAdd:e.addCategory,onAddSpecial:e.addCategoryAndMakePrimary,onAlways:e.createCategory,onAlwaysSpecial:e.createPrimaryCategory},{option:x(({option:k,selected:y})=>[i("div",Gl,[k!=null&&k.name?(o(),u(v,{key:0},[h(d,{class:"icon"}),i("span",null,[p(" "+C(k.name),1),i("span",Dl," ["+C(k.catalogue.name)+"]",1)])],64)):m("",!0)])]),always:x(({input:k})=>[i("div",Kl,[jl,p("  "),h(d,{class:"icon"}),i("span",null," "+C(k),1)])]),_:1},8,["modelValue","always","options","dark","filterField","onAdd","onAddSpecial","onAlways","onAlwaysSpecial"])):m("",!0)]),e.targetCategories.length||e.targetPrimaryCategories.length?(o(),u("div",Zl,[Ml,p(" From Target: "),(o(!0),u(v,null,T(e.targetPrimaryCategories,k=>(o(),u("span",{class:"label",onContextmenu:N(y=>e.linked_context(y,k),["stop"])},[Xl,i("span",Wl,C(k.getName()),1),p(" "),i("span",{class:"cursor-pointer hover-darken px-3px rounded-2px",onClick:y=>e.removeCategory(k)},"×",8,zl)],40,Yl))),256)),(o(!0),u(v,null,T(e.targetCategories,k=>(o(),u("span",{class:"label",onContextmenu:N(y=>e.linked_context(y,k),["stop"])},[i("span",Jl,C(k.getName()),1),p(" "),i("span",{class:"cursor-pointer hover-darken px-3px rounded-2px",onClick:y=>e.removeCategory(k)},"×",8,$l)],40,Hl))),256))])):m("",!0),e.contextmenuopen&&e.selectedCategory&&e.selectedCategoryParent?(o(),A(g,{key:1,modelValue:e.contextmenuopen,"onUpdate:modelValue":t[6]||(t[6]=k=>e.contextmenuopen=k),ref:"contextmenu"},{default:x(()=>{var k;return[e.selectedCategory.primary?m("",!0):(o(),u("div",{key:0,onClick:t[3]||(t[3]=y=>e.makePrimary(e.selectedCategory,e.selectedCategoryParent))}," Make Primary: "+C(e.selectedCategory.getName()),1)),e.selectedCategory.primary?(o(),u("div",{key:1,onClick:t[4]||(t[4]=y=>e.makeSecondary(e.selectedCategory))}," Make Secondary: "+C(e.selectedCategory.getName()),1)):m("",!0),i("div",{onClick:t[5]||(t[5]=y=>e.gotoCategory(e.selectedCategory))},[p(" Goto "+C(e.selectedCategory.getName())+" ",1),i("span",er,"  ("+C((k=e.selectedCategory.catalogue)==null?void 0:k.getName())+") ",1)])]}),_:1},8,["modelValue"])):m("",!0)],2)}const nr=_(Rl,[["render",tr],["__scopeId","data-v-5b8b2533"]]),ar=$({props:{category:{required:!0,type:Object},item:{type:Object,required:!0}},setup(){return{store:G()}},data(){return{contextmenuopen:!1}},methods:{menu(e){return{show:(t,n)=>{this.contextmenuopen=!0,this.$nextTick(()=>{var s;(s=this.$refs[e])==null||s.show(t,n)})},close:(t,n)=>{var s;(s=this.$refs[e])==null||s.close(t,n),this.contextmenuopen=!1}}},hasCategory(e){var n;let t=(n=this.item.categoryLinks)==null?void 0:n.find(s=>{var r;return((r=s.target)==null?void 0:r.id)===e.id});return t?t.primary?2:1:0}},computed:{contextmenu(){return this.menu("contextmenu")}},components:{ContextMenu:ye}});const ir=["checked"],sr=["id","checked"],or=["for"],lr={class:"gray"},rr={class:"gray"};function dr(e,t,n,s,r,a){const d=B("ContextMenu");return o(),u("div",{class:"category",onContextmenu:t[4]||(t[4]=N((...l)=>e.contextmenu.show&&e.contextmenu.show(...l),["stop"]))},[i("div",null,[i("input",{name:"primary",type:"radio",checked:e.hasCategory(e.category)==2,onChange:t[0]||(t[0]=l=>e.$emit("primaryChanged",e.category))},null,40,ir),p(" Primary? ")]),i("div",null,[i("input",{id:`category-${e.category.id}`,type:"checkbox",checked:e.hasCategory(e.category)!=0,onChange:t[1]||(t[1]=l=>e.$emit("secondaryChanged",e.category))},null,40,sr),i("label",{for:`category-${e.category.id}`},[p(C(e.category.name),1),i("span",lr," ["+C(e.category.catalogue.name)+"]",1)],8,or)]),e.contextmenuopen?(o(),A(d,{key:0,modelValue:e.contextmenuopen,"onUpdate:modelValue":t[3]||(t[3]=l=>e.contextmenuopen=l),ref:"contextmenu"},{default:x(()=>{var l;return[i("div",{onClick:t[2]||(t[2]=g=>e.store.goto(e.category))},[p(" Goto "+C(e.category.getName())+" ",1),i("span",rr,"  ("+C((l=e.category.catalogue)==null?void 0:l.getName())+") ",1)])]}),_:1},8,["modelValue"])):m("",!0)],32)}const ur=_(ar,[["render",dr]]),cr={components:{Category:ur,Tag:lt},emits:["catalogueChanged"],data(){return{filter:"",primaries:new Set,secondaries:new Set}},setup(){return{settings:de()}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{hasCategory(e){var n;let t=(n=this.item.categoryLinks)==null?void 0:n.find(s=>{var r;return((r=s.target)==null?void 0:r.id)===e.id});return t?t.primary?2:1:0},primaryChanged(e){this.refreshCategories(this.item,e,!0)},secondaryChanged(e){this.refreshCategories(this.item,e,!1)},refreshCategories(e,t,n){e.categoryLinks||(e.categoryLinks=[]);const s=e.categoryLinks;if(n&&s.forEach(r=>r.primary=!1),t){const r=s.find(a=>a.targetId===(t==null?void 0:t.id));r&&n?r.primary=!0:r?this.removeLink(s,r):this.addLink(s,t,n)}this.changed()},removeLink(e,t){const n=e.findIndex(s=>s===t);if(n!==-1){const[s]=e.splice(n,1);this.catalogue.removeFromIndex(s);const r=s.target.links;if(r){const a=r==null?void 0:r.findIndex(d=>d===s);a!==-1&&(r==null||r.splice(a,1))}}},addLink(e,t,n=!1){var a;if(!t.isCategory())throw Error("Invalid argument, target must be a category");const s=Xe({targetId:t.id,target:t,id:this.catalogue.generateNonConflictingId(),primary:n,catalogue:this.catalogue,name:t.name},"categoryLinks");e.push(s),this.catalogue.addToIndex(s);const r=t;return r.links||(r.links=[]),(a=r.links)==null||a.push(s),s},changed(){this.$emit("catalogueChanged")},noPrimary(){let e=!0;if(this.item.categoryLinks){for(let t of this.item.categoryLinks)if(t.primary)return!1}return e}},computed:{badLinks(){const e=[],t=new Set;for(const n of this.catalogue.iterateCategoryEntries())t.add(n.id);for(const n of this.item.categoryLinks||[])t.has(n.targetId)||e.push(n);return e},count(){var e;return((e=this.item.categoryLinks)==null?void 0:e.length)||0},categories(){let e=[];for(let t of this.catalogue.iterateCategoryEntries())this.settings.showOnlyEnabledCategories&&this.hasCategory(t)==0||t.getName().toLowerCase().includes(this.filter.toLowerCase())&&e.push(t);return e}}};const gr=e=>(U("data-v-b6400f51"),e=e(),P(),e),mr={class:"inline"},hr={class:"section inline"},pr=gr(()=>i("label",{for:"onlyEnabled"},"Only show selected categories",-1)),fr={class:"section categoryList"},Cr=["checked"],yr=["checked","onChange"],_r=["id","onChange"],Ar=["for"];function br(e,t,n,s,r,a){const d=B("Tag"),l=nr,g=B("Category"),c=fe;return o(),u("fieldset",null,[i("legend",null,[i("div",mr,[h(d,{class:"icon"})]),p(" Categories ("+C(a.count)+") ",1)]),s.settings.useNewCategoriesUI?(o(),A(l,{key:0,item:n.item},null,8,["item"])):(o(),u(v,{key:1},[b(i("input",{class:"section",type:"text","onUpdate:modelValue":t[0]||(t[0]=f=>r.filter=f),placeholder:"Filter categories..."},null,512),[[I,r.filter]]),i("div",hr,[b(i("input",{type:"checkbox",id:"onlyEnabled","onUpdate:modelValue":t[1]||(t[1]=f=>s.settings.showOnlyEnabledCategories=f)},null,512),[[q,s.settings.showOnlyEnabledCategories]]),pr]),i("div",fr,[i("div",null,[i("input",{name:"primary",type:"radio",checked:a.noPrimary,onChange:t[2]||(t[2]=f=>a.primaryChanged(null))},null,40,Cr),p(" No Primary ")]),(o(!0),u(v,null,T(a.categories,f=>(o(),A(g,{category:f,item:n.item,key:f.id,onPrimaryChanged:a.primaryChanged,onSecondaryChanged:a.secondaryChanged},null,8,["category","item","onPrimaryChanged","onSecondaryChanged"]))),128)),(o(!0),u(v,null,T(a.badLinks,f=>(o(),u("div",{class:"category",key:f.id},[i("div",null,[i("input",{name:"primary",type:"radio",checked:a.hasCategory(f)==2,onChange:k=>a.primaryChanged(f)},null,40,yr),p(" Primary? ")]),i("div",null,[i("input",{id:`bad${f.id}`,type:"checkbox",checked:!0,onChange:k=>a.removeLink(n.item.categoryLinks,f)},null,40,_r),i("label",{for:`bad${f.id}`},C(f.name),9,Ar),h(c,{class:"ml-5px inline",errors:[{msg:`Couldn't find category with id: ${f.targetId}`,severity:"error"}]},null,8,["errors"])])]))),128))])],64))])}const Be=_(cr,[["render",br],["__scopeId","data-v-b6400f51"]]),vr=$({emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},setup(){return{store:G()}},computed:{get_sort_items(){return M([...this.item.iterateSelectionEntries()],e=>e.getName())}},methods:{changed(){this.$emit("catalogueChanged")},get(e){return e.sortIndex},set(e,t){e.sortIndex=t,this.store.set_catalogue_changed(e.catalogue,!0)},del(e){delete e.sortIndex,this.store.set_catalogue_changed(e.catalogue,!0)}},components:{SortOrder:at,Entry:We}}),kr={key:0,class:"mt-10px"},xr=i("legend",null,"Childs Order",-1);function wr(e,t,n,s,r,a){const d=B("Entry"),l=B("SortOrder");return e.get_sort_items.length>1?(o(),u("fieldset",kr,[xr,h(l,{items:e.get_sort_items,get:e.get,set:e.set,del:e.del},{item:x(({item:g})=>{var c;return[h(d,{item:g,noSortIndex:""},null,8,["item"]),((c=g.links)==null?void 0:c.length)>1?(o(),u(v,{key:0},[p(">1 refs")],64)):m("",!0)]}),_:1},8,["items","get","set","del"])])):m("",!0)}const Ue=_(vr,[["render",wr]]),Ir={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Er(e,t,n,s,r,a){const d=O,l=D,g=W,c=zo,f=st,k=ot,y=Ve,E=Be,L=ue,H=Ue;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Selection Entry ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(k,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(y,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),h(E,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(L,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"]),h(H,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const Tr=_(Ir,[["render",Er],["__scopeId","data-v-7c8d5ed1"]]),Fr={setup(){return{store:G()}},emits:["catalogueChanged"],data(){return{filter:"",val:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},computed:{allowEntries(){return!0},allowGroups(){var e;return!((e=this.item.parent)!=null&&e.isCatalogue()&&this.item.parentKey==="entryLinks")}},methods:{getNameExtra:Z,availableTargets(){if(this.type==="catalogue"){const t=this.catalogue.gameSystemId||this.catalogue.id;return Object.values(this.store.get_system(t).catalogueFiles).map(r=>({id:r.catalogue.id,name:r.catalogue.name,editorTypeName:"catalogueLink"})).filter(r=>r.id!==this.catalogue.id)}const e=[];for(const t of this.catalogue.iterateAllImported())this.targetIsValid(t)&&(t.isLink()||e.push(t));return M(e,t=>t.name)},typeChanged(){},targetIdChanged(){this.updateLink(),this.changed()},async updateLink(){var e;if(this.type==="catalogue"&&this.item.targetId){const t=this.catalogue.gameSystemId||this.catalogue.id;await this.catalogue.reload(this.store.get_system(t));const n=this.item.target;this.item.name=((e=this.item.target)==null?void 0:e.name)||"Unknown",this.item.type=(n==null?void 0:n.editorTypeName)||this.type}else{this.catalogue.updateLink(this.item);const t=this.item.target;this.item.name=(t==null?void 0:t.name)||"Unknown",this.item.type=(t==null?void 0:t.editorTypeName)||this.item.type}},changedImportRootEntries(){this.changed()},changed(){this.$emit("catalogueChanged")},getType(e){return e.target?e.target.editorTypeName:"bullet"},itemName(e){return e.name},itemValue(e){return e.name},targetIsValid(e){return this.item.type==null||this.item.type==="category"?e.editorTypeName=="category":e.editorTypeName==this.item.type},showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))}}},rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFKSURBVDhPpZLBSgJRFIbvuTtHXyBaWEG0TRxFCAJd9B6B4CLoXaKVLVr4FK3GTRGEMwvXYYPQI1TQ4D2d/3gVnEFh7IPBc37mHD2/P5kcH63WuVssBmxMT9pjaESUOmPGhnl4miQJtBXrBfNOp/KbZXdS9kUsLAaylGXJY4Xo9jCOv6Hpi374SZpL9CuOosgYa03a7cqojHsc80tAdIUlFgK+OT8MbK2mTx5LdPHDfK81bpbPPppSEF2/NxqhhWHbbt6FzhANrHd7L2RJDx7oX7UndTXxP4ihlPq6NHL+3Drnxr4vMGu3zSwMNzKQI7Li5FATVh5eED1YzbbE04sbnEwm+mxhdBbHb2oiss3Mzyp7bLXqq2Uic7wGWXaDYh2gz2Yz0HhKwnYEC6eOMHwwnX5BKLyIeCJhCIm0dWjqthiWyc342dCWGPMHCdh2fZxOhd0AAAAASUVORK5CYII=";const K=e=>(U("data-v-130fa048"),e=e(),P(),e),Sr=K(()=>i("legend",null,[i("img",{src:_e}),p(" Link")],-1)),Rr={class:"editorTable"},Nr={key:0},Vr=K(()=>i("td",null,"Link Type:",-1)),Br={key:0,value:"selectionEntry"},Ur={key:1,value:"selectionEntryGroup"},Pr={key:1},Or=K(()=>i("td",null,"Link Type:",-1)),Lr=K(()=>i("option",{value:"profile"},"Profile",-1)),Qr=K(()=>i("option",{value:"rule"}," Rule ",-1)),qr=K(()=>i("option",{value:"infoGroup"}," Info Group ",-1)),Gr=[Lr,Qr,qr],Dr=K(()=>i("td",null,"Link To:",-1)),Kr=["src"],jr=K(()=>i("img",{class:"errIcon",src:rt},null,-1)),Zr=K(()=>i("td",null,"Target ID:",-1)),Mr=K(()=>i("td",null,"Target:",-1)),Yr={style:{"white-space":"nowrap"}},Xr=["src"],Wr={class:"gray"},zr={key:0,class:"shared"},Hr={key:1,class:"catalogueName"},Jr={key:2},$r=K(()=>i("td",null,null,-1)),ed=K(()=>i("label",{for:"importRoot"},"Import Root Entries",-1));function td(e,t,n,s,r,a){const d=ae;return o(),u("fieldset",null,[Sr,i("table",Rr,[n.type=="entry"?(o(),u("tr",Nr,[Vr,i("td",null,[b(i("select",{onChange:t[0]||(t[0]=(...l)=>a.typeChanged&&a.typeChanged(...l)),"onUpdate:modelValue":t[1]||(t[1]=l=>n.item.type=l)},[a.allowEntries?(o(),u("option",Br,"Selection Entry")):m("",!0),a.allowGroups?(o(),u("option",Ur," Selection Entry Group ")):m("",!0)],544),[[j,n.item.type]])])])):m("",!0),n.type=="info"?(o(),u("tr",Pr,[Or,i("td",null,[b(i("select",{onChange:t[2]||(t[2]=(...l)=>a.typeChanged&&a.typeChanged(...l)),"onUpdate:modelValue":t[3]||(t[3]=l=>n.item.type=l)},Gr,544),[[j,n.item.type]])])])):m("",!0),i("tr",null,[Dr,i("td",null,[n.item.target?(o(),u(v,{key:0},[n.item.type?(o(),u("img",{key:0,class:"linkIcon",src:`assets/bsicons/${a.getType(n.item)}.png`},null,8,Kr)):m("",!0),p(" "+C(n.item.target.name),1)],64)):(o(),u(v,{key:1},[jr,p(" No target selected ")],64))])]),i("tr",null,[Zr,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>n.item.targetId=l),onChange:t[5]||(t[5]=(...l)=>a.targetIdChanged&&a.targetIdChanged(...l))},null,544),[[I,n.item.targetId]])])]),i("tr",null,[Mr,i("td",null,[h(d,{modelValue:n.item.targetId,"onUpdate:modelValue":t[6]||(t[6]=l=>n.item.targetId=l),placeholder:"Search Target...",options:a.availableTargets,valueField:"id",filterField:"name",onChange:a.targetIdChanged},{option:x(l=>[i("div",Yr,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${l.option.editorTypeName}.png`},null,8,Xr),p(" "+C(l.option.name)+" ",1),i("span",Wr,C(a.getNameExtra(l.option,!1)),1),l.option.shared?(o(),u("span",zr," (shared)")):m("",!0),a.showCatalogue(l.option)?(o(),u("span",Hr," ["+C(l.option.catalogue.name)+"]",1)):m("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange"])])]),n.type==="catalogue"?(o(),u("tr",Jr,[$r,i("td",null,[b(i("input",{onChange:t[7]||(t[7]=(...l)=>a.changedImportRootEntries&&a.changedImportRootEntries(...l)),id:"importRoot",type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>n.item.importRootEntries=l)},null,544),[[q,n.item.importRootEntries]]),ed])])):m("",!0)])])}const nd=_(Fr,[["render",td],["__scopeId","data-v-130fa048"]]),ad={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function id(e,t,n,s,r,a){const d=O,l=D,g=W,c=nd,f=ot,k=st,y=Ve,E=Be,L=ue,H=Ue;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),n.type!="catalogue"?(o(),A(g,{key:0,item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0),h(c,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section",type:n.type},null,8,["item","catalogue","onCatalogueChanged","type"]),n.item.editorTypeName=="selectionEntryLink"?(o(),A(f,{key:1,item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0),n.item.editorTypeName=="selectionEntryLink"?(o(),A(k,{key:2,item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0),n.type!="catalogue"?(o(),A(y,{key:3,item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Entry ")]),_:1},8,["item","onCatalogueChanged"])):m("",!0),n.item.editorTypeName=="selectionEntryLink"||n.item.editorTypeName=="selectionEntryGroupLink"?(o(),A(E,{key:4,item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0),n.type=="entry"||n.type=="category"?(o(),A(L,{key:5,item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])):m("",!0),n.type=="entry"?(o(),A(H,{key:6,item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0)],64)}const sd=_(ad,[["render",id]]),od={props:{modelValue:{type:Object},placeholder:{type:String,default:"Search..."},fetch:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},created(){this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,availableOptions:[]}},methods:{async foundOptions(){return(await this.fetch()).map(t=>({option:t}))},targetSelected(e){let t=e.option;this.selectedOption={option:e.option,selected:!0},this.$emit("update:modelValue",t),this.$emit("change",e.option),this.editing=!1},reset(){this.searchPattern="",this.selectedOption=null,this.modelValue&&(this.selectedOption={option:this.modelValue,selected:!0})},onClickOutside(){this.editing=!1},async startEditing(){this.disabled||(this.editing=!0,this.availableOptions=await this.foundOptions())},clicked(){this.editing=!1}}};const ld={key:0,class:"gray"},rd=["onClick"];function dd(e,t,n,s,r,a){const d=Re("click-outside");return o(),u("div",{class:V(["container",{disabled:n.disabled}])},[b((o(),u("div",{onClick:t[0]||(t[0]=(...l)=>a.startEditing&&a.startEditing(...l)),class:"iconselect-input"},[r.selectedOption?Q(e.$slots,"option",J(Me({key:1},r.selectedOption)),void 0,!0):(o(),u("span",ld,C(n.placeholder),1))])),[[d,a.onClickOutside]]),i("div",{class:V(["suggestions",{hidden:!r.editing}])},[(o(!0),u(v,null,T(r.availableOptions,l=>(o(),u("div",{onClick:g=>a.targetSelected(l)},[Q(e.$slots,"option",J(se(l)),void 0,!0)],8,rd))),256))],2)],2)}const dt=_(od,[["render",dd],["__scopeId","data-v-25b66910"]]),ud={selectionEntry:["costs","name","page","hidden","category","constraints"],selectionEntryLink:["costs","name","page","hidden","category","constraints"],selectionEntryGroup:["name","page","hidden","category","constraints","defaultSelectionEntryId"],selectionEntryGroupLink:["name","page","hidden","category","constraints","defaultSelectionEntryId"],profile:["characteristics","name","description","page","hidden"],profileLink:["characteristics","name","description","page","hidden"],rule:["name","description","page","hidden"],ruleLink:["name","description","page","hidden"],infoLink:["name","page","hidden"],infoGroup:["name","page","hidden"],infoGroupLink:["name","page","hidden"],force:["name","page","hidden","constraints"],category:["name","page","hidden","constraints"],categoryLink:["name","page","hidden","constraints"]},cd={costs:"number",name:"string",page:"string",hidden:"boolean",description:"string",category:"category",defaultSelectionEntryId:"defaultSelectionEntryId",constraints:"number"},gd={components:{ErrorIcon:fe},emits:["catalogueChanged"],data(){return{value:"",selectedField:null,selectedOperation:null,selectedValue:null}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{getName:Y,getNameExtra:Z,changed(){this.selectedField&&(this.item.field=this.selectedField.id),this.selectedOperation&&(this.item.type=this.selectedOperation.id),this.$emit("catalogueChanged")},getDefaultFieldValue(e,t,n){var s;switch(e){case"number":return typeof n=="number"?n:0;case"category":return this.allCategories[0].id;case"string":let r;if(t==="name"){const a=this.item;r=a.getName&&a.getName()||""}else r="";return typeof n=="string"?n:r;case"string-or-number":return["strint","number"].includes(typeof n)?n:"";case"boolean":return typeof n=="boolean"?n:!1;case"defaultSelectionEntryId":return(s=It(this.allGroupEntries))==null?void 0:s.id;default:throw Error(`fieldType "${e}" has no default value set"`)}},fieldChanged(){this.selectedOperation=this.operations[0],this.selectedField&&(this.item.value=this.getDefaultFieldValue(this.selectedField.type,this.selectedField.name,this.item.value)),this.changed()},update(){this.selectedField=this.fieldData.find(e=>e.id===this.item.field)||null,this.selectedOperation=this.operations.find(e=>e.id===this.item.type)||null,this.selectedField||(this.selectedField=this.fieldData[0]),this.selectedOperation||(this.selectedOperation=this.operations[0]||null)}},watch:{item(){this.update()}},computed:{inputType(){var e,t;return this.selectedField?this.selectedField.type==="category"?"category":this.selectedField.type==="defaultSelectionEntryId"?"defaultSelectionEntryId":this.selectedField.type==="number"?"number":this.selectedField.type==="boolean"?"boolean":((e=this.selectedOperation)==null?void 0:e.id)==="increment"||((t=this.selectedOperation)==null?void 0:t.id)==="decrement"?"number":"string":""},parent(){return oe(this.item)},allCategories(){let e=[];for(let t of this.catalogue.iterateCategoryEntries())e.push(t);return e},allGroupEntries(){var e;return[...((e=this.parent)==null?void 0:e.selectionsIterator())||[]]},operations(){return this.selectedField?{number:[{id:"set",name:"Set",word:"to"},{id:"increment",name:"Increment",word:"by"},{id:"decrement",name:"Decrement",word:"by"}],string:[{id:"set",name:"Set",word:"to"},{id:"append",name:"Append",word:"with"},{id:"prepend",name:"Prepend",word:"with"}],"string-or-number":[{id:"set",name:"Set",word:"to"},{id:"append",name:"Append",word:"to"},{id:"prepend",name:"Prepend",word:"to"},{id:"increment",name:"Increment",word:"by"},{id:"decrement",name:"Decrement",word:"by"}],boolean:[{id:"set",name:"Set",word:"to"}],defaultSelectionEntryId:[{id:"set",name:"Set",word:""}],category:[{id:"add",name:"Add",word:""},{id:"remove",name:"Remove",word:""},{id:"set-primary",name:"Set Primary",word:"to"},{id:"unset-primary",name:"Unset Primary",word:"to"}]}[this.selectedField.type]:[]},errors(){return[]},fieldData(){if(!this.parent)return[];let e=ud[this.parent.editorTypeName];const t=[];if(!e)return[];if(e.includes("costs"))for(const n of this.catalogue.iterateCostTypes())t.push({id:n.id,name:n.name,type:"number",modifierType:"cost"});if(e.includes("constraints"))for(const n of this.parent.constraintsIterator())t.push({id:n.id,name:Y(n),type:"number",modifierType:"constraint"});if(e.includes("characteristics")){const n=this.parent.isLink()?this.parent.target:this.parent;n!=null&&n.characteristics&&t.push(...n.characteristics.map(s=>({id:s.typeId,name:s.name,type:"string-or-number",modifierType:"characteristic",value:s.$text})))}return e.includes("category")&&t.push({id:"category",name:"Category",type:"category",modifierType:"category"}),e=e.filter(n=>["costs","constraints","category","characteristics"].includes(n)==!1),e.map(n=>({id:n,name:n,type:cd[n],modifierType:"bullet"})).concat(t)}}};const be=e=>(U("data-v-62d4b6f4"),e=e(),P(),e),md=be(()=>i("legend",null,"Modifier",-1)),hd={class:"modifier"},pd=["value"],fd={class:"flex align-items flex-row"},Cd=["src"],yd={class:"inline"},_d={key:1},Ad=be(()=>i("option",{value:!0},"True",-1)),bd=be(()=>i("option",{value:!1},"False",-1)),vd=[Ad,bd],kd={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},xd=["src"],wd={class:"inline"},Id={class:"grey"},Ed={class:"flex align-items flex-row",style:{"white-space":"nowrap"}},Td=["src"],Fd={class:"inline"},Sd={class:"grey"},Rd={class:"mt-8px flex items-center"},Nd=be(()=>i("img",{src:rt},null,-1)),Vd={class:"ml-10px"};function Bd(e,t,n,s,r,a){const d=dt,l=ie,g=ae;return o(),u("fieldset",null,[md,i("div",hd,[r.selectedOperation?b((o(),u("select",{key:0,"onUpdate:modelValue":t[0]||(t[0]=c=>r.selectedOperation=c),onChange:t[1]||(t[1]=(...c)=>a.changed&&a.changed(...c))},[(o(!0),u(v,null,T(a.operations,c=>(o(),u("option",{value:c},C(c.name),9,pd))),256))],544)),[[j,r.selectedOperation]]):m("",!0),h(d,{modelValue:r.selectedField,"onUpdate:modelValue":t[2]||(t[2]=c=>r.selectedField=c),fetch:()=>a.fieldData,onChange:a.fieldChanged,class:"modType min-w-200px"},{option:x(c=>[i("div",fd,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${c.option.modifierType}.png`},null,8,Cd),i("span",yd,C(c.option.name),1)])]),_:1},8,["modelValue","fetch","onChange"]),r.selectedOperation?(o(),u("span",_d,C(r.selectedOperation.word),1)):m("",!0),a.inputType==="number"?(o(),A(l,{key:2,onChange:a.changed,modelValue:n.item.value,"onUpdate:modelValue":t[3]||(t[3]=c=>n.item.value=c)},null,8,["onChange","modelValue"])):m("",!0),a.inputType=="boolean"?b((o(),u("select",{key:3,onChange:t[4]||(t[4]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[5]||(t[5]=c=>n.item.value=c)},vd,544)),[[j,n.item.value]]):m("",!0),a.inputType.includes("string")?b((o(),u("input",{key:4,onChange:t[6]||(t[6]=(...c)=>a.changed&&a.changed(...c)),type:"text","onUpdate:modelValue":t[7]||(t[7]=c=>n.item.value=c)},null,544)),[[I,n.item.value]]):m("",!0),a.inputType=="category"?(o(),A(g,{key:5,options:a.allCategories,filterField:c=>c.getName(),valueField:"id",modelValue:n.item.value,"onUpdate:modelValue":t[8]||(t[8]=c=>n.item.value=c),onChange:a.changed},{option:x(({option:c})=>[i("div",kd,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${c.editorTypeName}.png`},null,8,xd),i("span",wd,[p(C(a.getName(c))+" ",1),i("span",Id,C(a.getNameExtra(c)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])):m("",!0),a.inputType=="defaultSelectionEntryId"?(o(),A(g,{key:6,options:a.allGroupEntries,filterField:c=>c.getName(),valueField:"id",modelValue:n.item.value,"onUpdate:modelValue":t[9]||(t[9]=c=>n.item.value=c),onChange:a.changed},{option:x(({option:c})=>[i("div",Ed,[i("img",{class:"mr-1 my-auto",src:`assets/bsicons/${c.editorTypeName}.png`},null,8,Td),i("span",Fd,[p(C(a.getName(c))+" ",1),i("span",Sd,C(a.getNameExtra(c)),1)])])]),_:1},8,["options","filterField","modelValue","onChange"])):m("",!0)]),(o(!0),u(v,null,T(a.errors,c=>(o(),u("div",Rd,[Nd,i("span",Vd,C(c.msg),1)]))),256))])}const Ud=_(gd,[["render",Bd],["__scopeId","data-v-62d4b6f4"]]),Pd={emits:["catalogueChanged"],setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{changed(){this.$emit("catalogueChanged")},add(e,t,n,s){t==="id"&&(t=this.item.id);let r=this.item;this.store.create_child("conditions",r,{scope:e,field:t,type:n,value:s,childId:"any"})}}};const z=e=>(U("data-v-08607e57"),e=e(),P(),e),Od=z(()=>i("legend",null,[i("img",{src:et}),p(" Quick Conditions")],-1)),Ld={class:"columns"},Qd={class:"buttonList"},qd=z(()=>i("img",{src:S},null,-1)),Gd=z(()=>i("img",{src:S},null,-1)),Dd=z(()=>i("img",{src:S},null,-1)),Kd=z(()=>i("img",{src:S},null,-1)),jd={class:"buttonList"},Zd=z(()=>i("img",{src:S},null,-1)),Md=z(()=>i("img",{src:S},null,-1)),Yd=z(()=>i("img",{src:S},null,-1)),Xd=z(()=>i("img",{src:S},null,-1));function Wd(e,t,n,s,r,a){return o(),u("fieldset",null,[Od,i("div",Ld,[i("div",Qd,[i("button",{class:"bouton",onClick:t[0]||(t[0]=d=>a.add("parent","selections","atLeast",1))},[qd,p("PARENT ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[1]||(t[1]=d=>a.add("force","selections","atLeast",1))},[Gd,p("FORCE ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[2]||(t[2]=d=>a.add("roster","selections","atLeast",1))},[Dd,p("ROSTER ATLEAST 1 ")]),i("button",{class:"bouton",onClick:t[3]||(t[3]=d=>a.add("ancestor","selections","instanceOf",1))},[Kd,p("ANCESTOR INSTANCE OF ")])]),i("div",jd,[i("button",{class:"bouton",onClick:t[4]||(t[4]=d=>a.add("parent","selections","lessThan",1))},[Zd,p("PARENT LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[5]||(t[5]=d=>a.add("force","selections","lessThan",1))},[Md,p("FORCE LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[6]||(t[6]=d=>a.add("roster","selections","lessThan",1))},[Yd,p("ROSTER LESS THAN 1 ")]),i("button",{class:"bouton",onClick:t[7]||(t[7]=d=>a.add("ancestor","selections","notInstanceOf",1))},[Xd,p("ANCESTOR NOT INSTANCE OF ")])])])])}const ut=_(Pd,[["render",Wd],["__scopeId","data-v-08607e57"]]),zd={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Hd(e,t,n,s,r,a){const d=O,l=Ud,g=ut;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),h(g,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const Jd=_(zd,[["render",Hd]]),$d={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};const le=e=>(U("data-v-5aec87f9"),e=e(),P(),e),eu=le(()=>i("legend",null,"Constraint",-1)),tu={class:"editorTable"},nu=le(()=>i("td",null,"Unique ID:",-1)),au={class:"constraint"},iu=le(()=>i("option",{value:"min"},"Minimum",-1)),su=le(()=>i("option",{value:"max"},"Maximum",-1)),ou=le(()=>i("option",{value:"exactly"},"Exactly",-1)),lu=[iu,su,ou],ru=le(()=>i("label",{for:"percent"},"Percentage?",-1));function du(e,t,n,s,r,a){const d=ie;return o(),u("fieldset",null,[eu,i("table",tu,[i("tr",null,[nu,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>n.item.id=l),onChange:t[1]||(t[1]=(...l)=>a.changed&&a.changed(...l))},null,544),[[I,n.item.id]])])])]),i("div",au,[b(i("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>n.item.type=l),onChange:t[3]||(t[3]=(...l)=>a.changed&&a.changed(...l))},lu,544),[[j,n.item.type]]),h(d,{modelValue:n.item.value,"onUpdate:modelValue":t[4]||(t[4]=l=>n.item.value=l),onChange:a.changed},null,8,["modelValue","onChange"]),i("div",null,[b(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>n.item.percentValue=l),onChange:t[6]||(t[6]=(...l)=>a.changed&&a.changed(...l))},null,544),[[q,n.item.percentValue]]),ru])])])}const uu=_($d,[["render",du],["__scopeId","data-v-5aec87f9"]]);function ve(e){var t;return((t=e.catalogue)==null?void 0:t.getName())??null}function ke(e,t,n,s=0){var r,a;for(const d of e[t]())n.push({name:d.name,editorTypeName:d.editorTypeName,id:d.id,indent:s,catalogue:ve(d),shared:((a=(r=ee(d))==null?void 0:r.parentKey)==null?void 0:a.includes("shared"))||!1}),ke(d,t,n,s+1)}function cu(e,t,n,s,r=0){var a,d;for(const l of e[t]())s.push({name:l.name,editorTypeName:l.editorTypeName,id:l.id,indent:r,catalogue:ve(l),shared:((d=(a=ee(l))==null?void 0:a.parentKey)==null?void 0:d.includes("shared"))||!1}),ke(l,t,s,r+1)}function Pe(e,t){let n=[];return ke(e,t,n),n}function Te(e,t){const n=[];return ke(e,t?"iterateSelectionEntriesWithRoot":"iterateSelectionEntries",n),n}function gu(e,t){const n=[],s=e.getPrimaryCategory();return cu(t,"iterateAllRootEntries",r=>ee(r).getPrimaryCategory()===s,n),n}function ct(e){var n,s;const t=[];for(let r of e.iterateCategoryEntries()){const a=r;a.isCatalogue()||t.push({name:a.name,editorTypeName:a.editorTypeName,id:a.id,indent:0,catalogue:ve(a),shared:((s=(n=ee(a))==null?void 0:n.parentKey)==null?void 0:s.includes("shared"))||!1})}return t}function mu(e){const t=[];for(const n of Object.values(e.manager.getAllCatalogueFiles())){if(!n.catalogue)continue;const s=Lt(n);t.push({name:s.name,editorTypeName:"catalogue",id:s.id,indent:0,catalogue:null,shared:!1})}return t}function hu(e){let t=0,n=oe(e);for(;n;)t++,n=n.parent;return t}function pu(e){var a,d;let t=[],n=e,s=0;const r=hu(e)-1;for(n=oe(e);n!=null&&!n.isCatalogue();)n.editorTypeName==="selectionEntry"&&(t.push({name:n.name,id:n.id,editorTypeName:n.editorTypeName,indent:s,catalogue:ve(n),shared:((d=(a=ee(n))==null?void 0:a.parentKey)==null?void 0:d.includes("shared"))||!1}),s++),n=n.parent;return t=t.reverse(),t.forEach((l,g)=>{l.indent=g+r}),t}function Fe(e){const t=Pe(e,"iterateRootEntries");return t.splice(0,1),t}function fu(e){return["self","parent","ancestor","primary-category","primary-catalogue","force","roster"].includes(e.scope)==!1}function ee(e){let t=e;for(;t.parent!=null&&t.parent.editorTypeName!="gameSystem"&&t.parent.editorTypeName!="catalogue";)t=t.parent;return t}function Cu(e,t){if(["primary-catalogue","roster","force","ancestor"].includes(e.scope))return Te(t,!0);const s=Te(t,!1);if(e.scope=="self"){const a=oe(e);return a?s.concat(Fe(a)):s}if(e.scope=="parent"){if(ee(e))return Te(t,!0);const a=oe(e);return a!=null&&a.parent?s.concat(Fe(a.parent)):s}if(e.scope=="primary-category")return gu(ee(e),t);const r=t.findOptionById(e.scope);return r?s.concat(Fe(r)):s}const yu={emits:["catalogueChanged"],data(){return{itemField:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},childForces:{type:Boolean,default:!1},childSelections:{type:Boolean,default:!1},shared:{type:Boolean,default:!1}},methods:{getNameExtra:Z,changed(){this.$emit("catalogueChanged")},scopeChanged(){this.item.catalogue.updateCondition(this.item),this.changed()},fieldChanged(){this.item.field=this.itemField.value,this.item.field.startsWith("limit::")&&this.item.editorTypeName!=="constraint"&&(this.item.childId="any"),this.changed()},showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))}},computed:{sharedTooltip(){return this.item.editorTypeName!=="constraint"?`Its recommended to keep shared checked on ${this.item.editorTypeName}s`:`Indicates that constraints on links should be evaluated as if they are on their target, usually only relevant if the scope is above "parent"
      
eg: a unit has a Leader and a Model which have a link to the same entry, with a max 1 constraint on the links scoped to the unit.
assuming both have selected 1 of that entry:
- a shared constraint would error if they both take the entry as its evaluating the target of the links
- a non-shared constraint would not error as it would be evaluating the link itself`},instanceOf(){var e;return["instanceOf","notInstanceOf"].includes((e=this.item)==null?void 0:e.type)},fieldTypes(){const e=[];this.instanceOf&&e.push({name:"",value:void 0,type:null}),e.push({name:"Selections",value:"selections",type:"bullet"}),e.push({name:"Forces",value:"forces",type:"bullet"});for(const t of this.costTypes)e.push({name:t.name,value:t.id,type:"cost"}),this.item.scope==="roster"&&e.push({name:`${t.name} Limit`,value:`limit::${t.id}`,type:"cost"});return e},includeCategories(){return this.item.field!=="forces"},includeForces(){return!0},includeSelections(){return this.item.field!="forces"},parent(){return this.item.parent},costTypes(){let e=[];for(let t of this.catalogue.iterateCostTypes())e.push(t);return e},allSelections(){return this.includeSelections?pu(this.item):[]},allCategories(){return this.includeCategories?ct(this.catalogue):[]},allForces(){return this.includeForces?Pe(this.catalogue,"forcesIterator"):[]},allScopes(){let e=[{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"}];return this.item.field!="forces"&&["condition"].includes(this.item.editorTypeName)&&(e=[{id:"self",name:"Self",editorTypeName:"bullet"},{id:"parent",name:"Parent",editorTypeName:"bullet"},{id:"ancestor",name:"Ancestor",editorTypeName:"bullet",title:"checks the condition in all parents"},{id:"primary-category",name:"Primary Category",editorTypeName:"bullet"},{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"},{id:"primary-catalogue",name:"Primary Catalogue",editorTypeName:"bullet"}]),this.item.field!=="forces"&&["repeat","constraint"].includes(this.item.editorTypeName)&&(e=[{id:"parent",name:"Parent",editorTypeName:"bullet"},{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"},{id:"primary-catalogue",name:"Primary Catalogue",editorTypeName:"bullet"}]),e.concat(this.allSelections).concat(this.allCategories).concat(this.allForces)}},watch:{"item.field":{handler(){this.item.field=="forces"&&(this.item.scope="roster"),this.itemField=this.fieldTypes.find(e=>e.value==this.item.field)},immediate:!0}}};const xe=e=>(U("data-v-2118129c"),e=e(),P(),e),_u=xe(()=>i("legend",null,"Query",-1)),Au={class:"query"},bu=["src"],vu=xe(()=>i("span",null," in ",-1)),ku={style:{"white-space":"nowrap"}},xu=["src"],wu={class:"gray"},Iu={key:1,class:"shared"},Eu={key:2,class:"catalogueName"},Tu={class:"checks"},Fu={key:0},Su=["title"],Ru={key:1},Nu=xe(()=>i("label",{for:"childSelections"},"And all child Selections",-1)),Vu={key:2},Bu=xe(()=>i("label",{for:"childForces"},"And all child Forces",-1));function Uu(e,t,n,s,r,a){var g,c;const d=dt,l=ae;return o(),u("fieldset",null,[_u,i("div",Au,[h(d,{modelValue:r.itemField,"onUpdate:modelValue":t[0]||(t[0]=f=>r.itemField=f),fetch:()=>a.fieldTypes,onChange:a.fieldChanged,class:"modType",disabled:a.instanceOf},{option:x(f=>[i("div",null,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${f.option.type}.png`},null,8,bu),p(" "+C(f.option.name),1)])]),_:1},8,["modelValue","fetch","onChange","disabled"]),vu,h(l,{modelValue:n.item.scope,"onUpdate:modelValue":t[1]||(t[1]=f=>n.item.scope=f),placeholder:"Search Scope...",options:a.allScopes,valueField:"id",filterField:"name",onChange:a.scopeChanged,disabled:(c=(g=r.itemField)==null?void 0:g.value)==null?void 0:c.startsWith("limit::")},{option:x(f=>[i("div",ku,[f.option.indent>=2&&!f.selected?(o(!0),u(v,{key:0},T(f.option.indent-1,k=>(o(),u("span",null,"   "))),256)):m("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${f.option.editorTypeName}.png`},null,8,xu),p(" "+C(f.option.name)+" ",1),i("span",wu,C(a.getNameExtra(f.option,!1)),1),f.option.shared?(o(),u("span",Iu," (shared)")):m("",!0),a.showCatalogue(f.option)?(o(),u("span",Eu," ["+C(f.option.catalogue)+"]",1)):m("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange","disabled"]),i("div",Tu,[n.shared?(o(),u("div",Fu,[b(i("input",{onChange:t[2]||(t[2]=(...f)=>a.changed&&a.changed(...f)),id:"shared",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=f=>n.item.shared=f)},null,544),[[q,n.item.shared]]),i("label",{for:"shared",class:"hastooltip",title:a.sharedTooltip},"Shared",8,Su)])):m("",!0),n.childSelections?(o(),u("div",Ru,[b(i("input",{onChange:t[4]||(t[4]=(...f)=>a.changed&&a.changed(...f)),id:"childSelections",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=f=>n.item.includeChildSelections=f)},null,544),[[q,n.item.includeChildSelections]]),Nu])):m("",!0),n.childForces?(o(),u("div",Vu,[b(i("input",{onChange:t[6]||(t[6]=(...f)=>a.changed&&a.changed(...f)),id:"childForces",type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=f=>n.item.includeChildForces=f)},null,544),[[q,n.item.includeChildForces]]),Bu])):m("",!0)])])])}const Oe=_(yu,[["render",Uu],["__scopeId","data-v-2118129c"]]),Pu={emits:["catalogueChanged"],setup(){return{store:G()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{changed(){this.$emit("catalogueChanged")},add(e,t,n){e==="id"&&(e=this.item.id);let s=this.item;this.type==="constraint"&&(s=this.parent),this.store.create_child("modifiers",s,{field:e,type:t,value:n})}}};const ce=e=>(U("data-v-eaa13e99"),e=e(),P(),e),Ou=ce(()=>i("legend",null,[i("img",{src:nt}),p(" Quick Modifiers")],-1)),Lu={class:"columns"},Qu={class:"buttonList"},qu=ce(()=>i("img",{src:S},null,-1)),Gu=ce(()=>i("img",{src:S},null,-1)),Du={class:"buttonList"},Ku=ce(()=>i("img",{src:S},null,-1)),ju=ce(()=>i("img",{src:S},null,-1));function Zu(e,t,n,s,r,a){return o(),u("fieldset",null,[Ou,i("div",Lu,[a.type==="constraint"?(o(),u(v,{key:0},[i("div",Qu,[i("button",{class:"bouton",onClick:t[0]||(t[0]=d=>a.add("id","increment",1))},[qu,p("INCREMENT 1 ")]),i("button",{class:"bouton",onClick:t[1]||(t[1]=d=>a.add("id","set",1))},[Gu,p("SET 1 ")])]),i("div",Du,[i("button",{class:"bouton",onClick:t[2]||(t[2]=d=>a.add("id","decrement",1))},[Ku,p("DECREMENT 1 ")]),i("button",{class:"bouton",onClick:t[3]||(t[3]=d=>a.add("id","set",0))},[ju,p("SET 0 ")])])],64)):m("",!0)])])}const gt=_(Pu,[["render",Zu],["__scopeId","data-v-eaa13e99"]]),Mu=[{id:"any",name:"Anything",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"unit",name:"Unit",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"model",name:"Model",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"upgrade",name:"Upgrade",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"mount",name:"Mount",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"crew",name:"Crew",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1}],Yu={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},noshared:{type:Boolean,default:!1}},methods:{getNameExtra:Z,changed(){this.$emit("catalogueChanged")},showCatalogue(e){var t;return!(!e.catalogue||e.catalogue===((t=this.item.catalogue)==null?void 0:t.getName()))},availableTargets(){return[...Mu,...this.allCategories,...this.allEntries,...this.allForces,...this.allCatalogues]}},watch:{"item.scope"(){var e;this.child||(this.item.childId=((e=this.availableTargets()[0])==null?void 0:e.id)||void 0)}},computed:{childId:{get(){return this.item.childId},set(e){const t=this.item.childId;this.item.childId=e,this.catalogue.updateCondition(this.item,t)}},child(){if(!this.item.childId)return null;const e=this.availableTargets().find(t=>t.id===this.item.childId);return e||this.catalogue.findOptionById(this.item.childId)},instanceOf(){var e;return["instanceOf","notInstanceOf"].includes((e=this.item)==null?void 0:e.type)},allEntries(){return this.includeSelections?Cu(this.item,this.catalogue):[]},allCategories(){return this.includeCategories?ct(this.catalogue):[]},allForces(){return this.includeForces?Pe(this.catalogue,"forcesIterator"):[]},allCatalogues(){return this.includeCatalogues?mu(this.catalogue):[]},includeSelections(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category")},includeCategories(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.item.field==="forces")},includeForces(){return this.item.scope=="self"||this.item.scope=="parent"?!1:this.item.scope=="ancestor"?!0:!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category"||fu(this.item))},includeCatalogues(){return this.instanceOf&&this.item.scope==="primary-catalogue"}}};const we=e=>(U("data-v-38bb665a"),e=e(),P(),e),Xu=we(()=>i("legend",null,"Filter By",-1)),Wu={class:"editorTable"},zu=we(()=>i("td",null,"Of:",-1)),Hu={key:0},Ju=["src"],$u=we(()=>i("td",null,"Child ID:",-1)),ec=we(()=>i("td",null,"Child:",-1)),tc={key:0,style:{"white-space":"nowrap"}},nc=["src"],ac={class:"gray"},ic={key:1,class:"shared"},sc={key:2,class:"catalogueName"},oc=["disabled"],lc=["title"];function rc(e,t,n,s,r,a){const d=ae;return o(),u("fieldset",null,[Xu,i("table",Wu,[i("tr",null,[zu,i("td",null,[a.child?(o(),u("span",Hu,[i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${a.child.editorTypeName}.png`},null,8,Ju),p(" "+C(a.child.name),1)])):m("",!0)])]),i("tr",null,[$u,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>a.childId=l),onChange:t[1]||(t[1]=(...l)=>a.changed&&a.changed(...l))},null,544),[[I,a.childId]])])]),i("tr",null,[ec,i("td",null,[h(d,{modelValue:a.childId,"onUpdate:modelValue":t[2]||(t[2]=l=>a.childId=l),placeholder:"Search Child...",options:a.availableTargets,valueField:"id",filterField:"name",onChange:a.changed,default:a.child,lazy:""},{option:x(l=>[l.option?(o(),u("div",tc,[l.option.indent>=1&&!l.selected?(o(!0),u(v,{key:0},T(l.option.indent,g=>(o(),u("span",null,"   "))),256)):m("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${l.option.editorTypeName}.png`},null,8,nc),p(" "+C(l.option.name)+" ",1),i("span",ac,C(a.getNameExtra(l.option,!1)),1),l.option.shared?(o(),u("span",ic," (shared) ")):m("",!0),a.showCatalogue(l.option)?(o(),u("span",sc," ["+C(l.option.catalogue)+"]",1)):m("",!0)])):m("",!0)]),_:1},8,["modelValue","placeholder","options","onChange","default"])])])]),b(i("input",{disabled:n.noshared&&n.item.shared,type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>n.item.shared=l),id:"shared",onChange:t[4]||(t[4]=(...l)=>a.changed&&a.changed(...l))},null,40,oc),[[q,n.item.shared]]),i("label",{class:V([{gray:n.noshared&&n.item.shared},"hastooltip"]),title:`Its recommended to keep shared checked on ${n.item.editorTypeName}s`,for:"shared"},"Shared?",10,lc)])}const Ie=_(Yu,[["render",rc],["__scopeId","data-v-38bb665a"]]),dc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{showFilterBy(){var t;return((t=oe(this.item))==null?void 0:t.parentKey)==="associations"}},methods:{changed(){this.catalogue.updateCondition(this.item),this.$emit("catalogueChanged")}},components:{FilterBy:Ie,QuickModifiers:gt}};function uc(e,t,n,s,r,a){const d=O,l=uu,g=Oe,c=B("FilterBy"),f=gt;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{catalogue:n.catalogue,item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),h(g,{catalogue:n.catalogue,item:n.item,onCatalogueChanged:a.changed,class:"section",childForces:"",childSelections:"",shared:""},null,8,["catalogue","item","onCatalogueChanged"]),a.showFilterBy?(o(),A(c,{key:0,class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue},null,8,["item","onCatalogueChanged","catalogue"])):m("",!0),h(f,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const cc=_(dc,[["render",uc]]),gc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},mc=i("legend",null,"Condition Group",-1),hc={class:"editorTable"},pc=i("td",null,"Type",-1),fc=i("option",{value:"or"},"Or",-1),Cc=i("option",{value:"and"},"And",-1),yc=[fc,Cc];function _c(e,t,n,s,r,a){const d=O;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),i("fieldset",null,[mc,i("table",hc,[i("tr",null,[pc,i("td",null,[b(i("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.type=l),onChange:t[1]||(t[1]=(...l)=>a.changed&&a.changed(...l))},yc,544),[[j,n.item.type]])])])])])],64)}const Ac=_(gc,[["render",_c]]),bc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{ConditionGroup:Ac}};function vc(e,t,n,s,r,a){const d=B("ConditionGroup");return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])])}const kc=_(bc,[["render",vc]]),xc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{allowNonInstanceOf(){return!0},instanceOf(){return this.item.type.includes("instance")}},components:{NumberInput:ie},watch:{"item.scope"(){const e=["instanceOf","notInstanceOf"];!this.allowNonInstanceOf&&!e.includes(this.item.type)&&(this.item.type=e[0])}}};const Le=e=>(U("data-v-b2d4a8f9"),e=e(),P(),e),wc=Le(()=>i("legend",null,"Condition",-1)),Ic={class:"condition"},Ec=Ye('<option value="lessThan" data-v-b2d4a8f9>Less Than</option><option value="greaterThan" data-v-b2d4a8f9>Greater Than</option><option value="equalTo" data-v-b2d4a8f9>Equal To</option><option value="notEqualTo" data-v-b2d4a8f9>Not Equal To</option><option value="atLeast" data-v-b2d4a8f9>At Least</option><option value="atMost" data-v-b2d4a8f9>At Most</option>',6),Tc=Le(()=>i("option",{value:"instanceOf"},"Instance Of",-1)),Fc=Le(()=>i("option",{value:"notInstanceOf"},"Not Instance Of",-1)),Sc=["disabled"];function Rc(e,t,n,s,r,a){const d=ie;return o(),u("fieldset",null,[wc,i("div",Ic,[b(i("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.type=l),onChange:t[1]||(t[1]=(...l)=>a.changed&&a.changed(...l))},[a.allowNonInstanceOf?(o(),u(v,{key:0},[Ec],64)):m("",!0),Tc,Fc],544),[[j,n.item.type]]),h(d,{disabled:a.instanceOf,modelValue:n.item.value,"onUpdate:modelValue":t[2]||(t[2]=l=>n.item.value=l),onChange:a.changed},null,8,["disabled","modelValue","onChange"]),i("div",null,[b(i("input",{disabled:a.instanceOf,id:"percent",type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>n.item.percentValue=l),onChange:t[4]||(t[4]=(...l)=>a.changed&&a.changed(...l))},null,40,Sc),[[q,n.item.percentValue]]),i("label",{class:V({disabled:a.instanceOf}),for:"percent"},"Percentage?",2)])])])}const Nc=_(xc,[["render",Rc],["__scopeId","data-v-b2d4a8f9"]]),Vc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{Condition:Nc,FilterBy:Ie}};function Bc(e,t,n,s,r,a){const d=O,l=B("Condition"),g=Oe,c=B("FilterBy");return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),h(g,{class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue,childForces:"",childSelections:""},null,8,["item","onCatalogueChanged","catalogue"]),n.item.field.startsWith("limit::")==!1?(o(),A(c,{key:0,noshared:"",class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue},null,8,["item","onCatalogueChanged","catalogue"])):m("",!0)])}const Uc=_(Vc,[["render",Bc]]),Pc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Oc(e,t,n,s,r,a){const d=O,l=ut;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const Lc=_(Pc,[["render",Oc]]),Qc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function qc(e,t,n,s,r,a){const d=O,l=D,g=W,c=te;return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{catalogue:n.catalogue,item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Constraints ")]),_:1},8,["item","onCatalogueChanged"])])}const Gc=_(Qc,[["render",qc]]),Dc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{getNameExtra:Z,changed(){this.$emit("catalogueChanged")}},computed:{children(){let e=[{name:"None",id:void 0,editorTypeName:"bullet"}];for(let t of this.item.entriesIterator())t.isGroup()||e.push(t);return e}}};const mt=e=>(U("data-v-86874c18"),e=e(),P(),e),Kc=mt(()=>i("legend",null,"Selection Entry Group",-1)),jc={class:"editorTable"},Zc=mt(()=>i("td",null,"Default Selection:",-1)),Mc={style:{"white-space":"nowrap"}},Yc=["src"],Xc={class:"gray"},Wc={key:1,class:"merror"};function zc(e,t,n,s,r,a){const d=ae;return o(),u("fieldset",null,[Kc,i("table",jc,[i("tr",null,[Zc,i("td",null,[a.children.length?(o(),A(d,{key:0,modelValue:n.item.defaultSelectionEntryId,"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.defaultSelectionEntryId=l),placeholder:"Search Children...",options:a.children,valueField:"id",filterField:"name",onChange:a.changed},{option:x(l=>[i("div",Mc,[l.option.indent>=2&&!l.selected?(o(!0),u(v,{key:0},T(l.option.indent-1,g=>(o(),u("span",null,"   "))),256)):m("",!0),i("img",{class:"mr-1 align-middle",src:`assets/bsicons/${l.option.editorTypeName}.png`},null,8,Yc),p(" "+C(l.option.name)+" ",1),i("span",Xc,C(a.getNameExtra(l.option,!1)),1)])]),_:1},8,["modelValue","placeholder","options","onChange"])):(o(),u("span",Wc,"This group does not have any child Selection Entries"))])])])])}const Hc=_(Dc,[["render",zc],["__scopeId","data-v-86874c18"]]),Jc={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function $c(e,t,n,s,r,a){const d=O,l=D,g=W,c=Hc,f=Ve,k=Be,y=ue,E=Ue;return o(),u(v,null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(f,{item:n.item,onCatalogueChanged:a.changed,fields:[{field:"hidden",enabled:!0,name:"Hidden"},{field:"collective",enabled:!1,name:"Collective"},{field:"import",enabled:!0,name:"Import"}],class:"section"},{default:x(()=>[p(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),h(k,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),h(y,{item:n.item,onCatalogueChanged:a.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"]),h(E,{item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const eg=_(Jc,[["render",$c]]),tg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},ng=i("legend",null,"Revision",-1),ag={class:"editorTable"},ig=i("td",null,"Revision Number:",-1);function sg(e,t,n,s,r,a){return o(),u("fieldset",null,[ng,i("table",ag,[i("tr",null,[ig,i("td",null,[b(i("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=d=>n.item.revision=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d))},null,544),[[I,n.item.revision]])])])])])}const og=_(tg,[["render",sg]]),lg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},rg=i("legend",null,"Catalogue",-1),dg=i("label",{class:"hastooltip",for:"library",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."},"Library",-1);function ug(e,t,n,s,r,a){return o(),u("fieldset",null,[rg,b(i("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=d=>n.item.library=d),onChange:t[1]||(t[1]=(...d)=>a.changed&&a.changed(...d)),id:"library"},null,544),[[q,n.item.library]]),dg])}const cg=_(lg,[["render",ug]]),gg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},mg=i("legend",null,"Information",-1),hg={class:"editorTable"},pg=i("td",null,"Author Name:",-1),fg=i("td",null,"Author Contact:",-1),Cg=i("td",null,"Author Website:",-1),yg=i("td",null,"Readme:",-1);function _g(e,t,n,s,r,a){const d=Ce;return o(),u("fieldset",null,[mg,i("table",hg,[i("tr",null,[pg,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>n.item.authorName=l),onChange:t[1]||(t[1]=(...l)=>a.changed&&a.changed(...l))},null,544),[[I,n.item.authorName]])])]),i("tr",null,[fg,i("td",null,[h(d,{modelValue:n.item.authorContact,"onUpdate:modelValue":t[2]||(t[2]=l=>n.item.authorContact=l)},null,8,["modelValue"])])]),i("tr",null,[Cg,i("td",null,[b(i("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>n.item.authorUrl=l),onChange:t[4]||(t[4]=(...l)=>a.changed&&a.changed(...l))},null,544),[[I,n.item.authorUrl]])])]),i("tr",null,[yg,i("td",null,[h(d,{type:"text",modelValue:n.item.readme,"onUpdate:modelValue":t[5]||(t[5]=l=>n.item.readme=l),onChange:a.changed},null,8,["modelValue","onChange"])])])])])}const Ag=_(gg,[["render",_g]]),bg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function vg(e,t,n,s,r,a){const d=O,l=D,g=W,c=te,f=og,k=cg,y=Ag;return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{catalogue:n.catalogue,item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),h(c,{item:n.item,onCatalogueChanged:a.changed,class:"section"},{default:x(()=>[p(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),h(f,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(k,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(y,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"])])}const kg=_(bg,[["render",vg]]),xg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{NumberInput:ie}};const Ee=e=>(U("data-v-c7d18dd2"),e=e(),P(),e),wg=Ee(()=>i("legend",null,"Repeat",-1)),Ig={class:"condition"},Eg=Ee(()=>i("label",null,"times for every ",-1)),Tg={class:"bools"},Fg=Ee(()=>i("label",{for:"percent"},"Percentage?",-1)),Sg=Ee(()=>i("label",{for:"percent"},"Round up?",-1));function Rg(e,t,n,s,r,a){const d=ie;return o(),u("fieldset",null,[wg,i("div",Ig,[h(d,{modelValue:n.item.repeats,"onUpdate:modelValue":t[0]||(t[0]=l=>n.item.repeats=l),onChange:a.changed},null,8,["modelValue","onChange"]),Eg,h(d,{modelValue:n.item.value,"onUpdate:modelValue":t[1]||(t[1]=l=>n.item.value=l),onChange:a.changed},null,8,["modelValue","onChange"])]),i("div",Tg,[i("div",null,[b(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=l=>n.item.percentValue=l),onChange:t[3]||(t[3]=(...l)=>a.changed&&a.changed(...l))},null,544),[[q,n.item.percentValue]]),Fg]),i("div",null,[b(i("input",{id:"percent",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>n.item.roundUp=l),onChange:t[5]||(t[5]=(...l)=>a.changed&&a.changed(...l))},null,544),[[q,n.item.roundUp]]),Sg])])])}const Ng=_(xg,[["render",Rg],["__scopeId","data-v-c7d18dd2"]]),Vg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Bg(e,t,n,s,r,a){const d=O,l=Ng,g=Oe,c=Ie;return o(),u("div",null,[h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{catalogue:n.catalogue,item:n.item,onCatalogueChanged:a.changed},null,8,["catalogue","item","onCatalogueChanged"]),h(g,{class:"section",item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,childForces:"",childSelections:""},null,8,["item","catalogue","onCatalogueChanged"]),h(c,{class:"section",item:n.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])])}const Ug=_(Vg,[["render",Bg]]),Pg={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{ids:{get(){var e;return((e=this.item.ids)==null?void 0:e.join(", "))||""},set(e){this.item.ids=e.split(",").map(t=>t.trim())}}},methods:{changed(){this.$emit("catalogueChanged")}},components:{FilterBy:Ie}},Og=i("p",{class:"info"},[p(" Associations are a New Recruit specific feature allowing you to associate an entry to another, such as a unit to a bataillon. "),i("br"),p(" Be aware that associations are currently in the beta phase and may undergo modifications. "),i("br"),p(" Feel free to offer feedback or ask questions on our "),i("a",{href:"https://discord.gg/cCtqGbugwb"},"Discord server"),p(". ")],-1),Lg={class:"section"},Qg=i("legend",null,"Temporary",-1),qg={class:"editorTable"},Gg=i("td",null,"min: (may be moved to child constraints)",-1),Dg=i("td",null,"max: (may be moved to child constraints)",-1),Kg=i("td",null,"label: (will be moved to name)",-1),jg=i("td",null,"labelMembers:",-1),Zg=i("td",null,"of: (may be moved to ChildID to reuse filterBy)",-1),Mg=i("td",null,"type: (will be removed, only affects conditions)",-1),Yg=i("option",{value:"or"},"or",-1),Xg=i("option",{value:"and"},"and",-1),Wg=[Yg,Xg],zg=i("td",null,"scope: ",-1),Hg=i("td",{class:"underline",title:"Ids are a string[], used by associationConstraints on entries, eg: to have a maximum number of commanders in a bataillion"}," ids: ",-1);function Jg(e,t,n,s,r,a){const d=O,l=D,g=B("FilterBy");return o(),u("div",null,[Og,h(d,{item:n.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"]),h(l,{item:n.item,onCatalogueChanged:a.changed,class:"section"},null,8,["item","onCatalogueChanged"]),h(g,{class:"section",item:n.item,onCatalogueChanged:a.changed,catalogue:n.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),i("fieldset",Lg,[Qg,i("table",qg,[i("tr",null,[Gg,i("td",null,[b(i("input",{onInput:t[0]||(t[0]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[1]||(t[1]=c=>n.item.min=c),type:"number"},null,544),[[I,n.item.min]])])]),i("tr",null,[Dg,i("td",null,[b(i("input",{onInput:t[2]||(t[2]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[3]||(t[3]=c=>n.item.max=c),type:"number"},null,544),[[I,n.item.max]])])]),i("tr",null,[Kg,i("td",null,[b(i("input",{onInput:t[4]||(t[4]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[5]||(t[5]=c=>n.item.label=c),type:"text"},null,544),[[I,n.item.label]])])]),i("tr",null,[jg,i("td",null,[b(i("input",{onInput:t[6]||(t[6]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[7]||(t[7]=c=>n.item.labelMembers=c),type:"text"},null,544),[[I,n.item.labelMembers]])])]),i("tr",null,[Zg,i("td",null,[b(i("input",{onInput:t[8]||(t[8]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[9]||(t[9]=c=>n.item.of=c),type:"text"},null,544),[[I,n.item.of]])])]),i("tr",null,[Mg,i("td",null,[b(i("select",{onChange:t[10]||(t[10]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[11]||(t[11]=c=>n.item.type=c)},Wg,544),[[j,n.item.type]])])]),i("tr",null,[zg,i("td",null,[b(i("input",{onInput:t[12]||(t[12]=(...c)=>a.changed&&a.changed(...c)),"onUpdate:modelValue":t[13]||(t[13]=c=>n.item.scope=c),type:"text"},null,544),[[I,n.item.scope]])])]),i("tr",null,[Hg,i("td",null,[b(i("input",{"onUpdate:modelValue":t[14]||(t[14]=c=>n.item.ids=c),onInput:t[15]||(t[15]=(...c)=>a.changed&&a.changed(...c)),type:"text"},null,544),[[I,n.item.ids]])])])])])])}const $g=_(Pg,[["render",Jg]]),em={props:{item:{type:Object,required:!0}},setup(){return{store:G()}},methods:{gotoTarget(e){return e.isCategory()?e.parent:e},parentEntry(e){return Et(e,t=>t.getName())},path(e){const t=De(e);return this.item.editorTypeName!=="profileType"&&t.pop(),t},other_path(e){return De(e)}},computed:{show_link_name(){return this.item instanceof Qt},links(){var e;return M(((e=this.item)==null?void 0:e.links)||[],t=>{var n;return(n=t.catalogue)==null?void 0:n.name})},other_links(){var e;return M(((e=this.item)==null?void 0:e.other_links)||[],t=>{var n;return(n=t.catalogue)==null?void 0:n.name})},label(){return Y(this.item)}},components:{NodePath:Mt}};const tm={class:"mb-50px"},nm={class:"text-center"},am=i("span",{class:"gray"},"References to",-1),im={class:"gray"},sm={key:0,class:"mr-60px"},om={key:1,class:"mr-60px"},lm=i("h3",null," From conditions/constraints/modifiers/repeats: ",-1);function rm(e,t,n,s,r,a){const d=B("NodePath");return o(),u("div",tm,[i("h2",nm,[am,p(" "+C(a.label)+" ",1),i("span",im,"("+C(n.item.editorTypeName)+")",1)]),a.links.length?(o(),u("div",sm,[i("div",null,[(o(!0),u(v,null,T(a.links,l=>(o(),u("div",null,[h(d,{path:a.path(l),onClick:g=>s.store.goto(l),class:"hover-darken cursor-pointer p-1px"},null,8,["path","onClick"])]))),256))])])):m("",!0),a.other_links.length?(o(),u("div",om,[lm,i("div",null,[(o(!0),u(v,null,T(a.other_links,l=>(o(),u("div",null,[h(d,{path:a.other_path(l),onClick:g=>s.store.goto(l),class:"hover-darken cursor-pointer p-1px mb-3px"},null,8,["path","onClick"])]))),256))])])):m("",!0)])}const dm=_(em,[["render",rm]]),um={setup(){return{store:G()}},emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0}},data(){return{links:["link","selectionEntryLink","selectionEntryGroupLink"],infoLinks:["infoLink","profileLink","ruleLink","infoGroupLink"]}},methods:{changed(){var e;this.store.set_catalogue_changed(((e=this.item)==null?void 0:e.catalogue)||this.catalogue)}},computed:{item(){return this.store.get_selected()},typeName(){var e;return(e=this.item)==null?void 0:e.editorTypeName}}};const cm={key:0,class:"rightPanel"},gm=i("div",{class:"min-h-100px"},null,-1);function mm(e,t,n,s,r,a){const d=wn,l=Pn,g=ls,c=_o,f=vo,k=Po,y=Ko,E=Tr,L=sd,H=Jd,ge=cc,me=kc,w=Uc,Qe=Lc,ht=Gc,pt=eg,ft=kg,Ct=Ug,yt=$g,_t=dm;return a.item?(o(),u("div",cm,[s.store.mode==="edit"?(o(),u(v,{key:0},[a.typeName=="publication"?(o(),A(d,{key:0,item:a.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])):a.typeName=="costType"?(o(),A(l,{key:1,item:a.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])):a.typeName=="profileType"?(o(),A(g,{key:2,item:a.item,onCatalogueChanged:a.changed},null,8,["item","onCatalogueChanged"])):a.typeName=="category"?(o(),A(c,{key:3,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="force"?(o(),A(f,{key:4,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="profile"?(o(),A(k,{key:5,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="rule"?(o(),A(y,{key:6,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="selectionEntry"?(o(),A(E,{key:7,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):r.links.includes(a.typeName)?(o(),A(L,{key:8,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"entry"},null,8,["item","catalogue","onCatalogueChanged"])):r.infoLinks.includes(a.typeName)?(o(),A(L,{key:9,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"info"},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="modifier"?(o(),A(H,{key:10,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="constraint"?(o(),A(ge,{key:11,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="conditionGroup"?(o(),A(me,{key:12,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="condition"?(o(),A(w,{key:13,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="categoryLink"?(o(),A(L,{key:14,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"category"},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="modifierGroup"?(o(),A(Qe,{key:15,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="infoGroup"?(o(),A(ht,{key:16,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="selectionEntryGroup"?(o(),A(pt,{key:17,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="catalogueLink"?(o(),A(L,{key:18,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="catalogue"||a.typeName=="gameSystem"?(o(),A(ft,{key:19,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="repeat"?(o(),A(Ct,{key:20,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):a.typeName=="association"?(o(),A(yt,{key:21,item:a.item,catalogue:n.catalogue,onCatalogueChanged:a.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):m("",!0),gm],64)):s.store.mode==="references"?(o(),A(_t,{key:1,item:a.item,catalogue:n.catalogue},null,8,["item","catalogue"])):m("",!0)])):m("",!0)}const hm=_(um,[["render",mm]]),pm=$({components:{LeftPanel:Pi},data(){return{error:null,item:null,systemFiles:null,loading:!1,loading_all:!1,loading_progress:0,loading_progress_max:0,loading_progress_msg:"",initial:!0,saving:!1,failed:!1,id:"",cat:null,defaults:{},key:1}},setup(){return{cataloguesStore:qt(),store:G(),uistate:Ne()}},mounted(){this.store.init(this),globalThis.$catalogue=this.cat,window.addEventListener("beforeunload",this.beforeUnload),document.addEventListener("keydown",this.onKeydown,!0)},updated(){this.store.init(this),globalThis.$catalogue=this.cat},unmounted(){window.removeEventListener("beforeunload",this.beforeUnload),document.removeEventListener("keydown",this.onKeydown,!0)},activated(){window.addEventListener("beforeunload",this.beforeUnload)},deactivated(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteUpdate(){this.id&&this.store.save_state()},beforeRouteLeave(){this.id&&this.store.save_state()},computed:{self_or_imports_changed(){var e,t;return this.file_changed(this.cat)||((t=(e=this.cat)==null?void 0:e.imports)==null?void 0:t.find(n=>this.file_changed(n)))},changed(){var e;return this.cat&&((e=this.store.get_catalogue_state(this.cat))==null?void 0:e.changed)||!1},unsaved(){var e;return this.cat&&((e=this.store.get_catalogue_state(this.cat))==null?void 0:e.unsaved)||!1},query(){return{gameSystemId:this.$route.query.systemId,catalogueId:this.$route.query.id||this.$route.query.systemId}},route_is_catalogue(){return this.$route.name==="catalogue"}},watch:{query:{async handler(e){var s;if(!this.route_is_catalogue)return;const{gameSystemId:t,catalogueId:n}=e;this.id=n||t,this.store.unselect();try{await this.load(t,this.id),(s=this.systemFiles)==null||s.loadAll(),this.error=null,this.$nextTick(()=>{this.store.$nextTickResolve&&this.store.$nextTickResolve()})}catch(r){console.error(r),this.error=r}},immediate:!0}},methods:{file_changed(e){return this.store.get_catalogue_state(e).isChangedOnDisk},async load_all(){if(this.systemFiles)try{this.loading_all=!0,await new Promise(e=>setTimeout(e,0)),await this.systemFiles.loadAll(async(e,t,n)=>{this.loading_progress=e,this.loading_progress_max=t,this.loading_progress_msg=n??"",await new Promise(s=>setTimeout(s,0))}),this.loading_progress=0,this.loading_progress_max=0,this.loading_progress_msg=""}catch(e){console.error(e)}finally{this.loading_all=!0}},async save_all(){var e;try{this.failed=await this.store.save_all((e=this.cat)==null?void 0:e.getSystemId())}finally{this.saving=!1}},async save(){try{const e=await this.store.prompt_revision(this.cat);await this.store.save_catalogue(this.systemFiles,this.cat,e)&&notify("Incremented 1 catalogue's revision"),this.failed=!1}catch{this.failed=!0}},async test(){var e;if(!((e=this.systemFiles)!=null&&e.github)){console.error("no github set");return}console.log("revision",await Gt(this.systemFiles.github,this.cat))},async beforeUnload(e){if(!globalThis._closeWindow&&(this.loading||this.store.save_state(),this.unsaved||this.store.unsavedCount)){const t="You have unsaved changes that will be lost";return e.returnValue=t,electron&&setTimeout(async()=>{await Dt({message:"You have unsaved changes that will be lost?",buttons:["Cancel","Leave"],defaultId:0,cancelId:0,type:"question"})===1&&(globalThis._closeWindow=!0,Kt())}),!1}},onKeydown(e){e.ctrlKey&&e.key.toLowerCase()=="s"&&(e.preventDefault(),e.stopPropagation(),this.save())},load_state(e){this.defaults=e},async load(e,t){if(!t&&!e)throw new Error("couldn't load catalogue: no id");try{this.loading=!0,this.initial&&(await new Promise(r=>setTimeout(r,10)),this.initial=!1);const n=await this.store.get_or_load_system(e);let s=n.getLoadedCatalogue({targetId:t||e});s||(s=await n.loadCatalogue({targetId:t||e})),s.processForEditor();for(const r of s.imports)r.processForEditor();if(this.systemFiles=n,this.cat=s,s){const r=this.uistate.get_data(s.id);this.load_state(r)}}finally{this.loading=!1}}}});const fm={class:"h-full"},Cm={key:0},ym={class:"ml-10px"},_m={key:0,class:"inline",style:{"vertical-align":"-2px"},title:`This file or one of it's dependencies was changed by another program. 
You may want to reload the system through the Systems tab`,src:jt},Am={class:"text-slate-300"},bm={key:1,class:"status mx-2 text-red"},vm={key:2,class:"status mx-2"},km={key:0};function xm(e,t,n,s,r,a){const d=Wt,l=zt,g=Tt,c=B("LeftPanel"),f=hm,k=Zt;return o(),u("div",fm,[h(l,null,{default:x(()=>[h(d,null,{default:x(()=>{var y;return[p(C(e.loading?"Loading...":[(y=e.cat)==null?void 0:y.getName(),"NR-Editor"].filter(E=>E).join(" - ")),1)]}),_:1})]),_:1}),e.error?(o(),u("span",Cm,C(e.error),1)):e.loading?(o(),A(g,{key:1,progress:e.loading_progress,progress_max:e.loading_progress_max,progress_msg:e.loading_progress_msg},null,8,["progress","progress_max","progress_msg"])):e.cat?(o(),A(k,{key:2,class:"h-full",draggable:"",showMiddle:"",id:"catalogueView"},{left:x(()=>[(o(),A(c,{ref:"leftpanel",class:"h-full",catalogue:e.cat,defaults:e.defaults,key:e.key,keepalive:""},null,8,["catalogue","defaults"]))]),middle:x(()=>[e.store.selectedItem!=null?(o(),A(f,{key:0,catalogue:e.cat},null,8,["catalogue"])):m("",!0)]),_:1})):m("",!0),e.cat&&e.route_is_catalogue?(o(),A(Ze,{key:3,to:"#titlebar-content"},[i("span",ym,[p(" Editing "),e.self_or_imports_changed?(o(),u("img",_m)):m("",!0),p(" "+C(e.cat.name)+" ",1),i("span",Am,"v"+C(e.cat.revision),1)]),e.store.unsavedCount?(o(),u("button",{key:0,class:"bouton save ml-10px",onClick:t[0]||(t[0]=(...y)=>e.save_all&&e.save_all(...y))}," Save All ")):e.failed?(o(),u("span",bm,"failed to save")):(o(),u("span",vm,"saved")),e.systemFiles&&!e.systemFiles.allLoaded?(o(),u("button",{key:3,class:"bouton load ml-10px",onClick:t[1]||(t[1]=(...y)=>e.load_all&&e.load_all(...y))},[p("Load all "),e.loading_all?(o(),u("span",km,"("+C(e.loading_progress)+" / "+C(e.loading_progress_max)+")",1)):m("",!0)])):m("",!0)])):m("",!0)])}const Sm=_(pm,[["render",xm],["__scopeId","data-v-c750bbfa"]]);export{Sm as default};
//# sourceMappingURL=catalogue.85b1ca91.js.map
