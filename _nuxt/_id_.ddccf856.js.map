{"version":3,"file":"_id_.ddccf856.js","sources":["../../../../shared_components/CollapsibleBox.vue","../../../../components/scripts/ScriptArgument.vue","../../../../assets/bsicons/bullet.png","../../../../components/scripts/Script.vue","../../../../pages/scripts/[id].vue"],"sourcesContent":["<template>\n  <div\n    :class=\"{\n      box: !nobox && !noboxindent,\n      nobox: nobox,\n      nocollapse: !collapsible,\n      noboxindent: noboxindent,\n      verticalbox: collapsed && vertical,\n    }\"\n    class=\"collapsibleBox\"\n    :id=\"id\"\n  >\n    <h3\n      v-if=\"!notitle\"\n      :class=\"[\n        {\n          arrowTitle: collapsible,\n          normalTitle: !collapsible,\n          collapsed: collapsible && collapsed,\n          titleClickCollapsible: collapsible && !collapsed && titleCollapse,\n          titleClickEffect: collapsed || collapsible,\n        },\n        title,\n      ]\"\n      @click=\"titleSwitch\"\n    >\n      <img v-if=\"collapsible\" :src=\"dropdownSrc\" class=\"icon arrow\" @click.stop=\"collapseSwitch\" />\n      <slot name=\"title\" class=\"title\" />\n    </h3>\n    <div v-if=\"initiated\" v-show=\"!collapsed || !collapsible\" class=\"boxContent\">\n      <slot name=\"content\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  props: {\n    collapsible: {\n      type: Boolean,\n      default: true,\n    },\n\n    nobox: {\n      type: Boolean,\n      default: false,\n    },\n\n    noboxindent: {\n      type: Boolean,\n      default: false,\n    },\n\n    defcollapsed: {\n      type: Boolean,\n      default: true,\n    },\n\n    notitle: {\n      type: Boolean,\n      default: false,\n    },\n\n    title: {\n      type: String,\n      required: false,\n      default: \"titreCategory\",\n    },\n\n    vertical: {\n      type: Boolean,\n      default: false,\n    },\n\n    titleCollapse: {\n      type: Boolean,\n      default: true,\n    },\n    id: {\n      type: String,\n      required: false,\n    },\n  },\n  mounted() {\n    if (this.id && this.$route.hash) {\n      if (this.$route.hash.substring(1) === this.id && this.collapsed) {\n        this.$nextTick(() => {\n          this.collapseSwitch();\n          (this.$el as HTMLDivElement)?.scrollIntoView({ block: \"center\" });\n        });\n      }\n    }\n  },\n  data() {\n    return {\n      collapsed: true,\n      initiated: false,\n    };\n  },\n\n  created() {\n    if (!this.collapsible || this.defcollapsed == false) {\n      this.collapseSwitch();\n    }\n  },\n\n  computed: {\n    dropdownSrc() {\n      let n = 2;\n      if (this.$optionStore?.options?.appearence?.dropdownStyle) {\n        n = this.$optionStore.options.appearence.dropdownStyle;\n      }\n      let images = [`/assets/icons/right${n}.png`, `/assets/icons/down${n}.png`];\n      let index = this.collapsed ? 0 : 1;\n      if (this.vertical) {\n        index = 1 - index;\n      }\n      return images[index];\n    },\n  },\n\n  methods: {\n    collapseSwitch() {\n      this.collapsed = !this.collapsed;\n      this.initiated = true;\n      if (this.collapsed == false) {\n        this.$emit(\"open\");\n        this.$emit(\"change\");\n      } else {\n        this.$emit(\"close\");\n        this.$emit(\"change\");\n      }\n    },\n\n    titleSwitch() {\n      if (this.titleCollapse) {\n        this.collapseSwitch();\n      } else {\n        this.$emit(\"titleClick\");\n      }\n    },\n  },\n\n  watch: {\n    collapsible() {\n      this.initiated = true;\n    },\n  },\n};\n</script>\n<style scoped lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.arrowTitle :deep(label) {\n  cursor: pointer !important;\n}\n\n.arrowTitle.titleClickEffect {\n  cursor: pointer !important;\n}\n\n.arrowTitle {\n  position: relative;\n  padding: 5px;\n\n  img.arrow {\n    vertical-align: bottom;\n    margin-right: 5px;\n  }\n}\n\n.normalTitle {\n  position: relative;\n  padding-top: 5px;\n  padding-left: 5px;\n  font-size: $fontHeaderSize !important;\n  font-weight: bold;\n}\n\n.collapsibleBox.box {\n  padding: 0px !important;\n}\n\n.boxContent {\n  padding: 5px;\n}\n\n.nobox > .boxContent {\n  padding: 0px;\n}\n\n.collapsed {\n  filter: brightness(95%);\n}\n\n.titleClickCollapsible:hover {\n  filter: brightness(95%) !important;\n}\n\n.arrowTitle.collapsed:hover {\n  filter: brightness(105%) !important;\n}\n\n.verticalbox {\n  width: 25px;\n\n  h3 {\n    text-orientation: mixed;\n    writing-mode: vertical-rl;\n    padding-left: 0px !important;\n    padding-right: 0px !important;\n  }\n\n  img {\n    margin-bottom: 5px;\n  }\n}\n</style>\n","<template>\n  <div>\n    <span class=\"bold p-2px\">{{ arg.name ?? arg.type }}</span\n    ><span v-if=\"!arg.optional\">*</span> <span class=\"gray\" v-if=\"arg.description\">{{ arg.description }}</span>\n    <div v-for=\"(type, i) in types\">\n      <template v-if=\"type === 'catalogue[]'\">\n        <UtilAutocomplete\n          v-model=\"value\"\n          :options=\"[{ label: 'All Catalogues' }, ...system.getAllCatalogueFiles()]\"\n          :valueField=\"(o: Record<string, string> & BSIData) => o.label ?? catalogueName(o)\"\n          :filterField=\"(o: Record<string, string> & BSIData) => o.label ?? catalogueName(o)\"\n          class=\"max-w-300px w-100%\"\n        >\n          <template #option=\"{ option }\">\n            <div style=\"white-space: nowrap\">\n              <template v-if=\"option.label\">\n                <img class=\"mr-1 align-middle\" src=\"/assets/bsicons/bullet.png\" />{{ option.label }}\n              </template>\n              <template v-else>\n                <img class=\"mr-1 align-middle\" src=\"/assets/bsicons/catalogue.png\" />\n                {{ catalogueName(option) }}\n              </template>\n            </div>\n          </template>\n        </UtilAutocomplete>\n      </template>\n      <template v-else-if=\"type === 'catalogue'\">\n        <UtilAutocomplete\n          v-model=\"value\"\n          :options=\"system.getAllCatalogueFiles()\"\n          :valueField=\"(o: Record<string, string> & BSIData) => o.label ?? catalogueName(o)\"\n          :filterField=\"(o: Record<string, string> & BSIData) => o.label ?? catalogueName(o)\"\n          class=\"max-w-300px w-100%\"\n        >\n          <template #option=\"{ option }\">\n            <div style=\"white-space: nowrap\">\n              <img class=\"mr-1 align-middle\" src=\"/assets/bsicons/catalogue.png\" />\n              {{ option.name }}\n            </div>\n          </template>\n        </UtilAutocomplete>\n      </template>\n      <template v-else-if=\"type === 'string'\">\n        <EditableDiv v-model=\"value\" spellcheck=\"false\" style=\"font-family: monospace\" />\n      </template>\n      <template v-else-if=\"type === 'boolean' || type === 'toggle'\">\n        <input type=\"checkbox\" v-model=\"value\" />\n      </template>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { PropType } from \"nuxt/dist/app/compat/capi\";\nimport ScriptArgument from \"./ScriptArgument.vue\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport { getDataObject } from \"~/assets/shared/battlescribe/bs_main\";\nimport { BSIData } from \"~/assets/shared/battlescribe/bs_types\";\nimport EditableDiv from \"../util/EditableDiv.vue\";\n\nexport default defineComponent({\n  components: { EditableDiv },\n  props: {\n    arg: {\n      type: Object as PropType<{\n        name: string;\n        type: string | string[];\n        optional?: boolean;\n        description?: string;\n        default?: any;\n      }>,\n      required: true,\n    },\n    args: {\n      type: Array,\n      required: true,\n    },\n    system: {\n      type: GameSystemFiles,\n      required: true,\n    },\n    index: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  data() {\n    return { value: this.getDefaultValue(Array.isArray(this.arg.type) ? this.arg.type[0] : this.arg.type) as any };\n  },\n  methods: {\n    catalogueName(catalogue: BSIData) {\n      return getDataObject(catalogue).name;\n    },\n    async getArgument() {\n      const type = this.types[0];\n      const val = this.value;\n      switch (type) {\n        case \"catalogue[]\":\n          if (val === \"All Catalogues\") {\n            await this.system.loadAll();\n            const result = this.system.getAllLoadedCatalogues();\n            result.map((o) => o.processForEditor());\n            return result;\n          } else {\n            const catalogue = this.system\n              .getAllCatalogueFiles()\n              .map((o) => getDataObject(o))\n              .find((o) => o.name === val)!;\n            const result = await this.system.loadCatalogue({ targetId: catalogue.id });\n            result.processForEditor();\n            result.imports.map((o) => o.processForEditor());\n            return [result];\n          }\n        case \"catalogue\":\n          const catalogue = this.system\n            .getAllCatalogueFiles()\n            .map((o) => getDataObject(o))\n            .find((o) => o.name === val)!;\n          const result = await this.system.loadCatalogue({ targetId: catalogue.id });\n          result.processForEditor();\n          result.imports.map((o) => o.processForEditor());\n          return result;\n        default:\n          return val;\n      }\n    },\n    async updateArgument() {\n      const val = await this.getArgument();\n      this.args[this.index] = val;\n      return val;\n    },\n    getDefaultValue(str: string) {\n      if (this.arg.default !== undefined) return this.arg.default;\n      if (str === \"catalogue[]\") return \"All Catalogues\";\n    },\n  },\n  computed: {\n    types() {\n      return Array.isArray(this.arg.type) ? this.arg.type : [this.arg.type];\n    },\n  },\n});\n</script>\n<style lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.script {\n  margin-top: 2px;\n  border: 1px solid $box_border;\n}\n</style>\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TS1WqInYQcchQnSyIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdXFSdJES/9cUWsR4cNyPd/ced+8AoVZimtUxDmi6bSbjMTGdWRWDrwigF13oR0hmljEnSQl4jq97+Ph6F+VZ3uf+HD1q1mKATySeZYZpE28QT2/aBud94jAryCrxOfGYSRckfuS64vIb53yDBZ4ZNlPJeeIwsZhvY6WNWcHUiKeII6qmU76QdlnlvMVZK1VY8578haGsvrLMdZrDiGMRS5AgQkEFRZRgI0qrToqFJO3HPPxDDb9ELoVcRTByLKAMDXLDD/4Hv7u1cpMTblIoBgReHOdjBAjuAvWq43wfO079BPA/A1d6y1+uATOfpFdbWuQI6NsGLq5bmrIHXO4Ag0+GbMoNyU9TyOWA9zP6pgwwcAt0r7m9Nfdx+gCkqKvEDXBwCIzmKXvd492d7b39e6bZ3w8AS3J5R6xfBwAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+cFDgkROnWuuPQAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAABPUlEQVQY023OzUsCQQBA8TcqfpSwa7uQYKXmpbAuJVT7j0fBnvtgK0LFArVod2mDNF0EYWZgupR06Hd6xyf4MXp9M9PJJ8vlEoBSqcSG49Jq7AgAAdDtD8x89kVrt4njOABMJhNG4xcsu8Jhe1+I4fjVxFFI5/iIfD7PX1JKgrt7alvb5JLknUa9TjabZTgcEgQBAJ1Oh2azSaNeJ4xjMuk8xbYtpJT4vk8YhoRhiO/7SCmxbYt0npLTWqO1BmA6nTKbzQDQWqOUWnWmUCySJB8opfA8b/XneR5KKZLkg0KxiOgPnk2/1+Xs9AQhBMYYgFVfXd/QPjgks1mt4rgu5xeXRFGMMWAMRFHM+cUljuuyWa2ScyuWuHt4NI7jchsELBYLAMrlMrXaFmvr67gVS4jfp97gyfCPg/09AfANwseSxMxvrXsAAAAASUVORK5CYII=\"","<template>\n  <CollapsibleBox class=\"script mx-4px\">\n    <template #title>\n      {{ script.name }}\n    </template>\n    <template #content>\n      <span v-if=\"script.description\">Description:</span><span class=\"gray\">{{ script.description }}</span>\n      <div v-for=\"(arg, i) in script.arguments || []\">\n        <ScriptArgument :arg=\"arg\" :args=\"args\" :system=\"system\" :index=\"i\" ref=\"args\" />\n      </div>\n      <div>\n        <button class=\"bouton my-10px\" @click=\"run\" :disabled=\"running\">\n          <template v-if=\"running\">\n            <span class=\"gray\">...</span>\n          </template>\n          <template v-else>\n            <img src=\"/assets/icons/right2.png\" />\n            Run Script\n          </template>\n        </button>\n      </div>\n      <template v-if=\"result\">\n        <div class=\"bold\">Output:</div>\n\n        <div v-for=\"piece of outputArray\" class=\"output-element\">\n          <template v-if=\"['string', 'number'].includes(typeof piece)\">\n            <span class=\"output-html\" v-html=\"piece\"> </span>\n          </template>\n          <template v-else-if=\"Array.isArray(piece) && isEntryList(piece)\">\n            <div v-for=\"node in piece\" class=\"node\">\n              <template v-if=\"Array.isArray(node)\">\n                <NodePath\n                  :path=\"path(node[0])\"\n                  @click=\"store.goto(node[0])\"\n                  class=\"hover-darken cursor-pointer p-1px\"\n                  :text=\"node[1]\"\n                  @click.middle=\"debug(node[0].editorTypeName, node[0])\"\n                />\n              </template>\n              <template v-else>\n                <NodePath\n                  :path=\"path(node)\"\n                  @click=\"store.goto(node)\"\n                  class=\"hover-darken cursor-pointer p-1px\"\n                  @click.middle=\"debug(node.editorTypeName, node)\"\n                />\n              </template>\n            </div>\n            <!-- <div v-if=\"piece.length > 100\">\n              <span class=\"gray\"> ({{ piece.length - 100 }} hidden) </span>\n            </div> -->\n          </template>\n          <template v-else-if=\"isEntry(piece)\">\n            <NodePath\n              :path=\"path(piece)\"\n              @click=\"store.goto(piece)\"\n              class=\"hover-darken cursor-pointer p-1px\"\n              @click.middle=\"debug(piece.editorTypeName, piece)\"\n            />\n          </template>\n          <template v-else-if=\"isError(piece)\">\n            <div class=\"error\">{{ piece }}</div>\n          </template>\n          <template v-else=\"piece\">\n            <pre>\n              {{ JSON.stringify(piece, null, 2) }}\n            </pre>\n          </template>\n        </div>\n        <div v-if=\"outputArray.length == 0\">\n          <span class=\"gray\">None</span>\n        </div>\n      </template>\n    </template>\n  </CollapsibleBox>\n</template>\n<script lang=\"ts\">\nimport { PropType } from \"nuxt/dist/app/compat/capi\";\nimport ScriptArgument from \"./ScriptArgument.vue\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport { Base } from \"~/assets/shared/battlescribe/bs_main\";\nimport { EditorBase } from \"~/assets/shared/battlescribe/bs_main_catalogue\";\nimport { getEntryPathInfo } from \"~/assets/shared/battlescribe/bs_editor\";\nimport { useEditorStore } from \"~/stores/editorStore\";\nimport NodePath from \"../util/NodePath.vue\";\nexport default defineComponent({\n  components: { ScriptArgument, NodePath },\n\n  props: {\n    script: {\n      type: Object as PropType<{\n        name: string;\n        run: Function;\n        description?: string;\n        arguments?: {\n          name: string;\n          type: string | string[];\n        };\n        hooks: Record<string, Function>;\n      }>,\n      required: true,\n    },\n    system: {\n      type: GameSystemFiles,\n      required: true,\n    },\n  },\n  setup() {\n    return { store: useEditorStore() };\n  },\n  data() {\n    return { result: null as any, args: [], running: false };\n  },\n  methods: {\n    debug(...args: any[]) {\n      console.log(...args);\n    },\n    isEntry(entry: any) {\n      return entry instanceof Base;\n    },\n    isError(piece: any) {\n      return piece instanceof Error;\n    },\n    isEntryWithDesc(arr: any) {\n      return Array.isArray(arr) && arr.length === 2 && this.isEntry(arr[0]);\n    },\n    isEntryList(lst: Array<any>) {\n      if (lst.find((o) => !this.isEntry(o) && !this.isEntryWithDesc(o))) {\n        return false;\n      }\n      return lst.length > 0;\n    },\n    async run() {\n      this.result = null;\n      this.running = true;\n      await new Promise((resolve) => setTimeout(resolve, 1));\n      try {\n        const args = this.$refs.args ? await Promise.all((this.$refs.args as any[]).map((o) => o.getArgument())) : [];\n        this.store.scripts.add_script_hooks(this.script);\n        if (typeof this.script.run === \"function\") {\n          this.result = await this.script.run(...args);\n        } else if (this.script.hooks) {\n          this.result = `Added hooks: ${Object.keys(this.script.hooks)}`;\n        } else {\n          this.result = null;\n        }\n        console.log(this.script.name, this.result);\n      } catch (e) {\n        console.error(e);\n        console.log(typeof e, e instanceof Error);\n        this.result = e;\n      } finally {\n        globalThis.$result = this.result;\n        this.running = false;\n      }\n    },\n    path(base: EditorBase) {\n      const path = getEntryPathInfo(base);\n      return path;\n    },\n    other_path(link: EditorBase) {\n      return getEntryPathInfo(link);\n    },\n  },\n  computed: {\n    outputArray() {\n      return (Array.isArray(this.result) && !this.isEntryList(this.result) ? this.result : [this.result]).filter(\n        (o) => {\n          if (Array.isArray(o) && o.length === 0) return false;\n          if (o === null) return false;\n          if (o === undefined) return false;\n          return true;\n        }\n      );\n    },\n  },\n});\n</script>\n<style lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.script {\n  margin-top: 2px;\n  border: 1px solid $box_border;\n}\n:deep(.title) {\n  background-color: blue;\n}\n</style>\n","<template>\n  <div class=\"h-full overflow-y-auto\">\n    <template v-if=\"system\">\n      <div v-for=\"script in scripts\"> <RunScript :script=\"script\" :system=\"system\" /> </div>\n    </template>\n    <CollapsibleBox>\n      <template #title>Info</template>\n      <template #content>\n        <div class=\"info\">\n          <pre style=\"margin: 10px\">\nNote: this feature is not finished To add a new script: Create a folder named `scripts` in your data folder and\nadd a .js file with content like this:\n<code>\nexport default {\n  name: \"Display Selected\",\n  description: \"Returns the currently selected node(s)\",\n  arguments: [\n    {\n      name: \"catalogues\",\n      type: \"catalogue[]\"\n    },\n    {\n      name: \"query\",\n      type: \"string\"\n      optional: true,\n    },\n  ],\n  run(catalogues, query) {\n    return [`&lt;span style=\"font-weight: bold\"&gt;Selected nodes:&lt;/span&gt;`,$store.get_selections()]\n  }\n}\n</code>\n<span class=\"bold\">Output:</span>\nreturn one of or an array of: number | error | string | node[] | [node, string][]\nWill render html\n\n<span class=\"bold\">Running scripts:</span>\nCurrently only supports running scripts manually, but may support running hooks in the future such as on paste, on change, on load, etc\nYou may interact with the editor using the store (global variable `$store`, also available in the console)\nAvailable actions are in <a target=\"_blank\" href=\"https://github.com/giloushaker/nr-editor/blob/master/stores/editorStore.ts\">https://github.com/giloushaker/nr-editor/blob/master/stores/editorStore.ts</a>\nExample scripts (in typescript but only js is supported for non-default scripts): <a target=\"_blank\" href=\"https://github.com/giloushaker/nr-editor/tree/master/default-scripts\">https://github.com/giloushaker/nr-editor/tree/master/default-scripts</a>\nIf you want to use imports you have to bundle them into one js file with rollup/webpack\nIf you want to read/write local files you can use the functions in the global `$node`\n          </pre>\n        </div>\n      </template>\n    </CollapsibleBox>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { getDataObject } from \"~/assets/shared/battlescribe/bs_main\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport RunScript from \"~/components/scripts/Script.vue\";\nimport { useEditorStore } from \"~/stores/editorStore\";\n\nexport default defineComponent({\n  components: { RunScript },\n  setup() {\n    return { store: useEditorStore() };\n  },\n  data() {\n    const store = useEditorStore();\n    return {\n      system: null as GameSystemFiles | null,\n      scripts: [...store.scripts.get_default_scripts()],\n    };\n  },\n  async mounted() {\n    this.system = null;\n    this.system = await this.store.get_or_load_system((this.$route.params as { id: string }).id);\n    this.scripts.push(...(await this.store.scripts.get_scripts(this.system)));\n  },\n  methods: {},\n});\n</script>\n"],"names":["_sfc_main$3","_a","n","_c","_b","images","index","_hoisted_3","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_normalizeClass","_createCommentVNode","args","_hoisted_2","_withDirectives","_renderSlot","_sfc_main$2","EditableDiv","GameSystemFiles","catalogue","getDataObject","type","val","result","o","str","_imports_0","_hoisted_4","_hoisted_5","_createElementVNode","_hoisted_6","_hoisted_7","_hoisted_8","_resolveComponent","_toDisplayString","_createTextVNode","_Fragment","_renderList","i","_createBlock","_component_UtilAutocomplete","$event","_withCtx","option","_component_EditableDiv","_sfc_main$1","ScriptArgument","NodePath","useEditorStore","entry","Base","piece","arr","lst","resolve","base","getEntryPathInfo","link","_hoisted_10","_hoisted_13","_component_CollapsibleBox","__nuxt_component_0","_hoisted_1","arg","_createVNode","_component_ScriptArgument","node","_hoisted_9","_component_NodePath","_withModifiers","_hoisted_11","_sfc_main","RunScript","script","_component_RunScript"],"mappings":"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"}