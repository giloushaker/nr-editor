import{a as h,o as r,c as p,aN as g,O as f,b as o,w as m,v,B as A,t as y,p as u,n as c,V as x,i as O,F,D as E,g as _,E as b}from"./entry.d5c722fb.js";const C={emits:["update:modelValue","paste"],props:{modelValue:{type:[String,Number,Array]},placeholder:{type:String,default:""},is:{type:String,default:"div"},beforePaste:Function},methods:{change(e){var t;if(e.target){this.$emit("update:modelValue",e.target.innerText);const i=new CustomEvent("change",{bubbles:!0});(t=this.$el)==null||t.dispatchEvent(i)}},get(){return this.$refs.div},toHtml(e){return e.replace(/\n/g,"<br />")},decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},onpaste(e){var l,s;e.preventDefault();var t=this.decodeHtml(((l=e.clipboardData)==null?void 0:l.getData("text/plain"))??"");this.beforePaste&&(t=this.beforePaste(t)),document.execCommand("insertText",!1,t),this.$emit("update:modelValue",this.get().innerText);const i=new CustomEvent("change",{bubbles:!0});(s=this.$el)==null||s.dispatchEvent(i)}},mounted(){this.get().innerText=`${this.modelValue??""}`},watch:{modelValue(){this.get().innerText!=this.modelValue&&(this.get().innerText=`${this.modelValue??""}`)}}};function V(e,t,i,l,s,n){return r(),p(g(i.is),{placeholder:i.placeholder,class:"editableDiv",onInput:n.change,onPaste:n.onpaste,contenteditable:"true",ref:"div"},null,40,["placeholder","onInput","onPaste"])}const I=h(C,[["render",V],["__scopeId","data-v-9afedea6"]]),D={emits:["update:modelValue"],props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},valueField:{type:[String,Function],default:""},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},default:{type:Object},nullable:{type:Boolean,default:!1}},created(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,sleeping:this.lazy}},computed:{computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const e=this.textSearchRegex(this.searchPattern),t=[];this.nullable&&t.push({option:void 0});const i=this.computedOptions,l=this.max||i.length;for(let s=0;s<i.length;s++){const n=i[s];let d=this.getField(n);if(d&&d.match&&d.match(e)&&(t.push({option:n}),t.length>=l-1))break}return t}},methods:{getField(e){return this.filterField?this.filterField instanceof Function?this.filterField(e):e[this.filterField]:e},escapeRegex(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(e){const i=`^(?=.*\\b${this.escapeRegex(e).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(i,"i")},targetSelected(e){var l;let t=e.option;this.valueField&&(this.nullable&&!e.option?t=void 0:t=typeof this.valueField=="function"?this.valueField(e.option):e.option[this.valueField]);const i=(l=this.selectedOption)==null?void 0:l.option;this.selectedOption={option:e.option,selected:!0},this.$emit("update:modelValue",t),this.emitNativeChangeEvent(e.option,i)},emitNativeChangeEvent(e,t){var l;const i=new CustomEvent("change",{bubbles:!0,detail:{value:e,old:t}});(l=this.$el)==null||l.dispatchEvent(i)},reset(){if(this.searchPattern="",this.selectedOption=null,this.modelValue){let e=this.computedOptions.find(t=>{let i=t;return this.valueField&&(i=typeof this.valueField=="function"?this.valueField(t):t[this.valueField]),i===this.modelValue});e?this.selectedOption={option:e,selected:!0}:this.selectedOption=null}else this.default&&(this.selectedOption={option:this.default,selected:!0})},onClickOutside(){this.editing=!1},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},clicked(){this.editing=!1},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},watch:{options(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},modelValue(){this.editing||(this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset())},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const k={class:"autocomplete container"},B=["placeholder"],w={key:0,class:"gray"},S=["onClickCapture"];function Y(e,t,i,l,s,n){const d=f("click-outside");return r(),o("div",k,[s.editing?m((r(),o("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",onInput:t[0]||(t[0]=A((...a)=>n.suggest&&n.suggest(...a),["stop"])),onClick:t[1]||(t[1]=(...a)=>n.maySuggest&&n.maySuggest(...a)),"onUpdate:modelValue":t[2]||(t[2]=a=>s.searchPattern=a),placeholder:i.placeholder},null,40,B)),[[v,s.searchPattern],[d,n.onClickOutside]]):(r(),o("div",{key:1,onClick:t[3]||(t[3]=(...a)=>n.startEditing&&n.startEditing(...a)),class:"autocomplete-input"},[s.selectedOption?u(e.$slots,"option",c(x({key:1},s.selectedOption)),void 0,!0):(r(),o("span",w,y(i.placeholder),1))])),O("div",{class:b(["suggestions",{hidden:!s.editing}])},[(r(!0),o(F,null,E(n.foundOptions,a=>(r(),o("div",{onClickCapture:j=>n.targetSelected(a)},[u(e.$slots,"option",c(_(a)),void 0,!0)],40,S))),256))],2)])}const z=h(D,[["render",Y],["__scopeId","data-v-b83788ca"]]),P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TiyIVBzOICGaoThbEijhqFYpQIdQKrTqYXD+hSUOS4uIouBYc/FisOrg46+rgKgiCHyCuLk6KLlLi/5JCixgPjvvx7t7j7h0gNCpMs7omAE23zVQiLmWyq1L3K0IYgYgYJIVZxpwsJ+E7vu4R4OtdlGf5n/tz9OXyFgMCEvEsM0ybeIN4etM2OO8Ti6yk5IjPicdNuiDxI9dVj984F10WeKZoplPzxCKxVOxgtYNZydSIp4gjOU2nfCHjcY7zFmetUmOte/IXhvP6yjLXaQ4jgUUsQYYEFTWUUYGNKK06KRZStB/38Q+5fplcKrnKYORYQBUaFNcP/ge/u7UKsUkvKRwHQi+O8zEKdO8CzbrjfB87TvMECD4DV3rbX20AM5+k19ta5Ajo3wYurtuaugdc7gCDT4ZiKq4UpCkUCsD7GX1TFhi4BXrXvN5a+zh9ANLUVfIGODgExoqUve7z7p7O3v490+rvB80rcsuoyXg3AAAABmJLR0QA6AAAAADh5zdhAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5wUfFDQeXQWMGwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAG9SURBVCjPhdO/a1NRFMDx7733PfOiFcGhErUoBm1DwFH8DwQnR90KLiI4aAbd/DNsQVCHLh0EqyA4uPofBDMphaRU0FgiLcm75xyH9xrNj9IzHt6Xz708rqOch62nttvrMrh2j+PmwpmEV09uueRwsdvrcvf+Kpc3NljY3iZ4jy0vo60Wp6pVTlYqZFlGlqY8X3sJwDje6XXZXF/n9qWbrNbrALz+XeXLp58z8vcfS5OxqdFsNjmx72A4BCB1VWq12kSYpinfujtTsSmqihfBYix2oyHtdnsibjQamNpkrFrEQeM4rjhYWVkZh51Op/jOdDYWEZKYY5YD4OOIwWAwjr33iAgmc+QYI0Fy1Ao5iZFYnuJwYoyoynw5xBxzhRw0R0TGoXOukHX62CLEGEmiw1wpaz5flqNkdYTElXKckAFEBJ2WpZSDOh5n13HOcWf4da5sEmdjEWHt7A1k8SIhBF74KpX/ZDMr5HLn/8URVWXhapMkSQghkC7Vx/9fVTGz4np5eefNj5/t4GCfZ48eoKok3pNl2ZEvynvP8M+AN28/WDIaDdnr9zlXO8+7rfcs/rpy7JOsnY7s9fv8Bc0zE6+cxDjNAAAAAElFTkSuQmCC";export{I as E,z as _,P as a};
//# sourceMappingURL=catalogue.9c4fd67a.js.map
