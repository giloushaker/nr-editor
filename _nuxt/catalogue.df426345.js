import{a as h,o,b as d,O as p,w as g,v as f,t as m,m as u,n as c,V as A,i as v,F as y,D as x,g as O,E as F}from"./entry.0196033b.js";const _={emits:["change","update:modelValue","paste"],props:{modelValue:{type:[String,Number,Array]},placeholder:{type:String,default:""},beforePaste:Function},methods:{change(t){t.target&&(this.$emit("update:modelValue",t.target.outerText),this.$emit("change"))},get(){return this.$refs.div},toHtml(t){return t.replace(/\n/g,"<br />")},decodeHtml(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},onpaste(t){var i;t.preventDefault();var e=this.decodeHtml(((i=t.clipboardData)==null?void 0:i.getData("text/plain"))??"");this.beforePaste&&(e=this.beforePaste(e)),document.execCommand("insertText",!1,e),this.$emit("update:modelValue",this.get().innerText),this.$emit("change")}},mounted(){this.get().innerText=`${this.modelValue??""}`},watch:{modelValue(){this.get().innerText!=this.modelValue&&(this.get().innerText=`${this.modelValue??""}`)}}};const V=["placeholder"];function D(t,e,i,r,l,s){return o(),d("div",{placeholder:i.placeholder,class:"editableDiv",onInput:e[0]||(e[0]=(...a)=>s.change&&s.change(...a)),onPaste:e[1]||(e[1]=(...a)=>s.onpaste&&s.onpaste(...a)),contenteditable:"true",ref:"div"},null,40,V)}const w=h(_,[["render",D],["__scopeId","data-v-49b4fac8"]]),E={emits:["change","update:modelValue"],props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},valueField:{type:[String,Function],default:""},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},default:{type:Object},nullable:{type:Boolean,default:!1}},created(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,sleeping:this.lazy}},computed:{computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const t=this.textSearchRegex(this.searchPattern),e=[];this.nullable&&e.push({option:void 0});const i=this.computedOptions,r=this.max||i.length;for(let l=0;l<i.length;l++){const s=i[l];let a=this.getField(s);if(a&&a.match&&a.match(t)&&(e.push({option:s}),e.length>=r-1))break}return e}},methods:{getField(t){return this.filterField?this.filterField instanceof Function?this.filterField(t):t[this.filterField]:t},escapeRegex(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(t){const i=`^(?=.*\\b${this.escapeRegex(t).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(i,"i")},targetSelected(t){var r;let e=t.option;this.valueField&&(this.nullable&&!t.option?e=void 0:e=typeof this.valueField=="function"?this.valueField(t.option):t.option[this.valueField]);const i=(r=this.selectedOption)==null?void 0:r.option;this.selectedOption={option:t.option,selected:!0},this.$emit("update:modelValue",e),this.$emit("change",t.option,i)},reset(){if(this.searchPattern="",this.selectedOption=null,this.modelValue){let t=this.computedOptions.find(e=>{let i=e;return this.valueField&&(i=typeof this.valueField=="function"?this.valueField(e):e[this.valueField]),i===this.modelValue});t?this.selectedOption={option:t,selected:!0}:this.selectedOption=null}else this.default&&(this.selectedOption={option:this.default,selected:!0})},onClickOutside(){this.editing=!1},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},clicked(){this.editing=!1},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},watch:{options(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},modelValue(){this.editing||(this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset())},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const k={class:"autocomplete container"},C=["placeholder"],b={key:0,class:"gray"},B=["onClickCapture"];function S(t,e,i,r,l,s){const a=p("click-outside");return o(),d("div",k,[l.editing?g((o(),d("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",onInput:e[0]||(e[0]=(...n)=>s.suggest&&s.suggest(...n)),onClick:e[1]||(e[1]=(...n)=>s.maySuggest&&s.maySuggest(...n)),"onUpdate:modelValue":e[2]||(e[2]=n=>l.searchPattern=n),placeholder:i.placeholder},null,40,C)),[[f,l.searchPattern],[a,s.onClickOutside]]):(o(),d("div",{key:1,onClick:e[3]||(e[3]=(...n)=>s.startEditing&&s.startEditing(...n)),class:"autocomplete-input"},[l.selectedOption?u(t.$slots,"option",c(A({key:1},l.selectedOption)),void 0,!0):(o(),d("span",b,m(i.placeholder),1))])),v("div",{class:F(["suggestions",{hidden:!l.editing}])},[(o(!0),d(y,null,x(s.foundOptions,n=>(o(),d("div",{onClickCapture:Y=>s.targetSelected(n)},[u(t.$slots,"option",c(O(n)),void 0,!0)],40,B))),256))],2)])}const z=h(E,[["render",S],["__scopeId","data-v-fd471540"]]),I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TiyIVBzOICGaoThbEijhqFYpQIdQKrTqYXD+hSUOS4uIouBYc/FisOrg46+rgKgiCHyCuLk6KLlLi/5JCixgPjvvx7t7j7h0gNCpMs7omAE23zVQiLmWyq1L3K0IYgYgYJIVZxpwsJ+E7vu4R4OtdlGf5n/tz9OXyFgMCEvEsM0ybeIN4etM2OO8Ti6yk5IjPicdNuiDxI9dVj984F10WeKZoplPzxCKxVOxgtYNZydSIp4gjOU2nfCHjcY7zFmetUmOte/IXhvP6yjLXaQ4jgUUsQYYEFTWUUYGNKK06KRZStB/38Q+5fplcKrnKYORYQBUaFNcP/ge/u7UKsUkvKRwHQi+O8zEKdO8CzbrjfB87TvMECD4DV3rbX20AM5+k19ta5Ajo3wYurtuaugdc7gCDT4ZiKq4UpCkUCsD7GX1TFhi4BXrXvN5a+zh9ANLUVfIGODgExoqUve7z7p7O3v490+rvB80rcsuoyXg3AAAABmJLR0QA6AAAAADh5zdhAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5wUfFDQeXQWMGwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAG9SURBVCjPhdO/a1NRFMDx7733PfOiFcGhErUoBm1DwFH8DwQnR90KLiI4aAbd/DNsQVCHLh0EqyA4uPofBDMphaRU0FgiLcm75xyH9xrNj9IzHt6Xz708rqOch62nttvrMrh2j+PmwpmEV09uueRwsdvrcvf+Kpc3NljY3iZ4jy0vo60Wp6pVTlYqZFlGlqY8X3sJwDje6XXZXF/n9qWbrNbrALz+XeXLp58z8vcfS5OxqdFsNjmx72A4BCB1VWq12kSYpinfujtTsSmqihfBYix2oyHtdnsibjQamNpkrFrEQeM4rjhYWVkZh51Op/jOdDYWEZKYY5YD4OOIwWAwjr33iAgmc+QYI0Fy1Ao5iZFYnuJwYoyoynw5xBxzhRw0R0TGoXOukHX62CLEGEmiw1wpaz5flqNkdYTElXKckAFEBJ2WpZSDOh5n13HOcWf4da5sEmdjEWHt7A1k8SIhBF74KpX/ZDMr5HLn/8URVWXhapMkSQghkC7Vx/9fVTGz4np5eefNj5/t4GCfZ48eoKok3pNl2ZEvynvP8M+AN28/WDIaDdnr9zlXO8+7rfcs/rpy7JOsnY7s9fv8Bc0zE6+cxDjNAAAAAElFTkSuQmCC";export{w as E,z as _,I as a};
//# sourceMappingURL=catalogue.df426345.js.map
