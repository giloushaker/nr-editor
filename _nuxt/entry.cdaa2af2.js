var ho=Object.defineProperty;var po=(Zn,Jn,Xn)=>Jn in Zn?ho(Zn,Jn,{enumerable:!0,configurable:!0,writable:!0,value:Xn}):Zn[Jn]=Xn;var Zr=(Zn,Jn,Xn)=>(po(Zn,typeof Jn!="symbol"?Jn+"":Jn,Xn),Xn);function makeMap(Zn,Jn){const Xn=Object.create(null),Qn=Zn.split(",");for(let er=0;er<Qn.length;er++)Xn[Qn[er]]=!0;return Jn?er=>!!Xn[er.toLowerCase()]:er=>!!Xn[er]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=Zn=>onRE.test(Zn),isModelListener=Zn=>Zn.startsWith("onUpdate:"),extend=Object.assign,remove$1=(Zn,Jn)=>{const Xn=Zn.indexOf(Jn);Xn>-1&&Zn.splice(Xn,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Zn,Jn)=>hasOwnProperty$1.call(Zn,Jn),isArray$1=Array.isArray,isMap=Zn=>toTypeString(Zn)==="[object Map]",isSet=Zn=>toTypeString(Zn)==="[object Set]",isDate$1=Zn=>toTypeString(Zn)==="[object Date]",isRegExp=Zn=>toTypeString(Zn)==="[object RegExp]",isFunction=Zn=>typeof Zn=="function",isString=Zn=>typeof Zn=="string",isSymbol=Zn=>typeof Zn=="symbol",isObject$3=Zn=>Zn!==null&&typeof Zn=="object",isPromise=Zn=>isObject$3(Zn)&&isFunction(Zn.then)&&isFunction(Zn.catch),objectToString=Object.prototype.toString,toTypeString=Zn=>objectToString.call(Zn),toRawType=Zn=>toTypeString(Zn).slice(8,-1),isPlainObject$1=Zn=>toTypeString(Zn)==="[object Object]",isIntegerKey=Zn=>isString(Zn)&&Zn!=="NaN"&&Zn[0]!=="-"&&""+parseInt(Zn,10)===Zn,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=Zn=>{const Jn=Object.create(null);return Xn=>Jn[Xn]||(Jn[Xn]=Zn(Xn))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Zn=>Zn.replace(camelizeRE,(Jn,Xn)=>Xn?Xn.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Zn=>Zn.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(Zn=>Zn.charAt(0).toUpperCase()+Zn.slice(1)),toHandlerKey=cacheStringFunction(Zn=>Zn?`on${capitalize$1(Zn)}`:""),hasChanged=(Zn,Jn)=>!Object.is(Zn,Jn),invokeArrayFns=(Zn,Jn)=>{for(let Xn=0;Xn<Zn.length;Xn++)Zn[Xn](Jn)},def=(Zn,Jn,Xn)=>{Object.defineProperty(Zn,Jn,{configurable:!0,enumerable:!1,value:Xn})},looseToNumber=Zn=>{const Jn=parseFloat(Zn);return isNaN(Jn)?Zn:Jn},toNumber$2=Zn=>{const Jn=isString(Zn)?Number(Zn):NaN;return isNaN(Jn)?Zn:Jn};let _globalThis$2;const getGlobalThis=()=>_globalThis$2||(_globalThis$2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(Zn){if(isArray$1(Zn)){const Jn={};for(let Xn=0;Xn<Zn.length;Xn++){const Qn=Zn[Xn],er=isString(Qn)?parseStringStyle(Qn):normalizeStyle(Qn);if(er)for(const tr in er)Jn[tr]=er[tr]}return Jn}else{if(isString(Zn))return Zn;if(isObject$3(Zn))return Zn}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Zn){const Jn={};return Zn.replace(styleCommentRE,"").split(listDelimiterRE).forEach(Xn=>{if(Xn){const Qn=Xn.split(propertyDelimiterRE);Qn.length>1&&(Jn[Qn[0].trim()]=Qn[1].trim())}}),Jn}function normalizeClass(Zn){let Jn="";if(isString(Zn))Jn=Zn;else if(isArray$1(Zn))for(let Xn=0;Xn<Zn.length;Xn++){const Qn=normalizeClass(Zn[Xn]);Qn&&(Jn+=Qn+" ")}else if(isObject$3(Zn))for(const Xn in Zn)Zn[Xn]&&(Jn+=Xn+" ");return Jn.trim()}function normalizeProps(Zn){if(!Zn)return null;let{class:Jn,style:Xn}=Zn;return Jn&&!isString(Jn)&&(Zn.class=normalizeClass(Jn)),Xn&&(Zn.style=normalizeStyle(Xn)),Zn}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(Zn){return!!Zn||Zn===""}function looseCompareArrays(Zn,Jn){if(Zn.length!==Jn.length)return!1;let Xn=!0;for(let Qn=0;Xn&&Qn<Zn.length;Qn++)Xn=looseEqual(Zn[Qn],Jn[Qn]);return Xn}function looseEqual(Zn,Jn){if(Zn===Jn)return!0;let Xn=isDate$1(Zn),Qn=isDate$1(Jn);if(Xn||Qn)return Xn&&Qn?Zn.getTime()===Jn.getTime():!1;if(Xn=isSymbol(Zn),Qn=isSymbol(Jn),Xn||Qn)return Zn===Jn;if(Xn=isArray$1(Zn),Qn=isArray$1(Jn),Xn||Qn)return Xn&&Qn?looseCompareArrays(Zn,Jn):!1;if(Xn=isObject$3(Zn),Qn=isObject$3(Jn),Xn||Qn){if(!Xn||!Qn)return!1;const er=Object.keys(Zn).length,tr=Object.keys(Jn).length;if(er!==tr)return!1;for(const nr in Zn){const rr=Zn.hasOwnProperty(nr),sr=Jn.hasOwnProperty(nr);if(rr&&!sr||!rr&&sr||!looseEqual(Zn[nr],Jn[nr]))return!1}}return String(Zn)===String(Jn)}function looseIndexOf(Zn,Jn){return Zn.findIndex(Xn=>looseEqual(Xn,Jn))}const toDisplayString=Zn=>isString(Zn)?Zn:Zn==null?"":isArray$1(Zn)||isObject$3(Zn)&&(Zn.toString===objectToString||!isFunction(Zn.toString))?JSON.stringify(Zn,replacer,2):String(Zn),replacer=(Zn,Jn)=>Jn&&Jn.__v_isRef?replacer(Zn,Jn.value):isMap(Jn)?{[`Map(${Jn.size})`]:[...Jn.entries()].reduce((Xn,[Qn,er])=>(Xn[`${Qn} =>`]=er,Xn),{})}:isSet(Jn)?{[`Set(${Jn.size})`]:[...Jn.values()]}:isObject$3(Jn)&&!isArray$1(Jn)&&!isPlainObject$1(Jn)?String(Jn):Jn;let activeEffectScope;class EffectScope{constructor(Jn=!1){this.detached=Jn,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!Jn&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(Jn){if(this._active){const Xn=activeEffectScope;try{return activeEffectScope=this,Jn()}finally{activeEffectScope=Xn}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(Jn){if(this._active){let Xn,Qn;for(Xn=0,Qn=this.effects.length;Xn<Qn;Xn++)this.effects[Xn].stop();for(Xn=0,Qn=this.cleanups.length;Xn<Qn;Xn++)this.cleanups[Xn]();if(this.scopes)for(Xn=0,Qn=this.scopes.length;Xn<Qn;Xn++)this.scopes[Xn].stop(!0);if(!this.detached&&this.parent&&!Jn){const er=this.parent.scopes.pop();er&&er!==this&&(this.parent.scopes[this.index]=er,er.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(Zn){return new EffectScope(Zn)}function recordEffectScope(Zn,Jn=activeEffectScope){Jn&&Jn.active&&Jn.effects.push(Zn)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Zn){activeEffectScope&&activeEffectScope.cleanups.push(Zn)}const createDep=Zn=>{const Jn=new Set(Zn);return Jn.w=0,Jn.n=0,Jn},wasTracked=Zn=>(Zn.w&trackOpBit)>0,newTracked=Zn=>(Zn.n&trackOpBit)>0,initDepMarkers=({deps:Zn})=>{if(Zn.length)for(let Jn=0;Jn<Zn.length;Jn++)Zn[Jn].w|=trackOpBit},finalizeDepMarkers=Zn=>{const{deps:Jn}=Zn;if(Jn.length){let Xn=0;for(let Qn=0;Qn<Jn.length;Qn++){const er=Jn[Qn];wasTracked(er)&&!newTracked(er)?er.delete(Zn):Jn[Xn++]=er,er.w&=~trackOpBit,er.n&=~trackOpBit}Jn.length=Xn}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(Jn,Xn=null,Qn){this.fn=Jn,this.scheduler=Xn,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,Qn)}run(){if(!this.active)return this.fn();let Jn=activeEffect,Xn=shouldTrack;for(;Jn;){if(Jn===this)return;Jn=Jn.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=Xn,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(Zn){const{deps:Jn}=Zn;if(Jn.length){for(let Xn=0;Xn<Jn.length;Xn++)Jn[Xn].delete(Zn);Jn.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Zn=trackStack.pop();shouldTrack=Zn===void 0?!0:Zn}function track(Zn,Jn,Xn){if(shouldTrack&&activeEffect){let Qn=targetMap.get(Zn);Qn||targetMap.set(Zn,Qn=new Map);let er=Qn.get(Xn);er||Qn.set(Xn,er=createDep()),trackEffects(er)}}function trackEffects(Zn,Jn){let Xn=!1;effectTrackDepth<=maxMarkerBits?newTracked(Zn)||(Zn.n|=trackOpBit,Xn=!wasTracked(Zn)):Xn=!Zn.has(activeEffect),Xn&&(Zn.add(activeEffect),activeEffect.deps.push(Zn))}function trigger(Zn,Jn,Xn,Qn,er,tr){const nr=targetMap.get(Zn);if(!nr)return;let rr=[];if(Jn==="clear")rr=[...nr.values()];else if(Xn==="length"&&isArray$1(Zn)){const sr=Number(Qn);nr.forEach((ir,or)=>{(or==="length"||or>=sr)&&rr.push(ir)})}else switch(Xn!==void 0&&rr.push(nr.get(Xn)),Jn){case"add":isArray$1(Zn)?isIntegerKey(Xn)&&rr.push(nr.get("length")):(rr.push(nr.get(ITERATE_KEY)),isMap(Zn)&&rr.push(nr.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(Zn)||(rr.push(nr.get(ITERATE_KEY)),isMap(Zn)&&rr.push(nr.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Zn)&&rr.push(nr.get(ITERATE_KEY));break}if(rr.length===1)rr[0]&&triggerEffects(rr[0]);else{const sr=[];for(const ir of rr)ir&&sr.push(...ir);triggerEffects(createDep(sr))}}function triggerEffects(Zn,Jn){const Xn=isArray$1(Zn)?Zn:[...Zn];for(const Qn of Xn)Qn.computed&&triggerEffect(Qn);for(const Qn of Xn)Qn.computed||triggerEffect(Qn)}function triggerEffect(Zn,Jn){(Zn!==activeEffect||Zn.allowRecurse)&&(Zn.scheduler?Zn.scheduler():Zn.run())}function getDepFromReactive(Zn,Jn){var Xn;return(Xn=targetMap.get(Zn))==null?void 0:Xn.get(Jn)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Zn=>Zn!=="arguments"&&Zn!=="caller").map(Zn=>Symbol[Zn]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const Zn={};return["includes","indexOf","lastIndexOf"].forEach(Jn=>{Zn[Jn]=function(...Xn){const Qn=toRaw(this);for(let tr=0,nr=this.length;tr<nr;tr++)track(Qn,"get",tr+"");const er=Qn[Jn](...Xn);return er===-1||er===!1?Qn[Jn](...Xn.map(toRaw)):er}}),["push","pop","shift","unshift","splice"].forEach(Jn=>{Zn[Jn]=function(...Xn){pauseTracking();const Qn=toRaw(this)[Jn].apply(this,Xn);return resetTracking(),Qn}}),Zn}function hasOwnProperty(Zn){const Jn=toRaw(this);return track(Jn,"has",Zn),Jn.hasOwnProperty(Zn)}function createGetter(Zn=!1,Jn=!1){return function(Qn,er,tr){if(er==="__v_isReactive")return!Zn;if(er==="__v_isReadonly")return Zn;if(er==="__v_isShallow")return Jn;if(er==="__v_raw"&&tr===(Zn?Jn?shallowReadonlyMap:readonlyMap:Jn?shallowReactiveMap:reactiveMap).get(Qn))return Qn;const nr=isArray$1(Qn);if(!Zn){if(nr&&hasOwn(arrayInstrumentations,er))return Reflect.get(arrayInstrumentations,er,tr);if(er==="hasOwnProperty")return hasOwnProperty}const rr=Reflect.get(Qn,er,tr);return(isSymbol(er)?builtInSymbols.has(er):isNonTrackableKeys(er))||(Zn||track(Qn,"get",er),Jn)?rr:isRef(rr)?nr&&isIntegerKey(er)?rr:rr.value:isObject$3(rr)?Zn?readonly(rr):reactive(rr):rr}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(Zn=!1){return function(Xn,Qn,er,tr){let nr=Xn[Qn];if(isReadonly(nr)&&isRef(nr)&&!isRef(er))return!1;if(!Zn&&(!isShallow(er)&&!isReadonly(er)&&(nr=toRaw(nr),er=toRaw(er)),!isArray$1(Xn)&&isRef(nr)&&!isRef(er)))return nr.value=er,!0;const rr=isArray$1(Xn)&&isIntegerKey(Qn)?Number(Qn)<Xn.length:hasOwn(Xn,Qn),sr=Reflect.set(Xn,Qn,er,tr);return Xn===toRaw(tr)&&(rr?hasChanged(er,nr)&&trigger(Xn,"set",Qn,er):trigger(Xn,"add",Qn,er)),sr}}function deleteProperty(Zn,Jn){const Xn=hasOwn(Zn,Jn);Zn[Jn];const Qn=Reflect.deleteProperty(Zn,Jn);return Qn&&Xn&&trigger(Zn,"delete",Jn,void 0),Qn}function has$1(Zn,Jn){const Xn=Reflect.has(Zn,Jn);return(!isSymbol(Jn)||!builtInSymbols.has(Jn))&&track(Zn,"has",Jn),Xn}function ownKeys(Zn){return track(Zn,"iterate",isArray$1(Zn)?"length":ITERATE_KEY),Reflect.ownKeys(Zn)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(Zn,Jn){return!0},deleteProperty(Zn,Jn){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=Zn=>Zn,getProto=Zn=>Reflect.getPrototypeOf(Zn);function get$2(Zn,Jn,Xn=!1,Qn=!1){Zn=Zn.__v_raw;const er=toRaw(Zn),tr=toRaw(Jn);Xn||(Jn!==tr&&track(er,"get",Jn),track(er,"get",tr));const{has:nr}=getProto(er),rr=Qn?toShallow:Xn?toReadonly:toReactive;if(nr.call(er,Jn))return rr(Zn.get(Jn));if(nr.call(er,tr))return rr(Zn.get(tr));Zn!==er&&Zn.get(Jn)}function has$2(Zn,Jn=!1){const Xn=this.__v_raw,Qn=toRaw(Xn),er=toRaw(Zn);return Jn||(Zn!==er&&track(Qn,"has",Zn),track(Qn,"has",er)),Zn===er?Xn.has(Zn):Xn.has(Zn)||Xn.has(er)}function size(Zn,Jn=!1){return Zn=Zn.__v_raw,!Jn&&track(toRaw(Zn),"iterate",ITERATE_KEY),Reflect.get(Zn,"size",Zn)}function add$1(Zn){Zn=toRaw(Zn);const Jn=toRaw(this);return getProto(Jn).has.call(Jn,Zn)||(Jn.add(Zn),trigger(Jn,"add",Zn,Zn)),this}function set$2(Zn,Jn){Jn=toRaw(Jn);const Xn=toRaw(this),{has:Qn,get:er}=getProto(Xn);let tr=Qn.call(Xn,Zn);tr||(Zn=toRaw(Zn),tr=Qn.call(Xn,Zn));const nr=er.call(Xn,Zn);return Xn.set(Zn,Jn),tr?hasChanged(Jn,nr)&&trigger(Xn,"set",Zn,Jn):trigger(Xn,"add",Zn,Jn),this}function deleteEntry(Zn){const Jn=toRaw(this),{has:Xn,get:Qn}=getProto(Jn);let er=Xn.call(Jn,Zn);er||(Zn=toRaw(Zn),er=Xn.call(Jn,Zn)),Qn&&Qn.call(Jn,Zn);const tr=Jn.delete(Zn);return er&&trigger(Jn,"delete",Zn,void 0),tr}function clear(){const Zn=toRaw(this),Jn=Zn.size!==0,Xn=Zn.clear();return Jn&&trigger(Zn,"clear",void 0,void 0),Xn}function createForEach(Zn,Jn){return function(Qn,er){const tr=this,nr=tr.__v_raw,rr=toRaw(nr),sr=Jn?toShallow:Zn?toReadonly:toReactive;return!Zn&&track(rr,"iterate",ITERATE_KEY),nr.forEach((ir,or)=>Qn.call(er,sr(ir),sr(or),tr))}}function createIterableMethod(Zn,Jn,Xn){return function(...Qn){const er=this.__v_raw,tr=toRaw(er),nr=isMap(tr),rr=Zn==="entries"||Zn===Symbol.iterator&&nr,sr=Zn==="keys"&&nr,ir=er[Zn](...Qn),or=Xn?toShallow:Jn?toReadonly:toReactive;return!Jn&&track(tr,"iterate",sr?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ar,done:cr}=ir.next();return cr?{value:ar,done:cr}:{value:rr?[or(ar[0]),or(ar[1])]:or(ar),done:cr}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Zn){return function(...Jn){return Zn==="delete"?!1:this}}function createInstrumentations(){const Zn={get(tr){return get$2(this,tr)},get size(){return size(this)},has:has$2,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},Jn={get(tr){return get$2(this,tr,!1,!0)},get size(){return size(this)},has:has$2,add:add$1,set:set$2,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},Xn={get(tr){return get$2(this,tr,!0)},get size(){return size(this,!0)},has(tr){return has$2.call(this,tr,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},Qn={get(tr){return get$2(this,tr,!0,!0)},get size(){return size(this,!0)},has(tr){return has$2.call(this,tr,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(tr=>{Zn[tr]=createIterableMethod(tr,!1,!1),Xn[tr]=createIterableMethod(tr,!0,!1),Jn[tr]=createIterableMethod(tr,!1,!0),Qn[tr]=createIterableMethod(tr,!0,!0)}),[Zn,Xn,Jn,Qn]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(Zn,Jn){const Xn=Jn?Zn?shallowReadonlyInstrumentations:shallowInstrumentations:Zn?readonlyInstrumentations:mutableInstrumentations;return(Qn,er,tr)=>er==="__v_isReactive"?!Zn:er==="__v_isReadonly"?Zn:er==="__v_raw"?Qn:Reflect.get(hasOwn(Xn,er)&&er in Qn?Xn:Qn,er,tr)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Zn){switch(Zn){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Zn){return Zn.__v_skip||!Object.isExtensible(Zn)?0:targetTypeMap(toRawType(Zn))}function reactive(Zn){return isReadonly(Zn)?Zn:createReactiveObject(Zn,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Zn){return createReactiveObject(Zn,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Zn){return createReactiveObject(Zn,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(Zn,Jn,Xn,Qn,er){if(!isObject$3(Zn)||Zn.__v_raw&&!(Jn&&Zn.__v_isReactive))return Zn;const tr=er.get(Zn);if(tr)return tr;const nr=getTargetType(Zn);if(nr===0)return Zn;const rr=new Proxy(Zn,nr===2?Qn:Xn);return er.set(Zn,rr),rr}function isReactive(Zn){return isReadonly(Zn)?isReactive(Zn.__v_raw):!!(Zn&&Zn.__v_isReactive)}function isReadonly(Zn){return!!(Zn&&Zn.__v_isReadonly)}function isShallow(Zn){return!!(Zn&&Zn.__v_isShallow)}function isProxy(Zn){return isReactive(Zn)||isReadonly(Zn)}function toRaw(Zn){const Jn=Zn&&Zn.__v_raw;return Jn?toRaw(Jn):Zn}function markRaw(Zn){return def(Zn,"__v_skip",!0),Zn}const toReactive=Zn=>isObject$3(Zn)?reactive(Zn):Zn,toReadonly=Zn=>isObject$3(Zn)?readonly(Zn):Zn;function trackRefValue(Zn){shouldTrack&&activeEffect&&(Zn=toRaw(Zn),trackEffects(Zn.dep||(Zn.dep=createDep())))}function triggerRefValue(Zn,Jn){Zn=toRaw(Zn);const Xn=Zn.dep;Xn&&triggerEffects(Xn)}function isRef(Zn){return!!(Zn&&Zn.__v_isRef===!0)}function ref(Zn){return createRef(Zn,!1)}function shallowRef(Zn){return createRef(Zn,!0)}function createRef(Zn,Jn){return isRef(Zn)?Zn:new RefImpl(Zn,Jn)}class RefImpl{constructor(Jn,Xn){this.__v_isShallow=Xn,this.dep=void 0,this.__v_isRef=!0,this._rawValue=Xn?Jn:toRaw(Jn),this._value=Xn?Jn:toReactive(Jn)}get value(){return trackRefValue(this),this._value}set value(Jn){const Xn=this.__v_isShallow||isShallow(Jn)||isReadonly(Jn);Jn=Xn?Jn:toRaw(Jn),hasChanged(Jn,this._rawValue)&&(this._rawValue=Jn,this._value=Xn?Jn:toReactive(Jn),triggerRefValue(this))}}function unref(Zn){return isRef(Zn)?Zn.value:Zn}function toValue(Zn){return isFunction(Zn)?Zn():unref(Zn)}const shallowUnwrapHandlers={get:(Zn,Jn,Xn)=>unref(Reflect.get(Zn,Jn,Xn)),set:(Zn,Jn,Xn,Qn)=>{const er=Zn[Jn];return isRef(er)&&!isRef(Xn)?(er.value=Xn,!0):Reflect.set(Zn,Jn,Xn,Qn)}};function proxyRefs(Zn){return isReactive(Zn)?Zn:new Proxy(Zn,shallowUnwrapHandlers)}function toRefs(Zn){const Jn=isArray$1(Zn)?new Array(Zn.length):{};for(const Xn in Zn)Jn[Xn]=propertyToRef(Zn,Xn);return Jn}class ObjectRefImpl{constructor(Jn,Xn,Qn){this._object=Jn,this._key=Xn,this._defaultValue=Qn,this.__v_isRef=!0}get value(){const Jn=this._object[this._key];return Jn===void 0?this._defaultValue:Jn}set value(Jn){this._object[this._key]=Jn}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(Jn){this._getter=Jn,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(Zn,Jn,Xn){return isRef(Zn)?Zn:isFunction(Zn)?new GetterRefImpl(Zn):isObject$3(Zn)&&arguments.length>1?propertyToRef(Zn,Jn,Xn):ref(Zn)}function propertyToRef(Zn,Jn,Xn){const Qn=Zn[Jn];return isRef(Qn)?Qn:new ObjectRefImpl(Zn,Jn,Xn)}class ComputedRefImpl{constructor(Jn,Xn,Qn,er){this._setter=Xn,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(Jn,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!er,this.__v_isReadonly=Qn}get value(){const Jn=toRaw(this);return trackRefValue(Jn),(Jn._dirty||!Jn._cacheable)&&(Jn._dirty=!1,Jn._value=Jn.effect.run()),Jn._value}set value(Jn){this._setter(Jn)}}function computed$1(Zn,Jn,Xn=!1){let Qn,er;const tr=isFunction(Zn);return tr?(Qn=Zn,er=NOOP):(Qn=Zn.get,er=Zn.set),new ComputedRefImpl(Qn,er,tr||!er,Xn)}function warn(Zn,...Jn){}function callWithErrorHandling(Zn,Jn,Xn,Qn){let er;try{er=Qn?Zn(...Qn):Zn()}catch(tr){handleError(tr,Jn,Xn)}return er}function callWithAsyncErrorHandling(Zn,Jn,Xn,Qn){if(isFunction(Zn)){const tr=callWithErrorHandling(Zn,Jn,Xn,Qn);return tr&&isPromise(tr)&&tr.catch(nr=>{handleError(nr,Jn,Xn)}),tr}const er=[];for(let tr=0;tr<Zn.length;tr++)er.push(callWithAsyncErrorHandling(Zn[tr],Jn,Xn,Qn));return er}function handleError(Zn,Jn,Xn,Qn=!0){const er=Jn?Jn.vnode:null;if(Jn){let tr=Jn.parent;const nr=Jn.proxy,rr=Xn;for(;tr;){const ir=tr.ec;if(ir){for(let or=0;or<ir.length;or++)if(ir[or](Zn,nr,rr)===!1)return}tr=tr.parent}const sr=Jn.appContext.config.errorHandler;if(sr){callWithErrorHandling(sr,null,10,[Zn,nr,rr]);return}}logError(Zn,Xn,er,Qn)}function logError(Zn,Jn,Xn,Qn=!0){console.error(Zn)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Zn){const Jn=currentFlushPromise||resolvedPromise;return Zn?Jn.then(this?Zn.bind(this):Zn):Jn}function findInsertionIndex(Zn){let Jn=flushIndex+1,Xn=queue.length;for(;Jn<Xn;){const Qn=Jn+Xn>>>1;getId(queue[Qn])<Zn?Jn=Qn+1:Xn=Qn}return Jn}function queueJob(Zn){(!queue.length||!queue.includes(Zn,isFlushing&&Zn.allowRecurse?flushIndex+1:flushIndex))&&(Zn.id==null?queue.push(Zn):queue.splice(findInsertionIndex(Zn.id),0,Zn),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(Zn){const Jn=queue.indexOf(Zn);Jn>flushIndex&&queue.splice(Jn,1)}function queuePostFlushCb(Zn){isArray$1(Zn)?pendingPostFlushCbs.push(...Zn):(!activePostFlushCbs||!activePostFlushCbs.includes(Zn,Zn.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(Zn),queueFlush()}function flushPreFlushCbs(Zn,Jn=isFlushing?flushIndex+1:0){for(;Jn<queue.length;Jn++){const Xn=queue[Jn];Xn&&Xn.pre&&(queue.splice(Jn,1),Jn--,Xn())}}function flushPostFlushCbs(Zn){if(pendingPostFlushCbs.length){const Jn=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...Jn);return}for(activePostFlushCbs=Jn,activePostFlushCbs.sort((Xn,Qn)=>getId(Xn)-getId(Qn)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=Zn=>Zn.id==null?1/0:Zn.id,comparator=(Zn,Jn)=>{const Xn=getId(Zn)-getId(Jn);if(Xn===0){if(Zn.pre&&!Jn.pre)return-1;if(Jn.pre&&!Zn.pre)return 1}return Xn};function flushJobs(Zn){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const Jn=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const Xn=queue[flushIndex];Xn&&Xn.active!==!1&&callWithErrorHandling(Xn,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(Zn,Jn,...Xn){if(Zn.isUnmounted)return;const Qn=Zn.vnode.props||EMPTY_OBJ;let er=Xn;const tr=Jn.startsWith("update:"),nr=tr&&Jn.slice(7);if(nr&&nr in Qn){const or=`${nr==="modelValue"?"model":nr}Modifiers`,{number:ar,trim:cr}=Qn[or]||EMPTY_OBJ;cr&&(er=Xn.map(lr=>isString(lr)?lr.trim():lr)),ar&&(er=Xn.map(looseToNumber))}let rr,sr=Qn[rr=toHandlerKey(Jn)]||Qn[rr=toHandlerKey(camelize(Jn))];!sr&&tr&&(sr=Qn[rr=toHandlerKey(hyphenate(Jn))]),sr&&callWithAsyncErrorHandling(sr,Zn,6,er);const ir=Qn[rr+"Once"];if(ir){if(!Zn.emitted)Zn.emitted={};else if(Zn.emitted[rr])return;Zn.emitted[rr]=!0,callWithAsyncErrorHandling(ir,Zn,6,er)}}function normalizeEmitsOptions(Zn,Jn,Xn=!1){const Qn=Jn.emitsCache,er=Qn.get(Zn);if(er!==void 0)return er;const tr=Zn.emits;let nr={},rr=!1;if(!isFunction(Zn)){const sr=ir=>{const or=normalizeEmitsOptions(ir,Jn,!0);or&&(rr=!0,extend(nr,or))};!Xn&&Jn.mixins.length&&Jn.mixins.forEach(sr),Zn.extends&&sr(Zn.extends),Zn.mixins&&Zn.mixins.forEach(sr)}return!tr&&!rr?(isObject$3(Zn)&&Qn.set(Zn,null),null):(isArray$1(tr)?tr.forEach(sr=>nr[sr]=null):extend(nr,tr),isObject$3(Zn)&&Qn.set(Zn,nr),nr)}function isEmitListener(Zn,Jn){return!Zn||!isOn(Jn)?!1:(Jn=Jn.slice(2).replace(/Once$/,""),hasOwn(Zn,Jn[0].toLowerCase()+Jn.slice(1))||hasOwn(Zn,hyphenate(Jn))||hasOwn(Zn,Jn))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Zn){const Jn=currentRenderingInstance;return currentRenderingInstance=Zn,currentScopeId=Zn&&Zn.type.__scopeId||null,Jn}function pushScopeId(Zn){currentScopeId=Zn}function popScopeId(){currentScopeId=null}function withCtx(Zn,Jn=currentRenderingInstance,Xn){if(!Jn||Zn._n)return Zn;const Qn=(...er)=>{Qn._d&&setBlockTracking(-1);const tr=setCurrentRenderingInstance(Jn);let nr;try{nr=Zn(...er)}finally{setCurrentRenderingInstance(tr),Qn._d&&setBlockTracking(1)}return nr};return Qn._n=!0,Qn._c=!0,Qn._d=!0,Qn}function markAttrsAccessed(){}function renderComponentRoot(Zn){const{type:Jn,vnode:Xn,proxy:Qn,withProxy:er,props:tr,propsOptions:[nr],slots:rr,attrs:sr,emit:ir,render:or,renderCache:ar,data:cr,setupState:lr,ctx:hr,inheritAttrs:fr}=Zn;let gr,ur;const dr=setCurrentRenderingInstance(Zn);try{if(Xn.shapeFlag&4){const vr=er||Qn;gr=normalizeVNode(or.call(vr,vr,ar,tr,lr,cr,hr)),ur=sr}else{const vr=Jn;gr=normalizeVNode(vr.length>1?vr(tr,{attrs:sr,slots:rr,emit:ir}):vr(tr,null)),ur=Jn.props?sr:getFunctionalFallthrough(sr)}}catch(vr){blockStack.length=0,handleError(vr,Zn,1),gr=createVNode(Comment)}let yr=gr;if(ur&&fr!==!1){const vr=Object.keys(ur),{shapeFlag:_r}=yr;vr.length&&_r&7&&(nr&&vr.some(isModelListener)&&(ur=filterModelListeners(ur,nr)),yr=cloneVNode(yr,ur))}return Xn.dirs&&(yr=cloneVNode(yr),yr.dirs=yr.dirs?yr.dirs.concat(Xn.dirs):Xn.dirs),Xn.transition&&(yr.transition=Xn.transition),gr=yr,setCurrentRenderingInstance(dr),gr}function filterSingleRoot(Zn){let Jn;for(let Xn=0;Xn<Zn.length;Xn++){const Qn=Zn[Xn];if(isVNode(Qn)){if(Qn.type!==Comment||Qn.children==="v-if"){if(Jn)return;Jn=Qn}}else return}return Jn}const getFunctionalFallthrough=Zn=>{let Jn;for(const Xn in Zn)(Xn==="class"||Xn==="style"||isOn(Xn))&&((Jn||(Jn={}))[Xn]=Zn[Xn]);return Jn},filterModelListeners=(Zn,Jn)=>{const Xn={};for(const Qn in Zn)(!isModelListener(Qn)||!(Qn.slice(9)in Jn))&&(Xn[Qn]=Zn[Qn]);return Xn};function shouldUpdateComponent(Zn,Jn,Xn){const{props:Qn,children:er,component:tr}=Zn,{props:nr,children:rr,patchFlag:sr}=Jn,ir=tr.emitsOptions;if(Jn.dirs||Jn.transition)return!0;if(Xn&&sr>=0){if(sr&1024)return!0;if(sr&16)return Qn?hasPropsChanged(Qn,nr,ir):!!nr;if(sr&8){const or=Jn.dynamicProps;for(let ar=0;ar<or.length;ar++){const cr=or[ar];if(nr[cr]!==Qn[cr]&&!isEmitListener(ir,cr))return!0}}}else return(er||rr)&&(!rr||!rr.$stable)?!0:Qn===nr?!1:Qn?nr?hasPropsChanged(Qn,nr,ir):!0:!!nr;return!1}function hasPropsChanged(Zn,Jn,Xn){const Qn=Object.keys(Jn);if(Qn.length!==Object.keys(Zn).length)return!0;for(let er=0;er<Qn.length;er++){const tr=Qn[er];if(Jn[tr]!==Zn[tr]&&!isEmitListener(Xn,tr))return!0}return!1}function updateHOCHostEl({vnode:Zn,parent:Jn},Xn){for(;Jn&&Jn.subTree===Zn;)(Zn=Jn.vnode).el=Xn,Jn=Jn.parent}const isSuspense=Zn=>Zn.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Zn,Jn,Xn,Qn,er,tr,nr,rr,sr,ir){Zn==null?mountSuspense(Jn,Xn,Qn,er,tr,nr,rr,sr,ir):patchSuspense(Zn,Jn,Xn,Qn,er,nr,rr,sr,ir)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Zn,Jn){const Xn=Zn.props&&Zn.props[Jn];isFunction(Xn)&&Xn()}function mountSuspense(Zn,Jn,Xn,Qn,er,tr,nr,rr,sr){const{p:ir,o:{createElement:or}}=sr,ar=or("div"),cr=Zn.suspense=createSuspenseBoundary(Zn,er,Qn,Jn,ar,Xn,tr,nr,rr,sr);ir(null,cr.pendingBranch=Zn.ssContent,ar,null,Qn,cr,tr,nr),cr.deps>0?(triggerEvent(Zn,"onPending"),triggerEvent(Zn,"onFallback"),ir(null,Zn.ssFallback,Jn,Xn,Qn,null,tr,nr),setActiveBranch(cr,Zn.ssFallback)):cr.resolve(!1,!0)}function patchSuspense(Zn,Jn,Xn,Qn,er,tr,nr,rr,{p:sr,um:ir,o:{createElement:or}}){const ar=Jn.suspense=Zn.suspense;ar.vnode=Jn,Jn.el=Zn.el;const cr=Jn.ssContent,lr=Jn.ssFallback,{activeBranch:hr,pendingBranch:fr,isInFallback:gr,isHydrating:ur}=ar;if(fr)ar.pendingBranch=cr,isSameVNodeType(cr,fr)?(sr(fr,cr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0?ar.resolve():gr&&(sr(hr,lr,Xn,Qn,er,null,tr,nr,rr),setActiveBranch(ar,lr))):(ar.pendingId++,ur?(ar.isHydrating=!1,ar.activeBranch=fr):ir(fr,er,ar),ar.deps=0,ar.effects.length=0,ar.hiddenContainer=or("div"),gr?(sr(null,cr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0?ar.resolve():(sr(hr,lr,Xn,Qn,er,null,tr,nr,rr),setActiveBranch(ar,lr))):hr&&isSameVNodeType(cr,hr)?(sr(hr,cr,Xn,Qn,er,ar,tr,nr,rr),ar.resolve(!0)):(sr(null,cr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0&&ar.resolve()));else if(hr&&isSameVNodeType(cr,hr))sr(hr,cr,Xn,Qn,er,ar,tr,nr,rr),setActiveBranch(ar,cr);else if(triggerEvent(Jn,"onPending"),ar.pendingBranch=cr,ar.pendingId++,sr(null,cr,ar.hiddenContainer,null,er,ar,tr,nr,rr),ar.deps<=0)ar.resolve();else{const{timeout:dr,pendingId:yr}=ar;dr>0?setTimeout(()=>{ar.pendingId===yr&&ar.fallback(lr)},dr):dr===0&&ar.fallback(lr)}}function createSuspenseBoundary(Zn,Jn,Xn,Qn,er,tr,nr,rr,sr,ir,or=!1){const{p:ar,m:cr,um:lr,n:hr,o:{parentNode:fr,remove:gr}}=ir;let ur;const dr=isVNodeSuspensible(Zn);dr&&Jn!=null&&Jn.pendingBranch&&(ur=Jn.pendingId,Jn.deps++);const yr=Zn.props?toNumber$2(Zn.props.timeout):void 0,vr={vnode:Zn,parent:Jn,parentComponent:Xn,isSVG:nr,container:Qn,hiddenContainer:er,anchor:tr,deps:0,pendingId:0,timeout:typeof yr=="number"?yr:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:or,isUnmounted:!1,effects:[],resolve(_r=!1,kr=!1){const{vnode:Cr,activeBranch:br,pendingBranch:xr,pendingId:$r,effects:Mr,parentComponent:Ar,container:Rr}=vr;if(vr.isHydrating)vr.isHydrating=!1;else if(!_r){const qr=br&&xr.transition&&xr.transition.mode==="out-in";qr&&(br.transition.afterLeave=()=>{$r===vr.pendingId&&cr(xr,Rr,jr,0)});let{anchor:jr}=vr;br&&(jr=hr(br),lr(br,Ar,vr,!0)),qr||cr(xr,Rr,jr,0)}setActiveBranch(vr,xr),vr.pendingBranch=null,vr.isInFallback=!1;let mr=vr.parent,Fr=!1;for(;mr;){if(mr.pendingBranch){mr.effects.push(...Mr),Fr=!0;break}mr=mr.parent}Fr||queuePostFlushCb(Mr),vr.effects=[],dr&&Jn&&Jn.pendingBranch&&ur===Jn.pendingId&&(Jn.deps--,Jn.deps===0&&!kr&&Jn.resolve()),triggerEvent(Cr,"onResolve")},fallback(_r){if(!vr.pendingBranch)return;const{vnode:kr,activeBranch:Cr,parentComponent:br,container:xr,isSVG:$r}=vr;triggerEvent(kr,"onFallback");const Mr=hr(Cr),Ar=()=>{vr.isInFallback&&(ar(null,_r,xr,Mr,br,null,$r,rr,sr),setActiveBranch(vr,_r))},Rr=_r.transition&&_r.transition.mode==="out-in";Rr&&(Cr.transition.afterLeave=Ar),vr.isInFallback=!0,lr(Cr,br,null,!0),Rr||Ar()},move(_r,kr,Cr){vr.activeBranch&&cr(vr.activeBranch,_r,kr,Cr),vr.container=_r},next(){return vr.activeBranch&&hr(vr.activeBranch)},registerDep(_r,kr){const Cr=!!vr.pendingBranch;Cr&&vr.deps++;const br=_r.vnode.el;_r.asyncDep.catch(xr=>{handleError(xr,_r,0)}).then(xr=>{if(_r.isUnmounted||vr.isUnmounted||vr.pendingId!==_r.suspenseId)return;_r.asyncResolved=!0;const{vnode:$r}=_r;handleSetupResult(_r,xr,!1),br&&($r.el=br);const Mr=!br&&_r.subTree.el;kr(_r,$r,fr(br||_r.subTree.el),br?null:hr(_r.subTree),vr,nr,sr),Mr&&gr(Mr),updateHOCHostEl(_r,$r.el),Cr&&--vr.deps===0&&vr.resolve()})},unmount(_r,kr){vr.isUnmounted=!0,vr.activeBranch&&lr(vr.activeBranch,Xn,_r,kr),vr.pendingBranch&&lr(vr.pendingBranch,Xn,_r,kr)}};return vr}function hydrateSuspense(Zn,Jn,Xn,Qn,er,tr,nr,rr,sr){const ir=Jn.suspense=createSuspenseBoundary(Jn,Qn,Xn,Zn.parentNode,document.createElement("div"),null,er,tr,nr,rr,!0),or=sr(Zn,ir.pendingBranch=Jn.ssContent,Xn,ir,tr,nr);return ir.deps===0&&ir.resolve(!1,!0),or}function normalizeSuspenseChildren(Zn){const{shapeFlag:Jn,children:Xn}=Zn,Qn=Jn&32;Zn.ssContent=normalizeSuspenseSlot(Qn?Xn.default:Xn),Zn.ssFallback=Qn?normalizeSuspenseSlot(Xn.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Zn){let Jn;if(isFunction(Zn)){const Xn=isBlockTreeEnabled&&Zn._c;Xn&&(Zn._d=!1,openBlock()),Zn=Zn(),Xn&&(Zn._d=!0,Jn=currentBlock,closeBlock())}return isArray$1(Zn)&&(Zn=filterSingleRoot(Zn)),Zn=normalizeVNode(Zn),Jn&&!Zn.dynamicChildren&&(Zn.dynamicChildren=Jn.filter(Xn=>Xn!==Zn)),Zn}function queueEffectWithSuspense(Zn,Jn){Jn&&Jn.pendingBranch?isArray$1(Zn)?Jn.effects.push(...Zn):Jn.effects.push(Zn):queuePostFlushCb(Zn)}function setActiveBranch(Zn,Jn){Zn.activeBranch=Jn;const{vnode:Xn,parentComponent:Qn}=Zn,er=Xn.el=Jn.el;Qn&&Qn.subTree===Xn&&(Qn.vnode.el=er,updateHOCHostEl(Qn,er))}function isVNodeSuspensible(Zn){var Jn;return((Jn=Zn.props)==null?void 0:Jn.suspensible)!=null&&Zn.props.suspensible!==!1}function watchEffect(Zn,Jn){return doWatch(Zn,null,Jn)}function watchPostEffect(Zn,Jn){return doWatch(Zn,null,{flush:"post"})}const INITIAL_WATCHER_VALUE={};function watch(Zn,Jn,Xn){return doWatch(Zn,Jn,Xn)}function doWatch(Zn,Jn,{immediate:Xn,deep:Qn,flush:er,onTrack:tr,onTrigger:nr}=EMPTY_OBJ){var rr;const sr=getCurrentScope()===((rr=currentInstance)==null?void 0:rr.scope)?currentInstance:null;let ir,or=!1,ar=!1;if(isRef(Zn)?(ir=()=>Zn.value,or=isShallow(Zn)):isReactive(Zn)?(ir=()=>Zn,Qn=!0):isArray$1(Zn)?(ar=!0,or=Zn.some(vr=>isReactive(vr)||isShallow(vr)),ir=()=>Zn.map(vr=>{if(isRef(vr))return vr.value;if(isReactive(vr))return traverse(vr);if(isFunction(vr))return callWithErrorHandling(vr,sr,2)})):isFunction(Zn)?Jn?ir=()=>callWithErrorHandling(Zn,sr,2):ir=()=>{if(!(sr&&sr.isUnmounted))return cr&&cr(),callWithAsyncErrorHandling(Zn,sr,3,[lr])}:ir=NOOP,Jn&&Qn){const vr=ir;ir=()=>traverse(vr())}let cr,lr=vr=>{cr=dr.onStop=()=>{callWithErrorHandling(vr,sr,4)}},hr;if(isInSSRComponentSetup)if(lr=NOOP,Jn?Xn&&callWithAsyncErrorHandling(Jn,sr,3,[ir(),ar?[]:void 0,lr]):ir(),er==="sync"){const vr=useSSRContext();hr=vr.__watcherHandles||(vr.__watcherHandles=[])}else return NOOP;let fr=ar?new Array(Zn.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const gr=()=>{if(dr.active)if(Jn){const vr=dr.run();(Qn||or||(ar?vr.some((_r,kr)=>hasChanged(_r,fr[kr])):hasChanged(vr,fr)))&&(cr&&cr(),callWithAsyncErrorHandling(Jn,sr,3,[vr,fr===INITIAL_WATCHER_VALUE?void 0:ar&&fr[0]===INITIAL_WATCHER_VALUE?[]:fr,lr]),fr=vr)}else dr.run()};gr.allowRecurse=!!Jn;let ur;er==="sync"?ur=gr:er==="post"?ur=()=>queuePostRenderEffect(gr,sr&&sr.suspense):(gr.pre=!0,sr&&(gr.id=sr.uid),ur=()=>queueJob(gr));const dr=new ReactiveEffect(ir,ur);Jn?Xn?gr():fr=dr.run():er==="post"?queuePostRenderEffect(dr.run.bind(dr),sr&&sr.suspense):dr.run();const yr=()=>{dr.stop(),sr&&sr.scope&&remove$1(sr.scope.effects,dr)};return hr&&hr.push(yr),yr}function instanceWatch(Zn,Jn,Xn){const Qn=this.proxy,er=isString(Zn)?Zn.includes(".")?createPathGetter(Qn,Zn):()=>Qn[Zn]:Zn.bind(Qn,Qn);let tr;isFunction(Jn)?tr=Jn:(tr=Jn.handler,Xn=Jn);const nr=currentInstance;setCurrentInstance(this);const rr=doWatch(er,tr.bind(Qn),Xn);return nr?setCurrentInstance(nr):unsetCurrentInstance(),rr}function createPathGetter(Zn,Jn){const Xn=Jn.split(".");return()=>{let Qn=Zn;for(let er=0;er<Xn.length&&Qn;er++)Qn=Qn[Xn[er]];return Qn}}function traverse(Zn,Jn){if(!isObject$3(Zn)||Zn.__v_skip||(Jn=Jn||new Set,Jn.has(Zn)))return Zn;if(Jn.add(Zn),isRef(Zn))traverse(Zn.value,Jn);else if(isArray$1(Zn))for(let Xn=0;Xn<Zn.length;Xn++)traverse(Zn[Xn],Jn);else if(isSet(Zn)||isMap(Zn))Zn.forEach(Xn=>{traverse(Xn,Jn)});else if(isPlainObject$1(Zn))for(const Xn in Zn)traverse(Zn[Xn],Jn);return Zn}function withDirectives(Zn,Jn){const Xn=currentRenderingInstance;if(Xn===null)return Zn;const Qn=getExposeProxy(Xn)||Xn.proxy,er=Zn.dirs||(Zn.dirs=[]);for(let tr=0;tr<Jn.length;tr++){let[nr,rr,sr,ir=EMPTY_OBJ]=Jn[tr];nr&&(isFunction(nr)&&(nr={mounted:nr,updated:nr}),nr.deep&&traverse(rr),er.push({dir:nr,instance:Qn,value:rr,oldValue:void 0,arg:sr,modifiers:ir}))}return Zn}function invokeDirectiveHook(Zn,Jn,Xn,Qn){const er=Zn.dirs,tr=Jn&&Jn.dirs;for(let nr=0;nr<er.length;nr++){const rr=er[nr];tr&&(rr.oldValue=tr[nr].value);let sr=rr.dir[Qn];sr&&(pauseTracking(),callWithAsyncErrorHandling(sr,Xn,8,[Zn.el,rr,Zn,Jn]),resetTracking())}}function useTransitionState(){const Zn={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Zn.isMounted=!0}),onBeforeUnmount(()=>{Zn.isUnmounting=!0}),Zn}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Zn,{slots:Jn}){const Xn=getCurrentInstance(),Qn=useTransitionState();let er;return()=>{const tr=Jn.default&&getTransitionRawChildren(Jn.default(),!0);if(!tr||!tr.length)return;let nr=tr[0];if(tr.length>1){for(const fr of tr)if(fr.type!==Comment){nr=fr;break}}const rr=toRaw(Zn),{mode:sr}=rr;if(Qn.isLeaving)return emptyPlaceholder(nr);const ir=getKeepAliveChild(nr);if(!ir)return emptyPlaceholder(nr);const or=resolveTransitionHooks(ir,rr,Qn,Xn);setTransitionHooks(ir,or);const ar=Xn.subTree,cr=ar&&getKeepAliveChild(ar);let lr=!1;const{getTransitionKey:hr}=ir.type;if(hr){const fr=hr();er===void 0?er=fr:fr!==er&&(er=fr,lr=!0)}if(cr&&cr.type!==Comment&&(!isSameVNodeType(ir,cr)||lr)){const fr=resolveTransitionHooks(cr,rr,Qn,Xn);if(setTransitionHooks(cr,fr),sr==="out-in")return Qn.isLeaving=!0,fr.afterLeave=()=>{Qn.isLeaving=!1,Xn.update.active!==!1&&Xn.update()},emptyPlaceholder(nr);sr==="in-out"&&ir.type!==Comment&&(fr.delayLeave=(gr,ur,dr)=>{const yr=getLeavingNodesForType(Qn,cr);yr[String(cr.key)]=cr,gr._leaveCb=()=>{ur(),gr._leaveCb=void 0,delete or.delayedLeave},or.delayedLeave=dr})}return nr}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Zn,Jn){const{leavingVNodes:Xn}=Zn;let Qn=Xn.get(Jn.type);return Qn||(Qn=Object.create(null),Xn.set(Jn.type,Qn)),Qn}function resolveTransitionHooks(Zn,Jn,Xn,Qn){const{appear:er,mode:tr,persisted:nr=!1,onBeforeEnter:rr,onEnter:sr,onAfterEnter:ir,onEnterCancelled:or,onBeforeLeave:ar,onLeave:cr,onAfterLeave:lr,onLeaveCancelled:hr,onBeforeAppear:fr,onAppear:gr,onAfterAppear:ur,onAppearCancelled:dr}=Jn,yr=String(Zn.key),vr=getLeavingNodesForType(Xn,Zn),_r=(br,xr)=>{br&&callWithAsyncErrorHandling(br,Qn,9,xr)},kr=(br,xr)=>{const $r=xr[1];_r(br,xr),isArray$1(br)?br.every(Mr=>Mr.length<=1)&&$r():br.length<=1&&$r()},Cr={mode:tr,persisted:nr,beforeEnter(br){let xr=rr;if(!Xn.isMounted)if(er)xr=fr||rr;else return;br._leaveCb&&br._leaveCb(!0);const $r=vr[yr];$r&&isSameVNodeType(Zn,$r)&&$r.el._leaveCb&&$r.el._leaveCb(),_r(xr,[br])},enter(br){let xr=sr,$r=ir,Mr=or;if(!Xn.isMounted)if(er)xr=gr||sr,$r=ur||ir,Mr=dr||or;else return;let Ar=!1;const Rr=br._enterCb=mr=>{Ar||(Ar=!0,mr?_r(Mr,[br]):_r($r,[br]),Cr.delayedLeave&&Cr.delayedLeave(),br._enterCb=void 0)};xr?kr(xr,[br,Rr]):Rr()},leave(br,xr){const $r=String(Zn.key);if(br._enterCb&&br._enterCb(!0),Xn.isUnmounting)return xr();_r(ar,[br]);let Mr=!1;const Ar=br._leaveCb=Rr=>{Mr||(Mr=!0,xr(),Rr?_r(hr,[br]):_r(lr,[br]),br._leaveCb=void 0,vr[$r]===Zn&&delete vr[$r])};vr[$r]=Zn,cr?kr(cr,[br,Ar]):Ar()},clone(br){return resolveTransitionHooks(br,Jn,Xn,Qn)}};return Cr}function emptyPlaceholder(Zn){if(isKeepAlive(Zn))return Zn=cloneVNode(Zn),Zn.children=null,Zn}function getKeepAliveChild(Zn){return isKeepAlive(Zn)?Zn.children?Zn.children[0]:void 0:Zn}function setTransitionHooks(Zn,Jn){Zn.shapeFlag&6&&Zn.component?setTransitionHooks(Zn.component.subTree,Jn):Zn.shapeFlag&128?(Zn.ssContent.transition=Jn.clone(Zn.ssContent),Zn.ssFallback.transition=Jn.clone(Zn.ssFallback)):Zn.transition=Jn}function getTransitionRawChildren(Zn,Jn=!1,Xn){let Qn=[],er=0;for(let tr=0;tr<Zn.length;tr++){let nr=Zn[tr];const rr=Xn==null?nr.key:String(Xn)+String(nr.key!=null?nr.key:tr);nr.type===Fragment?(nr.patchFlag&128&&er++,Qn=Qn.concat(getTransitionRawChildren(nr.children,Jn,rr))):(Jn||nr.type!==Comment)&&Qn.push(rr!=null?cloneVNode(nr,{key:rr}):nr)}if(er>1)for(let tr=0;tr<Qn.length;tr++)Qn[tr].patchFlag=-2;return Qn}function defineComponent(Zn,Jn){return isFunction(Zn)?(()=>extend({name:Zn.name},Jn,{setup:Zn}))():Zn}const isAsyncWrapper=Zn=>!!Zn.type.__asyncLoader;function defineAsyncComponent(Zn){isFunction(Zn)&&(Zn={loader:Zn});const{loader:Jn,loadingComponent:Xn,errorComponent:Qn,delay:er=200,timeout:tr,suspensible:nr=!0,onError:rr}=Zn;let sr=null,ir,or=0;const ar=()=>(or++,sr=null,cr()),cr=()=>{let lr;return sr||(lr=sr=Jn().catch(hr=>{if(hr=hr instanceof Error?hr:new Error(String(hr)),rr)return new Promise((fr,gr)=>{rr(hr,()=>fr(ar()),()=>gr(hr),or+1)});throw hr}).then(hr=>lr!==sr&&sr?sr:(hr&&(hr.__esModule||hr[Symbol.toStringTag]==="Module")&&(hr=hr.default),ir=hr,hr)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:cr,get __asyncResolved(){return ir},setup(){const lr=currentInstance;if(ir)return()=>createInnerComp(ir,lr);const hr=dr=>{sr=null,handleError(dr,lr,13,!Qn)};if(nr&&lr.suspense||isInSSRComponentSetup)return cr().then(dr=>()=>createInnerComp(dr,lr)).catch(dr=>(hr(dr),()=>Qn?createVNode(Qn,{error:dr}):null));const fr=ref(!1),gr=ref(),ur=ref(!!er);return er&&setTimeout(()=>{ur.value=!1},er),tr!=null&&setTimeout(()=>{if(!fr.value&&!gr.value){const dr=new Error(`Async component timed out after ${tr}ms.`);hr(dr),gr.value=dr}},tr),cr().then(()=>{fr.value=!0,lr.parent&&isKeepAlive(lr.parent.vnode)&&queueJob(lr.parent.update)}).catch(dr=>{hr(dr),gr.value=dr}),()=>{if(fr.value&&ir)return createInnerComp(ir,lr);if(gr.value&&Qn)return createVNode(Qn,{error:gr.value});if(Xn&&!ur.value)return createVNode(Xn)}}})}function createInnerComp(Zn,Jn){const{ref:Xn,props:Qn,children:er,ce:tr}=Jn.vnode,nr=createVNode(Zn,Qn,er);return nr.ref=Xn,nr.ce=tr,delete Jn.vnode.ce,nr}const isKeepAlive=Zn=>Zn.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Zn,{slots:Jn}){const Xn=getCurrentInstance(),Qn=Xn.ctx;if(!Qn.renderer)return()=>{const dr=Jn.default&&Jn.default();return dr&&dr.length===1?dr[0]:dr};const er=new Map,tr=new Set;let nr=null;const rr=Xn.suspense,{renderer:{p:sr,m:ir,um:or,o:{createElement:ar}}}=Qn,cr=ar("div");Qn.activate=(dr,yr,vr,_r,kr)=>{const Cr=dr.component;ir(dr,yr,vr,0,rr),sr(Cr.vnode,dr,yr,vr,Cr,rr,_r,dr.slotScopeIds,kr),queuePostRenderEffect(()=>{Cr.isDeactivated=!1,Cr.a&&invokeArrayFns(Cr.a);const br=dr.props&&dr.props.onVnodeMounted;br&&invokeVNodeHook(br,Cr.parent,dr)},rr)},Qn.deactivate=dr=>{const yr=dr.component;ir(dr,cr,null,1,rr),queuePostRenderEffect(()=>{yr.da&&invokeArrayFns(yr.da);const vr=dr.props&&dr.props.onVnodeUnmounted;vr&&invokeVNodeHook(vr,yr.parent,dr),yr.isDeactivated=!0},rr)};function lr(dr){resetShapeFlag(dr),or(dr,Xn,rr,!0)}function hr(dr){er.forEach((yr,vr)=>{const _r=getComponentName(yr.type);_r&&(!dr||!dr(_r))&&fr(vr)})}function fr(dr){const yr=er.get(dr);!nr||!isSameVNodeType(yr,nr)?lr(yr):nr&&resetShapeFlag(nr),er.delete(dr),tr.delete(dr)}watch(()=>[Zn.include,Zn.exclude],([dr,yr])=>{dr&&hr(vr=>matches(dr,vr)),yr&&hr(vr=>!matches(yr,vr))},{flush:"post",deep:!0});let gr=null;const ur=()=>{gr!=null&&er.set(gr,getInnerChild(Xn.subTree))};return onMounted(ur),onUpdated(ur),onBeforeUnmount(()=>{er.forEach(dr=>{const{subTree:yr,suspense:vr}=Xn,_r=getInnerChild(yr);if(dr.type===_r.type&&dr.key===_r.key){resetShapeFlag(_r);const kr=_r.component.da;kr&&queuePostRenderEffect(kr,vr);return}lr(dr)})}),()=>{if(gr=null,!Jn.default)return null;const dr=Jn.default(),yr=dr[0];if(dr.length>1)return nr=null,dr;if(!isVNode(yr)||!(yr.shapeFlag&4)&&!(yr.shapeFlag&128))return nr=null,yr;let vr=getInnerChild(yr);const _r=vr.type,kr=getComponentName(isAsyncWrapper(vr)?vr.type.__asyncResolved||{}:_r),{include:Cr,exclude:br,max:xr}=Zn;if(Cr&&(!kr||!matches(Cr,kr))||br&&kr&&matches(br,kr))return nr=vr,yr;const $r=vr.key==null?_r:vr.key,Mr=er.get($r);return vr.el&&(vr=cloneVNode(vr),yr.shapeFlag&128&&(yr.ssContent=vr)),gr=$r,Mr?(vr.el=Mr.el,vr.component=Mr.component,vr.transition&&setTransitionHooks(vr,vr.transition),vr.shapeFlag|=512,tr.delete($r),tr.add($r)):(tr.add($r),xr&&tr.size>parseInt(xr,10)&&fr(tr.values().next().value)),vr.shapeFlag|=256,nr=vr,isSuspense(yr.type)?yr:vr}}},KeepAlive=KeepAliveImpl;function matches(Zn,Jn){return isArray$1(Zn)?Zn.some(Xn=>matches(Xn,Jn)):isString(Zn)?Zn.split(",").includes(Jn):isRegExp(Zn)?Zn.test(Jn):!1}function onActivated(Zn,Jn){registerKeepAliveHook(Zn,"a",Jn)}function onDeactivated(Zn,Jn){registerKeepAliveHook(Zn,"da",Jn)}function registerKeepAliveHook(Zn,Jn,Xn=currentInstance){const Qn=Zn.__wdc||(Zn.__wdc=()=>{let er=Xn;for(;er;){if(er.isDeactivated)return;er=er.parent}return Zn()});if(injectHook(Jn,Qn,Xn),Xn){let er=Xn.parent;for(;er&&er.parent;)isKeepAlive(er.parent.vnode)&&injectToKeepAliveRoot(Qn,Jn,Xn,er),er=er.parent}}function injectToKeepAliveRoot(Zn,Jn,Xn,Qn){const er=injectHook(Jn,Zn,Qn,!0);onUnmounted(()=>{remove$1(Qn[Jn],er)},Xn)}function resetShapeFlag(Zn){Zn.shapeFlag&=-257,Zn.shapeFlag&=-513}function getInnerChild(Zn){return Zn.shapeFlag&128?Zn.ssContent:Zn}function injectHook(Zn,Jn,Xn=currentInstance,Qn=!1){if(Xn){const er=Xn[Zn]||(Xn[Zn]=[]),tr=Jn.__weh||(Jn.__weh=(...nr)=>{if(Xn.isUnmounted)return;pauseTracking(),setCurrentInstance(Xn);const rr=callWithAsyncErrorHandling(Jn,Xn,Zn,nr);return unsetCurrentInstance(),resetTracking(),rr});return Qn?er.unshift(tr):er.push(tr),tr}}const createHook=Zn=>(Jn,Xn=currentInstance)=>(!isInSSRComponentSetup||Zn==="sp")&&injectHook(Zn,(...Qn)=>Jn(...Qn),Xn),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Zn,Jn=currentInstance){injectHook("ec",Zn,Jn)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Zn,Jn){return resolveAsset(COMPONENTS,Zn,!0,Jn)||Zn}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Zn){return isString(Zn)?resolveAsset(COMPONENTS,Zn,!1)||Zn:Zn||NULL_DYNAMIC_COMPONENT}function resolveDirective(Zn){return resolveAsset(DIRECTIVES,Zn)}function resolveAsset(Zn,Jn,Xn=!0,Qn=!1){const er=currentRenderingInstance||currentInstance;if(er){const tr=er.type;if(Zn===COMPONENTS){const rr=getComponentName(tr,!1);if(rr&&(rr===Jn||rr===camelize(Jn)||rr===capitalize$1(camelize(Jn))))return tr}const nr=resolve(er[Zn]||tr[Zn],Jn)||resolve(er.appContext[Zn],Jn);return!nr&&Qn?tr:nr}}function resolve(Zn,Jn){return Zn&&(Zn[Jn]||Zn[camelize(Jn)]||Zn[capitalize$1(camelize(Jn))])}function renderList(Zn,Jn,Xn,Qn){let er;const tr=Xn&&Xn[Qn];if(isArray$1(Zn)||isString(Zn)){er=new Array(Zn.length);for(let nr=0,rr=Zn.length;nr<rr;nr++)er[nr]=Jn(Zn[nr],nr,void 0,tr&&tr[nr])}else if(typeof Zn=="number"){er=new Array(Zn);for(let nr=0;nr<Zn;nr++)er[nr]=Jn(nr+1,nr,void 0,tr&&tr[nr])}else if(isObject$3(Zn))if(Zn[Symbol.iterator])er=Array.from(Zn,(nr,rr)=>Jn(nr,rr,void 0,tr&&tr[rr]));else{const nr=Object.keys(Zn);er=new Array(nr.length);for(let rr=0,sr=nr.length;rr<sr;rr++){const ir=nr[rr];er[rr]=Jn(Zn[ir],ir,rr,tr&&tr[rr])}}else er=[];return Xn&&(Xn[Qn]=er),er}function renderSlot(Zn,Jn,Xn={},Qn,er){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return Jn!=="default"&&(Xn.name=Jn),createVNode("slot",Xn,Qn&&Qn());let tr=Zn[Jn];tr&&tr._c&&(tr._d=!1),openBlock();const nr=tr&&ensureValidVNode(tr(Xn)),rr=createBlock(Fragment,{key:Xn.key||nr&&nr.key||`_${Jn}`},nr||(Qn?Qn():[]),nr&&Zn._===1?64:-2);return!er&&rr.scopeId&&(rr.slotScopeIds=[rr.scopeId+"-s"]),tr&&tr._c&&(tr._d=!0),rr}function ensureValidVNode(Zn){return Zn.some(Jn=>isVNode(Jn)?!(Jn.type===Comment||Jn.type===Fragment&&!ensureValidVNode(Jn.children)):!0)?Zn:null}const getPublicInstance=Zn=>Zn?isStatefulComponent(Zn)?getExposeProxy(Zn)||Zn.proxy:getPublicInstance(Zn.parent):null,publicPropertiesMap=extend(Object.create(null),{$:Zn=>Zn,$el:Zn=>Zn.vnode.el,$data:Zn=>Zn.data,$props:Zn=>Zn.props,$attrs:Zn=>Zn.attrs,$slots:Zn=>Zn.slots,$refs:Zn=>Zn.refs,$parent:Zn=>getPublicInstance(Zn.parent),$root:Zn=>getPublicInstance(Zn.root),$emit:Zn=>Zn.emit,$options:Zn=>resolveMergedOptions(Zn),$forceUpdate:Zn=>Zn.f||(Zn.f=()=>queueJob(Zn.update)),$nextTick:Zn=>Zn.n||(Zn.n=nextTick.bind(Zn.proxy)),$watch:Zn=>instanceWatch.bind(Zn)}),hasSetupBinding=(Zn,Jn)=>Zn!==EMPTY_OBJ&&!Zn.__isScriptSetup&&hasOwn(Zn,Jn),PublicInstanceProxyHandlers={get({_:Zn},Jn){const{ctx:Xn,setupState:Qn,data:er,props:tr,accessCache:nr,type:rr,appContext:sr}=Zn;let ir;if(Jn[0]!=="$"){const lr=nr[Jn];if(lr!==void 0)switch(lr){case 1:return Qn[Jn];case 2:return er[Jn];case 4:return Xn[Jn];case 3:return tr[Jn]}else{if(hasSetupBinding(Qn,Jn))return nr[Jn]=1,Qn[Jn];if(er!==EMPTY_OBJ&&hasOwn(er,Jn))return nr[Jn]=2,er[Jn];if((ir=Zn.propsOptions[0])&&hasOwn(ir,Jn))return nr[Jn]=3,tr[Jn];if(Xn!==EMPTY_OBJ&&hasOwn(Xn,Jn))return nr[Jn]=4,Xn[Jn];shouldCacheAccess&&(nr[Jn]=0)}}const or=publicPropertiesMap[Jn];let ar,cr;if(or)return Jn==="$attrs"&&track(Zn,"get",Jn),or(Zn);if((ar=rr.__cssModules)&&(ar=ar[Jn]))return ar;if(Xn!==EMPTY_OBJ&&hasOwn(Xn,Jn))return nr[Jn]=4,Xn[Jn];if(cr=sr.config.globalProperties,hasOwn(cr,Jn))return cr[Jn]},set({_:Zn},Jn,Xn){const{data:Qn,setupState:er,ctx:tr}=Zn;return hasSetupBinding(er,Jn)?(er[Jn]=Xn,!0):Qn!==EMPTY_OBJ&&hasOwn(Qn,Jn)?(Qn[Jn]=Xn,!0):hasOwn(Zn.props,Jn)||Jn[0]==="$"&&Jn.slice(1)in Zn?!1:(tr[Jn]=Xn,!0)},has({_:{data:Zn,setupState:Jn,accessCache:Xn,ctx:Qn,appContext:er,propsOptions:tr}},nr){let rr;return!!Xn[nr]||Zn!==EMPTY_OBJ&&hasOwn(Zn,nr)||hasSetupBinding(Jn,nr)||(rr=tr[0])&&hasOwn(rr,nr)||hasOwn(Qn,nr)||hasOwn(publicPropertiesMap,nr)||hasOwn(er.config.globalProperties,nr)},defineProperty(Zn,Jn,Xn){return Xn.get!=null?Zn._.accessCache[Jn]=0:hasOwn(Xn,"value")&&this.set(Zn,Jn,Xn.value,null),Reflect.defineProperty(Zn,Jn,Xn)}};function normalizePropsOrEmits(Zn){return isArray$1(Zn)?Zn.reduce((Jn,Xn)=>(Jn[Xn]=null,Jn),{}):Zn}let shouldCacheAccess=!0;function applyOptions(Zn){const Jn=resolveMergedOptions(Zn),Xn=Zn.proxy,Qn=Zn.ctx;shouldCacheAccess=!1,Jn.beforeCreate&&callHook$1(Jn.beforeCreate,Zn,"bc");const{data:er,computed:tr,methods:nr,watch:rr,provide:sr,inject:ir,created:or,beforeMount:ar,mounted:cr,beforeUpdate:lr,updated:hr,activated:fr,deactivated:gr,beforeDestroy:ur,beforeUnmount:dr,destroyed:yr,unmounted:vr,render:_r,renderTracked:kr,renderTriggered:Cr,errorCaptured:br,serverPrefetch:xr,expose:$r,inheritAttrs:Mr,components:Ar,directives:Rr,filters:mr}=Jn;if(ir&&resolveInjections(ir,Qn,null),nr)for(const jr in nr){const es=nr[jr];isFunction(es)&&(Qn[jr]=es.bind(Xn))}if(er){const jr=er.call(Xn,Xn);isObject$3(jr)&&(Zn.data=reactive(jr))}if(shouldCacheAccess=!0,tr)for(const jr in tr){const es=tr[jr],Xr=isFunction(es)?es.bind(Xn,Xn):isFunction(es.get)?es.get.bind(Xn,Xn):NOOP,as=!isFunction(es)&&isFunction(es.set)?es.set.bind(Xn):NOOP,Vr=computed({get:Xr,set:as});Object.defineProperty(Qn,jr,{enumerable:!0,configurable:!0,get:()=>Vr.value,set:zr=>Vr.value=zr})}if(rr)for(const jr in rr)createWatcher(rr[jr],Qn,Xn,jr);if(sr){const jr=isFunction(sr)?sr.call(Xn):sr;Reflect.ownKeys(jr).forEach(es=>{provide(es,jr[es])})}or&&callHook$1(or,Zn,"c");function qr(jr,es){isArray$1(es)?es.forEach(Xr=>jr(Xr.bind(Xn))):es&&jr(es.bind(Xn))}if(qr(onBeforeMount,ar),qr(onMounted,cr),qr(onBeforeUpdate,lr),qr(onUpdated,hr),qr(onActivated,fr),qr(onDeactivated,gr),qr(onErrorCaptured,br),qr(onRenderTracked,kr),qr(onRenderTriggered,Cr),qr(onBeforeUnmount,dr),qr(onUnmounted,vr),qr(onServerPrefetch,xr),isArray$1($r))if($r.length){const jr=Zn.exposed||(Zn.exposed={});$r.forEach(es=>{Object.defineProperty(jr,es,{get:()=>Xn[es],set:Xr=>Xn[es]=Xr})})}else Zn.exposed||(Zn.exposed={});_r&&Zn.render===NOOP&&(Zn.render=_r),Mr!=null&&(Zn.inheritAttrs=Mr),Ar&&(Zn.components=Ar),Rr&&(Zn.directives=Rr)}function resolveInjections(Zn,Jn,Xn=NOOP){isArray$1(Zn)&&(Zn=normalizeInject(Zn));for(const Qn in Zn){const er=Zn[Qn];let tr;isObject$3(er)?"default"in er?tr=inject(er.from||Qn,er.default,!0):tr=inject(er.from||Qn):tr=inject(er),isRef(tr)?Object.defineProperty(Jn,Qn,{enumerable:!0,configurable:!0,get:()=>tr.value,set:nr=>tr.value=nr}):Jn[Qn]=tr}}function callHook$1(Zn,Jn,Xn){callWithAsyncErrorHandling(isArray$1(Zn)?Zn.map(Qn=>Qn.bind(Jn.proxy)):Zn.bind(Jn.proxy),Jn,Xn)}function createWatcher(Zn,Jn,Xn,Qn){const er=Qn.includes(".")?createPathGetter(Xn,Qn):()=>Xn[Qn];if(isString(Zn)){const tr=Jn[Zn];isFunction(tr)&&watch(er,tr)}else if(isFunction(Zn))watch(er,Zn.bind(Xn));else if(isObject$3(Zn))if(isArray$1(Zn))Zn.forEach(tr=>createWatcher(tr,Jn,Xn,Qn));else{const tr=isFunction(Zn.handler)?Zn.handler.bind(Xn):Jn[Zn.handler];isFunction(tr)&&watch(er,tr,Zn)}}function resolveMergedOptions(Zn){const Jn=Zn.type,{mixins:Xn,extends:Qn}=Jn,{mixins:er,optionsCache:tr,config:{optionMergeStrategies:nr}}=Zn.appContext,rr=tr.get(Jn);let sr;return rr?sr=rr:!er.length&&!Xn&&!Qn?sr=Jn:(sr={},er.length&&er.forEach(ir=>mergeOptions$1(sr,ir,nr,!0)),mergeOptions$1(sr,Jn,nr)),isObject$3(Jn)&&tr.set(Jn,sr),sr}function mergeOptions$1(Zn,Jn,Xn,Qn=!1){const{mixins:er,extends:tr}=Jn;tr&&mergeOptions$1(Zn,tr,Xn,!0),er&&er.forEach(nr=>mergeOptions$1(Zn,nr,Xn,!0));for(const nr in Jn)if(!(Qn&&nr==="expose")){const rr=internalOptionMergeStrats[nr]||Xn&&Xn[nr];Zn[nr]=rr?rr(Zn[nr],Jn[nr]):Jn[nr]}return Zn}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Zn,Jn){return Jn?Zn?function(){return extend(isFunction(Zn)?Zn.call(this,this):Zn,isFunction(Jn)?Jn.call(this,this):Jn)}:Jn:Zn}function mergeInject(Zn,Jn){return mergeObjectOptions(normalizeInject(Zn),normalizeInject(Jn))}function normalizeInject(Zn){if(isArray$1(Zn)){const Jn={};for(let Xn=0;Xn<Zn.length;Xn++)Jn[Zn[Xn]]=Zn[Xn];return Jn}return Zn}function mergeAsArray(Zn,Jn){return Zn?[...new Set([].concat(Zn,Jn))]:Jn}function mergeObjectOptions(Zn,Jn){return Zn?extend(Object.create(null),Zn,Jn):Jn}function mergeEmitsOrPropsOptions(Zn,Jn){return Zn?isArray$1(Zn)&&isArray$1(Jn)?[...new Set([...Zn,...Jn])]:extend(Object.create(null),normalizePropsOrEmits(Zn),normalizePropsOrEmits(Jn??{})):Jn}function mergeWatchOptions(Zn,Jn){if(!Zn)return Jn;if(!Jn)return Zn;const Xn=extend(Object.create(null),Zn);for(const Qn in Jn)Xn[Qn]=mergeAsArray(Zn[Qn],Jn[Qn]);return Xn}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Zn,Jn){return function(Qn,er=null){isFunction(Qn)||(Qn=extend({},Qn)),er!=null&&!isObject$3(er)&&(er=null);const tr=createAppContext(),nr=new Set;let rr=!1;const sr=tr.app={_uid:uid$1++,_component:Qn,_props:er,_container:null,_context:tr,_instance:null,version,get config(){return tr.config},set config(ir){},use(ir,...or){return nr.has(ir)||(ir&&isFunction(ir.install)?(nr.add(ir),ir.install(sr,...or)):isFunction(ir)&&(nr.add(ir),ir(sr,...or))),sr},mixin(ir){return tr.mixins.includes(ir)||tr.mixins.push(ir),sr},component(ir,or){return or?(tr.components[ir]=or,sr):tr.components[ir]},directive(ir,or){return or?(tr.directives[ir]=or,sr):tr.directives[ir]},mount(ir,or,ar){if(!rr){const cr=createVNode(Qn,er);return cr.appContext=tr,or&&Jn?Jn(cr,ir):Zn(cr,ir,ar),rr=!0,sr._container=ir,ir.__vue_app__=sr,getExposeProxy(cr.component)||cr.component.proxy}},unmount(){rr&&(Zn(null,sr._container),delete sr._container.__vue_app__)},provide(ir,or){return tr.provides[ir]=or,sr},runWithContext(ir){currentApp=sr;try{return ir()}finally{currentApp=null}}};return sr}}let currentApp=null;function provide(Zn,Jn){if(currentInstance){let Xn=currentInstance.provides;const Qn=currentInstance.parent&&currentInstance.parent.provides;Qn===Xn&&(Xn=currentInstance.provides=Object.create(Qn)),Xn[Zn]=Jn}}function inject(Zn,Jn,Xn=!1){const Qn=currentInstance||currentRenderingInstance;if(Qn||currentApp){const er=Qn?Qn.parent==null?Qn.vnode.appContext&&Qn.vnode.appContext.provides:Qn.parent.provides:currentApp._context.provides;if(er&&Zn in er)return er[Zn];if(arguments.length>1)return Xn&&isFunction(Jn)?Jn.call(Qn&&Qn.proxy):Jn}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(Zn,Jn,Xn,Qn=!1){const er={},tr={};def(tr,InternalObjectKey,1),Zn.propsDefaults=Object.create(null),setFullProps(Zn,Jn,er,tr);for(const nr in Zn.propsOptions[0])nr in er||(er[nr]=void 0);Xn?Zn.props=Qn?er:shallowReactive(er):Zn.type.props?Zn.props=er:Zn.props=tr,Zn.attrs=tr}function updateProps(Zn,Jn,Xn,Qn){const{props:er,attrs:tr,vnode:{patchFlag:nr}}=Zn,rr=toRaw(er),[sr]=Zn.propsOptions;let ir=!1;if((Qn||nr>0)&&!(nr&16)){if(nr&8){const or=Zn.vnode.dynamicProps;for(let ar=0;ar<or.length;ar++){let cr=or[ar];if(isEmitListener(Zn.emitsOptions,cr))continue;const lr=Jn[cr];if(sr)if(hasOwn(tr,cr))lr!==tr[cr]&&(tr[cr]=lr,ir=!0);else{const hr=camelize(cr);er[hr]=resolvePropValue(sr,rr,hr,lr,Zn,!1)}else lr!==tr[cr]&&(tr[cr]=lr,ir=!0)}}}else{setFullProps(Zn,Jn,er,tr)&&(ir=!0);let or;for(const ar in rr)(!Jn||!hasOwn(Jn,ar)&&((or=hyphenate(ar))===ar||!hasOwn(Jn,or)))&&(sr?Xn&&(Xn[ar]!==void 0||Xn[or]!==void 0)&&(er[ar]=resolvePropValue(sr,rr,ar,void 0,Zn,!0)):delete er[ar]);if(tr!==rr)for(const ar in tr)(!Jn||!hasOwn(Jn,ar))&&(delete tr[ar],ir=!0)}ir&&trigger(Zn,"set","$attrs")}function setFullProps(Zn,Jn,Xn,Qn){const[er,tr]=Zn.propsOptions;let nr=!1,rr;if(Jn)for(let sr in Jn){if(isReservedProp(sr))continue;const ir=Jn[sr];let or;er&&hasOwn(er,or=camelize(sr))?!tr||!tr.includes(or)?Xn[or]=ir:(rr||(rr={}))[or]=ir:isEmitListener(Zn.emitsOptions,sr)||(!(sr in Qn)||ir!==Qn[sr])&&(Qn[sr]=ir,nr=!0)}if(tr){const sr=toRaw(Xn),ir=rr||EMPTY_OBJ;for(let or=0;or<tr.length;or++){const ar=tr[or];Xn[ar]=resolvePropValue(er,sr,ar,ir[ar],Zn,!hasOwn(ir,ar))}}return nr}function resolvePropValue(Zn,Jn,Xn,Qn,er,tr){const nr=Zn[Xn];if(nr!=null){const rr=hasOwn(nr,"default");if(rr&&Qn===void 0){const sr=nr.default;if(nr.type!==Function&&!nr.skipFactory&&isFunction(sr)){const{propsDefaults:ir}=er;Xn in ir?Qn=ir[Xn]:(setCurrentInstance(er),Qn=ir[Xn]=sr.call(null,Jn),unsetCurrentInstance())}else Qn=sr}nr[0]&&(tr&&!rr?Qn=!1:nr[1]&&(Qn===""||Qn===hyphenate(Xn))&&(Qn=!0))}return Qn}function normalizePropsOptions(Zn,Jn,Xn=!1){const Qn=Jn.propsCache,er=Qn.get(Zn);if(er)return er;const tr=Zn.props,nr={},rr=[];let sr=!1;if(!isFunction(Zn)){const or=ar=>{sr=!0;const[cr,lr]=normalizePropsOptions(ar,Jn,!0);extend(nr,cr),lr&&rr.push(...lr)};!Xn&&Jn.mixins.length&&Jn.mixins.forEach(or),Zn.extends&&or(Zn.extends),Zn.mixins&&Zn.mixins.forEach(or)}if(!tr&&!sr)return isObject$3(Zn)&&Qn.set(Zn,EMPTY_ARR),EMPTY_ARR;if(isArray$1(tr))for(let or=0;or<tr.length;or++){const ar=camelize(tr[or]);validatePropName(ar)&&(nr[ar]=EMPTY_OBJ)}else if(tr)for(const or in tr){const ar=camelize(or);if(validatePropName(ar)){const cr=tr[or],lr=nr[ar]=isArray$1(cr)||isFunction(cr)?{type:cr}:extend({},cr);if(lr){const hr=getTypeIndex(Boolean,lr.type),fr=getTypeIndex(String,lr.type);lr[0]=hr>-1,lr[1]=fr<0||hr<fr,(hr>-1||hasOwn(lr,"default"))&&rr.push(ar)}}}const ir=[nr,rr];return isObject$3(Zn)&&Qn.set(Zn,ir),ir}function validatePropName(Zn){return Zn[0]!=="$"}function getType(Zn){const Jn=Zn&&Zn.toString().match(/^\s*(function|class) (\w+)/);return Jn?Jn[2]:Zn===null?"null":""}function isSameType(Zn,Jn){return getType(Zn)===getType(Jn)}function getTypeIndex(Zn,Jn){return isArray$1(Jn)?Jn.findIndex(Xn=>isSameType(Xn,Zn)):isFunction(Jn)&&isSameType(Jn,Zn)?0:-1}const isInternalKey=Zn=>Zn[0]==="_"||Zn==="$stable",normalizeSlotValue=Zn=>isArray$1(Zn)?Zn.map(normalizeVNode):[normalizeVNode(Zn)],normalizeSlot$1=(Zn,Jn,Xn)=>{if(Jn._n)return Jn;const Qn=withCtx((...er)=>normalizeSlotValue(Jn(...er)),Xn);return Qn._c=!1,Qn},normalizeObjectSlots=(Zn,Jn,Xn)=>{const Qn=Zn._ctx;for(const er in Zn){if(isInternalKey(er))continue;const tr=Zn[er];if(isFunction(tr))Jn[er]=normalizeSlot$1(er,tr,Qn);else if(tr!=null){const nr=normalizeSlotValue(tr);Jn[er]=()=>nr}}},normalizeVNodeSlots=(Zn,Jn)=>{const Xn=normalizeSlotValue(Jn);Zn.slots.default=()=>Xn},initSlots=(Zn,Jn)=>{if(Zn.vnode.shapeFlag&32){const Xn=Jn._;Xn?(Zn.slots=toRaw(Jn),def(Jn,"_",Xn)):normalizeObjectSlots(Jn,Zn.slots={})}else Zn.slots={},Jn&&normalizeVNodeSlots(Zn,Jn);def(Zn.slots,InternalObjectKey,1)},updateSlots=(Zn,Jn,Xn)=>{const{vnode:Qn,slots:er}=Zn;let tr=!0,nr=EMPTY_OBJ;if(Qn.shapeFlag&32){const rr=Jn._;rr?Xn&&rr===1?tr=!1:(extend(er,Jn),!Xn&&rr===1&&delete er._):(tr=!Jn.$stable,normalizeObjectSlots(Jn,er)),nr=Jn}else Jn&&(normalizeVNodeSlots(Zn,Jn),nr={default:1});if(tr)for(const rr in er)!isInternalKey(rr)&&!(rr in nr)&&delete er[rr]};function setRef(Zn,Jn,Xn,Qn,er=!1){if(isArray$1(Zn)){Zn.forEach((cr,lr)=>setRef(cr,Jn&&(isArray$1(Jn)?Jn[lr]:Jn),Xn,Qn,er));return}if(isAsyncWrapper(Qn)&&!er)return;const tr=Qn.shapeFlag&4?getExposeProxy(Qn.component)||Qn.component.proxy:Qn.el,nr=er?null:tr,{i:rr,r:sr}=Zn,ir=Jn&&Jn.r,or=rr.refs===EMPTY_OBJ?rr.refs={}:rr.refs,ar=rr.setupState;if(ir!=null&&ir!==sr&&(isString(ir)?(or[ir]=null,hasOwn(ar,ir)&&(ar[ir]=null)):isRef(ir)&&(ir.value=null)),isFunction(sr))callWithErrorHandling(sr,rr,12,[nr,or]);else{const cr=isString(sr),lr=isRef(sr);if(cr||lr){const hr=()=>{if(Zn.f){const fr=cr?hasOwn(ar,sr)?ar[sr]:or[sr]:sr.value;er?isArray$1(fr)&&remove$1(fr,tr):isArray$1(fr)?fr.includes(tr)||fr.push(tr):cr?(or[sr]=[tr],hasOwn(ar,sr)&&(ar[sr]=or[sr])):(sr.value=[tr],Zn.k&&(or[Zn.k]=sr.value))}else cr?(or[sr]=nr,hasOwn(ar,sr)&&(ar[sr]=nr)):lr&&(sr.value=nr,Zn.k&&(or[Zn.k]=nr))};nr?(hr.id=-1,queuePostRenderEffect(hr,Xn)):hr()}}}let hasMismatch=!1;const isSVGContainer=Zn=>/svg/.test(Zn.namespaceURI)&&Zn.tagName!=="foreignObject",isComment$1=Zn=>Zn.nodeType===8;function createHydrationFunctions(Zn){const{mt:Jn,p:Xn,o:{patchProp:Qn,createText:er,nextSibling:tr,parentNode:nr,remove:rr,insert:sr,createComment:ir}}=Zn,or=(ur,dr)=>{if(!dr.hasChildNodes()){Xn(null,ur,dr),flushPostFlushCbs(),dr._vnode=ur;return}hasMismatch=!1,ar(dr.firstChild,ur,null,null,null),flushPostFlushCbs(),dr._vnode=ur,hasMismatch&&console.error("Hydration completed but contains mismatches.")},ar=(ur,dr,yr,vr,_r,kr=!1)=>{const Cr=isComment$1(ur)&&ur.data==="[",br=()=>fr(ur,dr,yr,vr,_r,Cr),{type:xr,ref:$r,shapeFlag:Mr,patchFlag:Ar}=dr;let Rr=ur.nodeType;dr.el=ur,Ar===-2&&(kr=!1,dr.dynamicChildren=null);let mr=null;switch(xr){case Text:Rr!==3?dr.children===""?(sr(dr.el=er(""),nr(ur),ur),mr=ur):mr=br():(ur.data!==dr.children&&(hasMismatch=!0,ur.data=dr.children),mr=tr(ur));break;case Comment:Rr!==8||Cr?mr=br():mr=tr(ur);break;case Static:if(Cr&&(ur=tr(ur),Rr=ur.nodeType),Rr===1||Rr===3){mr=ur;const Fr=!dr.children.length;for(let qr=0;qr<dr.staticCount;qr++)Fr&&(dr.children+=mr.nodeType===1?mr.outerHTML:mr.data),qr===dr.staticCount-1&&(dr.anchor=mr),mr=tr(mr);return Cr?tr(mr):mr}else br();break;case Fragment:Cr?mr=hr(ur,dr,yr,vr,_r,kr):mr=br();break;default:if(Mr&1)Rr!==1||dr.type.toLowerCase()!==ur.tagName.toLowerCase()?mr=br():mr=cr(ur,dr,yr,vr,_r,kr);else if(Mr&6){dr.slotScopeIds=_r;const Fr=nr(ur);if(Jn(dr,Fr,null,yr,vr,isSVGContainer(Fr),kr),mr=Cr?gr(ur):tr(ur),mr&&isComment$1(mr)&&mr.data==="teleport end"&&(mr=tr(mr)),isAsyncWrapper(dr)){let qr;Cr?(qr=createVNode(Fragment),qr.anchor=mr?mr.previousSibling:Fr.lastChild):qr=ur.nodeType===3?createTextVNode(""):createVNode("div"),qr.el=ur,dr.component.subTree=qr}}else Mr&64?Rr!==8?mr=br():mr=dr.type.hydrate(ur,dr,yr,vr,_r,kr,Zn,lr):Mr&128&&(mr=dr.type.hydrate(ur,dr,yr,vr,isSVGContainer(nr(ur)),_r,kr,Zn,ar))}return $r!=null&&setRef($r,null,vr,dr),mr},cr=(ur,dr,yr,vr,_r,kr)=>{kr=kr||!!dr.dynamicChildren;const{type:Cr,props:br,patchFlag:xr,shapeFlag:$r,dirs:Mr}=dr,Ar=Cr==="input"&&Mr||Cr==="option";if(Ar||xr!==-1){if(Mr&&invokeDirectiveHook(dr,null,yr,"created"),br)if(Ar||!kr||xr&48)for(const mr in br)(Ar&&mr.endsWith("value")||isOn(mr)&&!isReservedProp(mr))&&Qn(ur,mr,null,br[mr],!1,void 0,yr);else br.onClick&&Qn(ur,"onClick",null,br.onClick,!1,void 0,yr);let Rr;if((Rr=br&&br.onVnodeBeforeMount)&&invokeVNodeHook(Rr,yr,dr),Mr&&invokeDirectiveHook(dr,null,yr,"beforeMount"),((Rr=br&&br.onVnodeMounted)||Mr)&&queueEffectWithSuspense(()=>{Rr&&invokeVNodeHook(Rr,yr,dr),Mr&&invokeDirectiveHook(dr,null,yr,"mounted")},vr),$r&16&&!(br&&(br.innerHTML||br.textContent))){let mr=lr(ur.firstChild,dr,ur,yr,vr,_r,kr);for(;mr;){hasMismatch=!0;const Fr=mr;mr=mr.nextSibling,rr(Fr)}}else $r&8&&ur.textContent!==dr.children&&(hasMismatch=!0,ur.textContent=dr.children)}return ur.nextSibling},lr=(ur,dr,yr,vr,_r,kr,Cr)=>{Cr=Cr||!!dr.dynamicChildren;const br=dr.children,xr=br.length;for(let $r=0;$r<xr;$r++){const Mr=Cr?br[$r]:br[$r]=normalizeVNode(br[$r]);if(ur)ur=ar(ur,Mr,vr,_r,kr,Cr);else{if(Mr.type===Text&&!Mr.children)continue;hasMismatch=!0,Xn(null,Mr,yr,null,vr,_r,isSVGContainer(yr),kr)}}return ur},hr=(ur,dr,yr,vr,_r,kr)=>{const{slotScopeIds:Cr}=dr;Cr&&(_r=_r?_r.concat(Cr):Cr);const br=nr(ur),xr=lr(tr(ur),dr,br,yr,vr,_r,kr);return xr&&isComment$1(xr)&&xr.data==="]"?tr(dr.anchor=xr):(hasMismatch=!0,sr(dr.anchor=ir("]"),br,xr),xr)},fr=(ur,dr,yr,vr,_r,kr)=>{if(hasMismatch=!0,dr.el=null,kr){const xr=gr(ur);for(;;){const $r=tr(ur);if($r&&$r!==xr)rr($r);else break}}const Cr=tr(ur),br=nr(ur);return rr(ur),Xn(null,dr,br,Cr,yr,vr,isSVGContainer(br),_r),Cr},gr=ur=>{let dr=0;for(;ur;)if(ur=tr(ur),ur&&isComment$1(ur)&&(ur.data==="["&&dr++,ur.data==="]")){if(dr===0)return tr(ur);dr--}return ur};return[or,ar]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Zn){return baseCreateRenderer(Zn)}function createHydrationRenderer(Zn){return baseCreateRenderer(Zn,createHydrationFunctions)}function baseCreateRenderer(Zn,Jn){const Xn=getGlobalThis();Xn.__VUE__=!0;const{insert:Qn,remove:er,patchProp:tr,createElement:nr,createText:rr,createComment:sr,setText:ir,setElementText:or,parentNode:ar,nextSibling:cr,setScopeId:lr=NOOP,insertStaticContent:hr}=Zn,fr=(Ir,Nr,pr,Pr=null,Or=null,wr=null,Er=!1,Tr=null,Dr=!!Nr.dynamicChildren)=>{if(Ir===Nr)return;Ir&&!isSameVNodeType(Ir,Nr)&&(Pr=Gr(Ir),zr(Ir,Or,wr,!0),Ir=null),Nr.patchFlag===-2&&(Dr=!1,Nr.dynamicChildren=null);const{type:Br,ref:Lr,shapeFlag:Hr}=Nr;switch(Br){case Text:gr(Ir,Nr,pr,Pr);break;case Comment:ur(Ir,Nr,pr,Pr);break;case Static:Ir==null&&dr(Nr,pr,Pr,Er);break;case Fragment:Ar(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr);break;default:Hr&1?_r(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr):Hr&6?Rr(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr):(Hr&64||Hr&128)&&Br.process(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr,Qr)}Lr!=null&&Or&&setRef(Lr,Ir&&Ir.ref,wr,Nr||Ir,!Nr)},gr=(Ir,Nr,pr,Pr)=>{if(Ir==null)Qn(Nr.el=rr(Nr.children),pr,Pr);else{const Or=Nr.el=Ir.el;Nr.children!==Ir.children&&ir(Or,Nr.children)}},ur=(Ir,Nr,pr,Pr)=>{Ir==null?Qn(Nr.el=sr(Nr.children||""),pr,Pr):Nr.el=Ir.el},dr=(Ir,Nr,pr,Pr)=>{[Ir.el,Ir.anchor]=hr(Ir.children,Nr,pr,Pr,Ir.el,Ir.anchor)},yr=({el:Ir,anchor:Nr},pr,Pr)=>{let Or;for(;Ir&&Ir!==Nr;)Or=cr(Ir),Qn(Ir,pr,Pr),Ir=Or;Qn(Nr,pr,Pr)},vr=({el:Ir,anchor:Nr})=>{let pr;for(;Ir&&Ir!==Nr;)pr=cr(Ir),er(Ir),Ir=pr;er(Nr)},_r=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr)=>{Er=Er||Nr.type==="svg",Ir==null?kr(Nr,pr,Pr,Or,wr,Er,Tr,Dr):xr(Ir,Nr,Or,wr,Er,Tr,Dr)},kr=(Ir,Nr,pr,Pr,Or,wr,Er,Tr)=>{let Dr,Br;const{type:Lr,props:Hr,shapeFlag:Jr,transition:Wr,dirs:rs}=Ir;if(Dr=Ir.el=nr(Ir.type,wr,Hr&&Hr.is,Hr),Jr&8?or(Dr,Ir.children):Jr&16&&br(Ir.children,Dr,null,Pr,Or,wr&&Lr!=="foreignObject",Er,Tr),rs&&invokeDirectiveHook(Ir,null,Pr,"created"),Cr(Dr,Ir,Ir.scopeId,Er,Pr),Hr){for(const os in Hr)os!=="value"&&!isReservedProp(os)&&tr(Dr,os,null,Hr[os],wr,Ir.children,Pr,Or,ls);"value"in Hr&&tr(Dr,"value",null,Hr.value),(Br=Hr.onVnodeBeforeMount)&&invokeVNodeHook(Br,Pr,Ir)}rs&&invokeDirectiveHook(Ir,null,Pr,"beforeMount");const fs=(!Or||Or&&!Or.pendingBranch)&&Wr&&!Wr.persisted;fs&&Wr.beforeEnter(Dr),Qn(Dr,Nr,pr),((Br=Hr&&Hr.onVnodeMounted)||fs||rs)&&queuePostRenderEffect(()=>{Br&&invokeVNodeHook(Br,Pr,Ir),fs&&Wr.enter(Dr),rs&&invokeDirectiveHook(Ir,null,Pr,"mounted")},Or)},Cr=(Ir,Nr,pr,Pr,Or)=>{if(pr&&lr(Ir,pr),Pr)for(let wr=0;wr<Pr.length;wr++)lr(Ir,Pr[wr]);if(Or){let wr=Or.subTree;if(Nr===wr){const Er=Or.vnode;Cr(Ir,Er,Er.scopeId,Er.slotScopeIds,Or.parent)}}},br=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr=0)=>{for(let Br=Dr;Br<Ir.length;Br++){const Lr=Ir[Br]=Tr?cloneIfMounted(Ir[Br]):normalizeVNode(Ir[Br]);fr(null,Lr,Nr,pr,Pr,Or,wr,Er,Tr)}},xr=(Ir,Nr,pr,Pr,Or,wr,Er)=>{const Tr=Nr.el=Ir.el;let{patchFlag:Dr,dynamicChildren:Br,dirs:Lr}=Nr;Dr|=Ir.patchFlag&16;const Hr=Ir.props||EMPTY_OBJ,Jr=Nr.props||EMPTY_OBJ;let Wr;pr&&toggleRecurse(pr,!1),(Wr=Jr.onVnodeBeforeUpdate)&&invokeVNodeHook(Wr,pr,Nr,Ir),Lr&&invokeDirectiveHook(Nr,Ir,pr,"beforeUpdate"),pr&&toggleRecurse(pr,!0);const rs=Or&&Nr.type!=="foreignObject";if(Br?$r(Ir.dynamicChildren,Br,Tr,pr,Pr,rs,wr):Er||es(Ir,Nr,Tr,null,pr,Pr,rs,wr,!1),Dr>0){if(Dr&16)Mr(Tr,Nr,Hr,Jr,pr,Pr,Or);else if(Dr&2&&Hr.class!==Jr.class&&tr(Tr,"class",null,Jr.class,Or),Dr&4&&tr(Tr,"style",Hr.style,Jr.style,Or),Dr&8){const fs=Nr.dynamicProps;for(let os=0;os<fs.length;os++){const ds=fs[os],bs=Hr[ds],As=Jr[ds];(As!==bs||ds==="value")&&tr(Tr,ds,bs,As,Or,Ir.children,pr,Pr,ls)}}Dr&1&&Ir.children!==Nr.children&&or(Tr,Nr.children)}else!Er&&Br==null&&Mr(Tr,Nr,Hr,Jr,pr,Pr,Or);((Wr=Jr.onVnodeUpdated)||Lr)&&queuePostRenderEffect(()=>{Wr&&invokeVNodeHook(Wr,pr,Nr,Ir),Lr&&invokeDirectiveHook(Nr,Ir,pr,"updated")},Pr)},$r=(Ir,Nr,pr,Pr,Or,wr,Er)=>{for(let Tr=0;Tr<Nr.length;Tr++){const Dr=Ir[Tr],Br=Nr[Tr],Lr=Dr.el&&(Dr.type===Fragment||!isSameVNodeType(Dr,Br)||Dr.shapeFlag&70)?ar(Dr.el):pr;fr(Dr,Br,Lr,null,Pr,Or,wr,Er,!0)}},Mr=(Ir,Nr,pr,Pr,Or,wr,Er)=>{if(pr!==Pr){if(pr!==EMPTY_OBJ)for(const Tr in pr)!isReservedProp(Tr)&&!(Tr in Pr)&&tr(Ir,Tr,pr[Tr],null,Er,Nr.children,Or,wr,ls);for(const Tr in Pr){if(isReservedProp(Tr))continue;const Dr=Pr[Tr],Br=pr[Tr];Dr!==Br&&Tr!=="value"&&tr(Ir,Tr,Br,Dr,Er,Nr.children,Or,wr,ls)}"value"in Pr&&tr(Ir,"value",pr.value,Pr.value)}},Ar=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr)=>{const Br=Nr.el=Ir?Ir.el:rr(""),Lr=Nr.anchor=Ir?Ir.anchor:rr("");let{patchFlag:Hr,dynamicChildren:Jr,slotScopeIds:Wr}=Nr;Wr&&(Tr=Tr?Tr.concat(Wr):Wr),Ir==null?(Qn(Br,pr,Pr),Qn(Lr,pr,Pr),br(Nr.children,pr,Lr,Or,wr,Er,Tr,Dr)):Hr>0&&Hr&64&&Jr&&Ir.dynamicChildren?($r(Ir.dynamicChildren,Jr,pr,Or,wr,Er,Tr),(Nr.key!=null||Or&&Nr===Or.subTree)&&traverseStaticChildren(Ir,Nr,!0)):es(Ir,Nr,pr,Lr,Or,wr,Er,Tr,Dr)},Rr=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr)=>{Nr.slotScopeIds=Tr,Ir==null?Nr.shapeFlag&512?Or.ctx.activate(Nr,pr,Pr,Er,Dr):mr(Nr,pr,Pr,Or,wr,Er,Dr):Fr(Ir,Nr,Dr)},mr=(Ir,Nr,pr,Pr,Or,wr,Er)=>{const Tr=Ir.component=createComponentInstance(Ir,Pr,Or);if(isKeepAlive(Ir)&&(Tr.ctx.renderer=Qr),setupComponent(Tr),Tr.asyncDep){if(Or&&Or.registerDep(Tr,qr),!Ir.el){const Dr=Tr.subTree=createVNode(Comment);ur(null,Dr,Nr,pr)}return}qr(Tr,Ir,Nr,pr,Or,wr,Er)},Fr=(Ir,Nr,pr)=>{const Pr=Nr.component=Ir.component;if(shouldUpdateComponent(Ir,Nr,pr))if(Pr.asyncDep&&!Pr.asyncResolved){jr(Pr,Nr,pr);return}else Pr.next=Nr,invalidateJob(Pr.update),Pr.update();else Nr.el=Ir.el,Pr.vnode=Nr},qr=(Ir,Nr,pr,Pr,Or,wr,Er)=>{const Tr=()=>{if(Ir.isMounted){let{next:Lr,bu:Hr,u:Jr,parent:Wr,vnode:rs}=Ir,fs=Lr,os;toggleRecurse(Ir,!1),Lr?(Lr.el=rs.el,jr(Ir,Lr,Er)):Lr=rs,Hr&&invokeArrayFns(Hr),(os=Lr.props&&Lr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(os,Wr,Lr,rs),toggleRecurse(Ir,!0);const ds=renderComponentRoot(Ir),bs=Ir.subTree;Ir.subTree=ds,fr(bs,ds,ar(bs.el),Gr(bs),Ir,Or,wr),Lr.el=ds.el,fs===null&&updateHOCHostEl(Ir,ds.el),Jr&&queuePostRenderEffect(Jr,Or),(os=Lr.props&&Lr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(os,Wr,Lr,rs),Or)}else{let Lr;const{el:Hr,props:Jr}=Nr,{bm:Wr,m:rs,parent:fs}=Ir,os=isAsyncWrapper(Nr);if(toggleRecurse(Ir,!1),Wr&&invokeArrayFns(Wr),!os&&(Lr=Jr&&Jr.onVnodeBeforeMount)&&invokeVNodeHook(Lr,fs,Nr),toggleRecurse(Ir,!0),Hr&&us){const ds=()=>{Ir.subTree=renderComponentRoot(Ir),us(Hr,Ir.subTree,Ir,Or,null)};os?Nr.type.__asyncLoader().then(()=>!Ir.isUnmounted&&ds()):ds()}else{const ds=Ir.subTree=renderComponentRoot(Ir);fr(null,ds,pr,Pr,Ir,Or,wr),Nr.el=ds.el}if(rs&&queuePostRenderEffect(rs,Or),!os&&(Lr=Jr&&Jr.onVnodeMounted)){const ds=Nr;queuePostRenderEffect(()=>invokeVNodeHook(Lr,fs,ds),Or)}(Nr.shapeFlag&256||fs&&isAsyncWrapper(fs.vnode)&&fs.vnode.shapeFlag&256)&&Ir.a&&queuePostRenderEffect(Ir.a,Or),Ir.isMounted=!0,Nr=pr=Pr=null}},Dr=Ir.effect=new ReactiveEffect(Tr,()=>queueJob(Br),Ir.scope),Br=Ir.update=()=>Dr.run();Br.id=Ir.uid,toggleRecurse(Ir,!0),Br()},jr=(Ir,Nr,pr)=>{Nr.component=Ir;const Pr=Ir.vnode.props;Ir.vnode=Nr,Ir.next=null,updateProps(Ir,Nr.props,Pr,pr),updateSlots(Ir,Nr.children,pr),pauseTracking(),flushPreFlushCbs(),resetTracking()},es=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr=!1)=>{const Br=Ir&&Ir.children,Lr=Ir?Ir.shapeFlag:0,Hr=Nr.children,{patchFlag:Jr,shapeFlag:Wr}=Nr;if(Jr>0){if(Jr&128){as(Br,Hr,pr,Pr,Or,wr,Er,Tr,Dr);return}else if(Jr&256){Xr(Br,Hr,pr,Pr,Or,wr,Er,Tr,Dr);return}}Wr&8?(Lr&16&&ls(Br,Or,wr),Hr!==Br&&or(pr,Hr)):Lr&16?Wr&16?as(Br,Hr,pr,Pr,Or,wr,Er,Tr,Dr):ls(Br,Or,wr,!0):(Lr&8&&or(pr,""),Wr&16&&br(Hr,pr,Pr,Or,wr,Er,Tr,Dr))},Xr=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr)=>{Ir=Ir||EMPTY_ARR,Nr=Nr||EMPTY_ARR;const Br=Ir.length,Lr=Nr.length,Hr=Math.min(Br,Lr);let Jr;for(Jr=0;Jr<Hr;Jr++){const Wr=Nr[Jr]=Dr?cloneIfMounted(Nr[Jr]):normalizeVNode(Nr[Jr]);fr(Ir[Jr],Wr,pr,null,Or,wr,Er,Tr,Dr)}Br>Lr?ls(Ir,Or,wr,!0,!1,Hr):br(Nr,pr,Pr,Or,wr,Er,Tr,Dr,Hr)},as=(Ir,Nr,pr,Pr,Or,wr,Er,Tr,Dr)=>{let Br=0;const Lr=Nr.length;let Hr=Ir.length-1,Jr=Lr-1;for(;Br<=Hr&&Br<=Jr;){const Wr=Ir[Br],rs=Nr[Br]=Dr?cloneIfMounted(Nr[Br]):normalizeVNode(Nr[Br]);if(isSameVNodeType(Wr,rs))fr(Wr,rs,pr,null,Or,wr,Er,Tr,Dr);else break;Br++}for(;Br<=Hr&&Br<=Jr;){const Wr=Ir[Hr],rs=Nr[Jr]=Dr?cloneIfMounted(Nr[Jr]):normalizeVNode(Nr[Jr]);if(isSameVNodeType(Wr,rs))fr(Wr,rs,pr,null,Or,wr,Er,Tr,Dr);else break;Hr--,Jr--}if(Br>Hr){if(Br<=Jr){const Wr=Jr+1,rs=Wr<Lr?Nr[Wr].el:Pr;for(;Br<=Jr;)fr(null,Nr[Br]=Dr?cloneIfMounted(Nr[Br]):normalizeVNode(Nr[Br]),pr,rs,Or,wr,Er,Tr,Dr),Br++}}else if(Br>Jr)for(;Br<=Hr;)zr(Ir[Br],Or,wr,!0),Br++;else{const Wr=Br,rs=Br,fs=new Map;for(Br=rs;Br<=Jr;Br++){const ws=Nr[Br]=Dr?cloneIfMounted(Nr[Br]):normalizeVNode(Nr[Br]);ws.key!=null&&fs.set(ws.key,Br)}let os,ds=0;const bs=Jr-rs+1;let As=!1,xs=0;const gs=new Array(bs);for(Br=0;Br<bs;Br++)gs[Br]=0;for(Br=Wr;Br<=Hr;Br++){const ws=Ir[Br];if(ds>=bs){zr(ws,Or,wr,!0);continue}let ms;if(ws.key!=null)ms=fs.get(ws.key);else for(os=rs;os<=Jr;os++)if(gs[os-rs]===0&&isSameVNodeType(ws,Nr[os])){ms=os;break}ms===void 0?zr(ws,Or,wr,!0):(gs[ms-rs]=Br+1,ms>=xs?xs=ms:As=!0,fr(ws,Nr[ms],pr,null,Or,wr,Er,Tr,Dr),ds++)}const Ts=As?getSequence(gs):EMPTY_ARR;for(os=Ts.length-1,Br=bs-1;Br>=0;Br--){const ws=rs+Br,ms=Nr[ws],Ss=ws+1<Lr?Nr[ws+1].el:Pr;gs[Br]===0?fr(null,ms,pr,Ss,Or,wr,Er,Tr,Dr):As&&(os<0||Br!==Ts[os]?Vr(ms,pr,Ss,2):os--)}}},Vr=(Ir,Nr,pr,Pr,Or=null)=>{const{el:wr,type:Er,transition:Tr,children:Dr,shapeFlag:Br}=Ir;if(Br&6){Vr(Ir.component.subTree,Nr,pr,Pr);return}if(Br&128){Ir.suspense.move(Nr,pr,Pr);return}if(Br&64){Er.move(Ir,Nr,pr,Qr);return}if(Er===Fragment){Qn(wr,Nr,pr);for(let Hr=0;Hr<Dr.length;Hr++)Vr(Dr[Hr],Nr,pr,Pr);Qn(Ir.anchor,Nr,pr);return}if(Er===Static){yr(Ir,Nr,pr);return}if(Pr!==2&&Br&1&&Tr)if(Pr===0)Tr.beforeEnter(wr),Qn(wr,Nr,pr),queuePostRenderEffect(()=>Tr.enter(wr),Or);else{const{leave:Hr,delayLeave:Jr,afterLeave:Wr}=Tr,rs=()=>Qn(wr,Nr,pr),fs=()=>{Hr(wr,()=>{rs(),Wr&&Wr()})};Jr?Jr(wr,rs,fs):fs()}else Qn(wr,Nr,pr)},zr=(Ir,Nr,pr,Pr=!1,Or=!1)=>{const{type:wr,props:Er,ref:Tr,children:Dr,dynamicChildren:Br,shapeFlag:Lr,patchFlag:Hr,dirs:Jr}=Ir;if(Tr!=null&&setRef(Tr,null,pr,Ir,!0),Lr&256){Nr.ctx.deactivate(Ir);return}const Wr=Lr&1&&Jr,rs=!isAsyncWrapper(Ir);let fs;if(rs&&(fs=Er&&Er.onVnodeBeforeUnmount)&&invokeVNodeHook(fs,Nr,Ir),Lr&6)ts(Ir.component,pr,Pr);else{if(Lr&128){Ir.suspense.unmount(pr,Pr);return}Wr&&invokeDirectiveHook(Ir,null,Nr,"beforeUnmount"),Lr&64?Ir.type.remove(Ir,Nr,pr,Or,Qr,Pr):Br&&(wr!==Fragment||Hr>0&&Hr&64)?ls(Br,Nr,pr,!1,!0):(wr===Fragment&&Hr&384||!Or&&Lr&16)&&ls(Dr,Nr,pr),Pr&&ns(Ir)}(rs&&(fs=Er&&Er.onVnodeUnmounted)||Wr)&&queuePostRenderEffect(()=>{fs&&invokeVNodeHook(fs,Nr,Ir),Wr&&invokeDirectiveHook(Ir,null,Nr,"unmounted")},pr)},ns=Ir=>{const{type:Nr,el:pr,anchor:Pr,transition:Or}=Ir;if(Nr===Fragment){ss(pr,Pr);return}if(Nr===Static){vr(Ir);return}const wr=()=>{er(pr),Or&&!Or.persisted&&Or.afterLeave&&Or.afterLeave()};if(Ir.shapeFlag&1&&Or&&!Or.persisted){const{leave:Er,delayLeave:Tr}=Or,Dr=()=>Er(pr,wr);Tr?Tr(Ir.el,wr,Dr):Dr()}else wr()},ss=(Ir,Nr)=>{let pr;for(;Ir!==Nr;)pr=cr(Ir),er(Ir),Ir=pr;er(Nr)},ts=(Ir,Nr,pr)=>{const{bum:Pr,scope:Or,update:wr,subTree:Er,um:Tr}=Ir;Pr&&invokeArrayFns(Pr),Or.stop(),wr&&(wr.active=!1,zr(Er,Ir,Nr,pr)),Tr&&queuePostRenderEffect(Tr,Nr),queuePostRenderEffect(()=>{Ir.isUnmounted=!0},Nr),Nr&&Nr.pendingBranch&&!Nr.isUnmounted&&Ir.asyncDep&&!Ir.asyncResolved&&Ir.suspenseId===Nr.pendingId&&(Nr.deps--,Nr.deps===0&&Nr.resolve())},ls=(Ir,Nr,pr,Pr=!1,Or=!1,wr=0)=>{for(let Er=wr;Er<Ir.length;Er++)zr(Ir[Er],Nr,pr,Pr,Or)},Gr=Ir=>Ir.shapeFlag&6?Gr(Ir.component.subTree):Ir.shapeFlag&128?Ir.suspense.next():cr(Ir.anchor||Ir.el),Yr=(Ir,Nr,pr)=>{Ir==null?Nr._vnode&&zr(Nr._vnode,null,null,!0):fr(Nr._vnode||null,Ir,Nr,null,null,null,pr),flushPreFlushCbs(),flushPostFlushCbs(),Nr._vnode=Ir},Qr={p:fr,um:zr,m:Vr,r:ns,mt:mr,mc:br,pc:es,pbc:$r,n:Gr,o:Zn};let is,us;return Jn&&([is,us]=Jn(Qr)),{render:Yr,hydrate:is,createApp:createAppAPI(Yr,is)}}function toggleRecurse({effect:Zn,update:Jn},Xn){Zn.allowRecurse=Jn.allowRecurse=Xn}function traverseStaticChildren(Zn,Jn,Xn=!1){const Qn=Zn.children,er=Jn.children;if(isArray$1(Qn)&&isArray$1(er))for(let tr=0;tr<Qn.length;tr++){const nr=Qn[tr];let rr=er[tr];rr.shapeFlag&1&&!rr.dynamicChildren&&((rr.patchFlag<=0||rr.patchFlag===32)&&(rr=er[tr]=cloneIfMounted(er[tr]),rr.el=nr.el),Xn||traverseStaticChildren(nr,rr)),rr.type===Text&&(rr.el=nr.el)}}function getSequence(Zn){const Jn=Zn.slice(),Xn=[0];let Qn,er,tr,nr,rr;const sr=Zn.length;for(Qn=0;Qn<sr;Qn++){const ir=Zn[Qn];if(ir!==0){if(er=Xn[Xn.length-1],Zn[er]<ir){Jn[Qn]=er,Xn.push(Qn);continue}for(tr=0,nr=Xn.length-1;tr<nr;)rr=tr+nr>>1,Zn[Xn[rr]]<ir?tr=rr+1:nr=rr;ir<Zn[Xn[tr]]&&(tr>0&&(Jn[Qn]=Xn[tr-1]),Xn[tr]=Qn)}}for(tr=Xn.length,nr=Xn[tr-1];tr-- >0;)Xn[tr]=nr,nr=Jn[nr];return Xn}const isTeleport=Zn=>Zn.__isTeleport,isTeleportDisabled=Zn=>Zn&&(Zn.disabled||Zn.disabled===""),isTargetSVG=Zn=>typeof SVGElement<"u"&&Zn instanceof SVGElement,resolveTarget=(Zn,Jn)=>{const Xn=Zn&&Zn.to;return isString(Xn)?Jn?Jn(Xn):null:Xn},TeleportImpl={__isTeleport:!0,process(Zn,Jn,Xn,Qn,er,tr,nr,rr,sr,ir){const{mc:or,pc:ar,pbc:cr,o:{insert:lr,querySelector:hr,createText:fr,createComment:gr}}=ir,ur=isTeleportDisabled(Jn.props);let{shapeFlag:dr,children:yr,dynamicChildren:vr}=Jn;if(Zn==null){const _r=Jn.el=fr(""),kr=Jn.anchor=fr("");lr(_r,Xn,Qn),lr(kr,Xn,Qn);const Cr=Jn.target=resolveTarget(Jn.props,hr),br=Jn.targetAnchor=fr("");Cr&&(lr(br,Cr),nr=nr||isTargetSVG(Cr));const xr=($r,Mr)=>{dr&16&&or(yr,$r,Mr,er,tr,nr,rr,sr)};ur?xr(Xn,kr):Cr&&xr(Cr,br)}else{Jn.el=Zn.el;const _r=Jn.anchor=Zn.anchor,kr=Jn.target=Zn.target,Cr=Jn.targetAnchor=Zn.targetAnchor,br=isTeleportDisabled(Zn.props),xr=br?Xn:kr,$r=br?_r:Cr;if(nr=nr||isTargetSVG(kr),vr?(cr(Zn.dynamicChildren,vr,xr,er,tr,nr,rr),traverseStaticChildren(Zn,Jn,!0)):sr||ar(Zn,Jn,xr,$r,er,tr,nr,rr,!1),ur)br||moveTeleport(Jn,Xn,_r,ir,1);else if((Jn.props&&Jn.props.to)!==(Zn.props&&Zn.props.to)){const Mr=Jn.target=resolveTarget(Jn.props,hr);Mr&&moveTeleport(Jn,Mr,null,ir,0)}else br&&moveTeleport(Jn,kr,Cr,ir,1)}updateCssVars$1(Jn)},remove(Zn,Jn,Xn,Qn,{um:er,o:{remove:tr}},nr){const{shapeFlag:rr,children:sr,anchor:ir,targetAnchor:or,target:ar,props:cr}=Zn;if(ar&&tr(or),(nr||!isTeleportDisabled(cr))&&(tr(ir),rr&16))for(let lr=0;lr<sr.length;lr++){const hr=sr[lr];er(hr,Jn,Xn,!0,!!hr.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Zn,Jn,Xn,{o:{insert:Qn},m:er},tr=2){tr===0&&Qn(Zn.targetAnchor,Jn,Xn);const{el:nr,anchor:rr,shapeFlag:sr,children:ir,props:or}=Zn,ar=tr===2;if(ar&&Qn(nr,Jn,Xn),(!ar||isTeleportDisabled(or))&&sr&16)for(let cr=0;cr<ir.length;cr++)er(ir[cr],Jn,Xn,2);ar&&Qn(rr,Jn,Xn)}function hydrateTeleport(Zn,Jn,Xn,Qn,er,tr,{o:{nextSibling:nr,parentNode:rr,querySelector:sr}},ir){const or=Jn.target=resolveTarget(Jn.props,sr);if(or){const ar=or._lpa||or.firstChild;if(Jn.shapeFlag&16)if(isTeleportDisabled(Jn.props))Jn.anchor=ir(nr(Zn),Jn,rr(Zn),Xn,Qn,er,tr),Jn.targetAnchor=ar;else{Jn.anchor=nr(Zn);let cr=ar;for(;cr;)if(cr=nr(cr),cr&&cr.nodeType===8&&cr.data==="teleport anchor"){Jn.targetAnchor=cr,or._lpa=Jn.targetAnchor&&nr(Jn.targetAnchor);break}ir(ar,Jn,or,Xn,Qn,er,tr)}updateCssVars$1(Jn)}return Jn.anchor&&nr(Jn.anchor)}const Teleport=TeleportImpl;function updateCssVars$1(Zn){const Jn=Zn.ctx;if(Jn&&Jn.ut){let Xn=Zn.children[0].el;for(;Xn!==Zn.targetAnchor;)Xn.nodeType===1&&Xn.setAttribute("data-v-owner",Jn.uid),Xn=Xn.nextSibling;Jn.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Zn=!1){blockStack.push(currentBlock=Zn?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Zn){isBlockTreeEnabled+=Zn}function setupBlock(Zn){return Zn.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Zn),Zn}function createElementBlock(Zn,Jn,Xn,Qn,er,tr){return setupBlock(createBaseVNode(Zn,Jn,Xn,Qn,er,tr,!0))}function createBlock(Zn,Jn,Xn,Qn,er){return setupBlock(createVNode(Zn,Jn,Xn,Qn,er,!0))}function isVNode(Zn){return Zn?Zn.__v_isVNode===!0:!1}function isSameVNodeType(Zn,Jn){return Zn.type===Jn.type&&Zn.key===Jn.key}const InternalObjectKey="__vInternal",normalizeKey=({key:Zn})=>Zn??null,normalizeRef=({ref:Zn,ref_key:Jn,ref_for:Xn})=>(typeof Zn=="number"&&(Zn=""+Zn),Zn!=null?isString(Zn)||isRef(Zn)||isFunction(Zn)?{i:currentRenderingInstance,r:Zn,k:Jn,f:!!Xn}:Zn:null);function createBaseVNode(Zn,Jn=null,Xn=null,Qn=0,er=null,tr=Zn===Fragment?0:1,nr=!1,rr=!1){const sr={__v_isVNode:!0,__v_skip:!0,type:Zn,props:Jn,key:Jn&&normalizeKey(Jn),ref:Jn&&normalizeRef(Jn),scopeId:currentScopeId,slotScopeIds:null,children:Xn,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:tr,patchFlag:Qn,dynamicProps:er,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return rr?(normalizeChildren(sr,Xn),tr&128&&Zn.normalize(sr)):Xn&&(sr.shapeFlag|=isString(Xn)?8:16),isBlockTreeEnabled>0&&!nr&&currentBlock&&(sr.patchFlag>0||tr&6)&&sr.patchFlag!==32&&currentBlock.push(sr),sr}const createVNode=_createVNode;function _createVNode(Zn,Jn=null,Xn=null,Qn=0,er=null,tr=!1){if((!Zn||Zn===NULL_DYNAMIC_COMPONENT)&&(Zn=Comment),isVNode(Zn)){const rr=cloneVNode(Zn,Jn,!0);return Xn&&normalizeChildren(rr,Xn),isBlockTreeEnabled>0&&!tr&&currentBlock&&(rr.shapeFlag&6?currentBlock[currentBlock.indexOf(Zn)]=rr:currentBlock.push(rr)),rr.patchFlag|=-2,rr}if(isClassComponent(Zn)&&(Zn=Zn.__vccOpts),Jn){Jn=guardReactiveProps(Jn);let{class:rr,style:sr}=Jn;rr&&!isString(rr)&&(Jn.class=normalizeClass(rr)),isObject$3(sr)&&(isProxy(sr)&&!isArray$1(sr)&&(sr=extend({},sr)),Jn.style=normalizeStyle(sr))}const nr=isString(Zn)?1:isSuspense(Zn)?128:isTeleport(Zn)?64:isObject$3(Zn)?4:isFunction(Zn)?2:0;return createBaseVNode(Zn,Jn,Xn,Qn,er,nr,tr,!0)}function guardReactiveProps(Zn){return Zn?isProxy(Zn)||InternalObjectKey in Zn?extend({},Zn):Zn:null}function cloneVNode(Zn,Jn,Xn=!1){const{props:Qn,ref:er,patchFlag:tr,children:nr}=Zn,rr=Jn?mergeProps(Qn||{},Jn):Qn;return{__v_isVNode:!0,__v_skip:!0,type:Zn.type,props:rr,key:rr&&normalizeKey(rr),ref:Jn&&Jn.ref?Xn&&er?isArray$1(er)?er.concat(normalizeRef(Jn)):[er,normalizeRef(Jn)]:normalizeRef(Jn):er,scopeId:Zn.scopeId,slotScopeIds:Zn.slotScopeIds,children:nr,target:Zn.target,targetAnchor:Zn.targetAnchor,staticCount:Zn.staticCount,shapeFlag:Zn.shapeFlag,patchFlag:Jn&&Zn.type!==Fragment?tr===-1?16:tr|16:tr,dynamicProps:Zn.dynamicProps,dynamicChildren:Zn.dynamicChildren,appContext:Zn.appContext,dirs:Zn.dirs,transition:Zn.transition,component:Zn.component,suspense:Zn.suspense,ssContent:Zn.ssContent&&cloneVNode(Zn.ssContent),ssFallback:Zn.ssFallback&&cloneVNode(Zn.ssFallback),el:Zn.el,anchor:Zn.anchor,ctx:Zn.ctx,ce:Zn.ce}}function createTextVNode(Zn=" ",Jn=0){return createVNode(Text,null,Zn,Jn)}function createStaticVNode(Zn,Jn){const Xn=createVNode(Static,null,Zn);return Xn.staticCount=Jn,Xn}function createCommentVNode(Zn="",Jn=!1){return Jn?(openBlock(),createBlock(Comment,null,Zn)):createVNode(Comment,null,Zn)}function normalizeVNode(Zn){return Zn==null||typeof Zn=="boolean"?createVNode(Comment):isArray$1(Zn)?createVNode(Fragment,null,Zn.slice()):typeof Zn=="object"?cloneIfMounted(Zn):createVNode(Text,null,String(Zn))}function cloneIfMounted(Zn){return Zn.el===null&&Zn.patchFlag!==-1||Zn.memo?Zn:cloneVNode(Zn)}function normalizeChildren(Zn,Jn){let Xn=0;const{shapeFlag:Qn}=Zn;if(Jn==null)Jn=null;else if(isArray$1(Jn))Xn=16;else if(typeof Jn=="object")if(Qn&65){const er=Jn.default;er&&(er._c&&(er._d=!1),normalizeChildren(Zn,er()),er._c&&(er._d=!0));return}else{Xn=32;const er=Jn._;!er&&!(InternalObjectKey in Jn)?Jn._ctx=currentRenderingInstance:er===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?Jn._=1:(Jn._=2,Zn.patchFlag|=1024))}else isFunction(Jn)?(Jn={default:Jn,_ctx:currentRenderingInstance},Xn=32):(Jn=String(Jn),Qn&64?(Xn=16,Jn=[createTextVNode(Jn)]):Xn=8);Zn.children=Jn,Zn.shapeFlag|=Xn}function mergeProps(...Zn){const Jn={};for(let Xn=0;Xn<Zn.length;Xn++){const Qn=Zn[Xn];for(const er in Qn)if(er==="class")Jn.class!==Qn.class&&(Jn.class=normalizeClass([Jn.class,Qn.class]));else if(er==="style")Jn.style=normalizeStyle([Jn.style,Qn.style]);else if(isOn(er)){const tr=Jn[er],nr=Qn[er];nr&&tr!==nr&&!(isArray$1(tr)&&tr.includes(nr))&&(Jn[er]=tr?[].concat(tr,nr):nr)}else er!==""&&(Jn[er]=Qn[er])}return Jn}function invokeVNodeHook(Zn,Jn,Xn,Qn=null){callWithAsyncErrorHandling(Zn,Jn,7,[Xn,Qn])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Zn,Jn,Xn){const Qn=Zn.type,er=(Jn?Jn.appContext:Zn.appContext)||emptyAppContext,tr={uid:uid++,vnode:Zn,type:Qn,parent:Jn,appContext:er,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Jn?Jn.provides:Object.create(er.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Qn,er),emitsOptions:normalizeEmitsOptions(Qn,er),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Qn.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:Xn,suspenseId:Xn?Xn.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return tr.ctx={_:tr},tr.root=Jn?Jn.root:tr,tr.emit=emit.bind(null,tr),Zn.ce&&Zn.ce(tr),tr}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis()[settersKey]=[]),globalCurrentInstanceSetters.push(Zn=>currentInstance=Zn),internalSetCurrentInstance=Zn=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(Jn=>Jn(Zn)):globalCurrentInstanceSetters[0](Zn)};const setCurrentInstance=Zn=>{internalSetCurrentInstance(Zn),Zn.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Zn){return Zn.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Zn,Jn=!1){isInSSRComponentSetup=Jn;const{props:Xn,children:Qn}=Zn.vnode,er=isStatefulComponent(Zn);initProps(Zn,Xn,er,Jn),initSlots(Zn,Qn);const tr=er?setupStatefulComponent(Zn,Jn):void 0;return isInSSRComponentSetup=!1,tr}function setupStatefulComponent(Zn,Jn){const Xn=Zn.type;Zn.accessCache=Object.create(null),Zn.proxy=markRaw(new Proxy(Zn.ctx,PublicInstanceProxyHandlers));const{setup:Qn}=Xn;if(Qn){const er=Zn.setupContext=Qn.length>1?createSetupContext(Zn):null;setCurrentInstance(Zn),pauseTracking();const tr=callWithErrorHandling(Qn,Zn,0,[Zn.props,er]);if(resetTracking(),unsetCurrentInstance(),isPromise(tr)){if(tr.then(unsetCurrentInstance,unsetCurrentInstance),Jn)return tr.then(nr=>{handleSetupResult(Zn,nr,Jn)}).catch(nr=>{handleError(nr,Zn,0)});Zn.asyncDep=tr}else handleSetupResult(Zn,tr,Jn)}else finishComponentSetup(Zn,Jn)}function handleSetupResult(Zn,Jn,Xn){isFunction(Jn)?Zn.type.__ssrInlineRender?Zn.ssrRender=Jn:Zn.render=Jn:isObject$3(Jn)&&(Zn.setupState=proxyRefs(Jn)),finishComponentSetup(Zn,Xn)}let compile;function finishComponentSetup(Zn,Jn,Xn){const Qn=Zn.type;if(!Zn.render){if(!Jn&&compile&&!Qn.render){const er=Qn.template||resolveMergedOptions(Zn).template;if(er){const{isCustomElement:tr,compilerOptions:nr}=Zn.appContext.config,{delimiters:rr,compilerOptions:sr}=Qn,ir=extend(extend({isCustomElement:tr,delimiters:rr},nr),sr);Qn.render=compile(er,ir)}}Zn.render=Qn.render||NOOP}setCurrentInstance(Zn),pauseTracking(),applyOptions(Zn),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(Zn){return Zn.attrsProxy||(Zn.attrsProxy=new Proxy(Zn.attrs,{get(Jn,Xn){return track(Zn,"get","$attrs"),Jn[Xn]}}))}function createSetupContext(Zn){const Jn=Xn=>{Zn.exposed=Xn||{}};return{get attrs(){return getAttrsProxy(Zn)},slots:Zn.slots,emit:Zn.emit,expose:Jn}}function getExposeProxy(Zn){if(Zn.exposed)return Zn.exposeProxy||(Zn.exposeProxy=new Proxy(proxyRefs(markRaw(Zn.exposed)),{get(Jn,Xn){if(Xn in Jn)return Jn[Xn];if(Xn in publicPropertiesMap)return publicPropertiesMap[Xn](Zn)},has(Jn,Xn){return Xn in Jn||Xn in publicPropertiesMap}}))}function getComponentName(Zn,Jn=!0){return isFunction(Zn)?Zn.displayName||Zn.name:Zn.name||Jn&&Zn.__name}function isClassComponent(Zn){return isFunction(Zn)&&"__vccOpts"in Zn}const computed=(Zn,Jn)=>computed$1(Zn,Jn,isInSSRComponentSetup);function h$2(Zn,Jn,Xn){const Qn=arguments.length;return Qn===2?isObject$3(Jn)&&!isArray$1(Jn)?isVNode(Jn)?createVNode(Zn,null,[Jn]):createVNode(Zn,Jn):createVNode(Zn,null,Jn):(Qn>3?Xn=Array.prototype.slice.call(arguments,2):Qn===3&&isVNode(Xn)&&(Xn=[Xn]),createVNode(Zn,Jn,Xn))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey),version="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Zn,Jn,Xn)=>{Jn.insertBefore(Zn,Xn||null)},remove:Zn=>{const Jn=Zn.parentNode;Jn&&Jn.removeChild(Zn)},createElement:(Zn,Jn,Xn,Qn)=>{const er=Jn?doc.createElementNS(svgNS,Zn):doc.createElement(Zn,Xn?{is:Xn}:void 0);return Zn==="select"&&Qn&&Qn.multiple!=null&&er.setAttribute("multiple",Qn.multiple),er},createText:Zn=>doc.createTextNode(Zn),createComment:Zn=>doc.createComment(Zn),setText:(Zn,Jn)=>{Zn.nodeValue=Jn},setElementText:(Zn,Jn)=>{Zn.textContent=Jn},parentNode:Zn=>Zn.parentNode,nextSibling:Zn=>Zn.nextSibling,querySelector:Zn=>doc.querySelector(Zn),setScopeId(Zn,Jn){Zn.setAttribute(Jn,"")},insertStaticContent(Zn,Jn,Xn,Qn,er,tr){const nr=Xn?Xn.previousSibling:Jn.lastChild;if(er&&(er===tr||er.nextSibling))for(;Jn.insertBefore(er.cloneNode(!0),Xn),!(er===tr||!(er=er.nextSibling)););else{templateContainer.innerHTML=Qn?`<svg>${Zn}</svg>`:Zn;const rr=templateContainer.content;if(Qn){const sr=rr.firstChild;for(;sr.firstChild;)rr.appendChild(sr.firstChild);rr.removeChild(sr)}Jn.insertBefore(rr,Xn)}return[nr?nr.nextSibling:Jn.firstChild,Xn?Xn.previousSibling:Jn.lastChild]}};function patchClass(Zn,Jn,Xn){const Qn=Zn._vtc;Qn&&(Jn=(Jn?[Jn,...Qn]:[...Qn]).join(" ")),Jn==null?Zn.removeAttribute("class"):Xn?Zn.setAttribute("class",Jn):Zn.className=Jn}function patchStyle(Zn,Jn,Xn){const Qn=Zn.style,er=isString(Xn);if(Xn&&!er){if(Jn&&!isString(Jn))for(const tr in Jn)Xn[tr]==null&&setStyle(Qn,tr,"");for(const tr in Xn)setStyle(Qn,tr,Xn[tr])}else{const tr=Qn.display;er?Jn!==Xn&&(Qn.cssText=Xn):Jn&&Zn.removeAttribute("style"),"_vod"in Zn&&(Qn.display=tr)}}const importantRE=/\s*!important$/;function setStyle(Zn,Jn,Xn){if(isArray$1(Xn))Xn.forEach(Qn=>setStyle(Zn,Jn,Qn));else if(Xn==null&&(Xn=""),Jn.startsWith("--"))Zn.setProperty(Jn,Xn);else{const Qn=autoPrefix(Zn,Jn);importantRE.test(Xn)?Zn.setProperty(hyphenate(Qn),Xn.replace(importantRE,""),"important"):Zn[Qn]=Xn}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Zn,Jn){const Xn=prefixCache[Jn];if(Xn)return Xn;let Qn=camelize(Jn);if(Qn!=="filter"&&Qn in Zn)return prefixCache[Jn]=Qn;Qn=capitalize$1(Qn);for(let er=0;er<prefixes.length;er++){const tr=prefixes[er]+Qn;if(tr in Zn)return prefixCache[Jn]=tr}return Jn}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Zn,Jn,Xn,Qn,er){if(Qn&&Jn.startsWith("xlink:"))Xn==null?Zn.removeAttributeNS(xlinkNS,Jn.slice(6,Jn.length)):Zn.setAttributeNS(xlinkNS,Jn,Xn);else{const tr=isSpecialBooleanAttr(Jn);Xn==null||tr&&!includeBooleanAttr(Xn)?Zn.removeAttribute(Jn):Zn.setAttribute(Jn,tr?"":Xn)}}function patchDOMProp(Zn,Jn,Xn,Qn,er,tr,nr){if(Jn==="innerHTML"||Jn==="textContent"){Qn&&nr(Qn,er,tr),Zn[Jn]=Xn??"";return}const rr=Zn.tagName;if(Jn==="value"&&rr!=="PROGRESS"&&!rr.includes("-")){Zn._value=Xn;const ir=rr==="OPTION"?Zn.getAttribute("value"):Zn.value,or=Xn??"";ir!==or&&(Zn.value=or),Xn==null&&Zn.removeAttribute(Jn);return}let sr=!1;if(Xn===""||Xn==null){const ir=typeof Zn[Jn];ir==="boolean"?Xn=includeBooleanAttr(Xn):Xn==null&&ir==="string"?(Xn="",sr=!0):ir==="number"&&(Xn=0,sr=!0)}try{Zn[Jn]=Xn}catch{}sr&&Zn.removeAttribute(Jn)}function addEventListener$1(Zn,Jn,Xn,Qn){Zn.addEventListener(Jn,Xn,Qn)}function removeEventListener$1(Zn,Jn,Xn,Qn){Zn.removeEventListener(Jn,Xn,Qn)}function patchEvent(Zn,Jn,Xn,Qn,er=null){const tr=Zn._vei||(Zn._vei={}),nr=tr[Jn];if(Qn&&nr)nr.value=Qn;else{const[rr,sr]=parseName(Jn);if(Qn){const ir=tr[Jn]=createInvoker(Qn,er);addEventListener$1(Zn,rr,ir,sr)}else nr&&(removeEventListener$1(Zn,rr,nr,sr),tr[Jn]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Zn){let Jn;if(optionsModifierRE.test(Zn)){Jn={};let Qn;for(;Qn=Zn.match(optionsModifierRE);)Zn=Zn.slice(0,Zn.length-Qn[0].length),Jn[Qn[0].toLowerCase()]=!0}return[Zn[2]===":"?Zn.slice(3):hyphenate(Zn.slice(2)),Jn]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Zn,Jn){const Xn=Qn=>{if(!Qn._vts)Qn._vts=Date.now();else if(Qn._vts<=Xn.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Qn,Xn.value),Jn,5,[Qn])};return Xn.value=Zn,Xn.attached=getNow(),Xn}function patchStopImmediatePropagation(Zn,Jn){if(isArray$1(Jn)){const Xn=Zn.stopImmediatePropagation;return Zn.stopImmediatePropagation=()=>{Xn.call(Zn),Zn._stopped=!0},Jn.map(Qn=>er=>!er._stopped&&Qn&&Qn(er))}else return Jn}const nativeOnRE=/^on[a-z]/,patchProp=(Zn,Jn,Xn,Qn,er=!1,tr,nr,rr,sr)=>{Jn==="class"?patchClass(Zn,Qn,er):Jn==="style"?patchStyle(Zn,Xn,Qn):isOn(Jn)?isModelListener(Jn)||patchEvent(Zn,Jn,Xn,Qn,nr):(Jn[0]==="."?(Jn=Jn.slice(1),!0):Jn[0]==="^"?(Jn=Jn.slice(1),!1):shouldSetAsProp(Zn,Jn,Qn,er))?patchDOMProp(Zn,Jn,Qn,tr,nr,rr,sr):(Jn==="true-value"?Zn._trueValue=Qn:Jn==="false-value"&&(Zn._falseValue=Qn),patchAttr(Zn,Jn,Qn,er))};function shouldSetAsProp(Zn,Jn,Xn,Qn){return Qn?!!(Jn==="innerHTML"||Jn==="textContent"||Jn in Zn&&nativeOnRE.test(Jn)&&isFunction(Xn)):Jn==="spellcheck"||Jn==="draggable"||Jn==="translate"||Jn==="form"||Jn==="list"&&Zn.tagName==="INPUT"||Jn==="type"&&Zn.tagName==="TEXTAREA"||nativeOnRE.test(Jn)&&isString(Xn)?!1:Jn in Zn}function useCssVars(Zn){const Jn=getCurrentInstance();if(!Jn)return;const Xn=Jn.ut=(er=Zn(Jn.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${Jn.uid}"]`)).forEach(tr=>setVarsOnNode(tr,er))},Qn=()=>{const er=Zn(Jn.proxy);setVarsOnVNode(Jn.subTree,er),Xn(er)};watchPostEffect(Qn),onMounted(()=>{const er=new MutationObserver(Qn);er.observe(Jn.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>er.disconnect())})}function setVarsOnVNode(Zn,Jn){if(Zn.shapeFlag&128){const Xn=Zn.suspense;Zn=Xn.activeBranch,Xn.pendingBranch&&!Xn.isHydrating&&Xn.effects.push(()=>{setVarsOnVNode(Xn.activeBranch,Jn)})}for(;Zn.component;)Zn=Zn.component.subTree;if(Zn.shapeFlag&1&&Zn.el)setVarsOnNode(Zn.el,Jn);else if(Zn.type===Fragment)Zn.children.forEach(Xn=>setVarsOnVNode(Xn,Jn));else if(Zn.type===Static){let{el:Xn,anchor:Qn}=Zn;for(;Xn&&(setVarsOnNode(Xn,Jn),Xn!==Qn);)Xn=Xn.nextSibling}}function setVarsOnNode(Zn,Jn){if(Zn.nodeType===1){const Xn=Zn.style;for(const Qn in Jn)Xn.setProperty(`--${Qn}`,Jn[Qn])}}const TRANSITION="transition",ANIMATION="animation",Transition=(Zn,{slots:Jn})=>h$2(BaseTransition,resolveTransitionProps(Zn),Jn);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(Zn,Jn=[])=>{isArray$1(Zn)?Zn.forEach(Xn=>Xn(...Jn)):Zn&&Zn(...Jn)},hasExplicitCallback=Zn=>Zn?isArray$1(Zn)?Zn.some(Jn=>Jn.length>1):Zn.length>1:!1;function resolveTransitionProps(Zn){const Jn={};for(const Ar in Zn)Ar in DOMTransitionPropsValidators||(Jn[Ar]=Zn[Ar]);if(Zn.css===!1)return Jn;const{name:Xn="v",type:Qn,duration:er,enterFromClass:tr=`${Xn}-enter-from`,enterActiveClass:nr=`${Xn}-enter-active`,enterToClass:rr=`${Xn}-enter-to`,appearFromClass:sr=tr,appearActiveClass:ir=nr,appearToClass:or=rr,leaveFromClass:ar=`${Xn}-leave-from`,leaveActiveClass:cr=`${Xn}-leave-active`,leaveToClass:lr=`${Xn}-leave-to`}=Zn,hr=normalizeDuration(er),fr=hr&&hr[0],gr=hr&&hr[1],{onBeforeEnter:ur,onEnter:dr,onEnterCancelled:yr,onLeave:vr,onLeaveCancelled:_r,onBeforeAppear:kr=ur,onAppear:Cr=dr,onAppearCancelled:br=yr}=Jn,xr=(Ar,Rr,mr)=>{removeTransitionClass(Ar,Rr?or:rr),removeTransitionClass(Ar,Rr?ir:nr),mr&&mr()},$r=(Ar,Rr)=>{Ar._isLeaving=!1,removeTransitionClass(Ar,ar),removeTransitionClass(Ar,lr),removeTransitionClass(Ar,cr),Rr&&Rr()},Mr=Ar=>(Rr,mr)=>{const Fr=Ar?Cr:dr,qr=()=>xr(Rr,Ar,mr);callHook(Fr,[Rr,qr]),nextFrame(()=>{removeTransitionClass(Rr,Ar?sr:tr),addTransitionClass(Rr,Ar?or:rr),hasExplicitCallback(Fr)||whenTransitionEnds(Rr,Qn,fr,qr)})};return extend(Jn,{onBeforeEnter(Ar){callHook(ur,[Ar]),addTransitionClass(Ar,tr),addTransitionClass(Ar,nr)},onBeforeAppear(Ar){callHook(kr,[Ar]),addTransitionClass(Ar,sr),addTransitionClass(Ar,ir)},onEnter:Mr(!1),onAppear:Mr(!0),onLeave(Ar,Rr){Ar._isLeaving=!0;const mr=()=>$r(Ar,Rr);addTransitionClass(Ar,ar),forceReflow(),addTransitionClass(Ar,cr),nextFrame(()=>{Ar._isLeaving&&(removeTransitionClass(Ar,ar),addTransitionClass(Ar,lr),hasExplicitCallback(vr)||whenTransitionEnds(Ar,Qn,gr,mr))}),callHook(vr,[Ar,mr])},onEnterCancelled(Ar){xr(Ar,!1),callHook(yr,[Ar])},onAppearCancelled(Ar){xr(Ar,!0),callHook(br,[Ar])},onLeaveCancelled(Ar){$r(Ar),callHook(_r,[Ar])}})}function normalizeDuration(Zn){if(Zn==null)return null;if(isObject$3(Zn))return[NumberOf(Zn.enter),NumberOf(Zn.leave)];{const Jn=NumberOf(Zn);return[Jn,Jn]}}function NumberOf(Zn){return toNumber$2(Zn)}function addTransitionClass(Zn,Jn){Jn.split(/\s+/).forEach(Xn=>Xn&&Zn.classList.add(Xn)),(Zn._vtc||(Zn._vtc=new Set)).add(Jn)}function removeTransitionClass(Zn,Jn){Jn.split(/\s+/).forEach(Qn=>Qn&&Zn.classList.remove(Qn));const{_vtc:Xn}=Zn;Xn&&(Xn.delete(Jn),Xn.size||(Zn._vtc=void 0))}function nextFrame(Zn){requestAnimationFrame(()=>{requestAnimationFrame(Zn)})}let endId=0;function whenTransitionEnds(Zn,Jn,Xn,Qn){const er=Zn._endId=++endId,tr=()=>{er===Zn._endId&&Qn()};if(Xn)return setTimeout(tr,Xn);const{type:nr,timeout:rr,propCount:sr}=getTransitionInfo(Zn,Jn);if(!nr)return Qn();const ir=nr+"end";let or=0;const ar=()=>{Zn.removeEventListener(ir,cr),tr()},cr=lr=>{lr.target===Zn&&++or>=sr&&ar()};setTimeout(()=>{or<sr&&ar()},rr+1),Zn.addEventListener(ir,cr)}function getTransitionInfo(Zn,Jn){const Xn=window.getComputedStyle(Zn),Qn=hr=>(Xn[hr]||"").split(", "),er=Qn(`${TRANSITION}Delay`),tr=Qn(`${TRANSITION}Duration`),nr=getTimeout(er,tr),rr=Qn(`${ANIMATION}Delay`),sr=Qn(`${ANIMATION}Duration`),ir=getTimeout(rr,sr);let or=null,ar=0,cr=0;Jn===TRANSITION?nr>0&&(or=TRANSITION,ar=nr,cr=tr.length):Jn===ANIMATION?ir>0&&(or=ANIMATION,ar=ir,cr=sr.length):(ar=Math.max(nr,ir),or=ar>0?nr>ir?TRANSITION:ANIMATION:null,cr=or?or===TRANSITION?tr.length:sr.length:0);const lr=or===TRANSITION&&/\b(transform|all)(,|$)/.test(Qn(`${TRANSITION}Property`).toString());return{type:or,timeout:ar,propCount:cr,hasTransform:lr}}function getTimeout(Zn,Jn){for(;Zn.length<Jn.length;)Zn=Zn.concat(Zn);return Math.max(...Jn.map((Xn,Qn)=>toMs(Xn)+toMs(Zn[Qn])))}function toMs(Zn){return Number(Zn.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Zn,{slots:Jn}){const Xn=getCurrentInstance(),Qn=useTransitionState();let er,tr;return onUpdated(()=>{if(!er.length)return;const nr=Zn.moveClass||`${Zn.name||"v"}-move`;if(!hasCSSTransform(er[0].el,Xn.vnode.el,nr))return;er.forEach(callPendingCbs),er.forEach(recordPosition);const rr=er.filter(applyTranslation);forceReflow(),rr.forEach(sr=>{const ir=sr.el,or=ir.style;addTransitionClass(ir,nr),or.transform=or.webkitTransform=or.transitionDuration="";const ar=ir._moveCb=cr=>{cr&&cr.target!==ir||(!cr||/transform$/.test(cr.propertyName))&&(ir.removeEventListener("transitionend",ar),ir._moveCb=null,removeTransitionClass(ir,nr))};ir.addEventListener("transitionend",ar)})}),()=>{const nr=toRaw(Zn),rr=resolveTransitionProps(nr);let sr=nr.tag||Fragment;er=tr,tr=Jn.default?getTransitionRawChildren(Jn.default()):[];for(let ir=0;ir<tr.length;ir++){const or=tr[ir];or.key!=null&&setTransitionHooks(or,resolveTransitionHooks(or,rr,Qn,Xn))}if(er)for(let ir=0;ir<er.length;ir++){const or=er[ir];setTransitionHooks(or,resolveTransitionHooks(or,rr,Qn,Xn)),positionMap.set(or,or.el.getBoundingClientRect())}return createVNode(sr,null,tr)}}},removeMode=Zn=>delete Zn.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(Zn){const Jn=Zn.el;Jn._moveCb&&Jn._moveCb(),Jn._enterCb&&Jn._enterCb()}function recordPosition(Zn){newPositionMap.set(Zn,Zn.el.getBoundingClientRect())}function applyTranslation(Zn){const Jn=positionMap.get(Zn),Xn=newPositionMap.get(Zn),Qn=Jn.left-Xn.left,er=Jn.top-Xn.top;if(Qn||er){const tr=Zn.el.style;return tr.transform=tr.webkitTransform=`translate(${Qn}px,${er}px)`,tr.transitionDuration="0s",Zn}}function hasCSSTransform(Zn,Jn,Xn){const Qn=Zn.cloneNode();Zn._vtc&&Zn._vtc.forEach(nr=>{nr.split(/\s+/).forEach(rr=>rr&&Qn.classList.remove(rr))}),Xn.split(/\s+/).forEach(nr=>nr&&Qn.classList.add(nr)),Qn.style.display="none";const er=Jn.nodeType===1?Jn:Jn.parentNode;er.appendChild(Qn);const{hasTransform:tr}=getTransitionInfo(Qn);return er.removeChild(Qn),tr}const getModelAssigner=Zn=>{const Jn=Zn.props["onUpdate:modelValue"]||!1;return isArray$1(Jn)?Xn=>invokeArrayFns(Jn,Xn):Jn};function onCompositionStart(Zn){Zn.target.composing=!0}function onCompositionEnd(Zn){const Jn=Zn.target;Jn.composing&&(Jn.composing=!1,Jn.dispatchEvent(new Event("input")))}const vModelText={created(Zn,{modifiers:{lazy:Jn,trim:Xn,number:Qn}},er){Zn._assign=getModelAssigner(er);const tr=Qn||er.props&&er.props.type==="number";addEventListener$1(Zn,Jn?"change":"input",nr=>{if(nr.target.composing)return;let rr=Zn.value;Xn&&(rr=rr.trim()),tr&&(rr=looseToNumber(rr)),Zn._assign(rr)}),Xn&&addEventListener$1(Zn,"change",()=>{Zn.value=Zn.value.trim()}),Jn||(addEventListener$1(Zn,"compositionstart",onCompositionStart),addEventListener$1(Zn,"compositionend",onCompositionEnd),addEventListener$1(Zn,"change",onCompositionEnd))},mounted(Zn,{value:Jn}){Zn.value=Jn??""},beforeUpdate(Zn,{value:Jn,modifiers:{lazy:Xn,trim:Qn,number:er}},tr){if(Zn._assign=getModelAssigner(tr),Zn.composing||document.activeElement===Zn&&Zn.type!=="range"&&(Xn||Qn&&Zn.value.trim()===Jn||(er||Zn.type==="number")&&looseToNumber(Zn.value)===Jn))return;const nr=Jn??"";Zn.value!==nr&&(Zn.value=nr)}},vModelCheckbox={deep:!0,created(Zn,Jn,Xn){Zn._assign=getModelAssigner(Xn),addEventListener$1(Zn,"change",()=>{const Qn=Zn._modelValue,er=getValue(Zn),tr=Zn.checked,nr=Zn._assign;if(isArray$1(Qn)){const rr=looseIndexOf(Qn,er),sr=rr!==-1;if(tr&&!sr)nr(Qn.concat(er));else if(!tr&&sr){const ir=[...Qn];ir.splice(rr,1),nr(ir)}}else if(isSet(Qn)){const rr=new Set(Qn);tr?rr.add(er):rr.delete(er),nr(rr)}else nr(getCheckboxValue(Zn,tr))})},mounted:setChecked,beforeUpdate(Zn,Jn,Xn){Zn._assign=getModelAssigner(Xn),setChecked(Zn,Jn,Xn)}};function setChecked(Zn,{value:Jn,oldValue:Xn},Qn){Zn._modelValue=Jn,isArray$1(Jn)?Zn.checked=looseIndexOf(Jn,Qn.props.value)>-1:isSet(Jn)?Zn.checked=Jn.has(Qn.props.value):Jn!==Xn&&(Zn.checked=looseEqual(Jn,getCheckboxValue(Zn,!0)))}const vModelSelect={deep:!0,created(Zn,{value:Jn,modifiers:{number:Xn}},Qn){const er=isSet(Jn);addEventListener$1(Zn,"change",()=>{const tr=Array.prototype.filter.call(Zn.options,nr=>nr.selected).map(nr=>Xn?looseToNumber(getValue(nr)):getValue(nr));Zn._assign(Zn.multiple?er?new Set(tr):tr:tr[0])}),Zn._assign=getModelAssigner(Qn)},mounted(Zn,{value:Jn}){setSelected(Zn,Jn)},beforeUpdate(Zn,Jn,Xn){Zn._assign=getModelAssigner(Xn)},updated(Zn,{value:Jn}){setSelected(Zn,Jn)}};function setSelected(Zn,Jn){const Xn=Zn.multiple;if(!(Xn&&!isArray$1(Jn)&&!isSet(Jn))){for(let Qn=0,er=Zn.options.length;Qn<er;Qn++){const tr=Zn.options[Qn],nr=getValue(tr);if(Xn)isArray$1(Jn)?tr.selected=looseIndexOf(Jn,nr)>-1:tr.selected=Jn.has(nr);else if(looseEqual(getValue(tr),Jn)){Zn.selectedIndex!==Qn&&(Zn.selectedIndex=Qn);return}}!Xn&&Zn.selectedIndex!==-1&&(Zn.selectedIndex=-1)}}function getValue(Zn){return"_value"in Zn?Zn._value:Zn.value}function getCheckboxValue(Zn,Jn){const Xn=Jn?"_trueValue":"_falseValue";return Xn in Zn?Zn[Xn]:Jn}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Zn=>Zn.stopPropagation(),prevent:Zn=>Zn.preventDefault(),self:Zn=>Zn.target!==Zn.currentTarget,ctrl:Zn=>!Zn.ctrlKey,shift:Zn=>!Zn.shiftKey,alt:Zn=>!Zn.altKey,meta:Zn=>!Zn.metaKey,left:Zn=>"button"in Zn&&Zn.button!==0,middle:Zn=>"button"in Zn&&Zn.button!==1,right:Zn=>"button"in Zn&&Zn.button!==2,exact:(Zn,Jn)=>systemModifiers.some(Xn=>Zn[`${Xn}Key`]&&!Jn.includes(Xn))},withModifiers=(Zn,Jn)=>(Xn,...Qn)=>{for(let er=0;er<Jn.length;er++){const tr=modifierGuards[Jn[er]];if(tr&&tr(Xn,Jn))return}return Zn(Xn,...Qn)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Zn,Jn)=>Xn=>{if(!("key"in Xn))return;const Qn=hyphenate(Xn.key);if(Jn.some(er=>er===Qn||keyNames[er]===Qn))return Zn(Xn)},vShow={beforeMount(Zn,{value:Jn},{transition:Xn}){Zn._vod=Zn.style.display==="none"?"":Zn.style.display,Xn&&Jn?Xn.beforeEnter(Zn):setDisplay(Zn,Jn)},mounted(Zn,{value:Jn},{transition:Xn}){Xn&&Jn&&Xn.enter(Zn)},updated(Zn,{value:Jn,oldValue:Xn},{transition:Qn}){!Jn!=!Xn&&(Qn?Jn?(Qn.beforeEnter(Zn),setDisplay(Zn,!0),Qn.enter(Zn)):Qn.leave(Zn,()=>{setDisplay(Zn,!1)}):setDisplay(Zn,Jn))},beforeUnmount(Zn,{value:Jn}){setDisplay(Zn,Jn)}};function setDisplay(Zn,Jn){Zn.style.display=Jn?Zn._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const createApp=(...Zn)=>{const Jn=ensureRenderer().createApp(...Zn),{mount:Xn}=Jn;return Jn.mount=Qn=>{const er=normalizeContainer(Qn);if(!er)return;const tr=Jn._component;!isFunction(tr)&&!tr.render&&!tr.template&&(tr.template=er.innerHTML),er.innerHTML="";const nr=Xn(er,!1,er instanceof SVGElement);return er instanceof Element&&(er.removeAttribute("v-cloak"),er.setAttribute("data-v-app","")),nr},Jn},createSSRApp=(...Zn)=>{const Jn=ensureHydrationRenderer().createApp(...Zn),{mount:Xn}=Jn;return Jn.mount=Qn=>{const er=normalizeContainer(Qn);if(er)return Xn(er,!0,er instanceof SVGElement)},Jn};function normalizeContainer(Zn){return isString(Zn)?document.querySelector(Zn):Zn}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function jsonParseTransform(Zn,Jn){if(Zn!=="__proto__"&&!(Zn==="constructor"&&Jn&&typeof Jn=="object"&&"prototype"in Jn))return Jn}function destr(Zn,Jn={}){if(typeof Zn!="string")return Zn;const Xn=Zn.toLowerCase().trim();if(Xn==="true")return!0;if(Xn==="false")return!1;if(Xn==="null")return null;if(Xn==="nan")return Number.NaN;if(Xn==="infinity")return Number.POSITIVE_INFINITY;if(Xn!=="undefined"){if(!JsonSigRx.test(Zn)){if(Jn.strict)throw new SyntaxError("Invalid JSON");return Zn}try{return suspectProtoRx.test(Zn)||suspectConstructorRx.test(Zn)?JSON.parse(Zn,jsonParseTransform):JSON.parse(Zn)}catch(Qn){if(Jn.strict)throw Qn;return Zn}}}const HASH_RE$1=/#/g,AMPERSAND_RE$1=/&/g,EQUAL_RE$1=/=/g,PLUS_RE$1=/\+/g,ENC_CARET_RE$1=/%5e/gi,ENC_BACKTICK_RE$1=/%60/gi,ENC_PIPE_RE$1=/%7c/gi,ENC_SPACE_RE$1=/%20/gi;function encode$1(Zn){return encodeURI(""+Zn).replace(ENC_PIPE_RE$1,"|")}function encodeQueryValue$1(Zn){return encode$1(typeof Zn=="string"?Zn:JSON.stringify(Zn)).replace(PLUS_RE$1,"%2B").replace(ENC_SPACE_RE$1,"+").replace(HASH_RE$1,"%23").replace(AMPERSAND_RE$1,"%26").replace(ENC_BACKTICK_RE$1,"`").replace(ENC_CARET_RE$1,"^")}function encodeQueryKey$1(Zn){return encodeQueryValue$1(Zn).replace(EQUAL_RE$1,"%3D")}function decode$2(Zn=""){try{return decodeURIComponent(""+Zn)}catch{return""+Zn}}function decodeQueryValue(Zn){return decode$2(Zn.replace(PLUS_RE$1," "))}function parseQuery$1(Zn=""){const Jn={};Zn[0]==="?"&&(Zn=Zn.slice(1));for(const Xn of Zn.split("&")){const Qn=Xn.match(/([^=]+)=?(.*)/)||[];if(Qn.length<2)continue;const er=decode$2(Qn[1]);if(er==="__proto__"||er==="constructor")continue;const tr=decodeQueryValue(Qn[2]||"");typeof Jn[er]<"u"?Array.isArray(Jn[er])?Jn[er].push(tr):Jn[er]=[Jn[er],tr]:Jn[er]=tr}return Jn}function encodeQueryItem(Zn,Jn){return(typeof Jn=="number"||typeof Jn=="boolean")&&(Jn=String(Jn)),Jn?Array.isArray(Jn)?Jn.map(Xn=>`${encodeQueryKey$1(Zn)}=${encodeQueryValue$1(Xn)}`).join("&"):`${encodeQueryKey$1(Zn)}=${encodeQueryValue$1(Jn)}`:encodeQueryKey$1(Zn)}function stringifyQuery$1(Zn){return Object.keys(Zn).filter(Jn=>Zn[Jn]!==void 0).map(Jn=>encodeQueryItem(Jn,Zn[Jn])).join("&")}const PROTOCOL_STRICT_REGEX=/^\w{2,}:([/\\]{1,2})/,PROTOCOL_REGEX=/^\w{2,}:([/\\]{2})?/,PROTOCOL_RELATIVE_REGEX=/^([/\\]\s*){2,}[^/\\]/;function hasProtocol(Zn,Jn={}){return typeof Jn=="boolean"&&(Jn={acceptRelative:Jn}),Jn.strict?PROTOCOL_STRICT_REGEX.test(Zn):PROTOCOL_REGEX.test(Zn)||(Jn.acceptRelative?PROTOCOL_RELATIVE_REGEX.test(Zn):!1)}const TRAILING_SLASH_RE$1=/\/$|\/\?/;function hasTrailingSlash(Zn="",Jn=!1){return Jn?TRAILING_SLASH_RE$1.test(Zn):Zn.endsWith("/")}function withoutTrailingSlash(Zn="",Jn=!1){if(!Jn)return(hasTrailingSlash(Zn)?Zn.slice(0,-1):Zn)||"/";if(!hasTrailingSlash(Zn,!0))return Zn||"/";const[Xn,...Qn]=Zn.split("?");return(Xn.slice(0,-1)||"/")+(Qn.length>0?`?${Qn.join("?")}`:"")}function withTrailingSlash(Zn="",Jn=!1){if(!Jn)return Zn.endsWith("/")?Zn:Zn+"/";if(hasTrailingSlash(Zn,!0))return Zn||"/";const[Xn,...Qn]=Zn.split("?");return Xn+"/"+(Qn.length>0?`?${Qn.join("?")}`:"")}function hasLeadingSlash(Zn=""){return Zn.startsWith("/")}function withoutLeadingSlash(Zn=""){return(hasLeadingSlash(Zn)?Zn.slice(1):Zn)||"/"}function withBase(Zn,Jn){if(isEmptyURL(Jn)||hasProtocol(Zn))return Zn;const Xn=withoutTrailingSlash(Jn);return Zn.startsWith(Xn)?Zn:joinURL(Xn,Zn)}function withoutBase(Zn,Jn){if(isEmptyURL(Jn))return Zn;const Xn=withoutTrailingSlash(Jn);if(!Zn.startsWith(Xn))return Zn;const Qn=Zn.slice(Xn.length);return Qn[0]==="/"?Qn:"/"+Qn}function withQuery(Zn,Jn){const Xn=parseURL$1(Zn),Qn={...parseQuery$1(Xn.search),...Jn};return Xn.search=stringifyQuery$1(Qn),stringifyParsedURL(Xn)}function isEmptyURL(Zn){return!Zn||Zn==="/"}function isNonEmptyURL(Zn){return Zn&&Zn!=="/"}function joinURL(Zn,...Jn){let Xn=Zn||"";for(const Qn of Jn.filter(er=>isNonEmptyURL(er)))Xn=Xn?withTrailingSlash(Xn)+withoutLeadingSlash(Qn):Qn;return Xn}function parseURL$1(Zn="",Jn){if(!hasProtocol(Zn,{acceptRelative:!0}))return Jn?parseURL$1(Jn+Zn):parsePath(Zn);const[Xn="",Qn,er=""]=(Zn.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[tr="",nr=""]=(er.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:rr,search:sr,hash:ir}=parsePath(nr.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:Xn,auth:Qn?Qn.slice(0,Math.max(0,Qn.length-1)):"",host:tr,pathname:rr,search:sr,hash:ir}}function parsePath(Zn=""){const[Jn="",Xn="",Qn=""]=(Zn.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:Jn,search:Xn,hash:Qn}}function stringifyParsedURL(Zn){const Jn=Zn.pathname+(Zn.search?(Zn.search.startsWith("?")?"":"?")+Zn.search:"")+Zn.hash;return Zn.protocol?Zn.protocol+"//"+(Zn.auth?Zn.auth+"@":"")+Zn.host+Jn:Jn}class FetchError extends Error{constructor(){super(...arguments),this.name="FetchError"}}function createFetchError(Zn,Jn,Xn){let Qn="";Jn&&(Qn=Jn.message),Zn&&Xn?Qn=`${Qn} (${Xn.status} ${Xn.statusText} (${Zn.toString()}))`:Zn&&(Qn=`${Qn} (${Zn.toString()})`);const er=new FetchError(Qn);return Object.defineProperty(er,"request",{get(){return Zn}}),Object.defineProperty(er,"response",{get(){return Xn}}),Object.defineProperty(er,"data",{get(){return Xn&&Xn._data}}),Object.defineProperty(er,"status",{get(){return Xn&&Xn.status}}),Object.defineProperty(er,"statusText",{get(){return Xn&&Xn.statusText}}),Object.defineProperty(er,"statusCode",{get(){return Xn&&Xn.status}}),Object.defineProperty(er,"statusMessage",{get(){return Xn&&Xn.statusText}}),er}const payloadMethods=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(Zn="GET"){return payloadMethods.has(Zn.toUpperCase())}function isJSONSerializable(Zn){if(Zn===void 0)return!1;const Jn=typeof Zn;return Jn==="string"||Jn==="number"||Jn==="boolean"||Jn===null?!0:Jn!=="object"?!1:Array.isArray(Zn)?!0:Zn.constructor&&Zn.constructor.name==="Object"||typeof Zn.toJSON=="function"}const textTypes=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JSON_RE=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function detectResponseType(Zn=""){if(!Zn)return"json";const Jn=Zn.split(";").shift()||"";return JSON_RE.test(Jn)?"json":textTypes.has(Jn)||Jn.startsWith("text/")?"text":"blob"}const retryStatusCodes=new Set([408,409,425,429,500,502,503,504]);function createFetch(Zn){const{fetch:Jn,Headers:Xn}=Zn;function Qn(nr){const rr=nr.error&&nr.error.name==="AbortError"||!1;if(nr.options.retry!==!1&&!rr){let ir;typeof nr.options.retry=="number"?ir=nr.options.retry:ir=isPayloadMethod(nr.options.method)?0:1;const or=nr.response&&nr.response.status||500;if(ir>0&&retryStatusCodes.has(or))return er(nr.request,{...nr.options,retry:ir-1})}const sr=createFetchError(nr.request,nr.error,nr.response);throw Error.captureStackTrace&&Error.captureStackTrace(sr,er),sr}const er=async function(rr,sr={}){const ir={request:rr,options:{...Zn.defaults,...sr},response:void 0,error:void 0};ir.options.onRequest&&await ir.options.onRequest(ir),typeof ir.request=="string"&&(ir.options.baseURL&&(ir.request=withBase(ir.request,ir.options.baseURL)),(ir.options.query||ir.options.params)&&(ir.request=withQuery(ir.request,{...ir.options.params,...ir.options.query})),ir.options.body&&isPayloadMethod(ir.options.method)&&isJSONSerializable(ir.options.body)&&(ir.options.body=typeof ir.options.body=="string"?ir.options.body:JSON.stringify(ir.options.body),ir.options.headers=new Xn(ir.options.headers),ir.options.headers.has("content-type")||ir.options.headers.set("content-type","application/json"),ir.options.headers.has("accept")||ir.options.headers.set("accept","application/json"))),ir.response=await Jn(ir.request,ir.options).catch(async ar=>(ir.error=ar,ir.options.onRequestError&&await ir.options.onRequestError(ir),Qn(ir)));const or=(ir.options.parseResponse?"json":ir.options.responseType)||detectResponseType(ir.response.headers.get("content-type")||"");if(or==="json"){const ar=await ir.response.text(),cr=ir.options.parseResponse||destr;ir.response._data=cr(ar)}else or==="stream"?ir.response._data=ir.response.body:ir.response._data=await ir.response[or]();return ir.options.onResponse&&await ir.options.onResponse(ir),ir.response.status>=400&&ir.response.status<600?(ir.options.onResponseError&&await ir.options.onResponseError(ir),Qn(ir)):ir.response},tr=function(rr,sr){return er(rr,sr).then(ir=>ir._data)};return tr.raw=er,tr.native=Jn,tr.create=(nr={})=>createFetch({...Zn,defaults:{...Zn.defaults,...nr}}),tr}const _globalThis$1=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),fetch$1=_globalThis$1.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Headers=_globalThis$1.Headers,ofetch=createFetch({fetch:fetch$1,Headers}),$fetch$1=ofetch,useRuntimeConfig$1=()=>{var Zn;return((Zn=window==null?void 0:window.__NUXT__)==null?void 0:Zn.config)||{}},appConfig=useRuntimeConfig$1().app,baseURL=()=>appConfig.baseURL,buildAssetsDir=()=>appConfig.buildAssetsDir,buildAssetsURL=(...Zn)=>joinURL(publicAssetsURL(),buildAssetsDir(),...Zn),publicAssetsURL=(...Zn)=>{const Jn=appConfig.cdnURL||appConfig.baseURL;return Zn.length?joinURL(Jn,...Zn):Jn};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;function flatHooks(Zn,Jn={},Xn){for(const Qn in Zn){const er=Zn[Qn],tr=Xn?`${Xn}:${Qn}`:Qn;typeof er=="object"&&er!==null?flatHooks(er,Jn,tr):typeof er=="function"&&(Jn[tr]=er)}return Jn}const defaultTask={run:Zn=>Zn()},_createTask=()=>defaultTask,createTask=typeof console.createTask<"u"?console.createTask:_createTask;function serialTaskCaller(Zn,Jn){const Xn=Jn.shift(),Qn=createTask(Xn);return Zn.reduce((er,tr)=>er.then(()=>Qn.run(()=>tr(...Jn))),Promise.resolve())}function parallelTaskCaller(Zn,Jn){const Xn=Jn.shift(),Qn=createTask(Xn);return Promise.all(Zn.map(er=>Qn.run(()=>er(...Jn))))}function callEachWith(Zn,Jn){for(const Xn of[...Zn])Xn(Jn)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(Jn,Xn,Qn={}){if(!Jn||typeof Xn!="function")return()=>{};const er=Jn;let tr;for(;this._deprecatedHooks[Jn];)tr=this._deprecatedHooks[Jn],Jn=tr.to;if(tr&&!Qn.allowDeprecated){let nr=tr.message;nr||(nr=`${er} hook has been deprecated`+(tr.to?`, please use ${tr.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(nr)||(console.warn(nr),this._deprecatedMessages.add(nr))}if(!Xn.name)try{Object.defineProperty(Xn,"name",{get:()=>"_"+Jn.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[Jn]=this._hooks[Jn]||[],this._hooks[Jn].push(Xn),()=>{Xn&&(this.removeHook(Jn,Xn),Xn=void 0)}}hookOnce(Jn,Xn){let Qn,er=(...tr)=>(typeof Qn=="function"&&Qn(),Qn=void 0,er=void 0,Xn(...tr));return Qn=this.hook(Jn,er),Qn}removeHook(Jn,Xn){if(this._hooks[Jn]){const Qn=this._hooks[Jn].indexOf(Xn);Qn!==-1&&this._hooks[Jn].splice(Qn,1),this._hooks[Jn].length===0&&delete this._hooks[Jn]}}deprecateHook(Jn,Xn){this._deprecatedHooks[Jn]=typeof Xn=="string"?{to:Xn}:Xn;const Qn=this._hooks[Jn]||[];delete this._hooks[Jn];for(const er of Qn)this.hook(Jn,er)}deprecateHooks(Jn){Object.assign(this._deprecatedHooks,Jn);for(const Xn in Jn)this.deprecateHook(Xn,Jn[Xn])}addHooks(Jn){const Xn=flatHooks(Jn),Qn=Object.keys(Xn).map(er=>this.hook(er,Xn[er]));return()=>{for(const er of Qn.splice(0,Qn.length))er()}}removeHooks(Jn){const Xn=flatHooks(Jn);for(const Qn in Xn)this.removeHook(Qn,Xn[Qn])}removeAllHooks(){for(const Jn in this._hooks)delete this._hooks[Jn]}callHook(Jn,...Xn){return Xn.unshift(Jn),this.callHookWith(serialTaskCaller,Jn,...Xn)}callHookParallel(Jn,...Xn){return Xn.unshift(Jn),this.callHookWith(parallelTaskCaller,Jn,...Xn)}callHookWith(Jn,Xn,...Qn){const er=this._before||this._after?{name:Xn,args:Qn,context:{}}:void 0;this._before&&callEachWith(this._before,er);const tr=Jn(Xn in this._hooks?[...this._hooks[Xn]]:[],Qn);return tr instanceof Promise?tr.finally(()=>{this._after&&er&&callEachWith(this._after,er)}):(this._after&&er&&callEachWith(this._after,er),tr)}beforeEach(Jn){return this._before=this._before||[],this._before.push(Jn),()=>{if(this._before!==void 0){const Xn=this._before.indexOf(Jn);Xn!==-1&&this._before.splice(Xn,1)}}}afterEach(Jn){return this._after=this._after||[],this._after.push(Jn),()=>{if(this._after!==void 0){const Xn=this._after.indexOf(Jn);Xn!==-1&&this._after.splice(Xn,1)}}}}function createHooks(){return new Hookable}function createContext(Zn={}){let Jn,Xn=!1;const Qn=nr=>{if(Jn&&Jn!==nr)throw new Error("Context conflict")};let er;if(Zn.asyncContext){const nr=Zn.AsyncLocalStorage||globalThis.AsyncLocalStorage;nr?er=new nr:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const tr=()=>{if(er&&Jn===void 0){const nr=er.getStore();if(nr!==void 0)return nr}return Jn};return{use:()=>{const nr=tr();if(nr===void 0)throw new Error("Context is not available");return nr},tryUse:()=>tr(),set:(nr,rr)=>{rr||Qn(nr),Jn=nr,Xn=!0},unset:()=>{Jn=void 0,Xn=!1},call:(nr,rr)=>{Qn(nr),Jn=nr;try{return er?er.run(nr,rr):rr()}finally{Xn||(Jn=void 0)}},async callAsync(nr,rr){Jn=nr;const sr=()=>{Jn=nr},ir=()=>Jn===nr?sr:void 0;asyncHandlers.add(ir);try{const or=er?er.run(nr,rr):rr();return Xn||(Jn=void 0),await or}finally{asyncHandlers.delete(ir)}}}}function createNamespace(Zn={}){const Jn={};return{get(Xn,Qn={}){return Jn[Xn]||(Jn[Xn]=createContext({...Zn,...Qn})),Jn[Xn],Jn[Xn]}}}const _globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},globalKey="__unctx__",defaultNamespace=_globalThis[globalKey]||(_globalThis[globalKey]=createNamespace()),getContext=(Zn,Jn={})=>defaultNamespace.get(Zn,Jn),asyncHandlersKey="__unctx_async_handlers__",asyncHandlers=_globalThis[asyncHandlersKey]||(_globalThis[asyncHandlersKey]=new Set);function executeAsync(Zn){const Jn=[];for(const er of asyncHandlers){const tr=er();tr&&Jn.push(tr)}const Xn=()=>{for(const er of Jn)er()};let Qn=Zn();return Qn&&typeof Qn=="object"&&"catch"in Qn&&(Qn=Qn.catch(er=>{throw Xn(),er})),[Qn,Xn]}const nuxtAppCtx=getContext("nuxt-app"),NuxtPluginIndicator="__nuxt_plugin";function createNuxtApp(Zn){let Jn=0;const Xn={provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.5.2"},get vue(){return Xn.vueApp.version}},payload:reactive({data:{},state:{},_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:er=>callWithNuxt(Xn,er),isHydrating:!0,deferHydration(){if(!Xn.isHydrating)return()=>{};Jn++;let er=!1;return()=>{if(!er&&(er=!0,Jn--,Jn===0))return Xn.isHydrating=!1,Xn.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...Zn};Xn.hooks=createHooks(),Xn.hook=Xn.hooks.hook,Xn.callHook=Xn.hooks.callHook,Xn.provide=(er,tr)=>{const nr="$"+er;defineGetter(Xn,nr,tr),defineGetter(Xn.vueApp.config.globalProperties,nr,tr)},defineGetter(Xn.vueApp,"$nuxt",Xn),defineGetter(Xn.vueApp.config.globalProperties,"$nuxt",Xn);{window.addEventListener("nuxt.preloadError",tr=>{Xn.callHook("app:chunkError",{error:tr.payload})});const er=Xn.hook("app:error",(...tr)=>{console.error("[nuxt] error caught during app initialization",...tr)});Xn.hook("app:mounted",er)}const Qn=reactive(Xn.payload.config);return Xn.provide("config",Qn),Xn}async function applyPlugin(Zn,Jn){if(typeof Jn!="function")return;const{provide:Xn}=await Zn.runWithContext(()=>Jn(Zn))||{};if(Xn&&typeof Xn=="object")for(const Qn in Xn)Zn.provide(Qn,Xn[Qn])}async function applyPlugins(Zn,Jn){var er;const Xn=[],Qn=[];for(const tr of Jn){const nr=applyPlugin(Zn,tr);(er=tr.meta)!=null&&er.parallel?Xn.push(nr.catch(rr=>Qn.push(rr))):await nr}if(await Promise.all(Xn),Qn.length)throw Qn[0]}function normalizePlugins(Zn){const Jn=[];for(const Xn of Zn){if(typeof Xn!="function")continue;let Qn=Xn;Xn.length>1&&(Qn=er=>Xn(er,er.provide)),Jn.push(Qn)}return Jn.sort((Xn,Qn)=>{var er,tr;return(((er=Xn.meta)==null?void 0:er.order)||orderMap.default)-(((tr=Qn.meta)==null?void 0:tr.order)||orderMap.default)}),Jn}const orderMap={pre:-20,default:0,post:20};function defineNuxtPlugin(Zn,Jn){var Qn;if(typeof Zn=="function")return defineNuxtPlugin({setup:Zn},Jn);const Xn=er=>{if(Zn.hooks&&er.hooks.addHooks(Zn.hooks),Zn.setup)return Zn.setup(er)};return Xn.meta={name:(Jn==null?void 0:Jn.name)||Zn.name||((Qn=Zn.setup)==null?void 0:Qn.name),parallel:Zn.parallel,order:(Jn==null?void 0:Jn.order)||Zn.order||orderMap[Zn.enforce||"default"]||orderMap.default},Xn[NuxtPluginIndicator]=!0,Xn}function callWithNuxt(Zn,Jn,Xn){const Qn=()=>Xn?Jn(...Xn):Jn();return nuxtAppCtx.set(Zn),Zn.vueApp.runWithContext(Qn)}function useNuxtApp(){var Jn;let Zn;if(hasInjectionContext()&&(Zn=(Jn=getCurrentInstance())==null?void 0:Jn.appContext.app.$nuxt),Zn=Zn||nuxtAppCtx.tryUse(),!Zn)throw new Error("[nuxt] instance unavailable");return Zn}function useRuntimeConfig(){return useNuxtApp().$config}function defineGetter(Zn,Jn,Xn){Object.defineProperty(Zn,Jn,{get:()=>Xn})}const windi="",vars="",style="",isVue2=!1;/*!
  * pinia v2.1.3
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=Zn=>activePinia=Zn,piniaSymbol=Symbol();function isPlainObject(Zn){return Zn&&typeof Zn=="object"&&Object.prototype.toString.call(Zn)==="[object Object]"&&typeof Zn.toJSON!="function"}var MutationType;(function(Zn){Zn.direct="direct",Zn.patchObject="patch object",Zn.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Zn=effectScope(!0),Jn=Zn.run(()=>ref({}));let Xn=[],Qn=[];const er=markRaw({install(tr){setActivePinia(er),er._a=tr,tr.provide(piniaSymbol,er),tr.config.globalProperties.$pinia=er,Qn.forEach(nr=>Xn.push(nr)),Qn=[]},use(tr){return!this._a&&!isVue2?Qn.push(tr):Xn.push(tr),this},_p:Xn,_a:null,_e:Zn,_s:new Map,state:Jn});return er}const noop$1=()=>{};function addSubscription(Zn,Jn,Xn,Qn=noop$1){Zn.push(Jn);const er=()=>{const tr=Zn.indexOf(Jn);tr>-1&&(Zn.splice(tr,1),Qn())};return!Xn&&getCurrentScope()&&onScopeDispose(er),er}function triggerSubscriptions(Zn,...Jn){Zn.slice().forEach(Xn=>{Xn(...Jn)})}const fallbackRunWithContext=Zn=>Zn();function mergeReactiveObjects(Zn,Jn){Zn instanceof Map&&Jn instanceof Map&&Jn.forEach((Xn,Qn)=>Zn.set(Qn,Xn)),Zn instanceof Set&&Jn instanceof Set&&Jn.forEach(Zn.add,Zn);for(const Xn in Jn){if(!Jn.hasOwnProperty(Xn))continue;const Qn=Jn[Xn],er=Zn[Xn];isPlainObject(er)&&isPlainObject(Qn)&&Zn.hasOwnProperty(Xn)&&!isRef(Qn)&&!isReactive(Qn)?Zn[Xn]=mergeReactiveObjects(er,Qn):Zn[Xn]=Qn}return Zn}const skipHydrateSymbol=Symbol();function shouldHydrate(Zn){return!isPlainObject(Zn)||!Zn.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Zn){return!!(isRef(Zn)&&Zn.effect)}function createOptionsStore(Zn,Jn,Xn,Qn){const{state:er,actions:tr,getters:nr}=Jn,rr=Xn.state.value[Zn];let sr;function ir(){rr||(Xn.state.value[Zn]=er?er():{});const or=toRefs(Xn.state.value[Zn]);return assign$1(or,tr,Object.keys(nr||{}).reduce((ar,cr)=>(ar[cr]=markRaw(computed(()=>{setActivePinia(Xn);const lr=Xn._s.get(Zn);return nr[cr].call(lr,lr)})),ar),{}))}return sr=createSetupStore(Zn,ir,Jn,Xn,Qn,!0),sr}function createSetupStore(Zn,Jn,Xn={},Qn,er,tr){let nr;const rr=assign$1({actions:{}},Xn),sr={deep:!0};let ir,or,ar=[],cr=[],lr;const hr=Qn.state.value[Zn];!tr&&!hr&&(Qn.state.value[Zn]={}),ref({});let fr;function gr(br){let xr;ir=or=!1,typeof br=="function"?(br(Qn.state.value[Zn]),xr={type:MutationType.patchFunction,storeId:Zn,events:lr}):(mergeReactiveObjects(Qn.state.value[Zn],br),xr={type:MutationType.patchObject,payload:br,storeId:Zn,events:lr});const $r=fr=Symbol();nextTick().then(()=>{fr===$r&&(ir=!0)}),or=!0,triggerSubscriptions(ar,xr,Qn.state.value[Zn])}const ur=tr?function(){const{state:xr}=Xn,$r=xr?xr():{};this.$patch(Mr=>{assign$1(Mr,$r)})}:noop$1;function dr(){nr.stop(),ar=[],cr=[],Qn._s.delete(Zn)}function yr(br,xr){return function(){setActivePinia(Qn);const $r=Array.from(arguments),Mr=[],Ar=[];function Rr(qr){Mr.push(qr)}function mr(qr){Ar.push(qr)}triggerSubscriptions(cr,{args:$r,name:br,store:_r,after:Rr,onError:mr});let Fr;try{Fr=xr.apply(this&&this.$id===Zn?this:_r,$r)}catch(qr){throw triggerSubscriptions(Ar,qr),qr}return Fr instanceof Promise?Fr.then(qr=>(triggerSubscriptions(Mr,qr),qr)).catch(qr=>(triggerSubscriptions(Ar,qr),Promise.reject(qr))):(triggerSubscriptions(Mr,Fr),Fr)}}const vr={_p:Qn,$id:Zn,$onAction:addSubscription.bind(null,cr),$patch:gr,$reset:ur,$subscribe(br,xr={}){const $r=addSubscription(ar,br,xr.detached,()=>Mr()),Mr=nr.run(()=>watch(()=>Qn.state.value[Zn],Ar=>{(xr.flush==="sync"?or:ir)&&br({storeId:Zn,type:MutationType.direct,events:lr},Ar)},assign$1({},sr,xr)));return $r},$dispose:dr},_r=reactive(vr);Qn._s.set(Zn,_r);const kr=Qn._a&&Qn._a.runWithContext||fallbackRunWithContext,Cr=Qn._e.run(()=>(nr=effectScope(),kr(()=>nr.run(Jn))));for(const br in Cr){const xr=Cr[br];if(isRef(xr)&&!isComputed(xr)||isReactive(xr))tr||(hr&&shouldHydrate(xr)&&(isRef(xr)?xr.value=hr[br]:mergeReactiveObjects(xr,hr[br])),Qn.state.value[Zn][br]=xr);else if(typeof xr=="function"){const $r=yr(br,xr);Cr[br]=$r,rr.actions[br]=xr}}return assign$1(_r,Cr),assign$1(toRaw(_r),Cr),Object.defineProperty(_r,"$state",{get:()=>Qn.state.value[Zn],set:br=>{gr(xr=>{assign$1(xr,br)})}}),Qn._p.forEach(br=>{assign$1(_r,nr.run(()=>br({store:_r,app:Qn._a,pinia:Qn,options:rr})))}),hr&&tr&&Xn.hydrate&&Xn.hydrate(_r.$state,hr),ir=!0,or=!0,_r}function defineStore(Zn,Jn,Xn){let Qn,er;const tr=typeof Jn=="function";typeof Zn=="string"?(Qn=Zn,er=tr?Xn:Jn):(er=Zn,Qn=Zn.id);function nr(rr,sr){const ir=hasInjectionContext();return rr=rr||(ir?inject(piniaSymbol,null):null),rr&&setActivePinia(rr),rr=activePinia,rr._s.has(Qn)||(tr?createSetupStore(Qn,Jn,er,rr):createOptionsStore(Qn,er,rr)),rr._s.get(Qn)}return nr.$id=Qn,nr}function asArray(Zn){return Array.isArray(Zn)?Zn:[Zn]}const TagsWithInnerContent=["title","script","style","noscript"],HasElementTags=["base","meta","link","style","script","noscript"],ValidHeadTags=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],UniqueTags=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],TagConfigKeys=["tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent"];function defineHeadPlugin(Zn){return Zn}function hashCode(Zn){let Jn=9;for(let Xn=0;Xn<Zn.length;)Jn=Math.imul(Jn^Zn.charCodeAt(Xn++),9**9);return((Jn^Jn>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function hashTag(Zn){return hashCode(`${Zn.tag}:${Zn.textContent||Zn.innerHTML||""}:${Object.entries(Zn.props).map(([Jn,Xn])=>`${Jn}:${String(Xn)}`).join(",")}`)}function computeHashes(Zn){let Jn=9;for(const Xn of Zn)for(let Qn=0;Qn<Xn.length;)Jn=Math.imul(Jn^Xn.charCodeAt(Qn++),9**9);return((Jn^Jn>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function tagDedupeKey(Zn,Jn){const{props:Xn,tag:Qn}=Zn;if(UniqueTags.includes(Qn))return Qn;if(Qn==="link"&&Xn.rel==="canonical")return"canonical";if(Xn.charset)return"charset";const er=["id"];Qn==="meta"&&er.push("name","property","http-equiv");for(const tr of er)if(typeof Xn[tr]<"u"){const nr=String(Xn[tr]);return Jn&&!Jn(nr)?!1:`${Qn}:${tr}:${nr}`}return!1}function resolveTitleTemplate(Zn,Jn){return Zn==null?Jn||null:typeof Zn=="function"?Zn(Jn):Zn}function setAttrs(Zn,Jn=!1,Xn){const{tag:Qn,$el:er}=Zn;er&&(Object.entries(Qn.props).forEach(([tr,nr])=>{nr=String(nr);const rr=`attr:${tr}`;if(tr==="class"){if(!nr)return;for(const sr of nr.split(" ")){const ir=`${rr}:${sr}`;Xn&&Xn(Zn,ir,()=>er.classList.remove(sr)),er.classList.contains(sr)||er.classList.add(sr)}return}Xn&&!tr.startsWith("data-h-")&&Xn(Zn,rr,()=>er.removeAttribute(tr)),(Jn||er.getAttribute(tr)!==nr)&&er.setAttribute(tr,nr)}),TagsWithInnerContent.includes(Qn.tag)&&(Qn.textContent&&Qn.textContent!==er.textContent?er.textContent=Qn.textContent:Qn.innerHTML&&Qn.innerHTML!==er.innerHTML&&(er.innerHTML=Qn.innerHTML)))}let prevHash=!1;async function renderDOMHead(Zn,Jn={}){var cr,lr;const Xn={shouldRender:!0};if(await Zn.hooks.callHook("dom:beforeRender",Xn),!Xn.shouldRender)return;const Qn=Jn.document||Zn.resolvedOptions.document||window.document,er=(await Zn.resolveTags()).map(rr);if(Zn.resolvedOptions.experimentalHashHydration&&(prevHash=prevHash||Zn._hash||!1,prevHash)){const hr=computeHashes(er.map(fr=>fr.tag._h));if(prevHash===hr)return;prevHash=hr}const tr=Zn._popSideEffectQueue();Zn.headEntries().map(hr=>hr._sde).forEach(hr=>{Object.entries(hr).forEach(([fr,gr])=>{tr[fr]=gr})});const nr=(hr,fr,gr)=>{fr=`${hr.renderId}:${fr}`,hr.entry&&(hr.entry._sde[fr]=gr),delete tr[fr]};function rr(hr){const fr=Zn.headEntries().find(ur=>ur._i===hr._e),gr={renderId:hr._d||hashTag(hr),$el:null,shouldRender:!0,tag:hr,entry:fr,markSideEffect:(ur,dr)=>nr(gr,ur,dr)};return gr}const sr=[],ir={body:[],head:[]},or=hr=>{Zn._elMap[hr.renderId]=hr.$el,sr.push(hr),nr(hr,"el",()=>{var fr;(fr=hr.$el)==null||fr.remove(),delete Zn._elMap[hr.renderId]})};for(const hr of er){if(await Zn.hooks.callHook("dom:beforeRenderTag",hr),!hr.shouldRender)continue;const{tag:fr}=hr;if(fr.tag==="title"){Qn.title=fr.textContent||"",sr.push(hr);continue}if(fr.tag==="htmlAttrs"||fr.tag==="bodyAttrs"){hr.$el=Qn[fr.tag==="htmlAttrs"?"documentElement":"body"],setAttrs(hr,!1,nr),sr.push(hr);continue}if(hr.$el=Zn._elMap[hr.renderId],!hr.$el&&fr.key&&(hr.$el=Qn.querySelector(`${(cr=fr.tagPosition)!=null&&cr.startsWith("body")?"body":"head"} > ${fr.tag}[data-h-${fr._h}]`)),hr.$el){hr.tag._d&&setAttrs(hr),or(hr);continue}ir[(lr=fr.tagPosition)!=null&&lr.startsWith("body")?"body":"head"].push(hr)}const ar={bodyClose:void 0,bodyOpen:void 0,head:void 0};Object.entries(ir).forEach(([hr,fr])=>{var ur;if(!fr.length)return;const gr=(ur=Qn==null?void 0:Qn[hr])==null?void 0:ur.children;if(gr){for(const dr of[...gr].reverse()){const yr=dr.tagName.toLowerCase();if(!HasElementTags.includes(yr))continue;const vr=dr.getAttributeNames().reduce((br,xr)=>({...br,[xr]:dr.getAttribute(xr)}),{}),_r={tag:yr,props:vr};dr.innerHTML&&(_r.innerHTML=dr.innerHTML);const kr=hashTag(_r);let Cr=fr.findIndex(br=>(br==null?void 0:br.renderId)===kr);if(Cr===-1){const br=tagDedupeKey(_r);Cr=fr.findIndex(xr=>(xr==null?void 0:xr.tag._d)&&xr.tag._d===br)}if(Cr!==-1){const br=fr[Cr];br.$el=dr,setAttrs(br),or(br),delete fr[Cr]}}fr.forEach(dr=>{const yr=dr.tag.tagPosition||"head";ar[yr]=ar[yr]||Qn.createDocumentFragment(),dr.$el||(dr.$el=Qn.createElement(dr.tag.tag),setAttrs(dr,!0)),ar[yr].appendChild(dr.$el),or(dr)})}}),ar.head&&Qn.head.appendChild(ar.head),ar.bodyOpen&&Qn.body.insertBefore(ar.bodyOpen,Qn.body.firstChild),ar.bodyClose&&Qn.body.appendChild(ar.bodyClose);for(const hr of sr)await Zn.hooks.callHook("dom:renderTag",hr);Object.values(tr).forEach(hr=>hr())}let domUpdatePromise=null;async function debouncedRenderDOMHead(Zn,Jn={}){function Xn(){return domUpdatePromise=null,renderDOMHead(Zn,Jn)}const Qn=Jn.delayFn||(er=>setTimeout(er,10));return domUpdatePromise=domUpdatePromise||new Promise(er=>Qn(()=>er(Xn())))}function PatchDomOnEntryUpdatesPlugin(Zn){return{hooks:{"entries:updated":function(Jn){if(typeof(Zn==null?void 0:Zn.document)>"u"&&typeof window>"u")return;let Xn=Zn==null?void 0:Zn.delayFn;!Xn&&typeof requestAnimationFrame<"u"&&(Xn=requestAnimationFrame),debouncedRenderDOMHead(Jn,{document:(Zn==null?void 0:Zn.document)||window.document,delayFn:Xn})}}}}function maybeGetSSRHash(Zn){var Jn;return((Jn=Zn==null?void 0:Zn.head.querySelector('meta[name="unhead:ssr"]'))==null?void 0:Jn.getAttribute("content"))||!1}const TAG_WEIGHTS={critical:2,high:9,low:12,base:-1,title:1,meta:10};function tagWeight(Zn){if(typeof Zn.tagPriority=="number")return Zn.tagPriority;if(Zn.tag==="meta"){if(Zn.props.charset)return-2;if(Zn.props["http-equiv"]==="content-security-policy")return 0}const Jn=Zn.tagPriority||Zn.tag;return Jn in TAG_WEIGHTS?TAG_WEIGHTS[Jn]:10}const SortModifiers=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}];function SortTagsPlugin(){return{hooks:{"tags:resolve":Zn=>{const Jn=Xn=>{var Qn;return(Qn=Zn.tags.find(er=>er._d===Xn))==null?void 0:Qn._p};for(const{prefix:Xn,offset:Qn}of SortModifiers)for(const er of Zn.tags.filter(tr=>typeof tr.tagPriority=="string"&&tr.tagPriority.startsWith(Xn))){const tr=Jn(er.tagPriority.replace(Xn,""));typeof tr<"u"&&(er._p=tr+Qn)}Zn.tags.sort((Xn,Qn)=>Xn._p-Qn._p).sort((Xn,Qn)=>tagWeight(Xn)-tagWeight(Qn))}}}}function TitleTemplatePlugin(){return{hooks:{"tags:resolve":Zn=>{const{tags:Jn}=Zn;let Xn=Jn.findIndex(er=>er.tag==="titleTemplate");const Qn=Jn.findIndex(er=>er.tag==="title");if(Qn!==-1&&Xn!==-1){const er=resolveTitleTemplate(Jn[Xn].textContent,Jn[Qn].textContent);er!==null?Jn[Qn].textContent=er||Jn[Qn].textContent:delete Jn[Qn]}else if(Xn!==-1){const er=resolveTitleTemplate(Jn[Xn].textContent);er!==null&&(Jn[Xn].textContent=er,Jn[Xn].tag="title",Xn=-1)}Xn!==-1&&delete Jn[Xn],Zn.tags=Jn.filter(Boolean)}}}}function DeprecatedTagAttrPlugin(){return{hooks:{"tag:normalise":function({tag:Zn}){typeof Zn.props.body<"u"&&(Zn.tagPosition="bodyClose",delete Zn.props.body)}}}}const DupeableTags=["link","style","script","noscript"];function ProvideTagHashPlugin(){return{hooks:{"tag:normalise":({tag:Zn,resolvedOptions:Jn})=>{Jn.experimentalHashHydration===!0&&(Zn._h=hashTag(Zn)),Zn.key&&DupeableTags.includes(Zn.tag)&&(Zn._h=hashCode(Zn.key),Zn.props[`data-h-${Zn._h}`]="")}}}}const ValidEventTags=["script","link","bodyAttrs"];function EventHandlersPlugin(){const Zn=(Jn,Xn)=>{const Qn={},er={};Object.entries(Xn.props).forEach(([nr,rr])=>{nr.startsWith("on")&&typeof rr=="function"?er[nr]=rr:Qn[nr]=rr});let tr;return Jn==="dom"&&Xn.tag==="script"&&typeof Qn.src=="string"&&typeof er.onload<"u"&&(tr=Qn.src,delete Qn.src),{props:Qn,eventHandlers:er,delayedSrc:tr}};return{hooks:{"ssr:render":function(Jn){Jn.tags=Jn.tags.map(Xn=>(!ValidEventTags.includes(Xn.tag)||!Object.entries(Xn.props).find(([Qn,er])=>Qn.startsWith("on")&&typeof er=="function")||(Xn.props=Zn("ssr",Xn).props),Xn))},"dom:beforeRenderTag":function(Jn){if(!ValidEventTags.includes(Jn.tag.tag)||!Object.entries(Jn.tag.props).find(([tr,nr])=>tr.startsWith("on")&&typeof nr=="function"))return;const{props:Xn,eventHandlers:Qn,delayedSrc:er}=Zn("dom",Jn.tag);Object.keys(Qn).length&&(Jn.tag.props=Xn,Jn.tag._eventHandlers=Qn,Jn.tag._delayedSrc=er)},"dom:renderTag":function(Jn){const Xn=Jn.$el;if(!Jn.tag._eventHandlers||!Xn)return;const Qn=Jn.tag.tag==="bodyAttrs"&&typeof window<"u"?window:Xn;Object.entries(Jn.tag._eventHandlers).forEach(([er,tr])=>{const nr=`${Jn.tag._d||Jn.tag._p}:${er}`,rr=er.slice(2).toLowerCase(),sr=`data-h-${rr}`;if(Jn.markSideEffect(nr,()=>{}),Xn.hasAttribute(sr))return;const ir=tr;Xn.setAttribute(sr,""),Qn.addEventListener(rr,ir),Jn.entry&&(Jn.entry._sde[nr]=()=>{Qn.removeEventListener(rr,ir),Xn.removeAttribute(sr)})}),Jn.tag._delayedSrc&&Xn.setAttribute("src",Jn.tag._delayedSrc)}}}}const UsesMergeStrategy=["templateParams","htmlAttrs","bodyAttrs"];function DedupesTagsPlugin(){return{hooks:{"tag:normalise":function({tag:Zn}){["hid","vmid","key"].forEach(Qn=>{Zn.props[Qn]&&(Zn.key=Zn.props[Qn],delete Zn.props[Qn])});const Xn=tagDedupeKey(Zn)||(Zn.key?`${Zn.tag}:${Zn.key}`:!1);Xn&&(Zn._d=Xn)},"tags:resolve":function(Zn){const Jn={};Zn.tags.forEach(Qn=>{const er=(Qn.key?`${Qn.tag}:${Qn.key}`:Qn._d)||Qn._p,tr=Jn[er];if(tr){let rr=Qn==null?void 0:Qn.tagDuplicateStrategy;if(!rr&&UsesMergeStrategy.includes(Qn.tag)&&(rr="merge"),rr==="merge"){const sr=tr.props;["class","style"].forEach(ir=>{Qn.props[ir]&&sr[ir]&&(ir==="style"&&!sr[ir].endsWith(";")&&(sr[ir]+=";"),Qn.props[ir]=`${sr[ir]} ${Qn.props[ir]}`)}),Jn[er].props={...sr,...Qn.props};return}else if(Qn._e===tr._e){tr._duped=tr._duped||[],Qn._d=`${tr._d}:${tr._duped.length+1}`,tr._duped.push(Qn);return}}const nr=Object.keys(Qn.props).length+(Qn.innerHTML?1:0)+(Qn.textContent?1:0);if(HasElementTags.includes(Qn.tag)&&nr===0){delete Jn[er];return}Jn[er]=Qn});const Xn=[];Object.values(Jn).forEach(Qn=>{const er=Qn._duped;delete Qn._duped,Xn.push(Qn),er&&Xn.push(...er)}),Zn.tags=Xn}}}}function processTemplateParams(Zn,Jn){function Xn(tr){if(["s","pageTitle"].includes(tr))return Jn.pageTitle;let nr;return tr.includes(".")?nr=tr.split(".").reduce((rr,sr)=>rr&&rr[sr]||void 0,Jn):nr=Jn[tr],typeof nr<"u"?nr||"":!1}let Qn=Zn;try{Qn=decodeURI(Zn)}catch{}return(Qn.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(tr=>{const nr=Xn(tr.slice(1));typeof nr=="string"&&(Zn=Zn.replace(new RegExp(`\\${tr}(\\W|$)`,"g"),`${nr}$1`).trim())}),Jn.separator&&(Zn.endsWith(Jn.separator)&&(Zn=Zn.slice(0,-Jn.separator.length).trim()),Zn.startsWith(Jn.separator)&&(Zn=Zn.slice(Jn.separator.length).trim()),Zn=Zn.replace(new RegExp(`\\${Jn.separator}\\s*\\${Jn.separator}`,"g"),Jn.separator)),Zn}function TemplateParamsPlugin(){return{hooks:{"tags:resolve":Zn=>{var tr;const{tags:Jn}=Zn,Xn=(tr=Jn.find(nr=>nr.tag==="title"))==null?void 0:tr.textContent,Qn=Jn.findIndex(nr=>nr.tag==="templateParams"),er=Qn!==-1?Jn[Qn].props:{};er.pageTitle=er.pageTitle||Xn||"";for(const nr of Jn)if(["titleTemplate","title"].includes(nr.tag)&&typeof nr.textContent=="string")nr.textContent=processTemplateParams(nr.textContent,er);else if(nr.tag==="meta"&&typeof nr.props.content=="string")nr.props.content=processTemplateParams(nr.props.content,er);else if(nr.tag==="link"&&typeof nr.props.href=="string")nr.props.href=processTemplateParams(nr.props.href,er);else if(nr.tag==="script"&&["application/json","application/ld+json"].includes(nr.props.type)&&typeof nr.innerHTML=="string")try{nr.innerHTML=JSON.stringify(JSON.parse(nr.innerHTML),(rr,sr)=>typeof sr=="string"?processTemplateParams(sr,er):sr)}catch{}Zn.tags=Jn.filter(nr=>nr.tag!=="templateParams")}}}}const IsBrowser$1=typeof window<"u";let activeHead;function setActiveHead(Zn){return activeHead=Zn}function getActiveHead(){return activeHead}async function normaliseTag(Zn,Jn){const Xn={tag:Zn,props:{}};return Zn==="templateParams"?(Xn.props=Jn,Xn):["title","titleTemplate"].includes(Zn)?(Xn.textContent=Jn instanceof Promise?await Jn:Jn,Xn):typeof Jn=="string"?["script","noscript","style"].includes(Zn)?(Zn==="script"&&(/^(https?:)?\/\//.test(Jn)||Jn.startsWith("/"))?Xn.props.src=Jn:Xn.innerHTML=Jn,Xn):!1:(Xn.props=await normaliseProps(Zn,{...Jn}),Xn.props.children&&(Xn.props.innerHTML=Xn.props.children),delete Xn.props.children,Object.keys(Xn.props).filter(Qn=>TagConfigKeys.includes(Qn)).forEach(Qn=>{(!["innerHTML","textContent"].includes(Qn)||TagsWithInnerContent.includes(Xn.tag))&&(Xn[Qn]=Xn.props[Qn]),delete Xn.props[Qn]}),["innerHTML","textContent"].forEach(Qn=>{if(Xn.tag==="script"&&typeof Xn[Qn]=="string"&&["application/ld+json","application/json"].includes(Xn.props.type))try{Xn[Qn]=JSON.parse(Xn[Qn])}catch{Xn[Qn]=""}typeof Xn[Qn]=="object"&&(Xn[Qn]=JSON.stringify(Xn[Qn]))}),Xn.props.class&&(Xn.props.class=normaliseClassProp(Xn.props.class)),Xn.props.content&&Array.isArray(Xn.props.content)?Xn.props.content.map(Qn=>({...Xn,props:{...Xn.props,content:Qn}})):Xn)}function normaliseClassProp(Zn){return typeof Zn=="object"&&!Array.isArray(Zn)&&(Zn=Object.keys(Zn).filter(Jn=>Zn[Jn])),(Array.isArray(Zn)?Zn.join(" "):Zn).split(" ").filter(Jn=>Jn.trim()).filter(Boolean).join(" ")}async function normaliseProps(Zn,Jn){for(const Xn of Object.keys(Jn)){const Qn=Xn.startsWith("data-");Jn[Xn]instanceof Promise&&(Jn[Xn]=await Jn[Xn]),String(Jn[Xn])==="true"?Jn[Xn]=Qn?"true":"":String(Jn[Xn])==="false"&&(Qn?Jn[Xn]="false":delete Jn[Xn])}return Jn}const TagEntityBits=10;async function normaliseEntryTags(Zn){const Jn=[];return Object.entries(Zn.resolvedInput).filter(([Xn,Qn])=>typeof Qn<"u"&&ValidHeadTags.includes(Xn)).forEach(([Xn,Qn])=>{const er=asArray(Qn);Jn.push(...er.map(tr=>normaliseTag(Xn,tr)).flat())}),(await Promise.all(Jn)).flat().filter(Boolean).map((Xn,Qn)=>(Xn._e=Zn._i,Xn._p=(Zn._i<<TagEntityBits)+Qn,Xn))}function CorePlugins(){return[DedupesTagsPlugin(),SortTagsPlugin(),TemplateParamsPlugin(),TitleTemplatePlugin(),ProvideTagHashPlugin(),EventHandlersPlugin(),DeprecatedTagAttrPlugin()]}function DOMPlugins(Zn={}){return[PatchDomOnEntryUpdatesPlugin({document:Zn==null?void 0:Zn.document,delayFn:Zn==null?void 0:Zn.domDelayFn})]}function createHead$1(Zn={}){const Jn=createHeadCore({...Zn,plugins:[...DOMPlugins(Zn),...(Zn==null?void 0:Zn.plugins)||[]]});return Zn.experimentalHashHydration&&Jn.resolvedOptions.document&&(Jn._hash=maybeGetSSRHash(Jn.resolvedOptions.document)),setActiveHead(Jn),Jn}function createHeadCore(Zn={}){let Jn=[],Xn={},Qn=0;const er=createHooks();Zn!=null&&Zn.hooks&&er.addHooks(Zn.hooks),Zn.plugins=[...CorePlugins(),...(Zn==null?void 0:Zn.plugins)||[]],Zn.plugins.forEach(rr=>rr.hooks&&er.addHooks(rr.hooks)),Zn.document=Zn.document||(IsBrowser$1?document:void 0);const tr=()=>er.callHook("entries:updated",nr),nr={resolvedOptions:Zn,headEntries(){return Jn},get hooks(){return er},use(rr){rr.hooks&&er.addHooks(rr.hooks)},push(rr,sr){const ir={_i:Qn++,input:rr,_sde:{}};return sr!=null&&sr.mode&&(ir._m=sr==null?void 0:sr.mode),sr!=null&&sr.transform&&(ir._t=sr==null?void 0:sr.transform),Jn.push(ir),tr(),{dispose(){Jn=Jn.filter(or=>or._i!==ir._i?!0:(Xn={...Xn,...or._sde||{}},or._sde={},tr(),!1))},patch(or){Jn=Jn.map(ar=>(ar._i===ir._i&&(ir.input=ar.input=or,tr()),ar))}}},async resolveTags(){const rr={tags:[],entries:[...Jn]};await er.callHook("entries:resolve",rr);for(const sr of rr.entries){const ir=sr._t||(or=>or);if(sr.resolvedInput=ir(sr.resolvedInput||sr.input),sr.resolvedInput)for(const or of await normaliseEntryTags(sr)){const ar={tag:or,entry:sr,resolvedOptions:nr.resolvedOptions};await er.callHook("tag:normalise",ar),rr.tags.push(ar.tag)}}return await er.callHook("tags:resolve",rr),rr.tags},_popSideEffectQueue(){const rr={...Xn};return Xn={},rr},_elMap:{}};return nr.hooks.callHook("init",nr),nr}function resolveUnref(Zn){return typeof Zn=="function"?Zn():unref(Zn)}function resolveUnrefHeadInput(Zn,Jn=""){if(Zn instanceof Promise)return Zn;const Xn=resolveUnref(Zn);return!Zn||!Xn?Xn:Array.isArray(Xn)?Xn.map(Qn=>resolveUnrefHeadInput(Qn,Jn)):typeof Xn=="object"?Object.fromEntries(Object.entries(Xn).map(([Qn,er])=>Qn==="titleTemplate"||Qn.startsWith("on")?[Qn,unref(er)]:[Qn,resolveUnrefHeadInput(er,Qn)])):Xn}const Vue3=version.startsWith("3"),IsBrowser=typeof window<"u",headSymbol="usehead";function injectHead(){return getCurrentInstance()&&inject(headSymbol)||getActiveHead()}function vueInstall(Zn){return{install(Xn){Vue3&&(Xn.config.globalProperties.$unhead=Zn,Xn.config.globalProperties.$head=Zn,Xn.provide(headSymbol,Zn))}}.install}function createHead(Zn={}){const Jn=createHead$1({...Zn,domDelayFn:Xn=>setTimeout(()=>nextTick(()=>Xn()),10),plugins:[VueReactiveUseHeadPlugin(),...(Zn==null?void 0:Zn.plugins)||[]]});return Jn.install=vueInstall(Jn),Jn}function VueReactiveUseHeadPlugin(){return{hooks:{"entries:resolve":function(Zn){for(const Jn of Zn.entries)Jn.resolvedInput=resolveUnrefHeadInput(Jn.input)}}}}function clientUseHead(Zn,Jn={}){const Xn=injectHead(),Qn=ref(!1),er=ref({});watchEffect(()=>{er.value=Qn.value?{}:resolveUnrefHeadInput(Zn)});const tr=Xn.push(er.value,Jn);return watch(er,rr=>{tr.patch(rr)}),getCurrentInstance()&&(onBeforeUnmount(()=>{tr.dispose()}),onDeactivated(()=>{Qn.value=!0}),onActivated(()=>{Qn.value=!1})),tr}function serverUseHead(Zn,Jn={}){return injectHead().push(Zn,Jn)}function useHead(Zn,Jn={}){var Qn;const Xn=injectHead();if(Xn){const er=IsBrowser||!!((Qn=Xn.resolvedOptions)!=null&&Qn.document);return Jn.mode==="server"&&er||Jn.mode==="client"&&!er?void 0:er?clientUseHead(Zn,Jn):serverUseHead(Zn,Jn)}}const fieldContentRegExp=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function parse$1(Zn,Jn){if(typeof Zn!="string")throw new TypeError("argument str must be a string");const Xn={},er=(Jn||{}).decode||decode$1;let tr=0;for(;tr<Zn.length;){const nr=Zn.indexOf("=",tr);if(nr===-1)break;let rr=Zn.indexOf(";",tr);if(rr===-1)rr=Zn.length;else if(rr<nr){tr=Zn.lastIndexOf(";",nr-1)+1;continue}const sr=Zn.slice(tr,nr).trim();if(Xn[sr]===void 0){let ir=Zn.slice(nr+1,rr).trim();ir.codePointAt(0)===34&&(ir=ir.slice(1,-1)),Xn[sr]=tryDecode(ir,er)}tr=rr+1}return Xn}function serialize(Zn,Jn,Xn){const Qn=Xn||{},er=Qn.encode||encode;if(typeof er!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(Zn))throw new TypeError("argument name is invalid");const tr=er(Jn);if(tr&&!fieldContentRegExp.test(tr))throw new TypeError("argument val is invalid");let nr=Zn+"="+tr;if(Qn.maxAge!==void 0&&Qn.maxAge!==null){const rr=Qn.maxAge-0;if(Number.isNaN(rr)||!Number.isFinite(rr))throw new TypeError("option maxAge is invalid");nr+="; Max-Age="+Math.floor(rr)}if(Qn.domain){if(!fieldContentRegExp.test(Qn.domain))throw new TypeError("option domain is invalid");nr+="; Domain="+Qn.domain}if(Qn.path){if(!fieldContentRegExp.test(Qn.path))throw new TypeError("option path is invalid");nr+="; Path="+Qn.path}if(Qn.expires){if(!isDate(Qn.expires)||Number.isNaN(Qn.expires.valueOf()))throw new TypeError("option expires is invalid");nr+="; Expires="+Qn.expires.toUTCString()}if(Qn.httpOnly&&(nr+="; HttpOnly"),Qn.secure&&(nr+="; Secure"),Qn.priority)switch(typeof Qn.priority=="string"?Qn.priority.toLowerCase():Qn.priority){case"low":nr+="; Priority=Low";break;case"medium":nr+="; Priority=Medium";break;case"high":nr+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(Qn.sameSite)switch(typeof Qn.sameSite=="string"?Qn.sameSite.toLowerCase():Qn.sameSite){case!0:nr+="; SameSite=Strict";break;case"lax":nr+="; SameSite=Lax";break;case"strict":nr+="; SameSite=Strict";break;case"none":nr+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return nr}function isDate(Zn){return Object.prototype.toString.call(Zn)==="[object Date]"||Zn instanceof Date}function tryDecode(Zn,Jn){try{return Jn(Zn)}catch{return Zn}}function decode$1(Zn){return Zn.includes("%")?decodeURIComponent(Zn):Zn}function encode(Zn){return encodeURIComponent(Zn)}function isObject$2(Zn){return Zn!==null&&typeof Zn=="object"}function _defu(Zn,Jn,Xn=".",Qn){if(!isObject$2(Jn))return _defu(Zn,{},Xn,Qn);const er=Object.assign({},Jn);for(const tr in Zn){if(tr==="__proto__"||tr==="constructor")continue;const nr=Zn[tr];nr!=null&&(Qn&&Qn(er,tr,nr,Xn)||(Array.isArray(nr)&&Array.isArray(er[tr])?er[tr]=[...nr,...er[tr]]:isObject$2(nr)&&isObject$2(er[tr])?er[tr]=_defu(nr,er[tr],(Xn?`${Xn}.`:"")+tr.toString(),Qn):er[tr]=nr))}return er}function createDefu(Zn){return(...Jn)=>Jn.reduce((Xn,Qn)=>_defu(Xn,Qn,"",Zn),{})}const defu=createDefu();class H3Error extends Error{constructor(){super(...arguments),this.statusCode=500,this.fatal=!1,this.unhandled=!1,this.statusMessage=void 0}toJSON(){const Jn={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(Jn.statusMessage=sanitizeStatusMessage(this.statusMessage)),this.data!==void 0&&(Jn.data=this.data),Jn}}H3Error.__h3_error__=!0;function createError$1(Zn){if(typeof Zn=="string")return new H3Error(Zn);if(isError(Zn))return Zn;const Jn=new H3Error(Zn.message??Zn.statusMessage,Zn.cause?{cause:Zn.cause}:void 0);if("stack"in Zn)try{Object.defineProperty(Jn,"stack",{get(){return Zn.stack}})}catch{try{Jn.stack=Zn.stack}catch{}}if(Zn.data&&(Jn.data=Zn.data),Zn.statusCode?Jn.statusCode=sanitizeStatusCode(Zn.statusCode,Jn.statusCode):Zn.status&&(Jn.statusCode=sanitizeStatusCode(Zn.status,Jn.statusCode)),Zn.statusMessage?Jn.statusMessage=Zn.statusMessage:Zn.statusText&&(Jn.statusMessage=Zn.statusText),Jn.statusMessage){const Xn=Jn.statusMessage;sanitizeStatusMessage(Jn.statusMessage)!==Xn&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future `statusMessage` will be sanitized by default.")}return Zn.fatal!==void 0&&(Jn.fatal=Zn.fatal),Zn.unhandled!==void 0&&(Jn.unhandled=Zn.unhandled),Jn}function isError(Zn){var Jn;return((Jn=Zn==null?void 0:Zn.constructor)==null?void 0:Jn.__h3_error__)===!0}const DISALLOWED_STATUS_CHARS=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(Zn=""){return Zn.replace(DISALLOWED_STATUS_CHARS,"")}function sanitizeStatusCode(Zn,Jn=200){return!Zn||(typeof Zn=="string"&&(Zn=Number.parseInt(Zn,10)),Zn<100||Zn>999)?Jn:Zn}typeof setImmediate<"u"&&setImmediate;function useState(...Zn){const Jn=typeof Zn[Zn.length-1]=="string"?Zn.pop():void 0;typeof Zn[0]!="string"&&Zn.unshift(Jn);const[Xn,Qn]=Zn;if(!Xn||typeof Xn!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+Xn);if(Qn!==void 0&&typeof Qn!="function")throw new Error("[nuxt] [useState] init must be a function: "+Qn);const er="$s"+Xn,tr=useNuxtApp(),nr=toRef(tr.payload.state,er);if(nr.value===void 0&&Qn){const rr=Qn();if(isRef(rr))return tr.payload.state[er]=rr,rr;nr.value=rr}return nr}const useRouter=()=>{var Zn;return(Zn=useNuxtApp())==null?void 0:Zn.$router},useRoute=()=>hasInjectionContext()?inject("_route",useNuxtApp()._route):useNuxtApp()._route,defineNuxtRouteMiddleware=Zn=>Zn,isProcessingMiddleware=()=>{try{if(useNuxtApp()._processingMiddleware)return!0}catch{return!0}return!1},navigateTo=(Zn,Jn)=>{Zn||(Zn="/");const Xn=typeof Zn=="string"?Zn:Zn.path||"/",Qn=(Jn==null?void 0:Jn.external)||hasProtocol(Xn,{acceptRelative:!0});if(Qn&&!(Jn!=null&&Jn.external))throw new Error("Navigating to external URL is not allowed by default. Use `navigateTo (url, { external: true })`.");if(Qn&&parseURL$1(Xn).protocol==="script:")throw new Error("Cannot navigate to an URL with script protocol.");const er=isProcessingMiddleware();if(!Qn&&er)return Zn;const tr=useRouter();return Qn?(Jn!=null&&Jn.replace?location.replace(Xn):location.href=Xn,Promise.resolve()):Jn!=null&&Jn.replace?tr.replace(Zn):tr.push(Zn)},useError=()=>toRef(useNuxtApp().payload,"error"),showError=Zn=>{const Jn=createError(Zn);try{const Xn=useNuxtApp(),Qn=useError();Xn.hooks.callHook("app:error",Jn),Qn.value=Qn.value||Jn}catch{throw Jn}return Jn},clearError=async(Zn={})=>{const Jn=useNuxtApp(),Xn=useError();Jn.callHook("app:error:cleared",Zn),Zn.redirect&&await useRouter().replace(Zn.redirect),Xn.value=null},isNuxtError=Zn=>!!(Zn&&typeof Zn=="object"&&"__nuxt_error"in Zn),createError=Zn=>{const Jn=createError$1(Zn);return Jn.__nuxt_error=!0,Jn},requestIdleCallback=globalThis.requestIdleCallback||(Zn=>{const Jn=Date.now(),Xn={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-Jn))};return setTimeout(()=>{Zn(Xn)},1)}),cancelIdleCallback=globalThis.cancelIdleCallback||(Zn=>{clearTimeout(Zn)}),onNuxtReady=Zn=>{const Jn=useNuxtApp();Jn.isHydrating?Jn.hooks.hookOnce("app:suspense:resolve",()=>{requestIdleCallback(Zn)}):requestIdleCallback(Zn)},CookieDefaults={path:"/",watch:!0,decode:Zn=>destr(decodeURIComponent(Zn)),encode:Zn=>encodeURIComponent(typeof Zn=="string"?Zn:JSON.stringify(Zn))};function useCookie(Zn,Jn){var tr;const Xn={...CookieDefaults,...Jn},Qn=readRawCookies(Xn)||{},er=ref(Qn[Zn]??((tr=Xn.default)==null?void 0:tr.call(Xn)));{const nr=()=>{writeClientCookie(Zn,er.value,Xn)};Xn.watch?watch(er,nr,{deep:Xn.watch!=="shallow"}):nr()}return er}function readRawCookies(Zn={}){return parse$1(document.cookie,Zn)}function serializeCookie(Zn,Jn,Xn={}){return Jn==null?serialize(Zn,Jn,{...Xn,maxAge:-1}):serialize(Zn,Jn,Xn)}function writeClientCookie(Zn,Jn,Xn={}){document.cookie=serializeCookie(Zn,Jn,Xn)}async function preloadRouteComponents(Zn,Jn=useRouter()){const{path:Xn,matched:Qn}=Jn.resolve(Zn);if(!Qn.length||(Jn._routePreloaded||(Jn._routePreloaded=new Set),Jn._routePreloaded.has(Xn)))return;const er=Jn._preloadPromises=Jn._preloadPromises||[];if(er.length>4)return Promise.all(er).then(()=>preloadRouteComponents(Zn,Jn));Jn._routePreloaded.add(Xn);const tr=Qn.map(nr=>{var rr;return(rr=nr.components)==null?void 0:rr.default}).filter(nr=>typeof nr=="function");for(const nr of tr){const rr=Promise.resolve(nr()).catch(()=>{}).finally(()=>er.splice(er.indexOf(rr)));er.push(rr)}await Promise.all(er)}const scriptRel="modulepreload",assetsURL=function(Zn,Jn){return Zn.startsWith(".")?new URL(Zn,Jn).href:Zn},seen={},___vitePreload=function(Jn,Xn,Qn){if(!Xn||Xn.length===0)return Jn();const er=document.getElementsByTagName("link");return Promise.all(Xn.map(tr=>{if(tr=assetsURL(tr,Qn),tr in seen)return;seen[tr]=!0;const nr=tr.endsWith(".css"),rr=nr?'[rel="stylesheet"]':"";if(!!Qn)for(let or=er.length-1;or>=0;or--){const ar=er[or];if(ar.href===tr&&(!nr||ar.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${tr}"]${rr}`))return;const ir=document.createElement("link");if(ir.rel=nr?"stylesheet":scriptRel,nr||(ir.as="script",ir.crossOrigin=""),ir.href=tr,document.head.appendChild(ir),nr)return new Promise((or,ar)=>{ir.addEventListener("load",or),ir.addEventListener("error",()=>ar(new Error(`Unable to preload CSS for ${tr}`)))})})).then(()=>Jn())},__vitePreload=(...Zn)=>___vitePreload(...Zn).catch(Jn=>{const Xn=new Event("nuxt.preloadError");throw Xn.payload=Jn,window.dispatchEvent(Xn),Jn}),UNDEFINED=-1,HOLE=-2,NAN=-3,POSITIVE_INFINITY=-4,NEGATIVE_INFINITY=-5,NEGATIVE_ZERO=-6;function parse(Zn,Jn){return unflatten(JSON.parse(Zn),Jn)}function unflatten(Zn,Jn){if(typeof Zn=="number")return er(Zn,!0);if(!Array.isArray(Zn)||Zn.length===0)throw new Error("Invalid input");const Xn=Zn,Qn=Array(Xn.length);function er(tr,nr=!1){if(tr===UNDEFINED)return;if(tr===NAN)return NaN;if(tr===POSITIVE_INFINITY)return 1/0;if(tr===NEGATIVE_INFINITY)return-1/0;if(tr===NEGATIVE_ZERO)return-0;if(nr)throw new Error("Invalid input");if(tr in Qn)return Qn[tr];const rr=Xn[tr];if(!rr||typeof rr!="object")Qn[tr]=rr;else if(Array.isArray(rr))if(typeof rr[0]=="string"){const sr=rr[0],ir=Jn==null?void 0:Jn[sr];if(ir)return Qn[tr]=ir(er(rr[1]));switch(sr){case"Date":Qn[tr]=new Date(rr[1]);break;case"Set":const or=new Set;Qn[tr]=or;for(let lr=1;lr<rr.length;lr+=1)or.add(er(rr[lr]));break;case"Map":const ar=new Map;Qn[tr]=ar;for(let lr=1;lr<rr.length;lr+=2)ar.set(er(rr[lr]),er(rr[lr+1]));break;case"RegExp":Qn[tr]=new RegExp(rr[1],rr[2]);break;case"Object":Qn[tr]=Object(rr[1]);break;case"BigInt":Qn[tr]=BigInt(rr[1]);break;case"null":const cr=Object.create(null);Qn[tr]=cr;for(let lr=1;lr<rr.length;lr+=2)cr[rr[lr]]=er(rr[lr+1]);break;default:throw new Error(`Unknown type ${sr}`)}}else{const sr=new Array(rr.length);Qn[tr]=sr;for(let ir=0;ir<rr.length;ir+=1){const or=rr[ir];or!==HOLE&&(sr[ir]=er(or))}}else{const sr={};Qn[tr]=sr;for(const ir in rr){const or=rr[ir];sr[ir]=er(or)}}return Qn[tr]}return er(0)}const appHead={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"}],link:[],style:[],script:[],noscript:[],title:"New Recruit - Editor",base:{href:"/nr-editor/"}},appPageTransition=!1,appKeepalive=!1,appRootId="__nuxt",renderJsonPayloads=!0;function loadPayload(Zn,Jn={}){const Xn=_getPayloadURL(Zn,Jn),Qn=useNuxtApp(),er=Qn._payloadCache=Qn._payloadCache||{};return er[Xn]||(er[Xn]=_importPayload(Xn).then(tr=>tr||(delete er[Xn],null))),er[Xn]}const extension="json";function _getPayloadURL(Zn,Jn={}){const Xn=new URL(Zn,"http://localhost");if(Xn.search)throw new Error("Payload URL cannot contain search params: "+Zn);if(Xn.host!=="localhost"||hasProtocol(Xn.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+Zn);const Qn=Jn.hash||(Jn.fresh?Date.now():"");return joinURL(useRuntimeConfig().app.baseURL,Xn.pathname,Qn?`_payload.${Qn}.${extension}`:`_payload.${extension}`)}async function _importPayload(Zn){try{return renderJsonPayloads?parsePayload(await fetch(Zn).then(Jn=>Jn.text())):await __vitePreload(()=>import(Zn),[],import.meta.url).then(Jn=>Jn.default||Jn)}catch(Jn){console.warn("[nuxt] Cannot load payload ",Zn,Jn)}return null}function isPrerendered(){return!!useNuxtApp().payload.prerenderedAt}let payloadCache=null;async function getNuxtClientPayload(){if(payloadCache)return payloadCache;const Zn=document.getElementById("__NUXT_DATA__");if(!Zn)return{};const Jn=parsePayload(Zn.textContent||""),Xn=Zn.dataset.src?await _importPayload(Zn.dataset.src):void 0;return payloadCache={...Jn,...Xn,...window.__NUXT__},payloadCache}function parsePayload(Zn){return parse(Zn,useNuxtApp()._payloadRevivers)}function definePayloadReviver(Zn,Jn){useNuxtApp()._payloadRevivers[Zn]=Jn}function reloadNuxtApp(Zn={}){const Jn=Zn.path||window.location.pathname;let Xn={};try{Xn=JSON.parse(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(Zn.force||(Xn==null?void 0:Xn.path)!==Jn||(Xn==null?void 0:Xn.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:Jn,expires:Date.now()+(Zn.ttl??1e4)}))}catch{}if(Zn.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:useNuxtApp().payload.state}))}catch{}window.location.pathname!==Jn?window.location.href=Jn:window.location.reload()}}const firstNonUndefined=(...Zn)=>Zn.find(Jn=>Jn!==void 0),DEFAULT_EXTERNAL_REL_ATTRIBUTE="noopener noreferrer";function defineNuxtLink(Zn){const Jn=Zn.componentName||"NuxtLink",Xn=(Qn,er)=>{if(!Qn||Zn.trailingSlash!=="append"&&Zn.trailingSlash!=="remove")return Qn;const tr=Zn.trailingSlash==="append"?withTrailingSlash:withoutTrailingSlash;if(typeof Qn=="string")return tr(Qn,!0);const nr="path"in Qn?Qn.path:er(Qn).path;return{...Qn,name:void 0,path:tr(nr,!0)}};return defineComponent({name:Jn,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},setup(Qn,{slots:er}){const tr=useRouter(),nr=computed(()=>{const ar=Qn.to||Qn.href||"";return Xn(ar,tr.resolve)}),rr=computed(()=>Qn.external||Qn.target&&Qn.target!=="_self"?!0:typeof nr.value=="object"?!1:nr.value===""||hasProtocol(nr.value,{acceptRelative:!0})),sr=ref(!1),ir=ref(null),or=ar=>{var cr;ir.value=Qn.custom?(cr=ar==null?void 0:ar.$el)==null?void 0:cr.nextElementSibling:ar==null?void 0:ar.$el};if(Qn.prefetch!==!1&&Qn.noPrefetch!==!0&&Qn.target!=="_blank"&&!isSlowConnection()){const cr=useNuxtApp();let lr,hr=null;onMounted(()=>{const fr=useObserver();onNuxtReady(()=>{lr=requestIdleCallback(()=>{var gr;(gr=ir==null?void 0:ir.value)!=null&&gr.tagName&&(hr=fr.observe(ir.value,async()=>{hr==null||hr(),hr=null;const ur=typeof nr.value=="string"?nr.value:tr.resolve(nr.value).fullPath;await Promise.all([cr.hooks.callHook("link:prefetch",ur).catch(()=>{}),!rr.value&&preloadRouteComponents(nr.value,tr).catch(()=>{})]),sr.value=!0}))})})}),onBeforeUnmount(()=>{lr&&cancelIdleCallback(lr),hr==null||hr(),hr=null})}return()=>{var fr,gr;if(!rr.value){const ur={ref:or,to:nr.value,activeClass:Qn.activeClass||Zn.activeClass,exactActiveClass:Qn.exactActiveClass||Zn.exactActiveClass,replace:Qn.replace,ariaCurrentValue:Qn.ariaCurrentValue,custom:Qn.custom};return Qn.custom||(sr.value&&(ur.class=Qn.prefetchedClass||Zn.prefetchedClass),ur.rel=Qn.rel),h$2(resolveComponent("RouterLink"),ur,er.default)}const ar=typeof nr.value=="object"?((fr=tr.resolve(nr.value))==null?void 0:fr.href)??null:nr.value||null,cr=Qn.target||null,lr=Qn.noRel?null:firstNonUndefined(Qn.rel,Zn.externalRelAttribute,ar?DEFAULT_EXTERNAL_REL_ATTRIBUTE:"")||null,hr=()=>navigateTo(ar,{replace:Qn.replace});return Qn.custom?er.default?er.default({href:ar,navigate:hr,get route(){if(!ar)return;const ur=parseURL$1(ar);return{path:ur.pathname,fullPath:ur.pathname,get query(){return parseQuery$1(ur.search)},hash:ur.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:ar}},rel:lr,target:cr,isExternal:rr.value,isActive:!1,isExactActive:!1}):null:h$2("a",{ref:ir,href:ar,rel:lr,target:cr},(gr=er.default)==null?void 0:gr.call(er))}}})}const __nuxt_component_0$2=defineNuxtLink({componentName:"NuxtLink"});function useObserver(){const Zn=useNuxtApp();if(Zn._observer)return Zn._observer;let Jn=null;const Xn=new Map,Qn=(tr,nr)=>(Jn||(Jn=new IntersectionObserver(rr=>{for(const sr of rr){const ir=Xn.get(sr.target);(sr.isIntersecting||sr.intersectionRatio>0)&&ir&&ir()}})),Xn.set(tr,nr),Jn.observe(tr),()=>{Xn.delete(tr),Jn.unobserve(tr),Xn.size===0&&(Jn.disconnect(),Jn=null)});return Zn._observer={observe:Qn}}function isSlowConnection(){const Zn=navigator.connection;return!!(Zn&&(Zn.saveData||/2g/.test(Zn.effectiveType)))}const plugin$1=defineNuxtPlugin(Zn=>{const Jn=createPinia();return Zn.vueApp.use(Jn),setActivePinia(Jn),Zn.payload&&Zn.payload.pinia&&(Jn.state.value=Zn.payload.pinia),{provide:{pinia:Jn}}}),revivers={NuxtError:Zn=>createError(Zn),EmptyShallowRef:Zn=>shallowRef(Zn==="_"?void 0:JSON.parse(Zn)),EmptyRef:Zn=>ref(Zn==="_"?void 0:JSON.parse(Zn)),ShallowRef:Zn=>shallowRef(Zn),ShallowReactive:Zn=>shallowReactive(Zn),Ref:Zn=>ref(Zn),Reactive:Zn=>reactive(Zn)},revive_payload_client_4sVQNw7RlN=defineNuxtPlugin({name:"nuxt:revive-payload:client",order:-30,async setup(Zn){let Jn,Xn;for(const Qn in revivers)definePayloadReviver(Qn,revivers[Qn]);Object.assign(Zn.payload,([Jn,Xn]=executeAsync(()=>Zn.runWithContext(getNuxtClientPayload)),Jn=await Jn,Xn(),Jn)),window.__NUXT__=Zn.payload}},1),components_plugin_KR1HBZs4kY=defineNuxtPlugin({name:"nuxt:global-components"}),unhead_KgADcZ0jPj=defineNuxtPlugin({name:"nuxt:head",setup(Zn){const Xn=createHead();Xn.push(appHead),Zn.vueApp.use(Xn);{let Qn=!0;const er=()=>{Qn=!1,Xn.hooks.callHook("entries:updated",Xn)};Xn.hooks.hook("dom:beforeRender",tr=>{tr.shouldRender=!Qn}),Zn.hooks.hook("page:start",()=>{Qn=!0}),Zn.hooks.hook("page:finish",er),Zn.hooks.hook("app:suspense:resolve",er)}}});/*!
  * vue-router v4.2.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(Zn){return Zn.__esModule||Zn[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(Zn,Jn){const Xn={};for(const Qn in Jn){const er=Jn[Qn];Xn[Qn]=isArray(er)?er.map(Zn):Zn(er)}return Xn}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Zn=>Zn.replace(TRAILING_SLASH_RE,"");function parseURL(Zn,Jn,Xn="/"){let Qn,er={},tr="",nr="";const rr=Jn.indexOf("#");let sr=Jn.indexOf("?");return rr<sr&&rr>=0&&(sr=-1),sr>-1&&(Qn=Jn.slice(0,sr),tr=Jn.slice(sr+1,rr>-1?rr:Jn.length),er=Zn(tr)),rr>-1&&(Qn=Qn||Jn.slice(0,rr),nr=Jn.slice(rr,Jn.length)),Qn=resolveRelativePath(Qn??Jn,Xn),{fullPath:Qn+(tr&&"?")+tr+nr,path:Qn,query:er,hash:nr}}function stringifyURL(Zn,Jn){const Xn=Jn.query?Zn(Jn.query):"";return Jn.path+(Xn&&"?")+Xn+(Jn.hash||"")}function stripBase(Zn,Jn){return!Jn||!Zn.toLowerCase().startsWith(Jn.toLowerCase())?Zn:Zn.slice(Jn.length)||"/"}function isSameRouteLocation(Zn,Jn,Xn){const Qn=Jn.matched.length-1,er=Xn.matched.length-1;return Qn>-1&&Qn===er&&isSameRouteRecord(Jn.matched[Qn],Xn.matched[er])&&isSameRouteLocationParams(Jn.params,Xn.params)&&Zn(Jn.query)===Zn(Xn.query)&&Jn.hash===Xn.hash}function isSameRouteRecord(Zn,Jn){return(Zn.aliasOf||Zn)===(Jn.aliasOf||Jn)}function isSameRouteLocationParams(Zn,Jn){if(Object.keys(Zn).length!==Object.keys(Jn).length)return!1;for(const Xn in Zn)if(!isSameRouteLocationParamsValue(Zn[Xn],Jn[Xn]))return!1;return!0}function isSameRouteLocationParamsValue(Zn,Jn){return isArray(Zn)?isEquivalentArray(Zn,Jn):isArray(Jn)?isEquivalentArray(Jn,Zn):Zn===Jn}function isEquivalentArray(Zn,Jn){return isArray(Jn)?Zn.length===Jn.length&&Zn.every((Xn,Qn)=>Xn===Jn[Qn]):Zn.length===1&&Zn[0]===Jn}function resolveRelativePath(Zn,Jn){if(Zn.startsWith("/"))return Zn;if(!Zn)return Jn;const Xn=Jn.split("/"),Qn=Zn.split("/"),er=Qn[Qn.length-1];(er===".."||er===".")&&Qn.push("");let tr=Xn.length-1,nr,rr;for(nr=0;nr<Qn.length;nr++)if(rr=Qn[nr],rr!==".")if(rr==="..")tr>1&&tr--;else break;return Xn.slice(0,tr).join("/")+"/"+Qn.slice(nr-(nr===Qn.length?1:0)).join("/")}var NavigationType;(function(Zn){Zn.pop="pop",Zn.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Zn){Zn.back="back",Zn.forward="forward",Zn.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Zn){if(!Zn)if(isBrowser){const Jn=document.querySelector("base");Zn=Jn&&Jn.getAttribute("href")||"/",Zn=Zn.replace(/^\w+:\/\/[^\/]+/,"")}else Zn="/";return Zn[0]!=="/"&&Zn[0]!=="#"&&(Zn="/"+Zn),removeTrailingSlash(Zn)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Zn,Jn){return Zn.replace(BEFORE_HASH_RE,"#")+Jn}function getElementPosition(Zn,Jn){const Xn=document.documentElement.getBoundingClientRect(),Qn=Zn.getBoundingClientRect();return{behavior:Jn.behavior,left:Qn.left-Xn.left-(Jn.left||0),top:Qn.top-Xn.top-(Jn.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(Zn){let Jn;if("el"in Zn){const Xn=Zn.el,Qn=typeof Xn=="string"&&Xn.startsWith("#"),er=typeof Xn=="string"?Qn?document.getElementById(Xn.slice(1)):document.querySelector(Xn):Xn;if(!er)return;Jn=getElementPosition(er,Zn)}else Jn=Zn;"scrollBehavior"in document.documentElement.style?window.scrollTo(Jn):window.scrollTo(Jn.left!=null?Jn.left:window.pageXOffset,Jn.top!=null?Jn.top:window.pageYOffset)}function getScrollKey(Zn,Jn){return(history.state?history.state.position-Jn:-1)+Zn}const scrollPositions=new Map;function saveScrollPosition(Zn,Jn){scrollPositions.set(Zn,Jn)}function getSavedScrollPosition(Zn){const Jn=scrollPositions.get(Zn);return scrollPositions.delete(Zn),Jn}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation$1(Zn,Jn){const{pathname:Xn,search:Qn,hash:er}=Jn,tr=Zn.indexOf("#");if(tr>-1){let rr=er.includes(Zn.slice(tr))?Zn.slice(tr).length:1,sr=er.slice(rr);return sr[0]!=="/"&&(sr="/"+sr),stripBase(sr,"")}return stripBase(Xn,Zn)+Qn+er}function useHistoryListeners(Zn,Jn,Xn,Qn){let er=[],tr=[],nr=null;const rr=({state:cr})=>{const lr=createCurrentLocation$1(Zn,location),hr=Xn.value,fr=Jn.value;let gr=0;if(cr){if(Xn.value=lr,Jn.value=cr,nr&&nr===hr){nr=null;return}gr=fr?cr.position-fr.position:0}else Qn(lr);er.forEach(ur=>{ur(Xn.value,hr,{delta:gr,type:NavigationType.pop,direction:gr?gr>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function sr(){nr=Xn.value}function ir(cr){er.push(cr);const lr=()=>{const hr=er.indexOf(cr);hr>-1&&er.splice(hr,1)};return tr.push(lr),lr}function or(){const{history:cr}=window;cr.state&&cr.replaceState(assign({},cr.state,{scroll:computeScrollPosition()}),"")}function ar(){for(const cr of tr)cr();tr=[],window.removeEventListener("popstate",rr),window.removeEventListener("beforeunload",or)}return window.addEventListener("popstate",rr),window.addEventListener("beforeunload",or,{passive:!0}),{pauseListeners:sr,listen:ir,destroy:ar}}function buildState(Zn,Jn,Xn,Qn=!1,er=!1){return{back:Zn,current:Jn,forward:Xn,replaced:Qn,position:window.history.length,scroll:er?computeScrollPosition():null}}function useHistoryStateNavigation(Zn){const{history:Jn,location:Xn}=window,Qn={value:createCurrentLocation$1(Zn,Xn)},er={value:Jn.state};er.value||tr(Qn.value,{back:null,current:Qn.value,forward:null,position:Jn.length-1,replaced:!0,scroll:null},!0);function tr(sr,ir,or){const ar=Zn.indexOf("#"),cr=ar>-1?(Xn.host&&document.querySelector("base")?Zn:Zn.slice(ar))+sr:createBaseLocation()+Zn+sr;try{Jn[or?"replaceState":"pushState"](ir,"",cr),er.value=ir}catch(lr){console.error(lr),Xn[or?"replace":"assign"](cr)}}function nr(sr,ir){const or=assign({},Jn.state,buildState(er.value.back,sr,er.value.forward,!0),ir,{position:er.value.position});tr(sr,or,!0),Qn.value=sr}function rr(sr,ir){const or=assign({},er.value,Jn.state,{forward:sr,scroll:computeScrollPosition()});tr(or.current,or,!0);const ar=assign({},buildState(Qn.value,sr,null),{position:or.position+1},ir);tr(sr,ar,!1),Qn.value=sr}return{location:Qn,state:er,push:rr,replace:nr}}function createWebHistory(Zn){Zn=normalizeBase(Zn);const Jn=useHistoryStateNavigation(Zn),Xn=useHistoryListeners(Zn,Jn.state,Jn.location,Jn.replace);function Qn(tr,nr=!0){nr||Xn.pauseListeners(),history.go(tr)}const er=assign({location:"",base:Zn,go:Qn,createHref:createHref.bind(null,Zn)},Jn,Xn);return Object.defineProperty(er,"location",{enumerable:!0,get:()=>Jn.location.value}),Object.defineProperty(er,"state",{enumerable:!0,get:()=>Jn.state.value}),er}function createWebHashHistory(Zn){return Zn=location.host?Zn||location.pathname+location.search:"",Zn.includes("#")||(Zn+="#"),createWebHistory(Zn)}function isRouteLocation(Zn){return typeof Zn=="string"||Zn&&typeof Zn=="object"}function isRouteName(Zn){return typeof Zn=="string"||typeof Zn=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Zn){Zn[Zn.aborted=4]="aborted",Zn[Zn.cancelled=8]="cancelled",Zn[Zn.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Zn,Jn){return assign(new Error,{type:Zn,[NavigationFailureSymbol]:!0},Jn)}function isNavigationFailure(Zn,Jn){return Zn instanceof Error&&NavigationFailureSymbol in Zn&&(Jn==null||!!(Zn.type&Jn))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Zn,Jn){const Xn=assign({},BASE_PATH_PARSER_OPTIONS,Jn),Qn=[];let er=Xn.start?"^":"";const tr=[];for(const ir of Zn){const or=ir.length?[]:[90];Xn.strict&&!ir.length&&(er+="/");for(let ar=0;ar<ir.length;ar++){const cr=ir[ar];let lr=40+(Xn.sensitive?.25:0);if(cr.type===0)ar||(er+="/"),er+=cr.value.replace(REGEX_CHARS_RE,"\\$&"),lr+=40;else if(cr.type===1){const{value:hr,repeatable:fr,optional:gr,regexp:ur}=cr;tr.push({name:hr,repeatable:fr,optional:gr});const dr=ur||BASE_PARAM_PATTERN;if(dr!==BASE_PARAM_PATTERN){lr+=10;try{new RegExp(`(${dr})`)}catch(vr){throw new Error(`Invalid custom RegExp for param "${hr}" (${dr}): `+vr.message)}}let yr=fr?`((?:${dr})(?:/(?:${dr}))*)`:`(${dr})`;ar||(yr=gr&&ir.length<2?`(?:/${yr})`:"/"+yr),gr&&(yr+="?"),er+=yr,lr+=20,gr&&(lr+=-8),fr&&(lr+=-20),dr===".*"&&(lr+=-50)}or.push(lr)}Qn.push(or)}if(Xn.strict&&Xn.end){const ir=Qn.length-1;Qn[ir][Qn[ir].length-1]+=.7000000000000001}Xn.strict||(er+="/?"),Xn.end?er+="$":Xn.strict&&(er+="(?:/|$)");const nr=new RegExp(er,Xn.sensitive?"":"i");function rr(ir){const or=ir.match(nr),ar={};if(!or)return null;for(let cr=1;cr<or.length;cr++){const lr=or[cr]||"",hr=tr[cr-1];ar[hr.name]=lr&&hr.repeatable?lr.split("/"):lr}return ar}function sr(ir){let or="",ar=!1;for(const cr of Zn){(!ar||!or.endsWith("/"))&&(or+="/"),ar=!1;for(const lr of cr)if(lr.type===0)or+=lr.value;else if(lr.type===1){const{value:hr,repeatable:fr,optional:gr}=lr,ur=hr in ir?ir[hr]:"";if(isArray(ur)&&!fr)throw new Error(`Provided param "${hr}" is an array but it is not repeatable (* or + modifiers)`);const dr=isArray(ur)?ur.join("/"):ur;if(!dr)if(gr)cr.length<2&&(or.endsWith("/")?or=or.slice(0,-1):ar=!0);else throw new Error(`Missing required param "${hr}"`);or+=dr}}return or||"/"}return{re:nr,score:Qn,keys:tr,parse:rr,stringify:sr}}function compareScoreArray(Zn,Jn){let Xn=0;for(;Xn<Zn.length&&Xn<Jn.length;){const Qn=Jn[Xn]-Zn[Xn];if(Qn)return Qn;Xn++}return Zn.length<Jn.length?Zn.length===1&&Zn[0]===40+40?-1:1:Zn.length>Jn.length?Jn.length===1&&Jn[0]===40+40?1:-1:0}function comparePathParserScore(Zn,Jn){let Xn=0;const Qn=Zn.score,er=Jn.score;for(;Xn<Qn.length&&Xn<er.length;){const tr=compareScoreArray(Qn[Xn],er[Xn]);if(tr)return tr;Xn++}if(Math.abs(er.length-Qn.length)===1){if(isLastScoreNegative(Qn))return 1;if(isLastScoreNegative(er))return-1}return er.length-Qn.length}function isLastScoreNegative(Zn){const Jn=Zn[Zn.length-1];return Zn.length>0&&Jn[Jn.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Zn){if(!Zn)return[[]];if(Zn==="/")return[[ROOT_TOKEN]];if(!Zn.startsWith("/"))throw new Error(`Invalid path "${Zn}"`);function Jn(lr){throw new Error(`ERR (${Xn})/"${ir}": ${lr}`)}let Xn=0,Qn=Xn;const er=[];let tr;function nr(){tr&&er.push(tr),tr=[]}let rr=0,sr,ir="",or="";function ar(){ir&&(Xn===0?tr.push({type:0,value:ir}):Xn===1||Xn===2||Xn===3?(tr.length>1&&(sr==="*"||sr==="+")&&Jn(`A repeatable param (${ir}) must be alone in its segment. eg: '/:ids+.`),tr.push({type:1,value:ir,regexp:or,repeatable:sr==="*"||sr==="+",optional:sr==="*"||sr==="?"})):Jn("Invalid state to consume buffer"),ir="")}function cr(){ir+=sr}for(;rr<Zn.length;){if(sr=Zn[rr++],sr==="\\"&&Xn!==2){Qn=Xn,Xn=4;continue}switch(Xn){case 0:sr==="/"?(ir&&ar(),nr()):sr===":"?(ar(),Xn=1):cr();break;case 4:cr(),Xn=Qn;break;case 1:sr==="("?Xn=2:VALID_PARAM_RE.test(sr)?cr():(ar(),Xn=0,sr!=="*"&&sr!=="?"&&sr!=="+"&&rr--);break;case 2:sr===")"?or[or.length-1]=="\\"?or=or.slice(0,-1)+sr:Xn=3:or+=sr;break;case 3:ar(),Xn=0,sr!=="*"&&sr!=="?"&&sr!=="+"&&rr--,or="";break;default:Jn("Unknown state");break}}return Xn===2&&Jn(`Unfinished custom RegExp for param "${ir}"`),ar(),nr(),er}function createRouteRecordMatcher(Zn,Jn,Xn){const Qn=tokensToParser(tokenizePath(Zn.path),Xn),er=assign(Qn,{record:Zn,parent:Jn,children:[],alias:[]});return Jn&&!er.record.aliasOf==!Jn.record.aliasOf&&Jn.children.push(er),er}function createRouterMatcher(Zn,Jn){const Xn=[],Qn=new Map;Jn=mergeOptions({strict:!1,end:!0,sensitive:!1},Jn);function er(or){return Qn.get(or)}function tr(or,ar,cr){const lr=!cr,hr=normalizeRouteRecord(or);hr.aliasOf=cr&&cr.record;const fr=mergeOptions(Jn,or),gr=[hr];if("alias"in or){const yr=typeof or.alias=="string"?[or.alias]:or.alias;for(const vr of yr)gr.push(assign({},hr,{components:cr?cr.record.components:hr.components,path:vr,aliasOf:cr?cr.record:hr}))}let ur,dr;for(const yr of gr){const{path:vr}=yr;if(ar&&vr[0]!=="/"){const _r=ar.record.path,kr=_r[_r.length-1]==="/"?"":"/";yr.path=ar.record.path+(vr&&kr+vr)}if(ur=createRouteRecordMatcher(yr,ar,fr),cr?cr.alias.push(ur):(dr=dr||ur,dr!==ur&&dr.alias.push(ur),lr&&or.name&&!isAliasRecord(ur)&&nr(or.name)),hr.children){const _r=hr.children;for(let kr=0;kr<_r.length;kr++)tr(_r[kr],ur,cr&&cr.children[kr])}cr=cr||ur,(ur.record.components&&Object.keys(ur.record.components).length||ur.record.name||ur.record.redirect)&&sr(ur)}return dr?()=>{nr(dr)}:noop}function nr(or){if(isRouteName(or)){const ar=Qn.get(or);ar&&(Qn.delete(or),Xn.splice(Xn.indexOf(ar),1),ar.children.forEach(nr),ar.alias.forEach(nr))}else{const ar=Xn.indexOf(or);ar>-1&&(Xn.splice(ar,1),or.record.name&&Qn.delete(or.record.name),or.children.forEach(nr),or.alias.forEach(nr))}}function rr(){return Xn}function sr(or){let ar=0;for(;ar<Xn.length&&comparePathParserScore(or,Xn[ar])>=0&&(or.record.path!==Xn[ar].record.path||!isRecordChildOf(or,Xn[ar]));)ar++;Xn.splice(ar,0,or),or.record.name&&!isAliasRecord(or)&&Qn.set(or.record.name,or)}function ir(or,ar){let cr,lr={},hr,fr;if("name"in or&&or.name){if(cr=Qn.get(or.name),!cr)throw createRouterError(1,{location:or});fr=cr.record.name,lr=assign(paramsFromLocation(ar.params,cr.keys.filter(dr=>!dr.optional).map(dr=>dr.name)),or.params&&paramsFromLocation(or.params,cr.keys.map(dr=>dr.name))),hr=cr.stringify(lr)}else if("path"in or)hr=or.path,cr=Xn.find(dr=>dr.re.test(hr)),cr&&(lr=cr.parse(hr),fr=cr.record.name);else{if(cr=ar.name?Qn.get(ar.name):Xn.find(dr=>dr.re.test(ar.path)),!cr)throw createRouterError(1,{location:or,currentLocation:ar});fr=cr.record.name,lr=assign({},ar.params,or.params),hr=cr.stringify(lr)}const gr=[];let ur=cr;for(;ur;)gr.unshift(ur.record),ur=ur.parent;return{name:fr,path:hr,params:lr,matched:gr,meta:mergeMetaFields(gr)}}return Zn.forEach(or=>tr(or)),{addRoute:tr,resolve:ir,removeRoute:nr,getRoutes:rr,getRecordMatcher:er}}function paramsFromLocation(Zn,Jn){const Xn={};for(const Qn of Jn)Qn in Zn&&(Xn[Qn]=Zn[Qn]);return Xn}function normalizeRouteRecord(Zn){return{path:Zn.path,redirect:Zn.redirect,name:Zn.name,meta:Zn.meta||{},aliasOf:void 0,beforeEnter:Zn.beforeEnter,props:normalizeRecordProps(Zn),children:Zn.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Zn?Zn.components||null:Zn.component&&{default:Zn.component}}}function normalizeRecordProps(Zn){const Jn={},Xn=Zn.props||!1;if("component"in Zn)Jn.default=Xn;else for(const Qn in Zn.components)Jn[Qn]=typeof Xn=="boolean"?Xn:Xn[Qn];return Jn}function isAliasRecord(Zn){for(;Zn;){if(Zn.record.aliasOf)return!0;Zn=Zn.parent}return!1}function mergeMetaFields(Zn){return Zn.reduce((Jn,Xn)=>assign(Jn,Xn.meta),{})}function mergeOptions(Zn,Jn){const Xn={};for(const Qn in Zn)Xn[Qn]=Qn in Jn?Jn[Qn]:Zn[Qn];return Xn}function isRecordChildOf(Zn,Jn){return Jn.children.some(Xn=>Xn===Zn||isRecordChildOf(Zn,Xn))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Zn){return encodeURI(""+Zn).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Zn){return commonEncode(Zn).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Zn){return commonEncode(Zn).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Zn){return encodeQueryValue(Zn).replace(EQUAL_RE,"%3D")}function encodePath(Zn){return commonEncode(Zn).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Zn){return Zn==null?"":encodePath(Zn).replace(SLASH_RE,"%2F")}function decode(Zn){try{return decodeURIComponent(""+Zn)}catch{}return""+Zn}function parseQuery(Zn){const Jn={};if(Zn===""||Zn==="?")return Jn;const Qn=(Zn[0]==="?"?Zn.slice(1):Zn).split("&");for(let er=0;er<Qn.length;++er){const tr=Qn[er].replace(PLUS_RE," "),nr=tr.indexOf("="),rr=decode(nr<0?tr:tr.slice(0,nr)),sr=nr<0?null:decode(tr.slice(nr+1));if(rr in Jn){let ir=Jn[rr];isArray(ir)||(ir=Jn[rr]=[ir]),ir.push(sr)}else Jn[rr]=sr}return Jn}function stringifyQuery(Zn){let Jn="";for(let Xn in Zn){const Qn=Zn[Xn];if(Xn=encodeQueryKey(Xn),Qn==null){Qn!==void 0&&(Jn+=(Jn.length?"&":"")+Xn);continue}(isArray(Qn)?Qn.map(tr=>tr&&encodeQueryValue(tr)):[Qn&&encodeQueryValue(Qn)]).forEach(tr=>{tr!==void 0&&(Jn+=(Jn.length?"&":"")+Xn,tr!=null&&(Jn+="="+tr))})}return Jn}function normalizeQuery(Zn){const Jn={};for(const Xn in Zn){const Qn=Zn[Xn];Qn!==void 0&&(Jn[Xn]=isArray(Qn)?Qn.map(er=>er==null?null:""+er):Qn==null?Qn:""+Qn)}return Jn}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Zn=[];function Jn(Qn){return Zn.push(Qn),()=>{const er=Zn.indexOf(Qn);er>-1&&Zn.splice(er,1)}}function Xn(){Zn=[]}return{add:Jn,list:()=>Zn,reset:Xn}}function guardToPromiseFn(Zn,Jn,Xn,Qn,er){const tr=Qn&&(Qn.enterCallbacks[er]=Qn.enterCallbacks[er]||[]);return()=>new Promise((nr,rr)=>{const sr=ar=>{ar===!1?rr(createRouterError(4,{from:Xn,to:Jn})):ar instanceof Error?rr(ar):isRouteLocation(ar)?rr(createRouterError(2,{from:Jn,to:ar})):(tr&&Qn.enterCallbacks[er]===tr&&typeof ar=="function"&&tr.push(ar),nr())},ir=Zn.call(Qn&&Qn.instances[er],Jn,Xn,sr);let or=Promise.resolve(ir);Zn.length<3&&(or=or.then(sr)),or.catch(ar=>rr(ar))})}function extractComponentsGuards(Zn,Jn,Xn,Qn){const er=[];for(const tr of Zn)for(const nr in tr.components){let rr=tr.components[nr];if(!(Jn!=="beforeRouteEnter"&&!tr.instances[nr]))if(isRouteComponent(rr)){const ir=(rr.__vccOpts||rr)[Jn];ir&&er.push(guardToPromiseFn(ir,Xn,Qn,tr,nr))}else{let sr=rr();er.push(()=>sr.then(ir=>{if(!ir)return Promise.reject(new Error(`Couldn't resolve component "${nr}" at "${tr.path}"`));const or=isESModule(ir)?ir.default:ir;tr.components[nr]=or;const cr=(or.__vccOpts||or)[Jn];return cr&&guardToPromiseFn(cr,Xn,Qn,tr,nr)()}))}}return er}function isRouteComponent(Zn){return typeof Zn=="object"||"displayName"in Zn||"props"in Zn||"__vccOpts"in Zn}function useLink(Zn){const Jn=inject(routerKey),Xn=inject(routeLocationKey),Qn=computed(()=>Jn.resolve(unref(Zn.to))),er=computed(()=>{const{matched:sr}=Qn.value,{length:ir}=sr,or=sr[ir-1],ar=Xn.matched;if(!or||!ar.length)return-1;const cr=ar.findIndex(isSameRouteRecord.bind(null,or));if(cr>-1)return cr;const lr=getOriginalPath(sr[ir-2]);return ir>1&&getOriginalPath(or)===lr&&ar[ar.length-1].path!==lr?ar.findIndex(isSameRouteRecord.bind(null,sr[ir-2])):cr}),tr=computed(()=>er.value>-1&&includesParams(Xn.params,Qn.value.params)),nr=computed(()=>er.value>-1&&er.value===Xn.matched.length-1&&isSameRouteLocationParams(Xn.params,Qn.value.params));function rr(sr={}){return guardEvent(sr)?Jn[unref(Zn.replace)?"replace":"push"](unref(Zn.to)).catch(noop):Promise.resolve()}return{route:Qn,href:computed(()=>Qn.value.href),isActive:tr,isExactActive:nr,navigate:rr}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Zn,{slots:Jn}){const Xn=reactive(useLink(Zn)),{options:Qn}=inject(routerKey),er=computed(()=>({[getLinkClass(Zn.activeClass,Qn.linkActiveClass,"router-link-active")]:Xn.isActive,[getLinkClass(Zn.exactActiveClass,Qn.linkExactActiveClass,"router-link-exact-active")]:Xn.isExactActive}));return()=>{const tr=Jn.default&&Jn.default(Xn);return Zn.custom?tr:h$2("a",{"aria-current":Xn.isExactActive?Zn.ariaCurrentValue:null,href:Xn.href,onClick:Xn.navigate,class:er.value},tr)}}}),RouterLink=RouterLinkImpl;function guardEvent(Zn){if(!(Zn.metaKey||Zn.altKey||Zn.ctrlKey||Zn.shiftKey)&&!Zn.defaultPrevented&&!(Zn.button!==void 0&&Zn.button!==0)){if(Zn.currentTarget&&Zn.currentTarget.getAttribute){const Jn=Zn.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(Jn))return}return Zn.preventDefault&&Zn.preventDefault(),!0}}function includesParams(Zn,Jn){for(const Xn in Jn){const Qn=Jn[Xn],er=Zn[Xn];if(typeof Qn=="string"){if(Qn!==er)return!1}else if(!isArray(er)||er.length!==Qn.length||Qn.some((tr,nr)=>tr!==er[nr]))return!1}return!0}function getOriginalPath(Zn){return Zn?Zn.aliasOf?Zn.aliasOf.path:Zn.path:""}const getLinkClass=(Zn,Jn,Xn)=>Zn??Jn??Xn,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Zn,{attrs:Jn,slots:Xn}){const Qn=inject(routerViewLocationKey),er=computed(()=>Zn.route||Qn.value),tr=inject(viewDepthKey,0),nr=computed(()=>{let ir=unref(tr);const{matched:or}=er.value;let ar;for(;(ar=or[ir])&&!ar.components;)ir++;return ir}),rr=computed(()=>er.value.matched[nr.value]);provide(viewDepthKey,computed(()=>nr.value+1)),provide(matchedRouteKey,rr),provide(routerViewLocationKey,er);const sr=ref();return watch(()=>[sr.value,rr.value,Zn.name],([ir,or,ar],[cr,lr,hr])=>{or&&(or.instances[ar]=ir,lr&&lr!==or&&ir&&ir===cr&&(or.leaveGuards.size||(or.leaveGuards=lr.leaveGuards),or.updateGuards.size||(or.updateGuards=lr.updateGuards))),ir&&or&&(!lr||!isSameRouteRecord(or,lr)||!cr)&&(or.enterCallbacks[ar]||[]).forEach(fr=>fr(ir))},{flush:"post"}),()=>{const ir=er.value,or=Zn.name,ar=rr.value,cr=ar&&ar.components[or];if(!cr)return normalizeSlot(Xn.default,{Component:cr,route:ir});const lr=ar.props[or],hr=lr?lr===!0?ir.params:typeof lr=="function"?lr(ir):lr:null,gr=h$2(cr,assign({},hr,Jn,{onVnodeUnmounted:ur=>{ur.component.isUnmounted&&(ar.instances[or]=null)},ref:sr}));return normalizeSlot(Xn.default,{Component:gr,route:ir})||gr}}});function normalizeSlot(Zn,Jn){if(!Zn)return null;const Xn=Zn(Jn);return Xn.length===1?Xn[0]:Xn}const RouterView=RouterViewImpl;function createRouter(Zn){const Jn=createRouterMatcher(Zn.routes,Zn),Xn=Zn.parseQuery||parseQuery,Qn=Zn.stringifyQuery||stringifyQuery,er=Zn.history,tr=useCallbacks(),nr=useCallbacks(),rr=useCallbacks(),sr=shallowRef(START_LOCATION_NORMALIZED);let ir=START_LOCATION_NORMALIZED;isBrowser&&Zn.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const or=applyToParams.bind(null,Gr=>""+Gr),ar=applyToParams.bind(null,encodeParam),cr=applyToParams.bind(null,decode);function lr(Gr,Yr){let Qr,is;return isRouteName(Gr)?(Qr=Jn.getRecordMatcher(Gr),is=Yr):is=Gr,Jn.addRoute(is,Qr)}function hr(Gr){const Yr=Jn.getRecordMatcher(Gr);Yr&&Jn.removeRoute(Yr)}function fr(){return Jn.getRoutes().map(Gr=>Gr.record)}function gr(Gr){return!!Jn.getRecordMatcher(Gr)}function ur(Gr,Yr){if(Yr=assign({},Yr||sr.value),typeof Gr=="string"){const pr=parseURL(Xn,Gr,Yr.path),Pr=Jn.resolve({path:pr.path},Yr),Or=er.createHref(pr.fullPath);return assign(pr,Pr,{params:cr(Pr.params),hash:decode(pr.hash),redirectedFrom:void 0,href:Or})}let Qr;if("path"in Gr)Qr=assign({},Gr,{path:parseURL(Xn,Gr.path,Yr.path).path});else{const pr=assign({},Gr.params);for(const Pr in pr)pr[Pr]==null&&delete pr[Pr];Qr=assign({},Gr,{params:ar(pr)}),Yr.params=ar(Yr.params)}const is=Jn.resolve(Qr,Yr),us=Gr.hash||"";is.params=or(cr(is.params));const Ir=stringifyURL(Qn,assign({},Gr,{hash:encodeHash(us),path:is.path})),Nr=er.createHref(Ir);return assign({fullPath:Ir,hash:us,query:Qn===stringifyQuery?normalizeQuery(Gr.query):Gr.query||{}},is,{redirectedFrom:void 0,href:Nr})}function dr(Gr){return typeof Gr=="string"?parseURL(Xn,Gr,sr.value.path):assign({},Gr)}function yr(Gr,Yr){if(ir!==Gr)return createRouterError(8,{from:Yr,to:Gr})}function vr(Gr){return Cr(Gr)}function _r(Gr){return vr(assign(dr(Gr),{replace:!0}))}function kr(Gr){const Yr=Gr.matched[Gr.matched.length-1];if(Yr&&Yr.redirect){const{redirect:Qr}=Yr;let is=typeof Qr=="function"?Qr(Gr):Qr;return typeof is=="string"&&(is=is.includes("?")||is.includes("#")?is=dr(is):{path:is},is.params={}),assign({query:Gr.query,hash:Gr.hash,params:"path"in is?{}:Gr.params},is)}}function Cr(Gr,Yr){const Qr=ir=ur(Gr),is=sr.value,us=Gr.state,Ir=Gr.force,Nr=Gr.replace===!0,pr=kr(Qr);if(pr)return Cr(assign(dr(pr),{state:typeof pr=="object"?assign({},us,pr.state):us,force:Ir,replace:Nr}),Yr||Qr);const Pr=Qr;Pr.redirectedFrom=Yr;let Or;return!Ir&&isSameRouteLocation(Qn,is,Qr)&&(Or=createRouterError(16,{to:Pr,from:is}),Vr(is,is,!0,!1)),(Or?Promise.resolve(Or):$r(Pr,is)).catch(wr=>isNavigationFailure(wr)?isNavigationFailure(wr,2)?wr:as(wr):es(wr,Pr,is)).then(wr=>{if(wr){if(isNavigationFailure(wr,2))return Cr(assign({replace:Nr},dr(wr.to),{state:typeof wr.to=="object"?assign({},us,wr.to.state):us,force:Ir}),Yr||Pr)}else wr=Ar(Pr,is,!0,Nr,us);return Mr(Pr,is,wr),wr})}function br(Gr,Yr){const Qr=yr(Gr,Yr);return Qr?Promise.reject(Qr):Promise.resolve()}function xr(Gr){const Yr=ss.values().next().value;return Yr&&typeof Yr.runWithContext=="function"?Yr.runWithContext(Gr):Gr()}function $r(Gr,Yr){let Qr;const[is,us,Ir]=extractChangingRecords(Gr,Yr);Qr=extractComponentsGuards(is.reverse(),"beforeRouteLeave",Gr,Yr);for(const pr of is)pr.leaveGuards.forEach(Pr=>{Qr.push(guardToPromiseFn(Pr,Gr,Yr))});const Nr=br.bind(null,Gr,Yr);return Qr.push(Nr),ls(Qr).then(()=>{Qr=[];for(const pr of tr.list())Qr.push(guardToPromiseFn(pr,Gr,Yr));return Qr.push(Nr),ls(Qr)}).then(()=>{Qr=extractComponentsGuards(us,"beforeRouteUpdate",Gr,Yr);for(const pr of us)pr.updateGuards.forEach(Pr=>{Qr.push(guardToPromiseFn(Pr,Gr,Yr))});return Qr.push(Nr),ls(Qr)}).then(()=>{Qr=[];for(const pr of Gr.matched)if(pr.beforeEnter&&!Yr.matched.includes(pr))if(isArray(pr.beforeEnter))for(const Pr of pr.beforeEnter)Qr.push(guardToPromiseFn(Pr,Gr,Yr));else Qr.push(guardToPromiseFn(pr.beforeEnter,Gr,Yr));return Qr.push(Nr),ls(Qr)}).then(()=>(Gr.matched.forEach(pr=>pr.enterCallbacks={}),Qr=extractComponentsGuards(Ir,"beforeRouteEnter",Gr,Yr),Qr.push(Nr),ls(Qr))).then(()=>{Qr=[];for(const pr of nr.list())Qr.push(guardToPromiseFn(pr,Gr,Yr));return Qr.push(Nr),ls(Qr)}).catch(pr=>isNavigationFailure(pr,8)?pr:Promise.reject(pr))}function Mr(Gr,Yr,Qr){for(const is of rr.list())xr(()=>is(Gr,Yr,Qr))}function Ar(Gr,Yr,Qr,is,us){const Ir=yr(Gr,Yr);if(Ir)return Ir;const Nr=Yr===START_LOCATION_NORMALIZED,pr=isBrowser?history.state:{};Qr&&(is||Nr?er.replace(Gr.fullPath,assign({scroll:Nr&&pr&&pr.scroll},us)):er.push(Gr.fullPath,us)),sr.value=Gr,Vr(Gr,Yr,Qr,Nr),as()}let Rr;function mr(){Rr||(Rr=er.listen((Gr,Yr,Qr)=>{if(!ts.listening)return;const is=ur(Gr),us=kr(is);if(us){Cr(assign(us,{replace:!0}),is).catch(noop);return}ir=is;const Ir=sr.value;isBrowser&&saveScrollPosition(getScrollKey(Ir.fullPath,Qr.delta),computeScrollPosition()),$r(is,Ir).catch(Nr=>isNavigationFailure(Nr,12)?Nr:isNavigationFailure(Nr,2)?(Cr(Nr.to,is).then(pr=>{isNavigationFailure(pr,20)&&!Qr.delta&&Qr.type===NavigationType.pop&&er.go(-1,!1)}).catch(noop),Promise.reject()):(Qr.delta&&er.go(-Qr.delta,!1),es(Nr,is,Ir))).then(Nr=>{Nr=Nr||Ar(is,Ir,!1),Nr&&(Qr.delta&&!isNavigationFailure(Nr,8)?er.go(-Qr.delta,!1):Qr.type===NavigationType.pop&&isNavigationFailure(Nr,20)&&er.go(-1,!1)),Mr(is,Ir,Nr)}).catch(noop)}))}let Fr=useCallbacks(),qr=useCallbacks(),jr;function es(Gr,Yr,Qr){as(Gr);const is=qr.list();return is.length?is.forEach(us=>us(Gr,Yr,Qr)):console.error(Gr),Promise.reject(Gr)}function Xr(){return jr&&sr.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Gr,Yr)=>{Fr.add([Gr,Yr])})}function as(Gr){return jr||(jr=!Gr,mr(),Fr.list().forEach(([Yr,Qr])=>Gr?Qr(Gr):Yr()),Fr.reset()),Gr}function Vr(Gr,Yr,Qr,is){const{scrollBehavior:us}=Zn;if(!isBrowser||!us)return Promise.resolve();const Ir=!Qr&&getSavedScrollPosition(getScrollKey(Gr.fullPath,0))||(is||!Qr)&&history.state&&history.state.scroll||null;return nextTick().then(()=>us(Gr,Yr,Ir)).then(Nr=>Nr&&scrollToPosition(Nr)).catch(Nr=>es(Nr,Gr,Yr))}const zr=Gr=>er.go(Gr);let ns;const ss=new Set,ts={currentRoute:sr,listening:!0,addRoute:lr,removeRoute:hr,hasRoute:gr,getRoutes:fr,resolve:ur,options:Zn,push:vr,replace:_r,go:zr,back:()=>zr(-1),forward:()=>zr(1),beforeEach:tr.add,beforeResolve:nr.add,afterEach:rr.add,onError:qr.add,isReady:Xr,install(Gr){const Yr=this;Gr.component("RouterLink",RouterLink),Gr.component("RouterView",RouterView),Gr.config.globalProperties.$router=Yr,Object.defineProperty(Gr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(sr)}),isBrowser&&!ns&&sr.value===START_LOCATION_NORMALIZED&&(ns=!0,vr(er.location).catch(us=>{}));const Qr={};for(const us in START_LOCATION_NORMALIZED)Qr[us]=computed(()=>sr.value[us]);Gr.provide(routerKey,Yr),Gr.provide(routeLocationKey,reactive(Qr)),Gr.provide(routerViewLocationKey,sr);const is=Gr.unmount;ss.add(Gr),Gr.unmount=function(){ss.delete(Gr),ss.size<1&&(ir=START_LOCATION_NORMALIZED,Rr&&Rr(),Rr=null,sr.value=START_LOCATION_NORMALIZED,ns=!1,jr=!1),is()}}};function ls(Gr){return Gr.reduce((Yr,Qr)=>Yr.then(()=>xr(Qr)),Promise.resolve())}return ts}function extractChangingRecords(Zn,Jn){const Xn=[],Qn=[],er=[],tr=Math.max(Jn.matched.length,Zn.matched.length);for(let nr=0;nr<tr;nr++){const rr=Jn.matched[nr];rr&&(Zn.matched.find(ir=>isSameRouteRecord(ir,rr))?Qn.push(rr):Xn.push(rr));const sr=Zn.matched[nr];sr&&(Jn.matched.find(ir=>isSameRouteRecord(ir,sr))||er.push(sr))}return[Xn,Qn,er]}const _routes=[{name:"slugs",path:"/:slugs(.*)*",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_...slugs_.48ad07a9.js"),[],import.meta.url).then(Zn=>Zn.default||Zn)},{name:"catalogue",path:"/catalogue",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./catalogue.d60002bc.js"),["./catalogue.d60002bc.js","./Loading.837245c4.js","./catalogue.c569a329.js","./catalogue.a8bfae0e.css","./warning_sign.ad5e0015.js","./warning_sign.d392e129.css","./NodePath.16be3131.js","./catalogue.315b8335.css"],import.meta.url).then(Zn=>Zn.default||Zn)},{name:"index",path:"/",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./index.dec990c2.js"),["./index.dec990c2.js","./CreateSystem.504be01b.js","./CreateSystem.ea4932ba.css","./warning_sign.ad5e0015.js","./warning_sign.d392e129.css","./right2.91afc9dd.js","./index.9565897b.css"],import.meta.url).then(Zn=>Zn.default||Zn)},{name:"scripts-id",path:"/scripts/:id()",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_id_.a94c5048.js"),["./_id_.a94c5048.js","./catalogue.c569a329.js","./catalogue.a8bfae0e.css","./NodePath.16be3131.js","./right2.91afc9dd.js","./_id_.18426dce.css"],import.meta.url).then(Zn=>Zn.default||Zn)},{name:"search-id",path:"/search/:id()",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./_id_.d3e844bc.js"),["./_id_.d3e844bc.js","./NodePath.16be3131.js"],import.meta.url).then(Zn=>Zn.default||Zn)},{name:"system",path:"/system",meta:{},alias:[],redirect:void 0,component:()=>__vitePreload(()=>import("./system.bfe6c0b9.js"),["./system.bfe6c0b9.js","./CreateSystem.504be01b.js","./CreateSystem.ea4932ba.css","./Loading.837245c4.js","./system.209c5aed.css"],import.meta.url).then(Zn=>Zn.default||Zn)}],routerOptions0={scrollBehavior(Zn,Jn,Xn){const Qn=useNuxtApp();let er=Xn||void 0;if(!er&&Jn&&Zn&&Zn.meta.scrollToTop!==!1&&_isDifferentRoute(Jn,Zn)&&(er={left:0,top:0}),Zn.path===Jn.path){if(Jn.hash&&!Zn.hash)return{left:0,top:0};if(Zn.hash)return{el:Zn.hash,top:_getHashElementScrollMarginTop(Zn.hash)}}const tr=rr=>!!(rr.meta.pageTransition??appPageTransition),nr=tr(Jn)&&tr(Zn)?"page:transition:finish":"page:finish";return new Promise(rr=>{Qn.hooks.hookOnce(nr,async()=>{await nextTick(),Zn.hash&&(er={el:Zn.hash,top:_getHashElementScrollMarginTop(Zn.hash)}),rr(er)})})}};function _getHashElementScrollMarginTop(Zn){try{const Jn=document.querySelector(Zn);if(Jn)return parseFloat(getComputedStyle(Jn).scrollMarginTop)}catch{}return 0}function _isDifferentRoute(Zn,Jn){const Xn=Zn.matched[0]===Jn.matched[0];return!!(!Xn||Xn&&JSON.stringify(Zn.params)!==JSON.stringify(Jn.params))}const configRouterOptions={},routerOptions={...configRouterOptions,...routerOptions0},validate=defineNuxtRouteMiddleware(async Zn=>{var sr;let Jn,Xn;if(!((sr=Zn.meta)!=null&&sr.validate))return;const Qn=useNuxtApp(),er=useRouter();if(([Jn,Xn]=executeAsync(()=>Promise.resolve(Zn.meta.validate(Zn))),Jn=await Jn,Xn(),Jn)===!0)return;const nr=createError({statusCode:404,statusMessage:`Page Not Found: ${Zn.fullPath}`}),rr=er.beforeResolve(ir=>{if(rr(),ir===Zn){const or=er.afterEach(async()=>{or(),await Qn.runWithContext(()=>showError(nr)),window.history.pushState({},"",Zn.fullPath)});return!1}})}),globalMiddleware=[validate],namedMiddleware={};function createCurrentLocation(Zn,Jn){const{pathname:Xn,search:Qn,hash:er}=Jn,tr=Zn.indexOf("#");if(tr>-1){const rr=er.includes(Zn.slice(tr))?Zn.slice(tr).length:1;let sr=er.slice(rr);return sr[0]!=="/"&&(sr="/"+sr),withoutBase(sr,"")}return withoutBase(Xn,Zn)+Qn+er}const plugin=defineNuxtPlugin({name:"nuxt:router",enforce:"pre",async setup(Zn){var fr,gr;let Jn,Xn,Qn=useRuntimeConfig().app.baseURL;routerOptions.hashMode&&!Qn.includes("#")&&(Qn+="#");const er=((fr=routerOptions.history)==null?void 0:fr.call(routerOptions,Qn))??(routerOptions.hashMode?createWebHashHistory(Qn):createWebHistory(Qn)),tr=((gr=routerOptions.routes)==null?void 0:gr.call(routerOptions,_routes))??_routes;let nr;const rr=createCurrentLocation(Qn,window.location),sr=createRouter({...routerOptions,scrollBehavior:(ur,dr,yr)=>{var vr;if(dr===START_LOCATION_NORMALIZED){nr=yr;return}return sr.options.scrollBehavior=routerOptions.scrollBehavior,(vr=routerOptions.scrollBehavior)==null?void 0:vr.call(routerOptions,ur,START_LOCATION_NORMALIZED,nr||yr)},history:er,routes:tr});Zn.vueApp.use(sr);const ir=shallowRef(sr.currentRoute.value);sr.afterEach((ur,dr)=>{ir.value=dr}),Object.defineProperty(Zn.vueApp.config.globalProperties,"previousRoute",{get:()=>ir.value});const or=shallowRef(sr.resolve(rr)),ar=()=>{or.value=sr.currentRoute.value};Zn.hook("page:finish",ar),sr.afterEach((ur,dr)=>{var yr,vr,_r,kr;((vr=(yr=ur.matched[0])==null?void 0:yr.components)==null?void 0:vr.default)===((kr=(_r=dr.matched[0])==null?void 0:_r.components)==null?void 0:kr.default)&&ar()});const cr={};for(const ur in or.value)cr[ur]=computed(()=>or.value[ur]);Zn._route=reactive(cr),Zn._middleware=Zn._middleware||{global:[],named:{}};const lr=useError();try{[Jn,Xn]=executeAsync(()=>sr.isReady()),await Jn,Xn()}catch(ur){[Jn,Xn]=executeAsync(()=>Zn.runWithContext(()=>showError(ur))),await Jn,Xn()}const hr=useState("_layout");return sr.beforeEach(async(ur,dr)=>{var yr;ur.meta=reactive(ur.meta),Zn.isHydrating&&hr.value&&!isReadonly(ur.meta.layout)&&(ur.meta.layout=hr.value),Zn._processingMiddleware=!0;{const vr=new Set([...globalMiddleware,...Zn._middleware.global]);for(const _r of ur.matched){const kr=_r.meta.middleware;if(kr)if(Array.isArray(kr))for(const Cr of kr)vr.add(Cr);else vr.add(kr)}for(const _r of vr){const kr=typeof _r=="string"?Zn._middleware.named[_r]||await((yr=namedMiddleware[_r])==null?void 0:yr.call(namedMiddleware).then(br=>br.default||br)):_r;if(!kr)throw new Error(`Unknown route middleware: '${_r}'.`);const Cr=await Zn.runWithContext(()=>kr(ur,dr));if(!Zn.payload.serverRendered&&Zn.isHydrating&&(Cr===!1||Cr instanceof Error)){const br=Cr||createError$1({statusCode:404,statusMessage:`Page Not Found: ${rr}`});return await Zn.runWithContext(()=>showError(br)),!1}if(Cr||Cr===!1)return Cr}}}),sr.onError(()=>{delete Zn._processingMiddleware}),sr.afterEach(async(ur,dr,yr)=>{delete Zn._processingMiddleware,!Zn.isHydrating&&lr.value&&await Zn.runWithContext(clearError),ur.matched.length===0&&await Zn.runWithContext(()=>showError(createError$1({statusCode:404,fatal:!1,statusMessage:`Page not found: ${ur.fullPath}`})))}),Zn.hooks.hookOnce("app:created",async()=>{try{await sr.replace({...sr.resolve(rr),name:void 0,force:!0}),sr.options.scrollBehavior=routerOptions.scrollBehavior}catch(ur){await Zn.runWithContext(()=>showError(ur))}}),{provide:{router:sr}}}},1),layouts={},prefetch_client_5tzzN0oIVL=defineNuxtPlugin({name:"nuxt:prefetch",setup(Zn){const Jn=useRouter();Zn.hooks.hook("app:mounted",()=>{Jn.beforeEach(async Xn=>{var er;const Qn=(er=Xn==null?void 0:Xn.meta)==null?void 0:er.layout;Qn&&typeof layouts[Qn]=="function"&&await layouts[Qn]()})}),Zn.hooks.hook("link:prefetch",Xn=>{var nr,rr,sr,ir;if(hasProtocol(Xn))return;const Qn=Jn.resolve(Xn);if(!Qn)return;const er=(nr=Qn==null?void 0:Qn.meta)==null?void 0:nr.layout;let tr=Array.isArray((rr=Qn==null?void 0:Qn.meta)==null?void 0:rr.middleware)?(sr=Qn==null?void 0:Qn.meta)==null?void 0:sr.middleware:[(ir=Qn==null?void 0:Qn.meta)==null?void 0:ir.middleware];tr=tr.filter(or=>typeof or=="string");for(const or of tr)typeof namedMiddleware[or]=="function"&&namedMiddleware[or]();er&&typeof layouts[er]=="function"&&layouts[er]()})}}),chunk_reload_client_UciE0i6zes=defineNuxtPlugin({name:"nuxt:chunk-reload",setup(Zn){const Jn=useRouter(),Xn=useRuntimeConfig(),Qn=new Set;Jn.beforeEach(()=>{Qn.clear()}),Zn.hook("app:chunkError",({error:er})=>{Qn.add(er)}),Jn.onError((er,tr)=>{if(Qn.has(er)){const rr="href"in tr&&tr.href.startsWith("#")?Xn.app.baseURL+tr.href:joinURL(Xn.app.baseURL,tr.fullPath);reloadNuxtApp({path:rr,persistState:!0})}})}}),payload_client_yVLowv6hDl=defineNuxtPlugin({name:"nuxt:payload",setup(Zn){isPrerendered()&&(Zn.hooks.hook("link:prefetch",async Jn=>{parseURL$1(Jn).protocol||await loadPayload(Jn)}),useRouter().beforeResolve(async(Jn,Xn)=>{if(Jn.path===Xn.path)return;const Qn=await loadPayload(Jn.path);Qn&&Object.assign(Zn.static.data,Qn.data)}))}}),usePersistedstateCookies=Zn=>({getItem:Jn=>useCookie(Jn,{...Zn,encode:encodeURIComponent,decode:decodeURIComponent}).value,setItem:(Jn,Xn)=>{useCookie(Jn,{...Zn,encode:encodeURIComponent,decode:decodeURIComponent}).value=Xn}}),usePersistedstateLocalStorage=()=>({getItem:Zn=>useNuxtApp().ssrContext?null:localStorage.getItem(Zn),setItem:(Zn,Jn)=>{useNuxtApp().ssrContext||localStorage.setItem(Zn,Jn)}}),usePersistedstateSessionStorage=()=>({getItem:Zn=>useNuxtApp().ssrContext?null:sessionStorage.getItem(Zn),setItem:(Zn,Jn)=>{useNuxtApp().ssrContext||sessionStorage.setItem(Zn,Jn)}}),persistedState={localStorage:usePersistedstateLocalStorage(),sessionStorage:usePersistedstateSessionStorage(),cookies:usePersistedstateCookies(),cookiesWithOptions:usePersistedstateCookies};function isObject$1(Zn){return typeof Zn=="object"&&Zn!==null}function normalizeOptions(Zn,Jn){return Zn=isObject$1(Zn)?Zn:Object.create(null),new Proxy(Zn,{get(Xn,Qn,er){return Qn==="key"?Reflect.get(Xn,Qn,er):Reflect.get(Xn,Qn,er)||Reflect.get(Jn,Qn,er)}})}function get(Zn,Jn){return Jn.reduce((Xn,Qn)=>Xn==null?void 0:Xn[Qn],Zn)}function set(Zn,Jn,Xn){return Jn.slice(0,-1).reduce((Qn,er)=>/^(__proto__)$/.test(er)?{}:Qn[er]=Qn[er]||{},Zn)[Jn[Jn.length-1]]=Xn,Zn}function pick(Zn,Jn){return Jn.reduce((Xn,Qn)=>{const er=Qn.split(".");return set(Xn,er,get(Zn,er))},{})}function hydrateStore(Zn,{storage:Jn,serializer:Xn,key:Qn,debug:er}){try{const tr=Jn==null?void 0:Jn.getItem(Qn);tr&&Zn.$patch(Xn==null?void 0:Xn.deserialize(tr))}catch(tr){er&&console.error(tr)}}function persistState(Zn,{storage:Jn,serializer:Xn,key:Qn,paths:er,debug:tr}){try{const nr=Array.isArray(er)?pick(Zn,er):Zn;Jn.setItem(Qn,Xn.serialize(nr))}catch(nr){tr&&console.error(nr)}}function createPersistedState(Zn={}){return Jn=>{const{auto:Xn=!1}=Zn,{options:{persist:Qn=Xn},store:er}=Jn;if(!Qn)return;const tr=(Array.isArray(Qn)?Qn.map(nr=>normalizeOptions(nr,Zn)):[normalizeOptions(Qn,Zn)]).map(({storage:nr=localStorage,beforeRestore:rr=null,afterRestore:sr=null,serializer:ir={serialize:JSON.stringify,deserialize:JSON.parse},key:or=er.$id,paths:ar=null,debug:cr=!1})=>{var lr;return{storage:nr,beforeRestore:rr,afterRestore:sr,serializer:ir,key:((lr=Zn.key)!=null?lr:hr=>hr)(or),paths:ar,debug:cr}});er.$persist=()=>{tr.forEach(nr=>{persistState(er.$state,nr)})},er.$hydrate=({runHooks:nr=!0}={})=>{tr.forEach(rr=>{const{beforeRestore:sr,afterRestore:ir}=rr;nr&&(sr==null||sr(Jn)),hydrateStore(er,rr),nr&&(ir==null||ir(Jn))})},tr.forEach(nr=>{const{beforeRestore:rr,afterRestore:sr}=nr;rr==null||rr(Jn),hydrateStore(er,nr),sr==null||sr(Jn),er.$subscribe((ir,or)=>{persistState(or,nr)},{detached:!0})})}}const plugin_1UohGbtF8v=defineNuxtPlugin(Zn=>{const{cookieOptions:Jn,debug:Xn,storage:Qn}=useRuntimeConfig().public.persistedState;Zn.$pinia.use(createPersistedState({storage:Qn==="cookies"?persistedState.cookiesWithOptions(Jn):persistedState[Qn],debug:Xn}))});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(Zn){return Zn&&Zn.__esModule&&Object.prototype.hasOwnProperty.call(Zn,"default")?Zn.default:Zn}var vClickOutside_umd={exports:{}};(function(Zn,Jn){(function(Xn,Qn){Zn.exports=Qn()})(commonjsGlobal,function(){var Xn="__v-click-outside",Qn=typeof window<"u",er=typeof navigator<"u",tr=Qn&&("ontouchstart"in window||er&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],nr=function(or){var ar=or.event,cr=or.handler;(0,or.middleware)(ar)&&cr(ar)},rr=function(or,ar){var cr=function(dr){var yr=typeof dr=="function";if(!yr&&typeof dr!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:yr?dr:dr.handler,middleware:dr.middleware||function(vr){return vr},events:dr.events||tr,isActive:dr.isActive!==!1,detectIframe:dr.detectIframe!==!1,capture:!!dr.capture}}(ar.value),lr=cr.handler,hr=cr.middleware,fr=cr.detectIframe,gr=cr.capture;if(cr.isActive){if(or[Xn]=cr.events.map(function(dr){return{event:dr,srcTarget:document.documentElement,handler:function(yr){return function(vr){var _r=vr.el,kr=vr.event,Cr=vr.handler,br=vr.middleware,xr=kr.path||kr.composedPath&&kr.composedPath();(xr?xr.indexOf(_r)<0:!_r.contains(kr.target))&&nr({event:kr,handler:Cr,middleware:br})}({el:or,event:yr,handler:lr,middleware:hr})},capture:gr}}),fr){var ur={event:"blur",srcTarget:window,handler:function(dr){return function(yr){var vr=yr.el,_r=yr.event,kr=yr.handler,Cr=yr.middleware;setTimeout(function(){var br=document.activeElement;br&&br.tagName==="IFRAME"&&!vr.contains(br)&&nr({event:_r,handler:kr,middleware:Cr})},0)}({el:or,event:dr,handler:lr,middleware:hr})},capture:gr};or[Xn]=[].concat(or[Xn],[ur])}or[Xn].forEach(function(dr){var yr=dr.event,vr=dr.srcTarget,_r=dr.handler;return setTimeout(function(){or[Xn]&&vr.addEventListener(yr,_r,gr)},0)})}},sr=function(or){(or[Xn]||[]).forEach(function(ar){return ar.srcTarget.removeEventListener(ar.event,ar.handler,ar.capture)}),delete or[Xn]},ir=Qn?{beforeMount:rr,updated:function(or,ar){var cr=ar.value,lr=ar.oldValue;JSON.stringify(cr)!==JSON.stringify(lr)&&(sr(or),rr(or,{value:cr}))},unmounted:sr}:{};return{install:function(or){or.directive("click-outside",ir)},directive:ir}})})(vClickOutside_umd);var vClickOutside_umdExports=vClickOutside_umd.exports;const vClickOutside=getDefaultExportFromCjs(vClickOutside_umdExports);function M$1(Zn){return{all:Zn=Zn||new Map,on:function(Jn,Xn){var Qn=Zn.get(Jn);Qn?Qn.push(Xn):Zn.set(Jn,[Xn])},off:function(Jn,Xn){var Qn=Zn.get(Jn);Qn&&(Xn?Qn.splice(Qn.indexOf(Xn)>>>0,1):Zn.set(Jn,[]))},emit:function(Jn,Xn){var Qn=Zn.get(Jn);Qn&&Qn.slice().map(function(er){er(Xn)}),(Qn=Zn.get("*"))&&Qn.slice().map(function(er){er(Jn,Xn)})}}}const d$1=M$1(),C$1=new Map,w$1={x:["left","center","right"],y:["top","bottom"]},R$1=(Zn=>()=>Zn++)(0),V$1=Zn=>typeof Zn!="string"?[]:Zn.split(/\s+/gi).filter(Jn=>Jn),W$1=Zn=>{typeof Zn=="string"&&(Zn=V$1(Zn));let Jn=null,Xn=null;return Zn.forEach(Qn=>{w$1.y.indexOf(Qn)!==-1&&(Xn=Qn),w$1.x.indexOf(Qn)!==-1&&(Jn=Qn)}),{x:Jn,y:Xn}};let Y$1=class{constructor(Jn,Xn,Qn){this.remaining=Xn,this.callback=Jn,this.notifyItem=Qn,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}};const m$1={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:Zn=>({height:[Zn.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},j$1=defineComponent({name:"velocity-group",emits:["after-leave","leave","enter"],methods:{enter(Zn,Jn){this.$emit("enter",Zn,Jn)},leave(Zn,Jn){this.$emit("leave",Zn,Jn)},afterLeave(){this.$emit("after-leave")}}}),v$1=(Zn,Jn)=>{const Xn=Zn.__vccOpts||Zn;for(const[Qn,er]of Jn)Xn[Qn]=er;return Xn};function G$1(Zn,Jn,Xn,Qn,er,tr){return openBlock(),createBlock(TransitionGroup,{tag:"span",css:!1,onEnter:Zn.enter,onLeave:Zn.leave,onAfterLeave:Zn.afterLeave},{default:withCtx(()=>[renderSlot(Zn.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}const z$1=v$1(j$1,[["render",G$1]]),F$1=defineComponent({name:"css-group",inheritAttrs:!1,props:{name:{type:String,required:!0}}});function P$1(Zn,Jn,Xn,Qn,er,tr){return openBlock(),createBlock(TransitionGroup,{tag:"span",name:Zn.name},{default:withCtx(()=>[renderSlot(Zn.$slots,"default")]),_:3},8,["name"])}const q$1=v$1(F$1,[["render",P$1]]),h$1="[-+]?[0-9]*.?[0-9]+",L$1=[{name:"px",regexp:new RegExp(`^${h$1}px$`)},{name:"%",regexp:new RegExp(`^${h$1}%$`)},{name:"px",regexp:new RegExp(`^${h$1}$`)}],J$1=Zn=>{if(Zn==="auto")return{type:Zn,value:0};for(let Jn=0;Jn<L$1.length;Jn++){const Xn=L$1[Jn];if(Xn.regexp.test(Zn))return{type:Xn.name,value:parseFloat(Zn)}}return{type:"",value:Zn}},K$1=Zn=>{switch(typeof Zn){case"number":return{type:"px",value:Zn};case"string":return J$1(Zn);default:return{type:"",value:Zn}}},f$1={IDLE:0,DESTROYED:2},Q$1=defineComponent({name:"notifications",components:{VelocityGroup:z$1,CssGroup:q$1},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:m$1.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css"},animation:{type:Object,default:m$1.velocityAnimation},animationName:{type:String,default:m$1.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},emits:["click","destroy","start"],data(){return{list:[],velocity:C$1.get("velocity"),timerControl:null}},computed:{actualWidth(){return K$1(this.width)},isVA(){return this.animationType==="velocity"},componentName(){return this.isVA?"velocity-group":"css-group"},styles(){const{x:Zn,y:Jn}=W$1(this.position),Xn=this.actualWidth.value,Qn=this.actualWidth.type,er={width:Xn+Qn};return Jn&&(er[Jn]="0px"),Zn&&(Zn==="center"?er.left=`calc(50% - ${+Xn/2}${Qn})`:er[Zn]="0px"),er},active(){return this.list.filter(Zn=>Zn.state!==f$1.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},mounted(){d$1.on("add",this.addItem),d$1.on("close",this.closeItem)},methods:{destroyIfNecessary(Zn){this.$emit("click",Zn),this.closeOnClick&&this.destroy(Zn)},pauseTimeout(){var Zn;this.pauseOnHover&&((Zn=this.timerControl)==null||Zn.pause())},resumeTimeout(){var Zn;this.pauseOnHover&&((Zn=this.timerControl)==null||Zn.resume())},addItem(Zn={}){if(Zn.group||(Zn.group=""),Zn.data||(Zn.data={}),this.group!==Zn.group)return;if(Zn.clean||Zn.clear){this.destroyAll();return}const Jn=typeof Zn.duration=="number"?Zn.duration:this.duration,Xn=typeof Zn.speed=="number"?Zn.speed:this.speed,Qn=typeof Zn.ignoreDuplicates=="boolean"?Zn.ignoreDuplicates:this.ignoreDuplicates,{title:er,text:tr,type:nr,data:rr,id:sr}=Zn,ir={id:sr||R$1(),title:er,text:tr,type:nr,state:f$1.IDLE,speed:Xn,length:Jn+2*Xn,data:rr};Jn>=0&&(this.timerControl=new Y$1(()=>this.destroy(ir),ir.length,ir));const or=this.reverse?!this.botToTop:this.botToTop;let ar=-1;const cr=this.active.some(lr=>lr.title===Zn.title&&lr.text===Zn.text);(!Qn||!cr)&&(or?(this.list.push(ir),this.$emit("start",ir),this.active.length>this.max&&(ar=0)):(this.list.unshift(ir),this.$emit("start",ir),this.active.length>this.max&&(ar=this.active.length-1)),ar!==-1&&this.destroy(this.active[ar]))},closeItem(Zn){this.destroyById(Zn)},notifyClass(Zn){return["vue-notification-template",this.classes,Zn.type||""]},notifyWrapperStyle(Zn){return this.isVA?void 0:{transition:`all ${Zn.speed}ms`}},destroy(Zn){clearTimeout(Zn.timer),Zn.state=f$1.DESTROYED,this.clean(),this.$emit("destroy",Zn)},destroyById(Zn){const Jn=this.list.find(Xn=>Xn.id===Zn);Jn&&this.destroy(Jn)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(Zn,Jn){var Xn;const Qn=(Xn=this.animation)==null?void 0:Xn[Zn];return typeof Qn=="function"?Qn.call(this,Jn):Qn},enter(Zn,Jn){if(!this.isVA)return;const Xn=this.getAnimation("enter",Zn);this.velocity(Zn,Xn,{duration:this.speed,complete:Jn})},leave(Zn,Jn){if(!this.isVA)return;const Xn=this.getAnimation("leave",Zn);this.velocity(Zn,Xn,{duration:this.speed,complete:Jn})},clean(){this.list=this.list.filter(Zn=>Zn.state!==f$1.DESTROYED)}}}),U$2=["data-id"],X$1=["onClick"],Z$1=["innerHTML"],tt$1=["innerHTML"];function et$1(Zn,Jn,Xn,Qn,er,tr){return openBlock(),createElementBlock("div",{class:"vue-notification-group",style:normalizeStyle(Zn.styles)},[(openBlock(),createBlock(resolveDynamicComponent(Zn.componentName),{name:Zn.animationName,onEnter:Zn.enter,onLeave:Zn.leave,onAfterLeave:Zn.clean},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Zn.active,nr=>(openBlock(),createElementBlock("div",{key:nr.id,class:"vue-notification-wrapper",style:normalizeStyle(Zn.notifyWrapperStyle(nr)),"data-id":nr.id,onMouseenter:Jn[0]||(Jn[0]=(...rr)=>Zn.pauseTimeout&&Zn.pauseTimeout(...rr)),onMouseleave:Jn[1]||(Jn[1]=(...rr)=>Zn.resumeTimeout&&Zn.resumeTimeout(...rr))},[renderSlot(Zn.$slots,"body",{class:normalizeClass([Zn.classes,nr.type]),item:nr,close:()=>Zn.destroy(nr)},()=>[createBaseVNode("div",{class:normalizeClass(Zn.notifyClass(nr)),onClick:rr=>Zn.destroyIfNecessary(nr)},[nr.title?(openBlock(),createElementBlock("div",{key:0,class:"notification-title",innerHTML:nr.title},null,8,Z$1)):createCommentVNode("",!0),createBaseVNode("div",{class:"notification-content",innerHTML:nr.text},null,8,tt$1)],10,X$1)])],44,U$2))),128))]),_:3},40,["name","onEnter","onLeave","onAfterLeave"]))],4)}const it$1=v$1(Q$1,[["render",et$1]]),A$1=Zn=>{typeof Zn=="string"&&(Zn={title:"",text:Zn}),typeof Zn=="object"&&d$1.emit("add",Zn)};A$1.close=Zn=>{d$1.emit("close",Zn)};function st$1(Zn,Jn={}){Object.entries(Jn).forEach(Qn=>C$1.set(...Qn));const Xn=Jn.name||"notify";Zn.config.globalProperties["$"+Xn]=A$1,Zn.component(Jn.componentName||"Notifications",it$1)}const at$1={install:st$1};(function(){var Zn;try{if(typeof document<"u"){var Jn=document.createElement("style");Jn.nonce=(Zn=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:Zn.content,Jn.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(Jn)}}catch(Xn){console.error("vite-plugin-css-injected-by-js",Xn)}})();function setAppearanceFont(Zn,Jn,Xn="sans-serif",Qn=16){const er=`font${Jn}`,tr=`font${Jn}Size`;let nr=Zn[er]||"sans-serif";document.documentElement.style.setProperty(`--${er}`,nr||Xn),document.documentElement.style.setProperty(`--${tr}`,(Zn[tr]||Qn)+"px")}var lodash_merge={exports:{}};lodash_merge.exports;(function(Zn,Jn){var Xn=200,Qn="__lodash_hash_undefined__",er=800,tr=16,nr=9007199254740991,rr="[object Arguments]",sr="[object Array]",ir="[object AsyncFunction]",or="[object Boolean]",ar="[object Date]",cr="[object Error]",lr="[object Function]",hr="[object GeneratorFunction]",fr="[object Map]",gr="[object Number]",ur="[object Null]",dr="[object Object]",yr="[object Proxy]",vr="[object RegExp]",_r="[object Set]",kr="[object String]",Cr="[object Undefined]",br="[object WeakMap]",xr="[object ArrayBuffer]",$r="[object DataView]",Mr="[object Float32Array]",Ar="[object Float64Array]",Rr="[object Int8Array]",mr="[object Int16Array]",Fr="[object Int32Array]",qr="[object Uint8Array]",jr="[object Uint8ClampedArray]",es="[object Uint16Array]",Xr="[object Uint32Array]",as=/[\\^$.*+?()[\]{}|]/g,Vr=/^\[object .+?Constructor\]$/,zr=/^(?:0|[1-9]\d*)$/,ns={};ns[Mr]=ns[Ar]=ns[Rr]=ns[mr]=ns[Fr]=ns[qr]=ns[jr]=ns[es]=ns[Xr]=!0,ns[rr]=ns[sr]=ns[xr]=ns[or]=ns[$r]=ns[ar]=ns[cr]=ns[lr]=ns[fr]=ns[gr]=ns[dr]=ns[vr]=ns[_r]=ns[kr]=ns[br]=!1;var ss=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ts=typeof self=="object"&&self&&self.Object===Object&&self,ls=ss||ts||Function("return this")(),Gr=Jn&&!Jn.nodeType&&Jn,Yr=Gr&&!0&&Zn&&!Zn.nodeType&&Zn,Qr=Yr&&Yr.exports===Gr,is=Qr&&ss.process,us=function(){try{var Sr=Yr&&Yr.require&&Yr.require("util").types;return Sr||is&&is.binding&&is.binding("util")}catch{}}(),Ir=us&&us.isTypedArray;function Nr(Sr,Ur,Kr){switch(Kr.length){case 0:return Sr.call(Ur);case 1:return Sr.call(Ur,Kr[0]);case 2:return Sr.call(Ur,Kr[0],Kr[1]);case 3:return Sr.call(Ur,Kr[0],Kr[1],Kr[2])}return Sr.apply(Ur,Kr)}function pr(Sr,Ur){for(var Kr=-1,cs=Array(Sr);++Kr<Sr;)cs[Kr]=Ur(Kr);return cs}function Pr(Sr){return function(Ur){return Sr(Ur)}}function Or(Sr,Ur){return Sr==null?void 0:Sr[Ur]}function wr(Sr,Ur){return function(Kr){return Sr(Ur(Kr))}}var Er=Array.prototype,Tr=Function.prototype,Dr=Object.prototype,Br=ls["__core-js_shared__"],Lr=Tr.toString,Hr=Dr.hasOwnProperty,Jr=function(){var Sr=/[^.]+$/.exec(Br&&Br.keys&&Br.keys.IE_PROTO||"");return Sr?"Symbol(src)_1."+Sr:""}(),Wr=Dr.toString,rs=Lr.call(Object),fs=RegExp("^"+Lr.call(Hr).replace(as,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),os=Qr?ls.Buffer:void 0,ds=ls.Symbol,bs=ls.Uint8Array,As=os?os.allocUnsafe:void 0,xs=wr(Object.getPrototypeOf,Object),gs=Object.create,Ts=Dr.propertyIsEnumerable,ws=Er.splice,ms=ds?ds.toStringTag:void 0,Ss=function(){try{var Sr=Ws(Object,"defineProperty");return Sr({},"",{}),Sr}catch{}}(),Hs=os?os.isBuffer:void 0,Fs=Math.max,Vs=Date.now,Ls=Ws(ls,"Map"),Cs=Ws(Object,"create"),Ps=function(){function Sr(){}return function(Ur){if(!Os(Ur))return{};if(gs)return gs(Ur);Sr.prototype=Ur;var Kr=new Sr;return Sr.prototype=void 0,Kr}}();function Rs(Sr){var Ur=-1,Kr=Sr==null?0:Sr.length;for(this.clear();++Ur<Kr;){var cs=Sr[Ur];this.set(cs[0],cs[1])}}function hi(){this.__data__=Cs?Cs(null):{},this.size=0}function pi(Sr){var Ur=this.has(Sr)&&delete this.__data__[Sr];return this.size-=Ur?1:0,Ur}function gi(Sr){var Ur=this.__data__;if(Cs){var Kr=Ur[Sr];return Kr===Qn?void 0:Kr}return Hr.call(Ur,Sr)?Ur[Sr]:void 0}function mi(Sr){var Ur=this.__data__;return Cs?Ur[Sr]!==void 0:Hr.call(Ur,Sr)}function yi(Sr,Ur){var Kr=this.__data__;return this.size+=this.has(Sr)?0:1,Kr[Sr]=Cs&&Ur===void 0?Qn:Ur,this}Rs.prototype.clear=hi,Rs.prototype.delete=pi,Rs.prototype.get=gi,Rs.prototype.has=mi,Rs.prototype.set=yi;function Is(Sr){var Ur=-1,Kr=Sr==null?0:Sr.length;for(this.clear();++Ur<Kr;){var cs=Sr[Ur];this.set(cs[0],cs[1])}}function _i(){this.__data__=[],this.size=0}function vi(Sr){var Ur=this.__data__,Kr=Us(Ur,Sr);if(Kr<0)return!1;var cs=Ur.length-1;return Kr==cs?Ur.pop():ws.call(Ur,Kr,1),--this.size,!0}function bi(Sr){var Ur=this.__data__,Kr=Us(Ur,Sr);return Kr<0?void 0:Ur[Kr][1]}function Ai(Sr){return Us(this.__data__,Sr)>-1}function wi(Sr,Ur){var Kr=this.__data__,cs=Us(Kr,Sr);return cs<0?(++this.size,Kr.push([Sr,Ur])):Kr[cs][1]=Ur,this}Is.prototype.clear=_i,Is.prototype.delete=vi,Is.prototype.get=bi,Is.prototype.has=Ai,Is.prototype.set=wi;function Ns(Sr){var Ur=-1,Kr=Sr==null?0:Sr.length;for(this.clear();++Ur<Kr;){var cs=Sr[Ur];this.set(cs[0],cs[1])}}function Ei(){this.size=0,this.__data__={hash:new Rs,map:new(Ls||Is),string:new Rs}}function ki(Sr){var Ur=zs(this,Sr).delete(Sr);return this.size-=Ur?1:0,Ur}function xi(Sr){return zs(this,Sr).get(Sr)}function Ci(Sr){return zs(this,Sr).has(Sr)}function Si(Sr,Ur){var Kr=zs(this,Sr),cs=Kr.size;return Kr.set(Sr,Ur),this.size+=Kr.size==cs?0:1,this}Ns.prototype.clear=Ei,Ns.prototype.delete=ki,Ns.prototype.get=xi,Ns.prototype.has=Ci,Ns.prototype.set=Si;function $s(Sr){var Ur=this.__data__=new Is(Sr);this.size=Ur.size}function Ti(){this.__data__=new Is,this.size=0}function Ii(Sr){var Ur=this.__data__,Kr=Ur.delete(Sr);return this.size=Ur.size,Kr}function Ri(Sr){return this.__data__.get(Sr)}function Oi(Sr){return this.__data__.has(Sr)}function Pi(Sr,Ur){var Kr=this.__data__;if(Kr instanceof Is){var cs=Kr.__data__;if(!Ls||cs.length<Xn-1)return cs.push([Sr,Ur]),this.size=++Kr.size,this;Kr=this.__data__=new Ns(cs)}return Kr.set(Sr,Ur),this.size=Kr.size,this}$s.prototype.clear=Ti,$s.prototype.delete=Ii,$s.prototype.get=Ri,$s.prototype.has=Oi,$s.prototype.set=Pi;function Ni(Sr,Ur){var Kr=Js(Sr),cs=!Kr&&Zs(Sr),ps=!Kr&&!cs&&ii(Sr),ys=!Kr&&!cs&&!ps&&ai(Sr),_s=Kr||cs||ps||ys,hs=_s?pr(Sr.length,String):[],vs=hs.length;for(var ks in Sr)(Ur||Hr.call(Sr,ks))&&!(_s&&(ks=="length"||ps&&(ks=="offset"||ks=="parent")||ys&&(ks=="buffer"||ks=="byteLength"||ks=="byteOffset")||ri(ks,vs)))&&hs.push(ks);return hs}function Ks(Sr,Ur,Kr){(Kr!==void 0&&!js(Sr[Ur],Kr)||Kr===void 0&&!(Ur in Sr))&&Gs(Sr,Ur,Kr)}function $i(Sr,Ur,Kr){var cs=Sr[Ur];(!(Hr.call(Sr,Ur)&&js(cs,Kr))||Kr===void 0&&!(Ur in Sr))&&Gs(Sr,Ur,Kr)}function Us(Sr,Ur){for(var Kr=Sr.length;Kr--;)if(js(Sr[Kr][0],Ur))return Kr;return-1}function Gs(Sr,Ur,Kr){Ur=="__proto__"&&Ss?Ss(Sr,Ur,{configurable:!0,enumerable:!0,value:Kr,writable:!0}):Sr[Ur]=Kr}var Li=qi();function Ds(Sr){return Sr==null?Sr===void 0?Cr:ur:ms&&ms in Object(Sr)?Zi(Sr):to(Sr)}function ti(Sr){return Bs(Sr)&&Ds(Sr)==rr}function Bi(Sr){if(!Os(Sr)||Qi(Sr))return!1;var Ur=Xs(Sr)?fs:Vr;return Ur.test(io(Sr))}function Mi(Sr){return Bs(Sr)&&oi(Sr.length)&&!!ns[Ds(Sr)]}function Fi(Sr){if(!Os(Sr))return eo(Sr);var Ur=si(Sr),Kr=[];for(var cs in Sr)cs=="constructor"&&(Ur||!Hr.call(Sr,cs))||Kr.push(cs);return Kr}function ni(Sr,Ur,Kr,cs,ps){Sr!==Ur&&Li(Ur,function(ys,_s){if(ps||(ps=new $s),Os(ys))Ui(Sr,Ur,_s,Kr,ni,cs,ps);else{var hs=cs?cs(qs(Sr,_s),ys,_s+"",Sr,Ur,ps):void 0;hs===void 0&&(hs=ys),Ks(Sr,_s,hs)}},ci)}function Ui(Sr,Ur,Kr,cs,ps,ys,_s){var hs=qs(Sr,Kr),vs=qs(Ur,Kr),ks=_s.get(vs);if(ks){Ks(Sr,Kr,ks);return}var Es=ys?ys(hs,vs,Kr+"",Sr,Ur,_s):void 0,Ms=Es===void 0;if(Ms){var Qs=Js(vs),ei=!Qs&&ii(vs),ui=!Qs&&!ei&&ai(vs);Es=vs,Qs||ei||ui?Js(hs)?Es=hs:oo(hs)?Es=Ki(hs):ei?(Ms=!1,Es=ji(vs,!0)):ui?(Ms=!1,Es=Vi(vs,!0)):Es=[]:ao(vs)||Zs(vs)?(Es=hs,Zs(hs)?Es=co(hs):(!Os(hs)||Xs(hs))&&(Es=Ji(vs))):Ms=!1}Ms&&(_s.set(vs,Es),ps(Es,vs,cs,ys,_s),_s.delete(vs)),Ks(Sr,Kr,Es)}function Di(Sr,Ur){return ro(no(Sr,Ur,li),Sr+"")}var zi=Ss?function(Sr,Ur){return Ss(Sr,"toString",{configurable:!0,enumerable:!1,value:uo(Ur),writable:!0})}:li;function ji(Sr,Ur){if(Ur)return Sr.slice();var Kr=Sr.length,cs=As?As(Kr):new Sr.constructor(Kr);return Sr.copy(cs),cs}function Hi(Sr){var Ur=new Sr.constructor(Sr.byteLength);return new bs(Ur).set(new bs(Sr)),Ur}function Vi(Sr,Ur){var Kr=Ur?Hi(Sr.buffer):Sr.buffer;return new Sr.constructor(Kr,Sr.byteOffset,Sr.length)}function Ki(Sr,Ur){var Kr=-1,cs=Sr.length;for(Ur||(Ur=Array(cs));++Kr<cs;)Ur[Kr]=Sr[Kr];return Ur}function Gi(Sr,Ur,Kr,cs){var ps=!Kr;Kr||(Kr={});for(var ys=-1,_s=Ur.length;++ys<_s;){var hs=Ur[ys],vs=cs?cs(Kr[hs],Sr[hs],hs,Kr,Sr):void 0;vs===void 0&&(vs=Sr[hs]),ps?Gs(Kr,hs,vs):$i(Kr,hs,vs)}return Kr}function Wi(Sr){return Di(function(Ur,Kr){var cs=-1,ps=Kr.length,ys=ps>1?Kr[ps-1]:void 0,_s=ps>2?Kr[2]:void 0;for(ys=Sr.length>3&&typeof ys=="function"?(ps--,ys):void 0,_s&&Yi(Kr[0],Kr[1],_s)&&(ys=ps<3?void 0:ys,ps=1),Ur=Object(Ur);++cs<ps;){var hs=Kr[cs];hs&&Sr(Ur,hs,cs,ys)}return Ur})}function qi(Sr){return function(Ur,Kr,cs){for(var ps=-1,ys=Object(Ur),_s=cs(Ur),hs=_s.length;hs--;){var vs=_s[Sr?hs:++ps];if(Kr(ys[vs],vs,ys)===!1)break}return Ur}}function zs(Sr,Ur){var Kr=Sr.__data__;return Xi(Ur)?Kr[typeof Ur=="string"?"string":"hash"]:Kr.map}function Ws(Sr,Ur){var Kr=Or(Sr,Ur);return Bi(Kr)?Kr:void 0}function Zi(Sr){var Ur=Hr.call(Sr,ms),Kr=Sr[ms];try{Sr[ms]=void 0;var cs=!0}catch{}var ps=Wr.call(Sr);return cs&&(Ur?Sr[ms]=Kr:delete Sr[ms]),ps}function Ji(Sr){return typeof Sr.constructor=="function"&&!si(Sr)?Ps(xs(Sr)):{}}function ri(Sr,Ur){var Kr=typeof Sr;return Ur=Ur??nr,!!Ur&&(Kr=="number"||Kr!="symbol"&&zr.test(Sr))&&Sr>-1&&Sr%1==0&&Sr<Ur}function Yi(Sr,Ur,Kr){if(!Os(Kr))return!1;var cs=typeof Ur;return(cs=="number"?Ys(Kr)&&ri(Ur,Kr.length):cs=="string"&&Ur in Kr)?js(Kr[Ur],Sr):!1}function Xi(Sr){var Ur=typeof Sr;return Ur=="string"||Ur=="number"||Ur=="symbol"||Ur=="boolean"?Sr!=="__proto__":Sr===null}function Qi(Sr){return!!Jr&&Jr in Sr}function si(Sr){var Ur=Sr&&Sr.constructor,Kr=typeof Ur=="function"&&Ur.prototype||Dr;return Sr===Kr}function eo(Sr){var Ur=[];if(Sr!=null)for(var Kr in Object(Sr))Ur.push(Kr);return Ur}function to(Sr){return Wr.call(Sr)}function no(Sr,Ur,Kr){return Ur=Fs(Ur===void 0?Sr.length-1:Ur,0),function(){for(var cs=arguments,ps=-1,ys=Fs(cs.length-Ur,0),_s=Array(ys);++ps<ys;)_s[ps]=cs[Ur+ps];ps=-1;for(var hs=Array(Ur+1);++ps<Ur;)hs[ps]=cs[ps];return hs[Ur]=Kr(_s),Nr(Sr,this,hs)}}function qs(Sr,Ur){if(!(Ur==="constructor"&&typeof Sr[Ur]=="function")&&Ur!="__proto__")return Sr[Ur]}var ro=so(zi);function so(Sr){var Ur=0,Kr=0;return function(){var cs=Vs(),ps=tr-(cs-Kr);if(Kr=cs,ps>0){if(++Ur>=er)return arguments[0]}else Ur=0;return Sr.apply(void 0,arguments)}}function io(Sr){if(Sr!=null){try{return Lr.call(Sr)}catch{}try{return Sr+""}catch{}}return""}function js(Sr,Ur){return Sr===Ur||Sr!==Sr&&Ur!==Ur}var Zs=ti(function(){return arguments}())?ti:function(Sr){return Bs(Sr)&&Hr.call(Sr,"callee")&&!Ts.call(Sr,"callee")},Js=Array.isArray;function Ys(Sr){return Sr!=null&&oi(Sr.length)&&!Xs(Sr)}function oo(Sr){return Bs(Sr)&&Ys(Sr)}var ii=Hs||fo;function Xs(Sr){if(!Os(Sr))return!1;var Ur=Ds(Sr);return Ur==lr||Ur==hr||Ur==ir||Ur==yr}function oi(Sr){return typeof Sr=="number"&&Sr>-1&&Sr%1==0&&Sr<=nr}function Os(Sr){var Ur=typeof Sr;return Sr!=null&&(Ur=="object"||Ur=="function")}function Bs(Sr){return Sr!=null&&typeof Sr=="object"}function ao(Sr){if(!Bs(Sr)||Ds(Sr)!=dr)return!1;var Ur=xs(Sr);if(Ur===null)return!0;var Kr=Hr.call(Ur,"constructor")&&Ur.constructor;return typeof Kr=="function"&&Kr instanceof Kr&&Lr.call(Kr)==rs}var ai=Ir?Pr(Ir):Mi;function co(Sr){return Gi(Sr,ci(Sr))}function ci(Sr){return Ys(Sr)?Ni(Sr,!0):Fi(Sr)}var lo=Wi(function(Sr,Ur,Kr){ni(Sr,Ur,Kr)});function uo(Sr){return function(){return Sr}}function li(Sr){return Sr}function fo(){return!1}Zn.exports=lo})(lodash_merge,lodash_merge.exports);var lodash_mergeExports=lodash_merge.exports;const merge=getDefaultExportFromCjs(lodash_mergeExports);function hexToRgb(Zn){const Jn=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Zn);return Jn?{r:parseInt(Jn[1],16),g:parseInt(Jn[2],16),b:parseInt(Jn[3],16)}:null}async function updateCssVars(Zn,Jn){const Xn=document.documentElement;if(Zn.dark?Xn.classList.add("dark"):Xn.classList.remove("dark"),Zn.background){const er=hexToRgb(Zn.background);if(document.documentElement.style.setProperty("--bg",Zn.background),document.documentElement.style.setProperty("--popups_background",Zn.background),er!=null)for(const tr in er)document.documentElement.style.setProperty(`--bg-${tr}`,`${er[tr]}`)}if(Zn.title&&document.documentElement.style.setProperty("--title",Zn.title),Zn.forcesBackground?document.documentElement.style.setProperty("--forces_background",Zn.forcesBackground):Zn.title&&(document.documentElement.style.setProperty("--forces_background",Zn.title),Zn.forcesBackground=Zn.title),Zn.highlight){const er=hexToRgb(Zn.highlight);if(er!=null)for(const tr in er)document.documentElement.style.setProperty(`--highlight-${tr}`,`${er[tr]}`)}Zn.borderColor&&document.documentElement.style.setProperty("--box-border",`${Zn.borderColor}`);let Qn="";if(Zn.invertColors==!0?Qn="invert(100)":Zn.invertImages?Qn="":Qn="invert(0)",Zn.hue&&(Qn+=` hue-rotate(${Zn.hue}deg)`),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?document.documentElement.style.setProperty("--global-filter","none"):document.documentElement.style.setProperty("--global-filter",Qn),Zn.backgroundTexture&&document.documentElement.style.setProperty("--bg-texture",Zn.backgroundTexture),Zn.backgroundSize&&document.documentElement.style.setProperty("--backgroundSize",Zn.backgroundSize),Zn.inputRadius&&document.documentElement.style.setProperty("--input-radius",Zn.inputRadius+"px"),Zn.inputBackground&&document.documentElement.style.setProperty("--input-background",Zn.inputBackground),Jn.unitColor&&document.documentElement.style.setProperty("--color-unit",Jn.unitColor),Jn.armyColor&&document.documentElement.style.setProperty("--color-army",Jn.armyColor),Zn.fontColor&&document.documentElement.style.setProperty("--font-color",Zn.fontColor),document.documentElement.style.setProperty("--italic",Zn.italic??"italic"),Zn.colorGray&&document.documentElement.style.setProperty("--color-gray",Zn.colorGray),Zn.colorRed&&document.documentElement.style.setProperty("--color-red",Zn.colorRed),Zn.colorGreen&&document.documentElement.style.setProperty("--color-green",Zn.colorGreen),Zn.colorBlue&&document.documentElement.style.setProperty("--color-blue",Zn.colorBlue),Zn.colorLightblue&&document.documentElement.style.setProperty("--color-lightblue",Zn.colorLightblue),Zn.bga){let er=Number(Zn.bga);er>1&&(er/=100),document.documentElement.style.setProperty("--bg-a",`${er}`)}if(Zn.invertImagesBrightness){const er=180*(Number(Zn.invertImagesBrightness)/100);document.documentElement.style.setProperty("--image-filter",`invert(${Zn.invertImagesBrightness}%) hue-rotate(${er}deg)`)}else Zn.invertImages?document.documentElement.style.setProperty("--image-filter","invert(100%) hue-rotate(180deg)"):document.documentElement.style.setProperty("--image-filter","");if(Zn.costColor){const er=Zn.costColor;document.documentElement.style.setProperty("--cost-color",er)}if(setAppearanceFont(Zn,""),setAppearanceFont(Zn,"Header"),setAppearanceFont(Zn,"Button"),document.documentElement.style.setProperty("--fontHeaderTransform",Zn.headerTransform),Zn.inputHighlights){const er=Zn.inputHighlights;document.documentElement.style.setProperty("--input-highlights",er)}Zn.dark?(document.documentElement.style.setProperty("--hover-brighten-color","rgba(0, 0, 0, 0.15)"),document.documentElement.style.setProperty("--hover-darken-color","rgba(255, 255, 255, 0.15)")):(document.documentElement.style.setProperty("--hover-darken-color","rgba(0, 0, 0, 0.15)"),document.documentElement.style.setProperty("--hover-brighten-color","rgba(255, 255, 255, 0.15)")),Zn.titleBarColor&&document.documentElement.style.setProperty("--titleBarColor",Zn.titleBarColor)}const defaultAppearence={background:"#f0f5ff",backgroundTexture:"url(assets/images/no.jpg)",backgroundSize:"auto",bga:70,hue:0,title:"#8ecff0",forcesBackground:"#dcd189",highlight:"#fffef1",dropdownStyle:2,inputRadius:0,inputBackground:"#ffffff",inputHighlights:"#add8e6",categoryIcons:!0,costsLeft:!1,invertColors:!1,invertImages:!1,invertImagesBrightness:0,font:"sans-serif",fontSize:16,fontHeader:"sans-serif",fontHeaderSize:16,headerTransform:"none",fontButton:"sans-serif",fontButtonSize:16,fontColor:"black",borderColor:"#aaaaaa",colorGray:"gray",colorBlue:"#0f59ba",colorRed:"#e64e4e",colorGreen:"#439943",colorLightblue:"#bcdaf9",costColor:"#284781",titleBarColor:"#708090",unitsBackground:"",fitBackground:!1,hoverColor:""},defaultSortConfiguration=`type:model
type:mount
type:crew
type:upgrade
type:entry
type:group & name:/mount/i
type:group & name:/weapons/i
type:group & name:/armour/i
type:group & name:/equipment/i
type:group & name:/items/i
type:group & name:/options/i
type:group
cost:pts
cost:points
name`,defaultState={systemsFolder:"",showOnlyEnabledCategories:!1,globalDuplicateIdError:!1,useNewCategoriesUI:!1,sort:"asc",theme:"",githubAutoIncrement:!0,autosort:{config:defaultSortConfiguration},display:{sortIndex:!0,references:!0,costs:!0,primaryCategory:!1},autoFormatCharacteristics:!1,autoRenameInfoLinkParent:!1,stickyScroll:!1},useSettingsStore=defineStore("settings",{state:()=>({...defaultState}),persist:{storage:globalThis.localStorage,deserialize(Zn){const Jn=JSON.parse(Zn);return merge(Jn,defaultState)},serialize:JSON.stringify},getters:{isDarkTheme(){return this.theme==="dark"}},actions:{getDefaultAppareance(){return this.theme==="dark"?{...defaultAppearence,background:"#2b2b2b",bga:"100",borderColor:"#5e5e5e",colorGray:"#737283",colorBlue:"#2d9ce1",colorLightblue:"#009cbd",colorRed:"#c74343",costColor:"#5dabdf",dropdownStyle:2,fontColor:"#ababab",inputBackground:"#333333",inputHighlights:"#add8e6",invertImagesBrightness:"85",titleBarColor:"#525252",title:"#333333",dark:!0}:defaultAppearence},setTheme(Zn){this.theme=Zn,this.refreshAppearance()},refreshAppearance(){updateCssVars(this.getDefaultAppareance(),{})},init(){this.display||(this.display={sortIndex:!0,references:!0,costs:!0})}}});function commonjsRequire(Zn){throw new Error('Could not dynamically require "'+Zn+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Zn,Jn){(function(Xn){Zn.exports=Xn()})(function(){return function Xn(Qn,er,tr){function nr(ir,or){if(!er[ir]){if(!Qn[ir]){var ar=typeof commonjsRequire=="function"&&commonjsRequire;if(!or&&ar)return ar(ir,!0);if(rr)return rr(ir,!0);var cr=new Error("Cannot find module '"+ir+"'");throw cr.code="MODULE_NOT_FOUND",cr}var lr=er[ir]={exports:{}};Qn[ir][0].call(lr.exports,function(hr){var fr=Qn[ir][1][hr];return nr(fr||hr)},lr,lr.exports,Xn,Qn,er,tr)}return er[ir].exports}for(var rr=typeof commonjsRequire=="function"&&commonjsRequire,sr=0;sr<tr.length;sr++)nr(tr[sr]);return nr}({1:[function(Xn,Qn,er){var tr=Xn("./utils"),nr=Xn("./support"),rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";er.encode=function(sr){for(var ir,or,ar,cr,lr,hr,fr,gr=[],ur=0,dr=sr.length,yr=dr,vr=tr.getTypeOf(sr)!=="string";ur<sr.length;)yr=dr-ur,ar=vr?(ir=sr[ur++],or=ur<dr?sr[ur++]:0,ur<dr?sr[ur++]:0):(ir=sr.charCodeAt(ur++),or=ur<dr?sr.charCodeAt(ur++):0,ur<dr?sr.charCodeAt(ur++):0),cr=ir>>2,lr=(3&ir)<<4|or>>4,hr=1<yr?(15&or)<<2|ar>>6:64,fr=2<yr?63&ar:64,gr.push(rr.charAt(cr)+rr.charAt(lr)+rr.charAt(hr)+rr.charAt(fr));return gr.join("")},er.decode=function(sr){var ir,or,ar,cr,lr,hr,fr=0,gr=0,ur="data:";if(sr.substr(0,ur.length)===ur)throw new Error("Invalid base64 input, it looks like a data url.");var dr,yr=3*(sr=sr.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(sr.charAt(sr.length-1)===rr.charAt(64)&&yr--,sr.charAt(sr.length-2)===rr.charAt(64)&&yr--,yr%1!=0)throw new Error("Invalid base64 input, bad content length.");for(dr=nr.uint8array?new Uint8Array(0|yr):new Array(0|yr);fr<sr.length;)ir=rr.indexOf(sr.charAt(fr++))<<2|(cr=rr.indexOf(sr.charAt(fr++)))>>4,or=(15&cr)<<4|(lr=rr.indexOf(sr.charAt(fr++)))>>2,ar=(3&lr)<<6|(hr=rr.indexOf(sr.charAt(fr++))),dr[gr++]=ir,lr!==64&&(dr[gr++]=or),hr!==64&&(dr[gr++]=ar);return dr}},{"./support":30,"./utils":32}],2:[function(Xn,Qn,er){var tr=Xn("./external"),nr=Xn("./stream/DataWorker"),rr=Xn("./stream/Crc32Probe"),sr=Xn("./stream/DataLengthProbe");function ir(or,ar,cr,lr,hr){this.compressedSize=or,this.uncompressedSize=ar,this.crc32=cr,this.compression=lr,this.compressedContent=hr}ir.prototype={getContentWorker:function(){var or=new nr(tr.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new sr("data_length")),ar=this;return or.on("end",function(){if(this.streamInfo.data_length!==ar.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),or},getCompressedWorker:function(){return new nr(tr.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},ir.createWorkerFrom=function(or,ar,cr){return or.pipe(new rr).pipe(new sr("uncompressedSize")).pipe(ar.compressWorker(cr)).pipe(new sr("compressedSize")).withStreamInfo("compression",ar)},Qn.exports=ir},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Xn,Qn,er){var tr=Xn("./stream/GenericWorker");er.STORE={magic:"\0\0",compressWorker:function(){return new tr("STORE compression")},uncompressWorker:function(){return new tr("STORE decompression")}},er.DEFLATE=Xn("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Xn,Qn,er){var tr=Xn("./utils"),nr=function(){for(var rr,sr=[],ir=0;ir<256;ir++){rr=ir;for(var or=0;or<8;or++)rr=1&rr?3988292384^rr>>>1:rr>>>1;sr[ir]=rr}return sr}();Qn.exports=function(rr,sr){return rr!==void 0&&rr.length?tr.getTypeOf(rr)!=="string"?function(ir,or,ar,cr){var lr=nr,hr=cr+ar;ir^=-1;for(var fr=cr;fr<hr;fr++)ir=ir>>>8^lr[255&(ir^or[fr])];return-1^ir}(0|sr,rr,rr.length,0):function(ir,or,ar,cr){var lr=nr,hr=cr+ar;ir^=-1;for(var fr=cr;fr<hr;fr++)ir=ir>>>8^lr[255&(ir^or.charCodeAt(fr))];return-1^ir}(0|sr,rr,rr.length,0):0}},{"./utils":32}],5:[function(Xn,Qn,er){er.base64=!1,er.binary=!1,er.dir=!1,er.createFolders=!0,er.date=null,er.compression=null,er.compressionOptions=null,er.comment=null,er.unixPermissions=null,er.dosPermissions=null},{}],6:[function(Xn,Qn,er){var tr=null;tr=typeof Promise<"u"?Promise:Xn("lie"),Qn.exports={Promise:tr}},{lie:37}],7:[function(Xn,Qn,er){var tr=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",nr=Xn("pako"),rr=Xn("./utils"),sr=Xn("./stream/GenericWorker"),ir=tr?"uint8array":"array";function or(ar,cr){sr.call(this,"FlateWorker/"+ar),this._pako=null,this._pakoAction=ar,this._pakoOptions=cr,this.meta={}}er.magic="\b\0",rr.inherits(or,sr),or.prototype.processChunk=function(ar){this.meta=ar.meta,this._pako===null&&this._createPako(),this._pako.push(rr.transformTo(ir,ar.data),!1)},or.prototype.flush=function(){sr.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},or.prototype.cleanUp=function(){sr.prototype.cleanUp.call(this),this._pako=null},or.prototype._createPako=function(){this._pako=new nr[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var ar=this;this._pako.onData=function(cr){ar.push({data:cr,meta:ar.meta})}},er.compressWorker=function(ar){return new or("Deflate",ar)},er.uncompressWorker=function(){return new or("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Xn,Qn,er){function tr(lr,hr){var fr,gr="";for(fr=0;fr<hr;fr++)gr+=String.fromCharCode(255&lr),lr>>>=8;return gr}function nr(lr,hr,fr,gr,ur,dr){var yr,vr,_r=lr.file,kr=lr.compression,Cr=dr!==ir.utf8encode,br=rr.transformTo("string",dr(_r.name)),xr=rr.transformTo("string",ir.utf8encode(_r.name)),$r=_r.comment,Mr=rr.transformTo("string",dr($r)),Ar=rr.transformTo("string",ir.utf8encode($r)),Rr=xr.length!==_r.name.length,mr=Ar.length!==$r.length,Fr="",qr="",jr="",es=_r.dir,Xr=_r.date,as={crc32:0,compressedSize:0,uncompressedSize:0};hr&&!fr||(as.crc32=lr.crc32,as.compressedSize=lr.compressedSize,as.uncompressedSize=lr.uncompressedSize);var Vr=0;hr&&(Vr|=8),Cr||!Rr&&!mr||(Vr|=2048);var zr=0,ns=0;es&&(zr|=16),ur==="UNIX"?(ns=798,zr|=function(ts,ls){var Gr=ts;return ts||(Gr=ls?16893:33204),(65535&Gr)<<16}(_r.unixPermissions,es)):(ns=20,zr|=function(ts){return 63&(ts||0)}(_r.dosPermissions)),yr=Xr.getUTCHours(),yr<<=6,yr|=Xr.getUTCMinutes(),yr<<=5,yr|=Xr.getUTCSeconds()/2,vr=Xr.getUTCFullYear()-1980,vr<<=4,vr|=Xr.getUTCMonth()+1,vr<<=5,vr|=Xr.getUTCDate(),Rr&&(qr=tr(1,1)+tr(or(br),4)+xr,Fr+="up"+tr(qr.length,2)+qr),mr&&(jr=tr(1,1)+tr(or(Mr),4)+Ar,Fr+="uc"+tr(jr.length,2)+jr);var ss="";return ss+=`
\0`,ss+=tr(Vr,2),ss+=kr.magic,ss+=tr(yr,2),ss+=tr(vr,2),ss+=tr(as.crc32,4),ss+=tr(as.compressedSize,4),ss+=tr(as.uncompressedSize,4),ss+=tr(br.length,2),ss+=tr(Fr.length,2),{fileRecord:ar.LOCAL_FILE_HEADER+ss+br+Fr,dirRecord:ar.CENTRAL_FILE_HEADER+tr(ns,2)+ss+tr(Mr.length,2)+"\0\0\0\0"+tr(zr,4)+tr(gr,4)+br+Fr+Mr}}var rr=Xn("../utils"),sr=Xn("../stream/GenericWorker"),ir=Xn("../utf8"),or=Xn("../crc32"),ar=Xn("../signature");function cr(lr,hr,fr,gr){sr.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=hr,this.zipPlatform=fr,this.encodeFileName=gr,this.streamFiles=lr,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}rr.inherits(cr,sr),cr.prototype.push=function(lr){var hr=lr.meta.percent||0,fr=this.entriesCount,gr=this._sources.length;this.accumulate?this.contentBuffer.push(lr):(this.bytesWritten+=lr.data.length,sr.prototype.push.call(this,{data:lr.data,meta:{currentFile:this.currentFile,percent:fr?(hr+100*(fr-gr-1))/fr:100}}))},cr.prototype.openedSource=function(lr){this.currentSourceOffset=this.bytesWritten,this.currentFile=lr.file.name;var hr=this.streamFiles&&!lr.file.dir;if(hr){var fr=nr(lr,hr,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:fr.fileRecord,meta:{percent:0}})}else this.accumulate=!0},cr.prototype.closedSource=function(lr){this.accumulate=!1;var hr=this.streamFiles&&!lr.file.dir,fr=nr(lr,hr,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(fr.dirRecord),hr)this.push({data:function(gr){return ar.DATA_DESCRIPTOR+tr(gr.crc32,4)+tr(gr.compressedSize,4)+tr(gr.uncompressedSize,4)}(lr),meta:{percent:100}});else for(this.push({data:fr.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},cr.prototype.flush=function(){for(var lr=this.bytesWritten,hr=0;hr<this.dirRecords.length;hr++)this.push({data:this.dirRecords[hr],meta:{percent:100}});var fr=this.bytesWritten-lr,gr=function(ur,dr,yr,vr,_r){var kr=rr.transformTo("string",_r(vr));return ar.CENTRAL_DIRECTORY_END+"\0\0\0\0"+tr(ur,2)+tr(ur,2)+tr(dr,4)+tr(yr,4)+tr(kr.length,2)+kr}(this.dirRecords.length,fr,lr,this.zipComment,this.encodeFileName);this.push({data:gr,meta:{percent:100}})},cr.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},cr.prototype.registerPrevious=function(lr){this._sources.push(lr);var hr=this;return lr.on("data",function(fr){hr.processChunk(fr)}),lr.on("end",function(){hr.closedSource(hr.previous.streamInfo),hr._sources.length?hr.prepareNextSource():hr.end()}),lr.on("error",function(fr){hr.error(fr)}),this},cr.prototype.resume=function(){return!!sr.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},cr.prototype.error=function(lr){var hr=this._sources;if(!sr.prototype.error.call(this,lr))return!1;for(var fr=0;fr<hr.length;fr++)try{hr[fr].error(lr)}catch{}return!0},cr.prototype.lock=function(){sr.prototype.lock.call(this);for(var lr=this._sources,hr=0;hr<lr.length;hr++)lr[hr].lock()},Qn.exports=cr},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Xn,Qn,er){var tr=Xn("../compressions"),nr=Xn("./ZipFileWorker");er.generateWorker=function(rr,sr,ir){var or=new nr(sr.streamFiles,ir,sr.platform,sr.encodeFileName),ar=0;try{rr.forEach(function(cr,lr){ar++;var hr=function(dr,yr){var vr=dr||yr,_r=tr[vr];if(!_r)throw new Error(vr+" is not a valid compression method !");return _r}(lr.options.compression,sr.compression),fr=lr.options.compressionOptions||sr.compressionOptions||{},gr=lr.dir,ur=lr.date;lr._compressWorker(hr,fr).withStreamInfo("file",{name:cr,dir:gr,date:ur,comment:lr.comment||"",unixPermissions:lr.unixPermissions,dosPermissions:lr.dosPermissions}).pipe(or)}),or.entriesCount=ar}catch(cr){or.error(cr)}return or}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Xn,Qn,er){function tr(){if(!(this instanceof tr))return new tr;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var nr=new tr;for(var rr in this)typeof this[rr]!="function"&&(nr[rr]=this[rr]);return nr}}(tr.prototype=Xn("./object")).loadAsync=Xn("./load"),tr.support=Xn("./support"),tr.defaults=Xn("./defaults"),tr.version="3.10.1",tr.loadAsync=function(nr,rr){return new tr().loadAsync(nr,rr)},tr.external=Xn("./external"),Qn.exports=tr},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Xn,Qn,er){var tr=Xn("./utils"),nr=Xn("./external"),rr=Xn("./utf8"),sr=Xn("./zipEntries"),ir=Xn("./stream/Crc32Probe"),or=Xn("./nodejsUtils");function ar(cr){return new nr.Promise(function(lr,hr){var fr=cr.decompressed.getContentWorker().pipe(new ir);fr.on("error",function(gr){hr(gr)}).on("end",function(){fr.streamInfo.crc32!==cr.decompressed.crc32?hr(new Error("Corrupted zip : CRC32 mismatch")):lr()}).resume()})}Qn.exports=function(cr,lr){var hr=this;return lr=tr.extend(lr||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:rr.utf8decode}),or.isNode&&or.isStream(cr)?nr.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):tr.prepareContent("the loaded zip file",cr,!0,lr.optimizedBinaryString,lr.base64).then(function(fr){var gr=new sr(lr);return gr.load(fr),gr}).then(function(fr){var gr=[nr.Promise.resolve(fr)],ur=fr.files;if(lr.checkCRC32)for(var dr=0;dr<ur.length;dr++)gr.push(ar(ur[dr]));return nr.Promise.all(gr)}).then(function(fr){for(var gr=fr.shift(),ur=gr.files,dr=0;dr<ur.length;dr++){var yr=ur[dr],vr=yr.fileNameStr,_r=tr.resolve(yr.fileNameStr);hr.file(_r,yr.decompressed,{binary:!0,optimizedBinaryString:!0,date:yr.date,dir:yr.dir,comment:yr.fileCommentStr.length?yr.fileCommentStr:null,unixPermissions:yr.unixPermissions,dosPermissions:yr.dosPermissions,createFolders:lr.createFolders}),yr.dir||(hr.file(_r).unsafeOriginalName=vr)}return gr.zipComment.length&&(hr.comment=gr.zipComment),hr})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Xn,Qn,er){var tr=Xn("../utils"),nr=Xn("../stream/GenericWorker");function rr(sr,ir){nr.call(this,"Nodejs stream input adapter for "+sr),this._upstreamEnded=!1,this._bindStream(ir)}tr.inherits(rr,nr),rr.prototype._bindStream=function(sr){var ir=this;(this._stream=sr).pause(),sr.on("data",function(or){ir.push({data:or,meta:{percent:0}})}).on("error",function(or){ir.isPaused?this.generatedError=or:ir.error(or)}).on("end",function(){ir.isPaused?ir._upstreamEnded=!0:ir.end()})},rr.prototype.pause=function(){return!!nr.prototype.pause.call(this)&&(this._stream.pause(),!0)},rr.prototype.resume=function(){return!!nr.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Qn.exports=rr},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Xn,Qn,er){var tr=Xn("readable-stream").Readable;function nr(rr,sr,ir){tr.call(this,sr),this._helper=rr;var or=this;rr.on("data",function(ar,cr){or.push(ar)||or._helper.pause(),ir&&ir(cr)}).on("error",function(ar){or.emit("error",ar)}).on("end",function(){or.push(null)})}Xn("../utils").inherits(nr,tr),nr.prototype._read=function(){this._helper.resume()},Qn.exports=nr},{"../utils":32,"readable-stream":16}],14:[function(Xn,Qn,er){Qn.exports={isNode:typeof Buffer<"u",newBufferFrom:function(tr,nr){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(tr,nr);if(typeof tr=="number")throw new Error('The "data" argument must not be a number');return new Buffer(tr,nr)},allocBuffer:function(tr){if(Buffer.alloc)return Buffer.alloc(tr);var nr=new Buffer(tr);return nr.fill(0),nr},isBuffer:function(tr){return Buffer.isBuffer(tr)},isStream:function(tr){return tr&&typeof tr.on=="function"&&typeof tr.pause=="function"&&typeof tr.resume=="function"}}},{}],15:[function(Xn,Qn,er){function tr(_r,kr,Cr){var br,xr=rr.getTypeOf(kr),$r=rr.extend(Cr||{},or);$r.date=$r.date||new Date,$r.compression!==null&&($r.compression=$r.compression.toUpperCase()),typeof $r.unixPermissions=="string"&&($r.unixPermissions=parseInt($r.unixPermissions,8)),$r.unixPermissions&&16384&$r.unixPermissions&&($r.dir=!0),$r.dosPermissions&&16&$r.dosPermissions&&($r.dir=!0),$r.dir&&(_r=ur(_r)),$r.createFolders&&(br=gr(_r))&&dr.call(this,br,!0);var Mr=xr==="string"&&$r.binary===!1&&$r.base64===!1;Cr&&Cr.binary!==void 0||($r.binary=!Mr),(kr instanceof ar&&kr.uncompressedSize===0||$r.dir||!kr||kr.length===0)&&($r.base64=!1,$r.binary=!0,kr="",$r.compression="STORE",xr="string");var Ar=null;Ar=kr instanceof ar||kr instanceof sr?kr:hr.isNode&&hr.isStream(kr)?new fr(_r,kr):rr.prepareContent(_r,kr,$r.binary,$r.optimizedBinaryString,$r.base64);var Rr=new cr(_r,Ar,$r);this.files[_r]=Rr}var nr=Xn("./utf8"),rr=Xn("./utils"),sr=Xn("./stream/GenericWorker"),ir=Xn("./stream/StreamHelper"),or=Xn("./defaults"),ar=Xn("./compressedObject"),cr=Xn("./zipObject"),lr=Xn("./generate"),hr=Xn("./nodejsUtils"),fr=Xn("./nodejs/NodejsStreamInputAdapter"),gr=function(_r){_r.slice(-1)==="/"&&(_r=_r.substring(0,_r.length-1));var kr=_r.lastIndexOf("/");return 0<kr?_r.substring(0,kr):""},ur=function(_r){return _r.slice(-1)!=="/"&&(_r+="/"),_r},dr=function(_r,kr){return kr=kr!==void 0?kr:or.createFolders,_r=ur(_r),this.files[_r]||tr.call(this,_r,null,{dir:!0,createFolders:kr}),this.files[_r]};function yr(_r){return Object.prototype.toString.call(_r)==="[object RegExp]"}var vr={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(_r){var kr,Cr,br;for(kr in this.files)br=this.files[kr],(Cr=kr.slice(this.root.length,kr.length))&&kr.slice(0,this.root.length)===this.root&&_r(Cr,br)},filter:function(_r){var kr=[];return this.forEach(function(Cr,br){_r(Cr,br)&&kr.push(br)}),kr},file:function(_r,kr,Cr){if(arguments.length!==1)return _r=this.root+_r,tr.call(this,_r,kr,Cr),this;if(yr(_r)){var br=_r;return this.filter(function($r,Mr){return!Mr.dir&&br.test($r)})}var xr=this.files[this.root+_r];return xr&&!xr.dir?xr:null},folder:function(_r){if(!_r)return this;if(yr(_r))return this.filter(function(xr,$r){return $r.dir&&_r.test(xr)});var kr=this.root+_r,Cr=dr.call(this,kr),br=this.clone();return br.root=Cr.name,br},remove:function(_r){_r=this.root+_r;var kr=this.files[_r];if(kr||(_r.slice(-1)!=="/"&&(_r+="/"),kr=this.files[_r]),kr&&!kr.dir)delete this.files[_r];else for(var Cr=this.filter(function(xr,$r){return $r.name.slice(0,_r.length)===_r}),br=0;br<Cr.length;br++)delete this.files[Cr[br].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(_r){var kr,Cr={};try{if((Cr=rr.extend(_r||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:nr.utf8encode})).type=Cr.type.toLowerCase(),Cr.compression=Cr.compression.toUpperCase(),Cr.type==="binarystring"&&(Cr.type="string"),!Cr.type)throw new Error("No output type specified.");rr.checkSupport(Cr.type),Cr.platform!=="darwin"&&Cr.platform!=="freebsd"&&Cr.platform!=="linux"&&Cr.platform!=="sunos"||(Cr.platform="UNIX"),Cr.platform==="win32"&&(Cr.platform="DOS");var br=Cr.comment||this.comment||"";kr=lr.generateWorker(this,Cr,br)}catch(xr){(kr=new sr("error")).error(xr)}return new ir(kr,Cr.type||"string",Cr.mimeType)},generateAsync:function(_r,kr){return this.generateInternalStream(_r).accumulate(kr)},generateNodeStream:function(_r,kr){return(_r=_r||{}).type||(_r.type="nodebuffer"),this.generateInternalStream(_r).toNodejsStream(kr)}};Qn.exports=vr},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Xn,Qn,er){Qn.exports=Xn("stream")},{stream:void 0}],17:[function(Xn,Qn,er){var tr=Xn("./DataReader");function nr(rr){tr.call(this,rr);for(var sr=0;sr<this.data.length;sr++)rr[sr]=255&rr[sr]}Xn("../utils").inherits(nr,tr),nr.prototype.byteAt=function(rr){return this.data[this.zero+rr]},nr.prototype.lastIndexOfSignature=function(rr){for(var sr=rr.charCodeAt(0),ir=rr.charCodeAt(1),or=rr.charCodeAt(2),ar=rr.charCodeAt(3),cr=this.length-4;0<=cr;--cr)if(this.data[cr]===sr&&this.data[cr+1]===ir&&this.data[cr+2]===or&&this.data[cr+3]===ar)return cr-this.zero;return-1},nr.prototype.readAndCheckSignature=function(rr){var sr=rr.charCodeAt(0),ir=rr.charCodeAt(1),or=rr.charCodeAt(2),ar=rr.charCodeAt(3),cr=this.readData(4);return sr===cr[0]&&ir===cr[1]&&or===cr[2]&&ar===cr[3]},nr.prototype.readData=function(rr){if(this.checkOffset(rr),rr===0)return[];var sr=this.data.slice(this.zero+this.index,this.zero+this.index+rr);return this.index+=rr,sr},Qn.exports=nr},{"../utils":32,"./DataReader":18}],18:[function(Xn,Qn,er){var tr=Xn("../utils");function nr(rr){this.data=rr,this.length=rr.length,this.index=0,this.zero=0}nr.prototype={checkOffset:function(rr){this.checkIndex(this.index+rr)},checkIndex:function(rr){if(this.length<this.zero+rr||rr<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+rr+"). Corrupted zip ?")},setIndex:function(rr){this.checkIndex(rr),this.index=rr},skip:function(rr){this.setIndex(this.index+rr)},byteAt:function(){},readInt:function(rr){var sr,ir=0;for(this.checkOffset(rr),sr=this.index+rr-1;sr>=this.index;sr--)ir=(ir<<8)+this.byteAt(sr);return this.index+=rr,ir},readString:function(rr){return tr.transformTo("string",this.readData(rr))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var rr=this.readInt(4);return new Date(Date.UTC(1980+(rr>>25&127),(rr>>21&15)-1,rr>>16&31,rr>>11&31,rr>>5&63,(31&rr)<<1))}},Qn.exports=nr},{"../utils":32}],19:[function(Xn,Qn,er){var tr=Xn("./Uint8ArrayReader");function nr(rr){tr.call(this,rr)}Xn("../utils").inherits(nr,tr),nr.prototype.readData=function(rr){this.checkOffset(rr);var sr=this.data.slice(this.zero+this.index,this.zero+this.index+rr);return this.index+=rr,sr},Qn.exports=nr},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Xn,Qn,er){var tr=Xn("./DataReader");function nr(rr){tr.call(this,rr)}Xn("../utils").inherits(nr,tr),nr.prototype.byteAt=function(rr){return this.data.charCodeAt(this.zero+rr)},nr.prototype.lastIndexOfSignature=function(rr){return this.data.lastIndexOf(rr)-this.zero},nr.prototype.readAndCheckSignature=function(rr){return rr===this.readData(4)},nr.prototype.readData=function(rr){this.checkOffset(rr);var sr=this.data.slice(this.zero+this.index,this.zero+this.index+rr);return this.index+=rr,sr},Qn.exports=nr},{"../utils":32,"./DataReader":18}],21:[function(Xn,Qn,er){var tr=Xn("./ArrayReader");function nr(rr){tr.call(this,rr)}Xn("../utils").inherits(nr,tr),nr.prototype.readData=function(rr){if(this.checkOffset(rr),rr===0)return new Uint8Array(0);var sr=this.data.subarray(this.zero+this.index,this.zero+this.index+rr);return this.index+=rr,sr},Qn.exports=nr},{"../utils":32,"./ArrayReader":17}],22:[function(Xn,Qn,er){var tr=Xn("../utils"),nr=Xn("../support"),rr=Xn("./ArrayReader"),sr=Xn("./StringReader"),ir=Xn("./NodeBufferReader"),or=Xn("./Uint8ArrayReader");Qn.exports=function(ar){var cr=tr.getTypeOf(ar);return tr.checkSupport(cr),cr!=="string"||nr.uint8array?cr==="nodebuffer"?new ir(ar):nr.uint8array?new or(tr.transformTo("uint8array",ar)):new rr(tr.transformTo("array",ar)):new sr(ar)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Xn,Qn,er){er.LOCAL_FILE_HEADER="PK",er.CENTRAL_FILE_HEADER="PK",er.CENTRAL_DIRECTORY_END="PK",er.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",er.ZIP64_CENTRAL_DIRECTORY_END="PK",er.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Xn,Qn,er){var tr=Xn("./GenericWorker"),nr=Xn("../utils");function rr(sr){tr.call(this,"ConvertWorker to "+sr),this.destType=sr}nr.inherits(rr,tr),rr.prototype.processChunk=function(sr){this.push({data:nr.transformTo(this.destType,sr.data),meta:sr.meta})},Qn.exports=rr},{"../utils":32,"./GenericWorker":28}],25:[function(Xn,Qn,er){var tr=Xn("./GenericWorker"),nr=Xn("../crc32");function rr(){tr.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Xn("../utils").inherits(rr,tr),rr.prototype.processChunk=function(sr){this.streamInfo.crc32=nr(sr.data,this.streamInfo.crc32||0),this.push(sr)},Qn.exports=rr},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Xn,Qn,er){var tr=Xn("../utils"),nr=Xn("./GenericWorker");function rr(sr){nr.call(this,"DataLengthProbe for "+sr),this.propName=sr,this.withStreamInfo(sr,0)}tr.inherits(rr,nr),rr.prototype.processChunk=function(sr){if(sr){var ir=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ir+sr.data.length}nr.prototype.processChunk.call(this,sr)},Qn.exports=rr},{"../utils":32,"./GenericWorker":28}],27:[function(Xn,Qn,er){var tr=Xn("../utils"),nr=Xn("./GenericWorker");function rr(sr){nr.call(this,"DataWorker");var ir=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,sr.then(function(or){ir.dataIsReady=!0,ir.data=or,ir.max=or&&or.length||0,ir.type=tr.getTypeOf(or),ir.isPaused||ir._tickAndRepeat()},function(or){ir.error(or)})}tr.inherits(rr,nr),rr.prototype.cleanUp=function(){nr.prototype.cleanUp.call(this),this.data=null},rr.prototype.resume=function(){return!!nr.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,tr.delay(this._tickAndRepeat,[],this)),!0)},rr.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(tr.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},rr.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var sr=null,ir=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":sr=this.data.substring(this.index,ir);break;case"uint8array":sr=this.data.subarray(this.index,ir);break;case"array":case"nodebuffer":sr=this.data.slice(this.index,ir)}return this.index=ir,this.push({data:sr,meta:{percent:this.max?this.index/this.max*100:0}})},Qn.exports=rr},{"../utils":32,"./GenericWorker":28}],28:[function(Xn,Qn,er){function tr(nr){this.name=nr||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}tr.prototype={push:function(nr){this.emit("data",nr)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(nr){this.emit("error",nr)}return!0},error:function(nr){return!this.isFinished&&(this.isPaused?this.generatedError=nr:(this.isFinished=!0,this.emit("error",nr),this.previous&&this.previous.error(nr),this.cleanUp()),!0)},on:function(nr,rr){return this._listeners[nr].push(rr),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(nr,rr){if(this._listeners[nr])for(var sr=0;sr<this._listeners[nr].length;sr++)this._listeners[nr][sr].call(this,rr)},pipe:function(nr){return nr.registerPrevious(this)},registerPrevious:function(nr){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=nr.streamInfo,this.mergeStreamInfo(),this.previous=nr;var rr=this;return nr.on("data",function(sr){rr.processChunk(sr)}),nr.on("end",function(){rr.end()}),nr.on("error",function(sr){rr.error(sr)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var nr=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),nr=!0),this.previous&&this.previous.resume(),!nr},flush:function(){},processChunk:function(nr){this.push(nr)},withStreamInfo:function(nr,rr){return this.extraStreamInfo[nr]=rr,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var nr in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,nr)&&(this.streamInfo[nr]=this.extraStreamInfo[nr])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var nr="Worker "+this.name;return this.previous?this.previous+" -> "+nr:nr}},Qn.exports=tr},{}],29:[function(Xn,Qn,er){var tr=Xn("../utils"),nr=Xn("./ConvertWorker"),rr=Xn("./GenericWorker"),sr=Xn("../base64"),ir=Xn("../support"),or=Xn("../external"),ar=null;if(ir.nodestream)try{ar=Xn("../nodejs/NodejsStreamOutputAdapter")}catch{}function cr(hr,fr){return new or.Promise(function(gr,ur){var dr=[],yr=hr._internalType,vr=hr._outputType,_r=hr._mimeType;hr.on("data",function(kr,Cr){dr.push(kr),fr&&fr(Cr)}).on("error",function(kr){dr=[],ur(kr)}).on("end",function(){try{var kr=function(Cr,br,xr){switch(Cr){case"blob":return tr.newBlob(tr.transformTo("arraybuffer",br),xr);case"base64":return sr.encode(br);default:return tr.transformTo(Cr,br)}}(vr,function(Cr,br){var xr,$r=0,Mr=null,Ar=0;for(xr=0;xr<br.length;xr++)Ar+=br[xr].length;switch(Cr){case"string":return br.join("");case"array":return Array.prototype.concat.apply([],br);case"uint8array":for(Mr=new Uint8Array(Ar),xr=0;xr<br.length;xr++)Mr.set(br[xr],$r),$r+=br[xr].length;return Mr;case"nodebuffer":return Buffer.concat(br);default:throw new Error("concat : unsupported type '"+Cr+"'")}}(yr,dr),_r);gr(kr)}catch(Cr){ur(Cr)}dr=[]}).resume()})}function lr(hr,fr,gr){var ur=fr;switch(fr){case"blob":case"arraybuffer":ur="uint8array";break;case"base64":ur="string"}try{this._internalType=ur,this._outputType=fr,this._mimeType=gr,tr.checkSupport(ur),this._worker=hr.pipe(new nr(ur)),hr.lock()}catch(dr){this._worker=new rr("error"),this._worker.error(dr)}}lr.prototype={accumulate:function(hr){return cr(this,hr)},on:function(hr,fr){var gr=this;return hr==="data"?this._worker.on(hr,function(ur){fr.call(gr,ur.data,ur.meta)}):this._worker.on(hr,function(){tr.delay(fr,arguments,gr)}),this},resume:function(){return tr.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(hr){if(tr.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new ar(this,{objectMode:this._outputType!=="nodebuffer"},hr)}},Qn.exports=lr},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Xn,Qn,er){if(er.base64=!0,er.array=!0,er.string=!0,er.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",er.nodebuffer=typeof Buffer<"u",er.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")er.blob=!1;else{var tr=new ArrayBuffer(0);try{er.blob=new Blob([tr],{type:"application/zip"}).size===0}catch{try{var nr=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);nr.append(tr),er.blob=nr.getBlob("application/zip").size===0}catch{er.blob=!1}}}try{er.nodestream=!!Xn("readable-stream").Readable}catch{er.nodestream=!1}},{"readable-stream":16}],31:[function(Xn,Qn,er){for(var tr=Xn("./utils"),nr=Xn("./support"),rr=Xn("./nodejsUtils"),sr=Xn("./stream/GenericWorker"),ir=new Array(256),or=0;or<256;or++)ir[or]=252<=or?6:248<=or?5:240<=or?4:224<=or?3:192<=or?2:1;ir[254]=ir[254]=1;function ar(){sr.call(this,"utf-8 decode"),this.leftOver=null}function cr(){sr.call(this,"utf-8 encode")}er.utf8encode=function(lr){return nr.nodebuffer?rr.newBufferFrom(lr,"utf-8"):function(hr){var fr,gr,ur,dr,yr,vr=hr.length,_r=0;for(dr=0;dr<vr;dr++)(64512&(gr=hr.charCodeAt(dr)))==55296&&dr+1<vr&&(64512&(ur=hr.charCodeAt(dr+1)))==56320&&(gr=65536+(gr-55296<<10)+(ur-56320),dr++),_r+=gr<128?1:gr<2048?2:gr<65536?3:4;for(fr=nr.uint8array?new Uint8Array(_r):new Array(_r),dr=yr=0;yr<_r;dr++)(64512&(gr=hr.charCodeAt(dr)))==55296&&dr+1<vr&&(64512&(ur=hr.charCodeAt(dr+1)))==56320&&(gr=65536+(gr-55296<<10)+(ur-56320),dr++),gr<128?fr[yr++]=gr:(gr<2048?fr[yr++]=192|gr>>>6:(gr<65536?fr[yr++]=224|gr>>>12:(fr[yr++]=240|gr>>>18,fr[yr++]=128|gr>>>12&63),fr[yr++]=128|gr>>>6&63),fr[yr++]=128|63&gr);return fr}(lr)},er.utf8decode=function(lr){return nr.nodebuffer?tr.transformTo("nodebuffer",lr).toString("utf-8"):function(hr){var fr,gr,ur,dr,yr=hr.length,vr=new Array(2*yr);for(fr=gr=0;fr<yr;)if((ur=hr[fr++])<128)vr[gr++]=ur;else if(4<(dr=ir[ur]))vr[gr++]=65533,fr+=dr-1;else{for(ur&=dr===2?31:dr===3?15:7;1<dr&&fr<yr;)ur=ur<<6|63&hr[fr++],dr--;1<dr?vr[gr++]=65533:ur<65536?vr[gr++]=ur:(ur-=65536,vr[gr++]=55296|ur>>10&1023,vr[gr++]=56320|1023&ur)}return vr.length!==gr&&(vr.subarray?vr=vr.subarray(0,gr):vr.length=gr),tr.applyFromCharCode(vr)}(lr=tr.transformTo(nr.uint8array?"uint8array":"array",lr))},tr.inherits(ar,sr),ar.prototype.processChunk=function(lr){var hr=tr.transformTo(nr.uint8array?"uint8array":"array",lr.data);if(this.leftOver&&this.leftOver.length){if(nr.uint8array){var fr=hr;(hr=new Uint8Array(fr.length+this.leftOver.length)).set(this.leftOver,0),hr.set(fr,this.leftOver.length)}else hr=this.leftOver.concat(hr);this.leftOver=null}var gr=function(dr,yr){var vr;for((yr=yr||dr.length)>dr.length&&(yr=dr.length),vr=yr-1;0<=vr&&(192&dr[vr])==128;)vr--;return vr<0||vr===0?yr:vr+ir[dr[vr]]>yr?vr:yr}(hr),ur=hr;gr!==hr.length&&(nr.uint8array?(ur=hr.subarray(0,gr),this.leftOver=hr.subarray(gr,hr.length)):(ur=hr.slice(0,gr),this.leftOver=hr.slice(gr,hr.length))),this.push({data:er.utf8decode(ur),meta:lr.meta})},ar.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:er.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},er.Utf8DecodeWorker=ar,tr.inherits(cr,sr),cr.prototype.processChunk=function(lr){this.push({data:er.utf8encode(lr.data),meta:lr.meta})},er.Utf8EncodeWorker=cr},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Xn,Qn,er){var tr=Xn("./support"),nr=Xn("./base64"),rr=Xn("./nodejsUtils"),sr=Xn("./external");function ir(fr){return fr}function or(fr,gr){for(var ur=0;ur<fr.length;++ur)gr[ur]=255&fr.charCodeAt(ur);return gr}Xn("setimmediate"),er.newBlob=function(fr,gr){er.checkSupport("blob");try{return new Blob([fr],{type:gr})}catch{try{var ur=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return ur.append(fr),ur.getBlob(gr)}catch{throw new Error("Bug : can't construct the Blob.")}}};var ar={stringifyByChunk:function(fr,gr,ur){var dr=[],yr=0,vr=fr.length;if(vr<=ur)return String.fromCharCode.apply(null,fr);for(;yr<vr;)gr==="array"||gr==="nodebuffer"?dr.push(String.fromCharCode.apply(null,fr.slice(yr,Math.min(yr+ur,vr)))):dr.push(String.fromCharCode.apply(null,fr.subarray(yr,Math.min(yr+ur,vr)))),yr+=ur;return dr.join("")},stringifyByChar:function(fr){for(var gr="",ur=0;ur<fr.length;ur++)gr+=String.fromCharCode(fr[ur]);return gr},applyCanBeUsed:{uint8array:function(){try{return tr.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return tr.nodebuffer&&String.fromCharCode.apply(null,rr.allocBuffer(1)).length===1}catch{return!1}}()}};function cr(fr){var gr=65536,ur=er.getTypeOf(fr),dr=!0;if(ur==="uint8array"?dr=ar.applyCanBeUsed.uint8array:ur==="nodebuffer"&&(dr=ar.applyCanBeUsed.nodebuffer),dr)for(;1<gr;)try{return ar.stringifyByChunk(fr,ur,gr)}catch{gr=Math.floor(gr/2)}return ar.stringifyByChar(fr)}function lr(fr,gr){for(var ur=0;ur<fr.length;ur++)gr[ur]=fr[ur];return gr}er.applyFromCharCode=cr;var hr={};hr.string={string:ir,array:function(fr){return or(fr,new Array(fr.length))},arraybuffer:function(fr){return hr.string.uint8array(fr).buffer},uint8array:function(fr){return or(fr,new Uint8Array(fr.length))},nodebuffer:function(fr){return or(fr,rr.allocBuffer(fr.length))}},hr.array={string:cr,array:ir,arraybuffer:function(fr){return new Uint8Array(fr).buffer},uint8array:function(fr){return new Uint8Array(fr)},nodebuffer:function(fr){return rr.newBufferFrom(fr)}},hr.arraybuffer={string:function(fr){return cr(new Uint8Array(fr))},array:function(fr){return lr(new Uint8Array(fr),new Array(fr.byteLength))},arraybuffer:ir,uint8array:function(fr){return new Uint8Array(fr)},nodebuffer:function(fr){return rr.newBufferFrom(new Uint8Array(fr))}},hr.uint8array={string:cr,array:function(fr){return lr(fr,new Array(fr.length))},arraybuffer:function(fr){return fr.buffer},uint8array:ir,nodebuffer:function(fr){return rr.newBufferFrom(fr)}},hr.nodebuffer={string:cr,array:function(fr){return lr(fr,new Array(fr.length))},arraybuffer:function(fr){return hr.nodebuffer.uint8array(fr).buffer},uint8array:function(fr){return lr(fr,new Uint8Array(fr.length))},nodebuffer:ir},er.transformTo=function(fr,gr){if(gr=gr||"",!fr)return gr;er.checkSupport(fr);var ur=er.getTypeOf(gr);return hr[ur][fr](gr)},er.resolve=function(fr){for(var gr=fr.split("/"),ur=[],dr=0;dr<gr.length;dr++){var yr=gr[dr];yr==="."||yr===""&&dr!==0&&dr!==gr.length-1||(yr===".."?ur.pop():ur.push(yr))}return ur.join("/")},er.getTypeOf=function(fr){return typeof fr=="string"?"string":Object.prototype.toString.call(fr)==="[object Array]"?"array":tr.nodebuffer&&rr.isBuffer(fr)?"nodebuffer":tr.uint8array&&fr instanceof Uint8Array?"uint8array":tr.arraybuffer&&fr instanceof ArrayBuffer?"arraybuffer":void 0},er.checkSupport=function(fr){if(!tr[fr.toLowerCase()])throw new Error(fr+" is not supported by this platform")},er.MAX_VALUE_16BITS=65535,er.MAX_VALUE_32BITS=-1,er.pretty=function(fr){var gr,ur,dr="";for(ur=0;ur<(fr||"").length;ur++)dr+="\\x"+((gr=fr.charCodeAt(ur))<16?"0":"")+gr.toString(16).toUpperCase();return dr},er.delay=function(fr,gr,ur){setImmediate(function(){fr.apply(ur||null,gr||[])})},er.inherits=function(fr,gr){function ur(){}ur.prototype=gr.prototype,fr.prototype=new ur},er.extend=function(){var fr,gr,ur={};for(fr=0;fr<arguments.length;fr++)for(gr in arguments[fr])Object.prototype.hasOwnProperty.call(arguments[fr],gr)&&ur[gr]===void 0&&(ur[gr]=arguments[fr][gr]);return ur},er.prepareContent=function(fr,gr,ur,dr,yr){return sr.Promise.resolve(gr).then(function(vr){return tr.blob&&(vr instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(vr))!==-1)&&typeof FileReader<"u"?new sr.Promise(function(_r,kr){var Cr=new FileReader;Cr.onload=function(br){_r(br.target.result)},Cr.onerror=function(br){kr(br.target.error)},Cr.readAsArrayBuffer(vr)}):vr}).then(function(vr){var _r=er.getTypeOf(vr);return _r?(_r==="arraybuffer"?vr=er.transformTo("uint8array",vr):_r==="string"&&(yr?vr=nr.decode(vr):ur&&dr!==!0&&(vr=function(kr){return or(kr,tr.uint8array?new Uint8Array(kr.length):new Array(kr.length))}(vr))),vr):sr.Promise.reject(new Error("Can't read the data of '"+fr+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(Xn,Qn,er){var tr=Xn("./reader/readerFor"),nr=Xn("./utils"),rr=Xn("./signature"),sr=Xn("./zipEntry"),ir=Xn("./support");function or(ar){this.files=[],this.loadOptions=ar}or.prototype={checkSignature:function(ar){if(!this.reader.readAndCheckSignature(ar)){this.reader.index-=4;var cr=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+nr.pretty(cr)+", expected "+nr.pretty(ar)+")")}},isSignature:function(ar,cr){var lr=this.reader.index;this.reader.setIndex(ar);var hr=this.reader.readString(4)===cr;return this.reader.setIndex(lr),hr},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var ar=this.reader.readData(this.zipCommentLength),cr=ir.uint8array?"uint8array":"array",lr=nr.transformTo(cr,ar);this.zipComment=this.loadOptions.decodeFileName(lr)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var ar,cr,lr,hr=this.zip64EndOfCentralSize-44;0<hr;)ar=this.reader.readInt(2),cr=this.reader.readInt(4),lr=this.reader.readData(cr),this.zip64ExtensibleData[ar]={id:ar,length:cr,value:lr}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var ar,cr;for(ar=0;ar<this.files.length;ar++)cr=this.files[ar],this.reader.setIndex(cr.localHeaderOffset),this.checkSignature(rr.LOCAL_FILE_HEADER),cr.readLocalPart(this.reader),cr.handleUTF8(),cr.processAttributes()},readCentralDir:function(){var ar;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(rr.CENTRAL_FILE_HEADER);)(ar=new sr({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(ar);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var ar=this.reader.lastIndexOfSignature(rr.CENTRAL_DIRECTORY_END);if(ar<0)throw this.isSignature(0,rr.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(ar);var cr=ar;if(this.checkSignature(rr.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===nr.MAX_VALUE_16BITS||this.diskWithCentralDirStart===nr.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===nr.MAX_VALUE_16BITS||this.centralDirRecords===nr.MAX_VALUE_16BITS||this.centralDirSize===nr.MAX_VALUE_32BITS||this.centralDirOffset===nr.MAX_VALUE_32BITS){if(this.zip64=!0,(ar=this.reader.lastIndexOfSignature(rr.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(ar),this.checkSignature(rr.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,rr.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(rr.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(rr.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var lr=this.centralDirOffset+this.centralDirSize;this.zip64&&(lr+=20,lr+=12+this.zip64EndOfCentralSize);var hr=cr-lr;if(0<hr)this.isSignature(cr,rr.CENTRAL_FILE_HEADER)||(this.reader.zero=hr);else if(hr<0)throw new Error("Corrupted zip: missing "+Math.abs(hr)+" bytes.")},prepareReader:function(ar){this.reader=tr(ar)},load:function(ar){this.prepareReader(ar),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Qn.exports=or},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(Xn,Qn,er){var tr=Xn("./reader/readerFor"),nr=Xn("./utils"),rr=Xn("./compressedObject"),sr=Xn("./crc32"),ir=Xn("./utf8"),or=Xn("./compressions"),ar=Xn("./support");function cr(lr,hr){this.options=lr,this.loadOptions=hr}cr.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(lr){var hr,fr;if(lr.skip(22),this.fileNameLength=lr.readInt(2),fr=lr.readInt(2),this.fileName=lr.readData(this.fileNameLength),lr.skip(fr),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((hr=function(gr){for(var ur in or)if(Object.prototype.hasOwnProperty.call(or,ur)&&or[ur].magic===gr)return or[ur];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+nr.pretty(this.compressionMethod)+" unknown (inner file : "+nr.transformTo("string",this.fileName)+")");this.decompressed=new rr(this.compressedSize,this.uncompressedSize,this.crc32,hr,lr.readData(this.compressedSize))},readCentralPart:function(lr){this.versionMadeBy=lr.readInt(2),lr.skip(2),this.bitFlag=lr.readInt(2),this.compressionMethod=lr.readString(2),this.date=lr.readDate(),this.crc32=lr.readInt(4),this.compressedSize=lr.readInt(4),this.uncompressedSize=lr.readInt(4);var hr=lr.readInt(2);if(this.extraFieldsLength=lr.readInt(2),this.fileCommentLength=lr.readInt(2),this.diskNumberStart=lr.readInt(2),this.internalFileAttributes=lr.readInt(2),this.externalFileAttributes=lr.readInt(4),this.localHeaderOffset=lr.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");lr.skip(hr),this.readExtraFields(lr),this.parseZIP64ExtraField(lr),this.fileComment=lr.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var lr=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),lr==0&&(this.dosPermissions=63&this.externalFileAttributes),lr==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var lr=tr(this.extraFields[1].value);this.uncompressedSize===nr.MAX_VALUE_32BITS&&(this.uncompressedSize=lr.readInt(8)),this.compressedSize===nr.MAX_VALUE_32BITS&&(this.compressedSize=lr.readInt(8)),this.localHeaderOffset===nr.MAX_VALUE_32BITS&&(this.localHeaderOffset=lr.readInt(8)),this.diskNumberStart===nr.MAX_VALUE_32BITS&&(this.diskNumberStart=lr.readInt(4))}},readExtraFields:function(lr){var hr,fr,gr,ur=lr.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});lr.index+4<ur;)hr=lr.readInt(2),fr=lr.readInt(2),gr=lr.readData(fr),this.extraFields[hr]={id:hr,length:fr,value:gr};lr.setIndex(ur)},handleUTF8:function(){var lr=ar.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=ir.utf8decode(this.fileName),this.fileCommentStr=ir.utf8decode(this.fileComment);else{var hr=this.findExtraFieldUnicodePath();if(hr!==null)this.fileNameStr=hr;else{var fr=nr.transformTo(lr,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(fr)}var gr=this.findExtraFieldUnicodeComment();if(gr!==null)this.fileCommentStr=gr;else{var ur=nr.transformTo(lr,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ur)}}},findExtraFieldUnicodePath:function(){var lr=this.extraFields[28789];if(lr){var hr=tr(lr.value);return hr.readInt(1)!==1||sr(this.fileName)!==hr.readInt(4)?null:ir.utf8decode(hr.readData(lr.length-5))}return null},findExtraFieldUnicodeComment:function(){var lr=this.extraFields[25461];if(lr){var hr=tr(lr.value);return hr.readInt(1)!==1||sr(this.fileComment)!==hr.readInt(4)?null:ir.utf8decode(hr.readData(lr.length-5))}return null}},Qn.exports=cr},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Xn,Qn,er){function tr(hr,fr,gr){this.name=hr,this.dir=gr.dir,this.date=gr.date,this.comment=gr.comment,this.unixPermissions=gr.unixPermissions,this.dosPermissions=gr.dosPermissions,this._data=fr,this._dataBinary=gr.binary,this.options={compression:gr.compression,compressionOptions:gr.compressionOptions}}var nr=Xn("./stream/StreamHelper"),rr=Xn("./stream/DataWorker"),sr=Xn("./utf8"),ir=Xn("./compressedObject"),or=Xn("./stream/GenericWorker");tr.prototype={internalStream:function(hr){var fr=null,gr="string";try{if(!hr)throw new Error("No output type specified.");var ur=(gr=hr.toLowerCase())==="string"||gr==="text";gr!=="binarystring"&&gr!=="text"||(gr="string"),fr=this._decompressWorker();var dr=!this._dataBinary;dr&&!ur&&(fr=fr.pipe(new sr.Utf8EncodeWorker)),!dr&&ur&&(fr=fr.pipe(new sr.Utf8DecodeWorker))}catch(yr){(fr=new or("error")).error(yr)}return new nr(fr,gr,"")},async:function(hr,fr){return this.internalStream(hr).accumulate(fr)},nodeStream:function(hr,fr){return this.internalStream(hr||"nodebuffer").toNodejsStream(fr)},_compressWorker:function(hr,fr){if(this._data instanceof ir&&this._data.compression.magic===hr.magic)return this._data.getCompressedWorker();var gr=this._decompressWorker();return this._dataBinary||(gr=gr.pipe(new sr.Utf8EncodeWorker)),ir.createWorkerFrom(gr,hr,fr)},_decompressWorker:function(){return this._data instanceof ir?this._data.getContentWorker():this._data instanceof or?this._data:new rr(this._data)}};for(var ar=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],cr=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},lr=0;lr<ar.length;lr++)tr.prototype[ar[lr]]=cr;Qn.exports=tr},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Xn,Qn,er){(function(tr){var nr,rr,sr=tr.MutationObserver||tr.WebKitMutationObserver;if(sr){var ir=0,or=new sr(hr),ar=tr.document.createTextNode("");or.observe(ar,{characterData:!0}),nr=function(){ar.data=ir=++ir%2}}else if(tr.setImmediate||tr.MessageChannel===void 0)nr="document"in tr&&"onreadystatechange"in tr.document.createElement("script")?function(){var fr=tr.document.createElement("script");fr.onreadystatechange=function(){hr(),fr.onreadystatechange=null,fr.parentNode.removeChild(fr),fr=null},tr.document.documentElement.appendChild(fr)}:function(){setTimeout(hr,0)};else{var cr=new tr.MessageChannel;cr.port1.onmessage=hr,nr=function(){cr.port2.postMessage(0)}}var lr=[];function hr(){var fr,gr;rr=!0;for(var ur=lr.length;ur;){for(gr=lr,lr=[],fr=-1;++fr<ur;)gr[fr]();ur=lr.length}rr=!1}Qn.exports=function(fr){lr.push(fr)!==1||rr||nr()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(Xn,Qn,er){var tr=Xn("immediate");function nr(){}var rr={},sr=["REJECTED"],ir=["FULFILLED"],or=["PENDING"];function ar(ur){if(typeof ur!="function")throw new TypeError("resolver must be a function");this.state=or,this.queue=[],this.outcome=void 0,ur!==nr&&fr(this,ur)}function cr(ur,dr,yr){this.promise=ur,typeof dr=="function"&&(this.onFulfilled=dr,this.callFulfilled=this.otherCallFulfilled),typeof yr=="function"&&(this.onRejected=yr,this.callRejected=this.otherCallRejected)}function lr(ur,dr,yr){tr(function(){var vr;try{vr=dr(yr)}catch(_r){return rr.reject(ur,_r)}vr===ur?rr.reject(ur,new TypeError("Cannot resolve promise with itself")):rr.resolve(ur,vr)})}function hr(ur){var dr=ur&&ur.then;if(ur&&(typeof ur=="object"||typeof ur=="function")&&typeof dr=="function")return function(){dr.apply(ur,arguments)}}function fr(ur,dr){var yr=!1;function vr(Cr){yr||(yr=!0,rr.reject(ur,Cr))}function _r(Cr){yr||(yr=!0,rr.resolve(ur,Cr))}var kr=gr(function(){dr(_r,vr)});kr.status==="error"&&vr(kr.value)}function gr(ur,dr){var yr={};try{yr.value=ur(dr),yr.status="success"}catch(vr){yr.status="error",yr.value=vr}return yr}(Qn.exports=ar).prototype.finally=function(ur){if(typeof ur!="function")return this;var dr=this.constructor;return this.then(function(yr){return dr.resolve(ur()).then(function(){return yr})},function(yr){return dr.resolve(ur()).then(function(){throw yr})})},ar.prototype.catch=function(ur){return this.then(null,ur)},ar.prototype.then=function(ur,dr){if(typeof ur!="function"&&this.state===ir||typeof dr!="function"&&this.state===sr)return this;var yr=new this.constructor(nr);return this.state!==or?lr(yr,this.state===ir?ur:dr,this.outcome):this.queue.push(new cr(yr,ur,dr)),yr},cr.prototype.callFulfilled=function(ur){rr.resolve(this.promise,ur)},cr.prototype.otherCallFulfilled=function(ur){lr(this.promise,this.onFulfilled,ur)},cr.prototype.callRejected=function(ur){rr.reject(this.promise,ur)},cr.prototype.otherCallRejected=function(ur){lr(this.promise,this.onRejected,ur)},rr.resolve=function(ur,dr){var yr=gr(hr,dr);if(yr.status==="error")return rr.reject(ur,yr.value);var vr=yr.value;if(vr)fr(ur,vr);else{ur.state=ir,ur.outcome=dr;for(var _r=-1,kr=ur.queue.length;++_r<kr;)ur.queue[_r].callFulfilled(dr)}return ur},rr.reject=function(ur,dr){ur.state=sr,ur.outcome=dr;for(var yr=-1,vr=ur.queue.length;++yr<vr;)ur.queue[yr].callRejected(dr);return ur},ar.resolve=function(ur){return ur instanceof this?ur:rr.resolve(new this(nr),ur)},ar.reject=function(ur){var dr=new this(nr);return rr.reject(dr,ur)},ar.all=function(ur){var dr=this;if(Object.prototype.toString.call(ur)!=="[object Array]")return this.reject(new TypeError("must be an array"));var yr=ur.length,vr=!1;if(!yr)return this.resolve([]);for(var _r=new Array(yr),kr=0,Cr=-1,br=new this(nr);++Cr<yr;)xr(ur[Cr],Cr);return br;function xr($r,Mr){dr.resolve($r).then(function(Ar){_r[Mr]=Ar,++kr!==yr||vr||(vr=!0,rr.resolve(br,_r))},function(Ar){vr||(vr=!0,rr.reject(br,Ar))})}},ar.race=function(ur){var dr=this;if(Object.prototype.toString.call(ur)!=="[object Array]")return this.reject(new TypeError("must be an array"));var yr=ur.length,vr=!1;if(!yr)return this.resolve([]);for(var _r=-1,kr=new this(nr);++_r<yr;)Cr=ur[_r],dr.resolve(Cr).then(function(br){vr||(vr=!0,rr.resolve(kr,br))},function(br){vr||(vr=!0,rr.reject(kr,br))});var Cr;return kr}},{immediate:36}],38:[function(Xn,Qn,er){var tr={};(0,Xn("./lib/utils/common").assign)(tr,Xn("./lib/deflate"),Xn("./lib/inflate"),Xn("./lib/zlib/constants")),Qn.exports=tr},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Xn,Qn,er){var tr=Xn("./zlib/deflate"),nr=Xn("./utils/common"),rr=Xn("./utils/strings"),sr=Xn("./zlib/messages"),ir=Xn("./zlib/zstream"),or=Object.prototype.toString,ar=0,cr=-1,lr=0,hr=8;function fr(ur){if(!(this instanceof fr))return new fr(ur);this.options=nr.assign({level:cr,method:hr,chunkSize:16384,windowBits:15,memLevel:8,strategy:lr,to:""},ur||{});var dr=this.options;dr.raw&&0<dr.windowBits?dr.windowBits=-dr.windowBits:dr.gzip&&0<dr.windowBits&&dr.windowBits<16&&(dr.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ir,this.strm.avail_out=0;var yr=tr.deflateInit2(this.strm,dr.level,dr.method,dr.windowBits,dr.memLevel,dr.strategy);if(yr!==ar)throw new Error(sr[yr]);if(dr.header&&tr.deflateSetHeader(this.strm,dr.header),dr.dictionary){var vr;if(vr=typeof dr.dictionary=="string"?rr.string2buf(dr.dictionary):or.call(dr.dictionary)==="[object ArrayBuffer]"?new Uint8Array(dr.dictionary):dr.dictionary,(yr=tr.deflateSetDictionary(this.strm,vr))!==ar)throw new Error(sr[yr]);this._dict_set=!0}}function gr(ur,dr){var yr=new fr(dr);if(yr.push(ur,!0),yr.err)throw yr.msg||sr[yr.err];return yr.result}fr.prototype.push=function(ur,dr){var yr,vr,_r=this.strm,kr=this.options.chunkSize;if(this.ended)return!1;vr=dr===~~dr?dr:dr===!0?4:0,typeof ur=="string"?_r.input=rr.string2buf(ur):or.call(ur)==="[object ArrayBuffer]"?_r.input=new Uint8Array(ur):_r.input=ur,_r.next_in=0,_r.avail_in=_r.input.length;do{if(_r.avail_out===0&&(_r.output=new nr.Buf8(kr),_r.next_out=0,_r.avail_out=kr),(yr=tr.deflate(_r,vr))!==1&&yr!==ar)return this.onEnd(yr),!(this.ended=!0);_r.avail_out!==0&&(_r.avail_in!==0||vr!==4&&vr!==2)||(this.options.to==="string"?this.onData(rr.buf2binstring(nr.shrinkBuf(_r.output,_r.next_out))):this.onData(nr.shrinkBuf(_r.output,_r.next_out)))}while((0<_r.avail_in||_r.avail_out===0)&&yr!==1);return vr===4?(yr=tr.deflateEnd(this.strm),this.onEnd(yr),this.ended=!0,yr===ar):vr!==2||(this.onEnd(ar),!(_r.avail_out=0))},fr.prototype.onData=function(ur){this.chunks.push(ur)},fr.prototype.onEnd=function(ur){ur===ar&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nr.flattenChunks(this.chunks)),this.chunks=[],this.err=ur,this.msg=this.strm.msg},er.Deflate=fr,er.deflate=gr,er.deflateRaw=function(ur,dr){return(dr=dr||{}).raw=!0,gr(ur,dr)},er.gzip=function(ur,dr){return(dr=dr||{}).gzip=!0,gr(ur,dr)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Xn,Qn,er){var tr=Xn("./zlib/inflate"),nr=Xn("./utils/common"),rr=Xn("./utils/strings"),sr=Xn("./zlib/constants"),ir=Xn("./zlib/messages"),or=Xn("./zlib/zstream"),ar=Xn("./zlib/gzheader"),cr=Object.prototype.toString;function lr(fr){if(!(this instanceof lr))return new lr(fr);this.options=nr.assign({chunkSize:16384,windowBits:0,to:""},fr||{});var gr=this.options;gr.raw&&0<=gr.windowBits&&gr.windowBits<16&&(gr.windowBits=-gr.windowBits,gr.windowBits===0&&(gr.windowBits=-15)),!(0<=gr.windowBits&&gr.windowBits<16)||fr&&fr.windowBits||(gr.windowBits+=32),15<gr.windowBits&&gr.windowBits<48&&!(15&gr.windowBits)&&(gr.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new or,this.strm.avail_out=0;var ur=tr.inflateInit2(this.strm,gr.windowBits);if(ur!==sr.Z_OK)throw new Error(ir[ur]);this.header=new ar,tr.inflateGetHeader(this.strm,this.header)}function hr(fr,gr){var ur=new lr(gr);if(ur.push(fr,!0),ur.err)throw ur.msg||ir[ur.err];return ur.result}lr.prototype.push=function(fr,gr){var ur,dr,yr,vr,_r,kr,Cr=this.strm,br=this.options.chunkSize,xr=this.options.dictionary,$r=!1;if(this.ended)return!1;dr=gr===~~gr?gr:gr===!0?sr.Z_FINISH:sr.Z_NO_FLUSH,typeof fr=="string"?Cr.input=rr.binstring2buf(fr):cr.call(fr)==="[object ArrayBuffer]"?Cr.input=new Uint8Array(fr):Cr.input=fr,Cr.next_in=0,Cr.avail_in=Cr.input.length;do{if(Cr.avail_out===0&&(Cr.output=new nr.Buf8(br),Cr.next_out=0,Cr.avail_out=br),(ur=tr.inflate(Cr,sr.Z_NO_FLUSH))===sr.Z_NEED_DICT&&xr&&(kr=typeof xr=="string"?rr.string2buf(xr):cr.call(xr)==="[object ArrayBuffer]"?new Uint8Array(xr):xr,ur=tr.inflateSetDictionary(this.strm,kr)),ur===sr.Z_BUF_ERROR&&$r===!0&&(ur=sr.Z_OK,$r=!1),ur!==sr.Z_STREAM_END&&ur!==sr.Z_OK)return this.onEnd(ur),!(this.ended=!0);Cr.next_out&&(Cr.avail_out!==0&&ur!==sr.Z_STREAM_END&&(Cr.avail_in!==0||dr!==sr.Z_FINISH&&dr!==sr.Z_SYNC_FLUSH)||(this.options.to==="string"?(yr=rr.utf8border(Cr.output,Cr.next_out),vr=Cr.next_out-yr,_r=rr.buf2string(Cr.output,yr),Cr.next_out=vr,Cr.avail_out=br-vr,vr&&nr.arraySet(Cr.output,Cr.output,yr,vr,0),this.onData(_r)):this.onData(nr.shrinkBuf(Cr.output,Cr.next_out)))),Cr.avail_in===0&&Cr.avail_out===0&&($r=!0)}while((0<Cr.avail_in||Cr.avail_out===0)&&ur!==sr.Z_STREAM_END);return ur===sr.Z_STREAM_END&&(dr=sr.Z_FINISH),dr===sr.Z_FINISH?(ur=tr.inflateEnd(this.strm),this.onEnd(ur),this.ended=!0,ur===sr.Z_OK):dr!==sr.Z_SYNC_FLUSH||(this.onEnd(sr.Z_OK),!(Cr.avail_out=0))},lr.prototype.onData=function(fr){this.chunks.push(fr)},lr.prototype.onEnd=function(fr){fr===sr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nr.flattenChunks(this.chunks)),this.chunks=[],this.err=fr,this.msg=this.strm.msg},er.Inflate=lr,er.inflate=hr,er.inflateRaw=function(fr,gr){return(gr=gr||{}).raw=!0,hr(fr,gr)},er.ungzip=hr},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Xn,Qn,er){var tr=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";er.assign=function(sr){for(var ir=Array.prototype.slice.call(arguments,1);ir.length;){var or=ir.shift();if(or){if(typeof or!="object")throw new TypeError(or+"must be non-object");for(var ar in or)or.hasOwnProperty(ar)&&(sr[ar]=or[ar])}}return sr},er.shrinkBuf=function(sr,ir){return sr.length===ir?sr:sr.subarray?sr.subarray(0,ir):(sr.length=ir,sr)};var nr={arraySet:function(sr,ir,or,ar,cr){if(ir.subarray&&sr.subarray)sr.set(ir.subarray(or,or+ar),cr);else for(var lr=0;lr<ar;lr++)sr[cr+lr]=ir[or+lr]},flattenChunks:function(sr){var ir,or,ar,cr,lr,hr;for(ir=ar=0,or=sr.length;ir<or;ir++)ar+=sr[ir].length;for(hr=new Uint8Array(ar),ir=cr=0,or=sr.length;ir<or;ir++)lr=sr[ir],hr.set(lr,cr),cr+=lr.length;return hr}},rr={arraySet:function(sr,ir,or,ar,cr){for(var lr=0;lr<ar;lr++)sr[cr+lr]=ir[or+lr]},flattenChunks:function(sr){return[].concat.apply([],sr)}};er.setTyped=function(sr){sr?(er.Buf8=Uint8Array,er.Buf16=Uint16Array,er.Buf32=Int32Array,er.assign(er,nr)):(er.Buf8=Array,er.Buf16=Array,er.Buf32=Array,er.assign(er,rr))},er.setTyped(tr)},{}],42:[function(Xn,Qn,er){var tr=Xn("./common"),nr=!0,rr=!0;try{String.fromCharCode.apply(null,[0])}catch{nr=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{rr=!1}for(var sr=new tr.Buf8(256),ir=0;ir<256;ir++)sr[ir]=252<=ir?6:248<=ir?5:240<=ir?4:224<=ir?3:192<=ir?2:1;function or(ar,cr){if(cr<65537&&(ar.subarray&&rr||!ar.subarray&&nr))return String.fromCharCode.apply(null,tr.shrinkBuf(ar,cr));for(var lr="",hr=0;hr<cr;hr++)lr+=String.fromCharCode(ar[hr]);return lr}sr[254]=sr[254]=1,er.string2buf=function(ar){var cr,lr,hr,fr,gr,ur=ar.length,dr=0;for(fr=0;fr<ur;fr++)(64512&(lr=ar.charCodeAt(fr)))==55296&&fr+1<ur&&(64512&(hr=ar.charCodeAt(fr+1)))==56320&&(lr=65536+(lr-55296<<10)+(hr-56320),fr++),dr+=lr<128?1:lr<2048?2:lr<65536?3:4;for(cr=new tr.Buf8(dr),fr=gr=0;gr<dr;fr++)(64512&(lr=ar.charCodeAt(fr)))==55296&&fr+1<ur&&(64512&(hr=ar.charCodeAt(fr+1)))==56320&&(lr=65536+(lr-55296<<10)+(hr-56320),fr++),lr<128?cr[gr++]=lr:(lr<2048?cr[gr++]=192|lr>>>6:(lr<65536?cr[gr++]=224|lr>>>12:(cr[gr++]=240|lr>>>18,cr[gr++]=128|lr>>>12&63),cr[gr++]=128|lr>>>6&63),cr[gr++]=128|63&lr);return cr},er.buf2binstring=function(ar){return or(ar,ar.length)},er.binstring2buf=function(ar){for(var cr=new tr.Buf8(ar.length),lr=0,hr=cr.length;lr<hr;lr++)cr[lr]=ar.charCodeAt(lr);return cr},er.buf2string=function(ar,cr){var lr,hr,fr,gr,ur=cr||ar.length,dr=new Array(2*ur);for(lr=hr=0;lr<ur;)if((fr=ar[lr++])<128)dr[hr++]=fr;else if(4<(gr=sr[fr]))dr[hr++]=65533,lr+=gr-1;else{for(fr&=gr===2?31:gr===3?15:7;1<gr&&lr<ur;)fr=fr<<6|63&ar[lr++],gr--;1<gr?dr[hr++]=65533:fr<65536?dr[hr++]=fr:(fr-=65536,dr[hr++]=55296|fr>>10&1023,dr[hr++]=56320|1023&fr)}return or(dr,hr)},er.utf8border=function(ar,cr){var lr;for((cr=cr||ar.length)>ar.length&&(cr=ar.length),lr=cr-1;0<=lr&&(192&ar[lr])==128;)lr--;return lr<0||lr===0?cr:lr+sr[ar[lr]]>cr?lr:cr}},{"./common":41}],43:[function(Xn,Qn,er){Qn.exports=function(tr,nr,rr,sr){for(var ir=65535&tr|0,or=tr>>>16&65535|0,ar=0;rr!==0;){for(rr-=ar=2e3<rr?2e3:rr;or=or+(ir=ir+nr[sr++]|0)|0,--ar;);ir%=65521,or%=65521}return ir|or<<16|0}},{}],44:[function(Xn,Qn,er){Qn.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Xn,Qn,er){var tr=function(){for(var nr,rr=[],sr=0;sr<256;sr++){nr=sr;for(var ir=0;ir<8;ir++)nr=1&nr?3988292384^nr>>>1:nr>>>1;rr[sr]=nr}return rr}();Qn.exports=function(nr,rr,sr,ir){var or=tr,ar=ir+sr;nr^=-1;for(var cr=ir;cr<ar;cr++)nr=nr>>>8^or[255&(nr^rr[cr])];return-1^nr}},{}],46:[function(Xn,Qn,er){var tr,nr=Xn("../utils/common"),rr=Xn("./trees"),sr=Xn("./adler32"),ir=Xn("./crc32"),or=Xn("./messages"),ar=0,cr=4,lr=0,hr=-2,fr=-1,gr=4,ur=2,dr=8,yr=9,vr=286,_r=30,kr=19,Cr=2*vr+1,br=15,xr=3,$r=258,Mr=$r+xr+1,Ar=42,Rr=113,mr=1,Fr=2,qr=3,jr=4;function es(pr,Pr){return pr.msg=or[Pr],Pr}function Xr(pr){return(pr<<1)-(4<pr?9:0)}function as(pr){for(var Pr=pr.length;0<=--Pr;)pr[Pr]=0}function Vr(pr){var Pr=pr.state,Or=Pr.pending;Or>pr.avail_out&&(Or=pr.avail_out),Or!==0&&(nr.arraySet(pr.output,Pr.pending_buf,Pr.pending_out,Or,pr.next_out),pr.next_out+=Or,Pr.pending_out+=Or,pr.total_out+=Or,pr.avail_out-=Or,Pr.pending-=Or,Pr.pending===0&&(Pr.pending_out=0))}function zr(pr,Pr){rr._tr_flush_block(pr,0<=pr.block_start?pr.block_start:-1,pr.strstart-pr.block_start,Pr),pr.block_start=pr.strstart,Vr(pr.strm)}function ns(pr,Pr){pr.pending_buf[pr.pending++]=Pr}function ss(pr,Pr){pr.pending_buf[pr.pending++]=Pr>>>8&255,pr.pending_buf[pr.pending++]=255&Pr}function ts(pr,Pr){var Or,wr,Er=pr.max_chain_length,Tr=pr.strstart,Dr=pr.prev_length,Br=pr.nice_match,Lr=pr.strstart>pr.w_size-Mr?pr.strstart-(pr.w_size-Mr):0,Hr=pr.window,Jr=pr.w_mask,Wr=pr.prev,rs=pr.strstart+$r,fs=Hr[Tr+Dr-1],os=Hr[Tr+Dr];pr.prev_length>=pr.good_match&&(Er>>=2),Br>pr.lookahead&&(Br=pr.lookahead);do if(Hr[(Or=Pr)+Dr]===os&&Hr[Or+Dr-1]===fs&&Hr[Or]===Hr[Tr]&&Hr[++Or]===Hr[Tr+1]){Tr+=2,Or++;do;while(Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Hr[++Tr]===Hr[++Or]&&Tr<rs);if(wr=$r-(rs-Tr),Tr=rs-$r,Dr<wr){if(pr.match_start=Pr,Br<=(Dr=wr))break;fs=Hr[Tr+Dr-1],os=Hr[Tr+Dr]}}while((Pr=Wr[Pr&Jr])>Lr&&--Er!=0);return Dr<=pr.lookahead?Dr:pr.lookahead}function ls(pr){var Pr,Or,wr,Er,Tr,Dr,Br,Lr,Hr,Jr,Wr=pr.w_size;do{if(Er=pr.window_size-pr.lookahead-pr.strstart,pr.strstart>=Wr+(Wr-Mr)){for(nr.arraySet(pr.window,pr.window,Wr,Wr,0),pr.match_start-=Wr,pr.strstart-=Wr,pr.block_start-=Wr,Pr=Or=pr.hash_size;wr=pr.head[--Pr],pr.head[Pr]=Wr<=wr?wr-Wr:0,--Or;);for(Pr=Or=Wr;wr=pr.prev[--Pr],pr.prev[Pr]=Wr<=wr?wr-Wr:0,--Or;);Er+=Wr}if(pr.strm.avail_in===0)break;if(Dr=pr.strm,Br=pr.window,Lr=pr.strstart+pr.lookahead,Hr=Er,Jr=void 0,Jr=Dr.avail_in,Hr<Jr&&(Jr=Hr),Or=Jr===0?0:(Dr.avail_in-=Jr,nr.arraySet(Br,Dr.input,Dr.next_in,Jr,Lr),Dr.state.wrap===1?Dr.adler=sr(Dr.adler,Br,Jr,Lr):Dr.state.wrap===2&&(Dr.adler=ir(Dr.adler,Br,Jr,Lr)),Dr.next_in+=Jr,Dr.total_in+=Jr,Jr),pr.lookahead+=Or,pr.lookahead+pr.insert>=xr)for(Tr=pr.strstart-pr.insert,pr.ins_h=pr.window[Tr],pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[Tr+1])&pr.hash_mask;pr.insert&&(pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[Tr+xr-1])&pr.hash_mask,pr.prev[Tr&pr.w_mask]=pr.head[pr.ins_h],pr.head[pr.ins_h]=Tr,Tr++,pr.insert--,!(pr.lookahead+pr.insert<xr)););}while(pr.lookahead<Mr&&pr.strm.avail_in!==0)}function Gr(pr,Pr){for(var Or,wr;;){if(pr.lookahead<Mr){if(ls(pr),pr.lookahead<Mr&&Pr===ar)return mr;if(pr.lookahead===0)break}if(Or=0,pr.lookahead>=xr&&(pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[pr.strstart+xr-1])&pr.hash_mask,Or=pr.prev[pr.strstart&pr.w_mask]=pr.head[pr.ins_h],pr.head[pr.ins_h]=pr.strstart),Or!==0&&pr.strstart-Or<=pr.w_size-Mr&&(pr.match_length=ts(pr,Or)),pr.match_length>=xr)if(wr=rr._tr_tally(pr,pr.strstart-pr.match_start,pr.match_length-xr),pr.lookahead-=pr.match_length,pr.match_length<=pr.max_lazy_match&&pr.lookahead>=xr){for(pr.match_length--;pr.strstart++,pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[pr.strstart+xr-1])&pr.hash_mask,Or=pr.prev[pr.strstart&pr.w_mask]=pr.head[pr.ins_h],pr.head[pr.ins_h]=pr.strstart,--pr.match_length!=0;);pr.strstart++}else pr.strstart+=pr.match_length,pr.match_length=0,pr.ins_h=pr.window[pr.strstart],pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[pr.strstart+1])&pr.hash_mask;else wr=rr._tr_tally(pr,0,pr.window[pr.strstart]),pr.lookahead--,pr.strstart++;if(wr&&(zr(pr,!1),pr.strm.avail_out===0))return mr}return pr.insert=pr.strstart<xr-1?pr.strstart:xr-1,Pr===cr?(zr(pr,!0),pr.strm.avail_out===0?qr:jr):pr.last_lit&&(zr(pr,!1),pr.strm.avail_out===0)?mr:Fr}function Yr(pr,Pr){for(var Or,wr,Er;;){if(pr.lookahead<Mr){if(ls(pr),pr.lookahead<Mr&&Pr===ar)return mr;if(pr.lookahead===0)break}if(Or=0,pr.lookahead>=xr&&(pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[pr.strstart+xr-1])&pr.hash_mask,Or=pr.prev[pr.strstart&pr.w_mask]=pr.head[pr.ins_h],pr.head[pr.ins_h]=pr.strstart),pr.prev_length=pr.match_length,pr.prev_match=pr.match_start,pr.match_length=xr-1,Or!==0&&pr.prev_length<pr.max_lazy_match&&pr.strstart-Or<=pr.w_size-Mr&&(pr.match_length=ts(pr,Or),pr.match_length<=5&&(pr.strategy===1||pr.match_length===xr&&4096<pr.strstart-pr.match_start)&&(pr.match_length=xr-1)),pr.prev_length>=xr&&pr.match_length<=pr.prev_length){for(Er=pr.strstart+pr.lookahead-xr,wr=rr._tr_tally(pr,pr.strstart-1-pr.prev_match,pr.prev_length-xr),pr.lookahead-=pr.prev_length-1,pr.prev_length-=2;++pr.strstart<=Er&&(pr.ins_h=(pr.ins_h<<pr.hash_shift^pr.window[pr.strstart+xr-1])&pr.hash_mask,Or=pr.prev[pr.strstart&pr.w_mask]=pr.head[pr.ins_h],pr.head[pr.ins_h]=pr.strstart),--pr.prev_length!=0;);if(pr.match_available=0,pr.match_length=xr-1,pr.strstart++,wr&&(zr(pr,!1),pr.strm.avail_out===0))return mr}else if(pr.match_available){if((wr=rr._tr_tally(pr,0,pr.window[pr.strstart-1]))&&zr(pr,!1),pr.strstart++,pr.lookahead--,pr.strm.avail_out===0)return mr}else pr.match_available=1,pr.strstart++,pr.lookahead--}return pr.match_available&&(wr=rr._tr_tally(pr,0,pr.window[pr.strstart-1]),pr.match_available=0),pr.insert=pr.strstart<xr-1?pr.strstart:xr-1,Pr===cr?(zr(pr,!0),pr.strm.avail_out===0?qr:jr):pr.last_lit&&(zr(pr,!1),pr.strm.avail_out===0)?mr:Fr}function Qr(pr,Pr,Or,wr,Er){this.good_length=pr,this.max_lazy=Pr,this.nice_length=Or,this.max_chain=wr,this.func=Er}function is(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=dr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new nr.Buf16(2*Cr),this.dyn_dtree=new nr.Buf16(2*(2*_r+1)),this.bl_tree=new nr.Buf16(2*(2*kr+1)),as(this.dyn_ltree),as(this.dyn_dtree),as(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new nr.Buf16(br+1),this.heap=new nr.Buf16(2*vr+1),as(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new nr.Buf16(2*vr+1),as(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function us(pr){var Pr;return pr&&pr.state?(pr.total_in=pr.total_out=0,pr.data_type=ur,(Pr=pr.state).pending=0,Pr.pending_out=0,Pr.wrap<0&&(Pr.wrap=-Pr.wrap),Pr.status=Pr.wrap?Ar:Rr,pr.adler=Pr.wrap===2?0:1,Pr.last_flush=ar,rr._tr_init(Pr),lr):es(pr,hr)}function Ir(pr){var Pr=us(pr);return Pr===lr&&function(Or){Or.window_size=2*Or.w_size,as(Or.head),Or.max_lazy_match=tr[Or.level].max_lazy,Or.good_match=tr[Or.level].good_length,Or.nice_match=tr[Or.level].nice_length,Or.max_chain_length=tr[Or.level].max_chain,Or.strstart=0,Or.block_start=0,Or.lookahead=0,Or.insert=0,Or.match_length=Or.prev_length=xr-1,Or.match_available=0,Or.ins_h=0}(pr.state),Pr}function Nr(pr,Pr,Or,wr,Er,Tr){if(!pr)return hr;var Dr=1;if(Pr===fr&&(Pr=6),wr<0?(Dr=0,wr=-wr):15<wr&&(Dr=2,wr-=16),Er<1||yr<Er||Or!==dr||wr<8||15<wr||Pr<0||9<Pr||Tr<0||gr<Tr)return es(pr,hr);wr===8&&(wr=9);var Br=new is;return(pr.state=Br).strm=pr,Br.wrap=Dr,Br.gzhead=null,Br.w_bits=wr,Br.w_size=1<<Br.w_bits,Br.w_mask=Br.w_size-1,Br.hash_bits=Er+7,Br.hash_size=1<<Br.hash_bits,Br.hash_mask=Br.hash_size-1,Br.hash_shift=~~((Br.hash_bits+xr-1)/xr),Br.window=new nr.Buf8(2*Br.w_size),Br.head=new nr.Buf16(Br.hash_size),Br.prev=new nr.Buf16(Br.w_size),Br.lit_bufsize=1<<Er+6,Br.pending_buf_size=4*Br.lit_bufsize,Br.pending_buf=new nr.Buf8(Br.pending_buf_size),Br.d_buf=1*Br.lit_bufsize,Br.l_buf=3*Br.lit_bufsize,Br.level=Pr,Br.strategy=Tr,Br.method=Or,Ir(pr)}tr=[new Qr(0,0,0,0,function(pr,Pr){var Or=65535;for(Or>pr.pending_buf_size-5&&(Or=pr.pending_buf_size-5);;){if(pr.lookahead<=1){if(ls(pr),pr.lookahead===0&&Pr===ar)return mr;if(pr.lookahead===0)break}pr.strstart+=pr.lookahead,pr.lookahead=0;var wr=pr.block_start+Or;if((pr.strstart===0||pr.strstart>=wr)&&(pr.lookahead=pr.strstart-wr,pr.strstart=wr,zr(pr,!1),pr.strm.avail_out===0)||pr.strstart-pr.block_start>=pr.w_size-Mr&&(zr(pr,!1),pr.strm.avail_out===0))return mr}return pr.insert=0,Pr===cr?(zr(pr,!0),pr.strm.avail_out===0?qr:jr):(pr.strstart>pr.block_start&&(zr(pr,!1),pr.strm.avail_out),mr)}),new Qr(4,4,8,4,Gr),new Qr(4,5,16,8,Gr),new Qr(4,6,32,32,Gr),new Qr(4,4,16,16,Yr),new Qr(8,16,32,32,Yr),new Qr(8,16,128,128,Yr),new Qr(8,32,128,256,Yr),new Qr(32,128,258,1024,Yr),new Qr(32,258,258,4096,Yr)],er.deflateInit=function(pr,Pr){return Nr(pr,Pr,dr,15,8,0)},er.deflateInit2=Nr,er.deflateReset=Ir,er.deflateResetKeep=us,er.deflateSetHeader=function(pr,Pr){return pr&&pr.state?pr.state.wrap!==2?hr:(pr.state.gzhead=Pr,lr):hr},er.deflate=function(pr,Pr){var Or,wr,Er,Tr;if(!pr||!pr.state||5<Pr||Pr<0)return pr?es(pr,hr):hr;if(wr=pr.state,!pr.output||!pr.input&&pr.avail_in!==0||wr.status===666&&Pr!==cr)return es(pr,pr.avail_out===0?-5:hr);if(wr.strm=pr,Or=wr.last_flush,wr.last_flush=Pr,wr.status===Ar)if(wr.wrap===2)pr.adler=0,ns(wr,31),ns(wr,139),ns(wr,8),wr.gzhead?(ns(wr,(wr.gzhead.text?1:0)+(wr.gzhead.hcrc?2:0)+(wr.gzhead.extra?4:0)+(wr.gzhead.name?8:0)+(wr.gzhead.comment?16:0)),ns(wr,255&wr.gzhead.time),ns(wr,wr.gzhead.time>>8&255),ns(wr,wr.gzhead.time>>16&255),ns(wr,wr.gzhead.time>>24&255),ns(wr,wr.level===9?2:2<=wr.strategy||wr.level<2?4:0),ns(wr,255&wr.gzhead.os),wr.gzhead.extra&&wr.gzhead.extra.length&&(ns(wr,255&wr.gzhead.extra.length),ns(wr,wr.gzhead.extra.length>>8&255)),wr.gzhead.hcrc&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending,0)),wr.gzindex=0,wr.status=69):(ns(wr,0),ns(wr,0),ns(wr,0),ns(wr,0),ns(wr,0),ns(wr,wr.level===9?2:2<=wr.strategy||wr.level<2?4:0),ns(wr,3),wr.status=Rr);else{var Dr=dr+(wr.w_bits-8<<4)<<8;Dr|=(2<=wr.strategy||wr.level<2?0:wr.level<6?1:wr.level===6?2:3)<<6,wr.strstart!==0&&(Dr|=32),Dr+=31-Dr%31,wr.status=Rr,ss(wr,Dr),wr.strstart!==0&&(ss(wr,pr.adler>>>16),ss(wr,65535&pr.adler)),pr.adler=1}if(wr.status===69)if(wr.gzhead.extra){for(Er=wr.pending;wr.gzindex<(65535&wr.gzhead.extra.length)&&(wr.pending!==wr.pending_buf_size||(wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),Vr(pr),Er=wr.pending,wr.pending!==wr.pending_buf_size));)ns(wr,255&wr.gzhead.extra[wr.gzindex]),wr.gzindex++;wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),wr.gzindex===wr.gzhead.extra.length&&(wr.gzindex=0,wr.status=73)}else wr.status=73;if(wr.status===73)if(wr.gzhead.name){Er=wr.pending;do{if(wr.pending===wr.pending_buf_size&&(wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),Vr(pr),Er=wr.pending,wr.pending===wr.pending_buf_size)){Tr=1;break}Tr=wr.gzindex<wr.gzhead.name.length?255&wr.gzhead.name.charCodeAt(wr.gzindex++):0,ns(wr,Tr)}while(Tr!==0);wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),Tr===0&&(wr.gzindex=0,wr.status=91)}else wr.status=91;if(wr.status===91)if(wr.gzhead.comment){Er=wr.pending;do{if(wr.pending===wr.pending_buf_size&&(wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),Vr(pr),Er=wr.pending,wr.pending===wr.pending_buf_size)){Tr=1;break}Tr=wr.gzindex<wr.gzhead.comment.length?255&wr.gzhead.comment.charCodeAt(wr.gzindex++):0,ns(wr,Tr)}while(Tr!==0);wr.gzhead.hcrc&&wr.pending>Er&&(pr.adler=ir(pr.adler,wr.pending_buf,wr.pending-Er,Er)),Tr===0&&(wr.status=103)}else wr.status=103;if(wr.status===103&&(wr.gzhead.hcrc?(wr.pending+2>wr.pending_buf_size&&Vr(pr),wr.pending+2<=wr.pending_buf_size&&(ns(wr,255&pr.adler),ns(wr,pr.adler>>8&255),pr.adler=0,wr.status=Rr)):wr.status=Rr),wr.pending!==0){if(Vr(pr),pr.avail_out===0)return wr.last_flush=-1,lr}else if(pr.avail_in===0&&Xr(Pr)<=Xr(Or)&&Pr!==cr)return es(pr,-5);if(wr.status===666&&pr.avail_in!==0)return es(pr,-5);if(pr.avail_in!==0||wr.lookahead!==0||Pr!==ar&&wr.status!==666){var Br=wr.strategy===2?function(Lr,Hr){for(var Jr;;){if(Lr.lookahead===0&&(ls(Lr),Lr.lookahead===0)){if(Hr===ar)return mr;break}if(Lr.match_length=0,Jr=rr._tr_tally(Lr,0,Lr.window[Lr.strstart]),Lr.lookahead--,Lr.strstart++,Jr&&(zr(Lr,!1),Lr.strm.avail_out===0))return mr}return Lr.insert=0,Hr===cr?(zr(Lr,!0),Lr.strm.avail_out===0?qr:jr):Lr.last_lit&&(zr(Lr,!1),Lr.strm.avail_out===0)?mr:Fr}(wr,Pr):wr.strategy===3?function(Lr,Hr){for(var Jr,Wr,rs,fs,os=Lr.window;;){if(Lr.lookahead<=$r){if(ls(Lr),Lr.lookahead<=$r&&Hr===ar)return mr;if(Lr.lookahead===0)break}if(Lr.match_length=0,Lr.lookahead>=xr&&0<Lr.strstart&&(Wr=os[rs=Lr.strstart-1])===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]){fs=Lr.strstart+$r;do;while(Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&Wr===os[++rs]&&rs<fs);Lr.match_length=$r-(fs-rs),Lr.match_length>Lr.lookahead&&(Lr.match_length=Lr.lookahead)}if(Lr.match_length>=xr?(Jr=rr._tr_tally(Lr,1,Lr.match_length-xr),Lr.lookahead-=Lr.match_length,Lr.strstart+=Lr.match_length,Lr.match_length=0):(Jr=rr._tr_tally(Lr,0,Lr.window[Lr.strstart]),Lr.lookahead--,Lr.strstart++),Jr&&(zr(Lr,!1),Lr.strm.avail_out===0))return mr}return Lr.insert=0,Hr===cr?(zr(Lr,!0),Lr.strm.avail_out===0?qr:jr):Lr.last_lit&&(zr(Lr,!1),Lr.strm.avail_out===0)?mr:Fr}(wr,Pr):tr[wr.level].func(wr,Pr);if(Br!==qr&&Br!==jr||(wr.status=666),Br===mr||Br===qr)return pr.avail_out===0&&(wr.last_flush=-1),lr;if(Br===Fr&&(Pr===1?rr._tr_align(wr):Pr!==5&&(rr._tr_stored_block(wr,0,0,!1),Pr===3&&(as(wr.head),wr.lookahead===0&&(wr.strstart=0,wr.block_start=0,wr.insert=0))),Vr(pr),pr.avail_out===0))return wr.last_flush=-1,lr}return Pr!==cr?lr:wr.wrap<=0?1:(wr.wrap===2?(ns(wr,255&pr.adler),ns(wr,pr.adler>>8&255),ns(wr,pr.adler>>16&255),ns(wr,pr.adler>>24&255),ns(wr,255&pr.total_in),ns(wr,pr.total_in>>8&255),ns(wr,pr.total_in>>16&255),ns(wr,pr.total_in>>24&255)):(ss(wr,pr.adler>>>16),ss(wr,65535&pr.adler)),Vr(pr),0<wr.wrap&&(wr.wrap=-wr.wrap),wr.pending!==0?lr:1)},er.deflateEnd=function(pr){var Pr;return pr&&pr.state?(Pr=pr.state.status)!==Ar&&Pr!==69&&Pr!==73&&Pr!==91&&Pr!==103&&Pr!==Rr&&Pr!==666?es(pr,hr):(pr.state=null,Pr===Rr?es(pr,-3):lr):hr},er.deflateSetDictionary=function(pr,Pr){var Or,wr,Er,Tr,Dr,Br,Lr,Hr,Jr=Pr.length;if(!pr||!pr.state||(Tr=(Or=pr.state).wrap)===2||Tr===1&&Or.status!==Ar||Or.lookahead)return hr;for(Tr===1&&(pr.adler=sr(pr.adler,Pr,Jr,0)),Or.wrap=0,Jr>=Or.w_size&&(Tr===0&&(as(Or.head),Or.strstart=0,Or.block_start=0,Or.insert=0),Hr=new nr.Buf8(Or.w_size),nr.arraySet(Hr,Pr,Jr-Or.w_size,Or.w_size,0),Pr=Hr,Jr=Or.w_size),Dr=pr.avail_in,Br=pr.next_in,Lr=pr.input,pr.avail_in=Jr,pr.next_in=0,pr.input=Pr,ls(Or);Or.lookahead>=xr;){for(wr=Or.strstart,Er=Or.lookahead-(xr-1);Or.ins_h=(Or.ins_h<<Or.hash_shift^Or.window[wr+xr-1])&Or.hash_mask,Or.prev[wr&Or.w_mask]=Or.head[Or.ins_h],Or.head[Or.ins_h]=wr,wr++,--Er;);Or.strstart=wr,Or.lookahead=xr-1,ls(Or)}return Or.strstart+=Or.lookahead,Or.block_start=Or.strstart,Or.insert=Or.lookahead,Or.lookahead=0,Or.match_length=Or.prev_length=xr-1,Or.match_available=0,pr.next_in=Br,pr.input=Lr,pr.avail_in=Dr,Or.wrap=Tr,lr},er.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Xn,Qn,er){Qn.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Xn,Qn,er){Qn.exports=function(tr,nr){var rr,sr,ir,or,ar,cr,lr,hr,fr,gr,ur,dr,yr,vr,_r,kr,Cr,br,xr,$r,Mr,Ar,Rr,mr,Fr;rr=tr.state,sr=tr.next_in,mr=tr.input,ir=sr+(tr.avail_in-5),or=tr.next_out,Fr=tr.output,ar=or-(nr-tr.avail_out),cr=or+(tr.avail_out-257),lr=rr.dmax,hr=rr.wsize,fr=rr.whave,gr=rr.wnext,ur=rr.window,dr=rr.hold,yr=rr.bits,vr=rr.lencode,_r=rr.distcode,kr=(1<<rr.lenbits)-1,Cr=(1<<rr.distbits)-1;e:do{yr<15&&(dr+=mr[sr++]<<yr,yr+=8,dr+=mr[sr++]<<yr,yr+=8),br=vr[dr&kr];t:for(;;){if(dr>>>=xr=br>>>24,yr-=xr,(xr=br>>>16&255)===0)Fr[or++]=65535&br;else{if(!(16&xr)){if(!(64&xr)){br=vr[(65535&br)+(dr&(1<<xr)-1)];continue t}if(32&xr){rr.mode=12;break e}tr.msg="invalid literal/length code",rr.mode=30;break e}$r=65535&br,(xr&=15)&&(yr<xr&&(dr+=mr[sr++]<<yr,yr+=8),$r+=dr&(1<<xr)-1,dr>>>=xr,yr-=xr),yr<15&&(dr+=mr[sr++]<<yr,yr+=8,dr+=mr[sr++]<<yr,yr+=8),br=_r[dr&Cr];n:for(;;){if(dr>>>=xr=br>>>24,yr-=xr,!(16&(xr=br>>>16&255))){if(!(64&xr)){br=_r[(65535&br)+(dr&(1<<xr)-1)];continue n}tr.msg="invalid distance code",rr.mode=30;break e}if(Mr=65535&br,yr<(xr&=15)&&(dr+=mr[sr++]<<yr,(yr+=8)<xr&&(dr+=mr[sr++]<<yr,yr+=8)),lr<(Mr+=dr&(1<<xr)-1)){tr.msg="invalid distance too far back",rr.mode=30;break e}if(dr>>>=xr,yr-=xr,(xr=or-ar)<Mr){if(fr<(xr=Mr-xr)&&rr.sane){tr.msg="invalid distance too far back",rr.mode=30;break e}if(Rr=ur,(Ar=0)===gr){if(Ar+=hr-xr,xr<$r){for($r-=xr;Fr[or++]=ur[Ar++],--xr;);Ar=or-Mr,Rr=Fr}}else if(gr<xr){if(Ar+=hr+gr-xr,(xr-=gr)<$r){for($r-=xr;Fr[or++]=ur[Ar++],--xr;);if(Ar=0,gr<$r){for($r-=xr=gr;Fr[or++]=ur[Ar++],--xr;);Ar=or-Mr,Rr=Fr}}}else if(Ar+=gr-xr,xr<$r){for($r-=xr;Fr[or++]=ur[Ar++],--xr;);Ar=or-Mr,Rr=Fr}for(;2<$r;)Fr[or++]=Rr[Ar++],Fr[or++]=Rr[Ar++],Fr[or++]=Rr[Ar++],$r-=3;$r&&(Fr[or++]=Rr[Ar++],1<$r&&(Fr[or++]=Rr[Ar++]))}else{for(Ar=or-Mr;Fr[or++]=Fr[Ar++],Fr[or++]=Fr[Ar++],Fr[or++]=Fr[Ar++],2<($r-=3););$r&&(Fr[or++]=Fr[Ar++],1<$r&&(Fr[or++]=Fr[Ar++]))}break}}break}}while(sr<ir&&or<cr);sr-=$r=yr>>3,dr&=(1<<(yr-=$r<<3))-1,tr.next_in=sr,tr.next_out=or,tr.avail_in=sr<ir?ir-sr+5:5-(sr-ir),tr.avail_out=or<cr?cr-or+257:257-(or-cr),rr.hold=dr,rr.bits=yr}},{}],49:[function(Xn,Qn,er){var tr=Xn("../utils/common"),nr=Xn("./adler32"),rr=Xn("./crc32"),sr=Xn("./inffast"),ir=Xn("./inftrees"),or=1,ar=2,cr=0,lr=-2,hr=1,fr=852,gr=592;function ur(Ar){return(Ar>>>24&255)+(Ar>>>8&65280)+((65280&Ar)<<8)+((255&Ar)<<24)}function dr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new tr.Buf16(320),this.work=new tr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function yr(Ar){var Rr;return Ar&&Ar.state?(Rr=Ar.state,Ar.total_in=Ar.total_out=Rr.total=0,Ar.msg="",Rr.wrap&&(Ar.adler=1&Rr.wrap),Rr.mode=hr,Rr.last=0,Rr.havedict=0,Rr.dmax=32768,Rr.head=null,Rr.hold=0,Rr.bits=0,Rr.lencode=Rr.lendyn=new tr.Buf32(fr),Rr.distcode=Rr.distdyn=new tr.Buf32(gr),Rr.sane=1,Rr.back=-1,cr):lr}function vr(Ar){var Rr;return Ar&&Ar.state?((Rr=Ar.state).wsize=0,Rr.whave=0,Rr.wnext=0,yr(Ar)):lr}function _r(Ar,Rr){var mr,Fr;return Ar&&Ar.state?(Fr=Ar.state,Rr<0?(mr=0,Rr=-Rr):(mr=1+(Rr>>4),Rr<48&&(Rr&=15)),Rr&&(Rr<8||15<Rr)?lr:(Fr.window!==null&&Fr.wbits!==Rr&&(Fr.window=null),Fr.wrap=mr,Fr.wbits=Rr,vr(Ar))):lr}function kr(Ar,Rr){var mr,Fr;return Ar?(Fr=new dr,(Ar.state=Fr).window=null,(mr=_r(Ar,Rr))!==cr&&(Ar.state=null),mr):lr}var Cr,br,xr=!0;function $r(Ar){if(xr){var Rr;for(Cr=new tr.Buf32(512),br=new tr.Buf32(32),Rr=0;Rr<144;)Ar.lens[Rr++]=8;for(;Rr<256;)Ar.lens[Rr++]=9;for(;Rr<280;)Ar.lens[Rr++]=7;for(;Rr<288;)Ar.lens[Rr++]=8;for(ir(or,Ar.lens,0,288,Cr,0,Ar.work,{bits:9}),Rr=0;Rr<32;)Ar.lens[Rr++]=5;ir(ar,Ar.lens,0,32,br,0,Ar.work,{bits:5}),xr=!1}Ar.lencode=Cr,Ar.lenbits=9,Ar.distcode=br,Ar.distbits=5}function Mr(Ar,Rr,mr,Fr){var qr,jr=Ar.state;return jr.window===null&&(jr.wsize=1<<jr.wbits,jr.wnext=0,jr.whave=0,jr.window=new tr.Buf8(jr.wsize)),Fr>=jr.wsize?(tr.arraySet(jr.window,Rr,mr-jr.wsize,jr.wsize,0),jr.wnext=0,jr.whave=jr.wsize):(Fr<(qr=jr.wsize-jr.wnext)&&(qr=Fr),tr.arraySet(jr.window,Rr,mr-Fr,qr,jr.wnext),(Fr-=qr)?(tr.arraySet(jr.window,Rr,mr-Fr,Fr,0),jr.wnext=Fr,jr.whave=jr.wsize):(jr.wnext+=qr,jr.wnext===jr.wsize&&(jr.wnext=0),jr.whave<jr.wsize&&(jr.whave+=qr))),0}er.inflateReset=vr,er.inflateReset2=_r,er.inflateResetKeep=yr,er.inflateInit=function(Ar){return kr(Ar,15)},er.inflateInit2=kr,er.inflate=function(Ar,Rr){var mr,Fr,qr,jr,es,Xr,as,Vr,zr,ns,ss,ts,ls,Gr,Yr,Qr,is,us,Ir,Nr,pr,Pr,Or,wr,Er=0,Tr=new tr.Buf8(4),Dr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Ar||!Ar.state||!Ar.output||!Ar.input&&Ar.avail_in!==0)return lr;(mr=Ar.state).mode===12&&(mr.mode=13),es=Ar.next_out,qr=Ar.output,as=Ar.avail_out,jr=Ar.next_in,Fr=Ar.input,Xr=Ar.avail_in,Vr=mr.hold,zr=mr.bits,ns=Xr,ss=as,Pr=cr;e:for(;;)switch(mr.mode){case hr:if(mr.wrap===0){mr.mode=13;break}for(;zr<16;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(2&mr.wrap&&Vr===35615){Tr[mr.check=0]=255&Vr,Tr[1]=Vr>>>8&255,mr.check=rr(mr.check,Tr,2,0),zr=Vr=0,mr.mode=2;break}if(mr.flags=0,mr.head&&(mr.head.done=!1),!(1&mr.wrap)||(((255&Vr)<<8)+(Vr>>8))%31){Ar.msg="incorrect header check",mr.mode=30;break}if((15&Vr)!=8){Ar.msg="unknown compression method",mr.mode=30;break}if(zr-=4,pr=8+(15&(Vr>>>=4)),mr.wbits===0)mr.wbits=pr;else if(pr>mr.wbits){Ar.msg="invalid window size",mr.mode=30;break}mr.dmax=1<<pr,Ar.adler=mr.check=1,mr.mode=512&Vr?10:12,zr=Vr=0;break;case 2:for(;zr<16;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(mr.flags=Vr,(255&mr.flags)!=8){Ar.msg="unknown compression method",mr.mode=30;break}if(57344&mr.flags){Ar.msg="unknown header flags set",mr.mode=30;break}mr.head&&(mr.head.text=Vr>>8&1),512&mr.flags&&(Tr[0]=255&Vr,Tr[1]=Vr>>>8&255,mr.check=rr(mr.check,Tr,2,0)),zr=Vr=0,mr.mode=3;case 3:for(;zr<32;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.head&&(mr.head.time=Vr),512&mr.flags&&(Tr[0]=255&Vr,Tr[1]=Vr>>>8&255,Tr[2]=Vr>>>16&255,Tr[3]=Vr>>>24&255,mr.check=rr(mr.check,Tr,4,0)),zr=Vr=0,mr.mode=4;case 4:for(;zr<16;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.head&&(mr.head.xflags=255&Vr,mr.head.os=Vr>>8),512&mr.flags&&(Tr[0]=255&Vr,Tr[1]=Vr>>>8&255,mr.check=rr(mr.check,Tr,2,0)),zr=Vr=0,mr.mode=5;case 5:if(1024&mr.flags){for(;zr<16;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.length=Vr,mr.head&&(mr.head.extra_len=Vr),512&mr.flags&&(Tr[0]=255&Vr,Tr[1]=Vr>>>8&255,mr.check=rr(mr.check,Tr,2,0)),zr=Vr=0}else mr.head&&(mr.head.extra=null);mr.mode=6;case 6:if(1024&mr.flags&&(Xr<(ts=mr.length)&&(ts=Xr),ts&&(mr.head&&(pr=mr.head.extra_len-mr.length,mr.head.extra||(mr.head.extra=new Array(mr.head.extra_len)),tr.arraySet(mr.head.extra,Fr,jr,ts,pr)),512&mr.flags&&(mr.check=rr(mr.check,Fr,ts,jr)),Xr-=ts,jr+=ts,mr.length-=ts),mr.length))break e;mr.length=0,mr.mode=7;case 7:if(2048&mr.flags){if(Xr===0)break e;for(ts=0;pr=Fr[jr+ts++],mr.head&&pr&&mr.length<65536&&(mr.head.name+=String.fromCharCode(pr)),pr&&ts<Xr;);if(512&mr.flags&&(mr.check=rr(mr.check,Fr,ts,jr)),Xr-=ts,jr+=ts,pr)break e}else mr.head&&(mr.head.name=null);mr.length=0,mr.mode=8;case 8:if(4096&mr.flags){if(Xr===0)break e;for(ts=0;pr=Fr[jr+ts++],mr.head&&pr&&mr.length<65536&&(mr.head.comment+=String.fromCharCode(pr)),pr&&ts<Xr;);if(512&mr.flags&&(mr.check=rr(mr.check,Fr,ts,jr)),Xr-=ts,jr+=ts,pr)break e}else mr.head&&(mr.head.comment=null);mr.mode=9;case 9:if(512&mr.flags){for(;zr<16;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(Vr!==(65535&mr.check)){Ar.msg="header crc mismatch",mr.mode=30;break}zr=Vr=0}mr.head&&(mr.head.hcrc=mr.flags>>9&1,mr.head.done=!0),Ar.adler=mr.check=0,mr.mode=12;break;case 10:for(;zr<32;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}Ar.adler=mr.check=ur(Vr),zr=Vr=0,mr.mode=11;case 11:if(mr.havedict===0)return Ar.next_out=es,Ar.avail_out=as,Ar.next_in=jr,Ar.avail_in=Xr,mr.hold=Vr,mr.bits=zr,2;Ar.adler=mr.check=1,mr.mode=12;case 12:if(Rr===5||Rr===6)break e;case 13:if(mr.last){Vr>>>=7&zr,zr-=7&zr,mr.mode=27;break}for(;zr<3;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}switch(mr.last=1&Vr,zr-=1,3&(Vr>>>=1)){case 0:mr.mode=14;break;case 1:if($r(mr),mr.mode=20,Rr!==6)break;Vr>>>=2,zr-=2;break e;case 2:mr.mode=17;break;case 3:Ar.msg="invalid block type",mr.mode=30}Vr>>>=2,zr-=2;break;case 14:for(Vr>>>=7&zr,zr-=7&zr;zr<32;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if((65535&Vr)!=(Vr>>>16^65535)){Ar.msg="invalid stored block lengths",mr.mode=30;break}if(mr.length=65535&Vr,zr=Vr=0,mr.mode=15,Rr===6)break e;case 15:mr.mode=16;case 16:if(ts=mr.length){if(Xr<ts&&(ts=Xr),as<ts&&(ts=as),ts===0)break e;tr.arraySet(qr,Fr,jr,ts,es),Xr-=ts,jr+=ts,as-=ts,es+=ts,mr.length-=ts;break}mr.mode=12;break;case 17:for(;zr<14;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(mr.nlen=257+(31&Vr),Vr>>>=5,zr-=5,mr.ndist=1+(31&Vr),Vr>>>=5,zr-=5,mr.ncode=4+(15&Vr),Vr>>>=4,zr-=4,286<mr.nlen||30<mr.ndist){Ar.msg="too many length or distance symbols",mr.mode=30;break}mr.have=0,mr.mode=18;case 18:for(;mr.have<mr.ncode;){for(;zr<3;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.lens[Dr[mr.have++]]=7&Vr,Vr>>>=3,zr-=3}for(;mr.have<19;)mr.lens[Dr[mr.have++]]=0;if(mr.lencode=mr.lendyn,mr.lenbits=7,Or={bits:mr.lenbits},Pr=ir(0,mr.lens,0,19,mr.lencode,0,mr.work,Or),mr.lenbits=Or.bits,Pr){Ar.msg="invalid code lengths set",mr.mode=30;break}mr.have=0,mr.mode=19;case 19:for(;mr.have<mr.nlen+mr.ndist;){for(;Qr=(Er=mr.lencode[Vr&(1<<mr.lenbits)-1])>>>16&255,is=65535&Er,!((Yr=Er>>>24)<=zr);){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(is<16)Vr>>>=Yr,zr-=Yr,mr.lens[mr.have++]=is;else{if(is===16){for(wr=Yr+2;zr<wr;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(Vr>>>=Yr,zr-=Yr,mr.have===0){Ar.msg="invalid bit length repeat",mr.mode=30;break}pr=mr.lens[mr.have-1],ts=3+(3&Vr),Vr>>>=2,zr-=2}else if(is===17){for(wr=Yr+3;zr<wr;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}zr-=Yr,pr=0,ts=3+(7&(Vr>>>=Yr)),Vr>>>=3,zr-=3}else{for(wr=Yr+7;zr<wr;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}zr-=Yr,pr=0,ts=11+(127&(Vr>>>=Yr)),Vr>>>=7,zr-=7}if(mr.have+ts>mr.nlen+mr.ndist){Ar.msg="invalid bit length repeat",mr.mode=30;break}for(;ts--;)mr.lens[mr.have++]=pr}}if(mr.mode===30)break;if(mr.lens[256]===0){Ar.msg="invalid code -- missing end-of-block",mr.mode=30;break}if(mr.lenbits=9,Or={bits:mr.lenbits},Pr=ir(or,mr.lens,0,mr.nlen,mr.lencode,0,mr.work,Or),mr.lenbits=Or.bits,Pr){Ar.msg="invalid literal/lengths set",mr.mode=30;break}if(mr.distbits=6,mr.distcode=mr.distdyn,Or={bits:mr.distbits},Pr=ir(ar,mr.lens,mr.nlen,mr.ndist,mr.distcode,0,mr.work,Or),mr.distbits=Or.bits,Pr){Ar.msg="invalid distances set",mr.mode=30;break}if(mr.mode=20,Rr===6)break e;case 20:mr.mode=21;case 21:if(6<=Xr&&258<=as){Ar.next_out=es,Ar.avail_out=as,Ar.next_in=jr,Ar.avail_in=Xr,mr.hold=Vr,mr.bits=zr,sr(Ar,ss),es=Ar.next_out,qr=Ar.output,as=Ar.avail_out,jr=Ar.next_in,Fr=Ar.input,Xr=Ar.avail_in,Vr=mr.hold,zr=mr.bits,mr.mode===12&&(mr.back=-1);break}for(mr.back=0;Qr=(Er=mr.lencode[Vr&(1<<mr.lenbits)-1])>>>16&255,is=65535&Er,!((Yr=Er>>>24)<=zr);){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(Qr&&!(240&Qr)){for(us=Yr,Ir=Qr,Nr=is;Qr=(Er=mr.lencode[Nr+((Vr&(1<<us+Ir)-1)>>us)])>>>16&255,is=65535&Er,!(us+(Yr=Er>>>24)<=zr);){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}Vr>>>=us,zr-=us,mr.back+=us}if(Vr>>>=Yr,zr-=Yr,mr.back+=Yr,mr.length=is,Qr===0){mr.mode=26;break}if(32&Qr){mr.back=-1,mr.mode=12;break}if(64&Qr){Ar.msg="invalid literal/length code",mr.mode=30;break}mr.extra=15&Qr,mr.mode=22;case 22:if(mr.extra){for(wr=mr.extra;zr<wr;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.length+=Vr&(1<<mr.extra)-1,Vr>>>=mr.extra,zr-=mr.extra,mr.back+=mr.extra}mr.was=mr.length,mr.mode=23;case 23:for(;Qr=(Er=mr.distcode[Vr&(1<<mr.distbits)-1])>>>16&255,is=65535&Er,!((Yr=Er>>>24)<=zr);){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(!(240&Qr)){for(us=Yr,Ir=Qr,Nr=is;Qr=(Er=mr.distcode[Nr+((Vr&(1<<us+Ir)-1)>>us)])>>>16&255,is=65535&Er,!(us+(Yr=Er>>>24)<=zr);){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}Vr>>>=us,zr-=us,mr.back+=us}if(Vr>>>=Yr,zr-=Yr,mr.back+=Yr,64&Qr){Ar.msg="invalid distance code",mr.mode=30;break}mr.offset=is,mr.extra=15&Qr,mr.mode=24;case 24:if(mr.extra){for(wr=mr.extra;zr<wr;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}mr.offset+=Vr&(1<<mr.extra)-1,Vr>>>=mr.extra,zr-=mr.extra,mr.back+=mr.extra}if(mr.offset>mr.dmax){Ar.msg="invalid distance too far back",mr.mode=30;break}mr.mode=25;case 25:if(as===0)break e;if(ts=ss-as,mr.offset>ts){if((ts=mr.offset-ts)>mr.whave&&mr.sane){Ar.msg="invalid distance too far back",mr.mode=30;break}ls=ts>mr.wnext?(ts-=mr.wnext,mr.wsize-ts):mr.wnext-ts,ts>mr.length&&(ts=mr.length),Gr=mr.window}else Gr=qr,ls=es-mr.offset,ts=mr.length;for(as<ts&&(ts=as),as-=ts,mr.length-=ts;qr[es++]=Gr[ls++],--ts;);mr.length===0&&(mr.mode=21);break;case 26:if(as===0)break e;qr[es++]=mr.length,as--,mr.mode=21;break;case 27:if(mr.wrap){for(;zr<32;){if(Xr===0)break e;Xr--,Vr|=Fr[jr++]<<zr,zr+=8}if(ss-=as,Ar.total_out+=ss,mr.total+=ss,ss&&(Ar.adler=mr.check=mr.flags?rr(mr.check,qr,ss,es-ss):nr(mr.check,qr,ss,es-ss)),ss=as,(mr.flags?Vr:ur(Vr))!==mr.check){Ar.msg="incorrect data check",mr.mode=30;break}zr=Vr=0}mr.mode=28;case 28:if(mr.wrap&&mr.flags){for(;zr<32;){if(Xr===0)break e;Xr--,Vr+=Fr[jr++]<<zr,zr+=8}if(Vr!==(4294967295&mr.total)){Ar.msg="incorrect length check",mr.mode=30;break}zr=Vr=0}mr.mode=29;case 29:Pr=1;break e;case 30:Pr=-3;break e;case 31:return-4;case 32:default:return lr}return Ar.next_out=es,Ar.avail_out=as,Ar.next_in=jr,Ar.avail_in=Xr,mr.hold=Vr,mr.bits=zr,(mr.wsize||ss!==Ar.avail_out&&mr.mode<30&&(mr.mode<27||Rr!==4))&&Mr(Ar,Ar.output,Ar.next_out,ss-Ar.avail_out)?(mr.mode=31,-4):(ns-=Ar.avail_in,ss-=Ar.avail_out,Ar.total_in+=ns,Ar.total_out+=ss,mr.total+=ss,mr.wrap&&ss&&(Ar.adler=mr.check=mr.flags?rr(mr.check,qr,ss,Ar.next_out-ss):nr(mr.check,qr,ss,Ar.next_out-ss)),Ar.data_type=mr.bits+(mr.last?64:0)+(mr.mode===12?128:0)+(mr.mode===20||mr.mode===15?256:0),(ns==0&&ss===0||Rr===4)&&Pr===cr&&(Pr=-5),Pr)},er.inflateEnd=function(Ar){if(!Ar||!Ar.state)return lr;var Rr=Ar.state;return Rr.window&&(Rr.window=null),Ar.state=null,cr},er.inflateGetHeader=function(Ar,Rr){var mr;return Ar&&Ar.state&&2&(mr=Ar.state).wrap?((mr.head=Rr).done=!1,cr):lr},er.inflateSetDictionary=function(Ar,Rr){var mr,Fr=Rr.length;return Ar&&Ar.state?(mr=Ar.state).wrap!==0&&mr.mode!==11?lr:mr.mode===11&&nr(1,Rr,Fr,0)!==mr.check?-3:Mr(Ar,Rr,Fr,Fr)?(mr.mode=31,-4):(mr.havedict=1,cr):lr},er.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Xn,Qn,er){var tr=Xn("../utils/common"),nr=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rr=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],sr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ir=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Qn.exports=function(or,ar,cr,lr,hr,fr,gr,ur){var dr,yr,vr,_r,kr,Cr,br,xr,$r,Mr=ur.bits,Ar=0,Rr=0,mr=0,Fr=0,qr=0,jr=0,es=0,Xr=0,as=0,Vr=0,zr=null,ns=0,ss=new tr.Buf16(16),ts=new tr.Buf16(16),ls=null,Gr=0;for(Ar=0;Ar<=15;Ar++)ss[Ar]=0;for(Rr=0;Rr<lr;Rr++)ss[ar[cr+Rr]]++;for(qr=Mr,Fr=15;1<=Fr&&ss[Fr]===0;Fr--);if(Fr<qr&&(qr=Fr),Fr===0)return hr[fr++]=20971520,hr[fr++]=20971520,ur.bits=1,0;for(mr=1;mr<Fr&&ss[mr]===0;mr++);for(qr<mr&&(qr=mr),Ar=Xr=1;Ar<=15;Ar++)if(Xr<<=1,(Xr-=ss[Ar])<0)return-1;if(0<Xr&&(or===0||Fr!==1))return-1;for(ts[1]=0,Ar=1;Ar<15;Ar++)ts[Ar+1]=ts[Ar]+ss[Ar];for(Rr=0;Rr<lr;Rr++)ar[cr+Rr]!==0&&(gr[ts[ar[cr+Rr]]++]=Rr);if(Cr=or===0?(zr=ls=gr,19):or===1?(zr=nr,ns-=257,ls=rr,Gr-=257,256):(zr=sr,ls=ir,-1),Ar=mr,kr=fr,es=Rr=Vr=0,vr=-1,_r=(as=1<<(jr=qr))-1,or===1&&852<as||or===2&&592<as)return 1;for(;;){for(br=Ar-es,$r=gr[Rr]<Cr?(xr=0,gr[Rr]):gr[Rr]>Cr?(xr=ls[Gr+gr[Rr]],zr[ns+gr[Rr]]):(xr=96,0),dr=1<<Ar-es,mr=yr=1<<jr;hr[kr+(Vr>>es)+(yr-=dr)]=br<<24|xr<<16|$r|0,yr!==0;);for(dr=1<<Ar-1;Vr&dr;)dr>>=1;if(dr!==0?(Vr&=dr-1,Vr+=dr):Vr=0,Rr++,--ss[Ar]==0){if(Ar===Fr)break;Ar=ar[cr+gr[Rr]]}if(qr<Ar&&(Vr&_r)!==vr){for(es===0&&(es=qr),kr+=mr,Xr=1<<(jr=Ar-es);jr+es<Fr&&!((Xr-=ss[jr+es])<=0);)jr++,Xr<<=1;if(as+=1<<jr,or===1&&852<as||or===2&&592<as)return 1;hr[vr=Vr&_r]=qr<<24|jr<<16|kr-fr|0}}return Vr!==0&&(hr[kr+Vr]=Ar-es<<24|64<<16|0),ur.bits=qr,0}},{"../utils/common":41}],51:[function(Xn,Qn,er){Qn.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Xn,Qn,er){var tr=Xn("../utils/common"),nr=0,rr=1;function sr(Er){for(var Tr=Er.length;0<=--Tr;)Er[Tr]=0}var ir=0,or=29,ar=256,cr=ar+1+or,lr=30,hr=19,fr=2*cr+1,gr=15,ur=16,dr=7,yr=256,vr=16,_r=17,kr=18,Cr=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],br=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],xr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Mr=new Array(2*(cr+2));sr(Mr);var Ar=new Array(2*lr);sr(Ar);var Rr=new Array(512);sr(Rr);var mr=new Array(256);sr(mr);var Fr=new Array(or);sr(Fr);var qr,jr,es,Xr=new Array(lr);function as(Er,Tr,Dr,Br,Lr){this.static_tree=Er,this.extra_bits=Tr,this.extra_base=Dr,this.elems=Br,this.max_length=Lr,this.has_stree=Er&&Er.length}function Vr(Er,Tr){this.dyn_tree=Er,this.max_code=0,this.stat_desc=Tr}function zr(Er){return Er<256?Rr[Er]:Rr[256+(Er>>>7)]}function ns(Er,Tr){Er.pending_buf[Er.pending++]=255&Tr,Er.pending_buf[Er.pending++]=Tr>>>8&255}function ss(Er,Tr,Dr){Er.bi_valid>ur-Dr?(Er.bi_buf|=Tr<<Er.bi_valid&65535,ns(Er,Er.bi_buf),Er.bi_buf=Tr>>ur-Er.bi_valid,Er.bi_valid+=Dr-ur):(Er.bi_buf|=Tr<<Er.bi_valid&65535,Er.bi_valid+=Dr)}function ts(Er,Tr,Dr){ss(Er,Dr[2*Tr],Dr[2*Tr+1])}function ls(Er,Tr){for(var Dr=0;Dr|=1&Er,Er>>>=1,Dr<<=1,0<--Tr;);return Dr>>>1}function Gr(Er,Tr,Dr){var Br,Lr,Hr=new Array(gr+1),Jr=0;for(Br=1;Br<=gr;Br++)Hr[Br]=Jr=Jr+Dr[Br-1]<<1;for(Lr=0;Lr<=Tr;Lr++){var Wr=Er[2*Lr+1];Wr!==0&&(Er[2*Lr]=ls(Hr[Wr]++,Wr))}}function Yr(Er){var Tr;for(Tr=0;Tr<cr;Tr++)Er.dyn_ltree[2*Tr]=0;for(Tr=0;Tr<lr;Tr++)Er.dyn_dtree[2*Tr]=0;for(Tr=0;Tr<hr;Tr++)Er.bl_tree[2*Tr]=0;Er.dyn_ltree[2*yr]=1,Er.opt_len=Er.static_len=0,Er.last_lit=Er.matches=0}function Qr(Er){8<Er.bi_valid?ns(Er,Er.bi_buf):0<Er.bi_valid&&(Er.pending_buf[Er.pending++]=Er.bi_buf),Er.bi_buf=0,Er.bi_valid=0}function is(Er,Tr,Dr,Br){var Lr=2*Tr,Hr=2*Dr;return Er[Lr]<Er[Hr]||Er[Lr]===Er[Hr]&&Br[Tr]<=Br[Dr]}function us(Er,Tr,Dr){for(var Br=Er.heap[Dr],Lr=Dr<<1;Lr<=Er.heap_len&&(Lr<Er.heap_len&&is(Tr,Er.heap[Lr+1],Er.heap[Lr],Er.depth)&&Lr++,!is(Tr,Br,Er.heap[Lr],Er.depth));)Er.heap[Dr]=Er.heap[Lr],Dr=Lr,Lr<<=1;Er.heap[Dr]=Br}function Ir(Er,Tr,Dr){var Br,Lr,Hr,Jr,Wr=0;if(Er.last_lit!==0)for(;Br=Er.pending_buf[Er.d_buf+2*Wr]<<8|Er.pending_buf[Er.d_buf+2*Wr+1],Lr=Er.pending_buf[Er.l_buf+Wr],Wr++,Br===0?ts(Er,Lr,Tr):(ts(Er,(Hr=mr[Lr])+ar+1,Tr),(Jr=Cr[Hr])!==0&&ss(Er,Lr-=Fr[Hr],Jr),ts(Er,Hr=zr(--Br),Dr),(Jr=br[Hr])!==0&&ss(Er,Br-=Xr[Hr],Jr)),Wr<Er.last_lit;);ts(Er,yr,Tr)}function Nr(Er,Tr){var Dr,Br,Lr,Hr=Tr.dyn_tree,Jr=Tr.stat_desc.static_tree,Wr=Tr.stat_desc.has_stree,rs=Tr.stat_desc.elems,fs=-1;for(Er.heap_len=0,Er.heap_max=fr,Dr=0;Dr<rs;Dr++)Hr[2*Dr]!==0?(Er.heap[++Er.heap_len]=fs=Dr,Er.depth[Dr]=0):Hr[2*Dr+1]=0;for(;Er.heap_len<2;)Hr[2*(Lr=Er.heap[++Er.heap_len]=fs<2?++fs:0)]=1,Er.depth[Lr]=0,Er.opt_len--,Wr&&(Er.static_len-=Jr[2*Lr+1]);for(Tr.max_code=fs,Dr=Er.heap_len>>1;1<=Dr;Dr--)us(Er,Hr,Dr);for(Lr=rs;Dr=Er.heap[1],Er.heap[1]=Er.heap[Er.heap_len--],us(Er,Hr,1),Br=Er.heap[1],Er.heap[--Er.heap_max]=Dr,Er.heap[--Er.heap_max]=Br,Hr[2*Lr]=Hr[2*Dr]+Hr[2*Br],Er.depth[Lr]=(Er.depth[Dr]>=Er.depth[Br]?Er.depth[Dr]:Er.depth[Br])+1,Hr[2*Dr+1]=Hr[2*Br+1]=Lr,Er.heap[1]=Lr++,us(Er,Hr,1),2<=Er.heap_len;);Er.heap[--Er.heap_max]=Er.heap[1],function(os,ds){var bs,As,xs,gs,Ts,ws,ms=ds.dyn_tree,Ss=ds.max_code,Hs=ds.stat_desc.static_tree,Fs=ds.stat_desc.has_stree,Vs=ds.stat_desc.extra_bits,Ls=ds.stat_desc.extra_base,Cs=ds.stat_desc.max_length,Ps=0;for(gs=0;gs<=gr;gs++)os.bl_count[gs]=0;for(ms[2*os.heap[os.heap_max]+1]=0,bs=os.heap_max+1;bs<fr;bs++)Cs<(gs=ms[2*ms[2*(As=os.heap[bs])+1]+1]+1)&&(gs=Cs,Ps++),ms[2*As+1]=gs,Ss<As||(os.bl_count[gs]++,Ts=0,Ls<=As&&(Ts=Vs[As-Ls]),ws=ms[2*As],os.opt_len+=ws*(gs+Ts),Fs&&(os.static_len+=ws*(Hs[2*As+1]+Ts)));if(Ps!==0){do{for(gs=Cs-1;os.bl_count[gs]===0;)gs--;os.bl_count[gs]--,os.bl_count[gs+1]+=2,os.bl_count[Cs]--,Ps-=2}while(0<Ps);for(gs=Cs;gs!==0;gs--)for(As=os.bl_count[gs];As!==0;)Ss<(xs=os.heap[--bs])||(ms[2*xs+1]!==gs&&(os.opt_len+=(gs-ms[2*xs+1])*ms[2*xs],ms[2*xs+1]=gs),As--)}}(Er,Tr),Gr(Hr,fs,Er.bl_count)}function pr(Er,Tr,Dr){var Br,Lr,Hr=-1,Jr=Tr[1],Wr=0,rs=7,fs=4;for(Jr===0&&(rs=138,fs=3),Tr[2*(Dr+1)+1]=65535,Br=0;Br<=Dr;Br++)Lr=Jr,Jr=Tr[2*(Br+1)+1],++Wr<rs&&Lr===Jr||(Wr<fs?Er.bl_tree[2*Lr]+=Wr:Lr!==0?(Lr!==Hr&&Er.bl_tree[2*Lr]++,Er.bl_tree[2*vr]++):Wr<=10?Er.bl_tree[2*_r]++:Er.bl_tree[2*kr]++,Hr=Lr,fs=(Wr=0)===Jr?(rs=138,3):Lr===Jr?(rs=6,3):(rs=7,4))}function Pr(Er,Tr,Dr){var Br,Lr,Hr=-1,Jr=Tr[1],Wr=0,rs=7,fs=4;for(Jr===0&&(rs=138,fs=3),Br=0;Br<=Dr;Br++)if(Lr=Jr,Jr=Tr[2*(Br+1)+1],!(++Wr<rs&&Lr===Jr)){if(Wr<fs)for(;ts(Er,Lr,Er.bl_tree),--Wr!=0;);else Lr!==0?(Lr!==Hr&&(ts(Er,Lr,Er.bl_tree),Wr--),ts(Er,vr,Er.bl_tree),ss(Er,Wr-3,2)):Wr<=10?(ts(Er,_r,Er.bl_tree),ss(Er,Wr-3,3)):(ts(Er,kr,Er.bl_tree),ss(Er,Wr-11,7));Hr=Lr,fs=(Wr=0)===Jr?(rs=138,3):Lr===Jr?(rs=6,3):(rs=7,4)}}sr(Xr);var Or=!1;function wr(Er,Tr,Dr,Br){ss(Er,(ir<<1)+(Br?1:0),3),function(Lr,Hr,Jr,Wr){Qr(Lr),Wr&&(ns(Lr,Jr),ns(Lr,~Jr)),tr.arraySet(Lr.pending_buf,Lr.window,Hr,Jr,Lr.pending),Lr.pending+=Jr}(Er,Tr,Dr,!0)}er._tr_init=function(Er){Or||(function(){var Tr,Dr,Br,Lr,Hr,Jr=new Array(gr+1);for(Lr=Br=0;Lr<or-1;Lr++)for(Fr[Lr]=Br,Tr=0;Tr<1<<Cr[Lr];Tr++)mr[Br++]=Lr;for(mr[Br-1]=Lr,Lr=Hr=0;Lr<16;Lr++)for(Xr[Lr]=Hr,Tr=0;Tr<1<<br[Lr];Tr++)Rr[Hr++]=Lr;for(Hr>>=7;Lr<lr;Lr++)for(Xr[Lr]=Hr<<7,Tr=0;Tr<1<<br[Lr]-7;Tr++)Rr[256+Hr++]=Lr;for(Dr=0;Dr<=gr;Dr++)Jr[Dr]=0;for(Tr=0;Tr<=143;)Mr[2*Tr+1]=8,Tr++,Jr[8]++;for(;Tr<=255;)Mr[2*Tr+1]=9,Tr++,Jr[9]++;for(;Tr<=279;)Mr[2*Tr+1]=7,Tr++,Jr[7]++;for(;Tr<=287;)Mr[2*Tr+1]=8,Tr++,Jr[8]++;for(Gr(Mr,cr+1,Jr),Tr=0;Tr<lr;Tr++)Ar[2*Tr+1]=5,Ar[2*Tr]=ls(Tr,5);qr=new as(Mr,Cr,ar+1,cr,gr),jr=new as(Ar,br,0,lr,gr),es=new as(new Array(0),xr,0,hr,dr)}(),Or=!0),Er.l_desc=new Vr(Er.dyn_ltree,qr),Er.d_desc=new Vr(Er.dyn_dtree,jr),Er.bl_desc=new Vr(Er.bl_tree,es),Er.bi_buf=0,Er.bi_valid=0,Yr(Er)},er._tr_stored_block=wr,er._tr_flush_block=function(Er,Tr,Dr,Br){var Lr,Hr,Jr=0;0<Er.level?(Er.strm.data_type===2&&(Er.strm.data_type=function(Wr){var rs,fs=4093624447;for(rs=0;rs<=31;rs++,fs>>>=1)if(1&fs&&Wr.dyn_ltree[2*rs]!==0)return nr;if(Wr.dyn_ltree[18]!==0||Wr.dyn_ltree[20]!==0||Wr.dyn_ltree[26]!==0)return rr;for(rs=32;rs<ar;rs++)if(Wr.dyn_ltree[2*rs]!==0)return rr;return nr}(Er)),Nr(Er,Er.l_desc),Nr(Er,Er.d_desc),Jr=function(Wr){var rs;for(pr(Wr,Wr.dyn_ltree,Wr.l_desc.max_code),pr(Wr,Wr.dyn_dtree,Wr.d_desc.max_code),Nr(Wr,Wr.bl_desc),rs=hr-1;3<=rs&&Wr.bl_tree[2*$r[rs]+1]===0;rs--);return Wr.opt_len+=3*(rs+1)+5+5+4,rs}(Er),Lr=Er.opt_len+3+7>>>3,(Hr=Er.static_len+3+7>>>3)<=Lr&&(Lr=Hr)):Lr=Hr=Dr+5,Dr+4<=Lr&&Tr!==-1?wr(Er,Tr,Dr,Br):Er.strategy===4||Hr===Lr?(ss(Er,2+(Br?1:0),3),Ir(Er,Mr,Ar)):(ss(Er,4+(Br?1:0),3),function(Wr,rs,fs,os){var ds;for(ss(Wr,rs-257,5),ss(Wr,fs-1,5),ss(Wr,os-4,4),ds=0;ds<os;ds++)ss(Wr,Wr.bl_tree[2*$r[ds]+1],3);Pr(Wr,Wr.dyn_ltree,rs-1),Pr(Wr,Wr.dyn_dtree,fs-1)}(Er,Er.l_desc.max_code+1,Er.d_desc.max_code+1,Jr+1),Ir(Er,Er.dyn_ltree,Er.dyn_dtree)),Yr(Er),Br&&Qr(Er)},er._tr_tally=function(Er,Tr,Dr){return Er.pending_buf[Er.d_buf+2*Er.last_lit]=Tr>>>8&255,Er.pending_buf[Er.d_buf+2*Er.last_lit+1]=255&Tr,Er.pending_buf[Er.l_buf+Er.last_lit]=255&Dr,Er.last_lit++,Tr===0?Er.dyn_ltree[2*Dr]++:(Er.matches++,Tr--,Er.dyn_ltree[2*(mr[Dr]+ar+1)]++,Er.dyn_dtree[2*zr(Tr)]++),Er.last_lit===Er.lit_bufsize-1},er._tr_align=function(Er){ss(Er,2,3),ts(Er,yr,Mr),function(Tr){Tr.bi_valid===16?(ns(Tr,Tr.bi_buf),Tr.bi_buf=0,Tr.bi_valid=0):8<=Tr.bi_valid&&(Tr.pending_buf[Tr.pending++]=255&Tr.bi_buf,Tr.bi_buf>>=8,Tr.bi_valid-=8)}(Er)}},{"../utils/common":41}],53:[function(Xn,Qn,er){Qn.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Xn,Qn,er){(function(tr){(function(nr,rr){if(!nr.setImmediate){var sr,ir,or,ar,cr=1,lr={},hr=!1,fr=nr.document,gr=Object.getPrototypeOf&&Object.getPrototypeOf(nr);gr=gr&&gr.setTimeout?gr:nr,sr={}.toString.call(nr.process)==="[object process]"?function(vr){process.nextTick(function(){dr(vr)})}:function(){if(nr.postMessage&&!nr.importScripts){var vr=!0,_r=nr.onmessage;return nr.onmessage=function(){vr=!1},nr.postMessage("","*"),nr.onmessage=_r,vr}}()?(ar="setImmediate$"+Math.random()+"$",nr.addEventListener?nr.addEventListener("message",yr,!1):nr.attachEvent("onmessage",yr),function(vr){nr.postMessage(ar+vr,"*")}):nr.MessageChannel?((or=new MessageChannel).port1.onmessage=function(vr){dr(vr.data)},function(vr){or.port2.postMessage(vr)}):fr&&"onreadystatechange"in fr.createElement("script")?(ir=fr.documentElement,function(vr){var _r=fr.createElement("script");_r.onreadystatechange=function(){dr(vr),_r.onreadystatechange=null,ir.removeChild(_r),_r=null},ir.appendChild(_r)}):function(vr){setTimeout(dr,0,vr)},gr.setImmediate=function(vr){typeof vr!="function"&&(vr=new Function(""+vr));for(var _r=new Array(arguments.length-1),kr=0;kr<_r.length;kr++)_r[kr]=arguments[kr+1];var Cr={callback:vr,args:_r};return lr[cr]=Cr,sr(cr),cr++},gr.clearImmediate=ur}function ur(vr){delete lr[vr]}function dr(vr){if(hr)setTimeout(dr,0,vr);else{var _r=lr[vr];if(_r){hr=!0;try{(function(kr){var Cr=kr.callback,br=kr.args;switch(br.length){case 0:Cr();break;case 1:Cr(br[0]);break;case 2:Cr(br[0],br[1]);break;case 3:Cr(br[0],br[1],br[2]);break;default:Cr.apply(rr,br)}})(_r)}finally{ur(vr),hr=!1}}}}function yr(vr){vr.source===nr&&typeof vr.data=="string"&&vr.data.indexOf(ar)===0&&dr(+vr.data.slice(ar.length))}})(typeof self>"u"?tr===void 0?this:tr:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports);function getRandomInt(Zn){return Math.floor(Math.random()*Math.floor(Zn))}function isHtml(Zn){return/<[^>]+>/.test(Zn)}function stripHtml(Zn){if(!isHtml(Zn))return Zn;if(Zn==null)return"";let Jn=Zn;return Jn=Jn.replace(/[\t ]+/g," "),Jn=Jn.replace(/&bull;/g,""),Jn=Jn.replace(/&nbsp;/g," "),Jn=Jn.replace(//g,"-"),Jn=Jn.replace(/<br *[/]?>/g,`
`),Jn=Jn.replace(/(<([^>]+)>)/gi,""),Jn=Jn.replace(/[&][a-zA-Z]+;/g,""),Jn}function download(Zn,Jn,Xn){const Qn=document.createElement("a"),er=new Blob([Xn],{type:Jn}),tr=URL.createObjectURL(er);Qn.setAttribute("href",tr),Qn.setAttribute("download",Zn),Qn.setAttribute("target","_blank"),Qn.click()}function stripNumber(Zn){return Zn.replace(/[0-9]+ *[.-] *(.*)/,"$1")}function fix_xml_object(Zn){const Jn=[Zn];for(;Jn.length;){const Xn=Jn.pop();for(const er in Xn){const tr=Xn[er];if(Array.isArray(tr)&&tr.length===1){const nr=tr[0],rr=Object.values(nr);rr.length===1&&Array.isArray(rr[0])&&(Xn[er]=rr[0])}}const Qn=Xn.$;delete Xn.$,Xn&&typeof Xn=="object"&&Jn.push(...Object.values(Xn)),Qn&&Object.assign(Xn,Qn)}}function to_kebab_case(Zn){return Zn.trim().toLowerCase().replace(/\s/g,"-")}function to_snake_case(Zn){return Zn.toLowerCase().replace(/\s/g,"_")}function delete_path_related_characters(Zn){return Zn.replace(/([\ :])/g,"_").replace(/([\\\/\$\@\~\'\"\`\ \:])/g,"")}function hashFnv32a$1(Zn,Jn=198209835){let Xn,Qn,er=Jn===void 0?2166136261:Jn;for(Xn=0,Qn=Zn.length;Xn<Qn;Xn++)er^=Zn.charCodeAt(Xn),er+=(er<<1)+(er<<4)+(er<<7)+(er<<8)+(er<<24);return er>>>0}function findLastIndexOfAssumingSorted(Zn,Jn){let Xn=-1;const Qn=Zn.length;for(let er=0;er<Qn;er++)if(Jn(Zn[er]))Xn=er;else if(Xn)return Xn;return Xn}function pushAfterLastOfAssumingSorted(Zn,Jn,Xn){const Qn=findLastIndexOfAssumingSorted(Zn,Xn);Qn===-1?Zn.push(Jn):Zn.splice(Qn+1,0,Jn)}function escapeRegex(Zn){return Zn.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function groupBy(Zn,Jn=Xn=>Xn.toString()){const Xn={};for(let Qn=0;Qn<Zn.length;Qn++){const er=Zn[Qn],tr=Jn(er),nr=Xn[tr];nr?nr.push(er):Xn[tr]=[er]}return Xn}let gitSha1;typeof window>"u"?gitSha1=async Zn=>{const Jn=`blob ${Zn.length}\0`,Xn=(await __vitePreload(()=>import("./__vite-browser-external.b25bb000.js"),[],import.meta.url)).createHash("sha1");return Xn.update(Jn),Xn.update(Zn),Xn.digest("hex")}:gitSha1=async Zn=>{const Jn=`blob ${typeof Zn=="string"?Zn.length:Zn.byteLength}\0`,Qn=new TextEncoder().encode(Jn+Zn),er=await crypto.subtle.digest("SHA-1",Qn);return Array.from(new Uint8Array(er)).map(tr=>tr.toString(16).padStart(2,"0")).join("")};function forEachValueRecursive(Zn,Jn){const Xn=[Zn];for(;Xn.length;){const Qn=Xn.pop();for(const er of Object.values(Qn))er&&typeof er=="object"&&Xn.push(er);Array.isArray(Qn)||Jn(Qn)}}function forEachPairRecursive(Zn,Jn){const Xn=[Zn];for(;Xn.length;){const Qn=Xn.pop();if(isObject(Qn))for(const er of Object.keys(Qn)){const tr=Qn[er];if(isObject(tr))if(Array.isArray(Qn))for(const nr of tr)Jn(nr,er),Xn.push(tr);else Jn(tr,er),Xn.push(tr);else Jn(tr,er)}}}function shouldPatch(Zn,Jn){for(const Xn of Jn)switch(Xn.type){case"or":{if(!Xn.value.includes(Zn[Xn.field]))return!1;break}case"not":{if(Zn[Xn.field]===Xn.value)return!1;break}case"if":default:{if(Zn[Xn.field]!==Xn.value)return!1;break}}return!0}function patchJson(Zn,Jn){let Xn=0;return forEachValueRecursive(Zn,Qn=>{for(const er of Object.keys(Jn)){const tr=Jn[er],nr=Qn[er];let rr=tr[nr];if(!rr)if(nr!==void 0&&tr.$any)rr=tr.$any;else continue;if((!rr.$patchConditions||shouldPatch(Qn,rr.$patchConditions))&&(rr.$move?Qn[rr.$move]=nr:Object.assign(Qn,rr),Xn++,delete Qn.$patchConditions,rr.$patchPush)){for(const[sr,ir]of Object.entries(rr.$patchPush)){const or=JSON.parse(JSON.stringify(ir));sr in Qn||(Qn[sr]=[]),Array.isArray(or)?Qn[sr].push(...or):Qn[sr].push(or)}delete Qn.$patchPush}}}),Xn}function sortByAscending$1(Zn,Jn){return[...Zn].sort((Xn,Qn)=>(Jn(Xn)??"").toString().localeCompare((Jn(Qn)??"").toString(),void 0,{numeric:!0}))}function sortByDescending(Zn,Jn){return[...Zn].sort((Xn,Qn)=>(Jn(Qn)??"").toString().localeCompare((Jn(Xn)??"").toString(),void 0,{numeric:!0}))}const sortBy=sortByAscending$1;function sortByAscendingInplace(Zn,Jn){return Zn.sort((Xn,Qn)=>(Jn(Xn)??"").toString().localeCompare((Jn(Qn)??"").toString(),void 0,{numeric:!0}))}function sortByDescendingInplace(Zn,Jn){return Zn.sort((Xn,Qn)=>(Jn(Qn)??"").toString().localeCompare((Jn(Xn)??"").toString(),void 0,{numeric:!0}))}function findMax(Zn,Jn){if(!Zn.length)return;if(Zn.length==1)return Zn[0];let Xn=Zn[0],Qn=Jn(Xn).toString();for(const er of Zn){const tr=(Jn(er)??"").toString();tr.localeCompare(Qn,void 0,{numeric:!0})===1&&(Xn=er,Qn=tr)}return Xn}function findMin(Zn,Jn){if(!Zn.length)return;let Xn=Zn[0],Qn=Jn(Xn).toString();for(const er of Zn){const tr=(Jn(er)??"").toString();tr.localeCompare(Qn,void 0,{numeric:!0})===-1&&(Xn=er,Qn=tr)}return Xn}function diffSet(Zn,Jn){const Xn=[];for(const Qn of Jn.values())Zn.delete(Qn)||Xn.push(Qn);for(const Qn of Zn.values())Xn.push(Qn);return Xn}function suffixIf(Zn,Jn){return Zn?Zn.toString()+Jn:""}function prefixIf(Zn,Jn){return Jn?Zn+Jn.toString():""}function surroundIf(Zn,Jn,Xn){return Jn?Zn+Jn.toString()+Xn:""}function betweenIf(Zn,Jn,Xn){return Zn&&Xn?`${Zn}${Jn.toString()}${Xn}`:`${Zn}${Xn}`}function textIf(Zn,Jn){return Zn?Jn:""}function cleanName(Zn){return stripNumber(`${Zn}`).trim()}function replaceKey(Zn,Jn,Xn){Jn in Zn&&(Zn[Xn]=Zn[Jn],delete Zn[Jn])}function countKeys(Zn){const Jn={};for(const Xn of Zn)Jn[Xn]=1+(Jn[Xn]||0);return Jn}function flattenRecursive(Zn,Jn=0,Xn=[]){Xn.push({depth:Jn,current:Zn.self});for(const Qn of Zn.childs)flattenRecursive(Qn,Jn+1,Xn);return Xn}function forEachRecursive(Zn,Jn){for(const Xn of Zn.childs)forEachRecursive(Xn,Jn);Jn(Zn)}function recurseThis(Zn,Jn,Xn=100,Qn=0){const er={childs:[],self:Zn};if(Qn<Xn){const tr=Zn[Jn]();for(const nr of tr)er.childs.push(recurseThis(nr,Jn,Xn,Qn+1))}return er}function recurseFn(Zn,Jn,Xn=100,Qn=0){const er={childs:[],self:Zn};if(Qn<Xn){const tr=Jn(Zn,Qn);if(tr!==void 0)for(const nr of tr){const rr=recurseFn(nr,Jn,Xn,Qn+1);rr.self.parent=Zn,er.childs.push(rr)}}return er}function clone(Zn){return Object.create(Zn)}function copy(Zn){return Object.assign(Object.create(Object.getPrototypeOf(Zn)),Zn)}function arrayRemove(Zn,Jn){const Xn=Zn.findIndex(Qn=>Qn===Jn);return Xn!==-1?(Zn.splice(Xn,1),!0):!1}function addObjIfMissing(Zn,Jn,Xn){const Qn=Zn[Jn];if(Qn&&!Qn.includes(Xn)){Qn.push(Xn);return}Zn[Jn]=[Xn]}function addObj(Zn,Jn,Xn){const Qn=Zn[Jn];if(Qn){Qn.push(Xn);return}Zn[Jn]=[Xn]}function addObjUnique(Zn,Jn,Xn){const Qn=Zn[Jn];if(Qn&&Qn.indexOf(Xn)===-1){Qn.push(Xn);return}Zn[Jn]=[Xn]}function popObj(Zn,Jn,Xn){const Qn=Zn[Jn];if(Qn){const er=Qn.indexOf(Xn);er>=0&&Qn.splice(er,1);return}}function add(Zn,Jn,Xn=1){const Qn=Zn[Jn]||0,er=Xn+Qn;return Xn===0?delete Zn[Jn]:Zn[Jn]=er,Qn}function remove(Zn,Jn,Xn=1){const er=(Zn[Jn]||0)-Xn;return er===0?delete Zn[Jn]:Zn[Jn]=er,er}function addOne(Zn,Jn){const Xn=Zn[Jn]||0;return Zn[Jn]=1+Xn,Xn}function removeOne(Zn,Jn){const Qn=(Zn[Jn]||0)-1;return Qn===0?delete Zn[Jn]:Zn[Jn]=Qn,Qn}function isObject(Zn){return Zn&&typeof Zn=="object"}function isDefaultObject(Zn){return!Object.getPrototypeOf(Object.getPrototypeOf(Zn))}function removePrefix$3(Zn,Jn){return Zn.startsWith(Jn)?Zn.substring(Jn.length):Zn}function removeSuffix$1(Zn,Jn){return Zn.endsWith(Jn)?Zn.substring(0,Zn.length-Jn.length):Zn}function makeNoObserve(Zn){Object.defineProperty(Zn,Symbol.toStringTag,{get:function(){return"ObjectNoObserve"}})}function setMinus(Zn,Jn){const Xn=new Set;for(const Qn of Zn.values())Jn.has(Qn)||Xn.add(Qn);return Xn}function combineArrays(Zn){const Jn=[];for(const Xn of Zn)Xn&&Jn.push(...Xn);return Jn}function arraysEqual(Zn,Jn){if(Zn.length!==Jn.length)return!1;for(let Xn=0;Xn<Zn.length;++Xn)if(Zn[Xn]!==Jn[Xn])return!1;return!0}function textSearchRegex(Zn){const Xn=`^(?=.*${escapeRegex(Zn).split(" ").map(er=>`(?=.*${er})`).join("")}).*$`;return new RegExp(Xn,"i")}function generateBattlescribeId(){return[getRandomInt(65535),getRandomInt(65535),getRandomInt(65535),getRandomInt(65535)].map(Zn=>Zn.toString(16).padStart(4,"0")).join("-")}function*enumerate_zip(Zn,Jn){for(let Xn=0;Xn<Math.min(Zn.length,Jn.length);Xn++)yield[Zn[Xn],Jn[Xn]]}function escapeXml(Zn){return Zn.toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}async function zipCompress(Zn,Jn,Xn){var Qn=new JSZip;return Qn.file(Zn,Jn),await Qn.generateAsync({type:Xn,compression:"DEFLATE"})}function debouncePromise(Zn,Jn){let Xn;return function(...Qn){return clearTimeout(Xn),new Promise(er=>{Xn=setTimeout(()=>{const tr=Zn(Qn);er(tr)},Jn)})}}function findSelfOrParentWhere(Zn,Jn){let Xn=Zn;for(;Xn&&!Object.is(Xn,Xn.parent);){if(Jn(Xn))return Xn;Xn=Xn.parent}}function findParentWhere(Zn,Jn){let Xn=Zn.parent;for(;Xn&&!Object.is(Xn,Xn.parent);){if(Jn(Xn))return Xn;Xn=Xn.parent}}function forEachParent(Zn,Jn){let Xn=Zn.parent;for(;Xn&&!(!Xn||Jn(Xn)===!1);)Xn=Xn.parent}function first(Zn){for(const Jn of Zn)return Jn}function has(Zn,Jn){for(const Xn of Zn)if(Jn===Xn)return!0;return!1}function capitalize(Zn){return Zn.charAt(0).toUpperCase()+Zn.slice(1)}function arrayIf(Zn,Jn){return Zn?[Jn]:[]}function inBounds(Zn,Jn,Xn){return Zn<Jn?Jn:Zn>Xn?Xn:Zn}const helpers=Object.freeze(Object.defineProperty({__proto__:null,add,addObj,addObjIfMissing,addObjUnique,addOne,arrayIf,arrayRemove,arraysEqual,betweenIf,capitalize,cleanName,clone,combineArrays,copy,countKeys,debouncePromise,delete_path_related_characters,diffSet,enumerate_zip,escapeRegex,escapeXml,findLastIndexOfAssumingSorted,findMax,findMin,findParentWhere,findSelfOrParentWhere,first,fix_xml_object,flattenRecursive,forEachPairRecursive,forEachParent,forEachRecursive,forEachValueRecursive,generateBattlescribeId,get gitSha1(){return gitSha1},groupBy,has,hashFnv32a:hashFnv32a$1,inBounds,isDefaultObject,isObject,makeNoObserve,patchJson,popObj,prefixIf,pushAfterLastOfAssumingSorted,recurseFn,recurseThis,remove,removeOne,removePrefix:removePrefix$3,removeSuffix:removeSuffix$1,replaceKey,setMinus,shouldPatch,sortBy,sortByAscending:sortByAscending$1,sortByAscendingInplace,sortByDescending,sortByDescendingInplace,stripNumber,suffixIf,surroundIf,textIf,textSearchRegex,to_kebab_case,to_snake_case,zipCompress},Symbol.toStringTag,{value:"Module"}));function dirname(Zn){return Zn.replaceAll("\\","/").split("/").slice(0,-1).join("/")}function filename(Zn){const Jn=Zn.replaceAll("\\","/").split("/");return Jn[Jn.length-1]}async function getFolderFiles(Zn){return electron?await electron.invoke("getFolderFiles",Zn):[]}async function getFolderFolders(Zn){if(electron)try{const Jn=[];if(!await electron.invoke("isDirectory",Zn))return[];const Qn=await electron.invoke("readdirSync",Zn);for(const er of Qn){const tr=`${Zn}/${er}`;try{if(await electron.invoke("isDirectory",tr)){const rr={name:er,path:tr};Jn.push(rr)}}catch(nr){console.error("Error reading dir:",tr,nr);continue}}return Jn}catch(Jn){throw console.error("Error:",Jn),Jn}}async function writeFile(Zn,Jn){if(!electron)return;const Xn=dirname(Zn);await electron.invoke("mkdirSync",Xn,{recursive:!0}),await electron.invoke("saveFile",Zn,Jn)}async function deleteFile(Zn){if(electron)return await electron.invoke("unlinkSync",Zn)}async function readFile(Zn){if(electron)return await electron.invoke("getFile",Zn)}async function showOpenDialog(Zn){if(electron)return electron.invoke("showOpenDialog",Zn)}async function showMessageBox(Zn){if(electron)return electron.invoke("showMessageBoxSync",Zn)}async function closeWindow(){if(electron)return electron.invoke("closeWindow")}async function getPath(Zn){if(electron)return await electron.invoke("getPath",Zn)}async function createFolder(Zn){electron&&await electron.invoke("mkdirSync",Zn,{recursive:!0})}let initialized=!1;const watchers={};async function watchFile(Zn,Jn){electron&&(initialized||(initialized=!0,electron.on("fileChanged",(Xn,Qn,er)=>{const tr=watchers[Qn];tr&&tr(Qn,er)})),await electron.invoke("chokidarWatchFile",Zn),watchers[Zn]=Jn)}async function unwatchFile(Zn){electron&&(delete watchers[Zn],await electron.invoke("chokidarUnwatchFile",Zn))}async function getFolderRemote(Zn){return electron?await electron.invoke("getFolderRemote",Zn):null}const node=Object.freeze(Object.defineProperty({__proto__:null,closeWindow,createFolder,deleteFile,dirname,filename,getFolderFiles,getFolderFolders,getFolderRemote,getPath,readFile,showMessageBox,showOpenDialog,unwatchFile,watchFile,writeFile},Symbol.toStringTag,{value:"Module"})),vue_init_9ZUD1XgGXo=defineNuxtPlugin(Zn=>{Zn.vueApp.use(vClickOutside),Zn.vueApp.use(at$1),Zn.$pinia.use(({store:Qn})=>{Qn.$router=Zn.$router});const Jn=globalThis.console.log;globalThis.$toRaw=toRaw,globalThis.console.log=(...Qn)=>Jn(...Qn.map(er=>toRaw(er))),globalThis.$markRaw=markRaw,globalThis.$helpers=helpers,globalThis.$node=node,globalThis.notify=A$1,globalThis.isEditor=!0,globalThis.$nextTick=nextTick,typeof globalThis.electron>"u"&&(globalThis.electron=null),useSettingsStore().init()}),_plugins=[plugin$1,revive_payload_client_4sVQNw7RlN,components_plugin_KR1HBZs4kY,unhead_KgADcZ0jPj,plugin,prefetch_client_5tzzN0oIVL,chunk_reload_client_UciE0i6zes,payload_client_yVLowv6hDl,plugin_1UohGbtF8v,vue_init_9ZUD1XgGXo],__default__={name:"PopupDialog",emits:["button","close","update:modelValue","cancel"],methods:{stop(Zn){Zn.stopImmediatePropagation()},click_button(){this.$emit("button"),this.buttonclose&&this.close()},veil_close_popup(){this.nocloseonclickoutside||this.close()},button_close_popup(){this.close()},close(){this.mobile?history.back():this.doClose()},doClose(){this.content=!1,this.$emit("update:modelValue",this.content),this.$emit("cancel"),this.$emit("close")},popstate(Zn){this.doClose()},esc_close_popup(Zn){var Jn;Zn.stopPropagation(),Zn.stopImmediatePropagation(),((Jn=Zn.key)==null?void 0:Jn.toLowerCase())==="escape"&&this.close()},before_print(Zn){let Xn=this.$refs.content.cloneNode(!0);document.body.appendChild(Xn),Xn.classList.add("printable");const Qn=()=>{document.body.removeChild(Xn)};addEventListener("afterprint",Qn,{once:!0})},isMobile(){var Zn=window.matchMedia||window.msMatchMedia;if(Zn){var Jn=Zn("(pointer:coarse)");return Jn.matches}return!1}},mounted(){addEventListener("keydown",this.esc_close_popup),this.print&&addEventListener("beforeprint",this.before_print),this.mobile&&(history.pushState({popupOpen:!0,url:window.location.toString()},""),addEventListener("popstate",this.popstate))},unmounted(){removeEventListener("keydown",this.esc_close_popup),this.print&&removeEventListener("beforeprint",this.before_print),this.mobile&&removeEventListener("popstate",this.popstate)},props:{modelValue:{default:!0,type:Boolean},text:{type:String,default:"Close"},noclose:{default:!1,type:Boolean},x:{default:!1,type:Boolean},button:{default:"",type:String},disabled:{default:!1,type:Boolean},slotstyle:{default:""},print:{type:Boolean,default:!1},buttonclose:{type:Boolean,default:!0},overflow:{type:Boolean,default:!1},keeponroutechange:{type:Boolean,default:!1},width:{type:String,default:"300px"},nocloseonclickoutside:{type:Boolean,default:!1}},watch:{modelValue(Zn){this.content=Zn}},data(){return{content:this.modelValue,mobile:this.isMobile()}}},__injectCSSVars__=()=>{useCssVars(Zn=>({"7e257ef4":Zn.width}))},__setup__=__default__.setup;__default__.setup=__setup__?(Zn,Jn)=>(__injectCSSVars__(),__setup__(Zn,Jn)):__injectCSSVars__;const _imports_16="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV/TSkWqDhYp4hCwOlkQFXHUKhShQqgVWnUwufRDaNKQtLg4Cq4FBz8Wqw4uzro6uAqC4AeIo5OToouU+L+k0CLGg+N+vLv3uHsHCPUS06zAGKDpFTOViIuZ7IoYfEUAEfSgH0Mys4xZSUrCc3zdw8fXuxjP8j735+hWcxYDfCLxDDPMCvE68dRmxeC8TxxmRVklPiceNemCxI9cV1x+41xwWOCZYTOdmiMOE4uFNlbamBVNjXiSOKpqOuULGZdVzluctVKVNe/JXxjK6ctLXKc5iAQWsAgJIhRUsYESKojRqpNiIUX7cQ//gOOXyKWQawOMHPMoQ4Ps+MH/4He3Vn5i3E0KxYGOF9v+GAaCu0CjZtvfx7bdOAH8z8CV3vKX68D0J+m1lhY9Anq3gYvrlqbsAZc7QOTJkE3Zkfw0hXweeD+jb8oCfbdA16rbW3Mfpw9AmrpK3gAHh8BIgbLXPN7d2d7bv2ea/f0AZphyovX12KAAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAHdElNRQfmBBgOKgbgcs+YAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAzFJREFUOMuVlWtMFGcUht8Ztt1lZmFwZlmWXXZZkF0tEW1TI02s2kvU/miJicaUeMFoURtquDRYTdqGhhAjRkNL0ia9gReIrRVawRQjmqz+MsbourUlbUkI7sLOfLNovKS2Ro+/WGbKboBJ5s98532+c857cgZEhBv7D9rivuA+vXKNSESYyxtp2WFVg4FGdV25nYiA29uarJri7mQQY0xReu9vXGWfLexiS5NVz8n9RocYZRbpl/tvrsiG6vSsZxBuMwhRBiGqyfKZeytfE2aC/bl/3/MJr+u7SR2DEE14Cutw7dtfOSbP22s80CSpj214PSsd7LeP662ay9Vh1MRF5xeRtnYLiAgNoS2cruR+qBsCmJTdx8pXTCv/yieNNt1b0KkZYlV3YfuNjs4MIkIyEKFD0HIdDcZb9eyc/sSqsmSmQ427bczpOmqMUeX8tqHWpowkx3h79NjbmHDk1Zqgotz/6K2XskZ2VlrVIv8JU5kF8z+/2laXYWRM68/aB+dxx6Hs0Q1GMUk6q3r93UbYmE0+3Nt9iv+/PmXTK4+v5nRBqTH2VIc4lVm+70i4d4BPpU07FruadnFqib/OZBSEaNzhODxyqJ9Pp+OR5ql5LGdydx++QgBn/P6c/m+pZeADKZ0uJfCPvR+JzpOnjkJ/+CoAIgAcOA4AnuJJWWaIdccWlsmptBwRmWH1taLSdfL7DPZgOQEgAOSe18U/fTSM+D+fTsZZeD7yX6m4yRmJT5gAxvqHq6oEtaj4tMnN0iWtPw528USEiSLvexqEWNIoi3ROe7lYTmnK37U1dtVd8JMRNu4qaPk6HE4agOvt0Is91cwAZYI0OFoWVEzAa9XvZ2l5bhNsbOGiAz9Ebk5z82LPu5zqd29nEKcyzcwZHF0WyCUi4NZnrXZVVnpMo1Hob/750vW0o9HXcZNTS/K3GzPVefuFkaWL8hAv9lUktwyE6FjJC80N2h1+xn0IAgt4qiZ7qkGIxRYE6rF56BYSLs8ODUJ0fPGLzV9duszPemP/fpxjQe9WDWJszOc7WD16jAcR4Z3QAW68fEn5l3+p/Fx/AYGWIEbeWLa8gsIcEeEZsTM0Y8K17+YAAAAASUVORK5CYII=",PopupDialog_vue_vue_type_style_index_0_scoped_32f9a878_lang="",_export_sfc=(Zn,Jn)=>{const Xn=Zn.__vccOpts||Zn;for(const[Qn,er]of Jn)Xn[Qn]=er;return Xn},_withScopeId$1=Zn=>(pushScopeId("data-v-32f9a878"),Zn=Zn(),popScopeId(),Zn),_hoisted_1$4={class:"content",ref:"content"},_hoisted_2$4={key:0,class:"head"},_hoisted_3$4=_withScopeId$1(()=>createBaseVNode("img",{src:_imports_16},null,-1)),_hoisted_4$3=[_hoisted_3$4],_hoisted_5$2={class:"close-wrap"},_hoisted_6$2=["disabled"];function _sfc_render$3(Zn,Jn,Xn,Qn,er,tr){return er.content?(openBlock(),createBlock(Teleport,{key:0,to:"#popups"},[createBaseVNode("div",{class:normalizeClass(["container",{allowoverflow:Xn.overflow}]),onClick:Jn[4]||(Jn[4]=(...nr)=>tr.stop&&tr.stop(...nr))},[createBaseVNode("div",{class:"veil",onClick:Jn[0]||(Jn[0]=(...nr)=>tr.veil_close_popup&&tr.veil_close_popup(...nr))}),createBaseVNode("div",{class:normalizeClass(["box",{print:Xn.print}]),style:normalizeStyle(Xn.slotstyle)},[createBaseVNode("div",_hoisted_1$4,[Xn.x?(openBlock(),createElementBlock("div",_hoisted_2$4,[renderSlot(Zn.$slots,"header",{},void 0,!0),Xn.x?(openBlock(),createElementBlock("div",{key:0,onClick:Jn[1]||(Jn[1]=(...nr)=>tr.close&&tr.close(...nr)),class:"xCross"},_hoisted_4$3)):createCommentVNode("",!0)])):createCommentVNode("",!0),renderSlot(Zn.$slots,"default",{},void 0,!0)],512),createBaseVNode("div",_hoisted_5$2,[renderSlot(Zn.$slots,"boutons",{},void 0,!0),Xn.button?(openBlock(),createElementBlock("button",{key:0,disabled:Xn.disabled,class:"bouton close",onClick:Jn[2]||(Jn[2]=(...nr)=>tr.click_button&&tr.click_button(...nr))},toDisplayString(Xn.button),9,_hoisted_6$2)):createCommentVNode("",!0),Xn.noclose?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:1,class:"bouton close",onClick:Jn[3]||(Jn[3]=(...nr)=>tr.button_close_popup&&tr.button_close_popup(...nr))},toDisplayString(Xn.text),1))])],6)],2)])):createCommentVNode("",!0)}const __nuxt_component_0$1=_export_sfc(__default__,[["render",_sfc_render$3],["__scopeId","data-v-32f9a878"]]),usePromptStore=defineStore("prompts",{state:()=>({}),persist:{storage:globalThis.localStorage},actions:{get(Zn){return this.$state[Zn]},set(Zn,Jn){this.$state[Zn]=Jn}}}),Settings_vue_vue_type_style_index_0_lang="",_sfc_main$4={setup(){return{settings:useSettingsStore(),prompt:usePromptStore()}},computed:{noRevisionPopup:{get(){return this.prompt.get("revision")},set(Zn){this.prompt.set("revision",Zn)}}}},_hoisted_1$3=createBaseVNode("label",{for:"theme"},"Theme: ",-1),_hoisted_2$3=createBaseVNode("option",{value:"light"},"Light",-1),_hoisted_3$3=createBaseVNode("option",{value:"dark"},"Dark",-1),_hoisted_4$2=[_hoisted_2$3,_hoisted_3$3],_hoisted_5$1={class:"row"},_hoisted_6$1=createBaseVNode("label",{for:"global-duplicate-id-error"},"Check for duplicate ids across all catalogues (requires reload)",-1),_hoisted_7$1={class:"row"},_hoisted_8$1=createBaseVNode("label",{for:"github-auto-increment"},"Auto increment revision when saving (requires github integration & internet)",-1),_hoisted_9$1={class:"row"},_hoisted_10$1=createBaseVNode("label",{for:"revision-popupt"},"Don't show popups asking to increment revision",-1),_hoisted_11$1={class:"row"},_hoisted_12$1=createBaseVNode("label",{for:"categories-ui-v2"},"Use new UI for categories",-1),_hoisted_13$1={class:"row"},_hoisted_14$1=createBaseVNode("label",{for:"sticky-scroll"},"Sticky Scroll (show parents even when out of view)",-1),_hoisted_15$1={key:0,class:"row"},_hoisted_16$1=createBaseVNode("label",{for:"auto-format"},"Automatically format characteristics on paste",-1),_hoisted_17$1={key:1,class:"row"},_hoisted_18$1=createBaseVNode("label",{for:"auto-rename"},"Automatically rename parent entry when assigning info links",-1),_hoisted_19$1={class:"mt-10px"},_hoisted_20$1=createBaseVNode("legend",null,"Display",-1),_hoisted_21$1={class:"row"},_hoisted_22$1=createBaseVNode("label",{for:""},"Sort Index",-1),_hoisted_23$1={class:"row"},_hoisted_24$1=createBaseVNode("label",{for:"refs"},"Refs",-1),_hoisted_25$1={class:"row"},_hoisted_26=createBaseVNode("label",{for:""},"Costs",-1),_hoisted_27={class:"row"},_hoisted_28=createBaseVNode("label",{for:""},"Primary Category",-1);function _sfc_render$2(Zn,Jn,Xn,Qn,er,tr){return openBlock(),createElementBlock("div",null,[createBaseVNode("div",null,[_hoisted_1$3,withDirectives(createBaseVNode("select",{id:"theme","onUpdate:modelValue":Jn[0]||(Jn[0]=nr=>Qn.settings.theme=nr)},_hoisted_4$2,512),[[vModelSelect,Qn.settings.theme]])]),createBaseVNode("div",_hoisted_5$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"global-duplicate-id-error","onUpdate:modelValue":Jn[1]||(Jn[1]=nr=>Qn.settings.globalDuplicateIdError=nr)},null,512),[[vModelCheckbox,Qn.settings.globalDuplicateIdError]]),_hoisted_6$1]),createBaseVNode("div",_hoisted_7$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"github-auto-increment","onUpdate:modelValue":Jn[2]||(Jn[2]=nr=>Qn.settings.githubAutoIncrement=nr)},null,512),[[vModelCheckbox,Qn.settings.githubAutoIncrement]]),_hoisted_8$1]),createBaseVNode("div",_hoisted_9$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"revision-popup","onUpdate:modelValue":Jn[3]||(Jn[3]=nr=>tr.noRevisionPopup=nr)},null,512),[[vModelCheckbox,tr.noRevisionPopup]]),_hoisted_10$1]),createBaseVNode("div",_hoisted_11$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"categories-ui-v2","onUpdate:modelValue":Jn[4]||(Jn[4]=nr=>Qn.settings.useNewCategoriesUI=nr)},null,512),[[vModelCheckbox,Qn.settings.useNewCategoriesUI]]),_hoisted_12$1]),createBaseVNode("div",_hoisted_13$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"sticky-scroll","onUpdate:modelValue":Jn[5]||(Jn[5]=nr=>Qn.settings.stickyScroll=nr)},null,512),[[vModelCheckbox,Qn.settings.stickyScroll]]),_hoisted_14$1]),Qn.settings.autoFormatCharacteristics?(openBlock(),createElementBlock("div",_hoisted_15$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"auto-format","onUpdate:modelValue":Jn[6]||(Jn[6]=nr=>Qn.settings.autoFormatCharacteristics=nr)},null,512),[[vModelCheckbox,Qn.settings.autoFormatCharacteristics]]),_hoisted_16$1])):createCommentVNode("",!0),Qn.settings.autoRenameInfoLinkParent?(openBlock(),createElementBlock("div",_hoisted_17$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"auto-rename","onUpdate:modelValue":Jn[7]||(Jn[7]=nr=>Qn.settings.autoRenameInfoLinkParent=nr)},null,512),[[vModelCheckbox,Qn.settings.autoRenameInfoLinkParent]]),_hoisted_18$1])):createCommentVNode("",!0),createBaseVNode("fieldset",_hoisted_19$1,[_hoisted_20$1,createBaseVNode("div",_hoisted_21$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"sort","onUpdate:modelValue":Jn[8]||(Jn[8]=nr=>Qn.settings.display.sortIndex=nr)},null,512),[[vModelCheckbox,Qn.settings.display.sortIndex]]),_hoisted_22$1]),createBaseVNode("div",_hoisted_23$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"refs","onUpdate:modelValue":Jn[9]||(Jn[9]=nr=>Qn.settings.display.references=nr)},null,512),[[vModelCheckbox,Qn.settings.display.references]]),_hoisted_24$1]),createBaseVNode("div",_hoisted_25$1,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"costs","onUpdate:modelValue":Jn[10]||(Jn[10]=nr=>Qn.settings.display.costs=nr)},null,512),[[vModelCheckbox,Qn.settings.display.costs]]),_hoisted_26]),createBaseVNode("div",_hoisted_27,[withDirectives(createBaseVNode("input",{type:"checkbox",id:"costs","onUpdate:modelValue":Jn[11]||(Jn[11]=nr=>Qn.settings.display.primaryCategory=nr)},null,512),[[vModelCheckbox,Qn.settings.display.primaryCategory]]),_hoisted_28])])])}const __nuxt_component_2$1=_export_sfc(_sfc_main$4,[["render",_sfc_render$2]]),_hoisted_1$2=["innerHTML"],_hoisted_2$2={key:0},_hoisted_3$2=createBaseVNode("br",null,null,-1),_hoisted_4$1=createBaseVNode("label",null,"Dont show this again",-1),_sfc_main$3=defineComponent({__name:"Prompt",setup(Zn){const Jn=usePromptStore(),Xn=ref(!1),Qn=ref(""),er=ref("Yes"),tr=ref("Cancel"),nr=ref(null),rr=ref(!1);let sr=null;globalThis.customPrompt=or=>{let ar=!0;if(sr!==null)throw new Error("Cannot create a Prompt when one is already active");const cr=new Promise(lr=>{if(typeof or=="string")Qn.value=or;else if(isObject(or)){if(or.id&&Jn.get(or.id)){ar=!1,lr(!1);return}Qn.value=or.html,tr.value=or.cancel??"Cancel",er.value=or.accept??"Yes",rr.value=!1,nr.value=or.id??null}sr=lr});return Xn.value=ar,cr};function ir(or){sr&&(sr(or),sr=null),rr.value&&nr.value&&Jn.set(nr.value,rr.value),Xn.value=!1}return(or,ar)=>{const cr=__nuxt_component_0$1;return unref(Xn)?(openBlock(),createBlock(cr,{key:0,modelValue:unref(Xn),"onUpdate:modelValue":ar[1]||(ar[1]=lr=>isRef(Xn)?Xn.value=lr:null),text:unref(tr),onButton:ar[2]||(ar[2]=lr=>ir(!0)),onClose:ar[3]||(ar[3]=lr=>ir(!1)),button:unref(er),nocloseonclickoutside:""},{default:withCtx(()=>[createBaseVNode("div",{innerHTML:unref(Qn)},null,8,_hoisted_1$2),unref(nr)?(openBlock(),createElementBlock("div",_hoisted_2$2,[_hoisted_3$2,withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":ar[0]||(ar[0]=lr=>isRef(rr)?rr.value=lr:null)},null,512),[[vModelCheckbox,unref(rr)]]),_hoisted_4$1])):createCommentVNode("",!0)]),_:1},8,["modelValue","text","button"])):createCommentVNode("",!0)}}}),_sfc_main$2={data(){return{settingsOpen:!1,bug:!1,feedback:!1,contact:"",text:"",text1:"",text2:""}},setup(){return{version:useRuntimeConfig().public.clientVersion,settings:useSettingsStore()}},computed:{can_submit_bug(){return this.text1&&this.text2},can_submit_feedback(){return this.text},electron(){return!!globalThis.electron}},methods:{submit_bug(){const Zn={contact:this.contact,happened:this.text1,expected:this.text2,type:"bug"};fetch("https://corsproxy.io/?https://www.newrecruit.eu/api/feedback",{method:"POST",body:JSON.stringify(Zn),headers:{"Content-Type":"application/json"}})},submit_feedback(){const Zn={contact:this.contact,content:this.text,type:"suggestion"};fetch("https://corsproxy.io/?https://www.newrecruit.eu/api/feedback",{method:"POST",body:JSON.stringify(Zn),headers:{"Content-Type":"application/json"}})}},components:{Settings:__nuxt_component_2$1,Prompt:_sfc_main$3}},_imports_0$1=""+new URL("icon.e7345919.png",import.meta.url).href,_imports_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAZCAYAAADaILXQAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAB3RJTUUH4gceBjUENG+WiAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAACGklEQVRIx7WVv2sUQRTHP2/2zsCecOfqhaCePwpRMCjYiTGlNiKWNhIQCztLtRUsBEEr8wdEsE4VBK0METuNjZWYQDAEFDzczWJxY+GbOBln904xDx7M7HznO2/fm++8hF8mgAnG4ua9Xu98v9+fAaa73e5kURQrQO7tcXgBrM9nAkLx5glwTTf4/hkY13WCfb5vnwTkAK8i5ANgBmjw23yOrd8JzXrjMeB0BCPAcT3ET8cfvKIRHAOOZFnmR3MuErXzpeDADnACmPAPSIEXQAF8Bz4Bc8At4GsNuRWRReA68AFY1yJvisgVR365juAf/Vun08kS4F1QmP9hY2VZFkaLthN2xmi+RrHXwFNgY0T8PEAX+FiTv3VgMriGd4bk/KG78w1rbVP/IAa8CjQ9BTeAXcDzCvxtDaKBMcbJ/CzwIwLeF5G1Ae5FsCv+U2IGg4FT5WGNMLR2xfuxJ4JtaTAOTwLcqMnfEwUnnqx3a5Qx/DKw35FfGEEUD5S4CfSAzSH4DWAvFXmOeV4Tbcwfm4o8xywFDv2FiMYBnu3A22KBiwBH9TX0F/rAlxEISsWVwfc3rvhNYApYAGbb7fYlLVoKPBpSg5N6c04BN7Vr3QcyrwVu7zIiIoC0Wq0DNeRzVe1tS0SRxoy1VgCT5/kasFpRsPdBm5Sw5YWLNuiFiMjLCvK3vhIjY4Z1f0nT9KAWyE/JXU+xUkEsPwGe1gSU5MFaMAAAAABJRU5ErkJggg==",_imports_2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAEmSURBVDhPlZTLSsRAEEXjCxQRX6Dzh/MRLtwouvBD3YhL3Y11kj7hGiYhc+DSVdVV1T2VZroZfku7Jkh7NRa9TFZt/VVkoStsSs+DeXhDm8BDW0/aCtOcRfJ0bXVaOmp27s1iAsmPYUMW2uyjrbNMN/WPS9hvvTfY6DrsvTfOTWambyz9ixLclPbl/MMAM4P3EjHmh25LyXmJ+FnJpiM4BIEksSFMb4t/2fTZ/JFMRNuwuZnNWJV+jonmIwZNRs7MeGKe9DV8SXFWT6XXEjf7Ka2BunuMbCh8QZp+N3sN3O5rMOfpf0KJ03NmSp99cxexiAKGra/w+SBX4S9iEu+MhvlHARxEM96thy2SN9EGGgG+7y/3FzExi+7CPqjZFN6kxTMNuu4P/5eO8a9CnUMAAAAASUVORK5CYII=",_imports_3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpVoqDlYQcQhSnayIijhqFYpQIdQKrTqYXL+EJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoC4uTkpukiJ/0sKLWI8OO7Hu3uPu3eAUCsx1WwbA1TNMpLxmJjOrIiBV3SiF0EMYlRmpj4rSQl4jq97+Ph6F+VZ3uf+HF3ZnMkAn0g8w3TDIl4nntq0dM77xGFWlLPE58QjBl2Q+JHristvnAsOCzwzbKSSc8RhYrHQwkoLs6KhEk8SR7KqRvlC2uUs5y3OaqnCGvfkLwzltOUlrtMcQBwLWIQEEQoq2EAJFqK0aqSYSNJ+zMPf7/glcink2gAjxzzKUCE7fvA/+N2tmZ8Yd5NCMaD9xbY/hoDALlCv2vb3sW3XTwD/M3ClNf3lGjD9SXq1qUWOgO5t4OK6qSl7wOUO0Peky4bsSH6aQj4PvJ/RN2WAnlsguOr21tjH6QOQoq4SN8DBITBcoOw1j3d3tPb275lGfz+YcHK2AYSdwAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAAd0SU1FB+UJFQolAuvg0VAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAERUlEQVRIx8VXXUwcVRT+7sydnZ0dFpYKyBK2GOGBFKMSjFVJsHS7YkNSk42+9EU0YGIao6ZQ1ESqPljRhz4ZHkoUEuOT1p9Yg6F0rYlRH5AqJaEPaKINu4Eu7jLMzs7Oz/VB23V3ZoHdlHiebu6Ze7/c833nzDmEMYad7Js5XZ791jimqAhnddYleUmrmmF+APBJRMnqbMUrknm/jLnIIeHLvrCo7nQn2Q741bfUO9aS9rBp4kTOgB+7MI8AxevBRG2AG3/ntLxRFvDZCQ3xhDUYX2PvmRYCqMAoj1RjPRlpCvKTLz8vOfxc8cZsTPcuLZtTf8bZuUpBAcC0ELieYOeuLpsfzsZ077Yvno3p3vMXjAupTXYYt9EC1eRStF/oj/SKWQfw2QkNS8vmlKrhaeyB+SRM3dNOn7kZ9luhXo1bg3sFCgAZDQOrcWuw4MWjb6r7VhP2yk6cWhYgioBpFgmJAroO8PzOggs1cW1vvy4nKQCkN9loKVCOAx5/lKKrk6IlRJFIWPjoEx37AgQA8Fea4aljHrTsp/jjuoX5KwZmYiZMy11wiXX7JIDXyMzFrPzx+VzcLU9tBrw7JqElRMsKazxuYfiNDGzmnufHo54gf+f+0SdTmzjudkH0KEX3Q2LZfPr9HESeYXHZdtJlQ1y/YV/lFBVh18pCgMhhsWIxHeoR4SnBuaIizGV11uXmfKyHojbAVQxcVUXQf0Rw9WV11sVJIml1cx7scvKayTDoupO4XI5BVZ37D3S6a0MSSSunaszvwgPuaik8dO2aiede2MJLr6hYW89LdiNp4+SoiqEXt7C4ZBScCYV4ECfNUDXmd43lgTYOkkQK9mKXc7B4IKUyLPyST+TFJQM3VAbGAXOXC4EFgaCzw50uTpaIUrwZbCCOD5ub8xfU1+fXdXX5dXOTE6Shzrkn+4hCNZ2tALi/IB2qnMB9ERHVNQSSl6Dz3rxoOg4IOHUCSG/aePhBj+NcTY3zLi3LVqhXJPM5gxUAE5foCAJBT7d7enXeJ5TuNJy48IpknvPLmCt2JDcKFcoYsHDFwJZSultRVYaFBQN2kZjW15zq8suYK1kyj3RTRJ8Qb+WypjF8MK1BzTDc3cIjUEtAAKTTDL/9bkHwEAw9K8Hn++eJ6bSNz7/QMfOdWdBu3CyZtC8sqp99bUzkDHbqv8AXvzcR+8FE9KiARw4K8EkEP/9qIWMCCy6lUBQAPcegKDZ+/MnAp18ZMFx6HErxfl9YVHf3W2SAJACauX21kjxAJgMQWvq32Bzk2s6MyUkOAMZPyxvBBjJSWiE7gwKAlisN+m+ajpwZk5MFgQg28pOyhOm96kBkCdPBRn7yf2/2CqiP9IrZaL/QfztfLkuYLgZ17asjvWK2o50OhIJkiPJIVQpIeaSaG8lQRzsdKAbd1QiznrSHjTJHGMlLJmqqyfh4uSNMOUObLBFFq2Bo+xtLw+9KZ6ba2AAAAABJRU5ErkJggg==",_imports_4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAgCAMAAADZqYNOAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAkNQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////zmGfoQAAAL90Uk5TAAN08vN2KePmLTfx/qcbDKb8ub+0HBNVVxq2CyfRayBQbXVxakMJCBnPYE4fkdfMs5qlwQUxerrTY8eBjsvWkMUWAg8BTajfiksNfLUGFVPCsheMyB5RuNyfSRE1HcaD1G+s3S7EWs0j2EgOeOCqM4lEZyZfCndhpKEyXr6bnSwvr8oqmSurQQSUsMAYi9s7fWU2+vvDcGZsPlJCk9pbeQfZ1fDefr1/+VRWIdCPEjho+KmgRiXhl7uGQHPikkd8TFklAAAAAWJLR0TAE2Hf+AAAAAlwSFlzAAANqwAADasBvUJgOAAAAk9JREFUKM9jYEACjEzMLKyMDDgAG/v+/RycuGS5uPfv5+HlwyHLLyAoKCQsIopDWkxcQkxSSkCaATeQkZVDcaq8gqKSsoqqGpinrsGqyamlqK0Dcbyorp6+gaGRsYg8A4OJqZm5haWVtY25rZ09yHmSIg4SjiYMTmrOLtKubu62Hp5e3j5qvn7+AYFBDC7BIaEQC9TCwiMio6KBrBgLNiAZGxfPIJmQCJZz4kpK1k2B2OWcmgai5NIZMjKzQKzsnNy8fCeYOyMLQGShHoOkRRGQUZyUWVKK8EVZEsiQ8nQGxopKJ4YqzZB8ZD9W1wB951Jbx8DgmVnfoNkIdZmJCZhSbfJjYGhOiGJgkG4x009yhEi25rWBo6g9U4eho7MLZJdOt3kP1MTe/fttYLJaff0g5gS7iZOgsoqTpyRCZGP9pk4DsYr7ps+ImAmNwln+/CB6doJoR6s6iKWU7ig9Z+4slAQzL9ULwpCu6QXqsc6d74Uky2S+AMLQWQgKjQ7xRYGTXOCyLbWgiHXkZ5i3eMlSkF2tbhHWUE8zqC1TBpq3fNEyBvf9+1esBMf6qhC7+Tpg/RmL2hkY/Ffs388AxPtBZq8OZehhWrNobfs6J4b1QkEMDBuAEgy1G/enNwNl4zcBHRKk1bXQdrOyhNbsLYrGK3g2MmQrTNwKMm3LNrCffdnKt+9YY5e5qGanp6UC3JnSBm3QKFSfsStWR7TUhQEZ9C/ZAA2KTFMs6Xj3Hn9ggDm5uithS+XS8Uv2Zu1b6x6MPSuYzHJgZtGfp44QAQBbAJc9o1Mk+QAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wMi0wN1QxNzozMTo1MCswMDowMFttfAMAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDItMDdUMTc6MzE6NTArMDA6MDAqMMS/AAAARnRFWHRzb2Z0d2FyZQBJbWFnZU1hZ2ljayA2LjcuOC05IDIwMTktMDItMDEgUTE2IGh0dHA6Ly93d3cuaW1hZ2VtYWdpY2sub3JnQXviyAAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7LwAAABh0RVh0VGh1bWI6OkltYWdlOjpoZWlnaHQANDc0fis41QAAABd0RVh0VGh1bWI6OkltYWdlOjpXaWR0aAA0Mzm4WtLhAAAAGXRFWHRUaHVtYjo6TWltZXR5cGUAaW1hZ2UvcG5nP7JWTgAAABd0RVh0VGh1bWI6Ok1UaW1lADE1ODEwOTY3MTB6P0nOAAAAE3RFWHRUaHVtYjo6U2l6ZQAxOC42S0JCW1UXCAAAAER0RVh0VGh1bWI6OlVSSQBmaWxlOi8vLi91cGxvYWRzLzU2L3NaenQxS3MvMjE0OC9lbGVjdHJvbl9pY29uXzEzMjQxMS5wbmfkifMWAAAAAElFTkSuQmCC",TitleBar_vue_vue_type_style_index_0_scoped_510c384b_lang="",_withScopeId=Zn=>(pushScopeId("data-v-510c384b"),Zn=Zn(),popScopeId(),Zn),_hoisted_1$1={class:"titlebar"},_hoisted_2$1={class:"titlebar-content titlebar-left",id:"titlebar-content"},_hoisted_3$1={class:"flex titletext"},_hoisted_4=_withScopeId(()=>createBaseVNode("img",{class:"w-30px h-30px",src:_imports_0$1},null,-1)),_hoisted_5={class:"m-auto version"},_hoisted_6={class:"text-slate-300"},_hoisted_7={class:"titlebar-content titlebar-right",id:"titlebar-content-right"},_hoisted_8=_withScopeId(()=>createBaseVNode("img",{class:"icon",src:_imports_0},null,-1)),_hoisted_9=_withScopeId(()=>createBaseVNode("span",{class:"icontext"},"Settings",-1)),_hoisted_10=[_hoisted_8,_hoisted_9],_hoisted_11=_withScopeId(()=>createBaseVNode("img",{class:"icon",src:_imports_2},null,-1)),_hoisted_12=_withScopeId(()=>createBaseVNode("span",{class:"icontext"},"Systems",-1)),_hoisted_13=_withScopeId(()=>createBaseVNode("a",{class:"iconbox no-underline",href:"https://discord.gg/cCtqGbugwb",target:"_blank"},[createBaseVNode("img",{class:"static-icon",src:_imports_3}),createBaseVNode("span",{class:"icontext"},"Discord")],-1)),_hoisted_14={key:1},_hoisted_15=_withScopeId(()=>createBaseVNode("img",{src:_imports_4},null,-1)),_hoisted_16=[_hoisted_15],_hoisted_17={class:"m-20px"},_hoisted_18=_withScopeId(()=>createBaseVNode("h2",{class:"text-center"},"Bug Report form",-1)),_hoisted_19=_withScopeId(()=>createBaseVNode("label",{for:"contact"},"Contact:",-1)),_hoisted_20=_withScopeId(()=>createBaseVNode("label",{for:"text1"},[createTextVNode("What happened "),createBaseVNode("span",{class:"gray"},"(include the steps to reproduce)"),createTextVNode(":*")],-1)),_hoisted_21=_withScopeId(()=>createBaseVNode("label",{for:"text2"},"What did you expect to happen:*",-1)),_hoisted_22={class:"m-20px"},_hoisted_23=_withScopeId(()=>createBaseVNode("h2",{class:"text-center"},"Feedback form",-1)),_hoisted_24=_withScopeId(()=>createBaseVNode("label",{for:"contact"},"Contact:",-1)),_hoisted_25=_withScopeId(()=>createBaseVNode("label",{for:"text"}," Do you have any suggestions to improve NewRecruit ?:* ",-1));function _sfc_render$1(Zn,Jn,Xn,Qn,er,tr){const nr=__nuxt_component_0$2,rr=__nuxt_component_0$1,sr=__nuxt_component_2$1,ir=_sfc_main$3;return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createVNode(nr,{to:{name:"index"},class:"titlecolor no-underline unselectable"},{default:withCtx(()=>[createBaseVNode("h1",_hoisted_3$1,[_hoisted_4,createBaseVNode("span",_hoisted_5,[createTextVNode(" New Recruit - Editor "),createBaseVNode("span",_hoisted_6,"v"+toDisplayString(Qn.version),1)])])]),_:1}),renderSlot(Zn.$slots,"default",{},void 0,!0)]),createBaseVNode("div",_hoisted_7,[createBaseVNode("div",{class:"iconbox no-underline unselectable",onClick:Jn[0]||(Jn[0]=or=>er.settingsOpen=!0)},_hoisted_10),tr.electron?(openBlock(),createBlock(nr,{key:0,class:"iconbox no-underline unselectable",to:"/system"},{default:withCtx(()=>[_hoisted_11,_hoisted_12]),_:1})):createCommentVNode("",!0),_hoisted_13,tr.electron?(openBlock(),createElementBlock("div",_hoisted_14,_hoisted_16)):createCommentVNode("",!0),er.bug?(openBlock(),createBlock(rr,{key:2,disabled:!tr.can_submit_bug,modelValue:er.bug,"onUpdate:modelValue":Jn[4]||(Jn[4]=or=>er.bug=or),button:"Submit",onButton:tr.submit_bug},{default:withCtx(()=>[createBaseVNode("div",_hoisted_17,[_hoisted_18,_hoisted_19,createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"text",id:"contact","onUpdate:modelValue":Jn[1]||(Jn[1]=or=>er.contact=or)},null,512),[[vModelText,er.contact]])]),_hoisted_20,withDirectives(createBaseVNode("textarea",{required:"",class:"w-full textbox",type:"text",id:"text1","onUpdate:modelValue":Jn[2]||(Jn[2]=or=>er.text1=or)},null,512),[[vModelText,er.text1]]),_hoisted_21,withDirectives(createBaseVNode("textarea",{required:"",class:"w-full mt-1px textbox",type:"text",id:"text2","onUpdate:modelValue":Jn[3]||(Jn[3]=or=>er.text2=or)},null,512),[[vModelText,er.text2]])])]),_:1},8,["disabled","modelValue","onButton"])):createCommentVNode("",!0),er.feedback?(openBlock(),createBlock(rr,{key:3,disabled:!tr.can_submit_feedback,modelValue:er.feedback,"onUpdate:modelValue":Jn[7]||(Jn[7]=or=>er.feedback=or),button:"Submit",onButton:tr.submit_feedback},{default:withCtx(()=>[createBaseVNode("div",_hoisted_22,[_hoisted_23,_hoisted_24,createBaseVNode("div",null,[withDirectives(createBaseVNode("input",{type:"text",id:"contact","onUpdate:modelValue":Jn[5]||(Jn[5]=or=>er.contact=or)},null,512),[[vModelText,er.contact]])]),_hoisted_25,withDirectives(createBaseVNode("textarea",{required:"",class:"w-full mt-1px textbox",type:"text",id:"text","onUpdate:modelValue":Jn[6]||(Jn[6]=or=>er.text=or)},null,512),[[vModelText,er.text]])])]),_:1},8,["disabled","modelValue","onButton"])):createCommentVNode("",!0),er.settingsOpen?(openBlock(),createBlock(rr,{key:4,modelValue:er.settingsOpen,"onUpdate:modelValue":Jn[8]||(Jn[8]=or=>er.settingsOpen=or)},{default:withCtx(()=>[createVNode(sr)]),_:1},8,["modelValue"])):createCommentVNode("",!0)]),createVNode(ir)])}const __nuxt_component_0=_export_sfc(_sfc_main$2,[["render",_sfc_render$1],["__scopeId","data-v-510c384b"]]),interpolatePath=(Zn,Jn)=>Jn.path.replace(/(:\w+)\([^)]+\)/g,"$1").replace(/(:\w+)[?+*]/g,"$1").replace(/:\w+/g,Xn=>{var Qn;return((Qn=Zn.params[Xn.slice(1)])==null?void 0:Qn.toString())||""}),generateRouteKey=(Zn,Jn)=>{const Xn=Zn.route.matched.find(er=>{var tr;return((tr=er.components)==null?void 0:tr.default)===Zn.Component.type}),Qn=Jn??(Xn==null?void 0:Xn.meta.key)??(Xn&&interpolatePath(Zn.route,Xn));return typeof Qn=="function"?Qn(Zn.route):Qn},wrapInKeepAlive=(Zn,Jn)=>({default:()=>Zn?h$2(KeepAlive,Zn===!0?{}:Zn,Jn):Jn}),_wrapIf=(Zn,Jn,Xn)=>(Jn=Jn===!0?{}:Jn,{default:()=>{var Qn;return Jn?h$2(Zn,Jn,Xn):(Qn=Xn.default)==null?void 0:Qn.call(Xn)}}),__nuxt_component_1=defineComponent({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(Zn,{attrs:Jn}){const Xn=useNuxtApp();return()=>h$2(RouterView,{name:Zn.name,route:Zn.route,...Jn},{default:Qn=>{if(!Qn.Component)return;const er=generateRouteKey(Qn,Zn.pageKey),tr=Xn.deferHydration(),nr=!!(Zn.transition??Qn.route.meta.pageTransition??appPageTransition),rr=nr&&_mergeTransitionProps([Zn.transition,Qn.route.meta.pageTransition,appPageTransition,{onAfterLeave:()=>{Xn.callHook("page:transition:finish",Qn.Component)}}].filter(Boolean));return _wrapIf(Transition,nr&&rr,wrapInKeepAlive(Zn.keepalive??Qn.route.meta.keepalive??appKeepalive,h$2(Suspense,{suspensible:!0,onPending:()=>Xn.callHook("page:start",Qn.Component),onResolve:()=>{nextTick(()=>Xn.callHook("page:finish",Qn.Component).finally(tr))}},{default:()=>h$2(RouteProvider,{key:er,routeProps:Qn,pageKey:er,hasTransition:nr})}))).default()}})}});function _toArray(Zn){return Array.isArray(Zn)?Zn:Zn?[Zn]:[]}function _mergeTransitionProps(Zn){const Jn=Zn.map(Xn=>({...Xn,onAfterLeave:_toArray(Xn.onAfterLeave)}));return defu(...Jn)}const RouteProvider=defineComponent({name:"RouteProvider",props:["routeProps","pageKey","hasTransition"],setup(Zn){const Jn=Zn.pageKey,Xn=Zn.routeProps.route,Qn={};for(const er in Zn.routeProps.route)Qn[er]=computed(()=>Jn===Zn.pageKey?Zn.routeProps.route[er]:Xn[er]);return provide("_route",reactive(Qn)),()=>h$2(Zn.routeProps.Component)}}),__nuxt_component_2=defineComponent({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(Zn,{slots:Jn,attrs:Xn}){const Qn=ref(!1);return onMounted(()=>{Qn.value=!0}),er=>{var sr;if(Qn.value)return(sr=Jn.default)==null?void 0:sr.call(Jn);const tr=Jn.fallback||Jn.placeholder;if(tr)return tr();const nr=er.fallback||er.placeholder||"",rr=er.fallbackTag||er.placeholderTag||"span";return createElementBlock(rr,Xn,nr)}}});function splitExactlyConstraints(Zn){if(!Zn.constraints)return Zn;const Jn=[];for(const Qn of Zn.constraints)if(Qn.type==="exactly"){const er={...Qn,id:Qn.id+"-min",type:"min"},tr={...Qn,id:Qn.id+"-max",type:"max"};Jn.push(er,tr)}else Jn.push(Qn);const Xn=copy(Zn);return Xn.constraints=Jn,Xn}function splitExactlyConstraintsModifiers(Zn){if(!Zn.modifiers&&!Zn.modifierGroups||!Zn.constraintsIterator)return Zn;const Jn={};for(const tr of Zn.constraintsIterator())tr.type==="exactly"&&(Jn[tr.id]=tr);function Xn(tr){const nr=[];for(const rr of tr)if(rr.field in Jn){const sr={...rr,field:rr.field+"-min"},ir={...rr,field:rr.field+"-max"};nr.push(sr,ir)}else nr.push(rr);return nr}function Qn(tr){const nr=[];for(const rr of tr){const sr={...rr};sr.modifiers&&(sr.modifiers=Xn(sr.modifiers)),sr.modifierGroups&&(sr.modifierGroups=Qn(sr.modifierGroups)),nr.push(sr)}return nr}const er=copy(Zn);return er.modifiers&&(er.modifiers=Xn(er.modifiers)),er.modifierGroups&&(er.modifierGroups=Qn(er.modifierGroups)),er}const isNonEmptyIfHasOneOf=["modifiers","modifierGroups","constraints","entryLinks","categoryLinks","selectionEntries","selectionEntryGroups","infoLinks","infoGroups","rules","profiles"],arrayKeys=["profile","rule","infoLink","infoGroup","selectionEntry","selectionEntryGroup","entryLink","profiles","rules","infoLinks","infoGroups","entryLinks","selectionEntries","selectionEntryLinks","selectionEntryGroups","categoryLinks","costTypes","profileTypes","characteristicTypes","categoryEntries","categories","forceEntries","forces","sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","rules","rootRules","publications","catalogueLinks","constraints","characteristics","costs"],arrayKeysWithoutId=["conditions","conditionGroups","modifiers","modifierGroups","repeats"],goodKeys=new Set([...arrayKeys,...arrayKeysWithoutId]),goodKeysWiki=new Set(arrayKeys);function getDataObject(Zn){if(Zn.isCatalogue&&Zn.isCatalogue())return Zn;if(Zn.gameSystem)return Zn.gameSystem;if(Zn.catalogue)return Zn.catalogue;throw Error("getDataObject data argument is not a valid system or catalogue")}function getDataDbId(Zn){if(Zn.isCatalogue&&Zn.isCatalogue()){if(Zn.id&&Zn.gameSystemId)return`${Zn.gameSystemId}-${Zn.id}`;if(Zn.id)return`${Zn.id}`}if(Zn.catalogue)return`${Zn.catalogue.gameSystemId}-${Zn.catalogue.id}`;if(Zn.gameSystem)return Zn.gameSystem.id;throw Error("getDataId data argument is not a valid system or catalogue")}class Base{constructor(Jn){Zr(this,"id");Zr(this,"type");Zr(this,"subType");Zr(this,"shared");Zr(this,"import");Zr(this,"collective");Zr(this,"comment");Zr(this,"publicationId");Zr(this,"typeName");Zr(this,"typeId");Zr(this,"categoryEntryId");Zr(this,"name");Zr(this,"hidden");Zr(this,"value");Zr(this,"page");Zr(this,"defaultAmount");Zr(this,"profiles");Zr(this,"rules");Zr(this,"infoLinks");Zr(this,"infoGroups");Zr(this,"publications");Zr(this,"costs");Zr(this,"selectionEntries");Zr(this,"selectionEntryGroups");Zr(this,"entryLinks");Zr(this,"profileTypes");Zr(this,"categoryEntries");Zr(this,"categoryLinks");Zr(this,"forceEntries");Zr(this,"sharedSelectionEntryGroups");Zr(this,"sharedSelectionEntries");Zr(this,"sharedProfiles");Zr(this,"sharedRules");Zr(this,"sharedInfoGroups");Zr(this,"target");Zr(this,"modifiers");Zr(this,"modifierGroups");Zr(this,"constraints");Zr(this,"repeats");Zr(this,"conditions");Zr(this,"conditionGroups");Zr(this,"catalogue");Zr(this,"extra_constraints");Zr(this,"childs");Zr(this,"loaded");Zr(this,"collective_recursive");Zr(this,"limited_to_one");Zr(this,"associations");Zr(this,"associationConstraints");Zr(this,"flatten");Zr(this,"collapsible");Zr(this,"sortIndex");Zr(this,"alias");return Object.setPrototypeOf(Jn,Object.getPrototypeOf(this))}get url(){return"%{main_catalogue|catalogue}/%{id}/%{getName}"}process(){this.loaded||(this.collective_recursive=this.isCollectiveRecursive(),this.limited_to_one=!this.canAmountBeAbove1(),this.loaded=!0)}toJson(){return entryToJson(this)}getCatalogue(){return this.catalogue}getGameSystem(){return this.getCatalogue().getGameSystem()}get[Symbol.toStringTag](){return globalThis.isEditor?"Object":"ObjectNoObserve"}isGroup(){return!1}isForce(){return!1}isCatalogue(){return!1}isLink(){return!1}isCategory(){return!1}isRoster(){return!1}isQuantifiable(){return!1}isEntry(){return!1}isIdUnique(){return!1}isRule(){return!1}isProfile(){return!1}isInfoGroup(){return!1}isUnit(){for(const Jn of this.categoryLinks||[])if(Jn.primary)return!0;return!1}getId(){return this.id}getType(){return this.subType??this.type}getTypeName(){return this.typeName}getCategoryEntryId(){return this.categoryEntryId}getHidden(){return this.hidden}getPage(){return this.page}getName(){return this.name??""}getDefaultAmount(){return this.defaultAmount}isCollective(){return this.collective}isCollectiveRecursive(){const Jn=[...this.selectionsIterator()];for(;Jn.length;){const Xn=Jn.pop();if(!Xn.isCollective()&&!Xn.isGroup())return!1;Jn.push(...Xn.selectionsIterator())}return!0}isEmptyNode(){for(const Jn of isNonEmptyIfHasOneOf)if(this[Jn]!==void 0)return!1;return!0}*forcesIterator(){}*associationsIterator(){this.associations&&(yield*this.associations)}*profilesIterator(){var Jn;for(const Xn of getAllInfoGroups(this))Xn.profiles&&(yield*Xn.profiles),Xn.infoLinks&&(yield*(Jn=Xn.infoLinks)==null?void 0:Jn.filter(Qn=>Qn.type==="profile").map(Qn=>Qn.target))}*rulesIterator(){var Jn;for(const Xn of getAllInfoGroups(this))Xn.rules&&(yield*Xn.rules),Xn.infoLinks&&(yield*(Jn=Xn.infoLinks)==null?void 0:Jn.filter(Qn=>Qn.type==="rule").map(Qn=>Qn.target))}*constraintsIterator(){this.constraints&&(yield*this.constraints)}*extraConstraintsIterator(){this.extra_constraints&&(yield*this.extra_constraints)}*modifierGroupsIterator(){this.modifierGroups&&(yield*this.modifierGroups)}*modifiersIterator(){this.modifiers&&(yield*this.modifiers)}*modifierGroupsIteratorRecursive(){yield this,this.isLink()&&(yield this.target);for(const Jn of this.modifierGroupsIterator())yield Jn,yield*iterateModifierGroupsRecursive(Jn.modifierGroups)}*selectionsIterator(){this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*localSelectionsIterator(){this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*nodesIterator(){this.isLink()&&(yield*this.target.nodesIterator()),this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}*entriesIterator(){this.isLink()&&(yield*this.target.entriesIterator()),this.selectionEntries&&(yield*this.selectionEntries),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks),this.childs&&(yield*this.childs)}*iterateSelectionEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups)}*iterateSelectionEntriesWithRoot(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups)}*iterateRootEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.forceEntries&&(yield*this.forceEntries)}*iterateAllRootEntries(){this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.forceEntries&&(yield*this.forceEntries)}*categoryLinksIterator(){this.categoryLinks&&(yield*this.categoryLinks)}*infoLinksIterator(){this.infoLinks&&(yield*this.infoLinks)}*infoGroupsIterator(){this.infoGroups&&(yield*this.infoGroups)}*infoRulesIterator(){if(this.isForce()){const Jn=this.getGameSystem();Jn.rules&&(yield*Jn.rules);const Xn=this.main_catalogue;Xn.rules&&(yield*Xn.rules);for(const Qn of Xn.importsWithEntries)Qn.rules&&(yield*Qn.rules)}this.rules&&(yield*this.rules)}*infoProfilesIterator(){this.profiles&&(yield*this.profiles)}forEachCond(Jn,Xn=0){if(Jn(this,0)===void 0)for(const Qn of this.selectionsIterator())Qn.forEachCond(Jn,Xn+1)}forEach(Jn){Jn(this);for(const Xn of this.selectionsIterator())Xn.forEach(Jn)}forEachNode(Jn){Jn(this);for(const Xn of this.nodesIterator())Xn.forEachNode(Jn)}forEachNodeCb(Jn){const Xn=[this],Qn=new Set;for(;Xn.length;){const er=Xn.pop();if(!Qn.has(er.id)){if(Qn.add(er.id),Jn(er),er.childs){Xn.push(...er.childs);continue}if(er.target){const tr=er.target;tr.selectionEntries&&Xn.push(...tr.selectionEntries),tr.selectionEntryGroups&&Xn.push(...tr.selectionEntryGroups),tr.entryLinks&&Xn.push(...tr.entryLinks)}er.selectionEntries&&Xn.push(...er.selectionEntries),er.selectionEntryGroups&&Xn.push(...er.selectionEntryGroups),er.entryLinks&&Xn.push(...er.entryLinks)}}}forEachObject(Jn,Xn=goodKeys,Qn){let er=[this],tr=[],nr=0;for(;er.length;){for(;er.length;){const rr=er.pop();for(const sr in rr){const ir=rr[sr];if(Xn.has(sr)&&isObject(ir))if(Array.isArray(ir)){if(ir.length&&isObject(ir[0]))for(let or=0;or<ir.length;or++){const ar=ir[or];Jn(ar,rr)!==!1&&tr.push(ar)}}else Jn(ir,rr)!==!1&&tr.push(ir)}}if(er=tr,tr=[],nr++,Qn&&nr>=Qn)break}}forEachObjectWhitelist(Jn,Xn=goodKeys,Qn){return this.forEachObject(Jn,Xn,Qn)}findOption(Jn){for(const Xn of this.selectionsIterator())if(Jn(Xn))return Xn}findOptionRecursive(Jn){const Xn=[...this.selectionsIterator()];for(;Xn.length;){const Qn=Xn.pop();if(Jn(Qn))return Qn}}find_recursive(Jn,Xn=!1){let Qn=[this],er=[];for(;Qn.length;){for(;Qn.length;){const tr=Qn.pop();for(const nr in tr){const rr=tr[nr];if(goodKeys.has(nr)&&isObject(rr))if(Array.isArray(rr)){if(rr.length&&isObject(rr[0]))for(let sr=0;sr<rr.length;sr++){const ir=rr[sr],or=Jn(ir);if(or)return ir;or!==!1&&(er.push(ir),ir.target&&Xn&&er.push(ir.target))}}else{const sr=Jn(rr);if(sr)return rr;sr!==!1&&(er.push(rr),rr.target&&Xn&&er.push(rr.target))}}}Qn=er,er=[]}}find(Jn,Xn=!1){let Qn=[this],er=[],tr=!0;for(;Qn.length;){for(;Qn.length;){const nr=Qn.pop();for(const rr in nr){const sr=nr[rr];if(goodKeys.has(rr)&&isObject(sr))if(Array.isArray(sr)){if(sr.length&&isObject(sr[0]))for(let ir=0;ir<sr.length;ir++){const or=sr[ir];if(Jn(or))return or;er.push(or),or.target&&Xn&&er.push(or.target)}}else{if(Jn(sr))return sr;er.push(sr),sr.target&&Xn&&er.push(sr.target)}}}if(!tr)return;tr=!1,Qn=er,er=[]}}getCosts(){return this.costs||[]}getPrimaryCategory(){for(const Jn of this.categoryLinks||[])if(Jn.primary)return Jn.targetId;return this.getCategoryEntryId()??UNCATEGORIZED_ID}getPrimaryCategoryLink(){for(const Jn of this.categoryLinks||[])if(Jn.primary)return Jn}getPackedConstraint(Jn){const Xn=Object.assign({},Jn);Xn.name=this.getName(),Xn.parent=this;const Qn=Jn.shared||this instanceof CategoryLink;Xn.childId=this.isLink()&&Qn?this.targetId:this.id,Xn.modifiers=[];for(const er of this.modifiersIterator())(er.field===Jn.id||er.field==="hidden"&&Jn.type==="min"&&!this.isCategory())&&Xn.modifiers.push(er);Xn.modifierGroups=[];for(const er of this.modifierGroupsIterator())e:for(const tr of iterateModifierGroupsRecursive([er]))for(const nr of tr.modifiers||[])if(nr.field===Jn.id||nr.field==="hidden"&&Jn.type==="min"&&!this.isCategory()){Xn.modifierGroups.push(er);break e}return Xn}getBoundConstraint(Jn){const Xn=this.getPackedConstraint(Jn);return Xn.scope="self",Xn}getChildBoundConstraints(Jn){const Xn=[];for(const Qn of this.selectionsIterator())if(!(Jn&&Qn.isGroup())){for(const er of Qn.constraintsIterator())(er.type==="min"||er.type==="exactly")&&er.scope==="parent"&&Xn.push(Qn.getBoundConstraint(er));Qn.isGroup()&&Xn.push(...Qn.getChildBoundConstraints())}return Xn}canAmountBeAbove1(){const Jn=getTheoreticalMaxes(this.constraintsIterator(),[...this.modifierGroupsIterator(),{modifiers:[...this.modifiersIterator()]}]);return!Jn.length||Jn.includes(-1)?!0:Math.min(...Jn)>1}hasOption(Jn){let Xn;return this.forEachCond(Qn=>(Qn.getName()===Jn&&(Xn=!0),Xn)),!!Xn}}class Entry extends Base{isEntry(){return!0}isQuantifiable(){return!0}isIdUnique(){return!0}}class Group extends Base{getDefaultSelectionEntryId(){return this.defaultSelectionEntryId}isGroup(){return!0}isIdUnique(){return!0}}class Link extends Base{constructor(){super(...arguments);Zr(this,"targetId")}isLink(){return!0}isGroup(){var Xn;return(Xn=this.target)==null?void 0:Xn.isGroup()}isCategory(){var Xn;return(Xn=this.target)==null?void 0:Xn.isCategory()}isQuantifiable(){var Xn;return(Xn=this.target)==null?void 0:Xn.isQuantifiable()}isEntry(){var Xn;return(Xn=this.target)==null?void 0:Xn.isEntry()}isIdUnique(){return!1}isProfile(){var Xn;return((Xn=this.target)==null?void 0:Xn.isProfile())||!1}isRule(){var Xn;return((Xn=this.target)==null?void 0:Xn.isRule())||!1}isInfoGroup(){var Xn;return((Xn=this.target)==null?void 0:Xn.isInfoGroup())||!1}isUnit(){if(this.target.isUnit())return!0;for(const Xn of this.categoryLinks||[])if(Xn.primary)return!0;return!1}getId(){return this.targetId}getType(){var Xn;return(Xn=this.target)==null?void 0:Xn.getType()}getPage(){var Xn;return this.page||((Xn=this.target)==null?void 0:Xn.page)}getHidden(){return this.target.hidden||this.hidden}getDefaultSelectionEntryId(){var Xn;return this.defaultSelectionEntryId||((Xn=this.target)==null?void 0:Xn.getDefaultSelectionEntryId())}getCategoryEntryId(){var Xn;return this.categoryEntryId??((Xn=this.target)==null?void 0:Xn.categoryEntryId)}get associationConstraints(){return this.target.associationConstraints}getAssociations(){return this.associations||this.target.associations}isCollective(){var Xn;return super.isCollective()||((Xn=this.target)==null?void 0:Xn.isCollective())}*extraConstraintsIterator(){yield*this.target.extraConstraintsIterator(),yield*super.extraConstraintsIterator()}*associationsIterator(){yield*this.target.associationsIterator(),yield*super.associationsIterator()}*rulesIterator(){yield*this.target.rulesIterator(),yield*super.rulesIterator()}*profilesIterator(){yield*this.target.profilesIterator(),yield*super.profilesIterator()}*constraintsIterator(){this.target&&(yield*this.target.constraintsIterator()),yield*super.constraintsIterator()}*modifierGroupsIterator(){yield*this.target.modifierGroupsIterator(),yield*super.modifierGroupsIterator()}*modifiersIterator(){yield*this.target.modifiersIterator(),yield*super.modifiersIterator()}*selectionsIterator(){yield*this.target.selectionsIterator(),yield*super.selectionsIterator()}*categoryLinksIterator(){yield*this.target.categoryLinksIterator(),yield*super.categoryLinksIterator()}*infoLinksIterator(){yield*this.target.infoLinksIterator(),yield*super.infoLinksIterator()}*infoGroupsIterator(){yield*this.target.infoGroupsIterator(),yield*super.infoGroupsIterator()}*infoRulesIterator(){yield*this.target.infoRulesIterator(),yield*super.infoRulesIterator()}*infoProfilesIterator(){yield*this.target.infoProfilesIterator(),yield*super.infoProfilesIterator()}getDefaultAmount(){return this.defaultAmount===void 0?this.target.defaultAmount:this.defaultAmount}getName(){var Xn;return((Xn=this.target)==null?void 0:Xn.name)??this.name??""}getPrimaryCategory(){var Xn;for(const Qn of this.categoryLinks||[])if(Qn.primary)return Qn.targetId;for(const Qn of((Xn=this.target)==null?void 0:Xn.categoryLinks)||[])if(Qn.primary)return Qn.targetId;return this.getCategoryEntryId()??UNCATEGORIZED_ID}getPrimaryCategoryLink(){var Xn;for(const Qn of this.categoryLinks||[])if(Qn.primary)return Qn;for(const Qn of((Xn=this.target)==null?void 0:Xn.categoryLinks)||[])if(Qn.primary)return Qn}getCosts(){var Qn;const Xn={};if((Qn=this.target)!=null&&Qn.costs)for(const er of this.target.costs)Xn[er.typeId]=er;if(this.costs)for(const er of this.costs)Xn[er.typeId]=er;return Object.values(Xn)}}Link.prototype.keyInfoCache={};class InfoLink extends Link{getTypeName(){var Jn;return(Jn=this.target)==null?void 0:Jn.typeName}}class CategoryLink extends Link{constructor(){super(...arguments);Zr(this,"primary");Zr(this,"main_catalogue")}get units(){return this.target.units}*selectionsIterator(){yield*this.target.units}isEmpty(){return this.target.isEmpty()}}const UNCATEGORIZED_ID="(No Category)",ILLEGAL_ID="(Illegal Units)";class Category extends Base{constructor(){super(...arguments);Zr(this,"units");Zr(this,"main_catalogue")}isCategory(){return!0}*selectionsIterator(){yield*this.units}isEmpty(){return!this.units.length}isIdUnique(){return!this.isEmptyNode()}}class Force extends Base{constructor(){super(...arguments);Zr(this,"categories");Zr(this,"forces");Zr(this,"main_catalogue")}isForce(){return!0}isEntry(){return!0}isIdUnique(){return!0}*selectionsIterator(){yield*this.categories,this.forces&&(yield*this.forces)}*rulesIterator(){var Xn;for(const Qn of getAllInfoGroups(this))Qn.rules&&(yield*Qn.rules),Qn.infoLinks&&(yield*(Xn=Qn.infoLinks)==null?void 0:Xn.filter(er=>er.type==="rule").map(er=>er.target));this.main_catalogue&&(yield*this.main_catalogue.rulesIterator())}generateForces(Xn){const Qn=[];for(const er of this.forceEntries||[]){const tr=clone(er);tr.main_catalogue=this.main_catalogue;const nr=[];for(const rr of er.categoryLinks||[])rr.targetId in Xn&&nr.push(Xn[rr.targetId]);tr.categories=nr,this.main_catalogue.index[tr.id]=tr,Qn.push(tr)}return this.forces=Qn,Qn}isEmpty(){for(const Xn of this.categories)if(!Xn.isEmpty())return!1;return!0}*forcesIterator(){this.forceEntries&&(yield*this.forceEntries)}*forcesIteratorRecursive(){if(this.forces)for(const Xn of this.forces)yield Xn,yield*Xn.forcesIteratorRecursive()}}const maxValue=1/0;function getTheoreticalMaxes(Zn,Jn){var er,tr,nr,rr;const Xn=[];function Qn(sr){Xn.push(sr)}for(const sr of Zn){const ir=Xn.length;if(sr.field!=="selections"||sr.type!=="max")continue;if(sr.value>1){Qn(sr.value);continue}let or=sr.value;for(const ar of iterateModifierGroupsRecursive(Jn))for(const cr of ar.modifiers||[])if(cr.field===sr.id){if(cr.type==="increment"){if((er=ar.repeats)!=null&&er.length||(tr=cr.repeats)!=null&&tr.length){Qn(maxValue);continue}if(or+=cr.value,or>1){Qn(or);continue}}if(cr.type==="decrement"&&cr.value<0){if((nr=ar.repeats)!=null&&nr.length||(rr=cr.repeats)!=null&&rr.length){Qn(maxValue);continue}if(or-=cr.value,or>1){Qn(or);continue}}if(cr.type==="set"&&cr.value>1){if(cr.value===-1){Qn(maxValue);continue}Qn(cr.value)}}ir===Xn.length&&Qn(or)}return Xn}class ProfileType extends Base{}class Profile extends Base{isProfile(){return!0}getTypeName(){return this.typeName}isIdUnique(){return!0}}class Characteristic extends Base{constructor(){super(...arguments);Zr(this,"originalValue")}getLabel(){var Xn;return this.catalogue?((Xn=this.catalogue.findOptionById(this.typeId))==null?void 0:Xn.getName())??this.typeId:this.typeId}getTypeName(){return this.getLabel()}getName(){return`${this.getLabel()} = ${this.$text}`}}class InfoGroup extends Base{isInfoGroup(){return!0}isIdUnique(){return!0}}const basicQueryFields=new Set(["any","model","unit","upgrade","mount","crew"]);class Condition extends Base{}class Constraint extends Condition{}class Modifier extends Base{}class ModifierGroup extends Base{}class Rule extends Base{getDescription(){return Array.isArray(this.description)?this.description.join(`
`):this.description}isRule(){return!0}isIdUnique(){return!0}}function*getAllInfoGroups(Zn){yield Zn;for(const Jn of Zn.infoGroups||[])yield*getAllInfoGroups(Jn);for(const Jn of Zn.infoLinks||[])Jn.type==="infoGroup"&&(yield*getAllInfoGroups(Jn.target))}function*iterateModifierGroupsRecursive(Zn){if(Zn)for(const Jn of Zn)yield Jn,yield*iterateModifierGroupsRecursive(Jn.modifierGroups)}const BaseChilds=["costTypes","costs","categoryEntries","forceEntries","sharedSelectionEntries","selectionEntries","sharedSelectionEntryGroups","selectionEntryGroups","entryLinks","infoLinks","categoryLinks","catalogueLinks","sharedProfiles","profiles","profileTypes","characteristics","characteristicTypes","sharedInfoGroups","infoGroups","sharedRules","rules","publications","associations","modifierGroups","modifiers","constraints","conditionGroups","conditions","repeats"],goodJsonArrayKeys=new Set(BaseChilds),goodJsonKeys=new Set([...goodJsonArrayKeys,"defaultAmount","id","import","importRootEntries","name","hidden","field","scope","value","percentValue","shared","includeChildSelections","includeChildForces","childId","type","targetId","primary","typeId","collective","$text","page","typeName","defaultSelectionEntryId","revision","battleScribeVersion","authorName","authorContact","authorUrl","library","gameSystemId","gameSystemRevision","xmlns","readme","description","alias","comment","publicationDate","publisher","publisherId","publisherUrl","shortName","repeats","roundUp","defaultCostLimit","publicationId","label","labelMembers","maxAssociationsPerMember","ids","min","max","of","flatten","collapsible","sortIndex","subType","arg","negative","costTypeId","profileTypeId","characteristicTypeId"]);function rootToJson(Zn,Jn=!1){const Xn={catalogue:void 0,gameSystem:void 0},Qn={...Zn};Zn.gameSystemId?(Xn.catalogue=Qn,Xn.catalogue.type="catalogue",delete Xn.gameSystem):(Xn.gameSystem=Qn,Xn.gameSystem.type="gameSystem",delete Xn.catalogue);const er=Jn?getDataObject(Xn):Xn;return JSON.stringify(er,(nr,rr)=>{if(!(Array.isArray(rr)&&rr.length===0)&&(rr===Qn||goodJsonKeys.has(nr)||isFinite(Number(nr))))return isObject(rr)?splitExactlyConstraints(splitExactlyConstraintsModifiers(rr)):rr})}function entryToJson(Zn,Jn){return JSON.stringify(Zn,function(Qn,er){if(!(Array.isArray(er)&&er.length===0)&&(goodJsonKeys.has(Qn)||isFinite(Number(Qn))||Jn!=null&&Jn.has(Qn)))return er})}function entriesToJson(Zn,Jn,Xn){const Qn=(Xn==null?void 0:Xn.forceArray)===!1;return Zn=Array.isArray(Zn)&&(Zn==null?void 0:Zn.length)===1&&Qn?Zn[0]:Zn,JSON.stringify(Zn,function(tr,nr){if(goodJsonKeys.has(tr)||isFinite(Number(tr))||Jn!=null&&Jn.has(tr))return nr},(Xn==null?void 0:Xn.formatted)===!0?2:void 0)}function forEachObjectWhitelist2(Zn,Jn,Xn=goodKeys){for(const Qn in Zn)if(Xn.has(Qn)){const er=Zn[Qn];if(Array.isArray(er)&&er.length&&isObject(er[0]))for(let tr=0;tr<er.length;tr++){const nr=er[tr];Jn(nr,Zn),forEachObjectWhitelist2(nr,Jn,Xn)}}}class InfoIndex{constructor(){Zr(this,"index",{})}words(Jn){const Xn=`${Jn}`;return Xn.trim().match(/(\w+|\s|\W)/g)??[Xn]}clean(Jn){return Jn.match(/[a-z]/)?Jn.toLowerCase():Jn}add(Jn,Xn){typeof Jn!="string"||!Jn.match(/(?=.*[a-zA-Z].*[a-zA-Z])/)||this.addToIndex(this.index,Xn,this.words(escapeHtml(Jn)))}addToIndex(Jn,Xn,Qn,er=0){if(er<Qn.length){const tr=this.clean(Qn[er]);tr!==" "?(Jn[tr]||(Jn[tr]={}),this.addToIndex(Jn[tr],Xn,Qn,er+1)):this.addToIndex(Jn,Xn,Qn,er+1)}else Jn.$||(Jn.$=[]),Jn.$.push(Xn)}match(Jn){if(typeof Jn!="string"||!Jn.match(/(?=.*[a-zA-Z].*[a-zA-Z])/))return[{text:Jn}];const Xn=this.words(Jn),Qn=Xn.map(this.clean,this),er=[];let tr=[];for(let nr=0;nr<Qn.length;nr++){let rr=this.index,sr=0,ir;if(isMultilineCodeBlockStart(Qn,nr)){let or=findMultilineCodeBlockEnd(nr,Qn);or!==-1&&tr.push(Xn.slice(nr,or).join("")),nr=or-1;continue}else if(isCodeBlockStart(Qn,nr)){let or=findCodeBlockEnd(nr,Qn);or!==-1&&tr.push(Xn.slice(nr,or).join("")),nr=or-1;continue}if(Qn[nr]!==" ")for(let or=nr;or<Qn.length;or++){const ar=Qn[or];if(ar!==" ")if(rr=rr[ar],rr)rr.$&&(sr=1+(or-nr),ir=rr.$);else break}sr?(tr.length&&(er.push({text:tr.join("")}),tr=[]),er.push({match:ir,text:Xn.slice(nr,nr+sr).join("")}),nr+=sr-1):tr.push(Xn[nr])}return tr.length&&er.push({text:tr.join("")}),er}}function findMultilineCodeBlockEnd(Zn,Jn){let Xn=-1;for(let Qn=Zn+3;Qn<Jn.length;Qn++)Jn[Zn]==="`"&&Jn[Zn+1]==="`"&&Jn[Zn+2]==="`"&&(Xn=Qn+3);return Xn}function findCodeBlockEnd(Zn,Jn){let Xn=-1;for(let Qn=Zn+1;Qn<Jn.length;Qn++)(Jn[Zn]==="`"||Jn[Zn]==`
`)&&(Xn=Qn+1);return Xn}function isCodeBlockStart(Zn,Jn){return Zn[Jn]==="`"}function isMultilineCodeBlockStart(Zn,Jn){return Zn[Jn]==="`"&&Zn[Jn+1]==="`"&&Zn[Jn+2]==="`"}function escapeHtml(Zn){if(globalThis.document){const Jn=document.createElement("div");return Jn.appendChild(document.createTextNode(Zn)),Jn.innerHTML}else return stripHtml(Zn)}const validScopes=new Set(["force","roster","self","parent","ancestor","primary-category","force","roster","primary-catalogue","root-entry","unit","model","upgrade","model-or-unit"]),validChildIds=new Set(["any","unit","model","upgrade","mount","crew"]);function isScopeValid(Zn,Jn){if(validScopes.has(Jn))return!0;const Qn=Zn.catalogue.findOptionById(Jn);if(Qn&&(Qn.isForce()&&!Zn.isForce()||Qn.isCategory()||Qn.isCatalogue()))return!0;const er=[Zn];for(;er.length;){const tr=er.pop();if(tr.id===Jn)return!0;tr.parent&&er.push(tr.parent),tr.refs&&er.push(...tr.refs)}return!1}function getModifierOrConditionParent(Zn){return findSelfOrParentWhere(Zn,Xn=>!(Xn instanceof Modifier||Xn instanceof Condition||Xn instanceof ModifierGroup))}function getModifiedField(Zn,Jn){if(!Zn||!Jn)return;const Xn=Zn.getCatalogue();if(Zn.parent){const er=getModifierOrConditionParent(Zn);if(er){for(const tr of er.constraintsIterator())if(tr.id===Jn)return tr}}return Xn==null?void 0:Xn.findOptionById(Jn)}function fieldToText(Zn,Jn){if(Jn===void 0)return"";if(Zn){if(`${Jn}`.startsWith("limit::"))return`limit::${fieldToText(Zn,removePrefix$3(`${Jn}`,"limit::"))}`;const Xn=Zn.catalogue||Zn,Qn=getModifiedField(Zn,Jn);if(Qn){const tr=Qn.type;if(tr&&["min","max","exactly"].includes(tr))return constraintToText(Zn,Qn);if(Qn.name)return Qn.isCategory&&Qn.isCategory()?`${Qn.name}`:Qn.url?`${Qn.name}`:Qn.name}const er=Xn.manager;if(er){const tr=Xn.manager.findOptionById(Jn)||er.getCatalogueInfo({targetId:Jn});return(tr==null?void 0:tr.name)||Jn}}return Jn}function conditionToString(Zn,Jn,Xn=!1,Qn=fieldToText){const er=Jn.type||"none",tr=Jn.value===void 0?1:Jn.percentValue?`${Jn.value}%`:Jn.value,nr=Qn(Zn,Jn.field),rr=["selections","forces"].includes(nr)?` ${nr}`:` ${Qn(Zn,nr)}`,sr=Qn(Zn,Jn.childId||"")+(Xn?`(${Jn.childId||"any"})`:""),ir=sr&&rr?"of ":"",or=Qn(Zn,Jn.scope),ar=or===(Zn==null?void 0:Zn.getName())?"":`${or}`,cr=Jn.includeChildSelections?" (recursive)":"",lr=ar?` in ${ar}${cr}`:"";switch(er){case"instanceOf":return`${ar} is ${sr}`;case"notInstanceOf":return`${ar} is not ${sr}`;case"atLeast":return`${tr}+${rr} ${ir}${sr}${lr}`;case"greaterThan":return`${Number(tr)+1}+${rr} ${ir}${sr}${lr}`;case"atMost":return`${tr}${tr===0?"":"-"}${rr} ${ir}${sr}${lr}`;case"lessThan":return`${Number(tr)-1}${Number(tr)-1===0?"":"-"}${rr} ${ir}${sr}${lr}`;case"equalTo":return`${tr}${rr} ${ir}${sr}${lr}`;case"notEqualTo":return`not ${tr}${rr} ${ir}${sr}${lr}`;case"none":return`${rr} ${ir}${sr}${lr}`;default:return`${er} ${tr}${rr} ${ir}${sr}${lr}`}}function constraintToText(Zn,Jn,Xn=fieldToText){if(!has(Zn.constraintsIterator(),Jn))return Jn.id;const Qn=Jn.field==="selections"?"":` ${Xn(Zn,Jn.field)}`,er=Jn.scope==="parent"?"":`(${Xn(Zn,Jn.scope)})`,tr=Jn.childId?` ${Xn(Zn,Jn.childId)}`:"";return`${Jn.type}${Qn}${tr}${er}`}function modifierToString(Zn,Jn,Xn=fieldToText){var Qn;return`${Jn.type} ${Xn(Zn,Jn.field)} ${Xn(Zn,(Qn=Jn.value)==null?void 0:Qn.toString())}`}typeof $toRaw>"u"&&(globalThis.$toRaw=function(Zn){return Zn});class CatalogueLink extends Base{constructor(){super(...arguments);Zr(this,"targetId");Zr(this,"importRootEntries")}isLink(){return!1}}class Publication extends Base{constructor(){super(...arguments);Zr(this,"shortName");Zr(this,"publisher");Zr(this,"publicationDate");Zr(this,"publisherUrl")}}class Catalogue extends Base{constructor(){super(...arguments);Zr(this,"library");Zr(this,"revision");Zr(this,"gameSystemId");Zr(this,"gameSystemRevision");Zr(this,"authorContact");Zr(this,"authorName");Zr(this,"authorUrl");Zr(this,"battleScribeVersion");Zr(this,"costTypes");Zr(this,"catalogueLinks");Zr(this,"gameSystem");Zr(this,"initialized");Zr(this,"loaded_wiki");Zr(this,"loaded_editor");Zr(this,"imports");Zr(this,"importsWithEntries");Zr(this,"index");Zr(this,"infoIndex");Zr(this,"unresolvedLinks",{});Zr(this,"forces");Zr(this,"categories");Zr(this,"units");Zr(this,"roster_constraints");Zr(this,"manager");Zr(this,"book");Zr(this,"short");Zr(this,"version");Zr(this,"nrversion");Zr(this,"lastUpdated");Zr(this,"costIndex");Zr(this,"fullFilePath");Zr(this,"errors")}reset(){delete this.initialized,delete this.loaded,delete this.loaded_editor,delete this.loaded_wiki;for(const Xn of this.imports||[])delete Xn.initialized,delete Xn.loaded,delete Xn.loaded_editor,delete Xn.loaded_wiki}init(Xn=!0){this.initialized||(this.initialized=!0,this.generateImports(Xn),this.resolveAllLinks(Xn),this.generateCostIndex(),this.indexInfo())}process(){if(this.loaded)return;this.loaded=!0,this.init();const Xn=this.generateUnits(),Qn=this.generateCategories(Xn);this.categories=Object.values(Qn),this.generateForces(Qn,this.forcesIterator()),this.generateExtraConstraints()}processForWiki(Xn){if(this.loaded_wiki)return;this.loaded_wiki=!0,this.process();const Qn=Xn.rules||{};Xn.rules=Qn,this.imports.forEach(tr=>{addObjUnique(tr,"refs",this)});function er(tr,nr){tr.parent=nr,tr.target&&addObjUnique(tr.target,"refs",nr),tr instanceof Rule&&(Qn[tr.id]=tr)}forEachObjectWhitelist2(this,er,goodKeysWiki);for(const tr of this.forces||[]){tr.parent=this;for(const nr of tr.categories)nr.parent=tr}}processForEditor(){this.loaded_editor||(this.loaded_editor=!0,this.init(!1),this.gameSystem&&addObjUnique(this.gameSystem,"refs",this),forEachObjectWhitelist2(this,(Xn,Qn)=>{if(Xn.parent=Qn,Xn.catalogue=this,Xn.refs||(Xn.refs=[]),Xn.other_refs||(Xn.other_refs=[]),Xn.target&&addObjUnique(Xn.target,"refs",Xn),Xn.isProfile()&&!Xn.isLink()){const tr=this.findOptionById(Xn.typeId);tr&&addObjUnique(tr,"refs",Xn)}const er=Xn.value;if(er){const tr=this.findOptionById(er);tr&&addObjUnique(tr,"other_refs",Xn)}},goodJsonArrayKeys),forEachObjectWhitelist2(this,Xn=>Xn.isLink()?this.updateLink(Xn):this.refreshErrors(Xn),goodJsonArrayKeys))}get url(){return"%{book}"}isCatalogue(){return!0}isGameSystem(){return this.gameSystemId===this.id||!this.gameSystemId}isIdUnique(){return!0}getCatalogue(){return this}getGameSystem(){return this.isGameSystem()?this:this.gameSystem}getSystemId(){return this.isGameSystem()?this.id:this.gameSystemId}addError(Xn,Qn){this.removeError(Xn,Qn.id),Xn.errors||(Xn.errors=[]),this.errors||(this.errors=[]),Xn.errors.push(Qn),this.errors.push(Qn)}onRemoveError(Xn,Qn=!0){var er,tr;if(this.errors){const nr=this.errors.indexOf(Xn);nr>=0&&this.errors.splice(nr,1)}if(Xn.other&&Qn){const nr=Xn.other;(er=nr.getCatalogue())==null||er.removeError(nr,"duplicate-id-1",!1),(tr=nr.getCatalogue())==null||tr.removeError(nr,"duplicate-id-2",!1)}}removeErrors(Xn){var Qn;(Qn=Xn.errors)==null||Qn.forEach(er=>this.onRemoveError(er)),Xn instanceof Constraint&&Xn.catalogue.updateConstraint(Xn,!0),delete Xn.errors}removeError(Xn,Qn,er=!0){var tr;(tr=Xn.errors)!=null&&tr.length&&(Xn.errors=Xn.errors.filter(nr=>(nr.id===Qn&&this.onRemoveError(nr,er),nr.id!==Qn)))}*iterateCategoryEntries(){for(const Xn of this.imports)for(const Qn of Xn.categoryEntries||[])yield Qn;this.categoryEntries&&(yield*this.categoryEntries)}*iterateCostTypes(){for(const Xn of this.imports)for(const Qn of Xn.costTypes||[])yield Qn;this.costTypes&&(yield*this.costTypes)}*forcesIterator(){for(const Xn of this.imports)for(const Qn of Xn.forceEntries||[])yield Qn;this.forceEntries&&(yield*this.forceEntries)}*forcesIteratorRecursive(){if(this.forces)for(const Xn of this.forces)yield Xn,yield*Xn.forcesIteratorRecursive()}*iterateProfileTypes(){for(const Xn of this.imports)Xn.profileTypes&&(yield*Xn.profileTypes);this.profileTypes&&(yield*this.profileTypes)}*iteratePublications(){for(const Xn of this.imports)for(const Qn of Xn.publications||[])yield Qn;for(const Xn of this.publications||[])yield Xn}*iterateSelectionEntries(){for(const Xn of this.importsWithEntries){for(const Qn of Xn.sharedSelectionEntries||[])yield Qn;for(const Qn of Xn.sharedSelectionEntryGroups||[])yield Qn}this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups)}*iterateAllImported(){const Xn=["sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","categoryEntries"],Qn=["rules","entryLinks","profiles","infoGroups","selectionEntries","selectionEntryGroups"];for(const er of this.importsWithEntries)for(const tr of Qn)for(const nr of er[tr]||[])nr.import!==!1&&(yield nr);for(const er of this.imports)for(const tr of Xn)for(const nr of er[tr]||[])yield nr;for(const er of Qn)for(const tr of this[er]||[])yield tr;for(const er of Xn)for(const tr of this[er]||[])yield tr}*iterateSelectionEntriesWithRoot(){for(const Xn of this.importsWithEntries){for(const Qn of Xn.selectionEntries||[])Qn.import!==!1&&(yield Qn);for(const Qn of Xn.entryLinks||[])Qn.import!==!1&&(yield Qn);for(const Qn of Xn.sharedSelectionEntries||[])yield Qn;for(const Qn of Xn.sharedSelectionEntryGroups||[])yield Qn}this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks),this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups)}*iterateAllRootEntries(){for(const Xn of this.importsWithEntries){for(const Qn of Xn.selectionEntries||[])Qn.import!==!1&&(yield Qn);for(const Qn of Xn.entryLinks||[])Qn.import!==!1&&(yield Qn)}this.selectionEntries&&(yield*this.selectionEntries),this.entryLinks&&(yield*this.entryLinks)}*entriesIterator(){this.sharedSelectionEntries&&(yield*this.sharedSelectionEntries),this.selectionEntries&&(yield*this.selectionEntries),this.sharedSelectionEntryGroups&&(yield*this.sharedSelectionEntryGroups),this.selectionEntryGroups&&(yield*this.selectionEntryGroups),this.entryLinks&&(yield*this.entryLinks)}forEachNode(Xn){if(Xn(this),this.childs)for(const Qn of this.childs)Qn.forEachNode(Xn)}*selectionsIterator(){yield*this.forces}findOptionById(Xn){var tr;const Qn=this.index[Xn];if(Qn)return Qn;const er=(tr=this.imports.find(nr=>Xn in nr.index))==null?void 0:tr.index[Xn];if(er)return er;if(this.manager&&Xn)return this.manager.getLoadedCatalogue(Xn)??this.manager.getCatalogueInfo({targetId:Xn})}findOptionByIdGlobal(Xn){var tr;const Qn=this.index[Xn];if(Qn)return Qn;const er=(tr=this.imports.find(nr=>Xn in nr.index))==null?void 0:tr.index[Xn];if(er)return er;if(this.manager){const nr=this.manager.findOptionById(Xn);return nr||this.manager.getCatalogueInfo({targetId:Xn})}}findOptionsById(Xn){const Qn=[];for(const er of[this,...this.imports])for(const tr of Object.values(er.index))tr.id&&tr.id===Xn&&Qn.push(tr);return Qn}findOptionsByText(Xn,Qn=!1){var nr,rr,sr;if(!Xn||!Xn.trim()||Qn){const ir=[];for(const or of[this,...this.imports])for(const ar of Object.values(or.index))if(ar.getName){if(ar.isLink()&&ar.target&&ar.isCategory()&&!((nr=ar.parent)!=null&&nr.isForce()))continue;Qn?ar.getName()===Xn&&ir.push(ar):ir.push(ar)}return ir}const er=[],tr=textSearchRegex(Xn);for(const ir of[this,...this.imports])for(const or of Object.values(ir.index)){const ar=(rr=or.getName)==null?void 0:rr.call(or),cr=or.id;if(ar&&String(ar).match(tr)||cr===Xn){if(or.isLink()&&or.target&&or.isCategory()&&!((sr=or.parent)!=null&&sr.isForce()))continue;er.push(or)}}return er}generateNonConflictingId(Xn){if(Xn&&this.findOptionByIdGlobal(Xn)===void 0)return Xn;for(;;){const Qn=generateBattlescribeId();if(this.findOptionById(Qn)===void 0)return Qn}}generateCostIndex(){const Xn={};for(const Qn of this.imports)for(const er of Qn.costTypes||[])Xn[er.id]=er,this.index[er.id]=er;for(const Qn of this.costTypes||[])Xn[Qn.id]=Qn,this.index[Qn.id]=Qn;return this.costIndex=Xn,Xn}getSystem(){return this.gameSystem??this}indexInfo(){const Xn=this.gameSystem??this;Xn===this&&(Xn.infoIndex=new InfoIndex);const Qn=Xn.infoIndex;if(!Qn)throw new Error("Couldn't index info: system isn't initialized");this.forEachObjectWhitelist((er,tr)=>{if(!er.isLink()&&(er.isProfile()||er.isRule()||er.isCategory())&&(Qn.add(er.getName(),er),er.alias))for(const nr of er.alias){const rr=clone(er);rr.name=nr,Qn.add(nr,rr)}})}generateImports(Xn=!0){const Qn={},er={};this.gameSystem&&(this.gameSystem.init(Xn),Qn[this.gameSystem.id]=this.gameSystem,er[this.gameSystem.id]=this.gameSystem,this.gameSystem.import||(this.gameSystem.imports=[]));for(const tr of this.catalogueLinks||[]){const nr=tr.target;if(nr){nr.init(Xn);for(const rr of nr.imports)er[rr.id]=rr;for(const rr of nr.importsWithEntries)Qn[rr.id]=rr;tr.importRootEntries&&(Qn[nr.id]=nr),er[nr.id]=nr}}return this.imports=Object.values(er),this.importsWithEntries=Object.values(Qn),this.imports}generateForces(Xn,Qn,er){var nr,rr;er||(er=this);const tr=[];for(const sr of Qn){const ir=clone(sr);ir.main_catalogue=this;const or=[];(rr=(nr=Xn[UNCATEGORIZED_ID])==null?void 0:nr.units)!=null&&rr.length&&or.push(Xn[UNCATEGORIZED_ID]);const ar=new Set;for(const lr of sr.categoryLinks||[])if(lr.targetId in Xn){const hr=clone(lr);hr.main_catalogue=this;const fr=Xn[hr.targetId];hr.target=fr,hr.childs=fr.childs;for(const gr of hr.childs)ar.add(gr.id);or.push(hr)}for(const lr of sr.categoryEntries||[])if(lr.id in Xn){const hr=Xn[lr.id],fr=clone(hr);fr.main_catalogue=this;for(const gr of fr.childs)ar.add(gr.id);or.push(fr)}const cr=this.units.filter(lr=>!ar.has(lr.id));if(cr.length){const lr=clone(Xn[ILLEGAL_ID]);lr.childs=cr,lr.units=cr,or.push(lr)}ir.childs=or,ir.categories=or,this.index[ir.id]=ir,ir.forceEntries&&ir.generateForces(Xn),this.generateForces(Xn,ir.forcesIterator(),ir),tr.push(ir)}return er.forces=tr,er.childs=tr,tr}generateCategories(Xn){const Qn={},er=new Set;for(const sr of this.iterateCategoryEntries()){const ir=clone(sr);ir.main_catalogue=this;const or=Xn[ir.id]||[];ir.units=or,ir.childs=or,this.index[sr.id]=sr,Qn[ir.id]=ir,er.add(ir.id)}for(const sr in Xn)if(!er.has(sr)){const ir=this.findOptionById(sr);if(ir){const or=clone(ir);or.main_catalogue=this;const ar=Xn[or.id]||[];or.units=ar,or.childs=ar,this.index[ir.id]=ir,Qn[or.id]=or}}const tr=Xn[UNCATEGORIZED_ID]||[],nr={name:"Uncategorized",id:UNCATEGORIZED_ID,hidden:!1,units:tr,childs:tr,catalogue:this};Qn[UNCATEGORIZED_ID]=Object.setPrototypeOf(nr,Category.prototype);const rr={name:"Illegal Units",id:ILLEGAL_ID,hidden:!0,units:[],childs:[],catalogue:this};return Qn[ILLEGAL_ID]=Object.setPrototypeOf(rr,Category.prototype),Qn}generateUnits(){const Xn=[];for(const tr of this.importsWithEntries){const nr=tr.isGameSystem();for(const rr of tr.selectionEntries||[])(nr||rr.import!==!1)&&Xn.push(rr);for(const rr of tr.entryLinks||[])(nr||rr.import!==!1)&&Xn.push(rr)}for(const tr of this.selectionEntries||[])Xn.push(tr);for(const tr of this.entryLinks||[])Xn.push(tr);const Qn=sortBy(Xn,tr=>tr.getName());return this.units=Qn,groupBy(Qn,tr=>tr.getPrimaryCategory())}generateExtraConstraints(){const Xn={},Qn=[],er={},tr=new Set,nr={};function rr(sr,ir,or){const ar=ir.target||ir;for(const cr of or){if(cr.type==="max")continue;const lr=`${cr.id}::${ir.id}`;switch(cr.scope){case"parent":break;case"roster":Xn[lr]=ir.getBoundConstraint(cr);break;case"force":Qn.push(ir.getBoundConstraint(cr));break;case"primary-category":case"primary-catalogue":break;default:if(tr.has(cr.scope)){addObj(er,cr.scope,ar.getBoundConstraint(cr));break}const hr=sr.index[cr.scope];if(hr){const fr=hr.extra_constraints||[];fr.push(ir.getBoundConstraint(cr)),hr.extra_constraints=fr;break}break}}}for(const sr of this.forcesIteratorRecursive())tr.add(sr.id);for(const sr of this.categories)tr.add(sr.id);for(const sr of this.categories){rr(this,sr,sr.constraintsIterator());const ir={};sr.forEachNodeCb(or=>{var ar;if(or&&!or.isForce()&&(!or.isGroup()&&!or.extra_constraints&&(or.extra_constraints=or.getChildBoundConstraints(!0)),!(or.isCategory()&&or.isLink())&&!(!or.constraints&&!((ar=or.target)!=null&&ar.constraints)))){for(const cr of or.constraintsIterator())if(cr.type==="min"||cr.type==="exactly"){const lr=`${cr.id}::${or.id}`;switch(cr.scope){case"parent":break;case"roster":Xn[lr]=or.getBoundConstraint(cr);break;case"force":ir[lr]=or.getBoundConstraint(cr);break;case"primary-category":case"primary-catalogue":break;default:if(tr.has(cr.scope)){addObj(er,cr.scope,or.getBoundConstraint(cr));break}const hr=this.index[cr.scope];if(hr){const fr=hr.extra_constraints||[];fr.push(or.getBoundConstraint(cr)),hr.extra_constraints=fr;break}break}}}}),nr[sr.getId()]=Object.values(ir)}for(const sr of this.forcesIteratorRecursive()){const ir=sr.extra_constraints||[];ir.push(...Qn),sr.id in er&&ir.push(...er[sr.id]),ir.length&&(sr.extra_constraints=ir);for(const or of sr.categories)or.getId()in nr&&ir.push(...nr[or.getId()]);ir.length&&(sr.extra_constraints=ir);for(const or of sr.forcesIterator())for(const ar of or.constraintsIterator())(ar.type==="min"||ar.type==="exactly")&&["parent","force",or.id].includes(ar.scope)&&ir.push(or.getBoundConstraint(ar))}for(const sr of this.categories){const ir=sr.extra_constraints||[];sr.id in er&&ir.push(...er[sr.id]),ir.length&&(sr.extra_constraints=ir)}this.roster_constraints=Object.values(Xn)}async reload(Xn=this.manager){delete this.initialized,delete this.loaded,delete this.loaded_editor,delete this.index;const Qn=this.isGameSystem()?"gameSystem":"catalogue",er=await Xn.loadData({[Qn]:this});return this.processForEditor(),er}refreshErrors(Xn,Qn=!1){var er,tr,nr,rr,sr;if(this.removeErrors(Xn),(er=Xn.comment)!=null&&er.startsWith("todo:")?this.addError(Xn,{source:Xn,severity:"info",msg:`${Xn.getName()}: ${Xn.comment}`,id:"comment"}):(tr=Xn.comment)!=null&&tr.startsWith("warning:")?this.addError(Xn,{source:Xn,severity:"warning",msg:`${Xn.getName()}: ${Xn.comment}`,id:"comment"}):(nr=Xn.comment)!=null&&nr.startsWith("error:")?this.addError(Xn,{source:Xn,severity:"error",msg:`${Xn.getName()}: ${Xn.comment}`,id:"comment"}):this.removeError(Xn,"comment"),Xn.isLink()){Xn.target?(popObj(this.unresolvedLinks,Xn.targetId,$toRaw(Xn)),popObj(this.manager.unresolvedLinks,Xn.targetId,$toRaw(Xn))):(this.addError(Xn,{source:Xn,severity:"error",msg:`(${Xn.editorTypeName}) ${Xn.name} has no target`,id:"no-target"}),!((rr=this.unresolvedLinks[Xn.targetId])!=null&&rr.includes($toRaw(Xn)))&&!Qn&&addObj(this.unresolvedLinks,Xn.targetId,$toRaw(Xn)),(sr=this.manager.unresolvedLinks[Xn.targetId])!=null&&sr.includes($toRaw(Xn))||addObj(this.manager.unresolvedLinks,Xn.targetId,$toRaw(Xn)));const ir=resolveLink(Xn.targetId,this.getIndexes());if(getAllPossibleParents(Xn).find(ar=>ar.id===Xn.targetId))Xn.catalogue.addError(Xn,{id:"bad-link-target",msg:"Link target cannot be itself or include itself as a child",source:Xn});else if(ir!=null&&ir.isLink()){Xn.catalogue.addError(Xn,{id:"bad-link-target",msg:"Link target Cannot be a Link",source:Xn});return}}else Xn.isProfile()?Xn.typeId||this.addError(Xn,{source:Xn,severity:"error",msg:"Profile has no type",id:"no-profile-type"}):Xn instanceof Condition&&this.updateCondition(Xn)}addToIndex(Xn){var Qn,er,tr,nr,rr,sr;if(Xn.id){if(Xn.catalogue=this,(er=(Qn=this.manager)==null?void 0:Qn.settings)!=null&&er.globalDuplicateIdError){const ir=this.manager.index;if(ir[Xn.id]&&ir[Xn.id]!==Xn&&(Xn.isIdUnique()||ir[Xn.id].isIdUnique())){const or=ir[Xn.id],ar=or.getCatalogue(),cr=this!==ar;ar&&cr&&(ar.addError(or,{source:or,severity:"error",msg:`Duplicate id ${Xn.id} ${Xn.getName()}`,id:"duplicate-id-1",other:Xn,extra:ar.name}),ar.addError(Xn,{source:Xn,severity:"error",msg:`Duplicate id ${Xn.id} ${or.getName()}`,id:"duplicate-id-2",other:or,extra:this.name})),this.addError(or,{source:or,severity:"error",msg:`Duplicate id ${Xn.id}  ${Xn.getName()}`,id:"duplicate-id-1",other:Xn,extra:cr?ar.name:void 0}),this.addError(Xn,{source:Xn,severity:"error",msg:`Duplicate id ${Xn.id} ${or.getName()}`,id:"duplicate-id-2",other:or,extra:cr?this.name:void 0})}ir[Xn.id]=Xn}else if(this.index[Xn.id]&&this.index[Xn.id]!==Xn){const ir=this.index[Xn.id];(Xn.isIdUnique()||ir.isIdUnique()||Xn.getName()!==ir.getName())&&(this.addError(ir,{source:ir,severity:"error",msg:`Duplicate id ${Xn.id} ${Xn.getName()}`,id:"duplicate-id-1",other:Xn}),this.addError(Xn,{source:Xn,severity:"error",msg:`Duplicate id ${Xn.id} ${ir.getName()}`,id:"duplicate-id-2",other:ir}))}if(this.index[Xn.id]=Xn,this.unresolvedLinks&&this.unresolvedLinks[Xn.id])for(const ir of[...this.unresolvedLinks[Xn.id]])ir.isLink()&&ir.catalogue?this.updateLink(ir):this.refreshErrors(ir);if((tr=this.manager)!=null&&tr.unresolvedLinks&&((nr=this.manager.unresolvedLinks[Xn.id])!=null&&nr.length))for(const ir of[...this.manager.unresolvedLinks[Xn.id]])ir.isLink()?(rr=ir.catalogue)==null||rr.updateLink(ir):(sr=ir.catalogue)==null||sr.refreshErrors(ir)}}removeFromIndex(Xn){Xn.id&&$toRaw(this.index[Xn.id])===$toRaw(Xn)&&delete this.index[Xn.id],this.removeErrors(Xn);for(const Qn of Xn.refs||[])delete Qn.target,Qn.catalogue.refreshErrors(Qn);for(const Qn of Xn.other_refs||[])Qn.catalogue.refreshErrors(Qn,!0)}getIndexes(){const Xn=[];Xn.push(this.index);for(const Qn of this.imports)Xn.push(Qn.index);return Xn}resolveAllLinks(Xn=!0){const Qn=[],er=[],tr=[];this.index=noObserve$1(),forEachObjectWhitelist2(this,(sr,ir)=>{this.addToIndex(sr),sr.publicationId&&(delete sr.publication,er.push(sr)),sr.isLink()&&(delete sr.target,Qn.push(sr),tr.push(ir)),hasSharedChildId(sr)},goodKeys);const nr=this.getIndexes(),rr=resolveLinks(Qn,nr,tr,Xn);if(resolvePublications(er,nr),!Xn){this.unresolvedLinks={};for(const sr of rr)addObj(this.unresolvedLinks,sr.targetId,$toRaw(sr)),delete sr.target}}removeRef(Xn,Qn){Qn.refs||(Qn.refs=[]);const er=Qn.refs.indexOf(Xn);er>=0&&Qn.refs.splice(er,1)}addRef(Xn,Qn){Qn.refs||(Qn.refs=[]),Qn.refs.indexOf(Xn)===-1&&Qn.refs.push(Xn)}hasOtherRef(Xn,Qn){return Qn.other_refs&&Qn.other_refs.includes(Xn)}removeOtherRef(Xn,Qn){Qn.other_refs||(Qn.other_refs=[]);const er=Qn.other_refs.indexOf(Xn);er>=0&&Qn.other_refs.splice(er,1)}addOtherRef(Xn,Qn){Qn.other_refs||(Qn.other_refs=[]),Qn.other_refs.indexOf(Xn)===-1&&Qn.other_refs.push(Xn)}updateLink(Xn){Xn.target&&this.removeRef(Xn,Xn.target);const Qn=resolveLink(Xn.targetId,this.getIndexes());if(Xn.target=Qn,Xn.target){Xn.name=Qn.name,this.addRef(Xn,Xn.target);const er=Xn.target.editorTypeName;er=="category"?delete Xn.type:Xn.type=er}return this.refreshErrors(Xn),Xn.target!==void 0}updateConstraint(Xn,Qn=!1){var nr,rr,sr,ir;const er=new Set,tr=new Set;for(const or of((nr=Xn.parent)==null?void 0:nr.constraintsIterator())||[])Qn&&Xn===or||(er.has(or.id)?tr.add(or.id):er.add(or.id));for(const or of((rr=Xn.parent)==null?void 0:rr.constraintsIterator())||[])Qn&&Xn===or||(tr.has(or.id)?(sr=or.catalogue)==null||sr.addError(or,{id:"duplicate-constraint-id",msg:"Duplicate constraints id",source:Xn}):(ir=or.catalogue)==null||ir.removeError(or,"duplicate-constraint-id"))}updateCondition(Xn,Qn){if(Xn.scope){const tr=getModifierOrConditionParent(Xn);if(tr&&!isScopeValid(tr,Xn.scope)?this.addError(Xn,{source:Xn,id:"invalid-scope",msg:`Invalid scope ${Xn.scope}`}):this.removeError(Xn,"invalid-scope"),Xn.scope&&!validScopes.has(Xn.scope)){const nr=this.findOptionById(Xn.scope);nr&&nr.getCatalogue().addOtherRef(Xn,nr)}}if(Xn instanceof Constraint)return this.updateConstraint(Xn);const er=["instanceOf","notInstanceOf"].includes(Xn.type);if(Qn&&!basicQueryFields.has(Qn)){const tr=er?this.findOptionByIdGlobal(Qn):this.findOptionById(Qn);tr&&this.removeOtherRef(Xn,tr)}if(Xn.childId){if(basicQueryFields.has(Xn.childId)){this.removeError(Xn,"id-not-exist");return}const tr=er?this.findOptionByIdGlobal(Xn.childId):this.findOptionById(Xn.childId);if(tr){this.hasOtherRef(Xn,tr)||this.addOtherRef(Xn,tr),this.removeError(Xn,"id-not-exist"),popObj(this.manager.unresolvedLinks,Xn.childId,$toRaw(Xn));return}}this.addError(Xn,{source:Xn,severity:"warning",msg:"child id does not exist",id:"id-not-exist"}),addObjIfMissing(this.manager.unresolvedLinks,Xn.childId,$toRaw(Xn))}unlinkLink(Xn){Xn.target&&this.removeRef(Xn,Xn.target)}}function resolveLink(Zn,Jn){for(const Xn of Jn)if(Zn in Xn)return Xn[Zn]}function resolveLinks(Zn=[],Jn,Xn,Qn=!0){Zn.length;let er=0;for(;Zn.length!==er;){const tr=Zn,nr=Xn;er=tr.length,Zn=[],Xn=[];for(let rr=0;rr<tr.length;rr++){const sr=tr[rr],ir=nr[rr],or=sr.targetId,ar=resolveLink(or,Jn);if(ar){ar.isLink()?console.warn(`Failed to resolve link (target is a link): ${sr.getName()}(${sr.id})`):sr.target=ar;continue}Zn.push(sr),Xn.push(ir)}}if(Zn.length&&Qn)for(let tr=0;tr<Zn.length;tr++){const nr=Zn[tr],rr=Xn[tr];for(const[sr,ir]of Object.entries(rr))if(ir===nr&&delete rr[sr],Array.isArray(ir))for(const or in ir)ir[or]===nr&&ir.splice(or,1)}return Zn}function resolvePublications(Zn=[],Jn){for(const Xn of Zn)for(const Qn of Jn)if(Xn.publicationId in Qn){Xn.publication=Qn[Xn.publicationId];break}}function hasSharedChildId(Zn){return Zn.shared!==!1&&Zn.childId!==void 0}let NoObserve$1=class{get[Symbol.toStringTag](){return"ObjectNoObserve"}};function noObserve$1(){return new NoObserve$1}function getAllPossibleParents(Zn){var nr;const Jn=[];if(!Zn.parent&&!((nr=Zn.refs)!=null&&nr.length))return Jn;let Xn=[];const Qn=[],er=[Zn.parent,...(Zn==null?void 0:Zn.refs)??[]],tr=new Set;for(;er.length;){for(Qn.push(er.shift()),Xn=[];Qn.length;){const rr=Qn.pop();tr.has(rr.id)||(tr.add(rr.id),Xn.push(rr),rr.parent&&!rr.parent.isCatalogue()&&Qn.push(rr.parent),rr.refs&&er.push(...rr.refs))}Jn.push(...Xn.reverse())}return Jn}function readBlobAsArrayBuffer(Zn){return Zn.arrayBuffer?Zn.arrayBuffer():new Promise((Jn,Xn)=>{const Qn=new FileReader;Qn.addEventListener("loadend",()=>{Jn(Qn.result)}),Qn.addEventListener("error",Xn),Qn.readAsArrayBuffer(Zn)})}async function readBlobAsUint8Array(Zn){const Jn=await readBlobAsArrayBuffer(Zn);return new Uint8Array(Jn)}function isBlob(Zn){return typeof Blob<"u"&&Zn instanceof Blob}function isSharedArrayBuffer(Zn){return typeof SharedArrayBuffer<"u"&&Zn instanceof SharedArrayBuffer}const isNode=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function isTypedArraySameAsArrayBuffer(Zn){return Zn.byteOffset===0&&Zn.byteLength===Zn.buffer.byteLength}class ArrayBufferReader{constructor(Jn){this.typedArray=Jn instanceof ArrayBuffer||isSharedArrayBuffer(Jn)?new Uint8Array(Jn):new Uint8Array(Jn.buffer,Jn.byteOffset,Jn.byteLength)}async getLength(){return this.typedArray.byteLength}async read(Jn,Xn){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+Jn,Xn)}}class BlobReader{constructor(Jn){this.blob=Jn}async getLength(){return this.blob.size}async read(Jn,Xn){const Qn=this.blob.slice(Jn,Jn+Xn),er=await readBlobAsArrayBuffer(Qn);return new Uint8Array(er)}async sliceAsBlob(Jn,Xn,Qn=""){return this.blob.slice(Jn,Jn+Xn,Qn)}}function inflate(Zn,Jn){var Xn=Uint8Array;if(Zn[0]==3&&Zn[1]==0)return Jn||new Xn(0);var Qn=_bitsF,er=_bitsE,tr=_decodeTiny,nr=_get17,rr=Jn==null;rr&&(Jn=new Xn(Zn.length>>>2<<3));for(var sr=0,ir=0,or=0,ar=0,cr=0,lr=0,hr=0,fr=0,gr=0,ur,dr;sr==0;){if(sr=Qn(Zn,gr,1),ir=Qn(Zn,gr+1,2),gr+=3,ir==0){gr&7&&(gr+=8-(gr&7));var yr=(gr>>>3)+4,vr=Zn[yr-4]|Zn[yr-3]<<8;rr&&(Jn=_check(Jn,fr+vr)),Jn.set(new Xn(Zn.buffer,Zn.byteOffset+yr,vr),fr),gr=yr+vr<<3,fr+=vr;continue}if(rr&&(Jn=_check(Jn,fr+(1<<17))),ir==1&&(ur=U$1.flmap,dr=U$1.fdmap,lr=512-1,hr=32-1),ir==2){or=er(Zn,gr,5)+257,ar=er(Zn,gr+5,5)+1,cr=er(Zn,gr+10,4)+4,gr+=14;for(var _r=0;_r<38;_r+=2)U$1.itree[_r]=0,U$1.itree[_r+1]=0;for(var kr=1,_r=0;_r<cr;_r++){var Cr=er(Zn,gr+_r*3,3);U$1.itree[(U$1.ordr[_r]<<1)+1]=Cr,Cr>kr&&(kr=Cr)}gr+=3*cr,makeCodes(U$1.itree,kr),codes2map(U$1.itree,kr,U$1.imap),ur=U$1.lmap,dr=U$1.dmap,gr=tr(U$1.imap,(1<<kr)-1,or+ar,Zn,gr,U$1.ttree);var br=_copyOut(U$1.ttree,0,or,U$1.ltree);lr=(1<<br)-1;var xr=_copyOut(U$1.ttree,or,ar,U$1.dtree);hr=(1<<xr)-1,makeCodes(U$1.ltree,br),codes2map(U$1.ltree,br,ur),makeCodes(U$1.dtree,xr),codes2map(U$1.dtree,xr,dr)}for(;;){var $r=ur[nr(Zn,gr)&lr];gr+=$r&15;var Mr=$r>>>4;if(!(Mr>>>8))Jn[fr++]=Mr;else{if(Mr==256)break;var Ar=fr+Mr-254;if(Mr>264){var Rr=U$1.ldef[Mr-257];Ar=fr+(Rr>>>3)+er(Zn,gr,Rr&7),gr+=Rr&7}var mr=dr[nr(Zn,gr)&hr];gr+=mr&15;var Fr=mr>>>4,qr=U$1.ddef[Fr],jr=(qr>>>4)+Qn(Zn,gr,qr&15);for(gr+=qr&15,rr&&(Jn=_check(Jn,fr+(1<<17)));fr<Ar;)Jn[fr]=Jn[fr++-jr],Jn[fr]=Jn[fr++-jr],Jn[fr]=Jn[fr++-jr],Jn[fr]=Jn[fr++-jr];fr=Ar}}}return Jn.length==fr?Jn:Jn.slice(0,fr)}function _check(Zn,Jn){var Xn=Zn.length;if(Jn<=Xn)return Zn;var Qn=new Uint8Array(Math.max(Xn<<1,Jn));return Qn.set(Zn,0),Qn}function _decodeTiny(Zn,Jn,Xn,Qn,er,tr){for(var nr=_bitsE,rr=_get17,sr=0;sr<Xn;){var ir=Zn[rr(Qn,er)&Jn];er+=ir&15;var or=ir>>>4;if(or<=15)tr[sr]=or,sr++;else{var ar=0,cr=0;or==16?(cr=3+nr(Qn,er,2),er+=2,ar=tr[sr-1]):or==17?(cr=3+nr(Qn,er,3),er+=3):or==18&&(cr=11+nr(Qn,er,7),er+=7);for(var lr=sr+cr;sr<lr;)tr[sr]=ar,sr++}}return er}function _copyOut(Zn,Jn,Xn,Qn){for(var er=0,tr=0,nr=Qn.length>>>1;tr<Xn;){var rr=Zn[tr+Jn];Qn[tr<<1]=0,Qn[(tr<<1)+1]=rr,rr>er&&(er=rr),tr++}for(;tr<nr;)Qn[tr<<1]=0,Qn[(tr<<1)+1]=0,tr++;return er}function makeCodes(Zn,Jn){for(var Xn=Zn.length,Qn,er,tr,nr,rr,sr=U$1.bl_count,nr=0;nr<=Jn;nr++)sr[nr]=0;for(nr=1;nr<Xn;nr+=2)sr[Zn[nr]]++;var ir=U$1.next_code;for(Qn=0,sr[0]=0,er=1;er<=Jn;er++)Qn=Qn+sr[er-1]<<1,ir[er]=Qn;for(tr=0;tr<Xn;tr+=2)rr=Zn[tr+1],rr!=0&&(Zn[tr]=ir[rr],ir[rr]++)}function codes2map(Zn,Jn,Xn){for(var Qn=Zn.length,er=U$1.rev15,tr=0;tr<Qn;tr+=2)if(Zn[tr+1]!=0)for(var nr=tr>>1,rr=Zn[tr+1],sr=nr<<4|rr,ir=Jn-rr,or=Zn[tr]<<ir,ar=or+(1<<ir);or!=ar;){var cr=er[or]>>>15-Jn;Xn[cr]=sr,or++}}function revCodes(Zn,Jn){for(var Xn=U$1.rev15,Qn=15-Jn,er=0;er<Zn.length;er+=2){var tr=Zn[er]<<Jn-Zn[er+1];Zn[er]=Xn[tr]>>>Qn}}function _bitsE(Zn,Jn,Xn){return(Zn[Jn>>>3]|Zn[(Jn>>>3)+1]<<8)>>>(Jn&7)&(1<<Xn)-1}function _bitsF(Zn,Jn,Xn){return(Zn[Jn>>>3]|Zn[(Jn>>>3)+1]<<8|Zn[(Jn>>>3)+2]<<16)>>>(Jn&7)&(1<<Xn)-1}function _get17(Zn,Jn){return(Zn[Jn>>>3]|Zn[(Jn>>>3)+1]<<8|Zn[(Jn>>>3)+2]<<16)>>>(Jn&7)}const U$1=function(){var Zn=Uint16Array,Jn=Uint32Array;return{next_code:new Zn(16),bl_count:new Zn(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new Zn(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new Jn(32),flmap:new Zn(512),fltree:[],fdmap:new Zn(32),fdtree:[],lmap:new Zn(32768),ltree:[],ttree:[],dmap:new Zn(32768),dtree:[],imap:new Zn(512),itree:[],rev15:new Zn(32768),lhst:new Jn(286),dhst:new Jn(30),ihst:new Jn(19),lits:new Jn(15e3),strt:new Zn(65536),prev:new Zn(32768)}}();(function(){for(var Zn=32768,Jn=0;Jn<Zn;Jn++){var Xn=Jn;Xn=(Xn&2863311530)>>>1|(Xn&1431655765)<<1,Xn=(Xn&3435973836)>>>2|(Xn&858993459)<<2,Xn=(Xn&4042322160)>>>4|(Xn&252645135)<<4,Xn=(Xn&4278255360)>>>8|(Xn&16711935)<<8,U$1.rev15[Jn]=(Xn>>>16|Xn<<16)>>>17}function Qn(er,tr,nr){for(;tr--!=0;)er.push(0,nr)}for(var Jn=0;Jn<32;Jn++)U$1.ldef[Jn]=U$1.of0[Jn]<<3|U$1.exb[Jn],U$1.ddef[Jn]=U$1.df0[Jn]<<4|U$1.dxb[Jn];Qn(U$1.fltree,144,8),Qn(U$1.fltree,255-143,9),Qn(U$1.fltree,279-255,7),Qn(U$1.fltree,287-279,8),makeCodes(U$1.fltree,9),codes2map(U$1.fltree,9,U$1.flmap),revCodes(U$1.fltree,9),Qn(U$1.fdtree,32,5),makeCodes(U$1.fdtree,5),codes2map(U$1.fdtree,5,U$1.fdmap),revCodes(U$1.fdtree,5),Qn(U$1.itree,19,0),Qn(U$1.ltree,286,0),Qn(U$1.dtree,30,0),Qn(U$1.ttree,320,0)})();const crc={table:function(){for(var Zn=new Uint32Array(256),Jn=0;Jn<256;Jn++){for(var Xn=Jn,Qn=0;Qn<8;Qn++)Xn&1?Xn=3988292384^Xn>>>1:Xn=Xn>>>1;Zn[Jn]=Xn}return Zn}(),update:function(Zn,Jn,Xn,Qn){for(var er=0;er<Qn;er++)Zn=crc.table[(Zn^Jn[Xn+er])&255]^Zn>>>8;return Zn},crc:function(Zn,Jn,Xn){return crc.update(4294967295,Zn,Jn,Xn)^4294967295}};function inflateRaw(Zn,Jn){return inflate(Zn,Jn)}const config={numWorkers:1,workerURL:"",useWorkers:!1};let nextId=0;const waitingForWorkerQueue=[];function startWorker(Zn){return new Promise((Jn,Xn)=>{const Qn=new Worker(Zn);Qn.onmessage=er=>{er.data==="start"?(Qn.onerror=void 0,Qn.onmessage=void 0,Jn(Qn)):Xn(new Error(`unexpected message: ${er.data}`))},Qn.onerror=Xn})}function dynamicRequire(Zn,Jn){return Zn.require?Zn.require(Jn):{}}(function(){if(isNode){const{Worker:Zn}=dynamicRequire(module,"worker_threads");return{async createWorker(Jn){return new Zn(Jn)},addEventListener(Jn,Xn){Jn.on("message",Qn=>{Xn({target:Jn,data:Qn})})},async terminate(Jn){await Jn.terminate()}}}else return{async createWorker(Zn){try{return await startWorker(Zn)}catch{console.warn("could not load worker:",Zn)}let Jn;try{const Xn=await fetch(Zn,{mode:"cors"});if(!Xn.ok)throw new Error(`could not load: ${Zn}`);Jn=await Xn.text(),Zn=URL.createObjectURL(new Blob([Jn],{type:"application/javascript"}));const Qn=await startWorker(Zn);return config.workerURL=Zn,Qn}catch{console.warn("could not load worker via fetch:",Zn)}if(Jn!==void 0)try{Zn=`data:application/javascript;base64,${btoa(Jn)}`;const Xn=await startWorker(Zn);return config.workerURL=Zn,Xn}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(Zn,Jn){Zn.addEventListener("message",Jn)},async terminate(Zn){Zn.terminate()}}})();function inflateRawLocal(Zn,Jn,Xn,Qn){const er=new Uint8Array(Jn);inflateRaw(Zn,er),Qn(Xn?new Blob([er],{type:Xn}):er.buffer)}async function processWaitingForWorkerQueue(){if(waitingForWorkerQueue.length!==0)for(;waitingForWorkerQueue.length;){const{src:Zn,uncompressedSize:Jn,type:Xn,resolve:Qn}=waitingForWorkerQueue.shift();let er=Zn;isBlob(Zn)&&(er=await readBlobAsUint8Array(Zn)),inflateRawLocal(er,Jn,Xn,Qn)}}function inflateRawAsync(Zn,Jn,Xn){return new Promise((Qn,er)=>{waitingForWorkerQueue.push({src:Zn,uncompressedSize:Jn,type:Xn,resolve:Qn,reject:er,id:nextId++}),processWaitingForWorkerQueue()})}function dosDateTimeToDate(Zn,Jn){const Xn=Zn&31,Qn=(Zn>>5&15)-1,er=(Zn>>9&127)+1980,tr=0,nr=(Jn&31)*2,rr=Jn>>5&63,sr=Jn>>11&31;return new Date(er,Qn,Xn,sr,rr,nr,tr)}class ZipEntry{constructor(Jn,Xn){this._reader=Jn,this._rawEntry=Xn,this.name=Xn.name,this.nameBytes=Xn.nameBytes,this.size=Xn.uncompressedSize,this.compressedSize=Xn.compressedSize,this.comment=Xn.comment,this.commentBytes=Xn.commentBytes,this.compressionMethod=Xn.compressionMethod,this.lastModDate=dosDateTimeToDate(Xn.lastModFileDate,Xn.lastModFileTime),this.isDirectory=Xn.uncompressedSize===0&&Xn.name.endsWith("/"),this.encrypted=!!(Xn.generalPurposeBitFlag&1),this.externalFileAttributes=Xn.externalFileAttributes,this.versionMadeBy=Xn.versionMadeBy}async blob(Jn="application/octet-stream"){return await readEntryDataAsBlob(this._reader,this._rawEntry,Jn)}async arrayBuffer(){return await readEntryDataAsArrayBuffer(this._reader,this._rawEntry)}async text(){const Jn=await this.arrayBuffer();return decodeBuffer(new Uint8Array(Jn))}async json(){const Jn=await this.text();return JSON.parse(Jn)}}const EOCDR_WITHOUT_COMMENT_SIZE=22,MAX_COMMENT_SIZE=65535,EOCDR_SIGNATURE=101010256,ZIP64_EOCDR_SIGNATURE=101075792;async function readAs(Zn,Jn,Xn){return await Zn.read(Jn,Xn)}async function readAsBlobOrTypedArray(Zn,Jn,Xn,Qn){return Zn.sliceAsBlob?await Zn.sliceAsBlob(Jn,Xn,Qn):await Zn.read(Jn,Xn)}const crc$1={unsigned(){return 0}};function getUint16LE(Zn,Jn){return Zn[Jn]+Zn[Jn+1]*256}function getUint32LE(Zn,Jn){return Zn[Jn]+Zn[Jn+1]*256+Zn[Jn+2]*65536+Zn[Jn+3]*16777216}function getUint64LE(Zn,Jn){return getUint32LE(Zn,Jn)+getUint32LE(Zn,Jn+4)*4294967296}const utf8Decoder=new TextDecoder;function decodeBuffer(Zn,Jn){return isSharedArrayBuffer(Zn.buffer)&&(Zn=new Uint8Array(Zn)),utf8Decoder.decode(Zn)}async function findEndOfCentralDirector(Zn,Jn){const Xn=Math.min(EOCDR_WITHOUT_COMMENT_SIZE+MAX_COMMENT_SIZE,Jn),Qn=Jn-Xn,er=await readAs(Zn,Qn,Xn);for(let tr=Xn-EOCDR_WITHOUT_COMMENT_SIZE;tr>=0;--tr){if(getUint32LE(er,tr)!==EOCDR_SIGNATURE)continue;const nr=new Uint8Array(er.buffer,er.byteOffset+tr,er.byteLength-tr),rr=getUint16LE(nr,4);if(rr!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${rr}`);const sr=getUint16LE(nr,10),ir=getUint32LE(nr,12),or=getUint32LE(nr,16),ar=getUint16LE(nr,20),cr=nr.length-EOCDR_WITHOUT_COMMENT_SIZE;if(ar!==cr)throw new Error(`invalid comment length. expected: ${cr}, actual: ${ar}`);const lr=new Uint8Array(nr.buffer,nr.byteOffset+22,ar),hr=decodeBuffer(lr);return sr===65535||or===4294967295?await readZip64CentralDirectory(Zn,Qn+tr,hr,lr):await readEntries(Zn,or,ir,sr,hr,lr)}throw new Error("could not find end of central directory. maybe not zip file")}const END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE=117853008;async function readZip64CentralDirectory(Zn,Jn,Xn,Qn){const er=Jn-20,tr=await readAs(Zn,er,20);if(getUint32LE(tr,0)!==END_OF_CENTRAL_DIRECTORY_LOCATOR_SIGNATURE)throw new Error("invalid zip64 end of central directory locator signature");const nr=getUint64LE(tr,8),rr=await readAs(Zn,nr,56);if(getUint32LE(rr,0)!==ZIP64_EOCDR_SIGNATURE)throw new Error("invalid zip64 end of central directory record signature");const sr=getUint64LE(rr,32),ir=getUint64LE(rr,40),or=getUint64LE(rr,48);return readEntries(Zn,or,ir,sr,Xn,Qn)}const CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE=33639248;async function readEntries(Zn,Jn,Xn,Qn,er,tr){let nr=0;const rr=await readAs(Zn,Jn,Xn),sr=[];for(let or=0;or<Qn;++or){const ar=rr.subarray(nr,nr+46),cr=getUint32LE(ar,0);if(cr!==CENTRAL_DIRECTORY_FILE_HEADER_SIGNATURE)throw new Error(`invalid central directory file header signature: 0x${cr.toString(16)}`);const lr={versionMadeBy:getUint16LE(ar,4),versionNeededToExtract:getUint16LE(ar,6),generalPurposeBitFlag:getUint16LE(ar,8),compressionMethod:getUint16LE(ar,10),lastModFileTime:getUint16LE(ar,12),lastModFileDate:getUint16LE(ar,14),crc32:getUint32LE(ar,16),compressedSize:getUint32LE(ar,20),uncompressedSize:getUint32LE(ar,24),fileNameLength:getUint16LE(ar,28),extraFieldLength:getUint16LE(ar,30),fileCommentLength:getUint16LE(ar,32),internalFileAttributes:getUint16LE(ar,36),externalFileAttributes:getUint32LE(ar,38),relativeOffsetOfLocalHeader:getUint32LE(ar,42)};if(lr.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");nr+=46;const hr=rr.subarray(nr,nr+lr.fileNameLength+lr.extraFieldLength+lr.fileCommentLength);lr.nameBytes=hr.slice(0,lr.fileNameLength),lr.name=decodeBuffer(lr.nameBytes);const fr=lr.fileNameLength+lr.extraFieldLength,gr=hr.slice(lr.fileNameLength,fr);lr.extraFields=[];let ur=0;for(;ur<gr.length-3;){const yr=getUint16LE(gr,ur+0),vr=getUint16LE(gr,ur+2),_r=ur+4,kr=_r+vr;if(kr>gr.length)throw new Error("extra field length exceeds extra field buffer size");lr.extraFields.push({id:yr,data:gr.slice(_r,kr)}),ur=kr}if(lr.commentBytes=hr.slice(fr,fr+lr.fileCommentLength),lr.comment=decodeBuffer(lr.commentBytes),nr+=hr.length,lr.uncompressedSize===4294967295||lr.compressedSize===4294967295||lr.relativeOffsetOfLocalHeader===4294967295){const yr=lr.extraFields.find(kr=>kr.id===1);if(!yr)throw new Error("expected zip64 extended information extra field");const vr=yr.data;let _r=0;if(lr.uncompressedSize===4294967295){if(_r+8>vr.length)throw new Error("zip64 extended information extra field does not include uncompressed size");lr.uncompressedSize=getUint64LE(vr,_r),_r+=8}if(lr.compressedSize===4294967295){if(_r+8>vr.length)throw new Error("zip64 extended information extra field does not include compressed size");lr.compressedSize=getUint64LE(vr,_r),_r+=8}if(lr.relativeOffsetOfLocalHeader===4294967295){if(_r+8>vr.length)throw new Error("zip64 extended information extra field does not include relative header offset");lr.relativeOffsetOfLocalHeader=getUint64LE(vr,_r),_r+=8}}const dr=lr.extraFields.find(yr=>yr.id===28789&&yr.data.length>=6&&yr.data[0]===1&&getUint32LE(yr.data,1),crc$1.unsigned(lr.nameBytes));if(dr&&(lr.fileName=decodeBuffer(dr.data.slice(5))),lr.compressionMethod===0){let yr=lr.uncompressedSize;if(lr.generalPurposeBitFlag&1&&(yr+=12),lr.compressedSize!==yr)throw new Error(`compressed size mismatch for stored file: ${lr.compressedSize} != ${yr}`)}sr.push(lr)}return{zip:{comment:er,commentBytes:tr},entries:sr.map(or=>new ZipEntry(Zn,or))}}async function readEntryDataHeader(Zn,Jn){if(Jn.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");const Xn=await readAs(Zn,Jn.relativeOffsetOfLocalHeader,30),Qn=await Zn.getLength(),er=getUint32LE(Xn,0);if(er!==67324752)throw new Error(`invalid local file header signature: 0x${er.toString(16)}`);const tr=getUint16LE(Xn,26),nr=getUint16LE(Xn,28),rr=Jn.relativeOffsetOfLocalHeader+Xn.length+tr+nr;let sr;if(Jn.compressionMethod===0)sr=!1;else if(Jn.compressionMethod===8)sr=!0;else throw new Error(`unsupported compression method: ${Jn.compressionMethod}`);const ir=rr,or=ir+Jn.compressedSize;if(Jn.compressedSize!==0&&or>Qn)throw new Error(`file data overflows file bounds: ${ir} +  ${Jn.compressedSize}  > ${Qn}`);return{decompress:sr,fileDataStart:ir}}async function readEntryDataAsArrayBuffer(Zn,Jn){const{decompress:Xn,fileDataStart:Qn}=await readEntryDataHeader(Zn,Jn);if(!Xn){const nr=await readAs(Zn,Qn,Jn.compressedSize);return isTypedArraySameAsArrayBuffer(nr)?nr.buffer:nr.slice().buffer}const er=await readAsBlobOrTypedArray(Zn,Qn,Jn.compressedSize);return await inflateRawAsync(er,Jn.uncompressedSize)}async function readEntryDataAsBlob(Zn,Jn,Xn){const{decompress:Qn,fileDataStart:er}=await readEntryDataHeader(Zn,Jn);if(!Qn){const rr=await readAsBlobOrTypedArray(Zn,er,Jn.compressedSize,Xn);return isBlob(rr)?rr:new Blob([isSharedArrayBuffer(rr.buffer)?new Uint8Array(rr):rr],{type:Xn})}const tr=await readAsBlobOrTypedArray(Zn,er,Jn.compressedSize);return await inflateRawAsync(tr,Jn.uncompressedSize,Xn)}async function unzipRaw(Zn){let Jn;if(typeof Blob<"u"&&Zn instanceof Blob)Jn=new BlobReader(Zn);else if(Zn instanceof ArrayBuffer||Zn&&Zn.buffer&&Zn.buffer instanceof ArrayBuffer)Jn=new ArrayBufferReader(Zn);else if(isSharedArrayBuffer(Zn)||isSharedArrayBuffer(Zn.buffer))Jn=new ArrayBufferReader(Zn);else if(typeof Zn=="string"){const Qn=await fetch(Zn);if(!Qn.ok)throw new Error(`failed http request ${Zn}, status: ${Qn.status}: ${Qn.statusText}`);const er=await Qn.blob();Jn=new BlobReader(er)}else if(typeof Zn.getLength=="function"&&typeof Zn.read=="function")Jn=Zn;else throw new Error("unsupported source type");const Xn=await Jn.getLength();if(Xn>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${Xn}. Only file sizes up 4503599627370496 bytes are supported`);return await findEndOfCentralDirector(Jn,Xn)}async function unzip(Zn){const{zip:Jn,entries:Xn}=await unzipRaw(Zn);return{zip:Jn,entries:Object.fromEntries(Xn.map(Qn=>[Qn.name,Qn]))}}var validator$2={},util$2={};(function(Zn){const Jn=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Xn=Jn+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Qn="["+Jn+"]["+Xn+"]*",er=new RegExp("^"+Qn+"$"),tr=function(rr,sr){const ir=[];let or=sr.exec(rr);for(;or;){const ar=[];ar.startIndex=sr.lastIndex-or[0].length;const cr=or.length;for(let lr=0;lr<cr;lr++)ar.push(or[lr]);ir.push(ar),or=sr.exec(rr)}return ir},nr=function(rr){const sr=er.exec(rr);return!(sr===null||typeof sr>"u")};Zn.isExist=function(rr){return typeof rr<"u"},Zn.isEmptyObject=function(rr){return Object.keys(rr).length===0},Zn.merge=function(rr,sr,ir){if(sr){const or=Object.keys(sr),ar=or.length;for(let cr=0;cr<ar;cr++)ir==="strict"?rr[or[cr]]=[sr[or[cr]]]:rr[or[cr]]=sr[or[cr]]}},Zn.getValue=function(rr){return Zn.isExist(rr)?rr:""},Zn.isName=nr,Zn.getAllMatches=tr,Zn.nameRegexp=Qn})(util$2);const util$1=util$2,defaultOptions$2={allowBooleanAttributes:!1,unpairedTags:[]};validator$2.validate=function(Zn,Jn){Jn=Object.assign({},defaultOptions$2,Jn);const Xn=[];let Qn=!1,er=!1;Zn[0]==="\uFEFF"&&(Zn=Zn.substr(1));for(let tr=0;tr<Zn.length;tr++)if(Zn[tr]==="<"&&Zn[tr+1]==="?"){if(tr+=2,tr=readPI(Zn,tr),tr.err)return tr}else if(Zn[tr]==="<"){let nr=tr;if(tr++,Zn[tr]==="!"){tr=readCommentAndCDATA(Zn,tr);continue}else{let rr=!1;Zn[tr]==="/"&&(rr=!0,tr++);let sr="";for(;tr<Zn.length&&Zn[tr]!==">"&&Zn[tr]!==" "&&Zn[tr]!=="	"&&Zn[tr]!==`
`&&Zn[tr]!=="\r";tr++)sr+=Zn[tr];if(sr=sr.trim(),sr[sr.length-1]==="/"&&(sr=sr.substring(0,sr.length-1),tr--),!validateTagName(sr)){let ar;return sr.trim().length===0?ar="Invalid space after '<'.":ar="Tag '"+sr+"' is an invalid name.",getErrorObject("InvalidTag",ar,getLineNumberForPosition(Zn,tr))}const ir=readAttributeStr(Zn,tr);if(ir===!1)return getErrorObject("InvalidAttr","Attributes for '"+sr+"' have open quote.",getLineNumberForPosition(Zn,tr));let or=ir.value;if(tr=ir.index,or[or.length-1]==="/"){const ar=tr-or.length;or=or.substring(0,or.length-1);const cr=validateAttributeString(or,Jn);if(cr===!0)Qn=!0;else return getErrorObject(cr.err.code,cr.err.msg,getLineNumberForPosition(Zn,ar+cr.err.line))}else if(rr)if(ir.tagClosed){if(or.trim().length>0)return getErrorObject("InvalidTag","Closing tag '"+sr+"' can't have attributes or invalid starting.",getLineNumberForPosition(Zn,nr));{const ar=Xn.pop();if(sr!==ar.tagName){let cr=getLineNumberForPosition(Zn,ar.tagStartPos);return getErrorObject("InvalidTag","Expected closing tag '"+ar.tagName+"' (opened in line "+cr.line+", col "+cr.col+") instead of closing tag '"+sr+"'.",getLineNumberForPosition(Zn,nr))}Xn.length==0&&(er=!0)}}else return getErrorObject("InvalidTag","Closing tag '"+sr+"' doesn't have proper closing.",getLineNumberForPosition(Zn,tr));else{const ar=validateAttributeString(or,Jn);if(ar!==!0)return getErrorObject(ar.err.code,ar.err.msg,getLineNumberForPosition(Zn,tr-or.length+ar.err.line));if(er===!0)return getErrorObject("InvalidXml","Multiple possible root nodes found.",getLineNumberForPosition(Zn,tr));Jn.unpairedTags.indexOf(sr)!==-1||Xn.push({tagName:sr,tagStartPos:nr}),Qn=!0}for(tr++;tr<Zn.length;tr++)if(Zn[tr]==="<")if(Zn[tr+1]==="!"){tr++,tr=readCommentAndCDATA(Zn,tr);continue}else if(Zn[tr+1]==="?"){if(tr=readPI(Zn,++tr),tr.err)return tr}else break;else if(Zn[tr]==="&"){const ar=validateAmpersand(Zn,tr);if(ar==-1)return getErrorObject("InvalidChar","char '&' is not expected.",getLineNumberForPosition(Zn,tr));tr=ar}else if(er===!0&&!isWhiteSpace(Zn[tr]))return getErrorObject("InvalidXml","Extra text at the end",getLineNumberForPosition(Zn,tr));Zn[tr]==="<"&&tr--}}else{if(isWhiteSpace(Zn[tr]))continue;return getErrorObject("InvalidChar","char '"+Zn[tr]+"' is not expected.",getLineNumberForPosition(Zn,tr))}if(Qn){if(Xn.length==1)return getErrorObject("InvalidTag","Unclosed tag '"+Xn[0].tagName+"'.",getLineNumberForPosition(Zn,Xn[0].tagStartPos));if(Xn.length>0)return getErrorObject("InvalidXml","Invalid '"+JSON.stringify(Xn.map(tr=>tr.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return getErrorObject("InvalidXml","Start tag expected.",1);return!0};function isWhiteSpace(Zn){return Zn===" "||Zn==="	"||Zn===`
`||Zn==="\r"}function readPI(Zn,Jn){const Xn=Jn;for(;Jn<Zn.length;Jn++)if(Zn[Jn]=="?"||Zn[Jn]==" "){const Qn=Zn.substr(Xn,Jn-Xn);if(Jn>5&&Qn==="xml")return getErrorObject("InvalidXml","XML declaration allowed only at the start of the document.",getLineNumberForPosition(Zn,Jn));if(Zn[Jn]=="?"&&Zn[Jn+1]==">"){Jn++;break}else continue}return Jn}function readCommentAndCDATA(Zn,Jn){if(Zn.length>Jn+5&&Zn[Jn+1]==="-"&&Zn[Jn+2]==="-"){for(Jn+=3;Jn<Zn.length;Jn++)if(Zn[Jn]==="-"&&Zn[Jn+1]==="-"&&Zn[Jn+2]===">"){Jn+=2;break}}else if(Zn.length>Jn+8&&Zn[Jn+1]==="D"&&Zn[Jn+2]==="O"&&Zn[Jn+3]==="C"&&Zn[Jn+4]==="T"&&Zn[Jn+5]==="Y"&&Zn[Jn+6]==="P"&&Zn[Jn+7]==="E"){let Xn=1;for(Jn+=8;Jn<Zn.length;Jn++)if(Zn[Jn]==="<")Xn++;else if(Zn[Jn]===">"&&(Xn--,Xn===0))break}else if(Zn.length>Jn+9&&Zn[Jn+1]==="["&&Zn[Jn+2]==="C"&&Zn[Jn+3]==="D"&&Zn[Jn+4]==="A"&&Zn[Jn+5]==="T"&&Zn[Jn+6]==="A"&&Zn[Jn+7]==="["){for(Jn+=8;Jn<Zn.length;Jn++)if(Zn[Jn]==="]"&&Zn[Jn+1]==="]"&&Zn[Jn+2]===">"){Jn+=2;break}}return Jn}const doubleQuote='"',singleQuote="'";function readAttributeStr(Zn,Jn){let Xn="",Qn="",er=!1;for(;Jn<Zn.length;Jn++){if(Zn[Jn]===doubleQuote||Zn[Jn]===singleQuote)Qn===""?Qn=Zn[Jn]:Qn!==Zn[Jn]||(Qn="");else if(Zn[Jn]===">"&&Qn===""){er=!0;break}Xn+=Zn[Jn]}return Qn!==""?!1:{value:Xn,index:Jn,tagClosed:er}}const validAttrStrRegxp=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function validateAttributeString(Zn,Jn){const Xn=util$1.getAllMatches(Zn,validAttrStrRegxp),Qn={};for(let er=0;er<Xn.length;er++){if(Xn[er][1].length===0)return getErrorObject("InvalidAttr","Attribute '"+Xn[er][2]+"' has no space in starting.",getPositionFromMatch(Xn[er]));if(Xn[er][3]!==void 0&&Xn[er][4]===void 0)return getErrorObject("InvalidAttr","Attribute '"+Xn[er][2]+"' is without value.",getPositionFromMatch(Xn[er]));if(Xn[er][3]===void 0&&!Jn.allowBooleanAttributes)return getErrorObject("InvalidAttr","boolean attribute '"+Xn[er][2]+"' is not allowed.",getPositionFromMatch(Xn[er]));const tr=Xn[er][2];if(!validateAttrName(tr))return getErrorObject("InvalidAttr","Attribute '"+tr+"' is an invalid name.",getPositionFromMatch(Xn[er]));if(!Qn.hasOwnProperty(tr))Qn[tr]=1;else return getErrorObject("InvalidAttr","Attribute '"+tr+"' is repeated.",getPositionFromMatch(Xn[er]))}return!0}function validateNumberAmpersand(Zn,Jn){let Xn=/\d/;for(Zn[Jn]==="x"&&(Jn++,Xn=/[\da-fA-F]/);Jn<Zn.length;Jn++){if(Zn[Jn]===";")return Jn;if(!Zn[Jn].match(Xn))break}return-1}function validateAmpersand(Zn,Jn){if(Jn++,Zn[Jn]===";")return-1;if(Zn[Jn]==="#")return Jn++,validateNumberAmpersand(Zn,Jn);let Xn=0;for(;Jn<Zn.length;Jn++,Xn++)if(!(Zn[Jn].match(/\w/)&&Xn<20)){if(Zn[Jn]===";")break;return-1}return Jn}function getErrorObject(Zn,Jn,Xn){return{err:{code:Zn,msg:Jn,line:Xn.line||Xn,col:Xn.col}}}function validateAttrName(Zn){return util$1.isName(Zn)}function validateTagName(Zn){return util$1.isName(Zn)}function getLineNumberForPosition(Zn,Jn){const Xn=Zn.substring(0,Jn).split(/\r?\n/);return{line:Xn.length,col:Xn[Xn.length-1].length+1}}function getPositionFromMatch(Zn){return Zn.startIndex+Zn[1].length}var OptionsBuilder={};const defaultOptions$1={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(Zn,Jn){return Jn},attributeValueProcessor:function(Zn,Jn){return Jn},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(Zn,Jn,Xn){return Zn}},buildOptions$1=function(Zn){return Object.assign({},defaultOptions$1,Zn)};OptionsBuilder.buildOptions=buildOptions$1;OptionsBuilder.defaultOptions=defaultOptions$1;class XmlNode{constructor(Jn){this.tagname=Jn,this.child=[],this[":@"]={}}add(Jn,Xn){Jn==="__proto__"&&(Jn="#__proto__"),this.child.push({[Jn]:Xn})}addChild(Jn){Jn.tagname==="__proto__"&&(Jn.tagname="#__proto__"),Jn[":@"]&&Object.keys(Jn[":@"]).length>0?this.child.push({[Jn.tagname]:Jn.child,[":@"]:Jn[":@"]}):this.child.push({[Jn.tagname]:Jn.child})}}var xmlNode$1=XmlNode;function readDocType$1(Zn,Jn){const Xn={};if(Zn[Jn+3]==="O"&&Zn[Jn+4]==="C"&&Zn[Jn+5]==="T"&&Zn[Jn+6]==="Y"&&Zn[Jn+7]==="P"&&Zn[Jn+8]==="E"){Jn=Jn+9;let Qn=1,er=!1,tr=!1,nr="";for(;Jn<Zn.length;Jn++)if(Zn[Jn]==="<"&&!tr){if(er&&isEntity(Zn,Jn))Jn+=7,[entityName,val,Jn]=readEntityExp(Zn,Jn+1),val.indexOf("&")===-1&&(Xn[entityName]={regx:RegExp(`&${entityName};`,"g"),val});else if(er&&isElement(Zn,Jn))Jn+=8;else if(er&&isAttlist(Zn,Jn))Jn+=8;else if(er&&isNotation(Zn,Jn))Jn+=9;else if(isComment)tr=!0;else throw new Error("Invalid DOCTYPE");Qn++,nr=""}else if(Zn[Jn]===">"){if(tr?Zn[Jn-1]==="-"&&Zn[Jn-2]==="-"&&(tr=!1,Qn--):Qn--,Qn===0)break}else Zn[Jn]==="["?er=!0:nr+=Zn[Jn];if(Qn!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:Xn,i:Jn}}function readEntityExp(Zn,Jn){let Xn="";for(;Jn<Zn.length&&Zn[Jn]!=="'"&&Zn[Jn]!=='"';Jn++)Xn+=Zn[Jn];if(Xn=Xn.trim(),Xn.indexOf(" ")!==-1)throw new Error("External entites are not supported");const Qn=Zn[Jn++];let er="";for(;Jn<Zn.length&&Zn[Jn]!==Qn;Jn++)er+=Zn[Jn];return[Xn,er,Jn]}function isComment(Zn,Jn){return Zn[Jn+1]==="!"&&Zn[Jn+2]==="-"&&Zn[Jn+3]==="-"}function isEntity(Zn,Jn){return Zn[Jn+1]==="!"&&Zn[Jn+2]==="E"&&Zn[Jn+3]==="N"&&Zn[Jn+4]==="T"&&Zn[Jn+5]==="I"&&Zn[Jn+6]==="T"&&Zn[Jn+7]==="Y"}function isElement(Zn,Jn){return Zn[Jn+1]==="!"&&Zn[Jn+2]==="E"&&Zn[Jn+3]==="L"&&Zn[Jn+4]==="E"&&Zn[Jn+5]==="M"&&Zn[Jn+6]==="E"&&Zn[Jn+7]==="N"&&Zn[Jn+8]==="T"}function isAttlist(Zn,Jn){return Zn[Jn+1]==="!"&&Zn[Jn+2]==="A"&&Zn[Jn+3]==="T"&&Zn[Jn+4]==="T"&&Zn[Jn+5]==="L"&&Zn[Jn+6]==="I"&&Zn[Jn+7]==="S"&&Zn[Jn+8]==="T"}function isNotation(Zn,Jn){return Zn[Jn+1]==="!"&&Zn[Jn+2]==="N"&&Zn[Jn+3]==="O"&&Zn[Jn+4]==="T"&&Zn[Jn+5]==="A"&&Zn[Jn+6]==="T"&&Zn[Jn+7]==="I"&&Zn[Jn+8]==="O"&&Zn[Jn+9]==="N"}var DocTypeReader=readDocType$1;const hexRegex=/^[-+]?0x[a-fA-F0-9]+$/,numRegex=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const consider={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function toNumber$1(Zn,Jn={}){if(Jn=Object.assign({},consider,Jn),!Zn||typeof Zn!="string")return Zn;let Xn=Zn.trim();if(Jn.skipLike!==void 0&&Jn.skipLike.test(Xn))return Zn;if(Jn.hex&&hexRegex.test(Xn))return Number.parseInt(Xn,16);{const Qn=numRegex.exec(Xn);if(Qn){const er=Qn[1],tr=Qn[2];let nr=trimZeros(Qn[3]);const rr=Qn[4]||Qn[6];if(!Jn.leadingZeros&&tr.length>0&&er&&Xn[2]!==".")return Zn;if(!Jn.leadingZeros&&tr.length>0&&!er&&Xn[1]!==".")return Zn;{const sr=Number(Xn),ir=""+sr;return ir.search(/[eE]/)!==-1||rr?Jn.eNotation?sr:Zn:Xn.indexOf(".")!==-1?ir==="0"&&nr===""||ir===nr||er&&ir==="-"+nr?sr:Zn:tr?nr===ir||er+nr===ir?sr:Zn:Xn===ir||Xn===er+ir?sr:Zn}}else return Zn}}function trimZeros(Zn){return Zn&&Zn.indexOf(".")!==-1&&(Zn=Zn.replace(/0+$/,""),Zn==="."?Zn="0":Zn[0]==="."?Zn="0"+Zn:Zn[Zn.length-1]==="."&&(Zn=Zn.substr(0,Zn.length-1))),Zn}var strnum=toNumber$1;const util=util$2,xmlNode=xmlNode$1,readDocType=DocTypeReader,toNumber=strnum;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,util.nameRegexp);let OrderedObjParser$1=class{constructor(Jn){this.options=Jn,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=addExternalEntities,this.parseXml=parseXml,this.parseTextData=parseTextData,this.resolveNameSpace=resolveNameSpace,this.buildAttributesMap=buildAttributesMap,this.isItStopNode=isItStopNode,this.replaceEntitiesValue=replaceEntitiesValue$1,this.readStopNodeData=readStopNodeData,this.saveTextToParentTag=saveTextToParentTag,this.addChild=addChild}};function addExternalEntities(Zn){const Jn=Object.keys(Zn);for(let Xn=0;Xn<Jn.length;Xn++){const Qn=Jn[Xn];this.lastEntities[Qn]={regex:new RegExp("&"+Qn+";","g"),val:Zn[Qn]}}}function parseTextData(Zn,Jn,Xn,Qn,er,tr,nr){if(Zn!==void 0&&(this.options.trimValues&&!Qn&&(Zn=Zn.trim()),Zn.length>0)){nr||(Zn=this.replaceEntitiesValue(Zn));const rr=this.options.tagValueProcessor(Jn,Zn,Xn,er,tr);return rr==null?Zn:typeof rr!=typeof Zn||rr!==Zn?rr:this.options.trimValues?parseValue$1(Zn,this.options.parseTagValue,this.options.numberParseOptions):Zn.trim()===Zn?parseValue$1(Zn,this.options.parseTagValue,this.options.numberParseOptions):Zn}}function resolveNameSpace(Zn){if(this.options.removeNSPrefix){const Jn=Zn.split(":"),Xn=Zn.charAt(0)==="/"?"/":"";if(Jn[0]==="xmlns")return"";Jn.length===2&&(Zn=Xn+Jn[1])}return Zn}const attrsRegx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function buildAttributesMap(Zn,Jn,Xn){if(!this.options.ignoreAttributes&&typeof Zn=="string"){const Qn=util.getAllMatches(Zn,attrsRegx),er=Qn.length,tr={};for(let nr=0;nr<er;nr++){const rr=this.resolveNameSpace(Qn[nr][1]);let sr=Qn[nr][4],ir=this.options.attributeNamePrefix+rr;if(rr.length)if(this.options.transformAttributeName&&(ir=this.options.transformAttributeName(ir)),ir==="__proto__"&&(ir="#__proto__"),sr!==void 0){this.options.trimValues&&(sr=sr.trim()),sr=this.replaceEntitiesValue(sr);const or=this.options.attributeValueProcessor(rr,sr,Jn);or==null?tr[ir]=sr:typeof or!=typeof sr||or!==sr?tr[ir]=or:tr[ir]=parseValue$1(sr,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(tr[ir]=!0)}if(!Object.keys(tr).length)return;if(this.options.attributesGroupName){const nr={};return nr[this.options.attributesGroupName]=tr,nr}return tr}}const parseXml=function(Zn){Zn=Zn.replace(/\r\n?/g,`
`);const Jn=new xmlNode("!xml");let Xn=Jn,Qn="",er="";for(let tr=0;tr<Zn.length;tr++)if(Zn[tr]==="<")if(Zn[tr+1]==="/"){const rr=findClosingIndex(Zn,">",tr,"Closing Tag is not closed.");let sr=Zn.substring(tr+2,rr).trim();if(this.options.removeNSPrefix){const ar=sr.indexOf(":");ar!==-1&&(sr=sr.substr(ar+1))}this.options.transformTagName&&(sr=this.options.transformTagName(sr)),Xn&&(Qn=this.saveTextToParentTag(Qn,Xn,er));const ir=er.substring(er.lastIndexOf(".")+1);if(sr&&this.options.unpairedTags.indexOf(sr)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${sr}>`);let or=0;ir&&this.options.unpairedTags.indexOf(ir)!==-1?(or=er.lastIndexOf(".",er.lastIndexOf(".")-1),this.tagsNodeStack.pop()):or=er.lastIndexOf("."),er=er.substring(0,or),Xn=this.tagsNodeStack.pop(),Qn="",tr=rr}else if(Zn[tr+1]==="?"){let rr=readTagExp(Zn,tr,!1,"?>");if(!rr)throw new Error("Pi Tag is not closed.");if(Qn=this.saveTextToParentTag(Qn,Xn,er),!(this.options.ignoreDeclaration&&rr.tagName==="?xml"||this.options.ignorePiTags)){const sr=new xmlNode(rr.tagName);sr.add(this.options.textNodeName,""),rr.tagName!==rr.tagExp&&rr.attrExpPresent&&(sr[":@"]=this.buildAttributesMap(rr.tagExp,er,rr.tagName)),this.addChild(Xn,sr,er)}tr=rr.closeIndex+1}else if(Zn.substr(tr+1,3)==="!--"){const rr=findClosingIndex(Zn,"-->",tr+4,"Comment is not closed.");if(this.options.commentPropName){const sr=Zn.substring(tr+4,rr-2);Qn=this.saveTextToParentTag(Qn,Xn,er),Xn.add(this.options.commentPropName,[{[this.options.textNodeName]:sr}])}tr=rr}else if(Zn.substr(tr+1,2)==="!D"){const rr=readDocType(Zn,tr);this.docTypeEntities=rr.entities,tr=rr.i}else if(Zn.substr(tr+1,2)==="!["){const rr=findClosingIndex(Zn,"]]>",tr,"CDATA is not closed.")-2,sr=Zn.substring(tr+9,rr);if(Qn=this.saveTextToParentTag(Qn,Xn,er),this.options.cdataPropName)Xn.add(this.options.cdataPropName,[{[this.options.textNodeName]:sr}]);else{let ir=this.parseTextData(sr,Xn.tagname,er,!0,!1,!0);ir==null&&(ir=""),Xn.add(this.options.textNodeName,ir)}tr=rr+2}else{let rr=readTagExp(Zn,tr,this.options.removeNSPrefix),sr=rr.tagName,ir=rr.tagExp,or=rr.attrExpPresent,ar=rr.closeIndex;this.options.transformTagName&&(sr=this.options.transformTagName(sr)),Xn&&Qn&&Xn.tagname!=="!xml"&&(Qn=this.saveTextToParentTag(Qn,Xn,er,!1));const cr=Xn;if(cr&&this.options.unpairedTags.indexOf(cr.tagname)!==-1&&(Xn=this.tagsNodeStack.pop(),er=er.substring(0,er.lastIndexOf("."))),sr!==Jn.tagname&&(er+=er?"."+sr:sr),this.isItStopNode(this.options.stopNodes,er,sr)){let lr="";if(ir.length>0&&ir.lastIndexOf("/")===ir.length-1)tr=rr.closeIndex;else if(this.options.unpairedTags.indexOf(sr)!==-1)tr=rr.closeIndex;else{const fr=this.readStopNodeData(Zn,sr,ar+1);if(!fr)throw new Error(`Unexpected end of ${sr}`);tr=fr.i,lr=fr.tagContent}const hr=new xmlNode(sr);sr!==ir&&or&&(hr[":@"]=this.buildAttributesMap(ir,er,sr)),lr&&(lr=this.parseTextData(lr,sr,er,!0,or,!0,!0)),er=er.substr(0,er.lastIndexOf(".")),hr.add(this.options.textNodeName,lr),this.addChild(Xn,hr,er)}else{if(ir.length>0&&ir.lastIndexOf("/")===ir.length-1){sr[sr.length-1]==="/"?(sr=sr.substr(0,sr.length-1),ir=sr):ir=ir.substr(0,ir.length-1),this.options.transformTagName&&(sr=this.options.transformTagName(sr));const lr=new xmlNode(sr);sr!==ir&&or&&(lr[":@"]=this.buildAttributesMap(ir,er,sr)),this.addChild(Xn,lr,er),er=er.substr(0,er.lastIndexOf("."))}else{const lr=new xmlNode(sr);this.tagsNodeStack.push(Xn),sr!==ir&&or&&(lr[":@"]=this.buildAttributesMap(ir,er,sr)),this.addChild(Xn,lr,er),Xn=lr}Qn="",tr=ar}}else Qn+=Zn[tr];return Jn.child};function addChild(Zn,Jn,Xn){const Qn=this.options.updateTag(Jn.tagname,Xn,Jn[":@"]);Qn===!1||(typeof Qn=="string"&&(Jn.tagname=Qn),Zn.addChild(Jn))}const replaceEntitiesValue$1=function(Zn){if(this.options.processEntities){for(let Jn in this.docTypeEntities){const Xn=this.docTypeEntities[Jn];Zn=Zn.replace(Xn.regx,Xn.val)}for(let Jn in this.lastEntities){const Xn=this.lastEntities[Jn];Zn=Zn.replace(Xn.regex,Xn.val)}if(this.options.htmlEntities)for(let Jn in this.htmlEntities){const Xn=this.htmlEntities[Jn];Zn=Zn.replace(Xn.regex,Xn.val)}Zn=Zn.replace(this.ampEntity.regex,this.ampEntity.val)}return Zn};function saveTextToParentTag(Zn,Jn,Xn,Qn){return Zn&&(Qn===void 0&&(Qn=Object.keys(Jn.child).length===0),Zn=this.parseTextData(Zn,Jn.tagname,Xn,!1,Jn[":@"]?Object.keys(Jn[":@"]).length!==0:!1,Qn),Zn!==void 0&&Zn!==""&&Jn.add(this.options.textNodeName,Zn),Zn=""),Zn}function isItStopNode(Zn,Jn,Xn){const Qn="*."+Xn;for(const er in Zn){const tr=Zn[er];if(Qn===tr||Jn===tr)return!0}return!1}function tagExpWithClosingIndex(Zn,Jn,Xn=">"){let Qn,er="";for(let tr=Jn;tr<Zn.length;tr++){let nr=Zn[tr];if(Qn)nr===Qn&&(Qn="");else if(nr==='"'||nr==="'")Qn=nr;else if(nr===Xn[0])if(Xn[1]){if(Zn[tr+1]===Xn[1])return{data:er,index:tr}}else return{data:er,index:tr};else nr==="	"&&(nr=" ");er+=nr}}function findClosingIndex(Zn,Jn,Xn,Qn){const er=Zn.indexOf(Jn,Xn);if(er===-1)throw new Error(Qn);return er+Jn.length-1}function readTagExp(Zn,Jn,Xn,Qn=">"){const er=tagExpWithClosingIndex(Zn,Jn+1,Qn);if(!er)return;let tr=er.data;const nr=er.index,rr=tr.search(/\s/);let sr=tr,ir=!0;if(rr!==-1&&(sr=tr.substr(0,rr).replace(/\s\s*$/,""),tr=tr.substr(rr+1)),Xn){const or=sr.indexOf(":");or!==-1&&(sr=sr.substr(or+1),ir=sr!==er.data.substr(or+1))}return{tagName:sr,tagExp:tr,closeIndex:nr,attrExpPresent:ir}}function readStopNodeData(Zn,Jn,Xn){const Qn=Xn;let er=1;for(;Xn<Zn.length;Xn++)if(Zn[Xn]==="<")if(Zn[Xn+1]==="/"){const tr=findClosingIndex(Zn,">",Xn,`${Jn} is not closed`);if(Zn.substring(Xn+2,tr).trim()===Jn&&(er--,er===0))return{tagContent:Zn.substring(Qn,Xn),i:tr};Xn=tr}else if(Zn[Xn+1]==="?")Xn=findClosingIndex(Zn,"?>",Xn+1,"StopNode is not closed.");else if(Zn.substr(Xn+1,3)==="!--")Xn=findClosingIndex(Zn,"-->",Xn+3,"StopNode is not closed.");else if(Zn.substr(Xn+1,2)==="![")Xn=findClosingIndex(Zn,"]]>",Xn,"StopNode is not closed.")-2;else{const tr=readTagExp(Zn,Xn,">");tr&&((tr&&tr.tagName)===Jn&&tr.tagExp[tr.tagExp.length-1]!=="/"&&er++,Xn=tr.closeIndex)}}function parseValue$1(Zn,Jn,Xn){if(Jn&&typeof Zn=="string"){const Qn=Zn.trim();return Qn==="true"?!0:Qn==="false"?!1:toNumber(Zn,Xn)}else return util.isExist(Zn)?Zn:""}var OrderedObjParser_1=OrderedObjParser$1,node2json={};function prettify$1(Zn,Jn){return compress(Zn,Jn)}function compress(Zn,Jn,Xn){let Qn;const er={};for(let tr=0;tr<Zn.length;tr++){const nr=Zn[tr],rr=propName$1(nr);let sr="";if(Xn===void 0?sr=rr:sr=Xn+"."+rr,rr===Jn.textNodeName)Qn===void 0?Qn=nr[rr]:Qn+=""+nr[rr];else{if(rr===void 0)continue;if(nr[rr]){let ir=compress(nr[rr],Jn,sr);const or=isLeafTag(ir,Jn);nr[":@"]?assignAttributes(ir,nr[":@"],sr,Jn):Object.keys(ir).length===1&&ir[Jn.textNodeName]!==void 0&&!Jn.alwaysCreateTextNode?ir=ir[Jn.textNodeName]:Object.keys(ir).length===0&&(Jn.alwaysCreateTextNode?ir[Jn.textNodeName]="":ir=""),er[rr]!==void 0&&er.hasOwnProperty(rr)?(Array.isArray(er[rr])||(er[rr]=[er[rr]]),er[rr].push(ir)):Jn.isArray(rr,sr,or)?er[rr]=[ir]:er[rr]=ir}}}return typeof Qn=="string"?Qn.length>0&&(er[Jn.textNodeName]=Qn):Qn!==void 0&&(er[Jn.textNodeName]=Qn),er}function propName$1(Zn){const Jn=Object.keys(Zn);for(let Xn=0;Xn<Jn.length;Xn++){const Qn=Jn[Xn];if(Qn!==":@")return Qn}}function assignAttributes(Zn,Jn,Xn,Qn){if(Jn){const er=Object.keys(Jn),tr=er.length;for(let nr=0;nr<tr;nr++){const rr=er[nr];Qn.isArray(rr,Xn+"."+rr,!0,!0)?Zn[rr]=[Jn[rr]]:Zn[rr]=Jn[rr]}}}function isLeafTag(Zn,Jn){const{textNodeName:Xn}=Jn,Qn=Object.keys(Zn).length;return!!(Qn===0||Qn===1&&(Zn[Xn]||typeof Zn[Xn]=="boolean"||Zn[Xn]===0))}node2json.prettify=prettify$1;const{buildOptions}=OptionsBuilder,OrderedObjParser=OrderedObjParser_1,{prettify}=node2json,validator$1=validator$2;let XMLParser$1=class{constructor(Jn){this.externalEntities={},this.options=buildOptions(Jn)}parse(Jn,Xn){if(typeof Jn!="string")if(Jn.toString)Jn=Jn.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(Xn){Xn===!0&&(Xn={});const tr=validator$1.validate(Jn,Xn);if(tr!==!0)throw Error(`${tr.err.msg}:${tr.err.line}:${tr.err.col}`)}const Qn=new OrderedObjParser(this.options);Qn.addExternalEntities(this.externalEntities);const er=Qn.parseXml(Jn);return this.options.preserveOrder||er===void 0?er:prettify(er,this.options)}addEntity(Jn,Xn){if(Xn.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(Jn.indexOf("&")!==-1||Jn.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(Xn==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[Jn]=Xn}};var XMLParser_1=XMLParser$1;const EOL=`
`;function toXml(Zn,Jn){let Xn="";return Jn.format&&Jn.indentBy.length>0&&(Xn=EOL),arrToStr(Zn,Jn,"",Xn)}function arrToStr(Zn,Jn,Xn,Qn){let er="",tr=!1;for(let nr=0;nr<Zn.length;nr++){const rr=Zn[nr],sr=propName(rr);let ir="";if(Xn.length===0?ir=sr:ir=`${Xn}.${sr}`,sr===Jn.textNodeName){let hr=rr[sr];isStopNode(ir,Jn)||(hr=Jn.tagValueProcessor(sr,hr),hr=replaceEntitiesValue(hr,Jn)),tr&&(er+=Qn),er+=hr,tr=!1;continue}else if(sr===Jn.cdataPropName){tr&&(er+=Qn),er+=`<![CDATA[${rr[sr][0][Jn.textNodeName]}]]>`,tr=!1;continue}else if(sr===Jn.commentPropName){er+=Qn+`<!--${rr[sr][0][Jn.textNodeName]}-->`,tr=!0;continue}else if(sr[0]==="?"){const hr=attr_to_str(rr[":@"],Jn),fr=sr==="?xml"?"":Qn;let gr=rr[sr][0][Jn.textNodeName];gr=gr.length!==0?" "+gr:"",er+=fr+`<${sr}${gr}${hr}?>`,tr=!0;continue}let or=Qn;or!==""&&(or+=Jn.indentBy);const ar=attr_to_str(rr[":@"],Jn),cr=Qn+`<${sr}${ar}`,lr=arrToStr(rr[sr],Jn,ir,or);Jn.unpairedTags.indexOf(sr)!==-1?Jn.suppressUnpairedNode?er+=cr+">":er+=cr+"/>":(!lr||lr.length===0)&&Jn.suppressEmptyNode?er+=cr+"/>":lr&&lr.endsWith(">")?er+=cr+`>${lr}${Qn}</${sr}>`:(er+=cr+">",lr&&Qn!==""&&(lr.includes("/>")||lr.includes("</"))?er+=Qn+Jn.indentBy+lr+Qn:er+=lr,er+=`</${sr}>`),tr=!0}return er}function propName(Zn){const Jn=Object.keys(Zn);for(let Xn=0;Xn<Jn.length;Xn++){const Qn=Jn[Xn];if(Qn!==":@")return Qn}}function attr_to_str(Zn,Jn){let Xn="";if(Zn&&!Jn.ignoreAttributes)for(let Qn in Zn){let er=Jn.attributeValueProcessor(Qn,Zn[Qn]);er=replaceEntitiesValue(er,Jn),er===!0&&Jn.suppressBooleanAttributes?Xn+=` ${Qn.substr(Jn.attributeNamePrefix.length)}`:Xn+=` ${Qn.substr(Jn.attributeNamePrefix.length)}="${er}"`}return Xn}function isStopNode(Zn,Jn){Zn=Zn.substr(0,Zn.length-Jn.textNodeName.length-1);let Xn=Zn.substr(Zn.lastIndexOf(".")+1);for(let Qn in Jn.stopNodes)if(Jn.stopNodes[Qn]===Zn||Jn.stopNodes[Qn]==="*."+Xn)return!0;return!1}function replaceEntitiesValue(Zn,Jn){if(Zn&&Zn.length>0&&Jn.processEntities)for(let Xn=0;Xn<Jn.entities.length;Xn++){const Qn=Jn.entities[Xn];Zn=Zn.replace(Qn.regex,Qn.val)}return Zn}var orderedJs2Xml=toXml;const buildFromOrderedJs=orderedJs2Xml,defaultOptions={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(Zn,Jn){return Jn},attributeValueProcessor:function(Zn,Jn){return Jn},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Builder(Zn){this.options=Object.assign({},defaultOptions,Zn),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=isAttribute),this.processTextOrObjNode=processTextOrObjNode,this.options.format?(this.indentate=indentate,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Builder.prototype.build=function(Zn){return this.options.preserveOrder?buildFromOrderedJs(Zn,this.options):(Array.isArray(Zn)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(Zn={[this.options.arrayNodeName]:Zn}),this.j2x(Zn,0).val)};Builder.prototype.j2x=function(Zn,Jn){let Xn="",Qn="";for(let er in Zn)if(!(typeof Zn[er]>"u"))if(Zn[er]===null)er[0]==="?"?Qn+=this.indentate(Jn)+"<"+er+"?"+this.tagEndChar:Qn+=this.indentate(Jn)+"<"+er+"/"+this.tagEndChar;else if(Zn[er]instanceof Date)Qn+=this.buildTextValNode(Zn[er],er,"",Jn);else if(typeof Zn[er]!="object"){const tr=this.isAttribute(er);if(tr)Xn+=this.buildAttrPairStr(tr,""+Zn[er]);else if(er===this.options.textNodeName){let nr=this.options.tagValueProcessor(er,""+Zn[er]);Qn+=this.replaceEntitiesValue(nr)}else Qn+=this.buildTextValNode(Zn[er],er,"",Jn)}else if(Array.isArray(Zn[er])){const tr=Zn[er].length;let nr="";for(let rr=0;rr<tr;rr++){const sr=Zn[er][rr];typeof sr>"u"||(sr===null?er[0]==="?"?Qn+=this.indentate(Jn)+"<"+er+"?"+this.tagEndChar:Qn+=this.indentate(Jn)+"<"+er+"/"+this.tagEndChar:typeof sr=="object"?this.options.oneListGroup?nr+=this.j2x(sr,Jn+1).val:nr+=this.processTextOrObjNode(sr,er,Jn):nr+=this.buildTextValNode(sr,er,"",Jn))}this.options.oneListGroup&&(nr=this.buildObjectNode(nr,er,"",Jn)),Qn+=nr}else if(this.options.attributesGroupName&&er===this.options.attributesGroupName){const tr=Object.keys(Zn[er]),nr=tr.length;for(let rr=0;rr<nr;rr++)Xn+=this.buildAttrPairStr(tr[rr],""+Zn[er][tr[rr]])}else Qn+=this.processTextOrObjNode(Zn[er],er,Jn);return{attrStr:Xn,val:Qn}};Builder.prototype.buildAttrPairStr=function(Zn,Jn){return Jn=this.options.attributeValueProcessor(Zn,""+Jn),Jn=this.replaceEntitiesValue(Jn),this.options.suppressBooleanAttributes&&Jn==="true"?" "+Zn:" "+Zn+'="'+Jn+'"'};function processTextOrObjNode(Zn,Jn,Xn){const Qn=this.j2x(Zn,Xn+1);return Zn[this.options.textNodeName]!==void 0&&Object.keys(Zn).length===1?this.buildTextValNode(Zn[this.options.textNodeName],Jn,Qn.attrStr,Xn):this.buildObjectNode(Qn.val,Jn,Qn.attrStr,Xn)}Builder.prototype.buildObjectNode=function(Zn,Jn,Xn,Qn){if(Zn==="")return Jn[0]==="?"?this.indentate(Qn)+"<"+Jn+Xn+"?"+this.tagEndChar:this.indentate(Qn)+"<"+Jn+Xn+this.closeTag(Jn)+this.tagEndChar;{let er="</"+Jn+this.tagEndChar,tr="";return Jn[0]==="?"&&(tr="?",er=""),Xn&&Zn.indexOf("<")===-1?this.indentate(Qn)+"<"+Jn+Xn+tr+">"+Zn+er:this.options.commentPropName!==!1&&Jn===this.options.commentPropName&&tr.length===0?this.indentate(Qn)+`<!--${Zn}-->`+this.newLine:this.indentate(Qn)+"<"+Jn+Xn+tr+this.tagEndChar+Zn+this.indentate(Qn)+er}};Builder.prototype.closeTag=function(Zn){let Jn="";return this.options.unpairedTags.indexOf(Zn)!==-1?this.options.suppressUnpairedNode||(Jn="/"):this.options.suppressEmptyNode?Jn="/":Jn=`></${Zn}`,Jn};Builder.prototype.buildTextValNode=function(Zn,Jn,Xn,Qn){if(this.options.cdataPropName!==!1&&Jn===this.options.cdataPropName)return this.indentate(Qn)+`<![CDATA[${Zn}]]>`+this.newLine;if(this.options.commentPropName!==!1&&Jn===this.options.commentPropName)return this.indentate(Qn)+`<!--${Zn}-->`+this.newLine;if(Jn[0]==="?")return this.indentate(Qn)+"<"+Jn+Xn+"?"+this.tagEndChar;{let er=this.options.tagValueProcessor(Jn,Zn);return er=this.replaceEntitiesValue(er),er===""?this.indentate(Qn)+"<"+Jn+Xn+this.closeTag(Jn)+this.tagEndChar:this.indentate(Qn)+"<"+Jn+Xn+">"+er+"</"+Jn+this.tagEndChar}};Builder.prototype.replaceEntitiesValue=function(Zn){if(Zn&&Zn.length>0&&this.options.processEntities)for(let Jn=0;Jn<this.options.entities.length;Jn++){const Xn=this.options.entities[Jn];Zn=Zn.replace(Xn.regex,Xn.val)}return Zn};function indentate(Zn){return this.options.indentBy.repeat(Zn)}function isAttribute(Zn){return Zn.startsWith(this.options.attributeNamePrefix)?Zn.substr(this.attrPrefixLen):!1}var json2xml=Builder;const validator=validator$2,XMLParser=XMLParser_1,XMLBuilder=json2xml;var fxp={XMLParser,XMLValidator:validator,XMLBuilder};const entries={catalogueLinks:{allowedChildrens:[]},publications:{allowedChildrens:[]},costTypes:{allowedChildrens:[]},profileTypes:{allowedChildrens:["characteristicTypes"]},categoryEntries:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups"]},categoryLinks:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups"]},forceEntries:{allowedChildrens:["forceEntries","categoryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","costs"]},entryLinks:{allowedChildrens:"type"},selectionEntryGroups:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","categoryLinks","costs"]},sharedSelectionEntryGroups:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","constraints","modifiers","modifierGroups","categoryLinks","costs"]},selectionEntries:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","associations","constraints","modifiers","modifierGroups","categoryLinks","costs"]},sharedSelectionEntries:{allowedChildrens:["selectionEntries","selectionEntryGroups","entryLinks","profiles","rules","infoGroups","infoLinks","associations","constraints","modifiers","modifierGroups","categoryLinks","costs"]},associations:{allowedChildrens:[]},sharedRules:{allowedChildrens:["modifiers","modifierGroups"]},rule:{allowedChildrens:["modifiers","modifierGroups"]},rules:{allowedChildrens:["modifiers","modifierGroups"]},profile:{allowedChildrens:["modifiers","modifierGroups","characteristics"]},profiles:{allowedChildrens:["modifiers","modifierGroups","characteristics"]},sharedProfiles:{allowedChildrens:["modifiers","modifierGroups","characteristics"]},infoGroup:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","modifiers","modifierGroups"]},infoGroups:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","modifiers","modifierGroups"]},sharedInfoGroups:{allowedChildrens:["profiles","rules","infoGroups","infoLinks","modifiers","modifierGroups"]},infoLinks:{allowedChildrens:"type"},modifiers:{allowedChildrens:["conditions","conditionGroups","repeats"]},modifierGroups:{allowedChildrens:["modifiers","modifierGroups","conditions","conditionGroups","repeats"]},conditions:{allowedChildrens:[]},conditionGroups:{allowedChildrens:["conditions","conditionGroups"]},catalogue:{allowedChildrens:["catalogueLinks","publications","costTypes","profileTypes","categoryEntries","forceEntries","sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","selectionEntries","entryLinks","infoLinks","infoGroups","rules"]},gameSystem:{allowedChildrens:["publications","costTypes","profileTypes","categoryEntries","forceEntries","sharedSelectionEntries","sharedSelectionEntryGroups","sharedProfiles","sharedRules","sharedInfoGroups","selectionEntries","entryLinks","infoLinks","infoGroups","rules"]}},containerTags={categories:"category",catalogueLinks:"catalogueLink",categoryEntries:"categoryEntry",categoryLinks:"categoryLink",characteristics:"characteristic",characteristicTypes:"characteristicType",conditions:"condition",conditionGroups:"conditionGroup",constraints:"constraint",costs:"cost",costLimits:"costLimit",costTypes:"costType",entryLinks:"entryLink",forceEntries:"forceEntry",infoGroups:"infoGroup",infoLinks:"infoLink",forces:"force",modifiers:"modifier",modifierGroups:"modifierGroup",profiles:"profile",profileTypes:"profileType",publications:"publication",repeats:"repeat",rules:"rule",selections:"selection",selectionEntries:"selectionEntry",selectionEntryGroups:"selectionEntryGroup",sharedInfoGroups:"infoGroup",sharedProfiles:"profile",sharedRules:"rule",sharedSelectionEntries:"selectionEntry",sharedSelectionEntryGroups:"selectionEntryGroup",associations:"association"},textNodeTags=new Set(["description","readme","comment"]),textArrayTags=new Set(["alias"]),escapedHtml=/&(?:amp|lt|gt|quot|#39|apos);/g,htmlUnescapes={"&amp;":"&","&apos;":"'","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},unescape=Zn=>escapedHtml.test(Zn)?Zn.replace(escapedHtml,Jn=>htmlUnescapes[Jn]):Zn,containers={};for(const Zn in containerTags)containers[containerTags[Zn]]=Zn;const allowed={};for(const[Zn,Jn]of Object.entries(entries))typeof Jn.allowedChildrens=="string"?allowed[Zn]=Jn.allowedChildrens:allowed[Zn]=new Set(Jn.allowedChildrens);function parseValue(Zn){switch(Zn){case"true":return!0;case"false":return!1;default:if(isNaN(Zn))return Zn;const Jn=parseFloat(Zn);return isFinite(Jn)&&Zn.includes("+")==!1?Jn:Zn}}function xmlToJson(Zn){const Jn={allowBooleanAttributes:!0,ignoreAttributes:!1,attributeNamePrefix:"",textNodeName:"$text",processEntities:!1,parseTagValue:!1,ignoreDeclaration:!0,alwaysCreateTextNode:!1,isArray:(Xn,Qn,er,tr)=>!tr&&(Xn in containers||textArrayTags.has(Xn)),attributeValueProcessor:(Xn,Qn)=>parseValue(unescape(Qn)),tagValueProcessor:(Xn,Qn)=>unescape(Qn)};return new fxp.XMLParser(Jn).parse(Zn)}async function unzipFolder(Zn,Jn){const Xn=await unzip(Zn),Qn={};for(const er in Xn.entries){const tr=Xn.entries[er];if(tr.isDirectory)continue;const nr=removePrefix$3(removePrefix$3(er,Jn),"/");if(nr.startsWith("."))continue;const rr=isZipExtension(nr)?await tr.arrayBuffer():await tr.text();Qn[nr]=rr}return Qn}async function unzipFile(Zn){if(typeof Zn=="string"){var Jn=new TextEncoder;Zn=Jn.encode(Zn)}const Xn=await unzip(Zn);for(const Qn of Object.values(Xn.entries))return await Qn.text();throw"unzipFile failed: No Entries"}const zipExtensions=["gstz","zip","catz"],allowedExtensions=["gst","gstz","cat","catz","json"];function removeExtension(Zn){const Jn=Zn.lastIndexOf(".");return Jn===-1?Zn:Zn.substring(0,Jn)}function getExtension(Zn){return Zn.split(".").pop().toLowerCase()}function isZipExtension(Zn){const Jn=getExtension(Zn);return zipExtensions.includes(Jn)}function isAllowedExtension(Zn){const Jn=getExtension(Zn);return!!allowedExtensions.includes(Jn)}const oldBuggedTypes={sharedRules:"sharedRule",sharedProfiles:"sharedProfile",sharedInfoGroups:"sharedInfoGroup",sharedSelectionEntries:"sharedSelectionEntry",sharedSelectionEntryGroups:"sharedSelectionEntryGroup"};function normalize(Zn){var Jn,Xn;for(let Qn in Zn)if(Zn[Qn]==="")delete Zn[Qn];else if(containerTags[Qn]&&Zn[Qn])if(Qn in oldBuggedTypes){const er=Zn[Qn][containerTags[Qn]],tr=Zn[Qn][oldBuggedTypes[Qn]];Zn[Qn]=[...Array.isArray(er)?er:[],...Array.isArray(tr)?tr:[]],(Jn=Zn[Qn])==null||Jn.forEach(normalize)}else{const er=Zn[Qn][containerTags[Qn]];Array.isArray(er)?(Zn[Qn]=er,(Xn=Zn[Qn])==null||Xn.forEach(normalize)):isObject(Zn[Qn])&&delete Zn[Qn]}else textNodeTags.has(Qn)&&typeof Zn[Qn]=="object"&&!Array.isArray(Zn[Qn])&&(Zn[Qn]=Zn[Qn].$text??"");return Zn}function clean(Zn,Jn){const Xn=allowed[Jn],Qn=typeof Xn=="string"?allowed[Zn[Xn]]:Xn;for(let er in Zn)er in containerTags&&Array.isArray(Zn[er])&&(Qn&&!Qn.has(er)?delete Zn[er]:Zn[er].forEach(tr=>clean(tr,er)))}const empty=new Set;function allowed_children(Zn,Jn){let Xn=allowed[Jn];if(typeof Xn=="string"){const Qn=Zn[Xn];if(Qn){const er=toPlural(Qn);if(typeof er!="string"||er===Xn)return empty;Xn=allowed[er]}}return Xn||empty}function BSXmlToJson(Zn){const Jn=xmlToJson(Zn);normalize(getDataObject(Jn));const Xn=Jn.catalogue?"catalogue":"gameSystem";Jn.catalogue?(Jn.playable=1,Jn.id=hashFnv32a$1(Jn.catalogue.id),Jn.include=[1e3]):(Jn.playable=0,Jn.id=1e3);const Qn=Jn[Xn];return Jn.name=Qn.name,Jn.short=to_snake_case(Qn.name),Jn.playable=!Qn.library,Jn.version=Qn.battleScribeVersion,Jn.nrversion=Qn.revision,Jn}async function convertToJson(Zn,Jn){switch(Jn=getExtension(Jn),Jn){case"xml":case"cat":case"gst":return BSXmlToJson(Zn);case"zip":case"catz":case"gstz":return BSXmlToJson(await unzipFile(Zn));case"json":return JSON.parse(Zn);default:throw new Error("Extension not supported "+Jn)}}function toSingle(Zn){return containerTags[Zn]}function toPlural(Zn){return containers[Zn]}const skipKeys=new Set(["?xml","$text","_"]);function renestChilds(Zn){for(const[Jn,Xn]of Object.entries(Zn))textNodeTags.has(Jn)||textArrayTags.has(Jn)?Zn[Jn]=Array.isArray(Xn)?Xn:[Xn]:Array.isArray(Xn)&&!skipKeys.has(Jn)&&(Zn[Jn]=[{[toSingle(Jn)]:Xn}])}function putAttributesIn$(Zn){return forEachValueRecursive(Zn,Jn=>{typeof Jn=="object"&&renestChilds(Jn)}),forEachValueRecursive(Zn,Jn=>{if(typeof Jn=="object")for(const[Xn,Qn]of Object.entries(Jn))Array.isArray(Qn)||skipKeys.has(Xn)||textNodeTags.has(Xn)||isObject(Qn)||(Jn[`_${Xn}`]=Qn,delete Jn[Xn])}),Zn}function convertToXml(Zn){const Jn=JSON.parse(rootToJson(Zn));putAttributesIn$(Jn);const Xn={textNodeName:"$text",format:!0,attributeNamePrefix:"_",ignoreAttributes:!1,suppressBooleanAttributes:!1,suppressEmptyNode:!0};return Jn.gameSystem&&(Jn.gameSystem._xmlns="http://www.battlescribe.net/schema/gameSystemSchema"),Jn.catalogue&&(Jn.catalogue._xmlns="http://www.battlescribe.net/schema/catalogueSchema"),`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
`+new fxp.XMLBuilder(Xn).build(Jn)}const systemCategories=[{type:"publications",name:"Publications",icon:"publication.png"},{type:"costTypes",name:"Cost Types",icon:"cost.png"},{type:"profileTypes",name:"Profile Types",icon:"profileType.png"},{type:"categoryEntries",name:"Category Entries",icon:"category.png"},{type:"forceEntries",name:"Force Entries",icon:"force.png"},{type:"sharedSelectionEntries",name:"Shared Selection Entries",icon:"selectionEntryLink.png"},{type:"sharedSelectionEntryGroups",name:"Shared Selection Entry Groups",icon:"shared_groups.png"},{type:"sharedProfiles",name:"Shared Profiles",icon:"shared_profiles.png"},{type:"sharedRules",name:"Shared Rules",icon:"shared_rules.png"},{type:"sharedInfoGroups",name:"Shared Info Groups",icon:"infoGroup.png"},{type:"rules",links:"infoLinks",name:"Root Rules",icon:"rule.png"},{type:"selectionEntries",links:"entryLinks",name:"Root Selection Entries",icon:"selectionEntry.png"}],catalogueCategories=[{type:"catalogueLinks",name:"Catalogue Links",icon:"catalogueLink.png"},...systemCategories];function getTypeLabel(Zn,Jn){switch(Zn){case"selectionEntry":return"Entry";case"selectionEntryGroup":return"Group";case"selectionEntryLink":return"Entry (link)";case"selectionEntryGroupLink":return"Group (link)";case"force":return"Force";case"category":return"Category";case"categoryLink":return"Category (link)";case"catalogueLink":return"Catalogue (link)";case"publication":return"Publication";case"costType":return"Cost Type";case"costs":return"Cost";case"link":return"Link";case"profileType":return"Profile Type";case"profile":return"Profile";case"rule":return"Rule";case"infoLink":return"Info (link)";case"infoGroup":return"Info Group";case"profileLink":return"Profile";case"ruleLink":return"Rule (link)";case"infoGroupLink":return"Info Group (link)";case"characteristic":return"Characteristic";case"characteristicType":return"Characteristic Type";case"constraint":return"Constraint";case"condition":return"Condition";case"modifier":return"Modifier";case"modifierGroup":return"Modifier Group";case"repeat":return"Repeat";case"conditionGroup":return"Condition Group";case"catalogue":return"Catalogue";case"gameSystem":return"Game System";default:return console.warn("unknown getTypeLabel key",Zn),Zn}}function getTypeName(Zn,Jn){switch(Zn){case"selectionEntries":return"selectionEntry";case"selectionEntryGroups":return"selectionEntryGroup";case"sharedSelectionEntries":return Jn!=null&&Jn.targetId?"selectionEntryLink":"selectionEntry";case"sharedSelectionEntryGroups":return Jn!=null&&Jn.targetId?"selectionEntryLink":"selectionEntryGroup";case"entryLinks":return Jn!=null&&Jn.target?Jn.target.editorTypeName+"Link":"link";case"forceEntries":return"force";case"categoryEntries":return"category";case"categoryLinks":return"categoryLink";case"catalogueLinks":return"catalogueLink";case"publications":return"publication";case"costTypes":return"costType";case"costs":return"cost";case"profileTypes":return"profileType";case"profiles":return"profile";case"rules":return"rule";case"characteristics":return"characteristic";case"characteristicTypes":return"characteristicType";case"sharedProfiles":return"profile";case"sharedRules":return"rule";case"sharedInfoGroups":return"infoGroup";case"infoLinks":return Jn?`${Jn.type||"info"}Link`:"infoLink";case"infoGroups":return"infoGroup";case"associations":return"association";case"constraints":return"constraint";case"conditions":return"condition";case"modifiers":return"modifier";case"modifierGroups":return"modifierGroup";case"repeats":return"repeat";case"conditionGroups":return"conditionGroup";case"catalogue":case"gameSystem":return Zn;default:return console.warn("unknown getTypeName key",Zn),Zn}}function getNameExtra(Zn,Jn=!0,Xn=!0){var nr,rr,sr,ir,or;const Qn=Zn.parentKey,er=[];switch(Qn){case"infoLinks":["profiles","sharedProfiles"].includes((nr=Zn.target)==null?void 0:nr.parentKey)&&Xn&&er.push(Zn.target.typeName);break;case"sharedProfiles":case"profiles":Xn&&er.push(Zn.typeName);break;case"selectionEntries":case"sharedSelectionEntries":Zn.isEntry()&&Zn.getType()!=="upgrade"&&Xn&&er.push(Zn.getType());break;case"entryLinks":Zn.target&&Zn.isEntry()&&Zn.getType()!=="upgrade"&&Xn&&er.push(Zn.getType());break;case"modifierGroups":er.push(`(${(((rr=Zn.modifiers)==null?void 0:rr.length)||0)+(((sr=Zn.modifierGroups)==null?void 0:sr.length)||0)})`);break}const tr=(((ir=Zn.refs)==null?void 0:ir.length)??0)+(((or=Zn.other_refs)==null?void 0:or.length)??0);if(tr&&Jn){const ar=tr===1?"":"s";er.push(`(${tr||0} ref${ar})`)}return Zn.comment&&Zn.comment[0]&&er.push("# "+Zn.comment),Zn.isCollective&&Zn.isCollective()&&er.push("(collective)"),er.join(" ")}function getName(Zn){const Jn=Zn.parentKey;switch(Jn){case"selectionEntries":case"sharedSelectionEntries":case"selectionEntryGroups":case"sharedSelectionEntryGroups":case"entryLinks":case"forceEntries":case"categoryLinks":case"categoryEntries":case"sharedInfoGroups":case"infoGroups":case"catalogueLinks":case"publications":case"profileTypes":case"catalogue":case"gameSystem":case"rules":case"sharedRules":case"costs":case"costTypes":case"sharedProfiles":case"profiles":case"characteristics":case"characteristicTypes":return Zn.getName();case"modifiers":return modifierToString(getModifierOrConditionParent(Zn),Zn);case"repeats":{const Xn=Zn,Qn=getModifierOrConditionParent(Zn);return Qn||console.error("no parent for repeat",Zn),`Repeat ${Xn.repeats} times for every ${Xn.value} ${fieldToText(Qn,Xn.field)} in ${fieldToText(Qn,Xn.scope)} of ${Xn.childId?fieldToText(Qn,Xn.childId):" any"}`+(Xn.includeChildSelections?" (recursive)":"")}case"conditions":return conditionToString(getModifierOrConditionParent(Zn),Zn);case"constraints":return conditionToString(getModifierOrConditionParent(Zn),Zn);case"modifierGroups":return"Modify...";case"conditionGroups":return`${Zn.type.toUpperCase()}`;case"infoLinks":return Zn.target?getName(Zn.target):Zn.getName();case"associations":return Zn.name;default:return console.log(Jn,Zn),Jn}}function forEachEntryRecursive(Zn,Jn){Jn(Zn);const Xn=[Zn];for(;Xn.length;){const Qn=Xn.pop();for(const er of Object.keys(Qn)){if(!goodJsonKeys.has(er)||textNodeTags.has(er))continue;const tr=Qn[er];if(tr&&Array.isArray(tr))for(const nr of tr)Xn.push(nr),Jn(nr,er,Qn)}}}function removeEntry(Zn){const Jn=Zn.parent;if(Jn){const Xn=Jn[Zn.parentKey],Qn=Xn.indexOf(Zn);Qn!==-1&&Xn.splice(Qn,1)}}function onRemoveEntry(Zn,Jn){const Xn=Zn.catalogue;forEachEntryRecursive(Zn,(Qn,er,tr)=>{if(Xn.removeFromIndex(Qn),Qn.isLink&&Qn.isLink()&&(Xn.unlinkLink(Qn),delete Qn.target),Qn instanceof Profile&&Qn.typeId){const nr=Qn.catalogue.findOptionById(Qn.typeId);nr&&Qn.catalogue.removeRef(Qn,nr)}if(Qn instanceof Condition){const nr=Qn.scope,rr=Qn.childId;if(!validScopes.has(nr)){const sr=Qn.catalogue.findOptionById(Qn.scope);sr&&Qn.catalogue.removeOtherRef(Qn,sr)}if(!validChildIds.has(rr)){const sr=Qn.catalogue.findOptionById(Qn.childId);sr&&Qn.catalogue.removeOtherRef(Qn,sr)}}delete Qn.parent,delete Qn.catalogue}),Jn&&Zn instanceof CatalogueLink&&Xn.reload(Jn)}function onAddEntry(Zn,Jn,Xn,Qn){let er=!1;for(const tr of Array.isArray(Zn)?Zn:[Zn])forEachEntryRecursive(tr,(nr,rr,sr)=>{if(isObject(nr)){if(nr.parent=sr||Xn,nr.catalogue=Jn,Jn.addToIndex(nr),nr instanceof Link&&Jn.updateLink(nr),nr instanceof Profile&&nr.typeId){const ir=nr.catalogue.findOptionById(nr.typeId);ir&&nr.catalogue.addRef(nr,ir)}nr instanceof CatalogueLink&&nr.targetId&&(er=!0),Jn.refreshErrors(nr)}});er&&Xn&&(Xn.catalogue||Xn).reload(Qn)}function getEntryPath(Zn){if(!Zn.parent&&!Zn.isCatalogue())return[{id:Zn.id,key:Zn.parentKey,index:0}];const Jn=[];for(;Zn.parent;){const Xn=Zn.parent||Zn.catalogue;Jn.push({key:Zn.parentKey,index:Xn[Zn.parentKey].indexOf(Zn),id:Zn.id}),Zn=Zn.parent}return Jn.reverse(),Jn}function getEntryPathInfo(Zn){if(!Zn.parent&&!Zn.isCatalogue())return[{id:Zn.id,key:Zn.parentKey,index:0}];const Jn=[];do{const Xn=Zn.parent||Zn.catalogue;Xn?Jn.push({name:Zn.getName(),type:Zn.editorTypeName,label:Zn.getTypeName(),display:getName(Zn),key:Zn.parentKey,index:Xn[Zn.parentKey].indexOf(Zn),id:Zn.id}):Jn.push({name:Zn.getName(),display:getName(Zn),type:"catalogue",key:"catalogue",id:Zn.id,index:0}),Zn=Zn.parent}while(Zn);return Jn.reverse(),Jn}function addAtEntryPath(Zn,Jn,Xn){let Qn=Zn;for(let nr=0;nr<Jn.length-1;nr++){const rr=Jn[nr];Qn=Qn[rr.key][rr.index]}const er=Jn[Jn.length-1];return Qn[er.key]||(Qn[er.key]=[]),Qn[er.key].splice(er.index,0,Xn),Qn}function getAtEntryPath(Zn,Jn){let Xn=Zn;for(const Qn of Jn){if(Xn=Xn[Qn.key],!Xn)return;Xn=Xn[Qn.index]}return Xn}function popAtEntryPath(Zn,Jn){let Xn=Zn;const Qn=Jn[Jn.length-1];for(const nr of Jn)nr!==Qn&&(Xn=Xn[nr.key][nr.index]);const tr=Xn[Qn.key].splice(Qn.index,1)[0];if(!tr)throw new Error("popAtEntryPath failed");return tr}function scrambleIds(Zn,Jn){const Xn={},Qn=Array.isArray(Jn)?Jn:[Jn];for(const er of Qn)forEachEntryRecursive(er,(tr,nr,rr)=>{if(tr.id){const sr=tr.id,ir=Zn.generateNonConflictingId(sr);tr.id=ir,Xn[sr]=ir}});for(const er of Qn)forEachEntryRecursive(er,(tr,nr,rr)=>{tr instanceof Condition&&(tr.scope in Xn&&(tr.scope=Xn[tr.scope]),tr.childId in Xn&&(tr.childId=Xn[tr.childId])),tr instanceof Modifier&&tr.field in Xn&&(tr.field=Xn[tr.field])})}function fixKey(Zn,Jn,Xn){if(Zn.isCatalogue()){if(Xn)switch(Jn){case"sharedRules":case"rules":return["sharedRules","rules"].includes(Xn)?Xn:"";case"sharedProfiles":case"profiles":return["sharedProfiles","profiles"].includes(Xn)?Xn:"";case"sharedInfoGroups":case"infoGroups":return["sharedInfoGroups","infoGroups"].includes(Xn)?Xn:"";case"sharedSelectionEntries":case"selectionEntries":return["sharedSelectionEntries","selectionEntries"].includes(Xn)?Xn:"";case"sharedSelectionEntryGroups":case"selectionEntryGroups":return["sharedSelectionEntryGroups","selectionEntryGroups"].includes(Xn)?Xn:"";default:return Jn}}else switch(Jn){case"sharedRules":return"rules";case"sharedProfiles":return"profiles";case"sharedInfoGroups":return"infoGroups";case"sharedSelectionEntries":return"selectionEntries";case"sharedSelectionEntryGroups":return"selectionEntryGroups";default:return Jn}return Jn}class NoObserve{get[Symbol.toStringTag](){return"ObjectNoObserve"}}function noObserve(){return new NoObserve}const keyInfoCache={};function getKeyInfoClass(Zn,Jn,Xn){if(Jn in Zn)return Zn[Jn];class Qn extends Base{constructor(){super(...arguments);Zr(this,"parent")}get parentKey(){return Jn}get editorTypeName(){return getTypeName(Jn,this)}toString(){return`${this.editorTypeName} - ${getName(this)}`}}return Qn.prototype.parentKey,Object.setPrototypeOf(Qn.prototype,Object.getPrototypeOf(Xn)),Zn[Jn]=Qn.prototype,Qn.prototype}function setKeyInfo(Zn,Jn,Xn){Object.setPrototypeOf(Xn,getKeyInfoClass(Zn,Jn,Xn))}const protoMap={"*":Base.prototype,catalogue:Catalogue.prototype,catalogueLinks:CatalogueLink.prototype,gameSystem:Catalogue.prototype,forceEntries:Force.prototype,forces:Force.prototype,force:Force.prototype,categoryEntries:Category.prototype,category:Category.prototype,categories:Category.prototype,link:Link.prototype,infoLinks:InfoLink.prototype,categoryLinks:CategoryLink.prototype,entry:Entry.prototype,selectionEntries:Entry.prototype,entryLinks:Link.prototype,sharedSelectionEntries:Entry.prototype,group:Group.prototype,selectionEntryGroups:Group.prototype,sharedSelectionEntryGroups:Group.prototype,sharedRules:Rule.prototype,rules:Rule.prototype,rule:Rule.prototype,profileTypes:ProfileType.prototype,sharedProfiles:Profile.prototype,profiles:Profile.prototype,profile:Profile.prototype,characteristics:Characteristic.prototype,characteristic:Characteristic.prototype,characteristicTypes:Base.prototype,characteristicType:Base.prototype,sharedInfoGroups:InfoGroup.prototype,infoGroups:InfoGroup.prototype,infoGroup:InfoGroup.prototype,publications:Publication.prototype,publication:Publication.prototype,repeats:Condition.prototype,conditions:Condition.prototype,constraints:Constraint.prototype,modifiers:Modifier.prototype,modifierGroups:ModifierGroup.prototype};Object.values(protoMap);function getPrototypeFromKey(Zn){return Zn in protoMap?protoMap[Zn]:protoMap["*"]}function setPrototype(Zn,Jn){const Xn=getPrototypeFromKey(Jn);return Xn&&(Object.setPrototypeOf(Zn,Xn),Zn.post_init&&Zn.post_init(),globalThis.isEditor&&setKeyInfo(Zn.keyInfoCache||keyInfoCache,Jn,Zn)),Zn}function setPrototypeRecursive(Zn){const Jn=[Zn];for(;Jn.length;){const Xn=Jn.pop();for(const Qn of Object.keys(Xn)){const er=Xn[Qn];if(isObject(er))if(Array.isArray(er)){if(er.length&&isObject(er[0]))for(let tr=er.length;tr--;){const nr=er[tr];isDefaultObject(nr)&&(setPrototype(nr,Qn),Jn.push(nr))}}else isDefaultObject(er)&&(setPrototype(er,Qn),Jn.push(er))}}}const useCataloguesStore=defineStore("catalogues",{state:()=>({dict:{},version:1}),persist:{storage:globalThis.localStorage},actions:{get(Zn){return Zn in this.dict||(this.dict[Zn]={}),this.dict[Zn]},setEdited(Zn,Jn){this.get(Zn).edited=Jn},getEdited(Zn){return this.get(Zn).edited},setErrors(Zn,Jn){this.get(Zn).errors=Jn},getErrors(Zn){return this.get(Zn).errors},getDependents(Zn){return this.get(Zn).dependents},updateCatalogue(Zn){var er;const Jn=Zn.id,Xn=Zn.gameSystemId||Zn.id,Qn=(er=Zn.catalogueLinks)==null?void 0:er.map(tr=>({targetId:tr.targetId===Xn?Xn:`${Xn}-${tr.targetId}`,sourceId:Jn===Xn?Xn:`${Xn}-${Jn}`,importRootEntries:tr.importRootEntries,sourceName:Zn.name}));Zn.gameSystemId&&(Qn==null||Qn.push({targetId:Zn.gameSystemId,sourceId:Jn,importRootEntries:!0,sourceName:Zn.name})),this.setDependencies(Jn,Qn)},setDependencies(Zn,Jn){var Qn;const Xn=(Qn=this.get(Zn))==null?void 0:Qn.dependencies;if(Xn)for(const er of Xn)this.removeDependent(er.targetId,er);if(Jn)for(const er of Jn)this.addDependent(er.targetId,er);this.get(Zn).dependencies=Jn||[]},setDependents(Zn,Jn){this.get(Zn).dependents=Jn},addDependent(Zn,Jn){const Xn=this.get(Zn);Xn.dependents||(Xn.dependents=[]),Xn.dependents.push(Jn)},removeDependent(Zn,Jn){var Qn;const Xn=(Qn=this.get(Zn))==null?void 0:Qn.dependents;if(Xn){const er=Xn.findIndex(tr=>tr.sourceId===Jn.sourceId);er>=0&&Xn.splice(er,1)}}}}),LeftPanelDefaults={showImported:!1,ignoreProfilesRules:!1,filter:"",scroll:0,selection:void 0,mode:"edit"},useEditorUIState=defineStore("editor-ui",{state:()=>({catalogues:{}}),persist:{storage:globalThis.localStorage},actions:{collapse_level(Zn){var Xn;if(Zn>=0){const Qn=`depth-${Zn} collapsible-box opened`,er=document.documentElement.getElementsByClassName(Qn);if(er!=null&&er.length)for(var Jn=0;Jn<er.length;Jn++){const tr=er[Jn];(Xn=get_ctx(tr))==null||Xn.close()}}},collapse_all(){this.collapse_level(1),this.collapse_level(0)},collapse_deepest(){const Zn="collapsible-box opened",Jn=document.documentElement.getElementsByClassName(Zn);let Xn=-1;if(Jn!=null&&Jn.length)for(var Qn=0;Qn<Jn.length;Qn++)Jn[Qn].classList.forEach(tr=>{tr.startsWith("depth-")&&(Xn=Math.max(Xn,parseInt(tr.split("-")[1])))});this.collapse_level(Xn)},set_state(Zn,Jn){function Xn(tr,nr,rr=0){const sr=`depth-${rr} collapsible-box opened`,ir=tr.getElementsByClassName(sr);if(ir!=null&&ir.length)for(var or=0;or<ir.length;or++){const ar=ir[or],cr=get_base_from_vue_el(get_ctx(ar)),lr=cr.parentKey,hr=cr.parent;let fr=nr;if(hr){const gr=hr[lr];if(!gr||!Array.isArray(gr))continue;const ur=gr.indexOf(cr);lr in nr||(nr[lr]={});const dr=nr[lr];ur in dr||(dr[ur]={}),fr=dr[ur]}else{const gr=[];for(let dr=0;dr<ar.classList.length;dr++)gr.push(ar.classList[dr]);const ur=gr.filter(dr=>goodJsonKeys.has(dr));for(const dr of ur)nr[dr]={},nr[dr][0]={},fr=nr[dr][0]}Xn(ar,fr,rr+1)}}const Qn={};Xn(document.documentElement,Qn);const er={...Jn,open:Qn};return this.$state.catalogues[Zn]=er,Qn},get_data(Zn){const Jn=this.$state.catalogues[Zn];return Jn||{}},get_root(Zn,Jn){let Xn=this.$state.catalogues[Zn];return!(!Xn||(Xn=Xn.open[Jn],!Xn))},get(Zn,Jn){if(!Jn.length)return!1;let Xn=this.$state.catalogues[Zn];if(!Xn)return!1;let Qn=Xn.open[Jn[0].key];if(!Qn||(Qn=Qn[0],!Qn))return!1;for(const er of Jn){const tr=Qn[er.key];if(!tr)return!1;const nr=tr[er.index];if(!nr)return!1;Qn=nr}return!0}}}),e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,t=Object.keys,n=Array.isArray;function r(Zn,Jn){return typeof Jn!="object"||t(Jn).forEach(function(Xn){Zn[Xn]=Jn[Xn]}),Zn}typeof Promise>"u"||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i={}.hasOwnProperty;function o(Zn,Jn){return i.call(Zn,Jn)}function a(Zn,Jn){typeof Jn=="function"&&(Jn=Jn(s(Zn))),(typeof Reflect>"u"?t:Reflect.ownKeys)(Jn).forEach(Xn=>{l(Zn,Xn,Jn[Xn])})}const u=Object.defineProperty;function l(Zn,Jn,Xn,Qn){u(Zn,Jn,r(Xn&&o(Xn,"get")&&typeof Xn.get=="function"?{get:Xn.get,set:Xn.set,configurable:!0}:{value:Xn,configurable:!0,writable:!0},Qn))}function c(Zn){return{from:function(Jn){return Zn.prototype=Object.create(Jn.prototype),l(Zn.prototype,"constructor",Zn),{extend:a.bind(null,Zn.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(Zn,Jn){let Xn;return h(Zn,Jn)||(Xn=s(Zn))&&d(Xn,Jn)}const f=[].slice;function p(Zn,Jn,Xn){return f.call(Zn,Jn,Xn)}function y(Zn,Jn){return Jn(Zn)}function m(Zn){if(!Zn)throw new Error("Assertion Failed")}function v(Zn){e.setImmediate?setImmediate(Zn):setTimeout(Zn,0)}function g(Zn,Jn){return Zn.reduce((Xn,Qn,er)=>{var tr=Jn(Qn,er);return tr&&(Xn[tr[0]]=tr[1]),Xn},{})}function b(Zn,Jn){if(o(Zn,Jn))return Zn[Jn];if(!Jn)return Zn;if(typeof Jn!="string"){for(var Xn=[],Qn=0,er=Jn.length;Qn<er;++Qn){var tr=b(Zn,Jn[Qn]);Xn.push(tr)}return Xn}var nr=Jn.indexOf(".");if(nr!==-1){var rr=Zn[Jn.substr(0,nr)];return rr===void 0?void 0:b(rr,Jn.substr(nr+1))}}function _(Zn,Jn,Xn){if(Zn&&Jn!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(Zn)))if(typeof Jn!="string"&&"length"in Jn){m(typeof Xn!="string"&&"length"in Xn);for(var Qn=0,er=Jn.length;Qn<er;++Qn)_(Zn,Jn[Qn],Xn[Qn])}else{var tr=Jn.indexOf(".");if(tr!==-1){var nr=Jn.substr(0,tr),rr=Jn.substr(tr+1);if(rr==="")Xn===void 0?n(Zn)&&!isNaN(parseInt(nr))?Zn.splice(nr,1):delete Zn[nr]:Zn[nr]=Xn;else{var sr=Zn[nr];sr&&o(Zn,nr)||(sr=Zn[nr]={}),_(sr,rr,Xn)}}else Xn===void 0?n(Zn)&&!isNaN(parseInt(Jn))?Zn.splice(Jn,1):delete Zn[Jn]:Zn[Jn]=Xn}}function w(Zn){var Jn={};for(var Xn in Zn)o(Zn,Xn)&&(Jn[Xn]=Zn[Xn]);return Jn}const x=[].concat;function k(Zn){return x.apply([],Zn)}const E="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(Zn=>["Int","Uint","Float"].map(Jn=>Jn+Zn+"Array")))).filter(Zn=>e[Zn]),P=E.map(Zn=>e[Zn]);g(E,Zn=>[Zn,!0]);let K=null;function O(Zn){K=typeof WeakMap<"u"&&new WeakMap;const Jn=S(Zn);return K=null,Jn}function S(Zn){if(!Zn||typeof Zn!="object")return Zn;let Jn=K&&K.get(Zn);if(Jn)return Jn;if(n(Zn)){Jn=[],K&&K.set(Zn,Jn);for(var Xn=0,Qn=Zn.length;Xn<Qn;++Xn)Jn.push(S(Zn[Xn]))}else if(P.indexOf(Zn.constructor)>=0)Jn=Zn;else{const tr=s(Zn);for(var er in Jn=tr===Object.prototype?{}:Object.create(tr),K&&K.set(Zn,Jn),Zn)o(Zn,er)&&(Jn[er]=S(Zn[er]))}return Jn}const{toString:A}={};function C(Zn){return A.call(Zn).slice(8,-1)}const j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",D=typeof j=="symbol"?function(Zn){var Jn;return Zn!=null&&(Jn=Zn[j])&&Jn.apply(Zn)}:function(){return null},I={};function B(Zn){var Jn,Xn,Qn,er;if(arguments.length===1){if(n(Zn))return Zn.slice();if(this===I&&typeof Zn=="string")return[Zn];if(er=D(Zn)){for(Xn=[];!(Qn=er.next()).done;)Xn.push(Qn.value);return Xn}if(Zn==null)return[Zn];if(typeof(Jn=Zn.length)=="number"){for(Xn=new Array(Jn);Jn--;)Xn[Jn]=Zn[Jn];return Xn}return[Zn]}for(Jn=arguments.length,Xn=new Array(Jn);Jn--;)Xn[Jn]=arguments[Jn];return Xn}const T=typeof Symbol<"u"?Zn=>Zn[Symbol.toStringTag]==="AsyncFunction":()=>!1;var R=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(Zn,Jn){R=Zn,M=Jn}var M=()=>!0;const N=!new Error("").stack;function q(){if(N)try{throw q.arguments,new Error}catch(Zn){return Zn}return new Error}function $(Zn,Jn){var Xn=Zn.stack;return Xn?(Jn=Jn||0,Xn.indexOf(Zn.name)===0&&(Jn+=(Zn.name+Zn.message).split(`
`).length),Xn.split(`
`).slice(Jn).filter(M).map(Qn=>`
`+Qn).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(Zn,Jn){this._e=q(),this.name=Zn,this.message=Jn}function Y(Zn,Jn){return Zn+". Errors: "+Object.keys(Jn).map(Xn=>Jn[Xn].toString()).filter((Xn,Qn,er)=>er.indexOf(Xn)===Qn).join(`
`)}function z(Zn,Jn,Xn,Qn){this._e=q(),this.failures=Jn,this.failedKeys=Qn,this.successCount=Xn,this.message=Y(Zn,Jn)}function G(Zn,Jn){this._e=q(),this.name="BulkError",this.failures=Object.keys(Jn).map(Xn=>Jn[Xn]),this.failuresByPos=Jn,this.message=Y(Zn,Jn)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce((Zn,Jn)=>(Zn[Jn]=Jn+"Error",Zn),{});const Q=W;var X=L.reduce((Zn,Jn)=>{var Xn=Jn+"Error";function Qn(er,tr){this._e=q(),this.name=Xn,er?typeof er=="string"?(this.message=`${er}${tr?`
 `+tr:""}`,this.inner=tr||null):typeof er=="object"&&(this.message=`${er.name} ${er.message}`,this.inner=er):(this.message=V[Jn]||Xn,this.inner=null)}return c(Qn).from(Q),Zn[Jn]=Qn,Zn},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce((Zn,Jn)=>(Zn[Jn+"Error"]=X[Jn],Zn),{}),Z=L.reduce((Zn,Jn)=>(["Syntax","Type","Range"].indexOf(Jn)===-1&&(Zn[Jn+"Error"]=X[Jn]),Zn),{});function ee(){}function te(Zn){return Zn}function ne(Zn,Jn){return Zn==null||Zn===te?Jn:function(Xn){return Jn(Zn(Xn))}}function re(Zn,Jn){return function(){Zn.apply(this,arguments),Jn.apply(this,arguments)}}function se(Zn,Jn){return Zn===ee?Jn:function(){var Xn=Zn.apply(this,arguments);Xn!==void 0&&(arguments[0]=Xn);var Qn=this.onsuccess,er=this.onerror;this.onsuccess=null,this.onerror=null;var tr=Jn.apply(this,arguments);return Qn&&(this.onsuccess=this.onsuccess?re(Qn,this.onsuccess):Qn),er&&(this.onerror=this.onerror?re(er,this.onerror):er),tr!==void 0?tr:Xn}}function ie(Zn,Jn){return Zn===ee?Jn:function(){Zn.apply(this,arguments);var Xn=this.onsuccess,Qn=this.onerror;this.onsuccess=this.onerror=null,Jn.apply(this,arguments),Xn&&(this.onsuccess=this.onsuccess?re(Xn,this.onsuccess):Xn),Qn&&(this.onerror=this.onerror?re(Qn,this.onerror):Qn)}}function oe(Zn,Jn){return Zn===ee?Jn:function(Xn){var Qn=Zn.apply(this,arguments);r(Xn,Qn);var er=this.onsuccess,tr=this.onerror;this.onsuccess=null,this.onerror=null;var nr=Jn.apply(this,arguments);return er&&(this.onsuccess=this.onsuccess?re(er,this.onsuccess):er),tr&&(this.onerror=this.onerror?re(tr,this.onerror):tr),Qn===void 0?nr===void 0?void 0:nr:r(Qn,nr)}}function ae(Zn,Jn){return Zn===ee?Jn:function(){return Jn.apply(this,arguments)!==!1&&Zn.apply(this,arguments)}}function ue(Zn,Jn){return Zn===ee?Jn:function(){var Xn=Zn.apply(this,arguments);if(Xn&&typeof Xn.then=="function"){for(var Qn=this,er=arguments.length,tr=new Array(er);er--;)tr[er]=arguments[er];return Xn.then(function(){return Jn.apply(Qn,tr)})}return Jn.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const[ce,he,de]=typeof Promise>"u"?[]:(()=>{let Zn=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[Zn,s(Zn),Zn];const Jn=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[Jn,s(Jn),Zn]})(),fe=he&&he.then,pe=ce&&ce.constructor,ye=!!de;var me=!1,ve=de?()=>{de.then(qe)}:e.setImmediate?setImmediate.bind(null,qe):e.MutationObserver?()=>{var Zn=document.createElement("div");new MutationObserver(()=>{qe(),Zn=null}).observe(Zn,{attributes:!0}),Zn.setAttribute("i","1")}:()=>{setTimeout(qe,0)},ge=function(Zn,Jn){Oe.push([Zn,Jn]),_e&&(ve(),_e=!1)},be=!0,_e=!0,we=[],xe=[],ke=null,Ee=te,Pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ct,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(Zn=>{try{ct(Zn[0],Zn[1])}catch{}})}},Ke=Pe,Oe=[],Se=0,Ae=[];function Ce(Zn){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var Jn=this._PSD=Ke;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),typeof Zn!="function"){if(Zn!==le)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Be(this,this._value))}this._state=null,this._value=null,++Jn.ref,Ie(this,Zn)}const je={get:function(){var Zn=Ke,Jn=Qe;function Xn(Qn,er){var tr=!Zn.global&&(Zn!==Ke||Jn!==Qe);const nr=tr&&!et();var rr=new Ce((sr,ir)=>{Re(this,new De(ut(Qn,Zn,tr,nr),ut(er,Zn,tr,nr),sr,ir,Zn))});return R&&Ne(rr,this),rr}return Xn.prototype=le,Xn},set:function(Zn){l(this,"then",Zn&&Zn.prototype===le?je:{get:function(){return Zn},set:je.set})}};function De(Zn,Jn,Xn,Qn,er){this.onFulfilled=typeof Zn=="function"?Zn:null,this.onRejected=typeof Jn=="function"?Jn:null,this.resolve=Xn,this.reject=Qn,this.psd=er}function Ie(Zn,Jn){try{Jn(Xn=>{if(Zn._state===null){if(Xn===Zn)throw new TypeError("A promise cannot be resolved with itself.");var Qn=Zn._lib&&$e();Xn&&typeof Xn.then=="function"?Ie(Zn,(er,tr)=>{Xn instanceof Ce?Xn._then(er,tr):Xn.then(er,tr)}):(Zn._state=!0,Zn._value=Xn,Te(Zn)),Qn&&Ue()}},Be.bind(null,Zn))}catch(Xn){Be(Zn,Xn)}}function Be(Zn,Jn){if(xe.push(Jn),Zn._state===null){var Xn=Zn._lib&&$e();Jn=Ee(Jn),Zn._state=!1,Zn._value=Jn,R&&Jn!==null&&typeof Jn=="object"&&!Jn._promise&&function(Qn,er,tr){try{Qn.apply(null,tr)}catch(nr){er&&er(nr)}}(()=>{var Qn=d(Jn,"stack");Jn._promise=Zn,l(Jn,"stack",{get:()=>me?Qn&&(Qn.get?Qn.get.apply(Jn):Qn.value):Zn.stack})}),function(Qn){we.some(er=>er._value===Qn._value)||we.push(Qn)}(Zn),Te(Zn),Xn&&Ue()}}function Te(Zn){var Jn=Zn._listeners;Zn._listeners=[];for(var Xn=0,Qn=Jn.length;Xn<Qn;++Xn)Re(Zn,Jn[Xn]);var er=Zn._PSD;--er.ref||er.finalize(),Se===0&&(++Se,ge(()=>{--Se==0&&Le()},[]))}function Re(Zn,Jn){if(Zn._state!==null){var Xn=Zn._state?Jn.onFulfilled:Jn.onRejected;if(Xn===null)return(Zn._state?Jn.resolve:Jn.reject)(Zn._value);++Jn.psd.ref,++Se,ge(Fe,[Xn,Zn,Jn])}else Zn._listeners.push(Jn)}function Fe(Zn,Jn,Xn){try{ke=Jn;var Qn,er=Jn._value;Jn._state?Qn=Zn(er):(xe.length&&(xe=[]),Qn=Zn(er),xe.indexOf(er)===-1&&function(tr){for(var nr=we.length;nr;)if(we[--nr]._value===tr._value)return void we.splice(nr,1)}(Jn)),Xn.resolve(Qn)}catch(tr){Xn.reject(tr)}finally{ke=null,--Se==0&&Le(),--Xn.psd.ref||Xn.psd.finalize()}}function Me(Zn,Jn,Xn){if(Jn.length===Xn)return Jn;var Qn="";if(Zn._state===!1){var er,tr,nr=Zn._value;nr!=null?(er=nr.name||"Error",tr=nr.message||nr,Qn=$(nr,0)):(er=nr,tr=""),Jn.push(er+(tr?": "+tr:"")+Qn)}return R&&((Qn=$(Zn._stackHolder,2))&&Jn.indexOf(Qn)===-1&&Jn.push(Qn),Zn._prev&&Me(Zn._prev,Jn,Xn)),Jn}function Ne(Zn,Jn){var Xn=Jn?Jn._numPrev+1:0;Xn<100&&(Zn._prev=Jn,Zn._numPrev=Xn)}function qe(){$e()&&Ue()}function $e(){var Zn=be;return be=!1,_e=!1,Zn}function Ue(){var Zn,Jn,Xn;do for(;Oe.length>0;)for(Zn=Oe,Oe=[],Xn=Zn.length,Jn=0;Jn<Xn;++Jn){var Qn=Zn[Jn];Qn[0].apply(null,Qn[1])}while(Oe.length>0);be=!0,_e=!0}function Le(){var Zn=we;we=[],Zn.forEach(Qn=>{Qn._PSD.onunhandled.call(null,Qn._value,Qn)});for(var Jn=Ae.slice(0),Xn=Jn.length;Xn;)Jn[--Xn]()}function Ve(Zn){return new Ce(le,!1,Zn)}function We(Zn,Jn){var Xn=Ke;return function(){var Qn=$e(),er=Ke;try{return st(Xn,!0),Zn.apply(this,arguments)}catch(tr){Jn&&Jn(tr)}finally{st(er,!1),Qn&&Ue()}}}a(Ce.prototype,{then:je,_then:function(Zn,Jn){Re(this,new De(null,null,Zn,Jn,Ke))},catch:function(Zn){if(arguments.length===1)return this.then(null,Zn);var Jn=arguments[0],Xn=arguments[1];return typeof Jn=="function"?this.then(null,Qn=>Qn instanceof Jn?Xn(Qn):Ve(Qn)):this.then(null,Qn=>Qn&&Qn.name===Jn?Xn(Qn):Ve(Qn))},finally:function(Zn){return this.then(Jn=>(Zn(),Jn),Jn=>(Zn(),Ve(Jn)))},stack:{get:function(){if(this._stack)return this._stack;try{me=!0;var Zn=Me(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=Zn),Zn}finally{me=!1}}},timeout:function(Zn,Jn){return Zn<1/0?new Ce((Xn,Qn)=>{var er=setTimeout(()=>Qn(new X.Timeout(Jn)),Zn);this.then(Xn,Qn).finally(clearTimeout.bind(null,er))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&l(Ce.prototype,Symbol.toStringTag,"Dexie.Promise"),Pe.env=it(),a(Ce,{all:function(){var Zn=B.apply(null,arguments).map(tt);return new Ce(function(Jn,Xn){Zn.length===0&&Jn([]);var Qn=Zn.length;Zn.forEach((er,tr)=>Ce.resolve(er).then(nr=>{Zn[tr]=nr,--Qn||Jn(Zn)},Xn))})},resolve:Zn=>{if(Zn instanceof Ce)return Zn;if(Zn&&typeof Zn.then=="function")return new Ce((Xn,Qn)=>{Zn.then(Xn,Qn)});var Jn=new Ce(le,!0,Zn);return Ne(Jn,ke),Jn},reject:Ve,race:function(){var Zn=B.apply(null,arguments).map(tt);return new Ce((Jn,Xn)=>{Zn.map(Qn=>Ce.resolve(Qn).then(Jn,Xn))})},PSD:{get:()=>Ke,set:Zn=>Ke=Zn},totalEchoes:{get:()=>Qe},newPSD:Je,usePSD:ot,scheduler:{get:()=>ge,set:Zn=>{ge=Zn}},rejectionMapper:{get:()=>Ee,set:Zn=>{Ee=Zn}},follow:(Zn,Jn)=>new Ce((Xn,Qn)=>Je((er,tr)=>{var nr=Ke;nr.unhandleds=[],nr.onunhandled=tr,nr.finalize=re(function(){(function(rr){function sr(){rr(),Ae.splice(Ae.indexOf(sr),1)}Ae.push(sr),++Se,ge(()=>{--Se==0&&Le()},[])})(()=>{this.unhandleds.length===0?er():tr(this.unhandleds[0])})},nr.finalize),Zn()},Jn,Xn,Qn))}),pe&&(pe.allSettled&&l(Ce,"allSettled",function(){const Zn=B.apply(null,arguments).map(tt);return new Ce(Jn=>{Zn.length===0&&Jn([]);let Xn=Zn.length;const Qn=new Array(Xn);Zn.forEach((er,tr)=>Ce.resolve(er).then(nr=>Qn[tr]={status:"fulfilled",value:nr},nr=>Qn[tr]={status:"rejected",reason:nr}).then(()=>--Xn||Jn(Qn)))})}),pe.any&&typeof AggregateError<"u"&&l(Ce,"any",function(){const Zn=B.apply(null,arguments).map(tt);return new Ce((Jn,Xn)=>{Zn.length===0&&Xn(new AggregateError([]));let Qn=Zn.length;const er=new Array(Qn);Zn.forEach((tr,nr)=>Ce.resolve(tr).then(rr=>Jn(rr),rr=>{er[nr]=rr,--Qn||Xn(new AggregateError(er))}))})}));const Ye={awaits:0,echoes:0,id:0};var ze=0,Ge=[],He=0,Qe=0,Xe=0;function Je(Zn,Jn,Xn,Qn){var er=Ke,tr=Object.create(er);tr.parent=er,tr.ref=0,tr.global=!1,tr.id=++Xe;var nr=Pe.env;tr.env=ye?{Promise:Ce,PromiseProp:{value:Ce,configurable:!0,writable:!0},all:Ce.all,race:Ce.race,allSettled:Ce.allSettled,any:Ce.any,resolve:Ce.resolve,reject:Ce.reject,nthen:lt(nr.nthen,tr),gthen:lt(nr.gthen,tr)}:{},Jn&&r(tr,Jn),++er.ref,tr.finalize=function(){--this.parent.ref||this.parent.finalize()};var rr=ot(tr,Zn,Xn,Qn);return tr.ref===0&&tr.finalize(),rr}function Ze(){return Ye.id||(Ye.id=++ze),++Ye.awaits,Ye.echoes+=100,Ye.id}function et(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=100*Ye.awaits,!0)}function tt(Zn){return Ye.echoes&&Zn&&Zn.constructor===pe?(Ze(),Zn.then(Jn=>(et(),Jn),Jn=>(et(),ht(Jn)))):Zn}function nt(Zn){++Qe,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.id=0),Ge.push(Ke),st(Zn,!0)}function rt(){var Zn=Ge[Ge.length-1];Ge.pop(),st(Zn,!1)}function st(Zn,Jn){var Xn=Ke;if((Jn?!Ye.echoes||He++&&Zn===Ke:!He||--He&&Zn===Ke)||at(Jn?nt.bind(null,Zn):rt),Zn!==Ke&&(Ke=Zn,Xn===Pe&&(Pe.env=it()),ye)){var Qn=Pe.env.Promise,er=Zn.env;he.then=er.nthen,Qn.prototype.then=er.gthen,(Xn.global||Zn.global)&&(Object.defineProperty(e,"Promise",er.PromiseProp),Qn.all=er.all,Qn.race=er.race,Qn.resolve=er.resolve,Qn.reject=er.reject,er.allSettled&&(Qn.allSettled=er.allSettled),er.any&&(Qn.any=er.any))}}function it(){var Zn=e.Promise;return ye?{Promise:Zn,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:Zn.all,race:Zn.race,allSettled:Zn.allSettled,any:Zn.any,resolve:Zn.resolve,reject:Zn.reject,nthen:he.then,gthen:Zn.prototype.then}:{}}function ot(Zn,Jn,Xn,Qn,er){var tr=Ke;try{return st(Zn,!0),Jn(Xn,Qn,er)}finally{st(tr,!1)}}function at(Zn){fe.call(ce,Zn)}function ut(Zn,Jn,Xn,Qn){return typeof Zn!="function"?Zn:function(){var er=Ke;Xn&&Ze(),st(Jn,!0);try{return Zn.apply(this,arguments)}finally{st(er,!1),Qn&&at(et)}}}function lt(Zn,Jn){return function(Xn,Qn){return Zn.call(this,ut(Xn,Jn),ut(Qn,Jn))}}(""+fe).indexOf("[native code]")===-1&&(Ze=et=ee);function ct(Zn,Jn){var Xn;try{Xn=Jn.onuncatched(Zn)}catch{}if(Xn!==!1)try{var Qn,er={promise:Jn,reason:Zn};if(e.document&&document.createEvent?((Qn=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),r(Qn,er)):e.CustomEvent&&r(Qn=new CustomEvent("unhandledrejection",{detail:er}),er),Qn&&e.dispatchEvent&&(dispatchEvent(Qn),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(Qn)}catch{}R&&Qn&&!Qn.defaultPrevented&&console.warn(`Unhandled rejection: ${Zn.stack||Zn}`)}catch{}}var ht=Ce.reject;function dt(Zn,Jn,Xn,Qn){if(Zn.idbdb&&(Zn._state.openComplete||Ke.letThrough||Zn._vip)){var er=Zn._createTransaction(Jn,Xn,Zn._dbSchema);try{er.create(),Zn._state.PR1398_maxLoop=3}catch(tr){return tr.name===H.InvalidState&&Zn.isOpen()&&--Zn._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),Zn._close(),Zn.open().then(()=>dt(Zn,Jn,Xn,Qn))):ht(tr)}return er._promise(Jn,(tr,nr)=>Je(()=>(Ke.trans=er,Qn(tr,nr,er)))).then(tr=>er._completion.then(()=>tr))}if(Zn._state.openComplete)return ht(new X.DatabaseClosed(Zn._state.dbOpenError));if(!Zn._state.isBeingOpened){if(!Zn._options.autoOpen)return ht(new X.DatabaseClosed);Zn.open().catch(ee)}return Zn._state.dbReadyPromise.then(()=>dt(Zn,Jn,Xn,Qn))}const ft=String.fromCharCode(65535),pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt=[],mt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),vt=mt,gt=mt,bt=Zn=>!/(dexie\.js|dexie\.min\.js)/.test(Zn);function _t(Zn,Jn){return Zn?Jn?function(){return Zn.apply(this,arguments)&&Jn.apply(this,arguments)}:Zn:Jn}const wt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(Zn){return typeof Zn!="string"||/\./.test(Zn)?Jn=>Jn:Jn=>(Jn[Zn]===void 0&&Zn in Jn&&delete(Jn=O(Jn))[Zn],Jn)}class kt{_trans(Jn,Xn,Qn){const er=this._tx||Ke.trans,tr=this.name;function nr(sr,ir,or){if(!or.schema[tr])throw new X.NotFound("Table "+tr+" not part of transaction");return Xn(or.idbtrans,or)}const rr=$e();try{return er&&er.db===this.db?er===Ke.trans?er._promise(Jn,nr,Qn):Je(()=>er._promise(Jn,nr,Qn),{trans:er,transless:Ke.transless||Ke}):dt(this.db,Jn,[this.name],nr)}finally{rr&&Ue()}}get(Jn,Xn){return Jn&&Jn.constructor===Object?this.where(Jn).first(Xn):this._trans("readonly",Qn=>this.core.get({trans:Qn,key:Jn}).then(er=>this.hook.reading.fire(er))).then(Xn)}where(Jn){if(typeof Jn=="string")return new this.db.WhereClause(this,Jn);if(n(Jn))return new this.db.WhereClause(this,`[${Jn.join("+")}]`);const Xn=t(Jn);if(Xn.length===1)return this.where(Xn[0]).equals(Jn[Xn[0]]);const Qn=this.schema.indexes.concat(this.schema.primKey).filter(ir=>ir.compound&&Xn.every(or=>ir.keyPath.indexOf(or)>=0)&&ir.keyPath.every(or=>Xn.indexOf(or)>=0))[0];if(Qn&&this.db._maxKey!==ft)return this.where(Qn.name).equals(Qn.keyPath.map(ir=>Jn[ir]));!Qn&&R&&console.warn(`The query ${JSON.stringify(Jn)} on ${this.name} would benefit of a compound index [${Xn.join("+")}]`);const{idxByName:er}=this.schema,tr=this.db._deps.indexedDB;function nr(ir,or){try{return tr.cmp(ir,or)===0}catch{return!1}}const[rr,sr]=Xn.reduce(([ir,or],ar)=>{const cr=er[ar],lr=Jn[ar];return[ir||cr,ir||!cr?_t(or,cr&&cr.multi?hr=>{const fr=b(hr,ar);return n(fr)&&fr.some(gr=>nr(lr,gr))}:hr=>nr(lr,b(hr,ar))):or]},[null,null]);return rr?this.where(rr.name).equals(Jn[rr.keyPath]).filter(sr):Qn?this.filter(sr):this.where(Xn).equals("")}filter(Jn){return this.toCollection().and(Jn)}count(Jn){return this.toCollection().count(Jn)}offset(Jn){return this.toCollection().offset(Jn)}limit(Jn){return this.toCollection().limit(Jn)}each(Jn){return this.toCollection().each(Jn)}toArray(Jn){return this.toCollection().toArray(Jn)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(Jn){return new this.db.Collection(new this.db.WhereClause(this,n(Jn)?`[${Jn.join("+")}]`:Jn))}reverse(){return this.toCollection().reverse()}mapToClass(Jn){this.schema.mappedClass=Jn;const Xn=Qn=>{if(!Qn)return Qn;const er=Object.create(Jn.prototype);for(var tr in Qn)if(o(Qn,tr))try{er[tr]=Qn[tr]}catch{}return er};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Xn,this.hook("reading",Xn),Jn}defineClass(){return this.mapToClass(function(Jn){r(this,Jn)})}add(Jn,Xn){const{auto:Qn,keyPath:er}=this.schema.primKey;let tr=Jn;return er&&Qn&&(tr=xt(er)(Jn)),this._trans("readwrite",nr=>this.core.mutate({trans:nr,type:"add",keys:Xn!=null?[Xn]:null,values:[tr]})).then(nr=>nr.numFailures?Ce.reject(nr.failures[0]):nr.lastResult).then(nr=>{if(er)try{_(Jn,er,nr)}catch{}return nr})}update(Jn,Xn){if(typeof Jn!="object"||n(Jn))return this.where(":id").equals(Jn).modify(Xn);{const Qn=b(Jn,this.schema.primKey.keyPath);if(Qn===void 0)return ht(new X.InvalidArgument("Given object does not contain its primary key"));try{typeof Xn!="function"?t(Xn).forEach(er=>{_(Jn,er,Xn[er])}):Xn(Jn,{value:Jn,primKey:Qn})}catch{}return this.where(":id").equals(Qn).modify(Xn)}}put(Jn,Xn){const{auto:Qn,keyPath:er}=this.schema.primKey;let tr=Jn;return er&&Qn&&(tr=xt(er)(Jn)),this._trans("readwrite",nr=>this.core.mutate({trans:nr,type:"put",values:[tr],keys:Xn!=null?[Xn]:null})).then(nr=>nr.numFailures?Ce.reject(nr.failures[0]):nr.lastResult).then(nr=>{if(er)try{_(Jn,er,nr)}catch{}return nr})}delete(Jn){return this._trans("readwrite",Xn=>this.core.mutate({trans:Xn,type:"delete",keys:[Jn]})).then(Xn=>Xn.numFailures?Ce.reject(Xn.failures[0]):void 0)}clear(){return this._trans("readwrite",Jn=>this.core.mutate({trans:Jn,type:"deleteRange",range:wt})).then(Jn=>Jn.numFailures?Ce.reject(Jn.failures[0]):void 0)}bulkGet(Jn){return this._trans("readonly",Xn=>this.core.getMany({keys:Jn,trans:Xn}).then(Qn=>Qn.map(er=>this.hook.reading.fire(er))))}bulkAdd(Jn,Xn,Qn){const er=Array.isArray(Xn)?Xn:void 0,tr=(Qn=Qn||(er?void 0:Xn))?Qn.allKeys:void 0;return this._trans("readwrite",nr=>{const{auto:rr,keyPath:sr}=this.schema.primKey;if(sr&&er)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(er&&er.length!==Jn.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const ir=Jn.length;let or=sr&&rr?Jn.map(xt(sr)):Jn;return this.core.mutate({trans:nr,type:"add",keys:er,values:or,wantResults:tr}).then(({numFailures:ar,results:cr,lastResult:lr,failures:hr})=>{if(ar===0)return tr?cr:lr;throw new G(`${this.name}.bulkAdd(): ${ar} of ${ir} operations failed`,hr)})})}bulkPut(Jn,Xn,Qn){const er=Array.isArray(Xn)?Xn:void 0,tr=(Qn=Qn||(er?void 0:Xn))?Qn.allKeys:void 0;return this._trans("readwrite",nr=>{const{auto:rr,keyPath:sr}=this.schema.primKey;if(sr&&er)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(er&&er.length!==Jn.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const ir=Jn.length;let or=sr&&rr?Jn.map(xt(sr)):Jn;return this.core.mutate({trans:nr,type:"put",keys:er,values:or,wantResults:tr}).then(({numFailures:ar,results:cr,lastResult:lr,failures:hr})=>{if(ar===0)return tr?cr:lr;throw new G(`${this.name}.bulkPut(): ${ar} of ${ir} operations failed`,hr)})})}bulkDelete(Jn){const Xn=Jn.length;return this._trans("readwrite",Qn=>this.core.mutate({trans:Qn,type:"delete",keys:Jn})).then(({numFailures:Qn,lastResult:er,failures:tr})=>{if(Qn===0)return er;throw new G(`${this.name}.bulkDelete(): ${Qn} of ${Xn} operations failed`,tr)})}}function Et(Zn){var Jn={},Xn=function(rr,sr){if(sr){for(var ir=arguments.length,or=new Array(ir-1);--ir;)or[ir-1]=arguments[ir];return Jn[rr].subscribe.apply(null,or),Zn}if(typeof rr=="string")return Jn[rr]};Xn.addEventType=tr;for(var Qn=1,er=arguments.length;Qn<er;++Qn)tr(arguments[Qn]);return Xn;function tr(rr,sr,ir){if(typeof rr=="object")return nr(rr);sr||(sr=ae),ir||(ir=ee);var or={subscribers:[],fire:ir,subscribe:function(ar){or.subscribers.indexOf(ar)===-1&&(or.subscribers.push(ar),or.fire=sr(or.fire,ar))},unsubscribe:function(ar){or.subscribers=or.subscribers.filter(function(cr){return cr!==ar}),or.fire=or.subscribers.reduce(sr,ir)}};return Jn[rr]=Xn[rr]=or,or}function nr(rr){t(rr).forEach(function(sr){var ir=rr[sr];if(n(ir))tr(sr,rr[sr][0],rr[sr][1]);else{if(ir!=="asap")throw new X.InvalidArgument("Invalid event config");var or=tr(sr,te,function(){for(var ar=arguments.length,cr=new Array(ar);ar--;)cr[ar]=arguments[ar];or.subscribers.forEach(function(lr){v(function(){lr.apply(null,cr)})})})}})}}function Pt(Zn,Jn){return c(Jn).from({prototype:Zn}),Jn}function Kt(Zn,Jn){return!(Zn.filter||Zn.algorithm||Zn.or)&&(Jn?Zn.justLimit:!Zn.replayFilter)}function Ot(Zn,Jn){Zn.filter=_t(Zn.filter,Jn)}function St(Zn,Jn,Xn){var Qn=Zn.replayFilter;Zn.replayFilter=Qn?()=>_t(Qn(),Jn()):Jn,Zn.justLimit=Xn&&!Qn}function At(Zn,Jn){if(Zn.isPrimKey)return Jn.primaryKey;const Xn=Jn.getIndexByKeyPath(Zn.index);if(!Xn)throw new X.Schema("KeyPath "+Zn.index+" on object store "+Jn.name+" is not indexed");return Xn}function Ct(Zn,Jn,Xn){const Qn=At(Zn,Jn.schema);return Jn.openCursor({trans:Xn,values:!Zn.keysOnly,reverse:Zn.dir==="prev",unique:!!Zn.unique,query:{index:Qn,range:Zn.range}})}function jt(Zn,Jn,Xn,Qn){const er=Zn.replayFilter?_t(Zn.filter,Zn.replayFilter()):Zn.filter;if(Zn.or){const tr={},nr=(rr,sr,ir)=>{if(!er||er(sr,ir,cr=>sr.stop(cr),cr=>sr.fail(cr))){var or=sr.primaryKey,ar=""+or;ar==="[object ArrayBuffer]"&&(ar=""+new Uint8Array(or)),o(tr,ar)||(tr[ar]=!0,Jn(rr,sr,ir))}};return Promise.all([Zn.or._iterate(nr,Xn),Dt(Ct(Zn,Qn,Xn),Zn.algorithm,nr,!Zn.keysOnly&&Zn.valueMapper)])}return Dt(Ct(Zn,Qn,Xn),_t(Zn.algorithm,er),Jn,!Zn.keysOnly&&Zn.valueMapper)}function Dt(Zn,Jn,Xn,Qn){var er=We(Qn?(tr,nr,rr)=>Xn(Qn(tr),nr,rr):Xn);return Zn.then(tr=>{if(tr)return tr.start(()=>{var nr=()=>tr.continue();Jn&&!Jn(tr,rr=>nr=rr,rr=>{tr.stop(rr),nr=ee},rr=>{tr.fail(rr),nr=ee})||er(tr.value,tr,rr=>nr=rr),nr()})})}function It(Zn,Jn){try{const Xn=Bt(Zn),Qn=Bt(Jn);if(Xn!==Qn)return Xn==="Array"?1:Qn==="Array"?-1:Xn==="binary"?1:Qn==="binary"?-1:Xn==="string"?1:Qn==="string"?-1:Xn==="Date"?1:Qn!=="Date"?NaN:-1;switch(Xn){case"number":case"Date":case"string":return Zn>Jn?1:Zn<Jn?-1:0;case"binary":return function(er,tr){const nr=er.length,rr=tr.length,sr=nr<rr?nr:rr;for(let ir=0;ir<sr;++ir)if(er[ir]!==tr[ir])return er[ir]<tr[ir]?-1:1;return nr===rr?0:nr<rr?-1:1}(Tt(Zn),Tt(Jn));case"Array":return function(er,tr){const nr=er.length,rr=tr.length,sr=nr<rr?nr:rr;for(let ir=0;ir<sr;++ir){const or=It(er[ir],tr[ir]);if(or!==0)return or}return nr===rr?0:nr<rr?-1:1}(Zn,Jn)}}catch{}return NaN}function Bt(Zn){const Jn=typeof Zn;if(Jn!=="object")return Jn;if(ArrayBuffer.isView(Zn))return"binary";const Xn=C(Zn);return Xn==="ArrayBuffer"?"binary":Xn}function Tt(Zn){return Zn instanceof Uint8Array?Zn:ArrayBuffer.isView(Zn)?new Uint8Array(Zn.buffer,Zn.byteOffset,Zn.byteLength):new Uint8Array(Zn)}class Rt{_read(Jn,Xn){var Qn=this._ctx;return Qn.error?Qn.table._trans(null,ht.bind(null,Qn.error)):Qn.table._trans("readonly",Jn).then(Xn)}_write(Jn){var Xn=this._ctx;return Xn.error?Xn.table._trans(null,ht.bind(null,Xn.error)):Xn.table._trans("readwrite",Jn,"locked")}_addAlgorithm(Jn){var Xn=this._ctx;Xn.algorithm=_t(Xn.algorithm,Jn)}_iterate(Jn,Xn){return jt(this._ctx,Jn,Xn,this._ctx.table.core)}clone(Jn){var Xn=Object.create(this.constructor.prototype),Qn=Object.create(this._ctx);return Jn&&r(Qn,Jn),Xn._ctx=Qn,Xn}raw(){return this._ctx.valueMapper=null,this}each(Jn){var Xn=this._ctx;return this._read(Qn=>jt(Xn,Jn,Qn,Xn.table.core))}count(Jn){return this._read(Xn=>{const Qn=this._ctx,er=Qn.table.core;if(Kt(Qn,!0))return er.count({trans:Xn,query:{index:At(Qn,er.schema),range:Qn.range}}).then(nr=>Math.min(nr,Qn.limit));var tr=0;return jt(Qn,()=>(++tr,!1),Xn,er).then(()=>tr)}).then(Jn)}sortBy(Jn,Xn){const Qn=Jn.split(".").reverse(),er=Qn[0],tr=Qn.length-1;function nr(ir,or){return or?nr(ir[Qn[or]],or-1):ir[er]}var rr=this._ctx.dir==="next"?1:-1;function sr(ir,or){var ar=nr(ir,tr),cr=nr(or,tr);return ar<cr?-rr:ar>cr?rr:0}return this.toArray(function(ir){return ir.sort(sr)}).then(Xn)}toArray(Jn){return this._read(Xn=>{var Qn=this._ctx;if(Qn.dir==="next"&&Kt(Qn,!0)&&Qn.limit>0){const{valueMapper:er}=Qn,tr=At(Qn,Qn.table.core.schema);return Qn.table.core.query({trans:Xn,limit:Qn.limit,values:!0,query:{index:tr,range:Qn.range}}).then(({result:nr})=>er?nr.map(er):nr)}{const er=[];return jt(Qn,tr=>er.push(tr),Xn,Qn.table.core).then(()=>er)}},Jn)}offset(Jn){var Xn=this._ctx;return Jn<=0||(Xn.offset+=Jn,Kt(Xn)?St(Xn,()=>{var Qn=Jn;return(er,tr)=>Qn===0||(Qn===1?(--Qn,!1):(tr(()=>{er.advance(Qn),Qn=0}),!1))}):St(Xn,()=>{var Qn=Jn;return()=>--Qn<0})),this}limit(Jn){return this._ctx.limit=Math.min(this._ctx.limit,Jn),St(this._ctx,()=>{var Xn=Jn;return function(Qn,er,tr){return--Xn<=0&&er(tr),Xn>=0}},!0),this}until(Jn,Xn){return Ot(this._ctx,function(Qn,er,tr){return!Jn(Qn.value)||(er(tr),Xn)}),this}first(Jn){return this.limit(1).toArray(function(Xn){return Xn[0]}).then(Jn)}last(Jn){return this.reverse().first(Jn)}filter(Jn){var Xn,Qn;return Ot(this._ctx,function(er){return Jn(er.value)}),Xn=this._ctx,Qn=Jn,Xn.isMatch=_t(Xn.isMatch,Qn),this}and(Jn){return this.filter(Jn)}or(Jn){return new this.db.WhereClause(this._ctx.table,Jn,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(Jn){var Xn=this._ctx;return Xn.keysOnly=!Xn.isMatch,this.each(function(Qn,er){Jn(er.key,er)})}eachUniqueKey(Jn){return this._ctx.unique="unique",this.eachKey(Jn)}eachPrimaryKey(Jn){var Xn=this._ctx;return Xn.keysOnly=!Xn.isMatch,this.each(function(Qn,er){Jn(er.primaryKey,er)})}keys(Jn){var Xn=this._ctx;Xn.keysOnly=!Xn.isMatch;var Qn=[];return this.each(function(er,tr){Qn.push(tr.key)}).then(function(){return Qn}).then(Jn)}primaryKeys(Jn){var Xn=this._ctx;if(Xn.dir==="next"&&Kt(Xn,!0)&&Xn.limit>0)return this._read(er=>{var tr=At(Xn,Xn.table.core.schema);return Xn.table.core.query({trans:er,values:!1,limit:Xn.limit,query:{index:tr,range:Xn.range}})}).then(({result:er})=>er).then(Jn);Xn.keysOnly=!Xn.isMatch;var Qn=[];return this.each(function(er,tr){Qn.push(tr.primaryKey)}).then(function(){return Qn}).then(Jn)}uniqueKeys(Jn){return this._ctx.unique="unique",this.keys(Jn)}firstKey(Jn){return this.limit(1).keys(function(Xn){return Xn[0]}).then(Jn)}lastKey(Jn){return this.reverse().firstKey(Jn)}distinct(){var Jn=this._ctx,Xn=Jn.index&&Jn.table.schema.idxByName[Jn.index];if(!Xn||!Xn.multi)return this;var Qn={};return Ot(this._ctx,function(er){var tr=er.primaryKey.toString(),nr=o(Qn,tr);return Qn[tr]=!0,!nr}),this}modify(Jn){var Xn=this._ctx;return this._write(Qn=>{var er;if(typeof Jn=="function")er=Jn;else{var tr=t(Jn),nr=tr.length;er=function(fr){for(var gr=!1,ur=0;ur<nr;++ur){var dr=tr[ur],yr=Jn[dr];b(fr,dr)!==yr&&(_(fr,dr,yr),gr=!0)}return gr}}const rr=Xn.table.core,{outbound:sr,extractKey:ir}=rr.schema.primaryKey,or=this.db._options.modifyChunkSize||200,ar=[];let cr=0;const lr=[],hr=(fr,gr)=>{const{failures:ur,numFailures:dr}=gr;cr+=fr-dr;for(let yr of t(ur))ar.push(ur[yr])};return this.clone().primaryKeys().then(fr=>{const gr=ur=>{const dr=Math.min(or,fr.length-ur);return rr.getMany({trans:Qn,keys:fr.slice(ur,ur+dr),cache:"immutable"}).then(yr=>{const vr=[],_r=[],kr=sr?[]:null,Cr=[];for(let xr=0;xr<dr;++xr){const $r=yr[xr],Mr={value:O($r),primKey:fr[ur+xr]};er.call(Mr,Mr.value,Mr)!==!1&&(Mr.value==null?Cr.push(fr[ur+xr]):sr||It(ir($r),ir(Mr.value))===0?(_r.push(Mr.value),sr&&kr.push(fr[ur+xr])):(Cr.push(fr[ur+xr]),vr.push(Mr.value)))}const br=Kt(Xn)&&Xn.limit===1/0&&(typeof Jn!="function"||Jn===Ft)&&{index:Xn.index,range:Xn.range};return Promise.resolve(vr.length>0&&rr.mutate({trans:Qn,type:"add",values:vr}).then(xr=>{for(let $r in xr.failures)Cr.splice(parseInt($r),1);hr(vr.length,xr)})).then(()=>(_r.length>0||br&&typeof Jn=="object")&&rr.mutate({trans:Qn,type:"put",keys:kr,values:_r,criteria:br,changeSpec:typeof Jn!="function"&&Jn}).then(xr=>hr(_r.length,xr))).then(()=>(Cr.length>0||br&&Jn===Ft)&&rr.mutate({trans:Qn,type:"delete",keys:Cr,criteria:br}).then(xr=>hr(Cr.length,xr))).then(()=>fr.length>ur+dr&&gr(ur+or))})};return gr(0).then(()=>{if(ar.length>0)throw new z("Error modifying one or more objects",ar,cr,lr);return fr.length})})})}delete(){var Jn=this._ctx,Xn=Jn.range;return Kt(Jn)&&(Jn.isPrimKey&&!gt||Xn.type===3)?this._write(Qn=>{const{primaryKey:er}=Jn.table.core.schema,tr=Xn;return Jn.table.core.count({trans:Qn,query:{index:er,range:tr}}).then(nr=>Jn.table.core.mutate({trans:Qn,type:"deleteRange",range:tr}).then(({failures:rr,lastResult:sr,results:ir,numFailures:or})=>{if(or)throw new z("Could not delete some values",Object.keys(rr).map(ar=>rr[ar]),nr-or);return nr-or}))}):this.modify(Ft)}}const Ft=(Zn,Jn)=>Jn.value=null;function Mt(Zn,Jn){return Zn<Jn?-1:Zn===Jn?0:1}function Nt(Zn,Jn){return Zn>Jn?-1:Zn===Jn?0:1}function qt(Zn,Jn,Xn){var Qn=Zn instanceof Yt?new Zn.Collection(Zn):Zn;return Qn._ctx.error=Xn?new Xn(Jn):new TypeError(Jn),Qn}function $t(Zn){return new Zn.Collection(Zn,()=>Wt("")).limit(0)}function Ut(Zn,Jn,Xn,Qn,er,tr){for(var nr=Math.min(Zn.length,Qn.length),rr=-1,sr=0;sr<nr;++sr){var ir=Jn[sr];if(ir!==Qn[sr])return er(Zn[sr],Xn[sr])<0?Zn.substr(0,sr)+Xn[sr]+Xn.substr(sr+1):er(Zn[sr],Qn[sr])<0?Zn.substr(0,sr)+Qn[sr]+Xn.substr(sr+1):rr>=0?Zn.substr(0,rr)+Jn[rr]+Xn.substr(rr+1):null;er(Zn[sr],ir)<0&&(rr=sr)}return nr<Qn.length&&tr==="next"?Zn+Xn.substr(Zn.length):nr<Zn.length&&tr==="prev"?Zn.substr(0,Xn.length):rr<0?null:Zn.substr(0,rr)+Qn[rr]+Xn.substr(rr+1)}function Lt(Zn,Jn,Xn,Qn){var er,tr,nr,rr,sr,ir,or,ar=Xn.length;if(!Xn.every(fr=>typeof fr=="string"))return qt(Zn,"String expected.");function cr(fr){er=function(ur){return ur==="next"?dr=>dr.toUpperCase():dr=>dr.toLowerCase()}(fr),tr=function(ur){return ur==="next"?dr=>dr.toLowerCase():dr=>dr.toUpperCase()}(fr),nr=fr==="next"?Mt:Nt;var gr=Xn.map(function(ur){return{lower:tr(ur),upper:er(ur)}}).sort(function(ur,dr){return nr(ur.lower,dr.lower)});rr=gr.map(function(ur){return ur.upper}),sr=gr.map(function(ur){return ur.lower}),ir=fr,or=fr==="next"?"":Qn}cr("next");var lr=new Zn.Collection(Zn,()=>Vt(rr[0],sr[ar-1]+Qn));lr._ondirectionchange=function(fr){cr(fr)};var hr=0;return lr._addAlgorithm(function(fr,gr,ur){var dr=fr.key;if(typeof dr!="string")return!1;var yr=tr(dr);if(Jn(yr,sr,hr))return!0;for(var vr=null,_r=hr;_r<ar;++_r){var kr=Ut(dr,yr,rr[_r],sr[_r],nr,ir);kr===null&&vr===null?hr=_r+1:(vr===null||nr(vr,kr)>0)&&(vr=kr)}return gr(vr!==null?function(){fr.continue(vr+or)}:ur),!1}),lr}function Vt(Zn,Jn,Xn,Qn){return{type:2,lower:Zn,upper:Jn,lowerOpen:Xn,upperOpen:Qn}}function Wt(Zn){return{type:1,lower:Zn,upper:Zn}}class Yt{get Collection(){return this._ctx.table.db.Collection}between(Jn,Xn,Qn,er){Qn=Qn!==!1,er=er===!0;try{return this._cmp(Jn,Xn)>0||this._cmp(Jn,Xn)===0&&(Qn||er)&&(!Qn||!er)?$t(this):new this.Collection(this,()=>Vt(Jn,Xn,!Qn,!er))}catch{return qt(this,pt)}}equals(Jn){return Jn==null?qt(this,pt):new this.Collection(this,()=>Wt(Jn))}above(Jn){return Jn==null?qt(this,pt):new this.Collection(this,()=>Vt(Jn,void 0,!0))}aboveOrEqual(Jn){return Jn==null?qt(this,pt):new this.Collection(this,()=>Vt(Jn,void 0,!1))}below(Jn){return Jn==null?qt(this,pt):new this.Collection(this,()=>Vt(void 0,Jn,!1,!0))}belowOrEqual(Jn){return Jn==null?qt(this,pt):new this.Collection(this,()=>Vt(void 0,Jn))}startsWith(Jn){return typeof Jn!="string"?qt(this,"String expected."):this.between(Jn,Jn+ft,!0,!0)}startsWithIgnoreCase(Jn){return Jn===""?this.startsWith(Jn):Lt(this,(Xn,Qn)=>Xn.indexOf(Qn[0])===0,[Jn],ft)}equalsIgnoreCase(Jn){return Lt(this,(Xn,Qn)=>Xn===Qn[0],[Jn],"")}anyOfIgnoreCase(){var Jn=B.apply(I,arguments);return Jn.length===0?$t(this):Lt(this,(Xn,Qn)=>Qn.indexOf(Xn)!==-1,Jn,"")}startsWithAnyOfIgnoreCase(){var Jn=B.apply(I,arguments);return Jn.length===0?$t(this):Lt(this,(Xn,Qn)=>Qn.some(er=>Xn.indexOf(er)===0),Jn,ft)}anyOf(){const Jn=B.apply(I,arguments);let Xn=this._cmp;try{Jn.sort(Xn)}catch{return qt(this,pt)}if(Jn.length===0)return $t(this);const Qn=new this.Collection(this,()=>Vt(Jn[0],Jn[Jn.length-1]));Qn._ondirectionchange=tr=>{Xn=tr==="next"?this._ascending:this._descending,Jn.sort(Xn)};let er=0;return Qn._addAlgorithm((tr,nr,rr)=>{const sr=tr.key;for(;Xn(sr,Jn[er])>0;)if(++er,er===Jn.length)return nr(rr),!1;return Xn(sr,Jn[er])===0||(nr(()=>{tr.continue(Jn[er])}),!1)}),Qn}notEqual(Jn){return this.inAnyRange([[-(1/0),Jn],[Jn,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const Jn=B.apply(I,arguments);if(Jn.length===0)return new this.Collection(this);try{Jn.sort(this._ascending)}catch{return qt(this,pt)}const Xn=Jn.reduce((Qn,er)=>Qn?Qn.concat([[Qn[Qn.length-1][1],er]]):[[-(1/0),er]],null);return Xn.push([Jn[Jn.length-1],this.db._maxKey]),this.inAnyRange(Xn,{includeLowers:!1,includeUppers:!1})}inAnyRange(Jn,Xn){const Qn=this._cmp,er=this._ascending,tr=this._descending,nr=this._min,rr=this._max;if(Jn.length===0)return $t(this);if(!Jn.every(dr=>dr[0]!==void 0&&dr[1]!==void 0&&er(dr[0],dr[1])<=0))return qt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);const sr=!Xn||Xn.includeLowers!==!1,ir=Xn&&Xn.includeUppers===!0;let or,ar=er;function cr(dr,yr){return ar(dr[0],yr[0])}try{or=Jn.reduce(function(dr,yr){let vr=0,_r=dr.length;for(;vr<_r;++vr){const kr=dr[vr];if(Qn(yr[0],kr[1])<0&&Qn(yr[1],kr[0])>0){kr[0]=nr(kr[0],yr[0]),kr[1]=rr(kr[1],yr[1]);break}}return vr===_r&&dr.push(yr),dr},[]),or.sort(cr)}catch{return qt(this,pt)}let lr=0;const hr=ir?dr=>er(dr,or[lr][1])>0:dr=>er(dr,or[lr][1])>=0,fr=sr?dr=>tr(dr,or[lr][0])>0:dr=>tr(dr,or[lr][0])>=0;let gr=hr;const ur=new this.Collection(this,()=>Vt(or[0][0],or[or.length-1][1],!sr,!ir));return ur._ondirectionchange=dr=>{dr==="next"?(gr=hr,ar=er):(gr=fr,ar=tr),or.sort(cr)},ur._addAlgorithm((dr,yr,vr)=>{for(var _r=dr.key;gr(_r);)if(++lr,lr===or.length)return yr(vr),!1;return!!function(kr){return!hr(kr)&&!fr(kr)}(_r)||(this._cmp(_r,or[lr][1])===0||this._cmp(_r,or[lr][0])===0||yr(()=>{ar===er?dr.continue(or[lr][0]):dr.continue(or[lr][1])}),!1)}),ur}startsWithAnyOf(){const Jn=B.apply(I,arguments);return Jn.every(Xn=>typeof Xn=="string")?Jn.length===0?$t(this):this.inAnyRange(Jn.map(Xn=>[Xn,Xn+ft])):qt(this,"startsWithAnyOf() only works with strings")}}function zt(Zn){return We(function(Jn){return Gt(Jn),Zn(Jn.target.error),!1})}function Gt(Zn){Zn.stopPropagation&&Zn.stopPropagation(),Zn.preventDefault&&Zn.preventDefault()}const Ht=Et(null,"storagemutated");class Qt{_lock(){return m(!Ke.global),++this._reculock,this._reculock!==1||Ke.global||(Ke.lockOwnerFor=this),this}_unlock(){if(m(!Ke.global),--this._reculock==0)for(Ke.global||(Ke.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var Jn=this._blockedFuncs.shift();try{ot(Jn[1],Jn[0])}catch{}}return this}_locked(){return this._reculock&&Ke.lockOwnerFor!==this}create(Jn){if(!this.mode)return this;const Xn=this.db.idbdb,Qn=this.db._state.dbOpenError;if(m(!this.idbtrans),!Jn&&!Xn)switch(Qn&&Qn.name){case"DatabaseClosedError":throw new X.DatabaseClosed(Qn);case"MissingAPIError":throw new X.MissingAPI(Qn.message,Qn);default:throw new X.OpenFailed(Qn)}if(!this.active)throw new X.TransactionInactive;return m(this._completion._state===null),(Jn=this.idbtrans=Jn||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):Xn.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=We(er=>{Gt(er),this._reject(Jn.error)}),Jn.onabort=We(er=>{Gt(er),this.active&&this._reject(new X.Abort(Jn.error)),this.active=!1,this.on("abort").fire(er)}),Jn.oncomplete=We(()=>{this.active=!1,this._resolve(),"mutatedParts"in Jn&&Ht.storagemutated.fire(Jn.mutatedParts)}),this}_promise(Jn,Xn,Qn){if(Jn==="readwrite"&&this.mode!=="readwrite")return ht(new X.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new X.TransactionInactive);if(this._locked())return new Ce((tr,nr)=>{this._blockedFuncs.push([()=>{this._promise(Jn,Xn,Qn).then(tr,nr)},Ke])});if(Qn)return Je(()=>{var tr=new Ce((nr,rr)=>{this._lock();const sr=Xn(nr,rr,this);sr&&sr.then&&sr.then(nr,rr)});return tr.finally(()=>this._unlock()),tr._lib=!0,tr});var er=new Ce((tr,nr)=>{var rr=Xn(tr,nr,this);rr&&rr.then&&rr.then(tr,nr)});return er._lib=!0,er}_root(){return this.parent?this.parent._root():this}waitFor(Jn){var Xn=this._root();const Qn=Ce.resolve(Jn);if(Xn._waitingFor)Xn._waitingFor=Xn._waitingFor.then(()=>Qn);else{Xn._waitingFor=Qn,Xn._waitingQueue=[];var er=Xn.idbtrans.objectStore(Xn.storeNames[0]);(function nr(){for(++Xn._spinCount;Xn._waitingQueue.length;)Xn._waitingQueue.shift()();Xn._waitingFor&&(er.get(-1/0).onsuccess=nr)})()}var tr=Xn._waitingFor;return new Ce((nr,rr)=>{Qn.then(sr=>Xn._waitingQueue.push(We(nr.bind(null,sr))),sr=>Xn._waitingQueue.push(We(rr.bind(null,sr)))).finally(()=>{Xn._waitingFor===tr&&(Xn._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(Jn){const Xn=this._memoizedTables||(this._memoizedTables={});if(o(Xn,Jn))return Xn[Jn];const Qn=this.schema[Jn];if(!Qn)throw new X.NotFound("Table "+Jn+" not part of transaction");const er=new this.db.Table(Jn,Qn,this);return er.core=this.db.core.table(Jn),Xn[Jn]=er,er}}function Xt(Zn,Jn,Xn,Qn,er,tr,nr){return{name:Zn,keyPath:Jn,unique:Xn,multi:Qn,auto:er,compound:tr,src:(Xn&&!nr?"&":"")+(Qn?"*":"")+(er?"++":"")+Jt(Jn)}}function Jt(Zn){return typeof Zn=="string"?Zn:Zn?"["+[].join.call(Zn,"+")+"]":""}function Zt(Zn,Jn,Xn){return{name:Zn,primKey:Jn,indexes:Xn,mappedClass:null,idxByName:g(Xn,Qn=>[Qn.name,Qn])}}let en=Zn=>{try{return Zn.only([[]]),en=()=>[[]],[[]]}catch{return en=()=>ft,ft}};function tn(Zn){return Zn==null?()=>{}:typeof Zn=="string"?function(Jn){return Jn.split(".").length===1?Xn=>Xn[Jn]:Xn=>b(Xn,Jn)}(Zn):Jn=>b(Jn,Zn)}function nn(Zn){return[].slice.call(Zn)}let rn=0;function sn(Zn){return Zn==null?":id":typeof Zn=="string"?Zn:`[${Zn.join("+")}]`}function on(Zn,Jn,Xn){function Qn(sr){if(sr.type===3)return null;if(sr.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:ir,upper:or,lowerOpen:ar,upperOpen:cr}=sr;return ir===void 0?or===void 0?null:Jn.upperBound(or,!!cr):or===void 0?Jn.lowerBound(ir,!!ar):Jn.bound(ir,or,!!ar,!!cr)}const{schema:er,hasGetAll:tr}=function(sr,ir){const or=nn(sr.objectStoreNames);return{schema:{name:sr.name,tables:or.map(ar=>ir.objectStore(ar)).map(ar=>{const{keyPath:cr,autoIncrement:lr}=ar,hr=n(cr),fr=cr==null,gr={},ur={name:ar.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:fr,compound:hr,keyPath:cr,autoIncrement:lr,unique:!0,extractKey:tn(cr)},indexes:nn(ar.indexNames).map(dr=>ar.index(dr)).map(dr=>{const{name:yr,unique:vr,multiEntry:_r,keyPath:kr}=dr,Cr={name:yr,compound:n(kr),keyPath:kr,unique:vr,multiEntry:_r,extractKey:tn(kr)};return gr[sn(kr)]=Cr,Cr}),getIndexByKeyPath:dr=>gr[sn(dr)]};return gr[":id"]=ur.primaryKey,cr!=null&&(gr[sn(cr)]=ur.primaryKey),ur})},hasGetAll:or.length>0&&"getAll"in ir.objectStore(or[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(Zn,Xn),nr=er.tables.map(sr=>function(ir){const or=ir.name;return{name:or,schema:ir,mutate:function({trans:ar,type:cr,keys:lr,values:hr,range:fr}){return new Promise((gr,ur)=>{gr=We(gr);const dr=ar.objectStore(or),yr=dr.keyPath==null,vr=cr==="put"||cr==="add";if(!vr&&cr!=="delete"&&cr!=="deleteRange")throw new Error("Invalid operation type: "+cr);const{length:_r}=lr||hr||{length:1};if(lr&&hr&&lr.length!==hr.length)throw new Error("Given keys array must have same length as given values array.");if(_r===0)return gr({numFailures:0,failures:{},results:[],lastResult:void 0});let kr;const Cr=[],br=[];let xr=0;const $r=Ar=>{++xr,Gt(Ar)};if(cr==="deleteRange"){if(fr.type===4)return gr({numFailures:xr,failures:br,results:[],lastResult:void 0});fr.type===3?Cr.push(kr=dr.clear()):Cr.push(kr=dr.delete(Qn(fr)))}else{const[Ar,Rr]=vr?yr?[hr,lr]:[hr,null]:[lr,null];if(vr)for(let mr=0;mr<_r;++mr)Cr.push(kr=Rr&&Rr[mr]!==void 0?dr[cr](Ar[mr],Rr[mr]):dr[cr](Ar[mr])),kr.onerror=$r;else for(let mr=0;mr<_r;++mr)Cr.push(kr=dr[cr](Ar[mr])),kr.onerror=$r}const Mr=Ar=>{const Rr=Ar.target.result;Cr.forEach((mr,Fr)=>mr.error!=null&&(br[Fr]=mr.error)),gr({numFailures:xr,failures:br,results:cr==="delete"?lr:Cr.map(mr=>mr.result),lastResult:Rr})};kr.onerror=Ar=>{$r(Ar),Mr(Ar)},kr.onsuccess=Mr})},getMany:({trans:ar,keys:cr})=>new Promise((lr,hr)=>{lr=We(lr);const fr=ar.objectStore(or),gr=cr.length,ur=new Array(gr);let dr,yr=0,vr=0;const _r=Cr=>{const br=Cr.target;ur[br._pos]=br.result,++vr===yr&&lr(ur)},kr=zt(hr);for(let Cr=0;Cr<gr;++Cr)cr[Cr]!=null&&(dr=fr.get(cr[Cr]),dr._pos=Cr,dr.onsuccess=_r,dr.onerror=kr,++yr);yr===0&&lr(ur)}),get:({trans:ar,key:cr})=>new Promise((lr,hr)=>{lr=We(lr);const fr=ar.objectStore(or).get(cr);fr.onsuccess=gr=>lr(gr.target.result),fr.onerror=zt(hr)}),query:function(ar){return cr=>new Promise((lr,hr)=>{lr=We(lr);const{trans:fr,values:gr,limit:ur,query:dr}=cr,yr=ur===1/0?void 0:ur,{index:vr,range:_r}=dr,kr=fr.objectStore(or),Cr=vr.isPrimaryKey?kr:kr.index(vr.name),br=Qn(_r);if(ur===0)return lr({result:[]});if(ar){const xr=gr?Cr.getAll(br,yr):Cr.getAllKeys(br,yr);xr.onsuccess=$r=>lr({result:$r.target.result}),xr.onerror=zt(hr)}else{let xr=0;const $r=gr||!("openKeyCursor"in Cr)?Cr.openCursor(br):Cr.openKeyCursor(br),Mr=[];$r.onsuccess=Ar=>{const Rr=$r.result;return Rr?(Mr.push(gr?Rr.value:Rr.primaryKey),++xr===ur?lr({result:Mr}):void Rr.continue()):lr({result:Mr})},$r.onerror=zt(hr)}})}(tr),openCursor:function({trans:ar,values:cr,query:lr,reverse:hr,unique:fr}){return new Promise((gr,ur)=>{gr=We(gr);const{index:dr,range:yr}=lr,vr=ar.objectStore(or),_r=dr.isPrimaryKey?vr:vr.index(dr.name),kr=hr?fr?"prevunique":"prev":fr?"nextunique":"next",Cr=cr||!("openKeyCursor"in _r)?_r.openCursor(Qn(yr),kr):_r.openKeyCursor(Qn(yr),kr);Cr.onerror=zt(ur),Cr.onsuccess=We(br=>{const xr=Cr.result;if(!xr)return void gr(null);xr.___id=++rn,xr.done=!1;const $r=xr.continue.bind(xr);let Mr=xr.continuePrimaryKey;Mr&&(Mr=Mr.bind(xr));const Ar=xr.advance.bind(xr),Rr=()=>{throw new Error("Cursor not stopped")};xr.trans=ar,xr.stop=xr.continue=xr.continuePrimaryKey=xr.advance=()=>{throw new Error("Cursor not started")},xr.fail=We(ur),xr.next=function(){let mr=1;return this.start(()=>mr--?this.continue():this.stop()).then(()=>this)},xr.start=mr=>{const Fr=new Promise((jr,es)=>{jr=We(jr),Cr.onerror=zt(es),xr.fail=es,xr.stop=Xr=>{xr.stop=xr.continue=xr.continuePrimaryKey=xr.advance=Rr,jr(Xr)}}),qr=()=>{if(Cr.result)try{mr()}catch(jr){xr.fail(jr)}else xr.done=!0,xr.start=()=>{throw new Error("Cursor behind last entry")},xr.stop()};return Cr.onsuccess=We(jr=>{Cr.onsuccess=qr,qr()}),xr.continue=$r,xr.continuePrimaryKey=Mr,xr.advance=Ar,qr(),Fr},gr(xr)},ur)})},count({query:ar,trans:cr}){const{index:lr,range:hr}=ar;return new Promise((fr,gr)=>{const ur=cr.objectStore(or),dr=lr.isPrimaryKey?ur:ur.index(lr.name),yr=Qn(hr),vr=yr?dr.count(yr):dr.count();vr.onsuccess=We(_r=>fr(_r.target.result)),vr.onerror=zt(gr)})}}}(sr)),rr={};return nr.forEach(sr=>rr[sr.name]=sr),{stack:"dbcore",transaction:Zn.transaction.bind(Zn),table(sr){if(!rr[sr])throw new Error(`Table '${sr}' not found`);return rr[sr]},MIN_KEY:-1/0,MAX_KEY:en(Jn),schema:er}}function an({_novip:Zn},Jn){const Xn=Jn.db,Qn=function(er,tr,{IDBKeyRange:nr,indexedDB:rr},sr){return{dbcore:function(or,ar){return ar.reduce((cr,{create:lr})=>({...cr,...lr(cr)}),or)}(on(tr,nr,sr),er.dbcore)}}(Zn._middlewares,Xn,Zn._deps,Jn);Zn.core=Qn.dbcore,Zn.tables.forEach(er=>{const tr=er.name;Zn.core.schema.tables.some(nr=>nr.name===tr)&&(er.core=Zn.core.table(tr),Zn[tr]instanceof Zn.Table&&(Zn[tr].core=er.core))})}function un({_novip:Zn},Jn,Xn,Qn){Xn.forEach(er=>{const tr=Qn[er];Jn.forEach(nr=>{const rr=d(nr,er);(!rr||"value"in rr&&rr.value===void 0)&&(nr===Zn.Transaction.prototype||nr instanceof Zn.Transaction?l(nr,er,{get(){return this.table(er)},set(sr){u(this,er,{value:sr,writable:!0,configurable:!0,enumerable:!0})}}):nr[er]=new Zn.Table(er,tr))})})}function ln({_novip:Zn},Jn){Jn.forEach(Xn=>{for(let Qn in Xn)Xn[Qn]instanceof Zn.Table&&delete Xn[Qn]})}function cn(Zn,Jn){return Zn._cfg.version-Jn._cfg.version}function hn(Zn,Jn,Xn,Qn){const er=Zn._dbSchema,tr=Zn._createTransaction("readwrite",Zn._storeNames,er);tr.create(Xn),tr._completion.catch(Qn);const nr=tr._reject.bind(tr),rr=Ke.transless||Ke;Je(()=>{Ke.trans=tr,Ke.transless=rr,Jn===0?(t(er).forEach(sr=>{fn(Xn,sr,er[sr].primKey,er[sr].indexes)}),an(Zn,Xn),Ce.follow(()=>Zn.on.populate.fire(tr)).catch(nr)):function({_novip:sr},ir,or,ar){const cr=[],lr=sr._versions;let hr=sr._dbSchema=yn(sr,sr.idbdb,ar),fr=!1;function gr(){return cr.length?Ce.resolve(cr.shift()(or.idbtrans)).then(gr):Ce.resolve()}return lr.filter(ur=>ur._cfg.version>=ir).forEach(ur=>{cr.push(()=>{const dr=hr,yr=ur._cfg.dbschema;mn(sr,dr,ar),mn(sr,yr,ar),hr=sr._dbSchema=yr;const vr=dn(dr,yr);vr.add.forEach(kr=>{fn(ar,kr[0],kr[1].primKey,kr[1].indexes)}),vr.change.forEach(kr=>{if(kr.recreate)throw new X.Upgrade("Not yet support for changing primary key");{const Cr=ar.objectStore(kr.name);kr.add.forEach(br=>pn(Cr,br)),kr.change.forEach(br=>{Cr.deleteIndex(br.name),pn(Cr,br)}),kr.del.forEach(br=>Cr.deleteIndex(br))}});const _r=ur._cfg.contentUpgrade;if(_r&&ur._cfg.version>ir){an(sr,ar),or._memoizedTables={},fr=!0;let kr=w(yr);vr.del.forEach($r=>{kr[$r]=dr[$r]}),ln(sr,[sr.Transaction.prototype]),un(sr,[sr.Transaction.prototype],t(kr),kr),or.schema=kr;const Cr=T(_r);let br;Cr&&Ze();const xr=Ce.follow(()=>{if(br=_r(or),br&&Cr){var $r=et.bind(null,null);br.then($r,$r)}});return br&&typeof br.then=="function"?Ce.resolve(br):xr.then(()=>br)}}),cr.push(dr=>{(!fr||!vt)&&function(yr,vr){[].slice.call(vr.db.objectStoreNames).forEach(_r=>yr[_r]==null&&vr.db.deleteObjectStore(_r))}(ur._cfg.dbschema,dr),ln(sr,[sr.Transaction.prototype]),un(sr,[sr.Transaction.prototype],sr._storeNames,sr._dbSchema),or.schema=sr._dbSchema})}),gr().then(()=>{var ur,dr;dr=ar,t(ur=hr).forEach(yr=>{dr.db.objectStoreNames.contains(yr)||fn(dr,yr,ur[yr].primKey,ur[yr].indexes)})})}(Zn,Jn,tr,Xn).catch(nr)})}function dn(Zn,Jn){const Xn={del:[],add:[],change:[]};let Qn;for(Qn in Zn)Jn[Qn]||Xn.del.push(Qn);for(Qn in Jn){const er=Zn[Qn],tr=Jn[Qn];if(er){const nr={name:Qn,def:tr,recreate:!1,del:[],add:[],change:[]};if(""+(er.primKey.keyPath||"")!=""+(tr.primKey.keyPath||"")||er.primKey.auto!==tr.primKey.auto&&!mt)nr.recreate=!0,Xn.change.push(nr);else{const rr=er.idxByName,sr=tr.idxByName;let ir;for(ir in rr)sr[ir]||nr.del.push(ir);for(ir in sr){const or=rr[ir],ar=sr[ir];or?or.src!==ar.src&&nr.change.push(ar):nr.add.push(ar)}(nr.del.length>0||nr.add.length>0||nr.change.length>0)&&Xn.change.push(nr)}}else Xn.add.push([Qn,tr])}return Xn}function fn(Zn,Jn,Xn,Qn){const er=Zn.db.createObjectStore(Jn,Xn.keyPath?{keyPath:Xn.keyPath,autoIncrement:Xn.auto}:{autoIncrement:Xn.auto});return Qn.forEach(tr=>pn(er,tr)),er}function pn(Zn,Jn){Zn.createIndex(Jn.name,Jn.keyPath,{unique:Jn.unique,multiEntry:Jn.multi})}function yn(Zn,Jn,Xn){const Qn={};return p(Jn.objectStoreNames,0).forEach(er=>{const tr=Xn.objectStore(er);let nr=tr.keyPath;const rr=Xt(Jt(nr),nr||"",!1,!1,!!tr.autoIncrement,nr&&typeof nr!="string",!0),sr=[];for(let or=0;or<tr.indexNames.length;++or){const ar=tr.index(tr.indexNames[or]);nr=ar.keyPath;var ir=Xt(ar.name,nr,!!ar.unique,!!ar.multiEntry,!1,nr&&typeof nr!="string",!1);sr.push(ir)}Qn[er]=Zt(er,rr,sr)}),Qn}function mn({_novip:Zn},Jn,Xn){const Qn=Xn.db.objectStoreNames;for(let er=0;er<Qn.length;++er){const tr=Qn[er],nr=Xn.objectStore(tr);Zn._hasGetAll="getAll"in nr;for(let rr=0;rr<nr.indexNames.length;++rr){const sr=nr.indexNames[rr],ir=nr.index(sr).keyPath,or=typeof ir=="string"?ir:"["+p(ir).join("+")+"]";if(Jn[tr]){const ar=Jn[tr].idxByName[or];ar&&(ar.name=sr,delete Jn[tr].idxByName[or],Jn[tr].idxByName[sr]=ar)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(Zn._hasGetAll=!1)}class vn{_parseStoresSpec(Jn,Xn){t(Jn).forEach(Qn=>{if(Jn[Qn]!==null){var er=Jn[Qn].split(",").map((nr,rr)=>{const sr=(nr=nr.trim()).replace(/([&*]|\+\+)/g,""),ir=/^\[/.test(sr)?sr.match(/^\[(.*)\]$/)[1].split("+"):sr;return Xt(sr,ir||null,/\&/.test(nr),/\*/.test(nr),/\+\+/.test(nr),n(ir),rr===0)}),tr=er.shift();if(tr.multi)throw new X.Schema("Primary key cannot be multi-valued");er.forEach(nr=>{if(nr.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!nr.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),Xn[Qn]=Zt(Qn,tr,er)}})}stores(Jn){const Xn=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,Jn):Jn;const Qn=Xn._versions,er={};let tr={};return Qn.forEach(nr=>{r(er,nr._cfg.storesSource),tr=nr._cfg.dbschema={},nr._parseStoresSpec(er,tr)}),Xn._dbSchema=tr,ln(Xn,[Xn._allTables,Xn,Xn.Transaction.prototype]),un(Xn,[Xn._allTables,Xn,Xn.Transaction.prototype,this._cfg.tables],t(tr),tr),Xn._storeNames=t(tr),this}upgrade(Jn){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,Jn),this}}function gn(Zn,Jn){let Xn=Zn._dbNamesDB;return Xn||(Xn=Zn._dbNamesDB=new $n("__dbnames",{addons:[],indexedDB:Zn,IDBKeyRange:Jn}),Xn.version(1).stores({dbnames:"name"})),Xn.table("dbnames")}function bn(Zn){return Zn&&typeof Zn.databases=="function"}function _n(Zn){return Je(function(){return Ke.letThrough=!0,Zn()})}function wn(){var Zn;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Jn){var Xn=function(){return indexedDB.databases().finally(Jn)};Zn=setInterval(Xn,100),Xn()}).finally(function(){return clearInterval(Zn)}):Promise.resolve()}function xn(Zn){const Jn=Zn._state,{indexedDB:Xn}=Zn._deps;if(Jn.isBeingOpened||Zn.idbdb)return Jn.dbReadyPromise.then(()=>Jn.dbOpenError?ht(Jn.dbOpenError):Zn);R&&(Jn.openCanceller._stackHolder=q()),Jn.isBeingOpened=!0,Jn.dbOpenError=null,Jn.openComplete=!1;const Qn=Jn.openCanceller;function er(){if(Jn.openCanceller!==Qn)throw new X.DatabaseClosed("db.open() was cancelled")}let tr=Jn.dbReadyResolve,nr=null,rr=!1;return Ce.race([Qn,(typeof navigator>"u"?Ce.resolve():wn()).then(()=>new Ce((sr,ir)=>{if(er(),!Xn)throw new X.MissingAPI;const or=Zn.name,ar=Jn.autoSchema?Xn.open(or):Xn.open(or,Math.round(10*Zn.verno));if(!ar)throw new X.MissingAPI;ar.onerror=zt(ir),ar.onblocked=We(Zn._fireOnBlocked),ar.onupgradeneeded=We(cr=>{if(nr=ar.transaction,Jn.autoSchema&&!Zn._options.allowEmptyDB){ar.onerror=Gt,nr.abort(),ar.result.close();const hr=Xn.deleteDatabase(or);hr.onsuccess=hr.onerror=We(()=>{ir(new X.NoSuchDatabase(`Database ${or} doesnt exist`))})}else{nr.onerror=zt(ir);var lr=cr.oldVersion>Math.pow(2,62)?0:cr.oldVersion;rr=lr<1,Zn._novip.idbdb=ar.result,hn(Zn,lr/10,nr,ir)}},ir),ar.onsuccess=We(()=>{nr=null;const cr=Zn._novip.idbdb=ar.result,lr=p(cr.objectStoreNames);if(lr.length>0)try{const fr=cr.transaction((hr=lr).length===1?hr[0]:hr,"readonly");Jn.autoSchema?function({_novip:gr},ur,dr){gr.verno=ur.version/10;const yr=gr._dbSchema=yn(0,ur,dr);gr._storeNames=p(ur.objectStoreNames,0),un(gr,[gr._allTables],t(yr),yr)}(Zn,cr,fr):(mn(Zn,Zn._dbSchema,fr),function(gr,ur){const dr=dn(yn(0,gr.idbdb,ur),gr._dbSchema);return!(dr.add.length||dr.change.some(yr=>yr.add.length||yr.change.length))}(Zn,fr)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),an(Zn,fr)}catch{}var hr;yt.push(Zn),cr.onversionchange=We(fr=>{Jn.vcFired=!0,Zn.on("versionchange").fire(fr)}),cr.onclose=We(fr=>{Zn.on("close").fire(fr)}),rr&&function({indexedDB:fr,IDBKeyRange:gr},ur){!bn(fr)&&ur!=="__dbnames"&&gn(fr,gr).put({name:ur}).catch(ee)}(Zn._deps,or),sr()},ir)}))]).then(()=>(er(),Jn.onReadyBeingFired=[],Ce.resolve(_n(()=>Zn.on.ready.fire(Zn.vip))).then(function sr(){if(Jn.onReadyBeingFired.length>0){let ir=Jn.onReadyBeingFired.reduce(ue,ee);return Jn.onReadyBeingFired=[],Ce.resolve(_n(()=>ir(Zn.vip))).then(sr)}}))).finally(()=>{Jn.onReadyBeingFired=null,Jn.isBeingOpened=!1}).then(()=>Zn).catch(sr=>{Jn.dbOpenError=sr;try{nr&&nr.abort()}catch{}return Qn===Jn.openCanceller&&Zn._close(),ht(sr)}).finally(()=>{Jn.openComplete=!0,tr()})}function kn(Zn){var Jn=tr=>Zn.next(tr),Xn=er(Jn),Qn=er(tr=>Zn.throw(tr));function er(tr){return nr=>{var rr=tr(nr),sr=rr.value;return rr.done?sr:sr&&typeof sr.then=="function"?sr.then(Xn,Qn):n(sr)?Promise.all(sr).then(Xn,Qn):Xn(sr)}}return er(Jn)()}function En(Zn,Jn,Xn){var Qn=arguments.length;if(Qn<2)throw new X.InvalidArgument("Too few arguments");for(var er=new Array(Qn-1);--Qn;)er[Qn-1]=arguments[Qn];Xn=er.pop();var tr=k(er);return[Zn,tr,Xn]}function Pn(Zn,Jn,Xn,Qn,er){return Ce.resolve().then(()=>{const tr=Ke.transless||Ke,nr=Zn._createTransaction(Jn,Xn,Zn._dbSchema,Qn),rr={trans:nr,transless:tr};if(Qn)nr.idbtrans=Qn.idbtrans;else try{nr.create(),Zn._state.PR1398_maxLoop=3}catch(ar){return ar.name===H.InvalidState&&Zn.isOpen()&&--Zn._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),Zn._close(),Zn.open().then(()=>Pn(Zn,Jn,Xn,null,er))):ht(ar)}const sr=T(er);let ir;sr&&Ze();const or=Ce.follow(()=>{if(ir=er.call(nr,nr),ir)if(sr){var ar=et.bind(null,null);ir.then(ar,ar)}else typeof ir.next=="function"&&typeof ir.throw=="function"&&(ir=kn(ir))},rr);return(ir&&typeof ir.then=="function"?Ce.resolve(ir).then(ar=>nr.active?ar:ht(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):or.then(()=>ir)).then(ar=>(Qn&&nr._resolve(),nr._completion.then(()=>ar))).catch(ar=>(nr._reject(ar),ht(ar)))})}function Kn(Zn,Jn,Xn){const Qn=n(Zn)?Zn.slice():[Zn];for(let er=0;er<Xn;++er)Qn.push(Jn);return Qn}const On={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(Zn){return{...Zn,table(Jn){const Xn=Zn.table(Jn),{schema:Qn}=Xn,er={},tr=[];function nr(or,ar,cr){const lr=sn(or),hr=er[lr]=er[lr]||[],fr=or==null?0:typeof or=="string"?1:or.length,gr=ar>0,ur={...cr,isVirtual:gr,keyTail:ar,keyLength:fr,extractKey:tn(or),unique:!gr&&cr.unique};return hr.push(ur),ur.isPrimaryKey||tr.push(ur),fr>1&&nr(fr===2?or[0]:or.slice(0,fr-1),ar+1,cr),hr.sort((dr,yr)=>dr.keyTail-yr.keyTail),ur}const rr=nr(Qn.primaryKey.keyPath,0,Qn.primaryKey);er[":id"]=[rr];for(const or of Qn.indexes)nr(or.keyPath,0,or);function sr(or){const ar=or.query.index;return ar.isVirtual?{...or,query:{index:ar,range:(cr=or.query.range,lr=ar.keyTail,{type:cr.type===1?2:cr.type,lower:Kn(cr.lower,cr.lowerOpen?Zn.MAX_KEY:Zn.MIN_KEY,lr),lowerOpen:!0,upper:Kn(cr.upper,cr.upperOpen?Zn.MIN_KEY:Zn.MAX_KEY,lr),upperOpen:!0})}}:or;var cr,lr}return{...Xn,schema:{...Qn,primaryKey:rr,indexes:tr,getIndexByKeyPath:function(or){const ar=er[sn(or)];return ar&&ar[0]}},count:or=>Xn.count(sr(or)),query:or=>Xn.query(sr(or)),openCursor(or){const{keyTail:ar,isVirtual:cr,keyLength:lr}=or.query.index;return cr?Xn.openCursor(sr(or)).then(hr=>hr&&function(fr){return Object.create(fr,{continue:{value:function(ur){ur!=null?fr.continue(Kn(ur,or.reverse?Zn.MAX_KEY:Zn.MIN_KEY,ar)):or.unique?fr.continue(fr.key.slice(0,lr).concat(or.reverse?Zn.MIN_KEY:Zn.MAX_KEY,ar)):fr.continue()}},continuePrimaryKey:{value(ur,dr){fr.continuePrimaryKey(Kn(ur,Zn.MAX_KEY,ar),dr)}},primaryKey:{get:()=>fr.primaryKey},key:{get(){const ur=fr.key;return lr===1?ur[0]:ur.slice(0,lr)}},value:{get:()=>fr.value}})}(hr)):Xn.openCursor(or)}}}}}};function Sn(Zn,Jn,Xn,Qn){return Xn=Xn||{},Qn=Qn||"",t(Zn).forEach(er=>{if(o(Jn,er)){var tr=Zn[er],nr=Jn[er];if(typeof tr=="object"&&typeof nr=="object"&&tr&&nr){const rr=C(tr);rr!==C(nr)?Xn[Qn+er]=Jn[er]:rr==="Object"?Sn(tr,nr,Xn,Qn+er+"."):tr!==nr&&(Xn[Qn+er]=Jn[er])}else tr!==nr&&(Xn[Qn+er]=Jn[er])}else Xn[Qn+er]=void 0}),t(Jn).forEach(er=>{o(Zn,er)||(Xn[Qn+er]=Jn[er])}),Xn}const An={stack:"dbcore",name:"HooksMiddleware",level:2,create:Zn=>({...Zn,table(Jn){const Xn=Zn.table(Jn),{primaryKey:Qn}=Xn.schema;return{...Xn,mutate(tr){const nr=Ke.trans,{deleting:rr,creating:sr,updating:ir}=nr.table(Jn).hook;switch(tr.type){case"add":if(sr.fire===ee)break;return nr._promise("readwrite",()=>or(tr),!0);case"put":if(sr.fire===ee&&ir.fire===ee)break;return nr._promise("readwrite",()=>or(tr),!0);case"delete":if(rr.fire===ee)break;return nr._promise("readwrite",()=>or(tr),!0);case"deleteRange":if(rr.fire===ee)break;return nr._promise("readwrite",()=>function(cr){return ar(cr.trans,cr.range,1e4)}(tr),!0)}return Xn.mutate(tr);function or(cr){const lr=Ke.trans,hr=cr.keys||function(fr,gr){return gr.type==="delete"?gr.keys:gr.keys||gr.values.map(fr.extractKey)}(Qn,cr);if(!hr)throw new Error("Keys missing");return(cr=cr.type==="add"||cr.type==="put"?{...cr,keys:hr}:{...cr}).type!=="delete"&&(cr.values=[...cr.values]),cr.keys&&(cr.keys=[...cr.keys]),function(fr,gr,ur){return gr.type==="add"?Promise.resolve([]):fr.getMany({trans:gr.trans,keys:ur,cache:"immutable"})}(Xn,cr,hr).then(fr=>{const gr=hr.map((ur,dr)=>{const yr=fr[dr],vr={onerror:null,onsuccess:null};if(cr.type==="delete")rr.fire.call(vr,ur,yr,lr);else if(cr.type==="add"||yr===void 0){const _r=sr.fire.call(vr,ur,cr.values[dr],lr);ur==null&&_r!=null&&(ur=_r,cr.keys[dr]=ur,Qn.outbound||_(cr.values[dr],Qn.keyPath,ur))}else{const _r=Sn(yr,cr.values[dr]),kr=ir.fire.call(vr,_r,ur,yr,lr);if(kr){const Cr=cr.values[dr];Object.keys(kr).forEach(br=>{o(Cr,br)?Cr[br]=kr[br]:_(Cr,br,kr[br])})}}return vr});return Xn.mutate(cr).then(({failures:ur,results:dr,numFailures:yr,lastResult:vr})=>{for(let _r=0;_r<hr.length;++_r){const kr=dr?dr[_r]:hr[_r],Cr=gr[_r];kr==null?Cr.onerror&&Cr.onerror(ur[_r]):Cr.onsuccess&&Cr.onsuccess(cr.type==="put"&&fr[_r]?cr.values[_r]:kr)}return{failures:ur,results:dr,numFailures:yr,lastResult:vr}}).catch(ur=>(gr.forEach(dr=>dr.onerror&&dr.onerror(ur)),Promise.reject(ur)))})}function ar(cr,lr,hr){return Xn.query({trans:cr,values:!1,query:{index:Qn,range:lr},limit:hr}).then(({result:fr})=>or({type:"delete",keys:fr,trans:cr}).then(gr=>gr.numFailures>0?Promise.reject(gr.failures[0]):fr.length<hr?{failures:[],numFailures:0,lastResult:void 0}:ar(cr,{...lr,lower:fr[fr.length-1],lowerOpen:!0},hr)))}}}}})};function Cn(Zn,Jn,Xn){try{if(!Jn||Jn.keys.length<Zn.length)return null;const Qn=[];for(let er=0,tr=0;er<Jn.keys.length&&tr<Zn.length;++er)It(Jn.keys[er],Zn[tr])===0&&(Qn.push(Xn?O(Jn.values[er]):Jn.values[er]),++tr);return Qn.length===Zn.length?Qn:null}catch{return null}}const jn={stack:"dbcore",level:-1,create:Zn=>({table:Jn=>{const Xn=Zn.table(Jn);return{...Xn,getMany:Qn=>{if(!Qn.cache)return Xn.getMany(Qn);const er=Cn(Qn.keys,Qn.trans._cache,Qn.cache==="clone");return er?Ce.resolve(er):Xn.getMany(Qn).then(tr=>(Qn.trans._cache={keys:Qn.keys,values:Qn.cache==="clone"?O(tr):tr},tr))},mutate:Qn=>(Qn.type!=="add"&&(Qn.trans._cache=null),Xn.mutate(Qn))}}})};function Dn(Zn){return!("from"in Zn)}const In=function(Zn,Jn){if(!this){const Xn=new In;return Zn&&"d"in Zn&&r(Xn,Zn),Xn}r(this,arguments.length?{d:1,from:Zn,to:arguments.length>1?Jn:Zn}:{d:0})};function Bn(Zn,Jn,Xn){const Qn=It(Jn,Xn);if(isNaN(Qn))return;if(Qn>0)throw RangeError();if(Dn(Zn))return r(Zn,{from:Jn,to:Xn,d:1});const er=Zn.l,tr=Zn.r;if(It(Xn,Zn.from)<0)return er?Bn(er,Jn,Xn):Zn.l={from:Jn,to:Xn,d:1,l:null,r:null},Mn(Zn);if(It(Jn,Zn.to)>0)return tr?Bn(tr,Jn,Xn):Zn.r={from:Jn,to:Xn,d:1,l:null,r:null},Mn(Zn);It(Jn,Zn.from)<0&&(Zn.from=Jn,Zn.l=null,Zn.d=tr?tr.d+1:1),It(Xn,Zn.to)>0&&(Zn.to=Xn,Zn.r=null,Zn.d=Zn.l?Zn.l.d+1:1);const nr=!Zn.r;er&&!Zn.l&&Tn(Zn,er),tr&&nr&&Tn(Zn,tr)}function Tn(Zn,Jn){Dn(Jn)||function Xn(Qn,{from:er,to:tr,l:nr,r:rr}){Bn(Qn,er,tr),nr&&Xn(Qn,nr),rr&&Xn(Qn,rr)}(Zn,Jn)}function Rn(Zn,Jn){const Xn=Fn(Jn);let Qn=Xn.next();if(Qn.done)return!1;let er=Qn.value;const tr=Fn(Zn);let nr=tr.next(er.from),rr=nr.value;for(;!Qn.done&&!nr.done;){if(It(rr.from,er.to)<=0&&It(rr.to,er.from)>=0)return!0;It(er.from,rr.from)<0?er=(Qn=Xn.next(rr.from)).value:rr=(nr=tr.next(er.from)).value}return!1}function Fn(Zn){let Jn=Dn(Zn)?null:{s:0,n:Zn};return{next(Xn){const Qn=arguments.length>0;for(;Jn;)switch(Jn.s){case 0:if(Jn.s=1,Qn)for(;Jn.n.l&&It(Xn,Jn.n.from)<0;)Jn={up:Jn,n:Jn.n.l,s:1};else for(;Jn.n.l;)Jn={up:Jn,n:Jn.n.l,s:1};case 1:if(Jn.s=2,!Qn||It(Xn,Jn.n.to)<=0)return{value:Jn.n,done:!1};case 2:if(Jn.n.r){Jn.s=3,Jn={up:Jn,n:Jn.n.r,s:0};continue}case 3:Jn=Jn.up}return{done:!0}}}}function Mn(Zn){var Jn,Xn;const Qn=(((Jn=Zn.r)===null||Jn===void 0?void 0:Jn.d)||0)-(((Xn=Zn.l)===null||Xn===void 0?void 0:Xn.d)||0),er=Qn>1?"r":Qn<-1?"l":"";if(er){const tr=er==="r"?"l":"r",nr={...Zn},rr=Zn[er];Zn.from=rr.from,Zn.to=rr.to,Zn[er]=rr[er],nr[er]=rr[tr],Zn[tr]=nr,nr.d=Nn(nr)}Zn.d=Nn(Zn)}function Nn({r:Zn,l:Jn}){return(Zn?Jn?Math.max(Zn.d,Jn.d):Zn.d:Jn?Jn.d:0)+1}a(In.prototype,{add(Zn){return Tn(this,Zn),this},addKey(Zn){return Bn(this,Zn,Zn),this},addKeys(Zn){return Zn.forEach(Jn=>Bn(this,Jn,Jn)),this},[j](){return Fn(this)}});const qn={stack:"dbcore",level:0,create:Zn=>{const Jn=Zn.schema.name,Xn=new In(Zn.MIN_KEY,Zn.MAX_KEY);return{...Zn,table:Qn=>{const er=Zn.table(Qn),{schema:tr}=er,{primaryKey:nr}=tr,{extractKey:rr,outbound:sr}=nr,ir={...er,mutate:cr=>{const lr=cr.trans,hr=lr.mutatedParts||(lr.mutatedParts={}),fr=kr=>{const Cr=`idb://${Jn}/${Qn}/${kr}`;return hr[Cr]||(hr[Cr]=new In)},gr=fr(""),ur=fr(":dels"),{type:dr}=cr;let[yr,vr]=cr.type==="deleteRange"?[cr.range]:cr.type==="delete"?[cr.keys]:cr.values.length<50?[[],cr.values]:[];const _r=cr.trans._cache;return er.mutate(cr).then(kr=>{if(n(yr)){dr!=="delete"&&(yr=kr.results),gr.addKeys(yr);const Cr=Cn(yr,_r);Cr||dr==="add"||ur.addKeys(yr),(Cr||vr)&&function(br,xr,$r,Mr){function Ar(Rr){const mr=br(Rr.name||"");function Fr(jr){return jr!=null?Rr.extractKey(jr):null}const qr=jr=>Rr.multiEntry&&n(jr)?jr.forEach(es=>mr.addKey(es)):mr.addKey(jr);($r||Mr).forEach((jr,es)=>{const Xr=$r&&Fr($r[es]),as=Mr&&Fr(Mr[es]);It(Xr,as)!==0&&(Xr!=null&&qr(Xr),as!=null&&qr(as))})}xr.indexes.forEach(Ar)}(fr,tr,Cr,vr)}else if(yr){const Cr={from:yr.lower,to:yr.upper};ur.add(Cr),gr.add(Cr)}else gr.add(Xn),ur.add(Xn),tr.indexes.forEach(Cr=>fr(Cr.name).add(Xn));return kr})}},or=({query:{index:cr,range:lr}})=>{var hr,fr;return[cr,new In((hr=lr.lower)!==null&&hr!==void 0?hr:Zn.MIN_KEY,(fr=lr.upper)!==null&&fr!==void 0?fr:Zn.MAX_KEY)]},ar={get:cr=>[nr,new In(cr.key)],getMany:cr=>[nr,new In().addKeys(cr.keys)],count:or,query:or,openCursor:or};return t(ar).forEach(cr=>{ir[cr]=function(lr){const{subscr:hr}=Ke;if(hr){const fr=vr=>{const _r=`idb://${Jn}/${Qn}/${vr}`;return hr[_r]||(hr[_r]=new In)},gr=fr(""),ur=fr(":dels"),[dr,yr]=ar[cr](lr);if(fr(dr.name||"").add(yr),!dr.isPrimaryKey){if(cr!=="count"){const vr=cr==="query"&&sr&&lr.values&&er.query({...lr,values:!1});return er[cr].apply(this,arguments).then(_r=>{if(cr==="query"){if(sr&&lr.values)return vr.then(({result:Cr})=>(gr.addKeys(Cr),_r));const kr=lr.values?_r.result.map(rr):_r.result;lr.values?gr.addKeys(kr):ur.addKeys(kr)}else if(cr==="openCursor"){const kr=_r,Cr=lr.values;return kr&&Object.create(kr,{key:{get:()=>(ur.addKey(kr.primaryKey),kr.key)},primaryKey:{get(){const br=kr.primaryKey;return ur.addKey(br),br}},value:{get:()=>(Cr&&gr.addKey(kr.primaryKey),kr.value)}})}return _r})}ur.add(Xn)}}return er[cr].apply(this,arguments)}}),ir}}}};class $n{constructor(Jn,Xn){this._middlewares={},this.verno=0;const Qn=$n.dependencies;this._options=Xn={addons:$n.addons,autoOpen:!0,indexedDB:Qn.indexedDB,IDBKeyRange:Qn.IDBKeyRange,...Xn},this._deps={indexedDB:Xn.indexedDB,IDBKeyRange:Xn.IDBKeyRange};const{addons:er}=Xn;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const tr={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var nr;tr.dbReadyPromise=new Ce(rr=>{tr.dbReadyResolve=rr}),tr.openCanceller=new Ce((rr,sr)=>{tr.cancelOpen=sr}),this._state=tr,this.name=Jn,this.on=Et(this,"populate","blocked","versionchange","close",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,rr=>(sr,ir)=>{$n.vip(()=>{const or=this._state;if(or.openComplete)or.dbOpenError||Ce.resolve().then(sr),ir&&rr(sr);else if(or.onReadyBeingFired)or.onReadyBeingFired.push(sr),ir&&rr(sr);else{rr(sr);const ar=this;ir||rr(function cr(){ar.on.ready.unsubscribe(sr),ar.on.ready.unsubscribe(cr)})}})}),this.Collection=(nr=this,Pt(Rt.prototype,function(rr,sr){this.db=nr;let ir=wt,or=null;if(sr)try{ir=sr()}catch(hr){or=hr}const ar=rr._ctx,cr=ar.table,lr=cr.hook.reading.fire;this._ctx={table:cr,index:ar.index,isPrimKey:!ar.index||cr.schema.primKey.keyPath&&ar.index===cr.schema.primKey.name,range:ir,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:or,or:ar.or,valueMapper:lr!==te?lr:null}})),this.Table=function(rr){return Pt(kt.prototype,function(sr,ir,or){this.db=rr,this._tx=or,this.name=sr,this.schema=ir,this.hook=rr._allTables[sr]?rr._allTables[sr].hook:Et(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie,ee]})})}(this),this.Transaction=function(rr){return Pt(Qt.prototype,function(sr,ir,or,ar,cr){this.db=rr,this.mode=sr,this.storeNames=ir,this.schema=or,this.chromeTransactionDurability=ar,this.idbtrans=null,this.on=Et(this,"complete","error","abort"),this.parent=cr||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ce((lr,hr)=>{this._resolve=lr,this._reject=hr}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},lr=>{var hr=this.active;return this.active=!1,this.on.error.fire(lr),this.parent?this.parent._reject(lr):hr&&this.idbtrans&&this.idbtrans.abort(),ht(lr)})})}(this),this.Version=function(rr){return Pt(vn.prototype,function(sr){this.db=rr,this._cfg={version:sr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(rr){return Pt(Yt.prototype,function(sr,ir,or){this.db=rr,this._ctx={table:sr,index:ir===":id"?null:ir,or};const ar=rr._deps.indexedDB;if(!ar)throw new X.MissingAPI;this._cmp=this._ascending=ar.cmp.bind(ar),this._descending=(cr,lr)=>ar.cmp(lr,cr),this._max=(cr,lr)=>ar.cmp(cr,lr)>0?cr:lr,this._min=(cr,lr)=>ar.cmp(cr,lr)<0?cr:lr,this._IDBKeyRange=rr._deps.IDBKeyRange})}(this),this.on("versionchange",rr=>{rr.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",rr=>{!rr.newVersion||rr.newVersion<rr.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${rr.oldVersion/10}`)}),this._maxKey=en(Xn.IDBKeyRange),this._createTransaction=(rr,sr,ir,or)=>new this.Transaction(rr,sr,ir,this._options.chromeTransactionDurability,or),this._fireOnBlocked=rr=>{this.on("blocked").fire(rr),yt.filter(sr=>sr.name===this.name&&sr!==this&&!sr._state.vcFired).map(sr=>sr.on("versionchange").fire(rr))},this.use(On),this.use(An),this.use(qn),this.use(jn),this.vip=Object.create(this,{_vip:{value:!0}}),er.forEach(rr=>rr(this))}version(Jn){if(isNaN(Jn)||Jn<.1)throw new X.Type("Given version is not a positive number");if(Jn=Math.round(10*Jn)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,Jn);const Xn=this._versions;var Qn=Xn.filter(er=>er._cfg.version===Jn)[0];return Qn||(Qn=new this.Version(Jn),Xn.push(Qn),Xn.sort(cn),Qn.stores({}),this._state.autoSchema=!1,Qn)}_whenReady(Jn){return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?Jn():new Ce((Xn,Qn)=>{if(this._state.openComplete)return Qn(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void Qn(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(Xn,Qn)}).then(Jn)}use({stack:Jn,create:Xn,level:Qn,name:er}){er&&this.unuse({stack:Jn,name:er});const tr=this._middlewares[Jn]||(this._middlewares[Jn]=[]);return tr.push({stack:Jn,create:Xn,level:Qn??10,name:er}),tr.sort((nr,rr)=>nr.level-rr.level),this}unuse({stack:Jn,name:Xn,create:Qn}){return Jn&&this._middlewares[Jn]&&(this._middlewares[Jn]=this._middlewares[Jn].filter(er=>Qn?er.create!==Qn:!!Xn&&er.name!==Xn)),this}open(){return xn(this)}_close(){const Jn=this._state,Xn=yt.indexOf(this);if(Xn>=0&&yt.splice(Xn,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}Jn.dbReadyPromise=new Ce(Qn=>{Jn.dbReadyResolve=Qn}),Jn.openCanceller=new Ce((Qn,er)=>{Jn.cancelOpen=er})}close(){this._close();const Jn=this._state;this._options.autoOpen=!1,Jn.dbOpenError=new X.DatabaseClosed,Jn.isBeingOpened&&Jn.cancelOpen(Jn.dbOpenError)}delete(){const Jn=arguments.length>0,Xn=this._state;return new Ce((Qn,er)=>{const tr=()=>{this.close();var nr=this._deps.indexedDB.deleteDatabase(this.name);nr.onsuccess=We(()=>{(function({indexedDB:rr,IDBKeyRange:sr},ir){!bn(rr)&&ir!=="__dbnames"&&gn(rr,sr).delete(ir).catch(ee)})(this._deps,this.name),Qn()}),nr.onerror=zt(er),nr.onblocked=this._fireOnBlocked};if(Jn)throw new X.InvalidArgument("Arguments not allowed in db.delete()");Xn.isBeingOpened?Xn.dbReadyPromise.then(tr):tr()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const Jn=this._state.dbOpenError;return Jn&&Jn.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map(Jn=>this._allTables[Jn])}transaction(){const Jn=En.apply(this,arguments);return this._transaction.apply(this,Jn)}_transaction(Jn,Xn,Qn){let er=Ke.trans;er&&er.db===this&&Jn.indexOf("!")===-1||(er=null);const tr=Jn.indexOf("?")!==-1;let nr,rr;Jn=Jn.replace("!","").replace("?","");try{if(rr=Xn.map(ir=>{var or=ir instanceof this.Table?ir.name:ir;if(typeof or!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return or}),Jn=="r"||Jn==="readonly")nr="readonly";else{if(Jn!="rw"&&Jn!="readwrite")throw new X.InvalidArgument("Invalid transaction mode: "+Jn);nr="readwrite"}if(er){if(er.mode==="readonly"&&nr==="readwrite"){if(!tr)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");er=null}er&&rr.forEach(ir=>{if(er&&er.storeNames.indexOf(ir)===-1){if(!tr)throw new X.SubTransaction("Table "+ir+" not included in parent transaction.");er=null}}),tr&&er&&!er.active&&(er=null)}}catch(ir){return er?er._promise(null,(or,ar)=>{ar(ir)}):ht(ir)}const sr=Pn.bind(null,this,nr,rr,er,Qn);return er?er._promise(nr,sr,"lock"):Ke.trans?ot(Ke.transless,()=>this._whenReady(sr)):this._whenReady(sr)}table(Jn){if(!o(this._allTables,Jn))throw new X.InvalidTable(`Table ${Jn} does not exist`);return this._allTables[Jn]}}const Un=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Ln{constructor(Jn){this._subscribe=Jn}subscribe(Jn,Xn,Qn){return this._subscribe(Jn&&typeof Jn!="function"?Jn:{next:Jn,error:Xn,complete:Qn})}[Un](){return this}}function Vn(Zn,Jn){return t(Jn).forEach(Xn=>{Tn(Zn[Xn]||(Zn[Xn]=new In),Jn[Xn])}),Zn}function Wn(Zn){return new Ln(Jn=>{const Xn=T(Zn);let Qn=!1,er={},tr={};const nr={get closed(){return Qn},unsubscribe:()=>{Qn=!0,Ht.storagemutated.unsubscribe(or)}};Jn.start&&Jn.start(nr);let rr=!1,sr=!1;function ir(){return t(tr).some(cr=>er[cr]&&Rn(er[cr],tr[cr]))}const or=cr=>{Vn(er,cr),ir()&&ar()},ar=()=>{if(rr||Qn)return;er={};const cr={},lr=function(hr){Xn&&Ze();const fr=()=>Je(Zn,{subscr:hr,trans:null}),gr=Ke.trans?ot(Ke.transless,fr):fr();return Xn&&gr.then(et,et),gr}(cr);sr||(Ht("storagemutated",or),sr=!0),rr=!0,Promise.resolve(lr).then(hr=>{rr=!1,Qn||(ir()?ar():(er={},tr=cr,Jn.next&&Jn.next(hr)))},hr=>{rr=!1,Jn.error&&Jn.error(hr),nr.unsubscribe()})};return ar(),nr})}let Yn;try{Yn={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch{Yn={indexedDB:null,IDBKeyRange:null}}const zn=$n;function Gn(Zn){let Jn=Hn;try{Hn=!0,Ht.storagemutated.fire(Zn)}finally{Hn=Jn}}a(zn,{...Z,delete:Zn=>new zn(Zn,{addons:[]}).delete(),exists:Zn=>new zn(Zn,{addons:[]}).open().then(Jn=>(Jn.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(Zn){try{return function({indexedDB:Jn,IDBKeyRange:Xn}){return bn(Jn)?Promise.resolve(Jn.databases()).then(Qn=>Qn.map(er=>er.name).filter(er=>er!=="__dbnames")):gn(Jn,Xn).toCollection().primaryKeys()}(zn.dependencies).then(Zn)}catch{return ht(new X.MissingAPI)}},defineClass:()=>function(Zn){r(this,Zn)},ignoreTransaction:Zn=>Ke.trans?ot(Ke.transless,Zn):Zn(),vip:_n,async:function(Zn){return function(){try{var Jn=kn(Zn.apply(this,arguments));return Jn&&typeof Jn.then=="function"?Jn:Ce.resolve(Jn)}catch(Xn){return ht(Xn)}}},spawn:function(Zn,Jn,Xn){try{var Qn=kn(Zn.apply(Xn,Jn||[]));return Qn&&typeof Qn.then=="function"?Qn:Ce.resolve(Qn)}catch(er){return ht(er)}},currentTransaction:{get:()=>Ke.trans||null},waitFor:function(Zn,Jn){const Xn=Ce.resolve(typeof Zn=="function"?zn.ignoreTransaction(Zn):Zn).timeout(Jn||6e4);return Ke.trans?Ke.trans.waitFor(Xn):Xn},Promise:Ce,debug:{get:()=>R,set:Zn=>{F(Zn,Zn==="dexie"?()=>!0:bt)}},derive:c,extend:r,props:a,override:y,Events:Et,on:Ht,liveQuery:Wn,extendObservabilitySet:Vn,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(Zn,Jn){typeof Jn=="string"?_(Zn,Jn,void 0):"length"in Jn&&[].map.call(Jn,function(Xn){_(Zn,Xn,void 0)})},shallowClone:w,deepClone:O,getObjectDiff:Sn,cmp:It,asap:v,minKey:-(1/0),addons:[],connections:yt,errnames:H,dependencies:Yn,semVer:"3.2.3",version:"3.2.3".split(".").map(Zn=>parseInt(Zn)).reduce((Zn,Jn,Xn)=>Zn+Jn/Math.pow(10,2*Xn))}),zn.maxKey=en(zn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ht("storagemutated",Zn=>{if(!Hn){let Jn;mt?(Jn=document.createEvent("CustomEvent"),Jn.initCustomEvent("x-storagemutated-1",!0,!0,Zn)):Jn=new CustomEvent("x-storagemutated-1",{detail:Zn}),Hn=!0,dispatchEvent(Jn),Hn=!1}}),addEventListener("x-storagemutated-1",({detail:Zn})=>{Hn||Gn(Zn)}));let Hn=!1;if(typeof BroadcastChannel<"u"){const Zn=new BroadcastChannel("x-storagemutated-1");typeof Zn.unref=="function"&&Zn.unref(),Ht("storagemutated",Jn=>{Hn||Zn.postMessage(Jn)}),Zn.onmessage=Jn=>{Jn.data&&Gn(Jn.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Ht("storagemutated",Jn=>{try{Hn||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:Jn})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(Xn=>Xn.postMessage({type:"x-storagemutated-1",changedParts:Jn})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",Jn=>{if(Jn.key==="x-storagemutated-1"){const Xn=JSON.parse(Jn.newValue);Xn&&Gn(Xn.changedParts)}});const Zn=self.document&&navigator.serviceWorker;Zn&&Zn.addEventListener("message",function({data:Jn}){Jn&&Jn.type==="x-storagemutated-1"&&Gn(Jn.changedParts)})}Ce.rejectionMapper=function(Zn,Jn){if(!Zn||Zn instanceof W||Zn instanceof TypeError||Zn instanceof SyntaxError||!Zn.name||!J[Zn.name])return Zn;var Xn=new J[Zn.name](Jn||Zn.message,Zn);return"stack"in Zn&&l(Xn,"stack",{get:function(){return this.inner.stack}}),Xn},F(R,bt);class MySubClassedDexie extends $n{constructor(){super("nr-editor");Zr(this,"catalogues");Zr(this,"systems");Zr(this,"systemrows");this.version(6).stores({catalogues:"id, content.catalogue.id, content.catalogue.gameSystemId",systems:"id",systemrows:"id"})}}const db=new MySubClassedDexie;var fi,di;(di=(fi=globalThis.process)==null?void 0:fi.env)!=null&&di.githubToken;function normalizeGithubRepoUrl(Zn){const Jn=/^(?:(http(?:s?)?:\/\/)?github.com\/)?([^\/]+)\/([^\/]+)\/?.*$/,Xn=Zn.match(Jn);if(!Xn)return null;const[,Qn="https://",er,tr]=Xn;return!er||!tr?null:`https://github.com/${er}/${tr}`}function parseGitHubUrl(Zn){const Jn=/^(?:https?:\/\/)?(?:www\.)?github\.com\/([^/]+)\/([^/]+)(?:\/)?$/,Xn=Zn.match(Jn);if(!Xn)throw new Error("Invalid GitHub URL format: "+Zn);const[,Qn,er]=Xn;return{githubUrl:Zn,githubRepo:`${Qn}/${er}`,githubOwner:Qn,githubName:er}}async function getFileContentFromRepo(Zn,Jn){try{const Xn=Zn.split("/"),Qn=Xn[Xn.length-2],er=Xn[Xn.length-1].replace(".git",""),tr=`https://api.github.com/repos/${Qn}/${er}/contents/${encodeURIComponent(Jn)}`;console.log(`Querying github api at ${tr}`);const nr=await $fetch(tr,{headers:{"User-Agent":"New Recruit Data Editor (Electron)",Accept:"application/vnd.github.v3+json"}});if(!nr||!(nr!=null&&nr.download_url))throw new Error("No download_url found");console.log(`Downloading file at ${nr==null?void 0:nr.download_url}`);const rr=await $fetch(nr.download_url,{headers:{"User-Agent":"New Recruit Data Editor (Electron)",Accept:"application/vnd.github.v3+json"}});return console.log(`Downloaded file, length: ${rr.length}`),rr}catch(Xn){throw Xn}}async function getFileContentFromRepoWithFallback(Zn,Jn,Xn){try{return await getFileContentFromRepo(Zn,Jn)}catch(Qn){if(!Xn)throw Qn;return await getFileContentFromRepo(Zn,Xn)}}async function getNextRevision(Zn,Jn){if(Jn.fullFilePath)try{const Xn=filename(Jn.fullFilePath),Qn=Xn.endsWith("z")?removeSuffix$1(Xn,"z"):void 0,er=await getFileContentFromRepoWithFallback(Zn.githubUrl,Xn,Qn),tr=/revision="(\d+)"/,nr=er.match(tr);if(nr){const rr=(Number(nr[1])||0)+1;return console.log(`Revision of ${Jn.name}: ${Jn.revision} -> ${rr}`),rr}}catch(Xn){console.error(Xn)}return Jn.revision||1}function getBookDate(Zn,Jn){if(Zn)return Zn[Jn]||Zn["*"]}async function loadData(Zn,Jn,Xn,Qn){if(!Jn.catalogue&&!Jn.gameSystem)throw Error("invalid loadBsData argument: no .catalogue or .gameSystem in data");const er=Jn.catalogue?"catalogue":"gameSystem",tr=er==="gameSystem",nr=er==="catalogue",rr=Jn[er],sr=rr;if(sr.loaded||sr.loaded_editor)return sr;setPrototypeRecursive(rr);const ir=setPrototype(rr,er);if(ir.manager=Zn,nr){const ar={targetId:ir.gameSystemId},cr=Zn.getLoadedCatalogue(ar,Xn);if(cr)ir.gameSystem=cr;else{const lr=await Zn.getData(ar,Xn),hr=Zn.getLoadedCatalogue(ar,Xn);hr?ir.gameSystem=hr:ir.gameSystem=await loadData(Zn,lr,Xn)}}const or=[];for(const ar of(ir==null?void 0:ir.catalogueLinks)||[]){if(!ar.targetId){console.warn(`invalid link: no targetId in link: ${ar}, found in ${rr.name}`);continue}if(ar.targetId===ir.id){ar.target=ir;continue}const cr=Zn.getLoadedCatalogue(ar,Xn);if(cr){ar.target=cr;continue}const lr=Zn.getData(ar,Xn).then(hr=>{const fr=Zn.getLoadedCatalogue(ar,Xn);if(fr){ar.target=fr;return}return loadData(Zn,hr,Xn).then(gr=>ar.target=gr)});or.push(lr)}return await Promise.all(or),tr&&Zn.addLoadedSystem(ir),nr&&Zn.addLoadedCatalogue(ir),ir}class BSCatalogueManager{constructor(){Zr(this,"catalogues",{});Zr(this,"unresolvedLinks");Zr(this,"settings")}async getData(Jn,Xn){throw new Error("Method not implemented.")}async loadAll(){throw new Error("Method not implemented.")}getCatalogueInfo(Jn){}findOptionById(Jn){}getLoadedCatalogue(Jn,Xn){const Qn=typeof Jn=="string"?Jn:Jn.targetId||Jn.name,er=getBookDate(Xn,Qn)||"default",tr=this.catalogues[Qn];return tr?tr[er]:void 0}addLoadedCatalogue(Jn,Xn){const Qn=getBookDate(Xn,Jn.id)||"default";this.catalogues[Jn.name]||(this.catalogues[Jn.name]={}),this.catalogues[Jn.id]||(this.catalogues[Jn.id]={}),this.catalogues[Jn.name][Qn]=Jn,this.catalogues[Jn.id][Qn]=Jn}addLoadedSystem(Jn,Xn){return this.addLoadedCatalogue(Jn,Xn)}unloadAll(){this.catalogues={}}async loadData(Jn,Xn){const Qn=await loadData(this,Jn,Xn);return Qn.process(),Qn}async loadCatalogue(Jn,Xn,Qn){const er=this.getLoadedCatalogue(Jn,Xn);if(er&&!Qn)return er;const tr=await this.getData(Jn,Xn);if(tr)return await this.loadData(tr,Xn);throw Error(`Couldn't load catalogue: couldn't getData ${Jn}`)}}class GameSystemFiles extends BSCatalogueManager{constructor(){super(...arguments);Zr(this,"gameSystem",null);Zr(this,"catalogueFiles",noObserve());Zr(this,"allLoaded");Zr(this,"loadedCatalogues",{});Zr(this,"github");Zr(this,"unresolvedLinks",{});Zr(this,"index",{});Zr(this,"update")}async loadData(Xn,Qn){return await loadData(this,Xn,Qn)}findOptionById(Xn){for(const Qn of Object.values(this.loadedCatalogues))if(Qn.index&&Qn.index[Xn])return Qn.index[Xn]}unloadAll(){super.unloadAll();for(const Xn of Object.values(this.loadedCatalogues))Xn.reset();this.loadedCatalogues={},delete this.allLoaded}async loadAll(Xn){var tr,nr;let Qn=Object.values(this.catalogueFiles).length+1,er=0;if(this.allLoaded||console.log("Loading all catalogues in",(nr=(tr=this.gameSystem)==null?void 0:tr.gameSystem)==null?void 0:nr.name),this.gameSystem){Xn&&await Xn(er,Qn,`Loading ${this.gameSystem.gameSystem.name}`),(await this.loadCatalogue({targetId:this.gameSystem.gameSystem.id})).processForEditor(),er++;for(const sr of Object.values(this.catalogueFiles))Xn&&await Xn(er,Qn,`Loading ${sr.catalogue.name}`),(await this.loadCatalogue({targetId:sr.catalogue.id})).processForEditor(),er++,Xn&&await Xn(er,Qn,`Loading ${sr.catalogue.name}`)}this.allLoaded=!0}getLoadedCatalogue(Xn,Qn){const er=Xn.targetId||Xn.name;return this.loadedCatalogues[er]}addLoadedCatalogue(Xn,Qn){this.loadedCatalogues[Xn.id]=Xn}getAllLoadedCatalogues(){var Qn;return((Qn=this.gameSystem)==null?void 0:Qn.gameSystem.id)?Object.values(this.loadedCatalogues):[]}getId(){var Xn;return(Xn=this.gameSystem)==null?void 0:Xn.gameSystem.id}getCatalogueInfo(Xn){var Qn,er;if(((Qn=this.gameSystem)==null?void 0:Qn.gameSystem.id)===Xn.targetId)return(er=this.gameSystem)==null?void 0:er.gameSystem;for(const tr of Object.values(this.catalogueFiles))if(tr.catalogue.id===Xn.targetId)return tr.catalogue}getAllCatalogueFiles(){return[...this.gameSystem?[this.gameSystem]:[],...Object.values(this.catalogueFiles)]}setSystem(Xn){this.gameSystem=Xn;const Qn=db.systems.put({id:Xn.gameSystem.id,content:Xn});return this.update&&this.update(Xn),Qn}setCatalogue(Xn){const Qn=Xn.catalogue.id;this.catalogueFiles[Qn]=Xn;const er=db.catalogues.put({id:Xn.catalogue.id,content:Xn});return this.update&&this.update(Xn),er}removeCatalogue(Xn){for(const[Qn,er]of Object.entries(this.catalogueFiles))er.catalogue.id===Xn.catalogue.id&&delete this.catalogueFiles[Qn]}async getData(Xn,Qn){var rr;if(Xn.targetId==((rr=this.gameSystem)==null?void 0:rr.gameSystem.id))return this.gameSystem;if(Xn.targetId in this.catalogueFiles)return this.catalogueFiles[Xn.targetId];const er=await db.catalogues.get({"content.catalogue.id":Xn.targetId});if(er)return er.content;const tr=await db.systems.get(Xn.targetId);if(tr)return tr.content;const nr=Xn.name?`name ${Xn.name}`:`id ${Xn.targetId}`;throw Error(`Couldn't import catalogue with ${nr}, perhaps it wasnt uploaded?`)}}const fixlinknames={name:"Fix link names",arguments:[{name:"catalogues",type:"catalogue[]"}],run:Zn=>{const Jn=[];for(const Xn of Zn)Xn.forEachObjectWhitelist(Qn=>{Qn.target&&Qn.name!==Qn.target.name&&(Jn.push([Qn,`${Qn.name} -> ${Qn.target.name}`]),$store.edit_node(Qn,{name:Qn.target.name}))});return Jn}},fixprofiles={name:"Fix profiles & characteristics",arguments:[{name:"catalogues",type:"catalogue[]"}],run:Zn=>{const Jn=[],Xn=[];Zn.map(Qn=>Qn.processForEditor());for(const Qn of Zn)Qn.forEachObjectWhitelist(er=>{var tr;if(er.isProfile()&&!er.isLink()&&er.typeId){const nr=er.catalogue.findOptionById(er.typeId);if(!nr)return;nr.name!==er.typeName&&(Jn.push([er,`fixed typeName: ${er.typeName} -> ${nr.name}`]),$store.edit_node(er,{typeName:nr.name}));for(const ir of er.characteristics){const or=nr.characteristicTypes.find(ar=>ar.name===ir.name);or&&ir.typeId!==or.id&&(Jn.push([er,`fixed typeId: ${ir.name}`]),$store.edit_node(ir,{typeId:or.id}))}for(const ir of er.characteristics){const or=nr.characteristicTypes.find(ar=>ar.id===ir.typeId);or&&ir.name!==or.name&&(Jn.push([er,`fixed characteristic name: ${ir.name} -> ${or.name}`]),$store.edit_node(ir,{name:or.name}))}const rr=(tr=nr.characteristicTypes)==null?void 0:tr.filter(ir=>!er.characteristics.find(or=>or.typeId===ir.id)),sr=er.characteristics.find((ir,or)=>or!==nr.characteristicTypes.findIndex(ar=>ar.id===ir.typeId));if(rr.length||sr){const ir=[],or=[...er.characteristics];for(const ar of rr)or.push({name:ar.name,typeId:ar.id,$text:""}),Jn.push([er,`added missing characteristic: ${ar.name}`]);sr&&Jn.push([er,"fixed characteristics order"]);for(const ar of or){const cr=nr.characteristicTypes.findIndex(lr=>lr.id===ar.typeId);cr>=0?ir[cr]=ar:(Xn.push([[er,`removed extra characteristic: ${ar.name}`]]),Xn.push(`<pre style="background-color: rgba(0,0,0,0.1); border: 1px solid rgba(0.5,0.5,0.5,0.15)">${ar.$text}</pre><hr class="gray" style="border-bottom: none;"/>`))}$store.edit_node(er,{characteristics:ir})}}});return[...Xn,Jn]}},listrefs={name:"List all used",description:"Find out what a catalogue uses from an imported catalogue, used to find out if an import is not necesarry",arguments:[{name:"catalogue (importing)",type:"catalogue"},{name:"catalogue (imported)",type:"catalogue[]"}],run(Zn,Jn){const Xn=[];for(const Qn of Jn){if(!Zn.imports.find(er=>er.name===Qn.name)&&Jn.length===1)throw new Error(`${Zn.name} doesn't import ${Qn.name}`);if(Qn.forEachObjectWhitelist(er=>{for(const tr of er.refs||[])if(tr.catalogue.name===Zn.name){Xn.push(er);break}for(const tr of er.other_refs||[])if(tr.catalogue.name===Zn.name){Xn.push(er);break}}),Zn.importsWithEntries.find(er=>er.name===Qn.name)){for(const er of Qn.selectionEntries||[])er.import!==!1&&Xn.push([er,"root"]);for(const er of Qn.entryLinks||[])er.import!==!1&&Xn.push([er,"root"])}}return Xn}};function getParents(Zn){const Jn=[];let Xn=Zn;for(;Xn.parent;)Jn.push(Xn.parent),Xn=Xn.parent;return Jn}function getParentsAndSelf(Zn){const Jn=[Zn];let Xn=Zn;for(;Xn.parent;)Jn.push(Xn.parent),Xn=Xn.parent;return Jn}class NodeView{constructor(Jn){Zr(this,"iter");Zr(this,"followTargets",!1);this.iter=Jn}self(Jn){const Xn=[];for(const Qn of this.iter)Jn(Qn)&&Xn.push(Qn);return this.return(Xn)}map(Jn){const Xn=[];for(const Qn of this.iter)Xn.push(Jn(Qn));return Xn}descendant(Jn){const Xn=[];for(const Qn of this.iter)Qn.forEachObjectWhitelist(er=>{const tr=Jn(er);return tr&&Xn.push(er),tr});return this.return(Xn)}child(Jn){const Xn=[];for(const Qn of this.iter)Qn.forEachObjectWhitelist(er=>{const tr=Jn(er);return tr&&Xn.push(er),tr},void 0,2);return this.return(Xn)}parent(Jn){const Xn=[];for(const Qn of this.iter)Qn.parent&&Jn(Qn.parent)&&Xn.push(Qn.parent);return this.return(Xn)}ancestor(Jn){const Xn=[];for(const Qn of this.iter)for(const er of getParents(Qn)){const tr=Jn(er);if(tr){Xn.push(tr);break}if(tr===!1)break}return this.return(Xn)}has_descendant(Jn){const Xn=[];for(const Qn of this.iter)Qn.find_recursive(Jn,this.followTargets)&&Xn.push(Qn);return this.return(Xn)}has_descendant_or_self(Jn){const Xn=[];for(const Qn of this.iter)(Jn(Qn)||Qn.find_recursive(Jn,this.followTargets))&&Xn.push(Qn);return this.return(Xn)}has_child(Jn){const Xn=[];for(const Qn of this.iter)Qn.find(Jn,this.followTargets)&&Xn.push(Qn);return this.return(Xn)}has_child_or_self(Jn){const Xn=[];for(const Qn of this.iter)(Jn(Qn)||Qn.find(Jn,this.followTargets))&&Xn.push(Qn);return this.return(Xn)}has_parent(Jn){const Xn=[];for(const Qn of this.iter)Qn.parent&&Jn(Qn.parent)&&Xn.push(Qn);return this.return(Xn)}has_parent_or_self(Jn){const Xn=[];for(const Qn of this.iter)(Jn(Qn)||Qn.parent&&Jn(Qn.parent))&&Xn.push(Qn);return this.return(Xn)}has_ancestor(Jn){const Xn=[];for(const Qn of this.iter)for(const er of getParents(Qn))if(Jn(er)){Xn.push(Qn);break}return this.return(Xn)}has_ancestor_or_self(Jn){const Xn=[];for(const Qn of this.iter)for(const er of getParentsAndSelf(Qn))if(Jn(er)){Xn.push(Qn);break}return this.return(Xn)}hasnot_descendant(Jn){const Xn=[];for(const Qn of this.iter)Qn.find_recursive(Jn,this.followTargets)||Xn.push(Qn);return this.return(Xn)}hasnot_descendant_or_self(Jn){const Xn=[];for(const Qn of this.iter)!Jn(Qn)&&!Qn.find_recursive(Jn,this.followTargets)&&Xn.push(Qn);return this.return(Xn)}hasnot_child(Jn){const Xn=[];for(const Qn of this.iter)Qn.find(Jn,this.followTargets)||Xn.push(Qn);return this.return(Xn)}hasnot_child_or_self(Jn){const Xn=[];for(const Qn of this.iter)!Jn(Qn)&&!Qn.find(Jn,this.followTargets)&&Xn.push(Qn);return this.return(Xn)}hasnot_parent(Jn){const Xn=[];for(const Qn of this.iter)(!Qn.parent||!Jn(Qn.parent))&&Xn.push(Qn);return this.return(Xn)}hasnot_parent_or_self(Jn){const Xn=[];for(const Qn of this.iter)!Jn(Qn)&&!(Qn.parent&&Jn(Qn.parent))&&Xn.push(Qn);return this.return(Xn)}hasnot_ancestor(Jn){const Xn=[];for(const Qn of this.iter){for(const er of getParents(Qn))if(Jn(er))break;Xn.push(Qn)}return this.return(Xn)}hasnot_ancestor_or_self(Jn){const Xn=[];for(const Qn of this.iter){for(const er of getParentsAndSelf(Qn))if(Jn(er))break;Xn.push(Qn)}return this.return(Xn)}return(Jn){const Xn=new NodeView(Jn);return Xn.followTargets=this.followTargets,Xn}}const select={name:"Select nodes",arguments:[{name:"catalogues",type:"catalogue[]"},{name:"query (js)",type:"string"}],run(from,query){const all=[];from.forEach(Zn=>Zn.forEachObjectWhitelist(Jn=>all.push(Jn))),globalThis.$view=new NodeView(all);const evaled=eval(`$view.${query}`),result=Array.isArray(evaled)?evaled:evaled.iter||evaled;return $store.set_selections(result),[`Selected ${result.length} nodes: <code>$store.get_selections())</code>`,result]}},listautomaticrefs={name:"List all automatic rule/profile text refs",arguments:[{name:"catalogues",type:"catalogue[]"},{name:"filter",type:"string",optional:!0,description:"preview refs to (exact match)"}],run(Zn,Jn){const Xn=[],Qn=Zn[0].getSystem(),er=new(Object.getPrototypeOf(Qn.infoIndex)).constructor;for(const ar of Zn)ar.forEachObjectWhitelist(cr=>{if(!cr.isLink()&&(cr.isProfile()||cr.isRule())&&((!Jn||cr.getName()===Jn)&&er.add(cr.getName(),cr),cr.alias))for(const lr of cr.alias){const hr=clone(cr);hr.name=lr,(!Jn||lr===Jn)&&er.add(lr,hr)}});const tr={},nr={},rr=[];for(const ar of Zn)ar.forEachObjectWhitelist(cr=>{var lr;if(!cr.isLink()){let hr=!1;cr.isProfile()?(lr=cr.characteristics)==null||lr.forEach(fr=>{er.match(fr.$text).forEach(gr=>{var ur;(ur=gr.match)!=null&&ur.length&&gr.match[0].getName()!==cr.getName()&&(tr[gr.match[0].getName()]=(tr[gr.match[0].getName()]||0)+1,nr[gr.match[0].getName()]=gr.match,Jn&&!hr&&rr.push(fr))})}):cr.isRule()&&er.match(cr.description).forEach(fr=>{var gr;(gr=fr.match)!=null&&gr.length&&fr.match[0].getName()!==cr.getName()&&(tr[fr.match[0].getName()]=(tr[fr.match[0].getName()]||0)+1,nr[fr.match[0].getName()]=fr.match,Jn&&!hr&&rr.push(cr))})}});const sr=sortByDescendingInplace(Object.entries(tr),ar=>ar[1]),ir=[];Xn.push(ir);function or(ar){var cr,lr;return(((cr=ar.refs)==null?void 0:cr.length)||0)+(((lr=ar.other_refs)==null?void 0:lr.length)||0)}for(const[ar,cr]of sr)for(const lr of nr[ar])ir.push([lr,`${cr} text refs, ${or(lr)} actual refs`]);if(rr.length){Xn.push('<div class="bold">References:</div>');for(const ar of rr){Xn.push([ar]);const cr=ar.$text??ar.description??"",lr=er.match(cr).map(hr=>hr.match?`<b>${hr.text}</b>`:hr.text).join("");Xn.push(`<div class="gray" style="padding-left: 18px; white-space: pre-wrap;">${lr}</div>`)}}return Xn}},pasteSpecialRule={name:"[TOW 1] Paste Special Rule",hooks:{paste(Zn,Jn){if(typeof Jn!="string"||!["M","WS","BS","S","T","W","I","A","Ld"].find(tr=>!Jn.includes(tr))||!["R","S","AP","Special Rules"].find(tr=>!Jn.includes(tr)))return;const Xn=Jn.replace(/\r\n/g,`
`).split(`
`),Qn=Xn.shift();return{parentKey:"profiles",characteristics:[{$text:Xn.join(`
`),name:"Description",typeId:"9f84-4221-785a-db50"}],name:Qn,typeId:"c1ac-c1c8-f9d5-9673",typeName:"Special Rule"}}}};function toWeaponProfile(Zn){return{parentKey:"profiles",name:Zn.Name,typeId:"a378-c633-912d-11ce",typeName:"Weapon",characteristics:[{name:"R",typeId:"2360-c777-5e07-ed58",$text:Zn.Stats.R},{name:"S",typeId:"ac19-f99c-72e9-a1a7",$text:Zn.Stats.S},{name:"AP",typeId:"9429-ffe7-2ce5-e9a5",$text:Zn.Stats.AP},{name:"Special Rules",typeId:"5f83-3633-336b-93b4",$text:Zn.Stats["Special Rules"]},{name:"Notes",typeId:"772a-a7ff-f6b3-df71",$text:Zn.Stats.Notes}]}}function lastItem(Zn){return Zn[Zn.length-1]}const pasteWeapons={name:"[TOW 2] Paste Weapon",hooks:{paste(Zn,Jn){if(typeof Jn!="string"||!["M","WS","BS","S","T","W","I","A","Ld"].find(tr=>!Jn.includes(tr))||["R","S","AP","Special Rules"].find(tr=>!Jn.includes(tr)))return;const Xn=Jn.replace(/\r\n/g,`
`).split(`
`).filter(tr=>tr);let Qn="weaponsTable";const er=[];for(let tr=0;tr<Xn.length;tr++){const nr=Xn[tr];if(nr.includes("R")&&nr.includes("S")&&nr.includes("AP")&&nr.includes("Special Rules")){Qn="weaponsTable";continue}else nr.startsWith("Notes:")&&(Qn="notes");if(Qn==="weaponsTable"&&nr){const[rr,sr,ir,or,ar]=nr.replace(/\t|\s{2,}/g,"  ").split("  ");er.push({Name:rr,Stats:{R:sr,S:ir,AP:or,"Special Rules":ar,Notes:""}})}if(Qn==="notes"){const rr=lastItem(er);rr!=null&&rr.Stats.Notes&&(rr.Stats.Notes+=nr)}}return er.map(tr=>toWeaponProfile(tr))}}};function hashFnv32a(Zn,Jn=198209835){let Xn,Qn,er=Jn===void 0?2166136261:Jn;for(Xn=0,Qn=Zn.length;Xn<Qn;Xn++)er^=Zn.charCodeAt(Xn),er+=(er<<1)+(er<<4)+(er<<7)+(er<<8)+(er<<24);return(er>>>0).toString(16)}function id(Zn){return`${hashFnv32a(Zn)}-${hashFnv32a(Zn+"------")}`}function removeTextInParentheses(Zn){return Zn.replace(/\([^()]*\)/g,"")}function extractTextAndDetails(Zn){const Jn=[];let Xn=!1,Qn={text:"",details:""};for(let er=0;er<Zn.length;er++){const tr=Zn[er];if(tr==="("){Xn=!0;continue}else if(tr===")"){Xn=!1,Jn.push({...Qn}),Qn.text="",Qn.details="";continue}Xn?Qn.details+=tr:Qn.text+=tr}Qn.text.trim()&&Jn.push(Qn);for(const er of Jn)er.text=removePrefix$2(er.text.trim(),", "),er.details.trim()||(er.details=null);return Jn}function sortByAscending(Zn,Jn){return[...Zn].sort((Xn,Qn)=>(Jn(Xn)??"").toString().localeCompare((Jn(Qn)??"").toString(),void 0,{numeric:!0}))}function isSameCharacteristics(Zn,Jn){const Xn=sortByAscending(Zn,er=>er.name).map(er=>er.$text).join("::"),Qn=sortByAscending(Jn,er=>er.name).map(er=>er.$text).join("::");return Xn===Qn}function splitByCenterDot(Zn){if(!Zn.includes(""))return{all:Zn};const Jn=Zn.split("").filter(Boolean),Xn={all:""};return Jn.forEach(Qn=>{const[er,...tr]=Qn.split(":"),nr=tr.join(":").trim(),rr=replaceSuffix(removeSuffix(er.trim(),"s"),"ve","f");for(const sr of rr.split("/").map(ir=>ir.trim()))Xn[sr]=nr}),Xn}function removeSuffix(Zn,Jn){return Zn.endsWith(Jn)?Zn.substring(0,Zn.length-Jn.length):Zn}function removePrefix$2(Zn,Jn){return Zn.startsWith(Jn)?Zn.substring(Jn.length):Zn}function replaceSuffix(Zn,Jn,Xn){return Zn.endsWith(Jn)?Zn.slice(0,-Jn.length)+Xn:Zn}function splitAnd(Zn){return Zn.split(/, | and /).map(Xn=>removePrefix$2(removePrefix$2(Xn.trim(),"a "),"and "))}function parseSpecialRule(Zn){const Jn=/^([^(]+?)([*]*)(?:\s*[(]([^)]+)[)])?([*]*)$/,Xn=Zn.trim().match(Jn);if(!Xn)return console.warn("Couldn't parse rule "+Zn),{};let Qn=Xn[1].trim(),er=null,tr=null,nr=Xn[2].length+Xn[4].length;if(Xn[3]){const rr=Xn[3].split(", ");er=rr[0],rr.length===1&&(tr=rr[1]),rr.length>2&&console.log(`${Zn} has more text within parentheses that is not handled.`)}return Qn=Qn.replace("\x07 ",""),Qn=Qn.replace("\x07",""),Qn.startsWith("Poisoned Attacks")&&Qn.includes("*Note")&&(Qn="Poisoned Attacks"),{ruleName:Qn,param:er,specification:tr,asterisks:nr}}function toTitleCase(Zn){return Zn.split(" ").map(Jn=>Jn.charAt(0).toUpperCase()+Jn.slice(1).toLowerCase()).join(" ")}function toModelProfile(Zn,Jn){const{ruleName:Xn,param:Qn}=parseSpecialRule(Zn.Name),er=Zn.Stats,tr={characteristics:[{name:"M",typeId:"cd3b-a5a4-e185-5a9d",$text:er.M??"-"},{name:"WS",typeId:"b007-7d58-4f14-1e01",$text:er.WS??"-"},{name:"BS",typeId:"59f9-ccf5-1155-fb05",$text:er.BS??"-"},{name:"S",typeId:"5b6b-1427-2a45-dd0c",$text:er.S??"-"},{name:"T",typeId:"ab43-8b61-83e7-d090",$text:er.T??"-"},{name:"W",typeId:"83ed-7b82-bf1f-e558",$text:er.W??"-"},{name:"I",typeId:"73b1-abe5-72f8-41e2",$text:er.I??"-"},{name:"A",typeId:"dddc-9fbd-b0fd-a480",$text:er.A??"-"},{name:"Ld",typeId:"c435-6b14-f77e-3c72",$text:er.Ld??"-"}],name:Xn,hidden:!1,typeId:"b070-143a-73f-2772",typeName:"Model"};return Jn&&(tr.comment=`${Jn}/${Xn}`),tr}function toSpecialRule(Zn,Jn){return{name:Zn,hidden:!1,typeId:"c1ac-c1c8-f9d5-9673",typeName:"Special Rule",characteristics:[{name:"Description",typeId:"9f84-4221-785a-db50",$text:Jn}]}}function toUnitProfile(Zn,Jn){if(!Jn.Subheadings["Troop Type:"]||!Jn.Subheadings["Unit Size:"]){console.log(`Couldn't make Unit profile for ${Zn} (missing data) in `,Jn);return}return{characteristics:[{name:"Troop Type",typeId:"5d94-6b94-bd89-1944",$text:Jn.Subheadings["Troop Type:"]},{name:"Unit Size",typeId:"80a1-bb6f-66e4-4a5b",$text:Jn.Subheadings["Unit Size:"]}],name:Zn,typeId:"2878-9a1f-dd74-48e3",typeName:"Unit",hidden:!1,id:id(`${Zn}/unit/profile`)}}function toEquipment(Zn,Jn,Xn){return{name:Zn,id:id(`${Jn}/equipment/${Zn}`),hidden:!1,type:"selectionEntry",targetId:Xn??Zn,modifiers:[],constraints:[{type:"min",value:1,scope:"parent",shared:!1,field:"selections",id:id(`${Jn}/equipment/${Zn}/min`)},{type:"max",value:1,scope:"parent",shared:!1,field:"selections",id:id(`${Jn}/equipment/${Zn}/max`)}]}}function toGroup(Zn,Jn){return{name:Zn,hidden:!1,id:id(`${Jn}/${Zn}`),selectionEntries:[],entryLinks:[],constraints:[],modifiers:[]}}function getGroup(Zn,Jn,Xn){Zn.selectionEntryGroups||(Zn.selectionEntryGroups=[]);const Qn=Zn.selectionEntryGroups.find(tr=>tr.name===Jn);if(Qn)return Qn;const er=toGroup(Jn,Xn);return Zn.selectionEntryGroups.push(er),er}function parseDetails(Zn){const Jn=parseInt(Zn);return isNaN(Jn)?0:Jn}function toCost(Zn){Zn||(Zn=0);const Jn=typeof Zn=="string"?parseInt(Zn):Zn;return{name:"pts",typeId:"points",value:isNaN(Jn)?0:Jn}}function toEntry(Zn,Jn,Xn){if(!Zn)throw new Error("Cannot create entry with no name.");const Qn={name:Zn,id:id(`${Jn}/${Zn}`),costs:[],infoLinks:[],profiles:[],modifiers:[],entryLinks:[],type:"upgrade",import:!0,hidden:!1};return Xn&&Qn.costs.push(toCost(Xn)),Qn}function toProfileLink(Zn,Jn,Xn){if(!Zn)throw new Error("Cannot create profile link with no name.");return{name:Zn,hidden:!1,type:"profile",id:id(`${Jn}/${Zn}`),targetId:Xn}}function toEntryLink(Zn,Jn,Xn){if(!Zn)throw new Error("Cannot create profile link with no name.");return{import:!0,name:Zn,hidden:!1,id:id(`${Jn}/${Zn}`),type:"selectionEntry",targetId:Xn??Zn,costs:[],modifiers:[],constraints:[]}}function toGroupLink(Zn,Jn,Xn){if(!Zn)throw new Error("Cannot create profile link with no name.");return{import:!0,name:Zn,hidden:!1,id:id(`${Jn}/${Zn}`),type:"selectionEntryGroup",targetId:Xn??Zn,costs:[],modifiers:[],constraints:[]}}function toMinConstraint(Zn,Jn){return{type:"min",value:Zn,field:"selections",scope:"parent",shared:!1,id:id(`${Jn}/min`)}}function toMaxConstraint(Zn,Jn,Xn="parent"){return{type:"max",value:Zn,field:"selections",scope:Xn,shared:!1,id:id(`${Jn}/max`),includeChildSelections:Xn!=="parent"}}function toSpecialRuleLink(Zn,Jn,Xn,Qn){const er={name:removeTextInParentheses(Zn),hidden:!1,id:id(`${Jn}/rule/${Zn}`),type:"profile",targetId:Xn??Zn,modifiers:[]};return Qn&&er.modifiers.push({type:"append",value:`(${Qn})`,field:"name"}),er}function getPerModelCostModifier(Zn,Jn){return{comment:"per model",type:"increment",value:parseDetails(Zn),field:"points",repeats:[{value:1,repeats:1,field:"selections",scope:"parent",childId:"model",shared:!0,roundUp:!1}]}}function toCategoryLink(Zn,Jn){return{name:Zn.name,hidden:!1,id:id(`${Jn}/${Zn.name}`),targetId:Zn.id,primary:!1}}function removePrefix$1(Zn,Jn){return Zn.startsWith(Jn)?Zn.substring(Jn.length):Zn}function removeUndefineds(Zn){for(const Jn in Zn)Zn[Jn]===void 0&&delete Zn[Jn];return Zn}class Parser{constructor(Jn){Zr(this,"source");Zr(this,"text");Zr(this,"parsed",[]);this.text=Jn,this.source=Jn}text_upto_token(Jn){if(!this.text)return null;const Qn=new RegExp(Jn.join("|"),"i").exec(this.text);if(!Qn)return null;const er=Qn.index,tr=this.text.substring(0,er).trim(),nr=Qn[0];this.text=this.text.substring(er+nr.length).trim();const rr=this.clean_text(tr);return rr&&this.parsed.push({text:rr,type:"text"}),this.parsed.push({text:nr,type:"token"}),nr}next_token(Jn,Xn=!1){if(!this.text)return null;for(const Qn of Jn)if(this.text.toLowerCase().startsWith(Xn?Qn+" ":Qn))return this.parsed.push({text:Qn,type:"token"}),this.text=this.text.substring(Qn.length).trim(),Qn;return null}clean_text(Jn){return Jn=removePrefix$1(Jn,"a "),Jn=removePrefix$1(Jn,"an "),Jn=removePrefix$1(Jn,"the "),Jn=removePrefix$1(Jn,"its "),Jn=Jn.replace(/ \(see .*\)/,""),Jn}remainder(){if(!this.text)return null;const Jn=this.clean_text(this.text);return Jn?(this.parsed.push({text:Jn,type:"text"}),this.text="",Jn):null}}function parseOptionsLine(Zn){if(Zn.includes("unless"))throw"cant parse 'unless' options";Zn=Zn.replace("may have may have","may have");const[Jn,Xn,Qn]=Zn.trim().match(/([^.]*)(?:[.]{2,})?([^.]*)?/);if(!Xn.startsWith("")&&!Xn.startsWith("-"))return console.warn("invalid input",Xn),{tokens:[],source:Xn,details:Qn};const er=["may be mounted on a:","may be mounted on","may take:","may take","must take","must be mounted on","may have","must have","may be upgraded to","may replace","may purchase","may be:","may be","may upgrade","may:"],tr=["one of the following:","0-2 of the following","one of the following","any of the following:","up to a total of","up to","for every two","for every three","worth up to","a single"],nr=["any unit of","any unit","any model in the unit","the entire unit","one model","0-1 unit","on a","its","an","a:","a","the","any"],rr=["be a","purchase","be mounted on a","upgrade one model to","have","a","include one","upgrade one","may purchase","replace","be","add","magic items","take"],sr=["","-"],ir=new Parser(Xn);switch(ir.next_token(sr)){case"":{const or=ir.next_token(nr,!0);if(or)switch(or){case"a":case"an":case"0-1 unit":case"any unit of":case"the":case"any":switch(ir.text_upto_token(er)){case"may be upgraded to":case"may be":case"may take":ir.remainder();break;case"may replace":ir.text_upto_token(["with:","with"]),ir.remainder();break;default:ir.text_upto_token(tr),ir.remainder();break}break}const ar=ir.next_token(er);if(ar)switch(ar){case"may replace":ir.text_upto_token(["with:","with"]),ir.remainder();break;case"may have":case"may take":case"may be":case"must take":ir.next_token(tr),ir.text_upto_token(tr),ir.remainder();break;case"may be":ir.next_token(er),ir.remainder();break;case"may be mounted on":case"may be mounted on a:":case"may be upgraded to":case"must be mounted on":ir.remainder();break;case"may purchase":ir.text_upto_token(tr);break;case"may upgrade":ir.text_upto_token(["to an","to a"]),ir.remainder();break}else ir.remainder()}break;case"-":switch(ir.next_token(rr,!0)){case"be a":case"be mounted on a":case"upgrade one model to":case"have":case"be":case"add":ir.remainder();break;default:ir.text_upto_token(tr),ir.remainder();break;case"take":case"purchase":case"may purchase":case"magic items":ir.text_upto_token(tr),ir.remainder();break;case"a":ir.text_upto_token(er),ir.text_upto_token(tr),ir.remainder();break;case"include one":ir.text_upto_token(["for every three","for every two"]),ir.remainder();break;case"upgrade one":ir.text_upto_token(["to"]),ir.remainder();break;case"replace":ir.text_upto_token(["with"]),ir.remainder();break}break}return{tokens:ir.parsed,details:Qn==null?void 0:Qn.trim(),source:ir.source}}function processLines(Zn){const Jn=Zn.split(`
`).map(er=>er.trim());let Xn=[],Qn="";return Jn.forEach(er=>{er.startsWith("-")||er.startsWith("")?(Qn.trim()&&Xn.push(Qn),Qn=er):Qn+=" "+er}),Qn!==""&&Xn.push(Qn),Xn}function parseOptions(Zn){const Xn=processLines(Zn).map(tr=>tr.replace(" // ","....")).filter(tr=>tr&&!tr.includes("Unless")).map(tr=>parseOptionsLine(tr));let Qn=null;const er=[];for(const tr of Xn)tr.tokens[0].text===""?(tr.childs=[],Qn=tr,er.push(tr)):Qn.childs.push(tr),tr.tokens.shift();return er}function toToken(Zn){return Zn.type==="text"?Zn.type:Zn.text}class TokenIterator{constructor(Jn){Zr(this,"tokens");Zr(this,"index",0);Zr(this,"last",[]);this.tokens=Jn}hasTokens(Jn){Jn=Array.isArray(Jn)?Jn:[Jn];for(let Xn=0;Xn<Jn.length;Xn++){const Qn=Jn[Xn],er=this.tokens[Xn+this.index];if(typeof Qn=="string"){if(toToken(er)!==Qn)return!1}else if(!Qn.includes(toToken(er)))return!1}return this.last=this.tokens.slice(this.index,this.index+Jn.length),this.index+=Jn.length,!0}next(){if(this.index>=this.tokens.length)return null;const Jn=this.tokens[this.index];return this.last=[Jn],this.index+=1,Jn}nextAlways(){if(this.index>=this.tokens.length)throw Error("nextAlways failed");return this.next()}maybeNextText(){for(;this.index<this.tokens.length;){const Jn=this.tokens[this.index];if(this.index+=1,Jn.type==="text")return this.last=[Jn],Jn}return null}nextText(){for(;this.index<this.tokens.length;){const Jn=this.tokens[this.index];if(this.index+=1,Jn.type==="text")return this.last=[Jn],Jn}throw Error("nextText failed")}lastText(){for(let Jn=this.last.length-1;Jn>=0;Jn--)if(this.last[Jn].type==="text")return this.last[Jn].text;return null}remaining(){return this.tokens.length-this.index}}function getScope(Zn){return Zn.hasTokens(["any model in the unit"])?{scope:"model",amount:"*"}:Zn.hasTokens(["the entire unit"])?{scope:"unit",amount:"*"}:Zn.hasTokens(["0-1 unit","in your army"])?{scope:"unit",amount:"1"}:Zn.hasTokens(["0-1 unit","text"])?{scope:"unit",amount:Zn.lastText()}:Zn.hasTokens([["any unit of"],"text"])?{scope:Zn.lastText(),amount:"*"}:Zn.hasTokens(["any unit"])?{scope:"unit",amount:"*"}:Zn.hasTokens([["any"],"text"])?{scope:Zn.lastText(),amount:"*"}:Zn.hasTokens([["a","an","the"],"text"])?{scope:Zn.lastText(),amount:"1"}:{scope:"self",amount:"*"}}function getGroupAmount(Zn){const Jn=Zn.nextAlways().text;switch(Jn){case"may:":case"may take:":case"may be":case"may be:":return"*";case"must take":const Xn=Zn.nextAlways().text;return Xn==="one of the following:"||Xn==="one of the following"?"1":(console.warn(`unparsed group (${Jn}) amount`,Xn),null);case"may take":case"may have":{const Qn=Zn.nextAlways().text;return Qn==="one of the following:"||Qn==="one of the following"?"0-1":Qn==="any of the following:"?"*":Qn==="0-2 of the following"?"0-2":(console.warn(`unparsed group (${Jn}) amount`,Qn),"*")}case"may replace":return"1";case"must be mounted on":return Zn.nextAlways(),"1";case"may be mounted on a:":case"may be mounted on":return"0-1";default:return console.warn("unparsed group amount",Jn,Zn),null}}function optionsToGroups(Zn){var er,tr,nr;const Jn=[],Xn=[];for(const rr of parseOptions(Zn)){const sr=new TokenIterator(rr.tokens);if(!rr.childs.length&&!rr.source.endsWith(":")){const{scope:gr,amount:ur}=getScope(sr),dr=toToken(sr.nextAlways()),yr={scope:gr,amount:ur,details:rr.details,source:rr.source};switch(dr){case"text":Xn.push({...yr,what:sr.lastText(),token:dr});break;case"may be":Xn.push({...yr,what:(er=sr.maybeNextText())==null?void 0:er.text,token:dr});break;case"may have":case"may take":case"may be upgraded to":case"may be mounted on":Xn.push({...yr,what:sr.nextText().text,token:dr}),sr.next();break;case"may purchase":Xn.push({...yr,what:sr.nextText().text,token:dr}),sr.nextAlways();break;case"may upgrade":Xn.push({...yr,what:sr.nextText().text,to:(tr=sr.nextText())==null?void 0:tr.text,type:"upgrade"});break;case"may replace":Xn.push({...yr,what:sr.nextText().text,with:sr.nextText().text,type:"replace"});break;default:console.warn("unhandled token",dr)}sr.remaining()&&console.error(`didnt finish parsing (remaining ${sr.remaining()} tokens)`,rr.source);continue}const{scope:ir,amount:or}=getScope(sr),ar=getGroupAmount(sr)||rr.details,cr=sr.last[0].text==="may replace";let lr;cr&&(lr=sr.nextText(),sr.nextAlways());const hr=(nr=sr.next())==null?void 0:nr.text,fr={scope:ir,amount:or,groupAmount:ar,replace:lr,details:rr.details,specification:hr,entries:[],source:rr.source};for(const gr of rr.childs){const ur=new TokenIterator(gr.tokens),dr=toToken(ur.nextAlways()),yr={scope:ir,amount:or,details:gr.details,source:gr.source,parentSource:rr.source};switch(dr){case"text":fr.entries.push({...yr,what:ur.lastText(),details:gr.details,token:dr});break;case"a":case"an":const vr=ur.nextAlways().text;if(lr){fr.entries.push({...yr,what:lr.text,with:vr,type:"replace"});break}fr.entries.push({...yr,what:vr,details:gr.details});break;case"be a":case"be":case"add":case"be mounted on a":case"have":case"take":fr.entries.push({...yr,what:ur.nextText().text,token:dr});break;case"may purchase":case"purchase":fr.entries.push({...yr,what:ur.nextText().text}),ur.nextAlways();break;case"upgrade one":fr.entries.push({...yr,what:ur.nextText().text,to:ur.nextText().text,type:"upgrade"});break;case"upgrade one model to":fr.entries.push({...yr,what:"model",to:ur.nextText().text,type:"upgrade"});break;case"include one":fr.entries.push({...yr,what:ur.nextText().text,for:ur.nextText().text,type:"include"});break;case"replace":fr.entries.push({...yr,what:ur.nextText().text,with:ur.nextText().text,type:"replace"});break;case"magic items":ur.nextAlways(),fr.entries.push({...yr,what:"magic items"});break;default:console.warn("unhandled token",dr),ur.remaining()&&console.error(`didnt finish parsing (remaining ${ur.remaining()} tokens)`,gr.source)}sr.remaining()&&console.error(`didnt finish parsing (remaining ${sr.remaining()} tokens)`,rr.source)}fr.entries=fr.entries.map(gr=>removeUndefineds(gr)),fr.groupAmount==="*"?Xn.push(...fr.entries):Jn.push(removeUndefineds(fr))}return Xn.forEach(rr=>removeUndefineds(rr)),{groups:Jn,entries:Xn}}function parseUnitText(Zn){function Jn(gr){return gr[gr.length-1]}function Xn(gr){return gr.replace(/,\s*\n\s*/g,", ")}const Qn=Xn(Zn.replaceAll("\r",`
`)).split(`
`).filter(gr=>gr).join(`
`);function er(gr){const ur=/(.*?)(Troop Type:.*)$/s,dr=gr.match(ur);return dr?[dr[1],dr[2]]:gr.includes("Points")&&gr.includes("WS")?[gr,""]:["",gr]}const[tr,nr]=er(Qn),rr={Subheadings:{},Name:"",Profiles:[],Points:null,ProfilesText:tr},sr=tr.split(`
`).filter(gr=>!gr.includes("Points")&&!gr.includes("WS"));for(const gr of sr){const ur=gr.replace(/\s+/g," ").trim().split(" ");ur.length<10||rr.Profiles.push({Stats:{Points:ur.pop(),Ld:ur.pop(),A:ur.pop(),I:ur.pop(),W:ur.pop(),T:ur.pop(),S:ur.pop(),BS:ur.pop(),WS:ur.pop(),M:ur.pop()},Name:ur.join(" ")})}const ir=nr.split(`
`).filter(gr=>gr);let or="preSpecialRules",ar=nr;const cr=[],lr=[];for(let gr=0;gr<ir.length;gr++){const ur=ir[gr];if(ur.startsWith("Special Rules:")){or="specialRules";continue}else if(or==="specialRules"){if(ur.startsWith(""))continue;ar=ir.slice(0,gr).join(`
`),or="afterSpecialRules"}if(or!=="preSpecialRules"){if(ur.includes(" R ")&&ur.includes(" S ")&&ur.includes(" AP ")){or="weaponsTable",cr.push({rows:[]});continue}else ur.startsWith("Notes:")?or="notes":or==="afterSpecialRules"&&(or="specialRuleDefinitions");if(or==="weaponsTable"&&ur){const dr=Jn(cr),[yr,vr,_r,kr,Cr]=ur.replace(/\s{2,}/g,"  ").split("  ");dr.rows.push({Name:yr,Stats:{R:vr,S:_r,AP:kr,"Special Rules":Cr,Notes:""}})}if(or==="notes"){const dr=Jn(cr),yr=Jn(dr.rows);yr.Stats.Notes&&(yr.Stats.Notes+=ur)}if(or==="specialRuleDefinitions")if(ur.match(/^[A-Z][a-z]*(?:\s[A-Z][a-z]*)*$/))lr.push({name:ur,description:""});else{const dr=Jn(lr);dr.description=`${dr.description} ${ur}`.trim()}}}const hr=/(?:^|\n)([A-Za-z\s]+):\s*(.*?)(?=\n[A-Za-z\s]+:|$)/gs;return[...ar.matchAll(hr)].forEach(gr=>{const ur=gr[1].trim()+":",dr=gr[2].trim();rr.Subheadings[ur]=dr}),lr.length&&(rr["Special Rules"]=lr),rr}function cmpItems(Zn,Jn){return Zn.toLowerCase().replace(/s/g,"")===Jn.toLowerCase().replace(/s/g,"")}function findProfile(Zn,Jn){var Xn,Qn;return Jn.comment?(Xn=Zn.sharedProfiles)==null?void 0:Xn.find(er=>er.comment===Jn.comment&&er.typeName===Jn.typeName):(Qn=Zn.sharedProfiles)==null?void 0:Qn.find(er=>er.name===Jn.name&&er.typeName===Jn.typeName)}function findImportedProfile(Zn,Jn,Xn){if(!Jn)return;const Qn=Jn.trim().toLowerCase();for(const er of[Zn,...Zn.imports])for(const tr of er.sharedProfiles||[]){if(!tr.getName())continue;const nr=removeSuffix(tr.getName().trim().toLowerCase()," (x)");if(Qn===nr&&tr.typeName===Xn)return tr}}function findImportedCategory(Zn,Jn){if(!Jn)return;const Xn=Jn.trim().toLowerCase();for(const Qn of[Zn,...Zn.imports])for(const er of Qn.categoryEntries||[])if(Xn===er.name.toLowerCase())return er}function findImportedEntry(Zn,Jn,Xn){const Qn=removeSuffix(Jn.trim().toLowerCase(),"s");if(Qn)for(const er of[Zn,...Zn.imports]){for(const tr of er.sharedSelectionEntries||[])if(tr.getType()===Xn&&tr.name.trim().toLowerCase()===Qn)return tr;for(const tr of er.sharedSelectionEntries||[])if(tr.getType()===Xn&&tr.name.trim().toLowerCase().includes(Qn))return tr}}function findUnitProfile(Zn,Jn,Xn,Qn){var tr,nr;const er=`${Jn}/${Xn}`;return((tr=Zn.sharedProfiles)==null?void 0:tr.find(rr=>rr.comment===er&&rr.typeName===Qn))??((nr=Zn.sharedProfiles)==null?void 0:nr.find(rr=>rr.name===Xn&&rr.typeName===Qn))}function findRootUnit(Zn,Jn){var Xn;return(Xn=Zn.entryLinks)==null?void 0:Xn.find(Qn=>Qn.name===Jn)}function splitSpecialRules(Zn){let Jn=[],Xn=0,Qn=0;for(let er=0;er<Zn.length;er++)Zn[er]==="("?Qn++:Zn[er]===")"?Qn--:Zn.substring(er,er+2)===", "&&Qn===0&&(Jn.push(Zn.substring(Xn,er)),Xn=er+2,er++);return Jn.push(Zn.substring(Xn)),Jn}function getSpecialRules(Zn,Jn,Xn,Qn){const er=Qn?`${Jn}/${Qn}`:Jn,tr={infoLinks:[],name:"Special Rules",hidden:!1,id:id(`${er}/specialRules`)};if(Xn.Subheadings["Special Rules:"]){const nr=parseUnitField(Xn.Subheadings["Special Rules:"]),rr=Qn?getSpecific(nr,Qn):nr.all;if(rr)for(const sr of splitSpecialRules(rr)){const{ruleName:ir,param:or}=parseSpecialRule(sr),ar=findImportedProfile(Zn,ir,"Special Rule");if(!ar){tr.infoLinks.push(toSpecialRuleLink(sr,er,ir||"undefined rulename",or)),console.log(`[SPECIAL RULES] Couldn't find Special Rule from ${er}: ${ir}`);continue}tr.infoLinks.push(toSpecialRuleLink(sr,er,ar.id,or))}}return!Qn&&Xn.Subheadings["Armour Value:"]&&tr.infoLinks.push(getArmourValueProfile(Zn,Jn,Xn.Subheadings["Armour Value:"])),tr}function getArmourValueProfile(Zn,Jn,Xn){const Qn=findImportedProfile(Zn,"Armour Value","Armour");return{name:"Armour Value",hidden:!1,id:id(`${Jn}/armourValue`),type:"profile",targetId:(Qn==null?void 0:Qn.id)??`Armour Value ${Xn}`,modifiers:[{type:"append",value:`: ${Xn}`,field:"name"}]}}function cmpModel(Zn,Jn){return Zn=Zn.toLowerCase(),Zn=Zn.replace(/ie$/,"y"),Zn=Zn.replace(/men$/,"man"),Zn=Zn.replace(/s/,""),Jn=Jn.toLowerCase(),Jn=Jn.replace(/ie$/,"y"),Jn=Jn.replace(/men$/,"man"),Jn=Jn.replace(/s/,""),Zn===Jn}function cmpModel2(Zn,Jn){return Zn=Zn.toLowerCase(),Zn=Zn.replace(/ie$/,"y"),Zn=Zn.replace(/men$/,"man"),Zn=Zn.replace(/s/,""),Jn=Jn.toLowerCase(),Jn=Jn.replace(/ie$/,"y"),Jn=Jn.replace(/men$/,"man"),Jn=Jn.replace(/s/,""),Zn.includes(Jn)||Jn.includes(Zn)}function getSpecific(Zn,Jn){const Xn=Jn;if(Zn[Jn]){if(Zn[Jn]||(Jn=Jn.replace(/ie$/,"y"),Jn=Jn.replace(/men$/,"man"),Zn[Jn]))return Zn[Jn]}else{const Qn=Xn.replace(/s/g,"");for(const er in Zn){const tr=er.replace(/s/g,"");if(er!=="all"&&(tr.includes(Qn)||Qn.includes(tr)))return Zn[er]}}}function getEquipment(Zn,Jn,Xn,Qn){const er=[],tr=Qn.Subheadings["Equipment:"];if(tr){const nr=parseUnitField(tr),rr=[];nr.all&&rr.push(...parseEquipment(nr.all));const sr=getSpecific(nr,Xn);sr&&rr.push(...parseEquipment(sr));for(const ir of rr){for(const or of splitAnd(ir.text)){let ar=findImportedEntry(Zn,or,"upgrade");if(!ar)if(!ir.details)console.log(`[EQUIPMENT] Couldn't find Entry ${or}`);else continue;er.push(toEquipment(or,`${Jn}/${Xn}`,(ar==null?void 0:ar.id)??or))}if(ir.details)for(const or of splitAnd(ir.details)){let ar=findImportedEntry(Zn,or,"upgrade");ar||console.log(`[EQUIPMENT] Couldn't find Entry(${or}) From: ${ir.text}/${ir.details} ${or}`),er.push(toEquipment((ar==null?void 0:ar.name)??or,`${Jn}/${Xn}`,(ar==null?void 0:ar.id)??or))}}}return er}function getModelEntry(Zn,Jn,Xn,Qn){var fr;const{ruleName:er,param:tr}=parseSpecialRule(Xn.Name),nr=er,rr=findUnitProfile(Zn,Jn,nr,"Model");if(!rr){console.error(`Couldn't find shared profile for ${Jn}/${nr}`);return}const sr=Xn.Stats.Points==="-"?0:Number(Xn.Stats.Points);isNaN(sr)&&console.log(`[MODEL] got a NaN cost in ${Jn}/${nr}`);const ir=`${Jn}/model/${nr}`,or={type:"model",subType:nr.includes("Crew")?"crew":void 0,name:nr,id:id(ir),hidden:!1,infoLinks:[{name:nr,hidden:!1,type:"profile",id:id(`${ir}/profile`),targetId:rr.id}],costs:[{name:"pts",typeId:"points",value:sr}],entryLinks:[],infoGroups:[],profiles:[],selectionEntries:[],selectionEntryGroups:[],constraints:[],categoryLinks:[]};if(tr){const gr=parseInt(tr.replace(/x/,""));or.constraints.push(toMinConstraint(gr,ir),toMaxConstraint(gr,ir))}const ar=((fr=Qn.Subheadings["Base Size:"])==null?void 0:fr.split(", "))||[],cr=getBase(Zn,ar,Xn);if(cr)or.infoLinks.push({name:"Base",hidden:!1,type:"profile",id:id(`${Jn}/${nr}/base`),targetId:cr.id});else{const gr=`[BASE] ${ar}`;or.entryLinks.push(toEntryLink(gr,`${or.name}/bug/base`,gr))}const lr=getEquipment(Zn,Jn,nr,Qn);lr.length&&or.entryLinks.push(...lr);const hr=getSpecialRules(Zn,Jn,Qn,nr);if(hr.infoLinks.length&&or.infoGroups.push(hr),Qn.Subheadings["Troop Type:"]){const gr=Qn.Subheadings["Troop Type:"].replace("(champion)","").replace("(character)","").trim(),ur=findImportedCategory(Zn,gr);ur?or.categoryLinks.push(toCategoryLink(ur,`${Jn}/${or.name}`)):console.error(`Couldn't find imported category ${gr}`)}return or}function getConstraints(Zn,Jn,Xn){function Qn(rr){return{type:"min",value:rr,field:"selections",scope:"parent",shared:!0,id:id(`${Jn}/min`)}}function er(rr){return{type:"max",value:rr,field:"selections",scope:"parent",shared:!0,id:id(`${Jn}/max`)}}const tr=[Qn(parseInt(Xn))],nr=Xn.match(/([0-9]+)[-]([0-9]+)/);return nr?tr.push(er(nr[2])):Xn.endsWith("+")||tr.push(er(parseInt(Xn))),tr}function getBase(Zn,Jn,Xn){function Qn(er){const tr=/(\d+)\s*x\s*(\d+)/i,nr=er.match(tr);return nr?`${nr[1]}x${nr[2]}`:null}if(Jn.length){let er=Jn[0];return Xn.Name.toLowerCase().includes("Crew")&&(er=Jn.find(nr=>nr.includes("crew"))??Jn[0]),er==="N/A"?null:findImportedProfile(Zn,`Base (${Qn(er)})`,"Base")}}function updateProfile(Zn,Jn){const Xn=findProfile(Zn,Jn);return Xn?(isSameCharacteristics(Xn.characteristics,Jn.characteristics)||(Xn.characteristics=Jn.characteristics),Xn):$store.add_node("sharedProfiles",Zn,Jn)}function parseUnitField(Zn){const Jn=Zn.replace(/([\n]|\s)+/g," ");return splitByCenterDot(Jn)}function removePrefix(Zn,Jn){return Zn.startsWith(Jn)?Zn.substring(Jn.length):Zn}function parseEquipment(Zn){const Jn=extractTextAndDetails(Zn);for(const Xn of Jn)if(Xn.details!==null){if(Xn.details.includes("see below")){Xn.details=null;continue}if(Xn.details.includes("see page")){Xn.details=null;continue}Xn.details.startsWith("counts as ")&&(Xn.details=removePrefix(Xn.details,"counts as "))}return Jn}function commonGroups(Zn,Jn){switch(Zn=Zn.toLowerCase(),Zn){case"magic items":return"Magic Items";case"magic standard":return"Magic Standard";case"daemonic icon":return"Daemonic Icons";case"daemonic gifts":return"Daemonic Gifts";case"vampiric powers":return"Vampiric Powers";case"big name":return"Big Name";default:return Zn.includes("special rule")||Jn!=null&&Jn.includes("special rule")?"Special Rules":Zn.includes("level")?"Wizard Level":Zn.includes("mount")||Jn!=null&&Jn.includes("mount")?"Mount":Zn.includes("daemon")&&Zn.includes("of")?"Special Rules":"Equipment"}}function findModel(Zn,Jn){return Zn.find(Qn=>cmpModel(Qn.name,Jn))??Zn.find(Qn=>cmpModel2(Qn.name,Jn))}function findModels(Zn,Jn){return Zn.filter(Qn=>cmpModel(Qn.name,Jn))??Zn.filter(Qn=>cmpModel2(Qn.name,Jn))}async function modifyUnit(Zn,Jn,Xn){var or,ar,cr,lr,hr,fr,gr,ur,dr,yr,vr;const Qn=Jn.Name,er={type:"unit",import:!0,name:Qn,hidden:!1,profiles:[],selectionEntries:[],selectionEntryGroups:[],infoGroups:[],entryLinks:[],costs:[],constraints:[],categoryLinks:[],id:id(`${Qn}/unit`),collective:!1};if(Jn.Points){const _r=parseInt(Jn.Points);isNaN(_r)&&console.log(`[UNIT] got a NaN cost in Unit ${Qn}`),er.costs.push({name:"pts",typeId:"points",value:_r})}const tr=getSpecialRules(Zn,Qn,Jn);tr.infoLinks.length&&er.infoGroups.push(tr);const nr=toUnitProfile(Qn,Jn);nr&&er.profiles.push(nr),Jn.Profiles.length||console.log(`[UNIT] ${Qn} has no profiles`);const rr=[];for(const _r of Xn.localSelectionsIterator())if(_r.type==="model"){const kr={costs:[],entryLinks:[],infoGroups:[],profiles:[],selectionEntries:[],selectionEntryGroups:[],constraints:[],categoryLinks:[],infoLinks:[],...JSON.parse(_r.toJson())};er.selectionEntries.push(kr),rr.push(kr)}for(const _r of Jn.Profiles||[]){const kr=getModelEntry(Zn,Qn,_r,Jn);kr&&(er.selectionEntries.push(kr),rr.push(kr))}if(!rr.length){notify({text:"Add models entries first",type:"error"});return}if(Jn.Subheadings["Unit Size:"]){const _r=er.selectionEntries[0],kr=Jn.Subheadings["Unit Size:"].trim();if(!kr.match("^[0-9]+[+]?$")&&!kr.match(/([0-9])+[-]([0-9])+/)){const br=`[UNIT SIZE] Unparsed value: ${kr}`;er.entryLinks.push(toEntryLink(br,`${Qn}/bug`,br))}const Cr=getConstraints(Zn,`${Qn}/${_r.name}`,kr);_r.constraints=Cr}else console.log(`[UNIT] ${Qn} has no Unit Size`);if(Jn.Subheadings["Troop Type:"]){if(Jn.Subheadings["Troop Type:"].toLowerCase().includes("character")){const _r=rr[0],kr="7d76-b1a1-1535-a04c";getGroup(_r,"Command",Qn).entryLinks.push(toEntryLink("General",`${Qn}/${_r.name}`,kr))}if(Jn.Subheadings["Troop Type:"].toLowerCase().includes("chariot"))for(const _r of rr.slice(1)){const kr=findImportedCategory(Zn,"CHARIOT CREW");kr?_r.categoryLinks.push(toCategoryLink(kr,`${Qn}/${_r.name}`)):console.error(`Couldn't find imported category ${kr}`)}}const sr=[];if(Jn.Subheadings["Magic:"]){const _r=Jn.Subheadings["Magic:"],kr=_r.split(`
`).map(br=>br.trim()).filter(br=>br.startsWith("")).map(br=>removePrefix(br," ")),Cr=_r.split(`
`).filter(br=>!br.includes("")).map(br=>br.trim()).join(" ");for(const br of Cr.split(".").map(xr=>xr.trim())){if(br.includes("knows")){const $r=br.match(/^(?:A|Every) (.*?) (?:that is a Wizard knows spells|knows spells|knows a spell) from(?: the)? (.*)? Lores? of Magic:?$/i);$r&&sr.push({wizardModel:$r[1],knowsFrom:kr.length?kr:[$r[2]],requiresWizard:br.includes("that is a Wizard"),isWizard:br.includes("Every")});continue}const xr=br.match(/^AN? (.*) is a (.*)$/i);if(xr){const[$r,Mr,Ar]=xr,Rr=Ar.match(/\d+/)[0],mr=findModel(rr,Mr);if(mr){const Fr=`Wizard Level ${Rr}`,qr=findImportedEntry(Zn,Fr,"upgrade"),jr=getGroup(mr,"Wizard Level",`${Qn}/${mr.name}`);jr.constraints=[toMinConstraint(1,`${Qn}/${mr.name}/wizardlevel`),toMaxConstraint(1,`${Qn}/${mr.name}/wizardlevel`)];const es=toEntryLink(Fr,`${Qn}/${mr.name}`,qr==null?void 0:qr.id);jr.entryLinks.push(es),jr.defaultSelectionEntryId=es.id}else console.log([xr[1],xr[2]],"no model")}}}if(Jn.Subheadings["Options:"]){let kr=function(br,xr){if(xr==="replace")return rr;if(br==="self")return[rr[0]];if(br==="unit")return[er];const $r=findModel(rr,br);return $r?[$r]:rr};const _r=optionsToGroups(Jn.Subheadings["Options:"]);console.log("Parsed options",_r);for(const br of _r.groups)for(const xr of kr(br.scope,br.amount)){const $r=`${Qn}/${xr.name}/${br.entries.map(Fr=>Fr.what).join(",")}`,Mr=toGroup("Options",$r),Ar=new Set;for(const Fr of br.entries){const qr=Fr.scope==="unit"&&((or=Fr.details)==null?void 0:or.includes("per model")),jr=Fr.details?qr?"0":parseDetails(Fr.details):0,es=Fr.what;let Xr=Fr.what.replace(/special rule(s)?/,"").replace(/^The /,"");const{ruleName:as,param:Vr}=parseSpecialRule(Xr),zr=toEntry(Xr,`${$r}/${es}`,jr);qr&&zr.modifiers.push(getPerModelCostModifier(Fr.details)),zr.constraints=[toMaxConstraint(1,`${$r}/${es}`)];const ns=findImportedProfile(Zn,as,"Special Rule");if(ns){Ar.add("Special Rule"),zr.infoLinks.push(toSpecialRuleLink(as,`${$r}/${es}/link`,ns==null?void 0:ns.id,Vr)),Mr.selectionEntries.push(zr);continue}const ss=findImportedEntry(Zn,es,"upgrade");if(!ss)console.log("Couldn't import profile",Qn,"/",es);else{for(const ls of(ss==null?void 0:ss.profiles)||[])ls.typeName&&Ar.add(ls.typeName);for(const ls of(ss==null?void 0:ss.infoLinks)||[])(ar=ls.target)!=null&&ar.typeName&&Ar.add(ls.target.typeName)}const ts=toEquipment(es,`${$r}/${es}`,ss==null?void 0:ss.id);(cr=Mr.entryLinks)==null||cr.push(ts),ts.costs=[toCost(jr)],ts.constraints=[],qr&&ts.modifiers.push(getPerModelCostModifier(Fr.details))}const[Rr,mr]=br.groupAmount.split("-");Mr.constraints=[toMinConstraint(Rr,`${$r}`),toMaxConstraint(mr,`${$r}`)],xr.selectionEntryGroups.push(Mr),br.specification?Mr.name=toTitleCase(br.specification).replace(":",""):(console.error(Qn,Ar),Ar.size===1&&Ar.has("Weapon")&&(Mr.name="Weapons"),Ar.size===1&&Ar.has("Armour")&&(Mr.name="Armour"),Ar.size===2&&Ar.has("Weapon")&&Ar.has("Armour")&&(Mr.name="Equipment"),Ar.size===1&&Ar.has("Special Rule")&&(Mr.name="Special Rules"))}const Cr=[];for(const br of _r.entries){const xr=br.scope==="unit"&&((lr=br.details)==null?void 0:lr.includes("per model")),$r=br.details?xr?"0":parseDetails(br.details):0;if(br.type==="upgrade"){const Mr=br.to.replace(" (champion)",""),Ar=findModel(rr,Mr);if(Ar)er.selectionEntries=er.selectionEntries.filter(Rr=>Rr!==Ar);else{if(Mr.includes("musician")){const Rr="40f2-dd77-f0ca-3663",mr=getGroup(er,"Command",Qn),Fr=toEntry("Musician",`${Qn}/command`,br.details);Fr.comment=`upgrades: ${rr[0].id}`,Fr.infoLinks.push(toProfileLink("Musician",`${Qn}/command/profile`,Rr)),Fr.constraints=[toMaxConstraint(1,`${Qn}/command/musician`)],Fr.subType="crew",Fr.type="model",mr.selectionEntries.push(Fr)}else if(Mr.includes("standard bearer")){const Rr="bcf8-d942-102e-b155",mr=getGroup(er,"Command",Qn),Fr=toEntry("Standard Bearer",`${Qn}/command`,br.details);Fr.infoLinks.push(toProfileLink("Standard Bearer",`${Qn}/command/profile`,Rr)),Fr.comment=`upgrades: ${rr[0].id}`,Fr.constraints=[toMaxConstraint(1,`${Qn}/command/standard bearer`)],Fr.type="model",Fr.subType="crew",mr.selectionEntries.push(Fr)}else console.log(`Couldn't find model to upgrade ${Qn}/${Mr}`);continue}Ar.entryLinks=Ar.entryLinks.filter(Rr=>Rr.type!=="selectionEntry"),Ar.selectionEntryGroups=[],Ar.subType="crew",Ar.infoLinks.push(toProfileLink("Champion",`${Qn}/command`,"5f1c-fd04-b0d5-d5e")),Ar.constraints.push(toMaxConstraint(1,`${Qn}/${Ar.name}/champion`)),Ar.comment=`upgrades: ${rr[0].id}`,getGroup(er,"Command",Qn).selectionEntries.push(Ar)}else if(br.type==="replace")for(const Mr of kr(br.scope,br.type)){const Ar=br.what,Rr=Mr.entryLinks.find(es=>cmpItems(es.name,Ar));if(Rr)Mr.entryLinks=Mr.entryLinks.filter(es=>es!==Rr);else{console.warn("Couldn't find weapon to replace",Qn,Mr.name,Ar,"with",br.with);continue}const mr=getGroup(Mr,"Equipment",`${Qn}/${Mr.name}`),Fr=br.with,qr=findImportedEntry(Zn,Fr,"upgrade"),jr=toEquipment((qr==null?void 0:qr.name)??Fr,`${Qn}/${Mr.name}`,qr==null?void 0:qr.id);Rr.constraints=[],br.scope==="unit"&&(Rr.collective=!0,jr.collective=!0,mr.collective=!0,Mr.collective=!0),jr.constraints=[],jr.costs=[toCost(br.details)],xr&&((hr=jr.modifiers)==null||hr.push(getPerModelCostModifier(br.details,`${Qn}/${Mr.name}/${Fr}`))),br.amount!=="*"&&jr.constraints.push(toMaxConstraint(br.amount,`${Qn}/${Mr.name}/equipment/${br.scope}`,"roster")),mr.defaultSelectionEntryId=Rr.id,mr.entryLinks.push(Rr),mr.entryLinks.push(jr),mr.constraints=[toMinConstraint(1,`${Qn}/${Mr.name}/equipment`),toMaxConstraint(1,`${Qn}/${Mr.name}/equipment`)]}else{const Mr=br.what;if(!Mr){console.error(Qn,br,"no name");continue}const Ar=commonGroups(Mr,br.token);for(const Rr of kr(br.scope,br.amount))switch(Ar){case"Equipment":const mr=getGroup(Rr,Ar,`${Qn}/${Rr.name}`),Fr=findImportedEntry(Zn,Mr,"upgrade");Fr||console.log("Couldn't import profile",Qn,"/",Mr,br.token,br);const qr=toEquipment((Fr==null?void 0:Fr.name)??Mr,`${Qn}/${Rr.name}`,Fr==null?void 0:Fr.id);qr.costs=[toCost($r)],qr.constraints=[toMaxConstraint(1,`${Qn}/${Rr.name}/${Mr}`)],xr&&((fr=qr.modifiers)==null||fr.push(getPerModelCostModifier(br.details,`${Qn}/${Rr.name}/${Mr}`))),br.amount!=="*"&&qr.constraints.push(toMaxConstraint(1,`${Qn}/${Rr.name}/${Mr}/roster`,"roster")),(gr=mr.entryLinks)==null||gr.push(qr);break;case"Magic Items":case"Vampiric Powers":case"Daemonic Icons":case"Big Name":case"Daemonic Gifts":const jr={"Magic Items":"1539-fd78-88f-badd","Daemonic Icons":"e5a3-889f-31ed-d42f","Daemonic Gifts":"ce0c-2efd-59ad-f802","Big Name":"b8ce-a2e-453d-d59e","Vampiric Powers":"a88c-1e61-583f-2bab"},es=toGroupLink(Ar,`${Qn}/${Rr.name}`,jr[Ar]);parseDetails(br.details)&&es.constraints.push({type:"max",value:parseDetails(br.details),field:"points",scope:"parent",shared:!1,id:id(`${Qn}/${Rr.name}/${Ar}/max`)}),Rr.entryLinks.push(es);break;case"Wizard Level":const Xr=getGroup(Rr,Ar,`${Qn}/${Rr.name}`),Vr=`Wizard Level ${br.what.match(/\d+/)[0]}`,zr=findImportedEntry(Zn,Vr,"upgrade"),ns=toEntryLink(Vr,`${Qn}/${Rr.name}`,zr==null?void 0:zr.id);ns.costs=[toCost(br.details)],Xr.constraints||(Xr.constraints=[toMaxConstraint(1,`${Qn}/${Rr.name}/wizardlevel`)]),Xr.entryLinks.push(ns);break;case"Magic Standard":Cr.push(br);break;case"Mount":(ur=Rr.entryLinks)==null||ur.push(toEntryLink(`${br.token} ${br.what}`,`${Qn}/${Rr.name}`,`${br.token} ${br.what}`));break;case"Special Rules":const ss=getGroup(Rr,Ar,`${Qn}/${Rr.name}`);let ts=br.what.replace(/special rule(s)?/,"");ts=ts.replace("\x07 ",""),ts=ts.replace("\x07","");const{ruleName:ls,param:Gr}=parseSpecialRule(ts),Yr=toEntry(ts,`${Qn}/${Rr.name}`,$r);if(Yr.constraints=[toMaxConstraint(1,`${Qn}/${Rr.name}/${ls}`)],xr&&((dr=Yr.modifiers)==null||dr.push(getPerModelCostModifier(br.details,`${Qn}/${Rr.name}/${ls}`))),br.amount!=="*")if(br.amount==="per 1,000 points"){const is=toMaxConstraint(0,`${Qn}/${Rr.name}/${ls}/roster`,"roster");Yr.constraints.push(is);const us={type:"increment",value:1,field:is.id,repeats:[{value:1e3,repeats:1,field:"limit::points",scope:"roster",childId:"any",shared:!0,roundUp:!1}]};Yr.modifiers.push(us)}else{const is=toMaxConstraint(br.amount,`${Qn}/${Rr.name}/${ls}/roster`,"roster");Yr.constraints.push(is)}const Qr=findImportedProfile(Zn,ls,"Special Rule");if(!Qr){console.log(`[SPECIAL RULES] Couldn't find Special Rule: ${ls}`);continue}Yr.infoLinks.push(toSpecialRuleLink(ls,`${Qn}/${Rr.name}`,Qr.id,Gr)),ss.selectionEntries.push(Yr);break}}}if(Cr.length){const br="6bbe-8054-19b7-e5d6",xr=Cr[0],Mr=(yr=getGroup(er,"Command",`${Qn}/command`).selectionEntries)==null?void 0:yr.find(Rr=>Rr.name==="Standard Bearer"),Ar=toGroupLink("Magic Standard",`${Qn}/command`,br);Ar.constraints=[{type:"max",value:parseDetails(xr.details),field:"points",scope:"parent",shared:!1,id:id(`${Qn}/command/magic standard/max`)}],xr.amount==="per 1,000 points"&&Mr.entryLinks.push(toEntryLink("Magic Standard per 1,000 points",`${Qn}/command/standard/bug`)),Mr.entryLinks.push(Ar)}if(sr.length)for(const{wizardModel:br,knowsFrom:xr,requiresWizard:$r}of sr){const Mr=findModels(rr,br),Ar=Mr.length?Mr:rr;for(const Rr of Ar){const mr=getGroup(Rr,"Lores of Magic",`${Qn}/${Rr==null?void 0:Rr.name}`);mr.constraints=[toMinConstraint(1,`${Qn}/${Rr.name}/lores of magic`),toMaxConstraint(1,`${Qn}/${Rr.name}/lores of magic`)];for(const Fr of xr){const qr=findImportedEntry(Zn,Fr,"upgrade"),jr=toEntryLink(Fr,`${Qn}/${Rr==null?void 0:Rr.name}`,(qr==null?void 0:qr.id)??Fr);mr.entryLinks.push(jr)}mr.modifiers.push({comment:"Hide if not a wizard",type:"set",value:!0,field:"hidden",conditions:[{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"7d84-39e9-a5f-947e",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"8e47-73e8-f7f9-808",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"59f1-ac46-8123-3f8d",shared:!0},{type:"equalTo",value:0,field:"selections",scope:"parent",childId:"50bd-b918-574a-60c3",shared:!0}]})}}}const ir=[];if((vr=Jn.Subheadings["Troop Type:"])!=null&&vr.includes("character"))for(const _r of rr){const kr={...er,name:_r.name,id:id(`character/${_r.name}`),profiles:[],selectionEntries:[],infoGroups:[]},Cr=er.selectionEntries.find(xr=>xr.name===_r.name);kr.selectionEntries.push(Cr),er.selectionEntries.length>rr.length&&console.error("CHARACTER BUG",Qn);for(const xr of er.infoGroups){const $r=JSON.parse(JSON.stringify(xr));$r.id+=`/${_r.name}`;for(const Mr of $r.infoLinks)Mr.id+=`/${_r.name}`;kr.infoGroups.push($r)}const br=toUnitProfile(_r.name,Jn);br&&kr.profiles.push(br),ir.push(kr)}else ir.push(er);console.log("Adding",ir),await $store.remove();for(const _r of ir){const kr=findRootUnit(Zn,_r.name);kr&&$store.del_node(kr);const Cr=await $store.create_child("sharedSelectionEntries",Zn,_r),br={import:!0,name:_r.name,hidden:!1,id:id(`${_r.name}/root`),type:"selectionEntry",targetId:Cr==null?void 0:Cr.id,categoryLinks:[]};$store.add_node("entryLinks",Zn,br)}}const pasteEquipment={name:"[TOW 3] Paste Unit Profiles & Equipment & Options",hooks:{async paste(Zn,Jn){await $catalogue.manager.loadAll(),$catalogue.manager.getAllLoadedCatalogues().map(Qn=>Qn.processForEditor());const Xn=$store.get_selected();if((Jn.includes("Options:")||Jn.includes("Equipment:")||Jn.includes("WS")&&Jn.includes("Points"))&&Xn){if(Xn.parentKey!=="sharedSelectionEntries"){notify({text:"Select a (top-level) sharedSelectionEntry",type:"error"});return}const Qn=parseUnitText(Jn);Qn.Name=Xn.getName(),console.log(Qn);for(const er of Qn["Special Rules"]||[]){const tr=toSpecialRule(removeSuffix(er.name," (X)"),er.description);updateProfile(Xn.catalogue,tr)}for(const er of Qn.Profiles||[]){parseSpecialRule(er.Name);const tr=toModelProfile(er,Qn.Name);updateProfile(Xn.catalogue,tr)}await modifyUnit(Xn.catalogue,Qn,Xn)}return null}}};let count=0;const useScriptsStore=defineStore("scripts",{state:()=>({hooks:{}}),actions:{async get_scripts(Zn){if(!(Zn!=null&&Zn.gameSystem))return[];try{const Jn=getDataObject(Zn.gameSystem).fullFilePath;if(!Jn)return[];const Xn=[],Qn=`${dirname(Jn)}/scripts`;for(const er of await getFolderFiles(Qn))try{if(!er.path.endsWith(".js"))continue;const tr=reactive({path:er.path}),nr=async rr=>{try{if(!await readFile(rr))return;const ir=await __vitePreload(()=>import(er.path+`?v=${count++}`),[],import.meta.url);for(const or in ir.default)tr[or]=ir.default[or];delete tr.error}catch(sr){console.error(sr),tr.error=sr}};nr(er.path),watchFile(er.path,nr),Xn.push(tr)}catch(tr){console.error(tr);continue}return Xn}catch{return[]}},get_default_scripts(){const Zn=[];return Zn.push(pasteSpecialRule),Zn.push(pasteWeapons),Zn.push(pasteEquipment),[fixlinknames,fixprofiles,listrefs,select,listautomaticrefs,...electron?[]:Zn]},async emit(Zn,...Jn){for(const Xn of Object.values(this.hooks[Zn]||{}))try{await Xn(...Jn)}catch{continue}},async run_hooks(Zn,Jn,Xn){for(const Qn of Object.values(this.hooks[Zn]||{}))try{const er=await Qn(Jn,Xn);if(er)return er;if(er===null)return null}catch{continue}return Xn},add_hook(Zn,Jn,Xn){this.hooks[Zn]||(this.hooks[Zn]={}),this.hooks[Zn][Jn]=Xn},add_script_hooks(Zn){for(const[Jn,Xn]of Object.entries(Zn.hooks||{}))typeof Xn=="function"&&this.add_hook(Jn,Zn.name,Xn)}}}),enableGithubIntegrationWithGitFolder=!1;function get_ctx(Zn){return Zn.vnode}function get_base_from_vue_el(Zn){if(Zn instanceof Base)return Zn;const Jn=Zn.$parent;if(Jn.item)return Jn.item;const Xn=Jn.$parent;return Xn.item?Xn.item:Xn.$parent.item}function markSaving(Zn){Zn.isSaving=!0}function markChangedOnDisk(Zn){if(Zn.isSaving){Zn.isSaving=!1;return}Zn.isChangedOnDisk=!0}function unmarkChangedOnDisk(Zn){Zn.isChangedOnDisk&&(Zn.isChangedOnDisk=!1),Zn.isSaving===void 0&&(Zn.isSaving=!1)}const editorFields=new Set(["select","showInEditor","showChildsInEditor"]),useEditorStore=defineStore("editor",{state:()=>({selections:[],selectedEntries:[],selectedElementGroup:null,selectedElement:null,selectedItem:null,filter:"",filterRegex:RegExp(""),filtered:[],undoStack:[],undoStackPos:-1,historyStack:[],historyStackPos:0,clipboard:[],mode:"edit",clipboardmode:"json",gameSystems:{},gameSystemsLoaded:!1,unsavedChanges:{},unsavedCount:0,scripts:useScriptsStore()}),actions:{async create_system(Zn,Jn,Xn){console.log("Creating system with name:",Zn);const Qn=`sys-${generateBattlescribeId()}`,er=this.get_system(Qn),tr=Jn?`${removeSuffix$1(Jn.replaceAll("\\","/"),"/")}/${Zn}`:"";if(electron){if(!tr)throw new Error("No folder specified");createFolder(tr)}const nr={gameSystem:{id:Qn,name:Zn,battleScribeVersion:"2.03",revision:1,categoryEntries:[{name:"Default Category",id:"default-category"}],forceEntries:[{name:"Default Force",hidden:!1,id:"default-force",categoryLinks:[{name:"Default Category",hidden:!1,id:"default-force-category-link",targetId:"default-category"}]}],selectionEntries:[{type:"upgrade",import:!0,name:"Default Root Entry",hidden:!1,id:"default-entry",categoryLinks:[{targetId:"default-category",id:"default-category-link",primary:!0,name:"Default Category",hidden:!1}]}]}};return tr&&(nr.gameSystem.fullFilePath=`${tr}/${Zn}.${Xn||"gst"}`),er.setSystem(nr),this.get_catalogue_state(nr).incremented=!0,this.saveCatalogue(nr),er},saveCatalogueInDb(Zn){const Jn=rootToJson(Zn);!!!Zn.gameSystemId?db.systems.put({content:JSON.parse(Jn),path:Zn.fullFilePath,id:Zn.id}):db.catalogues.put({content:JSON.parse(Jn),path:Zn.fullFilePath,id:`${Zn.gameSystemId}-${Zn.id}`})},async saveCatalogueInFiles(Zn){const Jn=Zn.fullFilePath;if(!Jn){console.error(`No path included in the catalogue ${Zn.name} to save at`);return}const Xn=getExtension(Jn);if(Jn.endsWith(".json")){const Qn=rootToJson(Zn);await writeFile(Jn,Qn)}else{const Qn=convertToXml(Zn),er=isZipExtension(Xn),nr=filename(Jn).replace(".gstz",".gst").replace(".catz",".cat"),rr=er?await zipCompress(nr,Qn,"uint8array"):Qn;await writeFile(Jn,rr)}},saveCatalogue(Zn){const Jn=this.get_catalogue_state(Zn),Xn=getDataObject(Zn);markSaving(Jn),electron?this.saveCatalogueInFiles(Xn):this.saveCatalogueInDb(Xn),unmarkChangedOnDisk(Jn)},async load_systems_from_folder(Zn,Jn){var rr,sr;if(!globalThis.electron)throw new Error("Not running in electron");const Xn=await getFolderFiles(Zn);if(!(Xn!=null&&Xn.length))return;console.log("Loading",Xn.length,"files");const Qn=[],er=[],tr=[],nr=Xn.filter(ir=>isAllowedExtension(ir.name));for(const ir of nr)try{Jn&&await Jn(er.length,nr.length,ir.path);const or=await convertToJson(ir.data,ir.name.endsWith("json")?"json":"xml");if(!or.catalogue&&!or.gameSystem)continue;const ar=getDataObject(or);ar.fullFilePath=ir.path.replaceAll("\\","/");const cr=(rr=or==null?void 0:or.gameSystem)==null?void 0:rr.id,lr=(sr=or==null?void 0:or.catalogue)==null?void 0:sr.id;if(cr){const hr=this.get_system(cr);hr.setSystem(shallowReactive(or)),tr.push(hr),Qn.push(cr)}if(lr){const hr=this.get_system(or.catalogue.gameSystemId);hr.catalogueFiles[lr]=shallowReactive(or)}er.push(or)}catch(or){console.error(`Error loading ${ir.name}`,or)}Jn&&await Jn(er.length,nr.length);for(const ir of tr)Jn&&await Jn(0,0,"Checking for github integration"),await this.load_system(ir);return Qn},async load_systems_from_db(Zn=!1){if(!this.gameSystemsLoaded&&!Zn){this.gameSystemsLoaded=!0;let Jn=await db.systems.offset(0).keys();for(let Xn of Jn)Xn in this.gameSystems||this.load_system_from_db(Xn)}},async load_system_from_db(Zn){const Jn=await db.systems.get(Zn),Xn=Jn==null?void 0:Jn.content;if(!Xn)throw new Error("System not found "+Zn);Xn.gameSystem.fullFilePath||(Xn.gameSystem.fullFilePath=Jn.path);const Qn=await db.catalogues.where({"content.catalogue.gameSystemId":Zn}),er=this.get_system(Xn.gameSystem.id);er.setSystem(Xn);for(let{content:tr,path:nr}of await Qn.toArray()){const rr=tr.catalogue.id;tr.catalogue.fullFilePath||(tr.catalogue.fullFilePath=nr),er.catalogueFiles[rr]=shallowReactive(tr)}this.load_system(er,!0)},async load_system(Zn,Jn=!1){var Xn,Qn;if(Zn.gameSystem){const er=useCataloguesStore();if(await Zn.unloadAll(),!Jn)for(const sr of Zn.getAllCatalogueFiles()){const ir=this.get_catalogue_state(sr);ir&&(ir.changed=!1,ir.unsaved=!1,ir.isChangedOnDisk=!1),er.updateCatalogue(getDataObject(sr)),er.setEdited(getDataObject(sr).id,!1)}const tr=Zn.gameSystem.gameSystem.publications,nr=tr==null?void 0:tr.find(sr=>{var ir;return((ir=sr.name)==null?void 0:ir.trim().toLowerCase())==="github"}),rr=Zn.gameSystem.gameSystem.fullFilePath;if(rr&&enableGithubIntegrationWithGitFolder)try{const sr=await getFolderRemote(dirname(rr));sr&&sr!=="origin"&&(console.log("remote:",sr),Zn.github={...parseGitHubUrl(sr),discovered:!0})}catch(sr){console.error(sr)}nr&&nr.publisherUrl&&(Zn.github={githubUrl:nr.publisherUrl},nr.shortName&&nr.shortName.includes("/")&&(Zn.github.githubRepo=nr.shortName,Zn.github.githubOwner=(Xn=nr.shortName)==null?void 0:Xn.split("/")[0],Zn.github.githubName=(Qn=nr.shortName)==null?void 0:Qn.split("/")[1]))}for(const er of Zn.getAllCatalogueFiles()){const tr=getDataObject(er);tr.fullFilePath&&watchFile(tr.fullFilePath,()=>{this.on_file_changed(er)})}},on_file_changed(Zn){console.log(getDataObject(Zn).name,"changed"),markChangedOnDisk(this.get_catalogue_state(Zn))},async get_or_load_system(Zn){return Zn in this.gameSystems||(this.gameSystems[Zn]=new GameSystemFiles,await this.load_system_from_db(Zn)),this.gameSystems[Zn]},get_system(Zn){if(!(Zn in this.gameSystems)){const Jn=new GameSystemFiles;Jn.settings=useSettingsStore(),this.gameSystems[Zn]=Jn}return this.gameSystems[Zn]},delete_system(Zn){delete this.gameSystems[Zn]},get_catalogue_state(Zn){const Jn=getDataDbId(Zn);return this.unsavedChanges[Jn]||(this.unsavedChanges[Jn]={changed:!1,unsaved:!1}),this.unsavedChanges[Jn]},set_catalogue_changed(Zn,Jn=!0){const Xn=this.get_catalogue_state(Zn);Jn?(Xn.changed=!0,Xn.unsaved||(this.unsavedCount+=1,Xn.unsaved=Jn)):Xn.unsaved=Jn},changed(Zn){const Jn=Zn.getCatalogue();Jn&&this.set_catalogue_changed(Jn)},removed(Zn){const Jn=Zn.getCatalogue();Jn&&this.set_catalogue_changed(Jn)},async save_catalogue(Zn,Jn,Xn){const Qn=this.get_catalogue_state(Jn),er=Jn.revision;Xn==="github"&&Zn.github&&(Jn.revision=await getNextRevision(Zn.github,Jn)),Xn==="yes"&&!(Qn!=null&&Qn.incremented)&&(Jn.revision=Jn.revision?Jn.revision+1:1,Qn.incremented=!0),Xn==="no"&&(Qn.incremented=!0),this.saveCatalogue(Jn);const tr=useCataloguesStore(),nr=getDataDbId(Jn);return tr.updateCatalogue(Jn),tr.setEdited(nr,!0),Qn!=null&&Qn.unsaved&&(this.unsavedCount--,Qn.unsaved=!1),Jn.revision!==er},async prompt_revision(Zn){const Jn=useSettingsStore(),Xn=Zn instanceof Catalogue?Zn.manager:Zn;for(const Qn of Zn instanceof Catalogue?[Zn]:Xn.getAllLoadedCatalogues()){const er=this.get_catalogue_state(Qn);if(er!=null&&er.unsaved&&!er.incremented)return Xn.github?Jn.githubAutoIncrement&&!navigator.onLine?await(globalThis.customPrompt&&globalThis.customPrompt({html:`<span>Would you like to increase the revision of this catalogue?<span><br/>
  <span class="gray">Note: This is shown because Github cannot be accessed as your are offline</span>`,cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no":Jn.githubAutoIncrement?"github":await(globalThis.customPrompt&&globalThis.customPrompt({html:"<span>Would you like to increase the revision of this catalogue?<span><br/>",cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no":await(globalThis.customPrompt&&globalThis.customPrompt({html:`<span>Would you like to increase the revision of this catalogue?<span><br/>
  <span class="gray">Note: You can enable automatic revision increments by integrating with GitHub.<br/>This can be achieved by adding a publication in the GameSystem named "GitHub" with the repository's GitHub URL as the Publication URL.`,cancel:"No",accept:"Yes",id:"revision"}))?"yes":"no"}},async save_all(Zn){var Qn,er,tr;let Jn=!1,Xn=0;useSettingsStore();try{for(const nr of Object.values(this.gameSystems)){if(Zn&&((er=(Qn=nr.gameSystem)==null?void 0:Qn.gameSystem)==null?void 0:er.id)!==Zn)continue;const rr=await this.prompt_revision(nr);for(const sr of nr.getAllLoadedCatalogues())(tr=this.get_catalogue_state(sr))!=null&&tr.unsaved&&await this.save_catalogue(nr,sr,rr)&&(Xn+=1)}}catch(nr){notify({text:`Failed to save: ${nr.name}: ${nr.message}`,type:"error"}),Jn=!0}return Xn&&notify(`Incremented ${Xn} catalogue's revision`),Jn},set_filter(Zn){this.$state.filter=Zn,this.filterRegex=textSearchRegex(Zn)},init(Zn){this.catalogueComponent=Zn,globalThis.$store=this},rerender_catalogue(){this.catalogueComponent&&(this.catalogueComponent.key+=1)},unselect(Zn){const Jn=[],Xn=[];for(const tr of this.selections)Zn===void 0||toRaw(tr.obj)===toRaw(Zn)?Xn.push(tr):Jn.push(tr);const Qn=[],er=[];for(const tr of this.selectedEntries)Zn===void 0||toRaw(tr.obj)===toRaw(Zn)?er.push(tr):Qn.push(tr);this.selections=Jn,this.selectedEntries=Qn;for(const tr of[...Xn,...er])tr.onunselected&&tr.onunselected(),tr.obj===this.selectedItem&&(this.selectedItem=null)},is_selected(Zn){return Zn instanceof Base?this.selectedEntries.find(Jn=>Jn.obj===Zn)!==void 0:this.selections.find(Jn=>Jn.obj===Zn)!==void 0},select(Zn,Jn,Xn){this.is_selected(Zn)||(Zn instanceof Base?this.selectedEntries.push({obj:Zn,onunselected:Jn,payload:Xn}):this.selections.push({obj:Zn,onunselected:Jn,payload:Xn}))},do_select(Zn,Jn){this.selectedElementGroup;const Xn=this.selectedElement;if(this.selectedElement=Jn,Zn!=null&&Zn.shiftKey){const Qn=Jn.depth,er=Jn.$el.closest(`.collapsible-box.depth-${Qn-1}`),nr=[...(er==null?void 0:er.getElementsByClassName(`collapsible-box depth-${Qn}`))||[]].map(ar=>ar.vnode),rr=nr.findIndex(ar=>ar===toRaw(Xn)),sr=nr.findIndex(ar=>ar===toRaw(this.selectedElement)),ir=Math.min(rr,sr),or=Math.max(rr,sr);for(let ar=ir;ar<=or;ar++)nr[ar].select();return}!(Zn!=null&&Zn.ctrlKey)&&!(Zn!=null&&Zn.metaKey)&&this.unselect(),Zn!=null&&Zn.ctrlKey&&this.is_selected(Jn)?this.unselect(Jn):(Jn.select(),this.selectedItem=Jn,this.mode="edit")},do_rightclick_select(Zn,Jn){this.is_selected(Jn)||this.do_select(Zn,Jn)},clear_selections(){this.unselect()},get_selections(){const Zn=this.selections.map(Jn=>get_base_from_vue_el(Jn.obj));return this.selectedEntries.forEach(Jn=>Zn.push(Jn.obj)),Zn},get_selections_with_payload(){const Zn=this.selections.map(Jn=>({obj:get_base_from_vue_el(Jn.obj),payload:Jn.payload}));return this.selectedEntries.forEach(Jn=>Zn.push({obj:Jn.obj,payload:Jn.payload})),Zn},get_selected(){return this.selectedItem&&get_base_from_vue_el(this.selectedItem)},set_selections(Zn){this.clear_selections();const Jn=Array.isArray(Zn)?Zn:[Zn];this.selectedEntries=Jn.map(Xn=>({obj:Xn,onunselected:()=>null}))},toggle_selections(){const Zn=this.get_selections();if(this.filter&&Zn.find(Jn=>!Jn.showChildsInEditor))Zn.forEach(Jn=>this.show(Jn,!1));else{const Jn=this.selections.map(Xn=>Xn.obj);Jn.find(Xn=>Xn.collapsed===!0)?Jn.filter(Xn=>Xn.collapsed===!0).forEach(Xn=>Xn.open()):Jn.filter(Xn=>Xn.collapsed===!1).forEach(Xn=>Xn.close())}},async do_action(Zn,Jn,Xn){let Qn;try{Qn=await Xn()}catch(er){console.error(er);return}if(this.undoStackPos<this.undoStack.length){const er=this.undoStack.length-this.undoStackPos-1;this.undoStack.splice(this.undoStackPos+1,er,{type:Zn,undo:Jn,redo:Xn})}else this.undoStack.push({type:Zn,undo:Jn,redo:Xn});return this.undoStackPos+=1,Qn},async set_clipboard(Zn,Jn){if(this.clipboardmode==="json"){const Xn=Zn.map(er=>({parentKey:er.parentKey,...er,sortIndex:void 0})),Qn=entriesToJson(Xn,new Set(["parentKey"]),{forceArray:!1,formatted:!0});Jn!=null&&Jn.clipboardData?Jn.clipboardData.setData("text/plain",Qn):await navigator.clipboard.writeText(Qn)}else this.clipboard=Zn},async get_clipboard(Zn){if(this.clipboardmode==="json")if(Zn!=null&&Zn.clipboardData){const Jn=Zn.clipboardData.getData("text/plain");if(!Jn)return[];try{return JSON.parse(Jn)}catch{return Jn}}else{const Jn=await navigator.clipboard.readText();try{return JSON.parse(Jn)}catch{return Jn}}return this.clipboard},can_undo(){return!!this.undoStack[this.undoStackPos]},async undo(){if(!this.can_undo())return;const Zn=this.undoStack[this.undoStackPos];Zn&&(await Zn.undo(),this.undoStackPos--)},can_redo(){return!!this.undoStack[this.undoStackPos+1]},async redo(){if(!this.can_redo())return;const Zn=this.undoStack[this.undoStackPos+1];Zn&&(await Zn.redo(),this.undoStackPos++)},async cut(Zn){await this.set_clipboard(this.get_selections(),Zn),this.remove()},async copy(Zn,Jn){const Xn=Jn?Array.isArray(Jn)?Jn:[Jn]:this.get_selections();await this.set_clipboard(Xn,Zn)},async paste(Zn){const Jn=await this.get_clipboard(Zn),Xn=await this.scripts.run_hooks("paste",{},Jn);Xn&&this.add(Xn)},async pasteLink(){const Zn=await this.get_clipboard();if(!Zn||!Zn.parentKey||Array.isArray(Zn))return;const Xn=this.get_selections()[0];if(!Xn)return;const Qn=Xn.getCatalogue().findOptionById(Zn.id);if(Qn){const er={parentKey:Qn.isGroup()||Qn.isEntry()?"entryLinks":"infoLinks",targetId:Qn.id,id:generateBattlescribeId(),type:Qn.editorTypeName,name:Qn.getName(),hidden:Qn.hidden,select:!0};this.add(er)}},async duplicate(){const Zn=this.get_selections();if(!Zn.length)return;const Jn=Zn[0].getCatalogue(),Xn=Jn.getSystemId();let Qn=[];const er=()=>{Qn=[];for(const nr of Zn){const rr=JSON.parse(entryToJson(nr,editorFields));if(!nr.parent)continue;const sr=nr.parent[nr.parentKey];if(!Array.isArray(sr))throw new Error(`Couldn't duplicate: parent[${nr.parentKey}] is not an array`);setPrototypeRecursive({[nr.parentKey]:rr}),scrambleIds(Jn,rr),sr.push(rr),onAddEntry(rr,Jn,nr.parent,this.get_system(Xn)),Qn.push(rr),this.changed(rr)}},tr=()=>{for(const nr of Qn)popAtEntryPath(Jn,getEntryPath(nr)),this.removed(nr),onRemoveEntry(nr)};await this.do_action("dupe",tr,er)},remove(Zn){let Jn=[];if(Zn)for(const sr of Array.isArray(Zn)?Zn:[Zn])Jn.push(sr);else{const sr=this.get_selections();if(!sr.length)return;for(const ir of sr)Jn.push(ir)}const Xn=Jn[0].getCatalogue(),Qn=Xn.getSystemId();let er=[],tr=[];const nr=async()=>{const sr=Jn,ir=this.get_system(Qn);tr=[],er=[];for(const or of sr){const ar=getEntryPath(or),cr=popAtEntryPath(Xn,ar);tr.push(cr),er.push(ar),this.removed(cr),onRemoveEntry(cr,ir)}tr.reverse(),er.reverse()},rr=async()=>{for(const[sr,ir]of enumerate_zip(er,tr)){const or=addAtEntryPath(Xn,sr,ir);onAddEntry(ir,Xn,or,this.get_system(Qn)),this.changed(ir)}};this.do_action("remove",rr,nr),this.unselect()},async add(Zn,Jn,Xn){let Qn=[];if(Xn?(Xn=Array.isArray(Xn)?Xn:[Xn],Qn=Xn.map(cr=>({obj:cr}))):Qn=this.get_selections_with_payload(),!Qn.length){console.error("Couldn't add: no selection or parent(s) provided");return}const er=Array.isArray(Zn)?Zn:[Zn];if(!er.length){console.error("Couldn't add: no data provided");return}const tr=Qn[0].obj.getCatalogue(),nr=er.map(cr=>this.fix_object(Jn||cr.parentKey,cr,tr,Xn?Xn[0]:void 0)),rr=tr.getSystemId();let sr=[];const ir=async()=>{var cr;sr=[];for(const lr of Qn){const hr=lr.obj,fr=lr.payload;await this.open(hr,!0);const gr=[];for(const ur of nr){const dr=fixKey(hr,Jn||ur.parentKey,fr);if(!dr){const kr=`Couldn't create ${Jn||ur.parentKey} in ${fr}`;notify({type:"error",text:kr}),console.warn(kr);continue}hr[dr]||(hr[dr]=[]);const yr=hr[dr];if(!Array.isArray(yr))continue;if(!((cr=allowed_children(hr,hr.parentKey))!=null&&cr.has(dr))){const kr=`Couldn't add ${dr} to a ${hr.parentKey}`;notify({type:"error",text:kr}),console.warn(kr);continue}const vr=ur instanceof Base?entryToJson(ur,editorFields):JSON.stringify(ur),_r=JSON.parse(vr);clean(_r,dr),delete _r.parentKey,setPrototypeRecursive({[dr]:_r}),gr.push({key:dr,entry:_r})}scrambleIds(tr,gr.map(ur=>ur.entry));for(const{key:ur,entry:dr}of gr){hr[ur]||(hr[ur]=[]);const yr=hr[ur];if(!Array.isArray(yr))continue;this.filtered.push(dr),dr.showChildsInEditor=!0;let vr=dr;for(;vr;)vr.showInEditor=!0,vr=vr.parent;yr.push(dr),onAddEntry(dr,tr,hr,this.get_system(rr)),this.changed(dr),sr.push(dr)}}return sr[0]},or=()=>{for(const cr of sr)popAtEntryPath(tr,getEntryPath(cr)),this.removed(cr),onRemoveEntry(cr)};return await this.do_action("add",or,ir)},open_selected(){for(const Zn of this.selections)Zn.obj.open()},get_initial_object(Zn,Jn){switch(Zn){case"costTypes":return{name:`New ${getTypeLabel(getTypeName(Zn))}`,id:generateBattlescribeId(),defaultCostLimit:-1};case"repeats":return{value:1,repeats:1,field:"selections",scope:"parent",childId:"any",shared:!0,roundUp:!1};case"constraints":{const er=(Jn==null?void 0:Jn.parentKey)==="associations",tr={type:"min",value:1,field:Jn!=null&&Jn.isForce()?"forces":"selections",scope:"parent",shared:!0,id:generateBattlescribeId()};return er&&(tr.childId="any"),tr}case"conditions":return{type:"atLeast",value:1,field:"selections",scope:"parent",childId:"any",shared:!0};case"modifiers":return{type:"set",value:!0,field:"hidden"};case"modifierGroups":case"conditionGroups":return{type:"and"};case"sharedSelectionEntries":case"selectionEntries":return{type:"upgrade",import:!0,name:`New ${getTypeLabel(getTypeName(Zn))}`,hidden:!1,id:generateBattlescribeId()};case"entryLinks":return{import:!0,name:`New ${getTypeLabel(getTypeName(Zn))}`,hidden:!1,id:generateBattlescribeId()};case"associations":return{min:1,max:1,scope:"parent",childId:"any",ids:[],name:"New Association",id:generateBattlescribeId()};case"sharedProfiles":case"profiles":const Xn=Jn==null?void 0:Jn.getCatalogue().iterateProfileTypes().next().value;return{name:(!Jn||Jn!=null&&Jn.isCatalogue()||Jn==null?void 0:Jn.getName())||"New Profile",typeId:Xn==null?void 0:Xn.id,typeName:Xn==null?void 0:Xn.name,hidden:!1,id:generateBattlescribeId(),characteristics:[]};case"catalogueLinks":return{type:"catalogue",name:`New ${getTypeLabel(getTypeName(Zn))}`,id:generateBattlescribeId()};case"categoryLinks":return{type:"category",name:`New ${getTypeLabel(getTypeName(Zn))}`,hidden:!1,id:generateBattlescribeId()};case"characteristics":case"costs":return{};default:return{name:`New ${getTypeLabel(getTypeName(Zn))}`,id:generateBattlescribeId(),hidden:!1}}},fix_profile(Zn,Jn){var tr;let Xn=Zn.findOptionById(Jn.typeId);if(Jn.typeName&&!(Xn instanceof ProfileType)){const nr=Zn.findOptionsByText(Jn.typeName,!0).filter(rr=>rr instanceof ProfileType);sortByDescendingInplace(nr,rr=>{var sr,ir;return((sr=rr.characteristicTypes)==null?void 0:sr.length)===((ir=Jn.characteristics)==null?void 0:ir.length)?1:0}),Xn=nr[0]}if(!Xn)return;Jn.typeName=Xn.name,Jn.typeId=Xn.id;for(const nr of Jn.characteristics||[])if(nr.typeId){if(!nr.name&&nr.typeId){const rr=Xn==null?void 0:Xn.characteristicTypes.find(sr=>sr.id===nr.typeId);rr&&(nr.name=rr.name)}}else{const rr=Xn==null?void 0:Xn.characteristicTypes.find(sr=>sr.name===nr.name);rr&&(nr.typeId=rr.id)}const Qn=(tr=Xn.characteristicTypes)==null?void 0:tr.filter(nr=>!Jn.characteristics.find(rr=>rr.typeId===nr.id)),er=Jn.characteristics.find((nr,rr)=>rr!==Xn.characteristicTypes.findIndex(sr=>sr.id===nr.typeId));if(Qn.length||er){const nr=[],rr=[...Jn.characteristics];for(const sr of Qn)rr.push({name:sr.name,typeId:sr.id,$text:""});for(const sr of rr){const ir=Xn.characteristicTypes.findIndex(or=>or.id===sr.typeId);ir>=0&&(nr[ir]=sr)}Jn.characteristics=nr}},fix_object(Zn,Jn,Xn,Qn){if(Array.isArray(Jn))return Jn.map(tr=>this.fix_object(Zn,tr,Xn));const er={...this.get_initial_object(Zn,Qn),...Jn};Xn&&getTypeName(Zn)==="profile"&&this.fix_profile(Xn,er);for(const tr in er){const nr=er[tr];goodJsonArrayKeys.has(tr)&&isObject(nr)&&(Array.isArray(nr)?er[tr]=er[tr].map(rr=>this.fix_object(tr,rr,Xn)):er[tr]=[this.fix_object(tr,nr,Xn)])}return er},async create(Zn,Jn){const Xn=await this.add({select:!0,...Jn},Zn);return this.open_selected(),Xn},async create_child(Zn,Jn,Xn){const Qn=await this.add({select:!0,...Xn},Zn,Jn);return this.open_selected(),Qn},add_node(Zn,Jn,Xn){var sr;const Qn=fixKey(Jn,Zn);if(!Qn)throw new Error(`Invalid key: ${Zn} in ${Jn.editorTypeName}`);const er=Jn.getCatalogue(),tr=er.getSystemId(),nr={...this.fix_object(Qn,Xn,er),...Xn};if(!((sr=allowed_children(Jn,Jn.parentKey))!=null&&sr.has(Qn))){console.warn("Couldn't add",Qn,"to a",Jn.parentKey,"because it is not allowed");return}Jn[Qn]||(Jn[Qn]=[]);const rr=Jn[Qn];if(Array.isArray(rr))return clean(nr,Qn),delete nr.parentKey,setPrototypeRecursive({[Qn]:nr}),rr.push(nr),onAddEntry(nr,er,Jn,this.get_system(tr)),this.changed(nr),nr},del_node(Zn){try{const Jn=Zn.catalogue,Xn=Jn.manager,Qn=getEntryPath(Zn),er=popAtEntryPath(Jn,Qn);this.removed(er),onRemoveEntry(er,Xn)}catch{console.error("Failed to delete",Zn)}},can_move(Zn){return!Zn.isLink()},edit_node(Zn,Jn){let Xn=!1;for(const Qn in Jn){const er=Jn[Qn];if(Zn[Qn]!==er){if(isObject(er)){const tr=Zn.getCatalogue(),nr=tr.getSystemId(),rr=this.fix_object(Qn,er,tr);setPrototypeRecursive({[Qn]:rr}),Zn[Qn]=rr,onAddEntry(rr,tr,Zn,this.get_system(nr))}else Zn[Qn]=er;Xn=!0}}return Xn&&this.changed(Zn),Xn},get_move_targets(Zn){const Jn=Zn.catalogue;if(!Jn||Zn.isLink())return;const Xn=[];if(!Zn.parentKey.startsWith("shared")&&this.move_to_key(Zn,"shared")?Xn.push({target:Jn,type:"shared"}):Zn.parentKey.startsWith("shared")&&this.move_to_key(Zn,"root")&&Xn.push({target:Jn,type:"root"}),this.move_to_key(Zn,"shared"))for(const Qn of Jn.imports)Xn.push({target:Qn,type:"shared"});if(this.move_to_key(Zn,"root"))for(const Qn of Jn.imports)Xn.push({target:Qn,type:"root"});return Xn},move_to_key(Zn,Jn){if(Jn==="shared")switch(Zn.editorTypeName){case"infoGroup":return"sharedInfoGroups";case"rule":return"sharedRules";case"profile":return"sharedProfiles";case"selectionEntry":return"sharedSelectionEntries";case"selectionEntryGroup":return"sharedSelectionEntryGroups";default:return""}switch(Zn.editorTypeName){case"infoGroup":return"infoGroups";case"rule":return"rules";case"profile":return"";case"category":return"categoryEntries";case"profileType":return"profileTypes";case"costType":return"costTypes";case"selectionEntry":return"selectionEntries";case"selectionEntryGroup":return"";default:return Zn.parentKey}},move(Zn,Jn,Xn,Qn){(()=>{const tr=this.move_to_key(Zn,Qn);if(!tr){console.error("Could not find key for move",Zn.editorTypeName,Qn);return}const nr=Zn.parent,rr=getEntryPath(Zn);removeEntry(Zn),this.removed(Zn),onRemoveEntry(Zn);const sr=JSON.parse(entryToJson(Zn,editorFields));setPrototypeRecursive({[tr]:sr}),Xn[tr]||(Xn[tr]=[]),Xn[tr].push(sr),onAddEntry(sr,Xn,Xn,this.get_system(Xn.getSystemId())),this.changed(sr);const or=["rule","infoGroup","profile","selectionEntry","selectionEntryGroup"].includes(Zn.editorTypeName),ar=!Zn.parentKey.startsWith("shared");if(or&&ar){const cr={targetId:sr.id,id:Jn.generateNonConflictingId(),type:Zn.editorTypeName,name:Zn.getName(),hidden:Zn.hidden,select:!0};Zn.isEntry()&&(cr.collective=Zn.collective);const lr=Zn.isGroup()||Zn.isEntry()?"entryLinks":"infoLinks";setPrototypeRecursive({[lr]:cr}),rr[rr.length-1].key=lr,addAtEntryPath(Jn,rr,cr),onAddEntry(cr,Jn,nr,this.get_system(Jn.getSystemId())),this.changed(cr)}})()},async open(Zn,Jn,Xn){var ir;let Qn=document.getElementById("editor-entries");if(!Qn)return;async function er(or){const ar=get_ctx(or);get_base_from_vue_el(ar).showInEditor=!0,ar.open(),await ar.$nextTick()}async function tr(or){const ar=get_ctx(or);ar.close(),await ar.$nextTick()}const nr=getEntryPath(Zn);if(!(nr!=null&&nr.length))return;if(Qn=Qn.getElementsByClassName(`depth-0 ${nr[0].key}`)[0],!Qn){Xn!==!0&&console.error("Couldn't find root element for",nr[0].key,"in",Zn.catalogue.getName());return}await this.show(Zn,!1),await er(Qn);const rr=[];forEachParent(Zn,or=>{rr.push(or)}),rr.pop(),rr.reverse(),rr.push(Zn),rr[0].parentKey==="sharedProfiles"&&rr.unshift({parentKey:`label-${rr[0].typeName??"Untyped"}`});const sr=rr[rr.length-1];for(let or=0;or<rr.length;or++){const ar=rr[or],cr=Qn.getElementsByClassName(`depth-${or+1} ${ar.parentKey}`);let lr;if(ar.parentKey.startsWith("label-"))lr=cr[0];else{const hr=[];for(let fr=0;fr<cr.length;fr++)hr.push(cr[fr]);lr=hr.find(fr=>$toRaw(get_base_from_vue_el(get_ctx(fr)))===$toRaw(ar))}lr||Xn!==!0&&console.error("Couldn't find path to",Zn.getName(),Zn,"parent:",(ir=Zn.parent)==null?void 0:ir.getName()),lr&&(Qn=lr),ar!==sr&&await er(Qn),ar===sr&&(Jn===!1?await tr(Qn):Jn===!0&&await er(Qn))}return Qn},async goto_catalogue(Zn,Jn){var nr,rr,sr;const Xn=this.$router;if(!Xn)throw new Error("Cannot follow link to another catalogue without $router set");const er=((nr=Xn.currentRoute)==null?void 0:nr.query)??((sr=(rr=Xn.currentRoute)==null?void 0:rr.value)==null?void 0:sr.query),tr=(er==null?void 0:er.id)||(er==null?void 0:er.systemId);return Zn!==tr?(Xn.push({name:"catalogue",query:{systemId:Jn||Zn,id:Zn}}),this.$nextTick=new Promise((ir,or)=>{this.$nextTickResolve=ir}).then(()=>{delete this.$nextTickResolve}),this.$nextTick):!1},async show(Zn,Jn=!0){this.filtered.includes(Zn)||this.filtered.push(Zn),Zn.showInEditor=!0,Zn.showChildsInEditor=!0,Jn&&(Zn.highlight=!0),forEachParent(Zn,Xn=>{Xn.showInEditor=!0})},async goto(Zn){const Jn=Zn.getCatalogue();this.put_current_state_in_history();const Xn=useEditorUIState();Xn.get_data(Jn.id).selection=getEntryPath(Zn),await this.goto_catalogue(Jn.id,Jn.gameSystemId),await this.show(Zn,!1),await this.scrollto(Zn)},async scroll_to_el(Zn){Zn.scrollIntoView({block:"center",inline:"start",behavior:"instant"})},async scrollto(Zn){const Jn=await this.open(Zn);if(Jn){const Xn=get_ctx(Jn);this.do_select(null,Xn),this.scroll_to_el(Jn)}else setTimeout(async()=>{const Xn=await this.open(Zn);if(Xn){const Qn=get_ctx(Xn);this.do_select(null,Qn),this.scroll_to_el(Xn)}},50)},can_goto(Zn){return Zn?typeof Zn=="object"&&Zn instanceof Base:!1},can_follow(Zn){return!!(Zn!=null&&Zn.target)},async follow(Zn){Zn!=null&&Zn.target&&await this.goto(Zn.target)},async move_up(Zn){if(Zn.parent){const Jn=Zn.parent[Zn.parentKey],Xn=Jn.indexOf(Zn);if(Xn>0){const Qn=Jn.splice(Xn,1)[0];Jn.splice(Xn-1,0,Qn),this.changed(Zn)}}},async move_down(Zn){if(Zn.parent){const Jn=Zn.parent[Zn.parentKey],Xn=Jn.indexOf(Zn);if(Xn>=0&&Xn<Jn.length-1){const Qn=Jn.splice(Xn,1)[0];Jn.splice(Xn+1,0,Qn),this.changed(Zn)}}},sortable(Zn){return useSettingsStore().sort==="none"?!1:(Zn==null?void 0:Zn.editorTypeName)!=="force"},get_leftpanel_open_collapsible_boxes(){function Zn(Xn,Qn,er=0){const tr=`depth-${er} collapsible-box opened`,nr=Xn.getElementsByClassName(tr);if(nr!=null&&nr.length)for(var rr=0;rr<nr.length;rr++){const sr=nr[rr],ir=get_base_from_vue_el(get_ctx(sr)),or=ir.parentKey,ar=ir.parent;if(ar){const cr=ar[or];if(!cr||!Array.isArray(cr))continue;const lr=cr.indexOf(ir);or in Qn||(Qn[or]={}),lr in Qn[or]||(Qn[or][lr]={}),Zn(sr,Qn[or][lr],er+1)}else{const cr=[];for(var rr=0;rr<sr.classList.length;rr++){const fr=sr.classList[rr];cr.push(fr)}const lr=cr.filter(hr=>goodJsonKeys.has(hr)||hr.startsWith("label-"));for(const hr of lr)Qn[hr]={},Qn[hr][0]={};Zn(sr,Qn[lr[0]][0],er+1)}}}const Jn={};return Zn(document.documentElement,Jn),Jn},get_leftpanel_state(){if(!this.catalogueComponent)return{};const Zn={},Jn=this.catalogueComponent.$refs.leftpanel;for(const Xn of Object.keys(LeftPanelDefaults))Zn[Xn]=Jn[Xn];return Zn},get_current_state(){var Xn;const Zn=this.get_selected(),Jn=(Xn=this.catalogueComponent)==null?void 0:Xn.cat;return{...this.get_leftpanel_state(),mode:this.mode,open:this.get_leftpanel_open_collapsible_boxes(),selection:Zn?getEntryPath(Zn):void 0,catalogueId:Jn==null?void 0:Jn.id,systemId:Jn==null?void 0:Jn.gameSystemId}},save_state(){if(this.catalogueComponent&&this.catalogueComponent.cat){const Zn=this.catalogueComponent.cat.id,Jn=useEditorUIState(),Xn=this.get_current_state();Jn.set_state(Zn,Xn)}},async load_state(Zn){this.catalogueComponent&&(useEditorUIState().set_state(Zn.catalogueId,Zn),this.mode=Zn.mode||"edit",await this.goto_catalogue(Zn.catalogueId,Zn.systemId)||(this.catalogueComponent.load_state(Zn),this.rerender_catalogue()))},put_state_in_history(Zn){if(this.historyStackPos<this.historyStack.length){const Jn=this.historyStack.length-this.historyStackPos;this.historyStack.splice(this.historyStackPos,Jn,Zn)}else this.historyStack.push(Zn);this.historyStackPos=this.historyStack.length},put_current_state_in_history(){this.catalogueComponent&&this.catalogueComponent.cat&&this.put_state_in_history(this.get_current_state())},can_back(){return this.historyStackPos>0},async back(){this.can_back()&&(this.historyStack[this.historyStackPos]=this.get_current_state(),this.historyStackPos-=1,this.load_state(this.historyStack[this.historyStackPos]))},can_forward(){if(this.historyStack[this.historyStack.length-1])return this.historyStackPos<this.historyStack.length-1},async forward(){this.can_forward()&&(this.historyStackPos+=1,this.load_state(this.historyStack[this.historyStackPos]))},async update_catalogue_search(Zn,Jn){const{filter:Xn,ignoreProfilesRules:Qn}=Jn,er=this.filtered;for(const tr of er)delete tr.showInEditor,delete tr.showChildsInEditor,delete tr.highlight,forEachParent(tr,nr=>{delete nr.showInEditor,delete tr.showChildsInEditor});if(Xn.length>1){this.set_filter(Xn),this.filtered=Zn.findOptionsByText(Xn),Qn&&(this.filtered=this.filtered.filter(tr=>!tr.isProfile()&&!tr.isRule()&&!tr.isInfoGroup()));for(const tr of this.filtered)this.show(tr);if(await(globalThis.$nextTick&&globalThis.$nextTick()),this.filtered.length<300){for(const tr of this.filtered)if(tr.parent)try{await this.open(tr,!1,!0)}catch{continue}}}else this.set_filter(""),this.filtered=[];return this.filtered},async system_search(Zn,Jn,Xn=1e3){const Qn=[],{filter:er}=Jn;if(!er)return null;const tr=textSearchRegex(er);let nr=!1;await Zn.loadAll();for(const sr of Zn.getAllLoadedCatalogues())if(sr.forEachObjectWhitelist((ir,or)=>{var ar;try{if(Qn.length>=Xn||ir.targetId&&ir.target&&ir.target.isCategory()&&!(or!=null&&or.isForce()))return;const cr=(ar=ir.getName)==null?void 0:ar.call(ir),lr=ir.$text,hr=ir.description,fr=ir.id;(fr===er||cr&&String(cr).match(tr)||fr===er||lr&&String(lr).match(tr)||hr&&String(hr).match(tr))&&Qn.push(ir)}catch(cr){console.error("Error while searching:",cr)}}),Qn.length>=Xn){nr=!0;break}console.log("Search for",`"${er}"`,"found",Qn.length,"results");const rr={};for(const sr of Qn)addObj(rr,sr.catalogue.name,sr);return{grouped:rr,all:Qn,more:nr}},async open_catalogue(Zn,Jn){const Xn=await this.get_or_load_system(Zn);let Qn=Xn.getLoadedCatalogue({targetId:Jn||Zn});Qn||(Qn=await Xn.loadCatalogue({targetId:Jn||Zn})),globalThis.$catalogue=Qn,Qn.processForEditor();for(const er of Qn.imports)er.processForEditor();return{system:Xn,catalogue:Qn}},add_child(...Zn){return this.add_node(...Zn)},del_child(...Zn){return this.del_node(...Zn)},edit_child(...Zn){return this.edit_node(...Zn)},label(Zn,Jn=!1){return Jn?[getName(Zn),getNameExtra(Zn)].filter(Xn=>Xn).join(" "):getName(Zn)}}}),_sfc_main$1=defineComponent({data(){return{val:"",titleSize:50}},methods:{update(){this.titleSize=this.$refs.title.clientHeight}},setup(){const Zn=useEditorStore();return Zn.init(this),{settings:useSettingsStore(),store:Zn}},mounted(){addEventListener("resize",this.update)},unmounted(){removeEventListener("resize",this.update)},async created(){this.settings.refreshAppearance()},watch:{"settings.theme"(){this.settings.refreshAppearance()}},components:{TitleBar:__nuxt_component_0}}),app_vue_vue_type_style_index_0_lang="",_hoisted_1=createBaseVNode("div",{id:"popups"},null,-1),_hoisted_2=createBaseVNode("div",{id:"dialogs"},null,-1),_hoisted_3={id:"app"};function _sfc_render(Zn,Jn,Xn,Qn,er,tr){const nr=resolveComponent("Notifications"),rr=__nuxt_component_0,sr=__nuxt_component_1,ir=__nuxt_component_2;return openBlock(),createElementBlock(Fragment,null,[_hoisted_1,_hoisted_2,createBaseVNode("div",_hoisted_3,[createVNode(nr,{style:normalizeStyle({"margin-top":`${Zn.titleSize+5}px`}),position:"top center"},null,8,["style"]),createVNode(ir,null,{default:withCtx(()=>[createBaseVNode("div",{class:"title",ref:"title",onResize:Jn[0]||(Jn[0]=(...or)=>Zn.update&&Zn.update(...or))},[createVNode(rr)],544),createBaseVNode("div",{class:"content",style:normalizeStyle({height:`calc(100vh - ${Zn.titleSize}px)`})},[createVNode(sr,{keepalive:!0})],4)]),_:1})])],64)}const AppComponent=_export_sfc(_sfc_main$1,[["render",_sfc_render]]),_sfc_main={__name:"nuxt-root",setup(Zn){const Jn=defineAsyncComponent(()=>__vitePreload(()=>import("./error-component.de00eebf.js"),[],import.meta.url).then(sr=>sr.default||sr)),Xn=()=>null,Qn=useNuxtApp(),er=Qn.deferHydration(),tr=!1;provide("_route",useRoute()),Qn.hooks.callHookWith(sr=>sr.map(ir=>ir()),"vue:setup");const nr=useError();onErrorCaptured((sr,ir,or)=>{if(Qn.hooks.callHook("vue:error",sr,ir,or).catch(ar=>console.error("[nuxt] Error in `vue:error` hook",ar)),isNuxtError(sr)&&(sr.fatal||sr.unhandled))return Qn.runWithContext(()=>showError(sr)),!1});const{islandContext:rr}=!1;return(sr,ir)=>(openBlock(),createBlock(Suspense,{onResolve:unref(er)},{default:withCtx(()=>[unref(nr)?(openBlock(),createBlock(unref(Jn),{key:0,error:unref(nr)},null,8,["error"])):unref(rr)?(openBlock(),createBlock(unref(Xn),{key:1,context:unref(rr)},null,8,["context"])):unref(tr)?(openBlock(),createBlock(resolveDynamicComponent(unref(tr)),{key:2})):(openBlock(),createBlock(unref(AppComponent),{key:3}))]),_:1},8,["onResolve"]))}};globalThis.$fetch||(globalThis.$fetch=$fetch$1.create({baseURL:baseURL()}));let entry;const plugins=normalizePlugins(_plugins);{let Zn;entry=async function(){var tr,nr;if(Zn)return Zn;const Qn=!!((tr=window.__NUXT__)!=null&&tr.serverRendered||((nr=document.getElementById("__NUXT_DATA__"))==null?void 0:nr.dataset.ssr)==="true")?createSSRApp(_sfc_main):createApp(_sfc_main),er=createNuxtApp({vueApp:Qn});try{await applyPlugins(er,plugins)}catch(rr){await er.callHook("app:error",rr),er.payload.error=er.payload.error||rr}try{await er.hooks.callHook("app:created",Qn),await er.hooks.callHook("app:beforeMount",Qn),Qn.mount("#"+appRootId),await er.hooks.callHook("app:mounted",Qn),await nextTick()}catch(rr){await er.callHook("app:error",rr),er.payload.error=er.payload.error||rr}return Qn},Zn=entry().catch(Jn=>{console.error("Error while mounting app:",Jn)})}export{getAllPossibleParents as $,_imports_0 as A,withModifiers as B,vModelSelect as C,renderList as D,normalizeClass as E,Fragment as F,__nuxt_component_0$1 as G,pushScopeId as H,popScopeId as I,useEditorStore as J,getNameExtra as K,getName as L,createStaticVNode as M,inBounds as N,resolveDirective as O,vShow as P,withKeys as Q,normalizeStyle as R,setPrototype as S,Teleport as T,sortByDescending as U,mergeProps as V,first as W,getModifierOrConditionParent as X,getDataObject as Y,findSelfOrParentWhere as Z,__vitePreload as _,_export_sfc as a,findParentWhere as a0,getEntryPathInfo as a1,ProfileType as a2,get_base_from_vue_el as a3,get_ctx as a4,useEditorUIState as a5,toRaw as a6,escapeXml as a7,getTypeName as a8,getTypeLabel as a9,filename as aA,download as aB,deleteFile as aC,getDataDbId as aD,dirname as aE,db as aF,__nuxt_component_0$2 as aG,stripHtml as aH,defineStore as aI,GameSystemFiles as aJ,Base as aK,showOpenDialog as aL,getFolderFolders as aM,getPath as aN,getFolderFiles as aO,removeSuffix$1 as aP,groupBy as aa,getEntryPath as ab,getModifiedField as ac,reactive as ad,allowed_children as ae,systemCategories as af,catalogueCategories as ag,_imports_16 as ah,LeftPanelDefaults as ai,getAtEntryPath as aj,useCataloguesStore as ak,getNextRevision as al,showMessageBox as am,closeWindow as an,ref as ao,isAllowedExtension as ap,isZipExtension as aq,convertToJson as ar,getExtension as as,isRef as at,normalizeGithubRepoUrl as au,unzipFolder as av,addOne as aw,capitalize as ax,convertToXml as ay,removeExtension as az,createElementBlock as b,createBlock as c,defineAsyncComponent as d,defineComponent as e,useHead as f,guardReactiveProps as g,createVNode as h,createBaseVNode as i,toValue as j,generateBattlescribeId as k,createCommentVNode as l,renderSlot as m,normalizeProps as n,openBlock as o,vModelCheckbox as p,withCtx as q,resolveComponent as r,createTextVNode as s,toDisplayString as t,unref as u,vModelText as v,withDirectives as w,sortByAscending$1 as x,sortByAscendingInplace as y,useSettingsStore as z};
//# sourceMappingURL=entry.cdaa2af2.js.map
