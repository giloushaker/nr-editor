{"version":3,"file":"SplitView.acb813bf.js","sources":["../../../../assets/icons/iconeplus.png","../../../../stores/uiState.ts","../../../../components/SplitView.vue"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcODic7b6se5AAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAEgSURBVDjLtZOxTsMwFEWvk2eaEokSVVUUUTEFscLGxIzEzCfAytcwMTP1N5gYCBOiYgGpqsTIEIXYTswQgYpje0Dt3Xz9fPV8/Mxg6HI2JcYg4ZDW4LcXC7XqkVlUfykWDQlHhwe9gKf5K8pSMtMPsAb1Qt4ePpXvQFF89PbpajYlWSsmhG4BoK4E94XkeTzIbxpJgzAAgPFoVxMYJI8IPOqK4h1vBrIsqXqdALBCBIAWDQKEv2sX7MAPLPwf2LW8zsZDGLOX0w8cUzaIxcvcHqI1eFkqJmU3J0oIPknjytXN8/tiyLcgI+rmZG+cajI/0/412rM0dl7p/hE17qCBpumc5YbAnhwn5DtwfsrJCnZVo3hbu2ADQJZMNLD8430DxUxYqJ3Wfq0AAAAASUVORK5CYII=\"","import { defineStore } from \"pinia\";\n\nexport const useUIState = defineStore(\"ui\", {\n  state: () => ({} as Record<string, number>),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    get(splitViewId: string, subId: string): number | undefined {\n      return this.$state[`${splitViewId}-${subId}`];\n    },\n    set(splitViewId: string, subId: string, value: number) {\n      this.$state[`${splitViewId}-${subId}`] = value;\n    },\n  },\n});\n","<template>\n  <div\n    class=\"mainView splitMainView\"\n    :class=\"{\n      splitMainView: split,\n      doubleSplitView: double,\n      tripleSplitView: triple,\n    }\"\n    :style=\"height > 0 ? { height: `${height}px` } : {}\"\n  >\n    <div class=\"left\" ref=\"left\" :style=\"{ width: leftw > 0 ? `${leftw}px` : leftWidth }\">\n      <slot name=\"left\"></slot>\n    </div>\n    <div v-if=\"draggable\" class=\"between unselectable\" @mousedown=\"drag_left_handle\" />\n\n    <template v-if=\"triple\">\n      <div\n        ref=\"middle\"\n        class=\"middle scrollable\"\n        :class=\"{ hidden: !split && showRight, hideOnSmallScreen: showRight }\"\n      >\n        <slot name=\"middle\"></slot>\n      </div>\n      <div v-if=\"draggable\" class=\"between unselectable\" @mousedown=\"drag_right_handle\" />\n    </template>\n    <div\n      v-if=\"showRight\"\n      ref=\"right\"\n      class=\"right grow\"\n      :style=\"{\n        width: rightw > 0 ? `calc(100vw - ${rightw}px)` : rightWidth,\n      }\"\n      :class=\"{\n        hidden: !split && showRight == false,\n        hideOnSmallScreen: showRight == false,\n      }\"\n    >\n      <slot name=\"right\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useUIState } from \"~/stores/uiState\";\n\nexport default {\n  props: {\n    split: {},\n    double: {},\n    triple: {},\n    showRight: {},\n    draggable: {\n      type: Boolean,\n      default: false,\n    },\n    leftWidth: {\n      type: String,\n      default: \"auto\",\n    },\n    rightWidth: {\n      type: String,\n      default: \"auto\",\n    },\n    id: {\n      type: String,\n    },\n  },\n  data() {\n    return { _leftWidth: 0, _rightWidth: 0, dragging: false, height: 0 };\n  },\n  setup() {\n    return { store: useUIState() };\n  },\n  mounted() {\n    if (this.draggable) {\n      if (this.id) {\n        const left = this.store.get(this.id, \"left\");\n        if (left) this._leftWidth = left;\n      }\n      if (!this._leftWidth && this.$refs.left) {\n        const element = this.$refs.left;\n        const width = (element as HTMLDivElement).offsetWidth;\n        this._leftWidth = width;\n      }\n      if (this.id) {\n        const right = this.store.get(this.id, \"right\");\n        if (right) this._rightWidth = right;\n      }\n      if (!this._rightWidth && this.$refs.right) {\n        const element = this.$refs.right;\n        const width = (element as HTMLDivElement).offsetWidth;\n        this._rightWidth = width;\n      }\n    }\n    addEventListener(\"resize\", this.update);\n    this.$nextTick(this.update);\n  },\n\n  unmounted() {\n    removeEventListener(\"resize\", this.update);\n  },\n  updated() {\n    this.update();\n  },\n  computed: {\n    left() {\n      return this.$el?.offsetLeft || 0;\n    },\n    leftw() {\n      return this._leftWidth - this.left;\n    },\n    right() {\n      return this.$el?.offsetRight || 0;\n    },\n    rightw() {\n      return this._rightWidth - this.right;\n    },\n    hasMiddle() {\n      return !!this.$slots.middle;\n    },\n    totalWidth() {\n      return this.$el.clientWidth;\n    },\n  },\n  methods: {\n    update() {\n      const pos = (this.$el as HTMLDivElement)?.offsetTop || 0;\n      this.height = innerHeight - pos;\n    },\n    clamp(val: number) {\n      if (val < 100) return 100;\n      if (val > this.totalWidth - 100) return this.totalWidth - 100;\n      return val;\n    },\n    async drag_left_handle(e: MouseEvent) {\n      this.dragging = true;\n      const b = this._leftWidth;\n      const x = e.clientX;\n      const onmousemove = (m: MouseEvent) => {\n        this._leftWidth = this.clamp(b + (m.clientX - x));\n      };\n      addEventListener(\"mousemove\", onmousemove);\n      const mouseupoptions = {\n        once: true,\n        capture: true,\n      };\n      addEventListener(\n        \"mouseup\",\n        () => {\n          removeEventListener(\"mousemove\", onmousemove);\n          this.$nextTick(() => {\n            this._leftWidth = (this.$refs.left as HTMLDivElement).clientWidth;\n            this.dragging = false;\n            if (this.id) this.store.set(this.id, \"left\", this._leftWidth);\n          });\n        },\n        mouseupoptions\n      );\n    },\n    async drag_right_handle(e: MouseEvent) {\n      this.dragging = true;\n      const b = this._leftWidth;\n      const x = e.clientX;\n      const onmousemove = (m: MouseEvent) => {\n        this._leftWidth = this.clamp(b + (m.clientX - x));\n      };\n      addEventListener(\"mousemove\", onmousemove);\n      const mouseupoptions = {\n        once: true,\n        capture: true,\n      };\n      addEventListener(\n        \"mouseup\",\n        () => {\n          this.$nextTick(() => {\n            this._rightWidth = (this.$refs.right as HTMLDivElement).clientWidth;\n            this.dragging = false;\n            if (this.id) this.store.set(this.id, \"right\", this._rightWidth);\n          });\n        },\n        mouseupoptions\n      );\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.mainView {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  // position: fixed;\n}\n.left,\n.middle,\n.right {\n  height: 100%;\n}\n\n.right {\n  flex: 1;\n}\n\n.between {\n  background-color: rgba(0, 0, 100, 0.08);\n  height: 100%;\n  position: relative;\n  cursor: ew-resize;\n  width: 10px;\n  z-index: 1;\n}\n</style>\n"],"names":["_imports_0","useUIState","defineStore","splitViewId","subId","value","_sfc_main","left","width","right","_a","pos","val","e","b","x","onmousemove","m","mouseupoptions","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_createElementBlock","_normalizeClass","_normalizeStyle","_createElementVNode","_renderSlot","_createCommentVNode","_Fragment","_openBlock"],"mappings":"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"}