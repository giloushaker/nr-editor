{"version":3,"file":"SplitView.2cbfcd0e.js","sources":["../../../../assets/icons/iconeplus.png","../../../../stores/uiState.ts","../../../../components/SplitView.vue"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcODic7b6se5AAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAEgSURBVDjLtZOxTsMwFEWvk2eaEokSVVUUUTEFscLGxIzEzCfAytcwMTP1N5gYCBOiYgGpqsTIEIXYTswQgYpje0Dt3Xz9fPV8/Mxg6HI2JcYg4ZDW4LcXC7XqkVlUfykWDQlHhwe9gKf5K8pSMtMPsAb1Qt4ePpXvQFF89PbpajYlWSsmhG4BoK4E94XkeTzIbxpJgzAAgPFoVxMYJI8IPOqK4h1vBrIsqXqdALBCBIAWDQKEv2sX7MAPLPwf2LW8zsZDGLOX0w8cUzaIxcvcHqI1eFkqJmU3J0oIPknjytXN8/tiyLcgI+rmZG+cajI/0/412rM0dl7p/hE17qCBpumc5YbAnhwn5DtwfsrJCnZVo3hbu2ADQJZMNLD8430DxUxYqJ3Wfq0AAAAASUVORK5CYII=\"","import { defineStore } from \"pinia\";\n\nexport const useUIState = defineStore(\"ui\", {\n  state: () => ({} as Record<string, number>),\n\n  persist: {\n    storage: globalThis.localStorage,\n  },\n  actions: {\n    get(splitViewId: string, subId: string): number | undefined {\n      return this.$state[`${splitViewId}-${subId}`];\n    },\n    set(splitViewId: string, subId: string, value: number) {\n      this.$state[`${splitViewId}-${subId}`] = value;\n    },\n  },\n});\n","<template>\n  <div class=\"splitView\" v-if=\"showLeft\" :style=\"height > 0 ? { height: `${height}px` } : {}\">\n    <div class=\"left\" ref=\"left\" :style=\"{ width: leftw > 0 ? `${leftw}px` : leftWidth }\">\n      <slot name=\"left\"></slot>\n    </div>\n\n    <div\n      v-if=\"draggable && showLeft && (showMiddle || showRight)\"\n      class=\"between unselectable\"\n      @mousedown=\"drag_left_handle\"\n    />\n\n    <template v-if=\"showMiddle\">\n      <div ref=\"middle\" class=\"middle grow\">\n        <slot name=\"middle\"></slot>\n      </div>\n    </template>\n    <div v-if=\"draggable && showMiddle && showRight\" class=\"between unselectable\" @mousedown=\"drag_right_handle\" />\n    <div\n      v-if=\"showRight\"\n      ref=\"right\"\n      class=\"right\"\n      :style=\"{\n        width: `${rightw}px`,\n      }\"\n    >\n      <slot name=\"right\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useUIState } from \"~/stores/uiState\";\nfunction getOffset(el: { getBoundingClientRect: () => any }) {\n  const rect = el.getBoundingClientRect();\n  return {\n    left: rect.left + window.scrollX,\n    top: rect.top + window.scrollY,\n  };\n}\nexport default {\n  props: {\n    showLeft: {\n      type: Boolean,\n      default: true,\n    },\n    showMiddle: {\n      type: Boolean,\n      default: false,\n    },\n    showRight: {\n      type: Boolean,\n      default: false,\n    },\n    draggable: {\n      type: Boolean,\n      default: false,\n    },\n    leftWidth: {\n      type: String,\n      default: \"auto\",\n    },\n    rightWidth: {\n      type: String,\n      default: \"auto\",\n    },\n    clamp: {\n      type: Number,\n      default: 250,\n    },\n    id: {\n      type: String,\n    },\n  },\n  data() {\n    return { _leftWidth: 0, _rightWidth: 0, dragging: false, height: 0 };\n  },\n  setup() {\n    return { store: useUIState() };\n  },\n  mounted() {\n    if (this.draggable) {\n      if (this.id) {\n        const left = this.store.get(this.id, \"left\");\n        if (left) this._leftWidth = left;\n      }\n      if (!this._leftWidth && this.$refs.left) {\n        const element = this.$refs.left;\n        const width = (element as HTMLDivElement).offsetWidth;\n        this._leftWidth = width;\n      }\n      if (this.id) {\n        const right = this.store.get(this.id, \"right\");\n        if (right) this._rightWidth = right;\n      }\n      if (!this._rightWidth && this.$refs.right) {\n        const element = this.$refs.right;\n        const width = (element as HTMLDivElement).offsetWidth;\n        this._rightWidth = width;\n      }\n    }\n    addEventListener(\"resize\", this.update);\n    this.$nextTick(this.update);\n  },\n\n  unmounted() {\n    removeEventListener(\"resize\", this.update);\n  },\n  updated() {\n    this.update();\n  },\n  computed: {\n    left() {\n      return this.$el?.offsetLeft || 0;\n    },\n    leftw() {\n      return this._leftWidth - this.left;\n    },\n    right() {\n      return this.$el?.offsetRight || 0;\n    },\n    rightw() {\n      return this._rightWidth - this.right;\n    },\n    hasMiddle() {\n      return !!this.$slots.middle;\n    },\n    totalWidth() {\n      return this.$el.clientWidth;\n    },\n  },\n  methods: {\n    update() {\n      const pos = getOffset(this.$el)?.top;\n      this.height = innerHeight - pos;\n    },\n    do_clamp(val: number) {\n      if (val < this.clamp) return this.clamp;\n      if (val > this.totalWidth - this.clamp) return this.totalWidth - this.clamp;\n      return val;\n    },\n    async drag_left_handle(e: MouseEvent) {\n      this.dragging = true;\n      const b = this._leftWidth;\n      const x = e.clientX;\n      const onmousemove = (m: MouseEvent) => {\n        const diff = m.clientX - x;\n        this._leftWidth = this.do_clamp(b + diff);\n      };\n      addEventListener(\"mousemove\", onmousemove);\n      const onmouseup = () => {\n        removeEventListener(\"mousemove\", onmousemove);\n        this.$nextTick(() => {\n          this.dragging = false;\n          if (this.id) this.store.set(this.id, \"left\", this._leftWidth);\n        });\n      };\n      addEventListener(\"mouseup\", onmouseup, {\n        once: true,\n        capture: true,\n      });\n    },\n    async drag_right_handle(e: MouseEvent) {\n      this.dragging = true;\n      const b = this._rightWidth;\n      const x = e.clientX;\n      const onmousemove = (m: MouseEvent) => {\n        const diff = m.clientX - x;\n        this._rightWidth = this.do_clamp(b - diff);\n      };\n      addEventListener(\"mousemove\", onmousemove);\n      const onmouseup = () => {\n        removeEventListener(\"mousemove\", onmousemove);\n\n        this.$nextTick(() => {\n          this.dragging = false;\n          if (this.id) this.store.set(this.id, \"right\", this._rightWidth);\n        });\n      };\n      addEventListener(\"mouseup\", onmouseup, {\n        once: true,\n        capture: true,\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"@/shared_components/css/vars.scss\";\n\n.splitView {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  // position: fixed;\n}\n.left,\n.middle,\n.right {\n  height: 100%;\n}\n\n.middle {\n  flex: 1;\n}\n\n.between {\n  background-color: rgba(0, 0, 100, 0.08);\n  height: 100%;\n  position: relative;\n  cursor: ew-resize;\n  width: 10px;\n  z-index: 1;\n}\n</style>\n"],"names":["_imports_0","useUIState","defineStore","splitViewId","subId","value","getOffset","el","rect","_sfc_main","left","width","right","_a","pos","val","e","b","x","onmousemove","m","diff","onmouseup","_hoisted_1","_ctx","_cache","$props","$setup","$data","$options","_createElementBlock","_normalizeStyle","_createElementVNode","_renderSlot","_createCommentVNode","_openBlock"],"mappings":"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"}