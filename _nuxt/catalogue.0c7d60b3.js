import{a as h,o as r,c as p,aN as g,O as f,b as o,w as m,v as A,t as v,p as c,n as u,V as y,i as x,F as O,D as F,g as _,E as V}from"./entry.c672151e.js";const D={emits:["change","update:modelValue","paste"],props:{modelValue:{type:[String,Number,Array]},placeholder:{type:String,default:""},is:{type:String,default:"div"},beforePaste:Function},methods:{change(e){e.target&&(this.$emit("update:modelValue",e.target.innerText),this.$emit("change"))},get(){return this.$refs.div},toHtml(e){return e.replace(/\n/g,"<br />")},decodeHtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},onpaste(e){var i;e.preventDefault();var t=this.decodeHtml(((i=e.clipboardData)==null?void 0:i.getData("text/plain"))??"");this.beforePaste&&(t=this.beforePaste(t)),document.execCommand("insertText",!1,t),this.$emit("update:modelValue",this.get().innerText),this.$emit("change")}},mounted(){this.get().innerText=`${this.modelValue??""}`},watch:{modelValue(){this.get().innerText!=this.modelValue&&(this.get().innerText=`${this.modelValue??""}`)}}};function k(e,t,i,a,n,s){return r(),p(g(i.is),{placeholder:i.placeholder,class:"editableDiv",onInput:s.change,onPaste:s.onpaste,contenteditable:"true",ref:"div"},null,40,["placeholder","onInput","onPaste"])}const I=h(D,[["render",k],["__scopeId","data-v-dda30cbc"]]),E={emits:["change","update:modelValue"],props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},valueField:{type:[String,Function],default:""},filterField:{type:[String,Function],default:""},lazy:{type:Boolean,default:!1},default:{type:Object},nullable:{type:Boolean,default:!1}},created(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,sleeping:this.lazy}},computed:{computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const e=this.textSearchRegex(this.searchPattern),t=[];this.nullable&&t.push({option:void 0});const i=this.computedOptions,a=this.max||i.length;for(let n=0;n<i.length;n++){const s=i[n];let d=this.getField(s);if(d&&d.match&&d.match(e)&&(t.push({option:s}),t.length>=a-1))break}return t}},methods:{getField(e){return this.filterField?this.filterField instanceof Function?this.filterField(e):e[this.filterField]:e},escapeRegex(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(e){const i=`^(?=.*\\b${this.escapeRegex(e).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(i,"i")},targetSelected(e){var a;let t=e.option;this.valueField&&(this.nullable&&!e.option?t=void 0:t=typeof this.valueField=="function"?this.valueField(e.option):e.option[this.valueField]);const i=(a=this.selectedOption)==null?void 0:a.option;this.selectedOption={option:e.option,selected:!0},this.$emit("update:modelValue",t),this.$emit("change",e.option,i)},reset(){if(this.searchPattern="",this.selectedOption=null,this.modelValue){let e=this.computedOptions.find(t=>{let i=t;return this.valueField&&(i=typeof this.valueField=="function"?this.valueField(t):t[this.valueField]),i===this.modelValue});e?this.selectedOption={option:e,selected:!0}:this.selectedOption=null}else this.default&&(this.selectedOption={option:this.default,selected:!0})},onClickOutside(){this.editing=!1},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},clicked(){this.editing=!1},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},watch:{options(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},modelValue(){this.editing||(this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset())},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const C={class:"autocomplete container"},b=["placeholder"],B={key:0,class:"gray"},S=["onClickCapture"];function Y(e,t,i,a,n,s){const d=f("click-outside");return r(),o("div",C,[n.editing?m((r(),o("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",onInput:t[0]||(t[0]=(...l)=>s.suggest&&s.suggest(...l)),onClick:t[1]||(t[1]=(...l)=>s.maySuggest&&s.maySuggest(...l)),"onUpdate:modelValue":t[2]||(t[2]=l=>n.searchPattern=l),placeholder:i.placeholder},null,40,b)),[[A,n.searchPattern],[d,s.onClickOutside]]):(r(),o("div",{key:1,onClick:t[3]||(t[3]=(...l)=>s.startEditing&&s.startEditing(...l)),class:"autocomplete-input"},[n.selectedOption?c(e.$slots,"option",u(y({key:1},n.selectedOption)),void 0,!0):(r(),o("span",B,v(i.placeholder),1))])),x("div",{class:V(["suggestions",{hidden:!n.editing}])},[(r(!0),o(O,null,F(s.foundOptions,l=>(r(),o("div",{onClickCapture:j=>s.targetSelected(l)},[c(e.$slots,"option",u(_(l)),void 0,!0)],40,S))),256))],2)])}const N=h(E,[["render",Y],["__scopeId","data-v-2628c455"]]),z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TiyIVBzOICGaoThbEijhqFYpQIdQKrTqYXD+hSUOS4uIouBYc/FisOrg46+rgKgiCHyCuLk6KLlLi/5JCixgPjvvx7t7j7h0gNCpMs7omAE23zVQiLmWyq1L3K0IYgYgYJIVZxpwsJ+E7vu4R4OtdlGf5n/tz9OXyFgMCEvEsM0ybeIN4etM2OO8Ti6yk5IjPicdNuiDxI9dVj984F10WeKZoplPzxCKxVOxgtYNZydSIp4gjOU2nfCHjcY7zFmetUmOte/IXhvP6yjLXaQ4jgUUsQYYEFTWUUYGNKK06KRZStB/38Q+5fplcKrnKYORYQBUaFNcP/ge/u7UKsUkvKRwHQi+O8zEKdO8CzbrjfB87TvMECD4DV3rbX20AM5+k19ta5Ajo3wYurtuaugdc7gCDT4ZiKq4UpCkUCsD7GX1TFhi4BXrXvN5a+zh9ANLUVfIGODgExoqUve7z7p7O3v490+rvB80rcsuoyXg3AAAABmJLR0QA6AAAAADh5zdhAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5wUfFDQeXQWMGwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAG9SURBVCjPhdO/a1NRFMDx7733PfOiFcGhErUoBm1DwFH8DwQnR90KLiI4aAbd/DNsQVCHLh0EqyA4uPofBDMphaRU0FgiLcm75xyH9xrNj9IzHt6Xz708rqOch62nttvrMrh2j+PmwpmEV09uueRwsdvrcvf+Kpc3NljY3iZ4jy0vo60Wp6pVTlYqZFlGlqY8X3sJwDje6XXZXF/n9qWbrNbrALz+XeXLp58z8vcfS5OxqdFsNjmx72A4BCB1VWq12kSYpinfujtTsSmqihfBYix2oyHtdnsibjQamNpkrFrEQeM4rjhYWVkZh51Op/jOdDYWEZKYY5YD4OOIwWAwjr33iAgmc+QYI0Fy1Ao5iZFYnuJwYoyoynw5xBxzhRw0R0TGoXOukHX62CLEGEmiw1wpaz5flqNkdYTElXKckAFEBJ2WpZSDOh5n13HOcWf4da5sEmdjEWHt7A1k8SIhBF74KpX/ZDMr5HLn/8URVWXhapMkSQghkC7Vx/9fVTGz4np5eefNj5/t4GCfZ48eoKok3pNl2ZEvynvP8M+AN28/WDIaDdnr9zlXO8+7rfcs/rpy7JOsnY7s9fv8Bc0zE6+cxDjNAAAAAElFTkSuQmCC";export{I as E,N as _,z as a};
//# sourceMappingURL=catalogue.0c7d60b3.js.map
