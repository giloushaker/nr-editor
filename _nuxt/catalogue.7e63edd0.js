import{b as ge,e as Qe,a as _,o as s,f as r,h as g,i as l,w as h,v,F as y,r as D,j as O,k as T,l as C,m as N,p as P,t as f,q as p,s as R,x as A,y as G,z as E,A as pe,c as b,B as $e,C as fe,n as te,D as ye,g as be,T as He}from"./entry.e7f9a814.js";import{_ as Ke}from"./Loading.53234393.js";import{g as ze,s as ve,_ as Ye,a as ke,u as Q,b as We,c as ne,d as Y,e as Te,f as Xe,h as Je,P as Ze,i as et,j as tt,k as nt,l as at,m as lt}from"./editorStore.39ffe858.js";import{_ as x,a as it}from"./SplitView.41b4dd25.js";const ot=n=>Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0)),st=(n,e)=>(a,c)=>(Qe(()=>n({...ot(a),...c.attrs},c)),()=>{var d,t;return e?(t=(d=c.slots).default)==null?void 0:t.call(d):null}),dt=ge({name:"Title",inheritAttrs:!1,setup:st((n,{slots:e})=>{var c,d,t;return{title:((t=(d=(c=e.default)==null?void 0:c.call(e))==null?void 0:d[0])==null?void 0:t.children)||null}})}),ut=ge({name:"Head",inheritAttrs:!1,setup:(n,e)=>()=>{var a,c;return(c=(a=e.slots).default)==null?void 0:c.call(a)}}),ct={emits:["change","update:modelValue"],props:{modelValue:{type:[String,Number,Array]},placeholder:{type:String,default:""}},methods:{change(n){n.target&&(this.$emit("update:modelValue",n.target.outerText),this.$emit("change"))},toHtml(n){return n.replace(/\n/g,"<br />")},onpaste(n){n.preventDefault();var e=n.clipboardData.getData("text/plain");this.$refs.div.innerText=e||"",this.$emit("update:modelValue",e),this.$emit("change")}},mounted(){this.$refs.div.innerText=this.modelValue||""},watch:{modelValue(){this.$refs.div.innerText!=this.modelValue&&(this.$refs.div.innerText=this.modelValue)}}};const rt=["placeholder"];function gt(n,e,a,c,d,t){return s(),r("div",{placeholder:a.placeholder,class:"editableDiv",onInput:e[0]||(e[0]=(...i)=>t.change&&t.change(...i)),onPaste:e[1]||(e[1]=(...i)=>t.onpaste&&t.onpaste(...i)),contenteditable:"true",ref:"div"},null,40,rt)}const ae=_(ct,[["render",gt],["__scopeId","data-v-f41e2c4f"]]),mt={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},computed:{comment:{get(){return(Array.isArray(this.item.comment)?this.item.comment[0]:this.item.comment)||""},set(n){this.item.comment=n?[n]:void 0}}},methods:{changed(){this.$emit("catalogueChanged")}}},ht=l("legend",null,"Comment",-1);function _t(n,e,a,c,d,t){const i=ae;return s(),r("fieldset",null,[ht,g(i,{modelValue:t.comment,"onUpdate:modelValue":e[0]||(e[0]=o=>t.comment=o),onChange:t.changed},null,8,["modelValue","onChange"])])}const F=_(mt,[["render",_t]]),Ct={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{id:{get(){return this.item.id},set(n){const e=this.item,a=e.getCatalogue();a.removeFromIndex(e),e.id=n,a.addToIndex(e)}}}},pt=l("legend",null,"Basics",-1),ft={class:"editorTable"},yt=l("td",null,"Unique ID:",-1),bt=l("td",null,"Name:",-1);function vt(n,e,a,c,d,t){return s(),r("fieldset",null,[pt,l("table",ft,[l("tr",null,[yt,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>t.id=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,t.id]])])]),l("tr",null,[bt,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.item.name=i),onChange:e[3]||(e[3]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.name]])])])])])}const w=_(Ct,[["render",vt]]),kt={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Tt=l("legend",null,"Publication",-1),xt={class:"editorTable"},Ft=l("td",null,"Short Name",-1),Pt=l("td",null,"Publication:",-1),It=l("td",null,"Publication Date:",-1),Rt=l("td",null,"Publication URL:",-1);function At(n,e,a,c,d,t){return s(),r("fieldset",null,[Tt,l("table",xt,[l("tr",null,[Ft,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>a.item.shortName=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.shortName]])])]),l("tr",null,[Pt,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.item.publisher=i),onChange:e[3]||(e[3]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.publisher]])])]),l("tr",null,[It,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>a.item.publicationDate=i),onChange:e[5]||(e[5]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.publicationDate]])])]),l("tr",null,[Rt,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=i=>a.item.publisherUrl=i),onChange:e[7]||(e[7]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.publisherUrl]])])])])])}const Nt=_(kt,[["render",At]]),Ot={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function wt(n,e,a,c,d,t){const i=F,o=w,u=Nt;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{class:"section",item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])],64)}const Vt=_(Ot,[["render",wt]]),St={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Et=l("label",{for:"hidden"},"Hidden",-1);function Ut(n,e,a,c,d,t){return s(),r("fieldset",null,[l("legend",null,[D(n.$slots,"default")]),h(l("input",{id:"hidden",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=i=>a.item.hidden=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},null,544),[[O,a.item.hidden]]),Et])}const $=_(St,[["render",Ut]]),Lt={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},qt={class:"section"},jt=l("legend",null,"Limit",-1),Bt={class:"editorTable"},Dt=l("td",null,"Default Cost Limit: ",-1),Gt=l("span",{class:"gray ml-10px"},"-1 = No limit",-1);function Mt(n,e,a,c,d,t){const i=F,o=w,u=$;return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Cost Types ")]),_:1},8,["item","onCatalogueChanged"]),l("div",qt,[l("fieldset",null,[jt,l("table",Bt,[l("tr",null,[Dt,l("td",null,[h(l("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=m=>a.item.defaultCostLimit=m),onChange:e[1]||(e[1]=(...m)=>t.changed&&t.changed(...m))},null,544),[[v,a.item.defaultCostLimit]]),Gt])])])])])])}const Qt=_(Lt,[["render",Mt]]),$t={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},data(){return{selectedType:null}},computed:{selected:{set(n){this.selectedType=this.item.characteristicTypes.find(e=>e.id===n)||null},get(){var n;return((n=this.selectedType)==null?void 0:n.id)||null}}},methods:{add(){this.item.characteristicTypes||(this.item.characteristicTypes=[]),this.item.characteristicTypes.push({id:ze(),name:"New Characteristic Type"}),this.changed()},del(){if(this.selectedType&&this.item.characteristicTypes){const n=this.item.characteristicTypes.indexOf(this.selectedType);n!=-1&&(this.item.characteristicTypes.splice(n,1),this.selectedType=this.item.characteristicTypes[0])}},changed(){this.$emit("catalogueChanged")},init(){var n;(n=this.item.characteristicTypes)!=null&&n.length&&(this.selectedType=this.item.characteristicTypes[0])}},created(){this.init()},watch:{item(){this.init()}}},Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV8/RCkVB4uIOASsTlZERRy1CkWoEGqFVh1MLv2CJg1Jiouj4Fpw8GOx6uDirKuDqyAIfoA4OjkpukiJ/0sKLWI8OO7Hu3uPu3eAv15mqhkcB1TNMlKJuJDJrgqdrwiiDyGMYUhipj4nikl4jq97+Ph6F+NZ3uf+HN1KzmSATyCeZbphEW8QT29aOud94ggrSgrxOfGoQRckfuS67PIb54LDfp4ZMdKpeeIIsVBoY7mNWdFQiaeIo4qqUb4/47LCeYuzWq6y5j35C8M5bWWZ6zQHkcAiliBCgIwqSijDQoxWjRQTKdqPe/gHHL9ILplcJTByLKACFZLjB/+D392a+ckJNykcBzpebPtjGOjcBRo12/4+tu3GCRB4Bq60lr9SB2Y+Sa+1tOgR0LMNXFy3NHkPuNwB+p90yZAcKUDTn88D72f0TVmg9xYIrbm9Nfdx+gCkqavkDXBwCIwUKHvd491d7b39e6bZ3w+TdnK04tslPQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+YEFgsEBONvEkAAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAfklEQVQ4y+2VOw7AMAhDTdVj5nbknnTpkCIMapqt8YYELx9LRlDLXC34IAOgQ63BAelpvrmTucY4EoD6xEvayDOsk533jVZC6f9NzR6kwbupzm3vPipgK8zpgdMpcFobuIG/AGoSoixglQHFB2UhGeC0v9wZxc4JyW9z8cG4AK8CG5AjF625AAAAAElFTkSuQmCC";const H=n=>(R("data-v-872b6126"),n=n(),A(),n),Kt=H(()=>l("legend",null,"Profil Type",-1)),zt=H(()=>l("h3",null,"Characteristic Types",-1)),Yt=["value"],Wt={class:"section add"},Xt=H(()=>l("img",{src:x},null,-1)),Jt=H(()=>l("img",{src:Ht},null,-1)),Zt=H(()=>l("h3",{class:"section"},"Selected Characteristic Type",-1)),en={class:"editorTable"},tn=H(()=>l("td",null,"Unique Id:",-1)),nn=H(()=>l("td",null,"Name:",-1));function an(n,e,a,c,d,t){return s(),r("fieldset",null,[Kt,zt,l("div",null,[h(l("select",{size:"2","onUpdate:modelValue":e[0]||(e[0]=i=>t.selected=i)},[(s(!0),r(y,null,P(a.item.characteristicTypes,i=>(s(),r("option",{value:i.id},f(i.name),9,Yt))),256))],512),[[N,t.selected]]),l("div",Wt,[l("button",{class:"bouton",onClick:e[1]||(e[1]=(...i)=>t.add&&t.add(...i))},[Xt,C(" Add ")]),l("button",{class:"bouton",onClick:e[2]||(e[2]=(...i)=>t.del&&t.del(...i))},[Jt,C(" Delete ")])]),d.selectedType?(s(),r(y,{key:0},[Zt,l("table",en,[l("tr",null,[tn,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>d.selectedType.id=i),onChange:e[4]||(e[4]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,d.selectedType.id]])])]),l("tr",null,[nn,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=i=>d.selectedType.name=i),onChange:e[6]||(e[6]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,d.selectedType.name]])])])])],64)):p("",!0)])])}const ln=_($t,[["render",an],["__scopeId","data-v-872b6126"]]),on={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function sn(n,e,a,c,d,t){const i=F,o=w,u=ln;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{class:"section",item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])],64)}const dn=_(on,[["render",sn]]),un={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},computed:{publications(){return ve([...this.catalogue.iteratePublications()],n=>(n==null?void 0:n.name)||"")}},methods:{changed(){this.$emit("catalogueChanged")}}},cn=l("legend",null,"Reference",-1),rn={class:"editorTable"},gn=l("td",null,"Publication:",-1),mn=["value"],hn=l("td",null,"Page:",-1);function _n(n,e,a,c,d,t){return s(),r("fieldset",null,[cn,l("table",rn,[l("tr",null,[gn,l("td",null,[h(l("select",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.item.publicationId=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},[(s(!0),r(y,null,P(t.publications,i=>(s(),r("option",{value:i.id},f(i.name),9,mn))),256))],544),[[N,a.item.publicationId]])])]),l("tr",null,[hn,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>a.item.page=i),onChange:e[3]||(e[3]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.page]])])])])])}const U=_(un,[["render",_n]]),Cn=""+globalThis.__publicAssetsURL("assets/icons/undo.svg"),pn=""+globalThis.__publicAssetsURL("assets/icons/redo.svg"),fn=""+new URL("collapse-all.40557dca.svg",import.meta.url).href,K=n=>(R("data-v-5cb80534"),n=n(),A(),n),yn={class:"leftPanel"},bn={class:"static sticky flex items-center h-28px z-1"},vn={class:"absolute right-30px"},kn=K(()=>l("option",{value:"none"},"No Sorting ",-1)),Tn=K(()=>l("option",{value:"asc"},"Ascending ",-1)),xn=K(()=>l("option",{value:"desc"},"Descending ",-1)),Fn=K(()=>l("option",{value:"type"},"Type",-1)),Pn=[kn,Tn,xn,Fn],In={class:"bottom static"},Rn={key:0},An=K(()=>l("label",{class:"unselectable cursor-pointer",for:"showimport"},"Show Imported",-1)),Nn=K(()=>l("span",null," Â ",-1)),On={class:"absolute right-5px"},wn=K(()=>l("label",{class:"unselectable cursor-pointer",for:"ignoreProfilesRules"},"Ignore Profiles/Rules",-1));function Vn(n,e,a,c,d,t){const i=ke,o=G("CatalogueEntry");return s(),r("div",yn,[l("div",bn,[l("span",{class:E([{grey:!n.store.can_back(),"cursor-pointer":n.store.can_back(),"hover-darken":n.store.can_back()},"bold p-4px unselectable icon"]),onClick:e[0]||(e[0]=(...u)=>n.store.back&&n.store.back(...u)),title:"Back"}," ðŸ¡° ",2),l("span",{class:E([{grey:!n.store.can_forward(),"cursor-pointer":n.store.can_forward(),"hover-darken":n.store.can_forward()},"bold p-4px unselectable ml-4px icon"]),onClick:e[1]||(e[1]=(...u)=>n.store.forward&&n.store.forward(...u)),title:"Forward"}," ðŸ¡² ",2),l("img",{class:E([{grey:!n.store.can_undo(),"cursor-pointer":n.store.can_undo(),"hover-darken":n.store.can_undo()},"bold p-4px unselectable ml-5px w-24px h-24px icon"]),onClick:e[2]||(e[2]=(...u)=>n.store.undo&&n.store.undo(...u)),title:"Undo",src:Cn},null,2),l("img",{class:E([{grey:!n.store.can_redo(),"cursor-pointer":n.store.can_redo(),"hover-darken":n.store.can_redo()},"bold p-4px unselectable ml-4px w-24px h-24px icon"]),onClick:e[3]||(e[3]=(...u)=>n.store.redo&&n.store.redo(...u)),title:"Redo",src:pn},null,2),l("div",vn,[C(" Sort "),h(l("select",{class:"h-24px p-2px !text-sm","onUpdate:modelValue":e[4]||(e[4]=u=>n.settings.sort=u)},Pn,512),[[N,n.settings.sort]])]),l("img",{onClick:e[5]||(e[5]=(...u)=>n.uistate.collapse_all&&n.uistate.collapse_all(...u)),class:"align-middle absolute right-0 p-2px hover-darken cursor-pointer icon",title:"Collapse All",src:fn}),g(i,{errors:n.catalogue.errors,showNumber:"",clickable:"",class:"z-1"},null,8,["errors"])]),l("div",{class:"top rightborder scrollable",ref:"scrollable",onScroll:e[6]||(e[6]=(...u)=>n.onscroll&&n.onscroll(...u)),onKeydownCapture:e[7]||(e[7]=(...u)=>n.keydown&&n.keydown(...u))},[g(o,{class:"mb-40px",item:n.catalogue,grouped:"",id:"editor-entries",showImported:n.showImported},null,8,["item","showImported"])],544),l("div",In,[n.catalogue.isGameSystem()?p("",!0):(s(),r("span",Rn,[h(l("input",{class:"cursor-pointer","onUpdate:modelValue":e[8]||(e[8]=u=>n.showImported=u),type:"checkbox",id:"showimport"},null,512),[[O,n.showImported]]),An])),Nn,l("span",On,[h(l("input",{class:"cursor-pointer","onUpdate:modelValue":e[9]||(e[9]=u=>n.ignoreProfilesRules=u),type:"checkbox",id:"ignoreProfilesRules"},null,512),[[O,n.ignoreProfilesRules]]),wn]),h(l("input",{"onUpdate:modelValue":e[10]||(e[10]=u=>n.filter=u),ref:"editor-searchbox",type:"search",placeholder:"search... ctrl+f",class:"w-full"},null,512),[[v,n.filter]])])])}const Sn=_(Ye,[["render",Vn],["__scopeId","data-v-5cb80534"]]),En={emits:["catalogueChanged"],setup(){return{store:Q()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},methods:{changed(){this.$emit("catalogueChanged")},add(n,e){this.store.create_child("constraints",this.item,{type:n,scope:e,value:1,select:!1})}}};const L=n=>(R("data-v-8db7f9bc"),n=n(),A(),n),Un=L(()=>l("legend",null,"Quick Constraints",-1)),Ln={class:"columns"},qn={class:"buttonList"},jn=L(()=>l("img",{src:x},null,-1)),Bn=L(()=>l("img",{src:x},null,-1)),Dn=L(()=>l("img",{src:x},null,-1)),Gn=L(()=>l("img",{src:x},null,-1)),Mn={class:"buttonList"},Qn=L(()=>l("img",{src:x},null,-1)),$n=L(()=>l("img",{src:x},null,-1)),Hn=L(()=>l("img",{src:x},null,-1)),Kn=L(()=>l("img",{src:x},null,-1));function zn(n,e,a,c,d,t){return s(),r("fieldset",null,[Un,l("div",Ln,[l("div",qn,[l("button",{class:"bouton",onClick:e[0]||(e[0]=i=>t.add("min","parent"))},[jn,C("MIN 1 IN PARENT ")]),a.withCategory?(s(),r("button",{key:0,class:"bouton",onClick:e[1]||(e[1]=i=>t.add("min","parent"))},[Bn,C("MIN 1 IN CATEGORY ")])):p("",!0),l("button",{class:"bouton",onClick:e[2]||(e[2]=i=>t.add("min","force"))},[Dn,C("MIN 1 IN FORCE ")]),l("button",{class:"bouton",onClick:e[3]||(e[3]=i=>t.add("min","roster"))},[Gn,C("MIN 1 IN ROSTER ")])]),l("div",Mn,[l("button",{class:"bouton",onClick:e[4]||(e[4]=i=>t.add("max","parent"))},[Qn,C("MAX 1 IN PARENT ")]),a.withCategory?(s(),r("button",{key:0,class:"bouton",onClick:e[5]||(e[5]=i=>t.add("max","parent"))},[$n,C("MAX 1 IN CATEGORY ")])):p("",!0),l("button",{class:"bouton",onClick:e[6]||(e[6]=i=>t.add("max","force"))},[Hn,C("MAX 1 IN FORCE ")]),l("button",{class:"bouton",onClick:e[7]||(e[7]=i=>t.add("max","roster"))},[Kn,C("MAX 1 IN ROSTER ")])])])])}const X=_(En,[["render",zn],["__scopeId","data-v-8db7f9bc"]]),Yn={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Wn(n,e,a,c,d,t){const i=F,o=w,u=U,m=$,k=X;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const Xn=_(Yn,[["render",Wn]]),Jn={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Zn(n,e,a,c,d,t){const i=F,o=w,u=U,m=$,k=X;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{item:a.item,onCatalogueChanged:t.changed,withCategory:!0,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const ea=_(Jn,[["render",Zn]]),ta={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{profileTypes(){return[...this.catalogue.iterateProfileTypes()]},charactacteristics(){var c;const n={};for(const d of this.item.characteristics||[])n[d.name]=d.$text;const e=this.catalogue.findOptionById(this.item.typeId);this.item.typeName=e==null?void 0:e.name;const a=(c=e==null?void 0:e.characteristicTypes)==null?void 0:c.map(d=>({name:d.name,typeId:d.id,$text:n[d.name]||""}));return this.item.characteristics=a,a}}},na=l("legend",null,"Characteristics",-1),aa={class:"editorTable"},la={key:0},ia=l("td",null,"Profile Type: ",-1),oa=l("option",{disabled:""},"-- Select Profile Type --",-1),sa=["value"],da={class:"editorTable"};function ua(n,e,a,c,d,t){const i=ae;return s(),r("fieldset",null,[na,l("table",aa,[t.profileTypes?(s(),r("tr",la,[ia,l("td",null,[h(l("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.typeId=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},[oa,(s(!0),r(y,null,P(t.profileTypes,o=>(s(),r("option",{value:o.id},f(o.name),9,sa))),256))],544),[[N,a.item.typeId]])])])):p("",!0)]),l("table",da,[(s(!0),r(y,null,P(t.charactacteristics,o=>(s(),r("tr",null,[l("td",null,f(o.name)+": ",1),l("td",null,[g(i,{modelValue:o.$text,"onUpdate:modelValue":u=>o.$text=u,onChange:t.changed},null,8,["modelValue","onUpdate:modelValue","onChange"])])]))),256))])])}const ca=_(ta,[["render",ua]]),ra={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function ga(n,e,a,c,d,t){const i=F,o=w,u=U,m=$,k=ca;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{class:"section",item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const ma=_(ra,[["render",ga]]),ha={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},_a=l("legend",null,"Description",-1);function Ca(n,e,a,c,d,t){const i=ae;return s(),r("fieldset",null,[_a,g(i,{modelValue:a.item.description,"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.description=o),onChange:t.changed},null,8,["modelValue","onChange"])])}const pa=_(ha,[["render",Ca]]),fa={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function ya(n,e,a,c,d,t){const i=F,o=w,u=U,m=$,k=pa;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{class:"section",item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])],64)}const ba=_(fa,[["render",ya]]),va={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},ka={class:"editorTable"},Ta=l("td",null,"Type:",-1),xa=pe('<option value="model">Model</option><option value="upgrade">Upgrade</option><option value="unit">Unit</option><option value="mount">Mount</option><option value="crew">Crew</option>',5),Fa=[xa];function Pa(n,e,a,c,d,t){return s(),r("fieldset",null,[l("legend",null,[D(n.$slots,"default")]),l("table",ka,[l("tr",null,[Ta,l("td",null,[h(l("select",{"onUpdate:modelValue":e[0]||(e[0]=i=>a.item.type=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},Fa,544),[[N,a.item.type]])])])])])}const Ia=_(va,[["render",Pa]]),Ra={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{placeholder(){return`${this.item.isLink()&&this.item.getDefaultAmount()||"unset"}`}}};const xe=n=>(R("data-v-202b280a"),n=n(),A(),n),Aa=xe(()=>l("legend",null,"Creation",-1)),Na={class:"editorTable"},Oa=xe(()=>l("td",null,"Default Amount:",-1)),wa=["placeholder"];function Va(n,e,a,c,d,t){return s(),r("fieldset",null,[Aa,l("table",Na,[l("tr",null,[Oa,l("td",null,[h(l("input",{class:"input",type:"number","onUpdate:modelValue":e[0]||(e[0]=i=>a.item.defaultAmount=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i)),placeholder:t.placeholder},null,40,wa),[[v,a.item.defaultAmount]])])])])])}const Fe=_(Ra,[["render",Va],["__scopeId","data-v-202b280a"]]),Sa={props:{modelValue:{type:[Number,String]},required:{type:Boolean,required:!1},min:{type:Number,required:!1},max:{type:Number,required:!1}},data(){return{stringValue:null,intValue:0}},watch:{modelValue(){this.refresh()}},created(){this.refresh()},methods:{refresh(){this.intValue=this.modelValue||0,this.stringValue=""+this.modelValue},update(){this.stringValue!=null&&(this.intValue=parseFloat(this.stringValue),this.$emit("update:modelValue",this.intValue),this.$emit("change"))}}},Ea=["required","min","max"];function Ua(n,e,a,c,d,t){return h((s(),r("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>d.stringValue=i),type:"number",onChange:e[1]||(e[1]=(...i)=>t.update&&t.update(...i)),required:a.required,min:a.min,max:a.max},null,40,Ea)),[[v,d.stringValue]])}const z=_(Sa,[["render",Ua]]),La={emits:["catalogueChanged"],data(){return{selectedCosts:{}}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{costTypes(){let n=[];for(let e of this.catalogue.iterateCostTypes())n.push(e);return n}},methods:{changed(){this.item.costs=Object.values(this.selectedCosts).filter(n=>isFinite(n.value)),this.$emit("catalogueChanged")},update(){this.selectedCosts={};const n=this.item.isLink()?void 0:0;for(let e of Object.values(this.costTypes))this.selectedCosts[e.id]={name:e.name,typeId:e.id,value:n};if(this.item.costs)for(let e of this.item.costs)this.selectedCosts[e.typeId]={name:e.name,typeId:e.typeId,value:e.value}}},watch:{item(){this.update()}}};const qa=n=>(R("data-v-bad156ce"),n=n(),A(),n),ja=qa(()=>l("legend",null,"Costs",-1)),Ba={class:"costs"};function Da(n,e,a,c,d,t){const i=z;return s(),r("fieldset",null,[ja,l("div",Ba,[(s(!0),r(y,null,P(t.costTypes,o=>(s(),r("div",null,[l("label",null,f(o.name)+": ",1),d.selectedCosts[o.id]!=null?(s(),b(i,{key:0,modelValue:d.selectedCosts[o.id].value,"onUpdate:modelValue":u=>d.selectedCosts[o.id].value=u,class:"input",onChange:t.changed,placeholder:"unset"},null,8,["modelValue","onUpdate:modelValue","onChange"])):p("",!0)]))),256))])])}const Pe=_(La,[["render",Da],["__scopeId","data-v-bad156ce"]]),Ga={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{fields(){return[{name:"Hidden",status:this.hidden,field:"hidden"},{name:"Collective",status:this.collective,field:"collective",title:"indicates that multiple instances of this entry may be combined into one entry with an amount"},{name:"Import",status:this.eimport,field:"import",title:"Indicates that this entry may be imported by other catalogues"}]},hidden(){return!0},collective(){var n;if((n=this.item.parent)!=null&&n.isCatalogue()){const e=this.item.parentKey;if(e==="selectionEntries"||e==="entryLinks")return 0}switch(this.item.editorTypeName){case"selectionEntryLink":return 1;case"selectionEntryGroupLink":return 1;case"selectionEntry":return 1;case"selectionEntryGroup":return 1;case"categoryLink":return-1;case"infoLink":return-1;case"profileLink":return-1;case"ruleLink":return-1;case"infoGroupLink":return-1}return 1},eimport(){var n;if((n=this.item.parent)!=null&&n.isCatalogue())return 1;switch(this.item.editorTypeName){case"selectionEntryLink":return 0;case"selectionEntryGroupLink":return 0;case"selectionEntry":return 0;case"selectionEntryGroup":return 0;case"categoryLink":return-1;case"infoLink":return-1;case"profileLink":return-1;case"ruleLink":return-1;case"infoGroupLink":return-1}return 0}}};const Ma={class:"booleans"},Qa=["id","onUpdate:modelValue","disabled"],$a=["for","title"];function Ha(n,e,a,c,d,t){return s(),r("fieldset",null,[l("legend",null,[D(n.$slots,"default",{},void 0,!0)]),l("div",Ma,[(s(!0),r(y,null,P(t.fields.filter(i=>i.status!=-1),i=>(s(),r("div",null,[h(l("input",{class:E({"cursor-pointer":i.status!==0}),id:i.field,type:"checkbox","onUpdate:modelValue":o=>a.item[i.field]=o,onChange:e[0]||(e[0]=(...o)=>t.changed&&t.changed(...o)),disabled:i.status==0},null,42,Qa),[[O,a.item[i.field]]]),l("label",{class:E({"cursor-pointer":i.status!==0,gray:i.status==0,hastooltip:!!i.title}),for:i.field,title:i.title},f(i.name),11,$a)]))),256))])])}const me=_(Ga,[["render",Ha],["__scopeId","data-v-8aa7e0e5"]]),Ka={emits:["catalogueChanged"],data(){return{filter:"",primaries:new Set,secondaries:new Set}},setup(){return{settings:$e()}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{primaryChanged(n){this.refreshCategories(this.item,n,!0)},secondaryChanged(n){this.refreshCategories(this.item,n,!1)},refreshCategories(n,e,a){n.categoryLinks||(n.categoryLinks=[]);const c=n.categoryLinks;if(a&&c.forEach(d=>d.primary=!1),e){const d=c.find(t=>t.targetId===(e==null?void 0:e.id));d&&a?d.primary=!0:d?this.removeLink(c,d):this.addLink(c,e,a)}this.changed()},removeLink(n,e){const a=n.findIndex(c=>c===e);if(a!==-1){const[c]=n.splice(a,1);this.catalogue.removeFromIndex(c);const d=c.target.links;if(d){const t=d==null?void 0:d.findIndex(i=>i===c);t!==-1&&(d==null||d.splice(t,1))}}},addLink(n,e,a=!1){var t;if(!e.isCategory())throw Error("Invalid argument, target must be a category");const c=We({targetId:e.id,target:e,id:this.catalogue.generateNonConflictingId(),primary:a,catalogue:this.catalogue,name:e.name},"categoryLinks");n.push(c),this.catalogue.addToIndex(c);const d=e;return d.links||(d.links=[]),(t=d.links)==null||t.push(c),c},changed(){this.$emit("catalogueChanged")},hasCategory(n){var a;let e=(a=this.item.categoryLinks)==null?void 0:a.find(c=>{var d;return((d=c.target)==null?void 0:d.id)===n.id});return e?e.primary?2:1:0},noPrimary(){let n=!0;if(this.item.categoryLinks){for(let e of this.item.categoryLinks)if(e.primary)return!1}return n}},computed:{count(){var n;return((n=this.item.categoryLinks)==null?void 0:n.length)||0},categories(){let n=[];for(let e of this.catalogue.iterateCategoryEntries())this.settings.showOnlyEnabledCategories&&this.hasCategory(e)==0||e.getName().toLowerCase().includes(this.filter.toLowerCase())&&n.push(e);return n}}};const za=n=>(R("data-v-7dcf8feb"),n=n(),A(),n),Ya={class:"section inline"},Wa=za(()=>l("label",{for:"onlyEnabled"},"Only show selected categories",-1)),Xa={class:"section categoryList"},Ja=["checked"],Za=["checked","onChange"],el=["id","checked","onChange"],tl=["for"];function nl(n,e,a,c,d,t){return s(),r("fieldset",null,[l("legend",null,"Categories ("+f(t.count)+")",1),h(l("input",{class:"section",type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>d.filter=i),placeholder:"Filter categories..."},null,512),[[v,d.filter]]),l("div",Ya,[h(l("input",{type:"checkbox",id:"onlyEnabled","onUpdate:modelValue":e[1]||(e[1]=i=>c.settings.showOnlyEnabledCategories=i)},null,512),[[O,c.settings.showOnlyEnabledCategories]]),Wa]),l("div",Xa,[l("div",null,[l("input",{name:"primary",type:"radio",checked:t.noPrimary,onChange:e[2]||(e[2]=i=>t.primaryChanged(null))},null,40,Ja),C(" No Primary ")]),(s(!0),r(y,null,P(t.categories,i=>(s(),r("div",{class:"category",key:i.id},[l("div",null,[l("input",{name:"primary",type:"radio",checked:t.hasCategory(i)==2,onChange:o=>t.primaryChanged(i)},null,40,Za),C(" Primary? ")]),l("div",null,[l("input",{id:`cat${i.id}`,type:"checkbox",checked:t.hasCategory(i)!=0,onChange:o=>t.secondaryChanged(i)},null,40,el),l("label",{for:`cat${i.id}`},f(i.name),9,tl)])]))),128))])])}const he=_(Ka,[["render",nl],["__scopeId","data-v-7dcf8feb"]]),al={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function ll(n,e,a,c,d,t){const i=F,o=w,u=U,m=Ia,k=Fe,S=Pe,I=me,B=he,j=X;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Selection Entry ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(S,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(I,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),g(B,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(j,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const il=_(al,[["render",ll]]),ol={props:{modelValue:String,placeholder:{type:String,default:"Search..."},min:{type:Number,default:0},max:{type:Number,default:1e3},options:{type:[Array,Function],required:!0},valueField:{type:String,default:""},filterField:{type:String,default:""},lazy:{type:Boolean,default:!1},default:{type:Object}},created(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,sleeping:this.lazy}},computed:{computedOptions(){return Array.isArray(this.options)?this.options:this.sleeping?[]:this.options()},foundOptions(){const n=this.textSearchRegex(this.searchPattern),e=[],a=this.computedOptions,c=this.max||a.length;for(let d=0;d<a.length;d++){const t=a[d];let i=this.filterField?t[this.filterField]:t;if(i&&i.match&&i.match(n)&&(e.push({option:t}),e.length>=c-1))break}return e}},methods:{escapeRegex(n){return n.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},textSearchRegex(n){const a=`^(?=.*\\b${this.escapeRegex(n).split(" ").join(".*)(?=.*\\b")}).*$`;return new RegExp(a,"i")},targetSelected(n){let e=n.option;this.valueField.length&&(e=n.option[this.valueField]),this.selectedOption={option:n.option,selected:!0},this.$emit("update:modelValue",e),this.$emit("change")},reset(){if(this.searchPattern="",this.selectedOption=null,this.modelValue){let n=this.computedOptions.find(e=>{let a=e;return this.valueField&&(a=e[this.valueField]),a===this.modelValue});n?this.selectedOption={option:n,selected:!0}:this.selectedOption=null}},onClickOutside(){this.editing=!1},suggest(){this.searchPattern.length<this.min?this.editing=!1:this.startEditing()},maySuggest(){this.sleeping=!1,this.searchPattern="",this.min==0&&this.suggest()},clicked(){this.editing=!1},startEditing(){this.editing||(this.sleeping=!1,this.editing=!0,this.searchPattern="")}},watch:{options(){this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset()},modelValue(){this.editing||(this.lazy?this.selectedOption={option:this.default,selected:!0}:this.reset())},async editing(){this.editing&&(await this.$nextTick(),this.$refs.edit&&this.$refs.edit.focus())}}};const sl={class:"autocomplete container"},dl=["placeholder"],ul={key:0,class:"gray"},cl=["onClickCapture"];function rl(n,e,a,c,d,t){const i=fe("click-outside");return s(),r("div",sl,[d.editing?h((s(),r("input",{key:0,class:"input autocomplete-input",type:"text",ref:"edit",onInput:e[0]||(e[0]=(...o)=>t.suggest&&t.suggest(...o)),onClick:e[1]||(e[1]=(...o)=>t.maySuggest&&t.maySuggest(...o)),"onUpdate:modelValue":e[2]||(e[2]=o=>d.searchPattern=o),placeholder:a.placeholder},null,40,dl)),[[v,d.searchPattern],[i,t.onClickOutside]]):(s(),r("div",{key:1,onClick:e[3]||(e[3]=(...o)=>t.startEditing&&t.startEditing(...o)),class:"autocomplete-input"},[d.selectedOption?D(n.$slots,"option",te(ye({key:1},d.selectedOption))):(s(),r("span",ul,f(a.placeholder),1))])),l("div",{class:E(["suggestions",{hidden:!d.editing}])},[(s(!0),r(y,null,P(t.foundOptions,o=>(s(),r("div",{onClickCapture:u=>t.targetSelected(o)},[D(n.$slots,"option",te(be(o)))],40,cl))),256))],2)])}const le=_(ol,[["render",rl]]),gl={setup(){return{store:Q()}},emits:["catalogueChanged"],data(){return{filter:"",val:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},computed:{allowEntries(){return!0},allowGroups(){var n;return!((n=this.item.parent)!=null&&n.isCatalogue()&&this.item.parentKey==="entryLinks")}},methods:{getNameExtra:ne,availableTargets(){if(this.type==="catalogue"){const e=this.catalogue.gameSystemId||this.catalogue.id;return Object.values(this.store.get_system(e).catalogueFiles).map(d=>({id:d.catalogue.id,name:d.catalogue.name,editorTypeName:"catalogueLink"}))}const n=[];for(const e of this.catalogue.iterateAllImported())this.targetIsValid(e)&&(e.isLink()||n.push(e));return ve(n,e=>e.name)},typeChanged(){},targetIdChanged(){this.updateLink(),this.changed()},async updateLink(){var n;if(this.type==="catalogue"&&this.item.targetId){const e=this.catalogue.gameSystemId||this.catalogue.id;await this.catalogue.reload(this.store.get_system(e));const a=this.item.target;this.item.name=((n=this.item.target)==null?void 0:n.name)||"Unknown",this.item.type=(a==null?void 0:a.editorTypeName)||this.type}else{this.catalogue.updateLink(this.item);const e=this.item.target;this.item.name=(e==null?void 0:e.name)||"Unknown",this.item.type=(e==null?void 0:e.editorTypeName)||this.item.type}},changedImportRootEntries(){this.changed()},changed(){this.$emit("catalogueChanged")},getType(n){return n.target?n.target.editorTypeName:"bullet"},itemName(n){return n.name},itemValue(n){return n.name},targetIsValid(n){return this.item.type==null||this.item.type==="category"?n.editorTypeName=="category":n.editorTypeName==this.item.type},showCatalogue(n){var e;return!(!n.catalogue||n.catalogue===((e=this.item.catalogue)==null?void 0:e.getName()))}}},Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFKSURBVDhPpZLBSgJRFIbvuTtHXyBaWEG0TRxFCAJd9B6B4CLoXaKVLVr4FK3GTRGEMwvXYYPQI1TQ4D2d/3gVnEFh7IPBc37mHD2/P5kcH63WuVssBmxMT9pjaESUOmPGhnl4miQJtBXrBfNOp/KbZXdS9kUsLAaylGXJY4Xo9jCOv6Hpi374SZpL9CuOosgYa03a7cqojHsc80tAdIUlFgK+OT8MbK2mTx5LdPHDfK81bpbPPppSEF2/NxqhhWHbbt6FzhANrHd7L2RJDx7oX7UndTXxP4ihlPq6NHL+3Drnxr4vMGu3zSwMNzKQI7Li5FATVh5eED1YzbbE04sbnEwm+mxhdBbHb2oiss3Mzyp7bLXqq2Uic7wGWXaDYh2gz2Yz0HhKwnYEC6eOMHwwnX5BKLyIeCJhCIm0dWjqthiWyc342dCWGPMHCdh2fZxOhd0AAAAASUVORK5CYII=";const V=n=>(R("data-v-5c15c63e"),n=n(),A(),n),ml=V(()=>l("legend",null,"Link",-1)),hl={class:"editorTable"},_l={key:0},Cl=V(()=>l("td",null,"Link Type:",-1)),pl={key:0,value:"selectionEntry"},fl={key:1,value:"selectionEntryGroup"},yl={key:1},bl=V(()=>l("td",null,"Link Type:",-1)),vl=V(()=>l("option",{value:"profile"},"Profile",-1)),kl=V(()=>l("option",{value:"rule"}," Rule ",-1)),Tl=V(()=>l("option",{value:"infoGroup"}," Info Group ",-1)),xl=[vl,kl,Tl],Fl=V(()=>l("td",null,"Link To:",-1)),Pl=["src"],Il=V(()=>l("img",{class:"errIcon",src:Ie},null,-1)),Rl=V(()=>l("td",null,"Target ID:",-1)),Al=V(()=>l("td",null,"Target:",-1)),Nl=["src"],Ol={class:"gray"},wl={key:0,class:"shared"},Vl={key:1,class:"catalogueName"},Sl={key:2},El=V(()=>l("td",null,null,-1)),Ul=V(()=>l("label",{for:"importRoot"},"Import Root Entries",-1));function Ll(n,e,a,c,d,t){const i=le;return s(),r("fieldset",null,[ml,l("table",hl,[a.type=="entry"?(s(),r("tr",_l,[Cl,l("td",null,[h(l("select",{onChange:e[0]||(e[0]=(...o)=>t.typeChanged&&t.typeChanged(...o)),"onUpdate:modelValue":e[1]||(e[1]=o=>a.item.type=o)},[t.allowEntries?(s(),r("option",pl,"Selection Entry")):p("",!0),t.allowGroups?(s(),r("option",fl," Selection Entry Group ")):p("",!0)],544),[[N,a.item.type]])])])):p("",!0),a.type=="info"?(s(),r("tr",yl,[bl,l("td",null,[h(l("select",{onChange:e[2]||(e[2]=(...o)=>t.typeChanged&&t.typeChanged(...o)),"onUpdate:modelValue":e[3]||(e[3]=o=>a.item.type=o)},xl,544),[[N,a.item.type]])])])):p("",!0),l("tr",null,[Fl,l("td",null,[a.item.target?(s(),r(y,{key:0},[a.item.type?(s(),r("img",{key:0,class:"linkIcon",src:`./assets/bsicons/${t.getType(a.item)}.png`},null,8,Pl)):p("",!0),C(" "+f(a.item.target.name),1)],64)):(s(),r(y,{key:1},[Il,C(" No target selected ")],64))])]),l("tr",null,[Rl,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=o=>a.item.targetId=o),onChange:e[5]||(e[5]=(...o)=>t.targetIdChanged&&t.targetIdChanged(...o))},null,544),[[v,a.item.targetId]])])]),l("tr",null,[Al,l("td",null,[g(i,{modelValue:a.item.targetId,"onUpdate:modelValue":e[6]||(e[6]=o=>a.item.targetId=o),placeholder:"Search Target...",options:t.availableTargets,valueField:"id",filterField:"name",onChange:t.targetIdChanged},{option:T(o=>[l("div",null,[l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${o.option.editorTypeName}.png`},null,8,Nl),C(" "+f(o.option.name)+" ",1),l("span",Ol,f(t.getNameExtra(o.option,!1)),1),o.option.shared?(s(),r("span",wl," (shared)")):p("",!0),t.showCatalogue(o.option)?(s(),r("span",Vl," ["+f(o.option.catalogue)+"]",1)):p("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange"])])]),a.type==="catalogue"?(s(),r("tr",Sl,[El,l("td",null,[h(l("input",{onChange:e[7]||(e[7]=(...o)=>t.changedImportRootEntries&&t.changedImportRootEntries(...o)),id:"importRoot",type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>a.item.importRootEntries=o)},null,544),[[O,a.item.importRootEntries]]),Ul])])):p("",!0)])])}const ql=_(gl,[["render",Ll],["__scopeId","data-v-5c15c63e"]]),jl={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},type:{type:String,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Bl(n,e,a,c,d,t){const i=F,o=w,u=U,m=ql,k=Pe,S=Fe,I=me,B=he,j=X;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),a.type!="catalogue"?(s(),b(u,{key:0,item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):p("",!0),g(m,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section",type:a.type},null,8,["item","catalogue","onCatalogueChanged","type"]),a.item.editorTypeName=="selectionEntryLink"?(s(),b(k,{key:1,item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):p("",!0),a.item.editorTypeName=="selectionEntryLink"?(s(),b(S,{key:2,item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):p("",!0),a.type!="catalogue"?(s(),b(I,{key:3,item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Entry ")]),_:1},8,["item","onCatalogueChanged"])):p("",!0),a.item.editorTypeName=="selectionEntryLink"||a.item.editorTypeName=="selectionEntryGroupLink"?(s(),b(B,{key:4,item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"])):p("",!0),a.type=="entry"||a.type=="category"?(s(),b(j,{key:5,item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])):p("",!0)],64)}const Dl=_(jl,[["render",Bl]]),Gl={props:{modelValue:{type:Object},placeholder:{type:String,default:"Search..."},fetch:{type:Function,required:!0},disabled:{type:Boolean,default:!1}},created(){this.reset()},data(){return{searchPattern:"",lastSearch:null,editing:!1,selectedOption:null,availableOptions:[]}},methods:{async foundOptions(){return(await this.fetch()).map(e=>({option:e}))},targetSelected(n){let e=n.option;this.selectedOption={option:n.option,selected:!0},this.$emit("update:modelValue",e),this.$emit("change",n.option),this.editing=!1},reset(){this.searchPattern="",this.selectedOption=null,this.modelValue&&(this.selectedOption={option:this.modelValue,selected:!0})},onClickOutside(){this.editing=!1},async startEditing(){this.disabled||(this.editing=!0,this.availableOptions=await this.foundOptions())},clicked(){this.editing=!1}}};const Ml={key:0,class:"gray"},Ql=["onClick"];function $l(n,e,a,c,d,t){const i=fe("click-outside");return s(),r("div",{class:E(["container",{disabled:a.disabled}])},[h((s(),r("div",{onClick:e[0]||(e[0]=(...o)=>t.startEditing&&t.startEditing(...o)),class:"iconselect-input"},[d.selectedOption?D(n.$slots,"option",te(ye({key:1},d.selectedOption))):(s(),r("span",Ml,f(a.placeholder),1))])),[[i,t.onClickOutside]]),l("div",{class:E(["suggestions",{hidden:!d.editing}])},[(s(!0),r(y,null,P(d.availableOptions,o=>(s(),r("div",{onClick:u=>t.targetSelected(o)},[D(n.$slots,"option",te(be(o)))],8,Ql))),256))],2)],2)}const Re=_(Gl,[["render",$l]]),Hl={selectionEntry:["costs","name","page","hidden","category","constraints"],selectionEntryLink:["costs","name","page","hidden","category","constraints"],selectionEntryGroup:["name","page","hidden","category","constraints","defaultSelectionEntryId"],selectionEntryGroupLink:["name","page","hidden","category","constraints","defaultSelectionEntryId"],profile:["characteristics","name","description","page","hidden"],profileLink:["characteristics","name","description","page","hidden"],rule:["name","description","page","hidden"],ruleLink:["name","description","page","hidden"],infoLink:["name","page","hidden"],infoGroup:["name",,"page","hidden"],infoGroupLink:["name","page","hidden"],force:["name","page","hidden","constraints"],category:["name","page","hidden","constraints"],categoryLink:["name","page","hidden","constraints"]},Kl={costs:"number",name:"string",page:"string",hidden:"boolean",description:"string",category:"category",constraints:"number"};function zl(n){return!isNaN(parseFloat(n))&&isFinite(n)}const Yl={components:{ErrorIcon:ke},emits:["catalogueChanged"],data(){return{value:"",selectedField:null,selectedOperation:null,selectedValue:null}},created(){this.update()},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.selectedField&&(this.item.field=this.selectedField.id),this.selectedOperation&&(this.item.type=this.selectedOperation.id),this.$emit("catalogueChanged")},fieldChanged(){this.selectedOperation=this.operations[0],this.selectedField&&(this.item.value={number:0,category:this.allCategories[0].id,string:"","string-or-number":"",boolean:!1}[this.selectedField.type]),this.changed()},update(){this.selectedField=this.fieldData.find(n=>n.id===this.item.field)||null,this.selectedOperation=this.operations.find(n=>n.id===this.item.type)||null,this.selectedField||(this.selectedField=this.fieldData[0]),this.selectedOperation||(this.selectedOperation=this.operations[0]||null)}},watch:{item(){this.update()}},computed:{inputType(){var n,e;return this.selectedField?this.selectedField.type==="category"?"category":this.selectedField.type==="defaultSelectionEntryId"?"defaultSelectionEntryId":this.selectedField.type==="number"?"number":this.selectedField.type==="boolean"?"boolean":((n=this.selectedOperation)==null?void 0:n.id)==="increment"||((e=this.selectedOperation)==null?void 0:e.id)==="decrement"?"number":"string":""},parent(){return Y(this.item)},allCategories(){let n=[];for(let e of this.catalogue.iterateCategoryEntries())n.push(e);return n},allGroupEntries(){var n;return((n=this.parent)==null?void 0:n.selectionsIterator())||[]},operations(){return this.selectedField?{number:[{id:"set",name:"Set",word:"to"},{id:"increment",name:"Increment",word:"by"},{id:"decrement",name:"Decrement",word:"by"}],string:[{id:"set",name:"Set",word:"to"},{id:"append",name:"Append",word:"to"}],"string-or-number":[{id:"set",name:"Set",word:"to"},{id:"append",name:"Append",word:"to"},{id:"increment",name:"Increment",word:"by"},{id:"decrement",name:"Decrement",word:"by"}],boolean:[{id:"set",name:"Set",word:"to"}],category:[{id:"add",name:"Add",word:""},{id:"remove",name:"Remove",word:""},{id:"set-primary",name:"Set Primary",word:"to"},{id:"unset-primary",name:"Unset Primary",word:"to"}]}[this.selectedField.type]:[]},errors(){var n,e;return((n=this.selectedField)==null?void 0:n.modifierType)==="characteristic"&&["increment","decrement"].includes(((e=this.selectedOperation)==null?void 0:e.id)||"")&&!zl(this.selectedField.value)?[{msg:`"${this.selectedField.value}" is not a valid number`}]:[]},fieldData(){if(!this.parent)return[];let n=Hl[this.parent.editorTypeName];const e=[];if(!n)return[];if(n.includes("costs"))for(const a of this.catalogue.iterateCostTypes())e.push({id:a.id,name:a.name,type:"number",modifierType:"cost"});if(n.includes("constraints"))for(const a of this.parent.constraintsIterator())e.push({id:a.id,name:Te(a),type:"number",modifierType:"constraint"});if(n.includes("characteristics")){const a=this.parent.isLink()?this.parent.target:this.parent;a!=null&&a.characteristics&&e.push(...a.characteristics.map(c=>({id:c.typeId,name:c.name,type:"string-or-number",modifierType:"characteristic",value:c.$text})))}return n.includes("category")&&e.push({id:"category",name:"Category",type:"category",modifierType:"category"}),n=n.filter(a=>["costs","constraints","category","characteristics"].includes(a)==!1),n.map(a=>({id:a,name:a,type:Kl[a],modifierType:"bullet"})).concat(e)}}};const ie=n=>(R("data-v-d0716dbe"),n=n(),A(),n),Wl=ie(()=>l("legend",null,"Modifier",-1)),Xl={class:"modifier"},Jl=["value"],Zl={class:"flex align-items flex-row"},ei=["src"],ti={class:"inline"},ni={key:1},ai=ie(()=>l("option",{value:!0},"True",-1)),li=ie(()=>l("option",{value:!1},"False",-1)),ii=[ai,li],oi=["value"],si=["value"],di={class:"mt-8px flex items-center"},ui=ie(()=>l("img",{src:Ie},null,-1)),ci={class:"ml-10px"};function ri(n,e,a,c,d,t){const i=Re,o=z;return s(),r("fieldset",null,[Wl,l("div",Xl,[d.selectedOperation?h((s(),r("select",{key:0,"onUpdate:modelValue":e[0]||(e[0]=u=>d.selectedOperation=u),onChange:e[1]||(e[1]=(...u)=>t.changed&&t.changed(...u))},[(s(!0),r(y,null,P(t.operations,u=>(s(),r("option",{value:u},f(u.name),9,Jl))),256))],544)),[[N,d.selectedOperation]]):p("",!0),g(i,{modelValue:d.selectedField,"onUpdate:modelValue":e[2]||(e[2]=u=>d.selectedField=u),fetch:()=>t.fieldData,onChange:t.fieldChanged,class:"modType min-w-200px"},{option:T(u=>[l("div",Zl,[l("img",{class:"mr-1 my-auto",src:`./assets/bsicons/${u.option.modifierType}.png`},null,8,ei),l("span",ti,f(u.option.name),1)])]),_:1},8,["modelValue","fetch","onChange"]),d.selectedOperation?(s(),r("span",ni,f(d.selectedOperation.word),1)):p("",!0),t.inputType==="number"?(s(),b(o,{key:2,onChange:t.changed,modelValue:a.item.value,"onUpdate:modelValue":e[3]||(e[3]=u=>a.item.value=u)},null,8,["onChange","modelValue"])):p("",!0),t.inputType=="boolean"?h((s(),r("select",{key:3,onChange:e[4]||(e[4]=(...u)=>t.changed&&t.changed(...u)),"onUpdate:modelValue":e[5]||(e[5]=u=>a.item.value=u)},ii,544)),[[N,a.item.value]]):p("",!0),t.inputType.includes("string")?h((s(),r("input",{key:4,onChange:e[6]||(e[6]=(...u)=>t.changed&&t.changed(...u)),type:"text","onUpdate:modelValue":e[7]||(e[7]=u=>a.item.value=u)},null,544)),[[v,a.item.value]]):p("",!0),t.inputType=="category"?h((s(),r("select",{key:5,"onUpdate:modelValue":e[8]||(e[8]=u=>a.item.value=u),onChange:e[9]||(e[9]=(...u)=>t.changed&&t.changed(...u))},[(s(!0),r(y,null,P(t.allCategories,u=>(s(),r("option",{value:u.id},f(u.name),9,oi))),256))],544)),[[N,a.item.value]]):p("",!0),t.inputType=="defaultSelectionEntryId"?h((s(),r("select",{key:6,"onUpdate:modelValue":e[10]||(e[10]=u=>a.item.value=u),onChange:e[11]||(e[11]=(...u)=>t.changed&&t.changed(...u))},[(s(!0),r(y,null,P(t.allGroupEntries,u=>(s(),r("option",{value:u.id},f(u.getName()),9,si))),256))],544)),[[N,a.item.value]]):p("",!0)]),(s(!0),r(y,null,P(t.errors,u=>(s(),r("div",di,[ui,l("span",ci,f(u.msg),1)]))),256))])}const gi=_(Yl,[["render",ri],["__scopeId","data-v-d0716dbe"]]),mi={emits:["catalogueChanged"],setup(){return{store:Q()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{changed(){this.$emit("catalogueChanged")},add(n,e,a,c){e==="id"&&(e=this.item.id);let d=this.item;this.store.create_child("conditions",d,{scope:n,field:e,type:a,value:c,childId:"any"})}}};const q=n=>(R("data-v-5d031eba"),n=n(),A(),n),hi=q(()=>l("legend",null,"Quick Conditions",-1)),_i={class:"columns"},Ci={class:"buttonList"},pi=q(()=>l("img",{src:x},null,-1)),fi=q(()=>l("img",{src:x},null,-1)),yi=q(()=>l("img",{src:x},null,-1)),bi=q(()=>l("img",{src:x},null,-1)),vi={class:"buttonList"},ki=q(()=>l("img",{src:x},null,-1)),Ti=q(()=>l("img",{src:x},null,-1)),xi=q(()=>l("img",{src:x},null,-1)),Fi=q(()=>l("img",{src:x},null,-1));function Pi(n,e,a,c,d,t){return s(),r("fieldset",null,[hi,l("div",_i,[l("div",Ci,[l("button",{class:"bouton",onClick:e[0]||(e[0]=i=>t.add("parent","selections","atLeast",1))},[pi,C("PARENT ATLEAST 1 ")]),l("button",{class:"bouton",onClick:e[1]||(e[1]=i=>t.add("force","selections","atLeast",1))},[fi,C("FORCE ATLEAST 1 ")]),l("button",{class:"bouton",onClick:e[2]||(e[2]=i=>t.add("roster","selections","atLeast",1))},[yi,C("ROSTER ATLEAST 1 ")]),l("button",{class:"bouton",onClick:e[3]||(e[3]=i=>t.add("ancestor","selections","instanceOf",1))},[bi,C("ANCESTOR INSTANCE OF ")])]),l("div",vi,[l("button",{class:"bouton",onClick:e[4]||(e[4]=i=>t.add("parent","selections","lessThan",1))},[ki,C("PARENT LESS THAN 1 ")]),l("button",{class:"bouton",onClick:e[5]||(e[5]=i=>t.add("force","selections","lessThan",1))},[Ti,C("FORCE LESS THAN 1 ")]),l("button",{class:"bouton",onClick:e[6]||(e[6]=i=>t.add("roster","selections","lessThan",1))},[xi,C("ROSTER LESS THAN 1 ")]),l("button",{class:"bouton",onClick:e[7]||(e[7]=i=>t.add("ancestor","selections","notInstanceOf",1))},[Fi,C("ANCESTOR NOT INSTANCE OF ")])])])])}const Ae=_(mi,[["render",Pi],["__scopeId","data-v-5d031eba"]]),Ii={emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0},item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Ri(n,e,a,c,d,t){const i=F,o=gi,u=Ae;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),g(u,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const Ai=_(Ii,[["render",Ri]]),Ni={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};const W=n=>(R("data-v-5aec87f9"),n=n(),A(),n),Oi=W(()=>l("legend",null,"Constraint",-1)),wi={class:"editorTable"},Vi=W(()=>l("td",null,"Unique ID:",-1)),Si={class:"constraint"},Ei=W(()=>l("option",{value:"min"},"Minimum",-1)),Ui=W(()=>l("option",{value:"max"},"Maximum",-1)),Li=W(()=>l("option",{value:"exactly"},"Exactly",-1)),qi=[Ei,Ui,Li],ji=W(()=>l("label",{for:"percent"},"Percentage?",-1));function Bi(n,e,a,c,d,t){const i=z;return s(),r("fieldset",null,[Oi,l("table",wi,[l("tr",null,[Vi,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.item.id=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},null,544),[[v,a.item.id]])])])]),l("div",Si,[h(l("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.item.type=o),onChange:e[3]||(e[3]=(...o)=>t.changed&&t.changed(...o))},qi,544),[[N,a.item.type]]),g(i,{modelValue:a.item.value,"onUpdate:modelValue":e[4]||(e[4]=o=>a.item.value=o),onChange:t.changed},null,8,["modelValue","onChange"]),l("div",null,[h(l("input",{id:"percent",type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=o=>a.item.percentValue=o),onChange:e[6]||(e[6]=(...o)=>t.changed&&t.changed(...o))},null,544),[[O,a.item.percentValue]]),ji])])])}const Di=_(Ni,[["render",Bi],["__scopeId","data-v-5aec87f9"]]);function oe(n,e,a,c=0){var d,t;for(const i of n[e]())a.push({name:i.name,editorTypeName:i.editorTypeName,id:i.id,indent:c,catalogue:i.catalogue.getName(),shared:((t=(d=M(i))==null?void 0:d.parentKey)==null?void 0:t.includes("shared"))||!1}),oe(i,e,a,c+1)}function Gi(n,e,a,c,d=0){var t,i;for(const o of n[e]())c.push({name:o.name,editorTypeName:o.editorTypeName,id:o.id,indent:d,catalogue:o.catalogue.getName(),shared:((i=(t=M(o))==null?void 0:t.parentKey)==null?void 0:i.includes("shared"))||!1}),oe(o,e,c,d+1)}function _e(n,e){let a=[];return oe(n,e,a),a}function ce(n,e){const a=[];return oe(n,e?"iterateSelectionEntriesWithRoot":"iterateSelectionEntries",a),a}function Mi(n,e){const a=[],c=n.getPrimaryCategory();return Gi(e,"iterateAllRootEntries",d=>M(d).getPrimaryCategory()===c,a),a}function Ne(n){var a,c;const e=[];for(let d of n.iterateCategoryEntries()){const t=d;t.isCatalogue()||e.push({name:t.name,editorTypeName:t.editorTypeName,id:t.id,indent:0,catalogue:t.catalogue.getName(),shared:((c=(a=M(t))==null?void 0:a.parentKey)==null?void 0:c.includes("shared"))||!1})}return e}function Qi(n){const e=[];for(const a of Object.values(n.manager.getAllCatalogueFiles())){if(!a.catalogue)continue;const c=Xe(a);e.push({name:c.name,editorTypeName:"catalogue",id:c.id,indent:0,catalogue:null,shared:!1})}return e}function $i(n){let e=0,a=Y(n);for(;a;)e++,a=a.parent;return e}function Hi(n){var t,i;let e=[],a=n,c=0;const d=$i(n)-1;for(a=Y(n);a!=null&&!a.isCatalogue();)a.editorTypeName==="selectionEntry"&&(e.push({name:a.name,id:a.id,editorTypeName:a.editorTypeName,indent:c,catalogue:a.catalogue.getName(),shared:((i=(t=M(a))==null?void 0:t.parentKey)==null?void 0:i.includes("shared"))||!1}),c++),a=a.parent;return e=e.reverse(),e.forEach((o,u)=>{o.indent=u+d}),e}function re(n){const e=_e(n,"iterateRootEntries");return e.splice(0,1),e}function Ki(n){return["self","parent","ancestor","primary-category","primary-catalogue","force","roster"].includes(n.scope)==!1}function M(n){let e=n;for(;e.parent!=null&&e.parent.editorTypeName!="gameSystem"&&e.parent.editorTypeName!="catalogue";)e=e.parent;return e}function zi(n,e){if(["primary-catalogue","roster","force","ancestor"].includes(n.scope))return ce(e,!0);const c=ce(e,!1);if(n.scope=="self"){const t=Y(n);return t?c.concat(re(t)):c}if(n.scope=="parent"){if(M(n).parentKey.includes("shared"))return ce(e,!0);const t=Y(n);return t!=null&&t.parent?c.concat(re(t.parent)):c}if(n.scope=="primary-category")return Mi(M(n),e);const d=e.findOptionById(n.scope);return d?c.concat(re(d)):c}const Yi={emits:["catalogueChanged"],data(){return{itemField:null}},props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0},childForces:{type:Boolean,default:!1},childSelections:{type:Boolean,default:!1},shared:{type:Boolean,default:!1}},methods:{getNameExtra:ne,changed(){this.$emit("catalogueChanged")},fieldChanged(){this.item.field=this.itemField.value,this.changed()},showCatalogue(n){var e;return!(!n.catalogue||n.catalogue===((e=this.item.catalogue)==null?void 0:e.getName()))}},computed:{instanceOf(){var n;return["instanceOf","notInstanceOf"].includes((n=this.item)==null?void 0:n.type)},fieldTypes(){const n=[];this.instanceOf&&n.push({name:"",value:void 0,type:null}),n.push({name:"Selections",value:"selections",type:"bullet"}),n.push({name:"Forces",value:"forces",type:"bullet"});for(const e of this.costTypes)n.push({name:e.name,value:e.id,type:"cost"}),this.item.scope==="roster"&&n.push({name:`${e.name} Limit`,value:`limit::${e.id}`,type:"cost"});return n},includeCategories(){return this.item.field!=="forces"},includeForces(){return!0},includeSelections(){return this.item.field!="forces"},parent(){return this.item.parent},costTypes(){let n=[];for(let e of this.catalogue.iterateCostTypes())n.push(e);return n},allSelections(){return this.includeSelections?Hi(this.item):[]},allCategories(){return this.includeCategories?Ne(this.catalogue):[]},allForces(){return this.includeForces?_e(this.catalogue,"forcesIterator"):[]},allScopes(){let n=[{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"}];return this.item.field!="forces"&&["condition"].includes(this.item.editorTypeName)&&(n=[{id:"self",name:"Self",editorTypeName:"bullet"},{id:"parent",name:"Parent",editorTypeName:"bullet"},{id:"ancestor",name:"Ancestor",editorTypeName:"bullet",title:"checks the condition in all parents"},{id:"primary-category",name:"Primary Category",editorTypeName:"bullet"},{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"},{id:"primary-catalogue",name:"Primary Catalogue",editorTypeName:"bullet"}]),this.item.field!=="forces"&&["repeat","constraint"].includes(this.item.editorTypeName)&&(n=[{id:"parent",name:"Parent",editorTypeName:"bullet"},{id:"force",name:"Force",editorTypeName:"bullet"},{id:"roster",name:"Roster",editorTypeName:"bullet"},{id:"primary-catalogue",name:"Primary Catalogue",editorTypeName:"bullet"}]),n.concat(this.allSelections).concat(this.allCategories).concat(this.allForces)}},watch:{"item.field":{handler(){this.item.field=="forces"&&(this.item.scope="roster"),this.itemField=this.fieldTypes.find(n=>n.value==this.item.field)},immediate:!0}}};const J=n=>(R("data-v-5ebf8d17"),n=n(),A(),n),Wi=J(()=>l("legend",null,"Query",-1)),Xi={class:"query"},Ji=["src"],Zi=J(()=>l("span",null," in ",-1)),eo=["src"],to={class:"gray"},no={key:1,class:"shared"},ao={key:2,class:"catalogueName"},lo={class:"checks"},io={key:0},oo=J(()=>l("label",{for:"shared"},"Shared",-1)),so={key:1},uo=J(()=>l("label",{for:"childSelections"},"And all child Selections",-1)),co={key:2},ro=J(()=>l("label",{for:"childForces"},"And all child Forces",-1));function go(n,e,a,c,d,t){const i=Re,o=le;return s(),r("fieldset",null,[Wi,l("div",Xi,[g(i,{modelValue:d.itemField,"onUpdate:modelValue":e[0]||(e[0]=u=>d.itemField=u),fetch:()=>t.fieldTypes,onChange:t.fieldChanged,class:"modType",disabled:t.instanceOf},{option:T(u=>[l("div",null,[l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${u.option.type}.png`},null,8,Ji),C(" "+f(u.option.name),1)])]),_:1},8,["modelValue","fetch","onChange","disabled"]),Zi,g(o,{modelValue:a.item.scope,"onUpdate:modelValue":e[1]||(e[1]=u=>a.item.scope=u),placeholder:"Search Scope...",options:t.allScopes,valueField:"id",filterField:"name",onChange:t.changed},{option:T(u=>[l("div",null,[u.option.indent>=2&&!u.selected?(s(!0),r(y,{key:0},P(u.option.indent-1,m=>(s(),r("span",null,"Â Â Â "))),256)):p("",!0),l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${u.option.editorTypeName}.png`},null,8,eo),C(" "+f(u.option.name)+" ",1),l("span",to,f(t.getNameExtra(u.option,!1)),1),u.option.shared?(s(),r("span",no," (shared)")):p("",!0),t.showCatalogue(u.option)?(s(),r("span",ao," ["+f(u.option.catalogue)+"]",1)):p("",!0)])]),_:1},8,["modelValue","placeholder","options","onChange"]),l("div",lo,[a.shared?(s(),r("div",io,[h(l("input",{onChange:e[2]||(e[2]=(...u)=>t.changed&&t.changed(...u)),id:"shared",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=u=>a.item.shared=u)},null,544),[[O,a.item.shared]]),oo])):p("",!0),a.childSelections?(s(),r("div",so,[h(l("input",{onChange:e[4]||(e[4]=(...u)=>t.changed&&t.changed(...u)),id:"childSelections",type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=u=>a.item.includeChildSelections=u)},null,544),[[O,a.item.includeChildSelections]]),uo])):p("",!0),a.childForces?(s(),r("div",co,[h(l("input",{onChange:e[6]||(e[6]=(...u)=>t.changed&&t.changed(...u)),id:"childForces",type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=u=>a.item.includeChildForces=u)},null,544),[[O,a.item.includeChildForces]]),ro])):p("",!0)])])])}const Ce=_(Yi,[["render",go],["__scopeId","data-v-5ebf8d17"]]),mo={emits:["catalogueChanged"],setup(){return{store:Q()}},props:{item:{type:Object,required:!0},withCategory:{type:Boolean,default:!1}},computed:{type(){return this.item.editorTypeName},parent(){return this.item.parent}},methods:{changed(){this.$emit("catalogueChanged")},add(n,e,a){n==="id"&&(n=this.item.id);let c=this.item;this.type==="constraint"&&(c=this.parent),this.store.create_child("modifiers",c,{field:n,type:e,value:a})}}};const Z=n=>(R("data-v-39863412"),n=n(),A(),n),ho=Z(()=>l("legend",null,"Quick Modifiers",-1)),_o={class:"columns"},Co={class:"buttonList"},po=Z(()=>l("img",{src:x},null,-1)),fo=Z(()=>l("img",{src:x},null,-1)),yo={class:"buttonList"},bo=Z(()=>l("img",{src:x},null,-1)),vo=Z(()=>l("img",{src:x},null,-1));function ko(n,e,a,c,d,t){return s(),r("fieldset",null,[ho,l("div",_o,[t.type==="constraint"?(s(),r(y,{key:0},[l("div",Co,[l("button",{class:"bouton",onClick:e[0]||(e[0]=i=>t.add("id","increment",1))},[po,C("INCREMENT 1 ")]),l("button",{class:"bouton",onClick:e[1]||(e[1]=i=>t.add("id","set",1))},[fo,C("SET 1 ")])]),l("div",yo,[l("button",{class:"bouton",onClick:e[2]||(e[2]=i=>t.add("id","decrement",1))},[bo,C("DECREMENT 1 ")]),l("button",{class:"bouton",onClick:e[3]||(e[3]=i=>t.add("id","set",0))},[vo,C("SET 0 ")])])],64)):p("",!0)])])}const Oe=_(mo,[["render",ko],["__scopeId","data-v-39863412"]]),To=[{id:"any",name:"Anything",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"unit",name:"Unit",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"model",name:"Model",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1},{id:"upgrade",name:"Upgrade",editorTypeName:"bullet",indent:0,catalogue:null,shared:!1}],xo={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{getNameExtra:ne,changed(){this.$emit("catalogueChanged")},showCatalogue(n){var e;return!(!n.catalogue||n.catalogue===((e=this.item.catalogue)==null?void 0:e.getName()))},availableTargets(){return[...To,...this.allCategories,...this.allEntries,...this.allForces,...this.allCatalogues]}},watch:{"item.scope"(){var n;this.child||(this.item.childId=((n=this.availableTargets()[0])==null?void 0:n.id)||void 0)}},computed:{childId:{get(){return this.item.childId},set(n){const e=this.item.childId;this.item.childId=n,this.catalogue.updateCondition(this.item,e)}},child(){if(!this.item.childId)return null;const n=this.availableTargets().find(e=>e.id===this.item.childId);return n||this.catalogue.findOptionById(this.item.childId)},instanceOf(){var n;return["instanceOf","notInstanceOf"].includes((n=this.item)==null?void 0:n.type)},allEntries(){return this.includeSelections?zi(this.item,this.catalogue):[]},allCategories(){return this.includeCategories?Ne(this.catalogue):[]},allForces(){return this.includeForces?_e(this.catalogue,"forcesIterator"):[]},allCatalogues(){return this.includeCatalogues?Qi(this.catalogue):[]},includeSelections(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category")},includeCategories(){return!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.item.field==="forces")},includeForces(){return this.item.scope=="self"||this.item.scope=="parent"?!1:this.item.scope=="ancestor"?!0:!(this.instanceOf&&this.item.scope==="primary-catalogue"||this.instanceOf&&this.item.scope==="primary-category"||Ki(this.item))},includeCatalogues(){return this.instanceOf&&this.item.scope==="primary-catalogue"}}};const ee=n=>(R("data-v-d22adf08"),n=n(),A(),n),Fo=ee(()=>l("legend",null,"Filter By",-1)),Po={class:"editorTable"},Io=ee(()=>l("td",null,"Of:",-1)),Ro={key:0},Ao=["src"],No=ee(()=>l("td",null,"Child ID:",-1)),Oo=ee(()=>l("td",null,"Child:",-1)),wo={key:0},Vo=["src"],So={class:"gray"},Eo={key:1,class:"shared"},Uo={key:2,class:"catalogueName"},Lo=ee(()=>l("label",{for:"shared"},"Shared?",-1));function qo(n,e,a,c,d,t){const i=le;return s(),r("fieldset",null,[Fo,l("table",Po,[l("tr",null,[Io,l("td",null,[t.child?(s(),r("span",Ro,[l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${t.child.editorTypeName}.png`},null,8,Ao),C(" "+f(t.child.name),1)])):p("",!0)])]),l("tr",null,[No,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>t.childId=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},null,544),[[v,t.childId]])])]),l("tr",null,[Oo,l("td",null,[g(i,{modelValue:t.childId,"onUpdate:modelValue":e[2]||(e[2]=o=>t.childId=o),placeholder:"Search Child...",options:t.availableTargets,valueField:"id",filterField:"name",onChange:t.changed,default:t.child,lazy:""},{option:T(o=>[o.option?(s(),r("div",wo,[o.option.indent>=1&&!o.selected?(s(!0),r(y,{key:0},P(o.option.indent,u=>(s(),r("span",null,"Â Â Â "))),256)):p("",!0),l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${o.option.editorTypeName}.png`},null,8,Vo),C(" "+f(o.option.name)+" ",1),l("span",So,f(t.getNameExtra(o.option,!1)),1),o.option.shared?(s(),r("span",Eo," (shared) ")):p("",!0),t.showCatalogue(o.option)?(s(),r("span",Uo," ["+f(o.option.catalogue)+"]",1)):p("",!0)])):p("",!0)]),_:1},8,["modelValue","placeholder","options","onChange","default"])])])]),h(l("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>a.item.shared=o),id:"shared",onChange:e[4]||(e[4]=(...o)=>t.changed&&t.changed(...o))},null,544),[[O,a.item.shared]]),Lo])}const se=_(xo,[["render",qo],["__scopeId","data-v-d22adf08"]]),jo={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{showFilterBy(){var e;return((e=Y(this.item))==null?void 0:e.parentKey)==="associations"}},methods:{changed(){this.$emit("catalogueChanged")}},components:{FilterBy:se,QuickModifiers:Oe}};function Bo(n,e,a,c,d,t){const i=F,o=Di,u=Ce,m=G("FilterBy"),k=Oe;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{catalogue:a.catalogue,item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),g(u,{catalogue:a.catalogue,item:a.item,onCatalogueChanged:t.changed,class:"section",childForces:"",childSelections:"",shared:""},null,8,["catalogue","item","onCatalogueChanged"]),t.showFilterBy?(s(),b(m,{key:0,class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue},null,8,["item","onCatalogueChanged","catalogue"])):p("",!0),g(k,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const Do=_(jo,[["render",Bo]]),Go={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Mo=l("legend",null,"Condition Group",-1),Qo={class:"editorTable"},$o=l("td",null,"Type",-1),Ho=l("option",{value:"or"},"Or",-1),Ko=l("option",{value:"and"},"And",-1),zo=[Ho,Ko];function Yo(n,e,a,c,d,t){const i=F;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),l("fieldset",null,[Mo,l("table",Qo,[l("tr",null,[$o,l("td",null,[h(l("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.type=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},zo,544),[[N,a.item.type]])])])])])],64)}const Wo=_(Go,[["render",Yo]]),Xo={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{ConditionGroup:Wo}};function Jo(n,e,a,c,d,t){const i=G("ConditionGroup");return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])])}const Zo=_(Xo,[["render",Jo]]),es={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},computed:{allowNonInstanceOf(){return["primary-category","ancestor"].includes(this.item.scope)==!1}},components:{NumberInput:z},watch:{"item.scope"(){const n=["instanceOf","notInstanceOf"];!this.allowNonInstanceOf&&!n.includes(this.item.type)&&(this.item.type=n[0])}}};const de=n=>(R("data-v-7964e672"),n=n(),A(),n),ts=de(()=>l("legend",null,"Condition",-1)),ns={class:"condition"},as=pe('<option value="lessThan" data-v-7964e672>Less Than</option><option value="greaterThan" data-v-7964e672>Greater Than</option><option value="equalTo" data-v-7964e672>Equal To</option><option value="notEqualTo" data-v-7964e672>Not Equal To</option><option value="atLeast" data-v-7964e672>At Least</option><option value="atMost" data-v-7964e672>At Most</option>',6),ls=de(()=>l("option",{value:"instanceOf"},"Instance Of",-1)),is=de(()=>l("option",{value:"notInstanceOf"},"Not Instance Of",-1)),os=de(()=>l("label",{for:"percent"},"Percentage?",-1));function ss(n,e,a,c,d,t){const i=z;return s(),r("fieldset",null,[ts,l("div",ns,[h(l("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.type=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},[t.allowNonInstanceOf?(s(),r(y,{key:0},[as],64)):p("",!0),ls,is],544),[[N,a.item.type]]),g(i,{modelValue:a.item.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.item.value=o),onChange:t.changed},null,8,["modelValue","onChange"]),l("div",null,[h(l("input",{id:"percent",type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>a.item.percentValue=o),onChange:e[4]||(e[4]=(...o)=>t.changed&&t.changed(...o))},null,544),[[O,a.item.percentValue]]),os])])])}const ds=_(es,[["render",ss],["__scopeId","data-v-7964e672"]]),us={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{Condition:ds,FilterBy:se}};function cs(n,e,a,c,d,t){const i=F,o=G("Condition"),u=Ce,m=G("FilterBy");return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),g(u,{class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue,childForces:"",childSelections:""},null,8,["item","onCatalogueChanged","catalogue"]),g(m,{class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue},null,8,["item","onCatalogueChanged","catalogue"])])}const rs=_(us,[["render",cs]]),gs={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function ms(n,e,a,c,d,t){const i=F,o=Ae;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const hs=_(gs,[["render",ms]]),_s={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Cs(n,e,a,c,d,t){const i=F,o=w,u=U,m=$;return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{catalogue:a.catalogue,item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Constraints ")]),_:1},8,["item","onCatalogueChanged"])])}const ps=_(_s,[["render",Cs]]),fs={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{getNameExtra:ne,changed(){this.$emit("catalogueChanged")}},computed:{children(){let n=[{name:"None",id:void 0,editorTypeName:"bullet"}];for(let e of this.item.entriesIterator())e.isGroup()||n.push(e);return n}}};const we=n=>(R("data-v-e2c93415"),n=n(),A(),n),ys=we(()=>l("legend",null,"Selection Entry Group",-1)),bs={class:"editorTable"},vs=we(()=>l("td",null,"Default Selection:",-1)),ks=["src"],Ts={class:"gray"},xs={key:1,class:"merror"};function Fs(n,e,a,c,d,t){const i=le;return s(),r("fieldset",null,[ys,l("table",bs,[l("tr",null,[vs,l("td",null,[t.children.length?(s(),b(i,{key:0,modelValue:a.item.defaultSelectionEntryId,"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.defaultSelectionEntryId=o),placeholder:"Search Children...",options:t.children,valueField:"id",filterField:"name",onChange:t.changed},{option:T(o=>[l("div",null,[o.option.indent>=2&&!o.selected?(s(!0),r(y,{key:0},P(o.option.indent-1,u=>(s(),r("span",null,"Â Â Â "))),256)):p("",!0),l("img",{class:"mr-1 align-middle",src:`./assets/bsicons/${o.option.editorTypeName}.png`},null,8,ks),C(" "+f(o.option.name)+" ",1),l("span",Ts,f(t.getNameExtra(o.option,!1)),1)])]),_:1},8,["modelValue","placeholder","options","onChange"])):(s(),r("span",xs,"This group does not have any child Selection Entries"))])])])])}const Ps=_(fs,[["render",Fs],["__scopeId","data-v-e2c93415"]]),Is={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Rs(n,e,a,c,d,t){const i=F,o=w,u=U,m=Ps,k=me,S=he,I=X;return s(),r(y,null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(k,{item:a.item,onCatalogueChanged:t.changed,fields:[{field:"hidden",enabled:!0,name:"Hidden"},{field:"collective",enabled:!1,name:"Collective"},{field:"import",enabled:!0,name:"Import"}],class:"section"},{default:T(()=>[C(" Entry ")]),_:1},8,["item","onCatalogueChanged"]),g(S,{item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,class:"section"},null,8,["item","catalogue","onCatalogueChanged"]),g(I,{item:a.item,onCatalogueChanged:t.changed,withCategory:!1,class:"section"},null,8,["item","onCatalogueChanged"])],64)}const As=_(Is,[["render",Rs]]),Ns={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Os=l("legend",null,"Revision",-1),ws={class:"editorTable"},Vs=l("td",null,"Revision Number:",-1);function Ss(n,e,a,c,d,t){return s(),r("fieldset",null,[Os,l("table",ws,[l("tr",null,[Vs,l("td",null,[h(l("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=i=>a.item.revision=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i))},null,544),[[v,a.item.revision]])])])])])}const Es=_(Ns,[["render",Ss]]),Us={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Ls=l("legend",null,"Catalogue",-1),qs=l("label",{class:"hastooltip",for:"library",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."},"Library",-1);function js(n,e,a,c,d,t){return s(),r("fieldset",null,[Ls,h(l("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=i=>a.item.library=i),onChange:e[1]||(e[1]=(...i)=>t.changed&&t.changed(...i)),id:"library"},null,544),[[O,a.item.library]]),qs])}const Bs=_(Us,[["render",js]]),Ds={emits:["catalogueChanged"],props:{item:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}},Gs=l("legend",null,"Information",-1),Ms={class:"editorTable"},Qs=l("td",null,"Author Name:",-1),$s=l("td",null,"Author Contact:",-1),Hs=l("td",null,"Author Website:",-1),Ks=l("td",null,"Readme:",-1);function zs(n,e,a,c,d,t){const i=ae;return s(),r("fieldset",null,[Gs,l("table",Ms,[l("tr",null,[Qs,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>a.item.authorName=o),onChange:e[1]||(e[1]=(...o)=>t.changed&&t.changed(...o))},null,544),[[v,a.item.authorName]])])]),l("tr",null,[$s,l("td",null,[g(i,{modelValue:a.item.authorContact,"onUpdate:modelValue":e[2]||(e[2]=o=>a.item.authorContact=o)},null,8,["modelValue"])])]),l("tr",null,[Hs,l("td",null,[h(l("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>a.item.authorUrl=o),onChange:e[4]||(e[4]=(...o)=>t.changed&&t.changed(...o))},null,544),[[v,a.item.authorUrl]])])]),l("tr",null,[Ks,l("td",null,[g(i,{type:"text",modelValue:a.item.readme,"onUpdate:modelValue":e[5]||(e[5]=o=>a.item.readme=o),onChange:t.changed},null,8,["modelValue","onChange"])])])])])}const Ys=_(Ds,[["render",zs]]),Ws={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function Xs(n,e,a,c,d,t){const i=F,o=w,u=U,m=$,k=Es,S=Bs,I=Ys;return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{catalogue:a.catalogue,item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["catalogue","item","onCatalogueChanged"]),g(m,{item:a.item,onCatalogueChanged:t.changed,class:"section"},{default:T(()=>[C(" Constraints ")]),_:1},8,["item","onCatalogueChanged"]),g(k,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(S,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(I,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"])])}const Js=_(Ws,[["render",Xs]]),Zs={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}},components:{NumberInput:z}};const ue=n=>(R("data-v-c7d18dd2"),n=n(),A(),n),ed=ue(()=>l("legend",null,"Repeat",-1)),td={class:"condition"},nd=ue(()=>l("label",null,"times for every ",-1)),ad={class:"bools"},ld=ue(()=>l("label",{for:"percent"},"Percentage?",-1)),id=ue(()=>l("label",{for:"percent"},"Round up?",-1));function od(n,e,a,c,d,t){const i=z;return s(),r("fieldset",null,[ed,l("div",td,[g(i,{modelValue:a.item.repeats,"onUpdate:modelValue":e[0]||(e[0]=o=>a.item.repeats=o),onChange:t.changed},null,8,["modelValue","onChange"]),nd,g(i,{modelValue:a.item.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a.item.value=o),onChange:t.changed},null,8,["modelValue","onChange"])]),l("div",ad,[l("div",null,[h(l("input",{id:"percent",type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>a.item.percentValue=o),onChange:e[3]||(e[3]=(...o)=>t.changed&&t.changed(...o))},null,544),[[O,a.item.percentValue]]),ld]),l("div",null,[h(l("input",{id:"percent",type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=o=>a.item.roundUp=o),onChange:e[5]||(e[5]=(...o)=>t.changed&&t.changed(...o))},null,544),[[O,a.item.roundUp]]),id])])])}const sd=_(Zs,[["render",od],["__scopeId","data-v-c7d18dd2"]]),dd={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},methods:{changed(){this.$emit("catalogueChanged")}}};function ud(n,e,a,c,d,t){const i=F,o=sd,u=Ce,m=se;return s(),r("div",null,[g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{catalogue:a.catalogue,item:a.item,onCatalogueChanged:t.changed},null,8,["catalogue","item","onCatalogueChanged"]),g(u,{class:"section",item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,childForces:"",childSelections:""},null,8,["item","catalogue","onCatalogueChanged"]),g(m,{class:"section",item:a.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])])}const cd=_(dd,[["render",ud]]),rd={emits:["catalogueChanged"],props:{item:{type:Object,required:!0},catalogue:{type:Object,required:!0}},computed:{ids:{get(){var n;return((n=this.item.ids)==null?void 0:n.join(", "))||""},set(n){this.item.ids=n.split(",").map(e=>e.trim())}}},methods:{changed(){this.$emit("catalogueChanged")}},components:{FilterBy:se}},gd=l("p",{class:"info"},[C(" Associations are a New Recruit specific feature allowing you to associate an entry to another, such as a unit to a bataillon. "),l("br"),C(" Be aware that associations are currently in the beta phase and may undergo modifications. "),l("br"),C(" Feel free to offer feedback or ask questions on our "),l("a",{href:"https://discord.gg/cCtqGbugwb"},"Discord server"),C(". ")],-1),md={class:"section"},hd=l("legend",null,"Temporary",-1),_d={class:"editorTable"},Cd=l("td",null,"min: (may be moved to child constraints)",-1),pd=l("td",null,"max: (may be moved to child constraints)",-1),fd=l("td",null,"label: (will be moved to name)",-1),yd=l("td",null,"labelMembers:",-1),bd=l("td",null,"of: (may be moved to ChildID to reuse filterBy)",-1),vd=l("td",null,"type: (will be removed, only affects conditions)",-1),kd=l("option",{value:"or"},"or",-1),Td=l("option",{value:"and"},"and",-1),xd=[kd,Td],Fd=l("td",null,"scope: ",-1),Pd=l("td",{class:"underline",title:"Ids are a string[], used by associationConstraints on entries, eg: to have a maximum number of commanders in a bataillion"}," ids: ",-1);function Id(n,e,a,c,d,t){const i=F,o=w,u=G("FilterBy");return s(),r("div",null,[gd,g(i,{item:a.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"]),g(o,{item:a.item,onCatalogueChanged:t.changed,class:"section"},null,8,["item","onCatalogueChanged"]),g(u,{class:"section",item:a.item,onCatalogueChanged:t.changed,catalogue:a.catalogue},null,8,["item","onCatalogueChanged","catalogue"]),l("fieldset",md,[hd,l("table",_d,[l("tr",null,[Cd,l("td",null,[h(l("input",{onInput:e[0]||(e[0]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[1]||(e[1]=m=>a.item.min=m),type:"number"},null,544),[[v,a.item.min]])])]),l("tr",null,[pd,l("td",null,[h(l("input",{onInput:e[2]||(e[2]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[3]||(e[3]=m=>a.item.max=m),type:"number"},null,544),[[v,a.item.max]])])]),l("tr",null,[fd,l("td",null,[h(l("input",{onInput:e[4]||(e[4]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[5]||(e[5]=m=>a.item.label=m),type:"text"},null,544),[[v,a.item.label]])])]),l("tr",null,[yd,l("td",null,[h(l("input",{onInput:e[6]||(e[6]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[7]||(e[7]=m=>a.item.labelMembers=m),type:"text"},null,544),[[v,a.item.labelMembers]])])]),l("tr",null,[bd,l("td",null,[h(l("input",{onInput:e[8]||(e[8]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[9]||(e[9]=m=>a.item.of=m),type:"text"},null,544),[[v,a.item.of]])])]),l("tr",null,[vd,l("td",null,[h(l("select",{onChange:e[10]||(e[10]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[11]||(e[11]=m=>a.item.type=m)},xd,544),[[N,a.item.type]])])]),l("tr",null,[Fd,l("td",null,[h(l("input",{onInput:e[12]||(e[12]=(...m)=>t.changed&&t.changed(...m)),"onUpdate:modelValue":e[13]||(e[13]=m=>a.item.scope=m),type:"text"},null,544),[[v,a.item.scope]])])]),l("tr",null,[Pd,l("td",null,[h(l("input",{"onUpdate:modelValue":e[14]||(e[14]=m=>a.item.ids=m),onInput:e[15]||(e[15]=(...m)=>t.changed&&t.changed(...m)),type:"text"},null,544),[[v,a.item.ids]])])])])])])}const Rd=_(rd,[["render",Id]]),Ad={props:{item:{type:Object,required:!0}},setup(){return{store:Q()}},methods:{gotoTarget(n){return n.isCategory()?n.parent:n},parentEntry(n){return Je(n,e=>e.getName())}},computed:{show_link_name(){return this.item instanceof Ze},links(){var n;return((n=this.item)==null?void 0:n.links)||[]},other_links(){var n;return((n=this.item)==null?void 0:n.other_links)||[]},label(){return Te(this.item)}}};const Nd={class:"text-center"},Od=l("span",{class:"gray"},"References to",-1),wd=l("p",{class:"ml-10px info"}," Click Load All to have refs from all other catalogues appear. ",-1),Vd={class:"mb-20px"},Sd=l("tr",null,[l("th",null," Catalogue "),l("th",null," Name ")],-1),Ed={class:"gray"},Ud=["onClick"],Ld={key:0},qd=l("h3",null," From conditions/constraints/modifiers/repeats: ",-1),jd={class:"mb-20px"},Bd=l("tr",null,[l("th",null," Catalogue "),l("th",null," Name "),l("th",null," Type "),l("th",null," Details ")],-1),Dd={class:"gray"},Gd=["onClick"];function Md(n,e,a,c,d,t){return s(),r("div",null,[l("h2",Nd,[Od,C(" "+f(t.label),1)]),wd,l("table",Vd,[Sd,(s(!0),r(y,null,P(t.links,i=>{var o,u;return s(),r("tr",null,[l("td",Ed,f(i.isCatalogue()?i.getName():(o=i.catalogue)==null?void 0:o.getName()),1),l("td",null,[t.show_link_name?(s(),r(y,{key:0},[C(f(i.getName()),1)],64)):(s(),r(y,{key:1},[C(f((u=i.parent)==null?void 0:u.getName()),1)],64))]),l("td",null,[l("button",{onClick:m=>c.store.goto(t.gotoTarget(i))},"Goto",8,Ud)])])}),256))]),t.other_links.length?(s(),r("div",Ld,[qd,l("table",jd,[Bd,(s(!0),r(y,null,P(t.other_links,i=>{var o,u;return s(),r("tr",null,[l("td",Dd,f(i.isCatalogue()?i.getName():(o=i.catalogue)==null?void 0:o.getName()),1),l("td",null,f(((u=t.parentEntry(i))==null?void 0:u.getName())||"No parent (likely a bug)"),1),l("td",null,f(i.editorTypeName),1),l("td",null,f(i.type)+" "+f(i.value),1),l("td",null,[l("button",{onClick:m=>c.store.goto(i)},"Goto",8,Gd)])])}),256))])])):p("",!0)])}const Qd=_(Ad,[["render",Md]]),$d={setup(){return{store:Q()}},emits:["catalogueChanged"],props:{catalogue:{type:Object,required:!0}},data(){return{links:["link","selectionEntryLink","selectionEntryGroupLink"],infoLinks:["infoLink","profileLink","ruleLink","infoGroupLink"]}},methods:{changed(){var n;this.store.set_catalogue_changed(((n=this.item)==null?void 0:n.catalogue)||this.catalogue)}},computed:{item(){return this.store.get_selected()},typeName(){var n;return(n=this.item)==null?void 0:n.editorTypeName}}};const Hd={key:0,class:"rightPanel h-full"},Kd=l("div",{class:"min-h-100px"},null,-1);function zd(n,e,a,c,d,t){const i=Vt,o=Qt,u=dn,m=Xn,k=ea,S=ma,I=ba,B=il,j=Dl,Ve=Ai,Se=Do,Ee=Zo,Ue=rs,Le=hs,qe=ps,je=As,Be=Js,De=cd,Ge=Rd,Me=Qd;return t.item?(s(),r("div",Hd,[c.store.mode==="edit"?(s(),r(y,{key:0},[t.typeName=="publication"?(s(),b(i,{key:0,item:t.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])):t.typeName=="costType"?(s(),b(o,{key:1,item:t.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])):t.typeName=="profileType"?(s(),b(u,{key:2,item:t.item,onCatalogueChanged:t.changed},null,8,["item","onCatalogueChanged"])):t.typeName=="category"?(s(),b(m,{key:3,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="force"?(s(),b(k,{key:4,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="profile"?(s(),b(S,{key:5,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="rule"?(s(),b(I,{key:6,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="selectionEntry"?(s(),b(B,{key:7,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):d.links.includes(t.typeName)?(s(),b(j,{key:8,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"entry"},null,8,["item","catalogue","onCatalogueChanged"])):d.infoLinks.includes(t.typeName)?(s(),b(j,{key:9,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"info"},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="modifier"?(s(),b(Ve,{key:10,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="constraint"?(s(),b(Se,{key:11,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="conditionGroup"?(s(),b(Ee,{key:12,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="condition"?(s(),b(Ue,{key:13,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="categoryLink"?(s(),b(j,{key:14,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"category"},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="modifierGroup"?(s(),b(Le,{key:15,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="infoGroup"?(s(),b(qe,{key:16,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="selectionEntryGroup"?(s(),b(je,{key:17,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="catalogueLink"?(s(),b(j,{key:18,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="catalogue"||t.typeName=="gameSystem"?(s(),b(Be,{key:19,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="repeat"?(s(),b(De,{key:20,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):t.typeName=="association"?(s(),b(Ge,{key:21,item:t.item,catalogue:a.catalogue,onCatalogueChanged:t.changed,type:"catalogue"},null,8,["item","catalogue","onCatalogueChanged"])):p("",!0),Kd],64)):c.store.mode==="references"?(s(),b(Me,{key:1,item:t.item,catalogue:a.catalogue},null,8,["item","catalogue"])):p("",!0)])):p("",!0)}const Yd=_($d,[["render",zd]]),Wd=ge({components:{LeftPanel:Sn},data(){return{error:null,item:null,systemFiles:null,loading:!1,saving:!1,failed:!1,id:"",cat:null,defaults:{},key:1}},setup(){return{cataloguesStore:et(),store:Q(),uistate:tt()}},mounted(){this.store.init(this),globalThis.$catalogue=this.cat,window.addEventListener("beforeunload",this.beforeUnload),document.addEventListener("keydown",this.onKeydown,!0)},updated(){this.store.init(this),globalThis.$catalogue=this.cat},unmounted(){window.removeEventListener("beforeunload",this.beforeUnload),document.removeEventListener("keydown",this.onKeydown,!0)},activated(){window.addEventListener("beforeunload",this.beforeUnload)},deactivated(){window.removeEventListener("beforeunload",this.beforeUnload)},beforeRouteUpdate(){this.id&&this.store.save_state()},beforeRouteLeave(){this.id&&this.store.save_state()},computed:{changed(){var n;return this.cat&&((n=this.store.get_catalogue_state(this.cat))==null?void 0:n.changed)||!1},unsaved(){var n;return this.cat&&((n=this.store.get_catalogue_state(this.cat))==null?void 0:n.unsaved)||!1},query(){return{gameSystemId:this.$route.query.systemId,catalogueId:this.$route.query.id||this.$route.query.systemId}},route_is_catalogue(){return this.$route.name==="catalogue"}},watch:{query:{async handler(n){if(!this.route_is_catalogue)return;const{gameSystemId:e,catalogueId:a}=n;this.id=a||e,this.store.unselect();try{await this.load(e,this.id),this.error=null,this.$nextTick(()=>{this.store.$nextTickResolve&&this.store.$nextTickResolve()})}catch(c){console.error(c),this.error=c}},immediate:!0}},methods:{async save_all(){var n;try{this.failed=await this.store.save_all((n=this.cat)==null?void 0:n.getSystemId())}finally{this.saving=!1}},async save(){try{await this.store.save_catalogue(this.systemFiles,this.cat)&&notify("Incremented 1 catalogue's revision"),this.failed=!1}catch{this.failed=!0}},async test(){var n;if(!((n=this.systemFiles)!=null&&n.github)){console.error("no github set");return}console.log("revision",await nt(this.systemFiles.github,this.cat))},async beforeUnload(n){if(!globalThis._closeWindow&&(this.loading||this.store.save_state(),this.unsaved||this.store.unsavedCount)){const e="You have unsaved changes that will be lost";return n.returnValue=e,electron&&setTimeout(async()=>{await at({message:"You have unsaved changes that will be lost?",buttons:["Cancel","Leave"],defaultId:0,cancelId:0,type:"question"})===1&&(globalThis._closeWindow=!0,lt())}),!1}},onKeydown(n){n.ctrlKey&&n.key.toLowerCase()=="s"&&(n.preventDefault(),n.stopPropagation(),this.save())},load_state(n){this.defaults=n},async load(n,e){if(!e&&!n)throw new Error("couldn't load catalogue: no id");try{this.loading=!0;const a=await this.store.get_or_load_system(n);let c=a.getLoadedCatalogue({targetId:e||n});if(c||(c=await a.loadCatalogue({targetId:e||n})),this.systemFiles=a,this.cat=c,c){const d=this.uistate.get_data(c.id);this.load_state(d)}}finally{this.loading=!1}}}});const Xd={class:"h-full"},Jd={key:0},Zd={class:"ml-10px"},eu={class:"text-slate-300"},tu={key:1,class:"status mx-2 text-red"},nu={key:2,class:"status mx-2"};function au(n,e,a,c,d,t){const i=dt,o=ut,u=Ke,m=G("LeftPanel"),k=Yd,S=it;return s(),r("div",Xd,[g(o,null,{default:T(()=>[g(i,null,{default:T(()=>{var I;return[C(f(n.loading?"Loading...":[(I=n.cat)==null?void 0:I.getName(),"NR-Editor"].filter(B=>B).join(" - ")),1)]}),_:1})]),_:1}),n.error?(s(),r("span",Jd,f(n.error),1)):n.loading?(s(),b(u,{key:1})):n.cat?(s(),b(S,{key:2,class:"h-full",draggable:"",showMiddle:"",id:"catalogueView"},{left:T(()=>[(s(),b(m,{ref:"leftpanel",class:"h-full",catalogue:n.cat,defaults:n.defaults,key:n.key,keepalive:""},null,8,["catalogue","defaults"]))]),middle:T(()=>[n.store.selectedItem!=null?(s(),b(k,{key:0,class:"h-full overflow-y-auto",catalogue:n.cat},null,8,["catalogue"])):p("",!0)]),_:1})):p("",!0),n.cat&&n.route_is_catalogue?(s(),b(He,{key:3,to:"#titlebar-content"},[l("span",Zd,[C(" Editing "+f(n.cat.name)+" ",1),l("span",eu,"v"+f(n.cat.revision),1)]),n.store.unsavedCount?(s(),r("button",{key:0,class:"bouton save ml-10px",onClick:e[0]||(e[0]=(...I)=>n.save_all&&n.save_all(...I))}," Save All ")):n.failed?(s(),r("span",tu,"failed to save")):(s(),r("span",nu,"saved")),n.systemFiles&&!n.systemFiles.allLoaded?(s(),r("button",{key:3,class:"bouton load ml-10px",onClick:e[1]||(e[1]=(...I)=>n.systemFiles.loadAll&&n.systemFiles.loadAll(...I))},"Load all refs")):p("",!0)])):p("",!0)])}const du=_(Wd,[["render",au],["__scopeId","data-v-39c7790a"]]);export{du as default};
//# sourceMappingURL=catalogue.7e63edd0.js.map
