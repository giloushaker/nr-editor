import{_ as K,a as re}from"./CreateSystem.1aac09fd.js";import{t as ee,v as ue,w as te,x as R,c as m,y as j,z as de,q,u as M,A as b,B as ce,C as O,D as I}from"./editorStore.5c906c74.js";import{e as Y,$ as z,o as r,b as d,i as s,u as C,F as w,s as v,a as V,w as k,v as U,a0 as me,t as h,a1 as G,a2 as ge,x as X,D as T,E as J,l as g,h as x,H as W,I as L,a3 as he,a4 as pe,a5 as _e,c as F,q as P,C as fe,p as se,G as ye,z as be,Y as ve,Z as Ce,k as ke,a6 as we,r as Q,T as Se,a7 as Ie}from"./entry.bd384ed6.js";import{a as ae,b as xe,_ as Ae,c as oe}from"./warning_sign.6c19ee9b.js";const Ue=["disabled"],Fe=Y({__name:"UploadJson",emits:["uploaded"],setup(e,{emit:t}){const o=z(null),l=z(!1);async function i(n){var c;try{l.value=!0;const u=[...((c=n.target)==null?void 0:c.files)||[]];if(!u){l.value=!1;return}const _=[];for(const f of u.filter(S=>ee(S.name))){const S=ue(f.name)?await f.arrayBuffer():await f.text(),A=await te(S,R(f.name));m(A).fullFilePath=f.name,_.push(A)}_.length&&t("uploaded",_),l.value=!1}catch(u){console.error(u),l.value=!1}}async function a(){o.value.click()}return(n,c)=>(r(),d(w,null,[s("input",{type:"file",accept:".gst, .gstz, .xml, .zip, .cat, .catz, .json",multiple:"",onChange:i,class:"invisible",ref_key:"fileinput",ref:o},null,544),s("button",{onClick:a,class:"bouton",disabled:C(l)},[C(l)?(r(),d(w,{key:1},[v(" ... ")],64)):(r(),d(w,{key:0},[v(" Import Catalogues ")],64))],8,Ue)],64))}});const le=V(Fe,[["__scopeId","data-v-959d97f5"]]),Ee=["disabled"],ne=Y({__name:"ImportFromGithub",emits:["uploaded"],setup(e,{emit:t}){const o=z(""),l=z(!1);async function i(a){if(!a||j(a)!==a){console.log("bad url",a);return}try{l.value=!0;const n=a.split("/").slice(-2).join("/"),c=n.split("/")[1],u=`https://api.github.com/repos/${n}`,_=(await $fetch(u)).default_branch,f=`https://codeload.github.com/${n}/zip/refs/heads/${_}`,S=await $fetch(`https://corsproxy.io/?${f}`),A=await de(S,`${c}-${_}`),D=[];for(const[B,y]of Object.entries(A)){const $=R(B);if(ee($)){const N=await te(y,$);D.push(N),m(N).fullFilePath=B}}D.length&&t("uploaded",D),o.value=""}catch(n){console.error(n)}finally{l.value=!1}}return(a,n)=>(r(),d(w,null,[k(s("input",{type:"text",class:"bouton !font-normal","onUpdate:modelValue":n[0]||(n[0]=c=>me(o)?o.value=c:null),placeholder:'repo eg: "BSData/wh40k"'},null,512),[[U,C(o)]]),s("button",{onClick:n[1]||(n[1]=c=>i(C(j)(C(o)))),class:"bouton",disabled:C(j)(C(o))==null||C(l)},h(C(l)?"...":"Import from github"),9,Ee)],64))}}),De={emits:["new","itemClicked","itemDoubleClicked"],setup(){return{cataloguesStore:q(),store:M()}},props:{items:{type:Array,required:!0},modelValue:{required:!0}},methods:{getDataObject:m,getType(e){var t;return e.gameSystem?{icon:"assets/icons/system1.png",order:1}:(t=e.catalogue)!=null&&t.library?{icon:"assets/icons/library.png",order:2}:{icon:"assets/icons/book.png",order:3}},elementDoubleClicked(e){this.$emit("itemDoubleClicked",e)},elementClicked(e){this.$emit("itemClicked",e)},changed(e){return this.store.get_catalogue_state(e).isChangedOnDisk},errors(e){var l;const t=[];(l=this.store.get_catalogue_state(e))!=null&&l.unsaved&&t.push({severity:"info",msg:"Unsaved"});const o=m(e).errors;if(o!=null&&o.length){const i={};for(const n of o)n.severity?G(i,n.severity):G(i,"error");let a=[];for(const n in i)a.push(`${i[n]} ${ge(n)}${i[n]===1?"":"s"}`);o.find(n=>n.severity==="error")?t.push({severity:"error",msg:`Has ${a.join(", ")}`}):o.find(n=>n.severity==="warning")&&t.push({severity:"warning",msg:`Has ${a.join(", ")}`})}return t},edited(e){return this.cataloguesStore.getEdited(b(e))},name(e){return m(e).name},add(){this.$emit("new")}},computed:{sortedItems(){return X(X(this.items,e=>this.name(e)),e=>this.getType(e).order)}},components:{ErrorIcon:ae}};const Z=e=>(W("data-v-f50dea5a"),e=e(),L(),e),$e={class:"items"},Ne=["onClick","onDblclick"],Pe=["src"],Ve={class:"error flex flex-row"},Be={key:0,class:"my-auto",title:`This file was changed by another program.
You may want to reload the system through the Systems tab`},ze=Z(()=>s("img",{class:"my-auto align-text-bottom",src:xe},null,-1)),Te=[ze],je=Z(()=>s("img",{class:"w-40px h-40px",src:Ae},null,-1)),Oe=Z(()=>s("div",{class:"bold text-blue"},"New",-1)),Ge=[je,Oe];function Je(e,t,o,l,i,a){const n=ae;return r(),d("div",$e,[(r(!0),d(w,null,T(a.sortedItems,c=>(r(),d("div",{class:J(["relative item unselectable",{edited:a.edited(c),selected:c===o.modelValue}]),onClick:u=>a.elementClicked(c),onDblclick:u=>a.elementDoubleClicked(c)},[s("img",{class:"icon",src:a.getType(c).icon},null,8,Pe),s("div",null,h(a.name(c)),1),s("div",Ve,[a.changed(c)?(r(),d("span",Be,Te)):g("",!0),x(n,{errors:a.errors(c)},null,8,["errors"])])],42,Ne))),256)),s("div",{class:"relative item add unselectable",onClick:t[0]||(t[0]=(...c)=>a.add&&a.add(...c))},Ge)])}const ie=V(De,[["render",Je],["__scopeId","data-v-f50dea5a"]]),Re={emits:["edit","delete"],props:{catalogue:{type:Object,required:!0}},setup(){return{catalogueStore:q(),store:M()}},data(){return{deletePopup:!1,changeFormatPopup:!1,format:"gst",deleteExistingFiles:!1}},methods:{download_file(){const e=m(this.catalogue),t=this.store.get_system(e.gameSystemId||e.id).getLoadedCatalogue({targetId:e.id}),o=ce(t||e),l=e.fullFilePath?O(he(e.fullFilePath)):e.name,i=e.gameSystemId?"cat":"gst";pe(`${l}.${i}`,"application/xml",o)},popup_change_format(){this.changeFormatPopup=!0},async change_format(e,t){const o=m(this.catalogue),i=this.store.get_system(o.gameSystemId||o.id).getAllCatalogueFiles();for(const a of i){const n=m(a),c=n.fullFilePath;if(c){t&&await _e(c);const u=!!a.gameSystem;let _;const f=O(c);switch(e){case"gstz":_=u?"gstz":"catz";break;case"gst":_=u?"gst":"cat";break;case"json":_="json";break}n.fullFilePath=`${f}.${_}`,console.log(n.fullFilePath),this.store.saveCatalogue(a)}}}},computed:{has_duplicate_filename(){const e=m(this.catalogue),o=this.store.get_system(e.gameSystemId||e.id).getAllCatalogueFiles(),l={};for(const i of o){const n=m(i).fullFilePath;n&&G(l,O(n))}return Object.values(l).find(i=>i>1)},is_catalogue(){return!!this.catalogue.catalogue},electron(){return!!globalThis.electron},imports(){return this.cataloguedata.catalogueLinks||[]},refs(){return this.catalogueStore.getDependents(b(this.catalogue))||[]},cataloguedata(){return m(this.catalogue)},isSystem(){return!this.cataloguedata.gameSystemId}}};const p=e=>(W("data-v-f5705f13"),e=e(),L(),e),qe={class:"details"},Me={key:0},Ye=p(()=>s("span",{class:"grey hastooltip",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."}," Library: ",-1)),We=p(()=>s("span",{class:"grey"},"Id:",-1)),Le=p(()=>s("span",{class:"grey"},"path:",-1)),Ze={style:{"word-break":"break-all"}},He={key:1},Xe=p(()=>s("span",{class:"grey"},"authorUrl:",-1)),Qe=p(()=>s("span",{class:"grey"},"authorContact:",-1)),Ke=p(()=>s("span",{class:"grey"},"authorName:",-1)),et={key:2},tt=p(()=>s("span",{class:"bold"},"imports:",-1)),st={class:"ml-10px"},at={key:3},ot=p(()=>s("span",{class:"bold"},"imported by:",-1)),lt={class:"ml-10px"},nt={class:"section boutons"},it=p(()=>s("p",{class:"info"}," To quickly edit a catalogue, you can double-click on it. ",-1)),rt=p(()=>s("label",{for:"newFormat"},"New Format:",-1)),ut=p(()=>s("option",{value:"gstz"},".gstz/.catz (Zipped XML)",-1)),dt=p(()=>s("option",{value:"gst"},".gst/.cat (XML)",-1)),ct={key:0,value:"json"},mt={key:0},gt=p(()=>s("span",{class:"gray"},"Note: Cannot convert to json because a catalogue has the same filename as the gst",-1)),ht=[gt],pt=p(()=>s("label",{for:"deleteExisting"},"Delete existing files:",-1));function _t(e,t,o,l,i,a){var c;const n=ye;return r(),d("fieldset",qe,[s("div",null,[s("legend",null,h(a.cataloguedata.name),1),a.is_catalogue?(r(),d("div",Me,[Ye,v(" "+h(a.cataloguedata.library),1)])):g("",!0),s("div",null,[We,v(" "+h(a.cataloguedata.id),1)]),s("div",null,[Le,v(),s("span",Ze,h(a.cataloguedata.fullFilePath),1)]),a.electron?(r(),d("div",He,[Xe,v(" "+h(a.cataloguedata.authorUrl),1)])):g("",!0),s("div",null,[Qe,v(" "+h(a.cataloguedata.authorContact),1)]),s("div",null,[Ke,v(" "+h(a.cataloguedata.authorName),1)]),(c=a.cataloguedata.catalogueLinks)!=null&&c.length?(r(),d("div",et,[tt,s("div",st,[(r(!0),d(w,null,T(a.cataloguedata.catalogueLinks,u=>(r(),d("div",null,[s("span",{class:J({grey:!u.importRootEntries})},h(u.name),3)]))),256))])])):g("",!0),a.refs.length&&!a.isSystem?(r(),d("div",at,[ot,s("div",lt,[(r(!0),d(w,null,T(a.refs,u=>(r(),d("div",null,[s("span",{class:J({grey:!u.importRootEntries})},h(u.sourceName),3)]))),256))])])):g("",!0)]),s("div",nt,[s("button",{class:"bouton",onClick:t[0]||(t[0]=u=>e.$emit("edit",o.catalogue))},"Edit"),s("button",{class:"bouton",onClick:t[1]||(t[1]=u=>i.deletePopup=!0)},"Delete"),s("button",{class:"bouton",onClick:t[2]||(t[2]=(...u)=>a.download_file&&a.download_file(...u))},"Download"),a.isSystem?(r(),d("button",{key:0,class:"bouton",onClick:t[3]||(t[3]=(...u)=>a.popup_change_format&&a.popup_change_format(...u))},"Change File Format")):g("",!0),it]),i.deletePopup?(r(),F(n,{key:0,button:"Confirm",text:"Cancel",onButton:t[4]||(t[4]=u=>e.$emit("delete",o.catalogue)),modelValue:i.deletePopup,"onUpdate:modelValue":t[5]||(t[5]=u=>i.deletePopup=u)},{default:P(()=>[s("div",null,"Are you sure you want to delete this "+h(a.is_catalogue?"catalogue":"Game System")+"?",1)]),_:1},8,["modelValue"])):g("",!0),i.changeFormatPopup?(r(),F(n,{key:1,button:"Confirm",text:"Cancel",onButton:t[8]||(t[8]=u=>a.change_format(i.format,i.deleteExistingFiles)),modelValue:i.changeFormatPopup,"onUpdate:modelValue":t[9]||(t[9]=u=>i.changeFormatPopup=u)},{default:P(()=>[s("div",null,[rt,k(s("select",{id:"newFormat","onUpdate:modelValue":t[6]||(t[6]=u=>i.format=u)},[ut,dt,a.has_duplicate_filename?g("",!0):(r(),d("option",ct,".json (JSON)"))],512),[[fe,i.format]])]),a.has_duplicate_filename?(r(),d("div",mt,ht)):g("",!0),s("div",null,[pt,k(s("input",{type:"checkbox",id:"deleteExisting","onUpdate:modelValue":t[7]||(t[7]=u=>i.deleteExistingFiles=u)},null,512),[[se,i.deleteExistingFiles]])])]),_:1},8,["modelValue"])):g("",!0)])}const ft=V(Re,[["render",_t],["__scopeId","data-v-f5705f13"]]),yt={emits:["create"],props:{catalogue:{type:Object,required:!0}},computed:{cataloguedata(){return m(this.catalogue)}}};const E=e=>(W("data-v-3d1f2a25"),e=e(),L(),e),bt={class:"details"},vt={class:"editorTable"},Ct=E(()=>s("td",null,[s("label",{for:"name"}," name: ")],-1)),kt=E(()=>s("td",null,[s("label",{for:"authorUrl"}," authorUrl: ")],-1)),wt=E(()=>s("td",null,[s("label",{for:"authorContact"}," authorContact: ")],-1)),St=E(()=>s("td",null,[s("label",{for:"authorName"}," authorName: ")],-1)),It=E(()=>s("td",null,"id:",-1)),xt=E(()=>s("td",null,[s("label",{for:"library",class:"hastooltip",title:"indicates that this catalogue is used to store data, no forces may be created from it if true."}," library: ")],-1));function At(e,t,o,l,i,a){return r(),d("fieldset",bt,[s("legend",null,h(a.cataloguedata.name),1),s("table",vt,[s("tr",null,[Ct,s("td",null,[k(s("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=n=>a.cataloguedata.name=n)},null,512),[[U,a.cataloguedata.name]])])]),s("tr",null,[kt,s("td",null,[k(s("input",{type:"text",id:"authorUrl","onUpdate:modelValue":t[1]||(t[1]=n=>a.cataloguedata.authorUrl=n)},null,512),[[U,a.cataloguedata.authorUrl]])])]),s("tr",null,[wt,s("td",null,[k(s("input",{type:"text",id:"authorContact","onUpdate:modelValue":t[2]||(t[2]=n=>a.cataloguedata.authorContact=n)},null,512),[[U,a.cataloguedata.authorContact]])])]),s("tr",null,[St,s("td",null,[k(s("input",{type:"text",id:"authorName","onUpdate:modelValue":t[3]||(t[3]=n=>a.cataloguedata.authorName=n)},null,512),[[U,a.cataloguedata.authorName]])])]),s("tr",null,[It,s("td",null,[k(s("input",{type:"text",class:"gray",id:"id","onUpdate:modelValue":t[4]||(t[4]=n=>a.cataloguedata.id=n)},null,512),[[U,a.cataloguedata.id]])])]),s("tr",null,[xt,s("td",null,[k(s("input",{type:"checkbox",id:"library","onUpdate:modelValue":t[5]||(t[5]=n=>a.cataloguedata.library=n)},null,512),[[se,a.cataloguedata.library]])])])]),s("button",{class:"bouton",onClick:t[6]||(t[6]=n=>e.$emit("create",o.catalogue))}," Create Catalogue ")])}const Ut=V(yt,[["render",At],["__scopeId","data-v-3d1f2a25"]]),Ft=Y({components:{UploadJson:le,CataloguesDetail:ft,ImportFromGithub:ne,CataloguesCreate:Ut,SelectFile:K,IconContainer:ie,SplitView:oe},head(){return{title:"New Recruit - Editor"}},data(){return{msg:"",selectedItem:null,mode:"edit",editingItem:null,failed:!1}},setup(){return{cataloguesStore:q(),store:M(),settings:be()}},created(){this.store.init(this.$router),electron||this.store.load_systems_from_db()},activated(){window.addEventListener("beforeunload",this.beforeUnload)},deactivated(){window.removeEventListener("beforeunload",this.beforeUnload)},computed:{has_unsaved_changes(){const e=this.store.unsavedChanges;for(const t in e)if(e[t].unsaved)return!0;return!1},electron(){return!!globalThis.electron},filter(){var t;const e=(t=this.$route.query)==null?void 0:t.id;if(e)return e.split(",")},systems(){if(this.filter){const e={};for(const t of this.filter){const o=this.store.gameSystems[t];return o&&(e[t]=o),e}}return this.store.gameSystems}},methods:{githubHoverTitle(e){return e.discovered?`using discovered .git repo at ${e.githubUrl}
use a publication name="Github", url="https://github.com/{owner}/{repo}" in the gameSystem to overwrite.`:`using repo at ${e.githubUrl}`},async saveAll(){var t;let e=!1;try{for(const o of Object.values(this.systems)){const l=await this.store.prompt_revision(o);for(const i of o.getAllLoadedCatalogues())(t=this.store.get_catalogue_state(i))!=null&&t.unsaved&&this.store.save_catalogue(o,i,l)}}catch{e=!0}this.failed=e},async beforeUnload(e){if(!globalThis._closeWindow){if(this.store.unsavedCount){const t="You have unsaved changes that will be lost";e.returnValue=t,electron&&setTimeout(async()=>{await ve({message:"You have unsaved changes that will be lost?",buttons:["Cancel","Leave"],defaultId:0,cancelId:0,type:"question"})===1&&(globalThis._closeWindow=!0,Ce())})}return!1}},systemAndCatalogues(e){let t=[];return e.gameSystem&&t.push(e.gameSystem),e.catalogueFiles&&t.push(...Object.values(e.catalogueFiles)),t},itemClicked(e){this.selectedItem=e,this.mode="edit"},itemDoubleClicked(e){const t=m(e).id,o=m(e).gameSystemId||t;this.$router.push({name:"catalogue",query:{systemId:o,id:t}})},newCatalogue(e){if(!e.gameSystem)return;const t=e.gameSystem.gameSystem;this.mode="create",this.selectedItem={catalogue:{library:!1,id:ke(),name:"New Catalogue",gameSystemId:t.id,gameSystemRevision:t.revision,revision:1}}},getCatExtension(e){switch(R(e)){case"json":return"json";case"gstz":return"catz";default:case"gst":return"cat"}},createCatalogue(e){const t=this.store.get_system(e.catalogue.gameSystemId),o=JSON.parse(JSON.stringify(e));if(o.catalogue.battleScribeVersion="2.03",electron){if(!t.gameSystem)throw new Error("Cannot create catalogue: no game system");const l=m(t.gameSystem).fullFilePath;if(!l)throw new Error("Cannot create catalogue: game system has no path set");const i=o.catalogue.name;if(!i)throw new Error("Cannot create catalogue: no name provided");const a=we(l);m(o).fullFilePath=`${a}/${i}.${this.getCatExtension(l)}`}t.setCatalogue(o),this.cataloguesStore.setEdited(b(o),!0),this.store.set_catalogue_changed(o,!0),this.store.get_catalogue_state(o).incremented=!0,this.selectedItem=o,electron||I.catalogues.put({content:o,id:b(e)}),this.mode="edit"},deleteCatalogue(e){console.log("Deleted catalogue",e);const t=m(e),o=t.gameSystemId||t.id;if(e.catalogue)this.store.get_system(o).removeCatalogue(e),electron||I.catalogues.delete(b(e));else if(e.gameSystem){const l=this.store.get_system(o);for(const i of Object.values(l.catalogueFiles)){const a=b(i);I.catalogues.delete(a)}I.catalogues.delete(b(l.gameSystem)),I.systems.delete(b(l.gameSystem)),this.store.delete_system(o)}this.selectedItem=null},filesUploaded(e){console.log("Uploaded",e.length,"files",e);const t=e.filter(l=>l.gameSystem);for(const l of t){const i=l.gameSystem.id,a=b(l);this.store.get_system(i).setSystem(l),electron||I.systems.put({content:l,id:a}),this.cataloguesStore.updateCatalogue(l.gameSystem),this.cataloguesStore.setEdited(a,!1)}const o=e.filter(l=>l.catalogue);for(const l of o){const i=l.catalogue.gameSystemId;this.store.get_system(i).setCatalogue(l),electron||I.catalogues.put({content:l,id:b(l)}),this.cataloguesStore.updateCatalogue(l.catalogue),this.cataloguesStore.setEdited(b(l),!1)}delete this.$route.query.id},async editCatalogue(e){const t=m(e).id,o=m(e).gameSystemId||t;this.$router.push({name:"catalogue",query:{systemId:o,id:t}})}}}),Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAKa8AACmvAUYJFJkAAAJdSURBVFhHvddNiE1hHMfxy1yS8VYMm1mwklhYoBRqrLCgWCkvCysxXiIrS4tZmVkrCyWZTF6WSEo2SMhLFt6KsuAOMUNJ+P6cc29//55z7/Oce8evPp1zp3me+z/Pec5znltpkW7sxDk8xzh+ooY7GMRaTEJHMw3HMYrfER5gAzqSJXiK0Be1choqvnRW4BNCnce6Ad26qNh7twh3Me/vp3/zBJehkdE8WIDV2Io58LmEbVBBUZmM2/BX8xabUZSZGIAmpm+7F9HZDt/BI+hKY7IFP2Db60kJjU4wD+Eb9yIl+2D7kKNomWXwDfcjNZpP92D70ePZMgdgG33FdJTJLti+fmEuCqPJpxGw0WT8lp0m53p+rEejsjQ7DUcFzM9OG3mZH8vkPXzxTSeyCvDRsLUT377pe0IFfMxOG1mYH8tEi9iM7LSRD/kxGBWg1c1mDaZmp8lZnx9tnuXHwiyHnbmyG2VyE7Yff3GFUZW24Ts0fXwCCa2meqVHZQ9841vQWh8T3bYx2PZfEHqxBdOF+7AdyGOsRFGqOIjv8G2PISnaiHyG70iP1TXo7bYO2jNswgm8hv//urPQhSWlD34o26G9pEYpKavwBqEOyziP5CJm4SS0rIY69V7hlPubNYzkIpQeaJJdhVa0eofaAb3AGWgzUu/8COwXWxcwBW1FO97ZaHY1hxEqQEbQdhExOQQ9PaEiLuK/FKGNTlER2jWXfd8kpR9FRVxBNXmhSIx+Z2iDuxF+X7AYtYkuQFEReoK0evoi/F5kQqOl3N+OpB8vncgO6NeW3pRDlUql6w9PQiGMhlvIAAAAAABJRU5ErkJggg==";const Dt={key:0,class:"p-10px"},$t={class:"box"},Nt=s("h3",null,"My Catalogues",-1),Pt={class:"boutons"},Vt={key:0},Bt=s("p",{class:"info"},[v(" To return to this page, simply click on the 'New Recruit' icon located in the top-left corner of the screen. "),s("br"),v(" Returning to this page will not cause you to lose your changes. ")],-1),zt={class:"mx-10px box h-full pb-200px"},Tt={class:"scrollable"},jt=s("img",{class:"w-24px h-24px align-bottom icon",src:Et,title:"Search"},null,-1),Ot=["href"],Gt=["src","title"],Jt={key:0,class:"scrollable"},Rt={key:1,class:"status mx-2 text-red"},qt={key:2,class:"status mx-2"};function Mt(e,t,o,l,i,a){const n=K,c=le,u=ne,_=re,f=Ie,S=ie,A=Q("CataloguesCreate"),D=Q("CataloguesDetail"),B=oe;return r(),d(w,null,[e.electron?g("",!0):(r(),d("div",Dt,[s("div",$t,[Nt,s("div",Pt,[e.electron?(r(),F(n,{key:0,onUploaded:e.filesUploaded},null,8,["onUploaded"])):g("",!0),x(c,{onUploaded:e.filesUploaded},null,8,["onUploaded"]),x(u,{onUploaded:e.filesUploaded},null,8,["onUploaded"]),x(_)]),e.electron?(r(),d("div",Vt," Note: if you modify an already imported file in another program, you will need to import it again ")):g("",!0)])])),Bt,s("div",zt,[x(B,{showMiddle:"",showRight:"",rightWidth:400,id:"systemView"},{middle:P(()=>[s("div",Tt,[(r(!0),d(w,null,T(e.systems,y=>{var $,N;return r(),d("fieldset",null,[s("legend",null,[v(h((($=y.gameSystem)==null?void 0:$.gameSystem.name)||"Unknown GameSystem")+" ",1),x(f,{to:`/search/${y.getId()}`},{default:P(()=>[jt]),_:2},1032,["to"]),(N=y.github)!=null&&N.githubUrl?(r(),d("a",{key:0,href:y.github.githubUrl,target:"_blank"},[s("img",{class:"w-24px h-24px ml-5px align-bottom",src:e.settings.theme==="dark"?"assets/icons/github-dark.png":"assets/icons/github-light.png",title:e.githubHoverTitle(y.github)},null,8,Gt)],8,Ot)):g("",!0)]),x(S,{items:e.systemAndCatalogues(y),onItemClicked:e.itemClicked,onItemDoubleClicked:e.itemDoubleClicked,onNew:H=>e.newCatalogue(y),modelValue:e.selectedItem,"onUpdate:modelValue":t[0]||(t[0]=H=>e.selectedItem=H)},null,8,["items","onItemClicked","onItemDoubleClicked","onNew","modelValue"])])}),256))])]),right:P(()=>[e.selectedItem?(r(),d("div",Jt,[e.mode==="create"?(r(),F(A,{key:0,onCreate:e.createCatalogue,catalogue:e.selectedItem},null,8,["onCreate","catalogue"])):(r(),F(D,{key:1,onDelete:e.deleteCatalogue,onEdit:e.editCatalogue,catalogue:e.selectedItem},null,8,["onDelete","onEdit","catalogue"]))])):g("",!0)]),_:1}),e.has_unsaved_changes&&e.$route.name=="index"?(r(),F(Se,{key:0,to:"#titlebar-content"},[e.has_unsaved_changes?(r(),d("button",{key:0,class:"bouton save ml-10px !w-100px",onClick:t[1]||(t[1]=(...y)=>e.saveAll&&e.saveAll(...y))},"Save All")):e.failed?(r(),d("span",Rt,"failed to save")):(r(),d("span",qt,"saved"))])):g("",!0)])],64)}const Ht=V(Ft,[["render",Mt]]);export{Ht as default};
//# sourceMappingURL=index.7847e30b.js.map
